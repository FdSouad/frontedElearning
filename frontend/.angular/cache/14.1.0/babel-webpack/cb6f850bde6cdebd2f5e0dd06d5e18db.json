{"ast":null,"code":"import _asyncToGenerator from \"D:/StageCap2022/e-learningProject__frontend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Component } from '@angular/core';\nimport * as XLSX from \"xlsx\";\nlet DetailsSkillsMatrixComponent = class DetailsSkillsMatrixComponent {\n  constructor(modalService, data, route, modalManager, matriceDeCompetencesService, tokenService) {\n    this.modalService = modalService;\n    this.data = data;\n    this.route = route;\n    this.modalManager = modalManager;\n    this.matriceDeCompetencesService = matriceDeCompetencesService;\n    this.tokenService = tokenService;\n    this.addFormCat = new FormGroup({\n      name: new FormControl('', [Validators.required])\n    });\n    this.addFormSkill = new FormGroup({\n      name: new FormControl('', [Validators.required]),\n      nvc: new FormControl('1', [Validators.required]),\n      nvm: new FormControl('1', [Validators.required]),\n      cat: new FormControl('', [Validators.required]),\n      criticite: new FormControl('1', [Validators.required]),\n      spSc: new FormControl('sc', [Validators.required])\n    });\n    this.editFormSkill = new FormGroup({\n      name: new FormControl('', [Validators.required]),\n      nvc: new FormControl('', [Validators.required]),\n      nvm: new FormControl('', [Validators.required]),\n      cat: new FormControl('', [Validators.required]),\n      criticite: new FormControl('', [Validators.required]),\n      spSc: new FormControl('', [Validators.required])\n    });\n    this.delFormCat = new FormGroup({\n      cat: new FormControl('', [Validators.required])\n    });\n    this.editFormCat = new FormGroup({\n      cat: new FormControl('', [Validators.required]),\n      newName: new FormControl('', [Validators.required])\n    });\n    this.addQuestionForm = new FormGroup({\n      quest: new FormControl('', [Validators.required]),\n      rep1Correcte: new FormControl('', [Validators.required]),\n      rep2: new FormControl('', [Validators.required]),\n      rep3: new FormControl('', [Validators.required]),\n      rep4: new FormControl('', [Validators.required])\n    });\n    this.Backup = new FormGroup({\n      year: new FormControl('2022', [Validators.required]),\n      trimestre: new FormControl('1', [Validators.required])\n    });\n    this.notifi = false;\n    this.dataAddCat = {\n      \"name\": \"\",\n      \"matrixe\": \"\"\n    };\n    this.modalRef = {};\n    this.categoToDel = \"\";\n    this.cpt = 1;\n    this.question = {\n      \"skill\": \"\",\n      \"quest\": \"\",\n      \"rep1Correcte\": \"\",\n      \"rep2\": \"\",\n      \"rep3\": \"\",\n      \"rep4\": \"\"\n    };\n    this.dataSkill = {\n      newName: \"\",\n      name: \"\",\n      criticite: \"\",\n      niveauMin: \"\",\n      niveauCible: \"\",\n      spSc: \"\",\n      categorie: \"\"\n    };\n    this.perimetres = this.data.perimetres;\n    this.fileName = \"SkillsMatrixsheet.xlsx\";\n    this.dataoutils = [{\n      NomConsultant: 'Consultant1',\n      CatiaV5: 4,\n      VLM: 3,\n      TeamCenter: 0\n    }, {\n      NomConsultant: 'Consultant2',\n      CatiaV5: 1,\n      VLM: 4,\n      TeamCenter: 1\n    }, {\n      NomConsultant: 'Consultant3',\n      CatiaV5: 0,\n      VLM: 4,\n      TeamCenter: 2\n    }, {\n      NomConsultant: 'Consultant4',\n      CatiaV5: 3,\n      VLM: 4,\n      TeamCenter: 1\n    }];\n    this.displayedColumns = ['ID consultant', 'fullName', 'Email', 'Pole', 'Perimetre', 'Role'];\n    this.folders = [{\n      name: 'Trimestre 1',\n      updated: new Date('1/1/21')\n    }, {\n      name: 'Trimestre 2',\n      updated: new Date('5/1/21')\n    }, {\n      name: 'Trimestre 3',\n      updated: new Date('9/1/21')\n    }];\n    this.wb = XLSX.utils.book_new();\n    this.i = 1;\n  }\n\n  seeDetails(content, skill, user) {\n    this.shkun = user;\n    this.reponses = null;\n    this.matriceDeCompetencesService.getResp(skill, user).subscribe(res => {\n      this.reponses = res;\n      this.sk = skill;\n      this.open(content);\n    });\n  }\n\n  backupFunction() {\n    this.matriceDeCompetencesService.getNotesBackup(this.Backup.value.year, this.Backup.value.trimestre, this.whereIam, this.Perimetre, this.Pole).subscribe(res => {\n      this.listeEtatUsers = res;\n      this.matriceDeCompetencesService.getNotesBackup(this.Backup.value.year, this.Backup.value.trimestre, this.whereIam, this.Perimetre, this.Pole).subscribe(res => {\n        this.exportExcel();\n      });\n      console.log(JSON.stringify(this.listeEtatUsers) + \"prob exc 2\");\n    });\n  }\n\n  invite() {\n    this.matriceDeCompetencesService.invite(this.Perimetre, this.Pole).subscribe(res => {\n      this.notifi = true;\n    });\n  }\n\n  editCategorie() {\n    this.matriceDeCompetencesService.editCat(this.editFormCat.value.cat, this.editFormCat.value.newName).subscribe(res => {\n      this.getCategories();\n      this.close();\n    });\n  }\n\n  ngOnInit() {\n    this.Pole = this.route.snapshot.queryParamMap.get(\"pole\");\n    this.Perimetre = this.route.snapshot.queryParamMap.get(\"perimetre\");\n    this.Matrixe = this.route.snapshot.queryParamMap.get(\"name\");\n    this.getCategories();\n\n    if (this.tokenService.getToken() != null) {\n      if (this.tokenService.isAdmin() == true) {\n        this.role = \"admin\"; //alert(\"hi\")\n\n        this.getUsers();\n      } else if (this.tokenService.isConsultant() == true) {\n        this.role = \"consultant\";\n        this.getMyInfo();\n      } else if (this.tokenService.isTeamManager() == true) {\n        this.role = \"Team-manager\";\n        this.getUsers();\n      } else if (this.tokenService.isSpecialiste() == true) {\n        this.role = \"specialiste\";\n      }\n    }\n  }\n\n  getMyInfo() {\n    this.matriceDeCompetencesService.getUser().subscribe(res => {\n      this.users = res;\n    });\n  }\n\n  open(content) {\n    this.modalRef = this.modalService.open(content, {\n      centered: true\n    });\n    console.log(this.modalRef);\n  }\n\n  open2(content, skill) {\n    var _a, _b, _c, _d, _e;\n\n    this.skillForQuest = skill;\n    this.dataSkill.name = this.skillForQuest.name;\n    this.dataSkill.categorie = this.skillForQuest.categorie;\n    (_a = this.editFormSkill.get('name')) === null || _a === void 0 ? void 0 : _a.setValue(this.skillForQuest.name);\n    (_b = this.editFormSkill.get('spSc')) === null || _b === void 0 ? void 0 : _b.setValue(this.skillForQuest.spSc);\n    (_c = this.editFormSkill.get('nvc')) === null || _c === void 0 ? void 0 : _c.setValue(this.skillForQuest.niveauCible);\n    (_d = this.editFormSkill.get('nvm')) === null || _d === void 0 ? void 0 : _d.setValue(this.skillForQuest.niveauMin);\n    (_e = this.editFormSkill.get('criticite')) === null || _e === void 0 ? void 0 : _e.setValue(this.skillForQuest.criticite);\n    console.log(\"shuf\" + JSON.stringify(this.skillForQuest));\n    this.modalRef = this.modalService.open(content, {\n      centered: true\n    });\n    console.log(this.modalRef);\n  }\n\n  delay() {\n    return _asyncToGenerator(function* () {\n      return new Promise(resolve => setTimeout(resolve, 500));\n    })();\n  }\n\n  nextOpen(content) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.addQuestion();\n\n      _this.close();\n\n      yield _this.delay();\n\n      _this.open2(\"addQuestio\", _this.skillForQuest.name);\n\n      _this.cpt++;\n      _this.modalRef = _this.modalService.open(content, {\n        centered: true\n      });\n      console.log(_this.modalRef);\n    })();\n  }\n\n  close() {\n    this.modalManager.close(this.modalRef);\n  }\n\n  openToSee(content, skill) {\n    this.skillForDelAll = skill;\n    this.matriceDeCompetencesService.getQuestions(skill.name).subscribe(res => {\n      this.questions = res;\n      console.log(\"quests :\" + JSON.stringify(this.skillForDelAll) + JSON.stringify(this.questions));\n    });\n    this.modalRef = this.modalService.open(content, {\n      centered: true\n    });\n  }\n\n  seee() {\n    console.log(\"eawwwd \" + JSON.stringify(this.questions) + JSON.stringify(this.skillForDelAll));\n  }\n\n  reset() {\n    var _a, _b, _c, _d, _e;\n\n    (_a = this.addQuestionForm.get('quest')) === null || _a === void 0 ? void 0 : _a.setValue(\"\");\n    (_b = this.addQuestionForm.get('rep1Correcte')) === null || _b === void 0 ? void 0 : _b.setValue(\"\");\n    (_c = this.addQuestionForm.get('rep2')) === null || _c === void 0 ? void 0 : _c.setValue(\"\");\n    (_d = this.addQuestionForm.get('rep3')) === null || _d === void 0 ? void 0 : _d.setValue(\"\");\n    (_e = this.addQuestionForm.get('rep4')) === null || _e === void 0 ? void 0 : _e.setValue(\"\");\n  }\n\n  addQuestDone() {\n    this.addQuestion();\n    this.skillForQuest = null;\n    this.cpt = 1;\n    this.close();\n  }\n\n  addQuestion() {\n    console.log(\"shuf 11\" + JSON.stringify(this.skillForQuest));\n    this.question.skill = this.skillForQuest.name;\n    this.question.quest = this.addQuestionForm.value.quest;\n    this.question.rep1Correcte = this.addQuestionForm.value.rep1Correcte;\n    this.question.rep2 = this.addQuestionForm.value.rep2;\n    this.question.rep3 = this.addQuestionForm.value.rep3;\n    this.question.rep4 = this.addQuestionForm.value.rep4;\n    this.matriceDeCompetencesService.addQuestion(this.question).subscribe(res => {\n      this.reset();\n    }, err => {});\n  }\n\n  deleteAllQuest() {\n    this.matriceDeCompetencesService.deleteQuestions(this.skillForDelAll.name).subscribe(res => {\n      this.reset();\n      this.close();\n    }, err => {});\n  }\n\n  deleteCategorie() {\n    this.catToDel = this.delFormCat.value.cat;\n    this.matriceDeCompetencesService.deleteCategorie(this.catToDel).subscribe(res => {\n      this.catToDel = \"\";\n      this.getCategories();\n      this.close();\n    }, err => {});\n  }\n\n  editSki() {\n    this.dataSkill.newName = this.editFormSkill.value.name;\n    this.dataSkill.criticite = this.editFormSkill.value.criticite;\n    this.dataSkill.niveauMin = this.editFormSkill.value.nvm;\n    this.dataSkill.niveauCible = this.editFormSkill.value.nvc;\n    this.dataSkill.spSc = this.editFormSkill.value.spSc;\n    console.log(\"shuf 2\" + JSON.stringify(this.dataSkill));\n    this.matriceDeCompetencesService.editSkill(this.dataSkill).subscribe(res => {\n      this.getCategories();\n      this.close();\n    });\n  }\n\n  deleteSki(skill) {\n    this.matriceDeCompetencesService.deleteSkill(skill).subscribe(res => {\n      this.getCategories();\n      this.close();\n    });\n  }\n\n  addCategory() {\n    this.dataAddCat.name = this.addFormCat.value.name;\n    this.dataAddCat.matrixe = this.Matrixe;\n    this.addFormCat.value.name = \"\";\n    console.log(JSON.stringify(this.dataAddCat));\n    this.matriceDeCompetencesService.addCategorie(this.dataAddCat).subscribe(res => {\n      this.categories = this.getCategories();\n      this.close();\n    }, err => {});\n  }\n\n  getUsers() {\n    this.matriceDeCompetencesService.getUsers(this.Perimetre, this.Pole).subscribe(res => {\n      this.users = res;\n    });\n  }\n\n  addSki() {\n    this.dataSkill.name = this.addFormSkill.value.name;\n    this.dataSkill.criticite = this.addFormSkill.value.criticite;\n    this.dataSkill.niveauMin = this.addFormSkill.value.nvm;\n    this.dataSkill.categorie = this.addFormSkill.value.cat;\n    this.dataSkill.niveauCible = this.addFormSkill.value.nvc;\n    this.dataSkill.spSc = this.addFormSkill.value.spSc;\n    console.log(this.dataSkill);\n    this.matriceDeCompetencesService.addSkill(this.dataSkill).subscribe(res => {\n      this.getCategories();\n      this.close();\n    });\n  }\n\n  onTabChange(event) {\n    this.whereIam = event.tab.textLabel;\n\n    if (this.role != 'consultant') {\n      this.matriceDeCompetencesService.getNotes(event.tab.textLabel, this.Perimetre, this.Pole).subscribe(res => {\n        this.listeEtatUsers = res;\n        console.log(JSON.stringify(this.listeEtatUsers) + \"done\");\n      });\n    } else {\n      this.matriceDeCompetencesService.getNotesUser(event.tab.textLabel).subscribe(res => {\n        this.listeEtatUsers = res;\n        console.log(JSON.stringify(this.listeEtatUsers) + \"done\");\n      });\n    }\n\n    console.log(event.tab.textLabel + \"hiiii\"); // do something based on selected tab index\n  }\n\n  getSkills() {\n    for (let i = 0; i < this.categories.length; i++) {\n      this.matriceDeCompetencesService.getSkills(this.categories[i].name).subscribe(res => {\n        this.categories[i].skills = res;\n        console.log(\"lol\" + JSON.stringify(this.categories)); // for (let j = 0; j < this.skills.length; j++) {\n        //   this.matriceDeCompetencesService.getNotes(this.categories[i].skills[j].name, this.Perimetre, this.Pole).subscribe(\n        //     (res) => {\n        //       this.categories[i].skills[j].notes = res;\n        //       console.log(\"lol\" + JSON.stringify(this.categories))\n        //     }\n        //   )\n        // }\n      }, err => {});\n    }\n  }\n\n  getCategories() {\n    /*this.matriceDeCompetencesService.getCategories(this.Matrixe).subscribe(\r\n      (res) => {\r\n        this.categories = res;\r\n        this.close()\r\n      },\r\n      (err) => { }\r\n    )\r\n    this.matriceDeCompetencesService.getCategories(this.Matrixe).subscribe(\r\n      (res) => {\r\n        this.categories = res;\r\n      }\r\n    )\r\n    for (let i = 0; i < this.categories.length; i++) {\r\n      this.categories[i].skills = this.getSkills(this.categories[i].name);\r\n    }*/\n    this.matriceDeCompetencesService.getCategories(this.Matrixe).subscribe(result => {\n      // wait for the async response\n      this.categories = result;\n      this.getSkills();\n      console.log('I get some data from asyncCall()');\n    }); // sync code executed, even if the previous async call doesn't respond anything\n\n    console.log('Code executed after the subscription. But not waiting for it to respond');\n  }\n\n  addToExcel() {\n    let element = document.getElementById('infos-excel');\n    const ws = XLSX.utils.table_to_sheet(element);\n    XLSX.utils.book_append_sheet(this.wb, ws, 'Sheet' + this.i);\n    this.i = this.i + 1;\n  }\n\n  exportExcel() {\n    this.addToExcel();\n    XLSX.writeFile(this.wb, this.fileName);\n    console.log(JSON.stringify(this.listeEtatUsers) + \"prob exc\");\n    this.matriceDeCompetencesService.getNotes(this.whereIam, this.Perimetre, this.Pole).subscribe(res => {\n      this.listeEtatUsers = res;\n    });\n    this.close();\n  }\n\n};\nDetailsSkillsMatrixComponent = __decorate([Component({\n  selector: 'app-details-skills-matrix',\n  templateUrl: './details-skills-matrix.component.html',\n  styleUrls: ['./details-skills-matrix.component.css']\n})], DetailsSkillsMatrixComponent);\nexport { DetailsSkillsMatrixComponent };","map":{"version":3,"mappings":"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","names":["FormGroup","FormControl","Validators","Component","XLSX","DetailsSkillsMatrixComponent","constructor","modalService","data","route","modalManager","matriceDeCompetencesService","tokenService","name","required","nvc","nvm","cat","criticite","spSc","newName","quest","rep1Correcte","rep2","rep3","rep4","year","trimestre","niveauMin","niveauCible","categorie","perimetres","NomConsultant","CatiaV5","VLM","TeamCenter","updated","Date","utils","book_new","seeDetails","content","skill","user","shkun","reponses","getResp","subscribe","res","sk","open","backupFunction","getNotesBackup","Backup","value","whereIam","Perimetre","Pole","listeEtatUsers","exportExcel","console","log","JSON","stringify","invite","notifi","editCategorie","editCat","editFormCat","getCategories","close","ngOnInit","snapshot","queryParamMap","get","Matrixe","getToken","isAdmin","role","getUsers","isConsultant","getMyInfo","isTeamManager","isSpecialiste","getUser","users","modalRef","centered","open2","skillForQuest","dataSkill","editFormSkill","_a","setValue","_b","_c","_d","_e","delay","Promise","resolve","setTimeout","nextOpen","addQuestion","cpt","openToSee","skillForDelAll","getQuestions","questions","seee","reset","addQuestionForm","addQuestDone","question","err","deleteAllQuest","deleteQuestions","deleteCategorie","catToDel","delFormCat","editSki","editSkill","deleteSki","deleteSkill","addCategory","dataAddCat","addFormCat","matrixe","addCategorie","categories","addSki","addFormSkill","addSkill","onTabChange","event","tab","textLabel","getNotes","getNotesUser","getSkills","i","length","skills","result","addToExcel","element","document","getElementById","ws","table_to_sheet","book_append_sheet","wb","writeFile","fileName","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["D:\\StageCap2022\\e-learningProject__frontend\\frontend\\src\\src-app\\details-skills-matrix\\details-skills-matrix.component.ts"],"sourcesContent":["import { TokenService } from './../services/token.service';\nimport { Question } from './../../src-api/question/model';\nimport { MatriceDeCompetencesService } from './../services/matrice-de-competences.service';\nimport { ModalManager } from 'ngb-modal';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\n\nimport { AddConsultantComponent } from \"../add-consultant/add-consultant.component\";\nimport { NgbDateStruct, NgbModal } from \"@ng-bootstrap/ng-bootstrap\";\nimport { AddCompetenceComponent } from \"../add-competence/add-competence.component\";\nimport { DataService } from \"../../src-api/Data\";\nimport * as XLSX from \"xlsx\";\nimport { MatTabChangeEvent } from '@angular/material/tabs';\n\n\n@Component({\n  selector: 'app-details-skills-matrix',\n  templateUrl: './details-skills-matrix.component.html',\n  styleUrls: ['./details-skills-matrix.component.css']\n})\n\n\n\nexport class DetailsSkillsMatrixComponent implements OnInit {\n\n  constructor(private modalService: NgbModal,\n    public data: DataService,\n    private route: ActivatedRoute,\n    private modalManager: ModalManager,\n    private matriceDeCompetencesService: MatriceDeCompetencesService,\n    private tokenService: TokenService\n\n  ) {\n  }\n  addFormCat = new FormGroup({\n    name: new FormControl('', [Validators.required])\n  })\n\n  addFormSkill = new FormGroup({\n    name: new FormControl('', [Validators.required]),\n    nvc: new FormControl('1', [Validators.required]),\n    nvm: new FormControl('1', [Validators.required]),\n    cat: new FormControl('', [Validators.required]),\n    criticite: new FormControl('1', [Validators.required]),\n    spSc: new FormControl('sc', [Validators.required]),\n\n  })\n\n  editFormSkill = new FormGroup({\n    name: new FormControl('', [Validators.required]),\n    nvc: new FormControl('', [Validators.required]),\n    nvm: new FormControl('', [Validators.required]),\n    cat: new FormControl('', [Validators.required]),\n    criticite: new FormControl('', [Validators.required]),\n    spSc: new FormControl('', [Validators.required]),\n\n  })\n  delFormCat = new FormGroup({\n    cat: new FormControl('', [Validators.required]),\n\n  })\n\n  editFormCat = new FormGroup({\n    cat: new FormControl('', [Validators.required]),\n    newName: new FormControl('', [Validators.required]),\n\n  })\n\n  addQuestionForm = new FormGroup({\n    quest: new FormControl('', [Validators.required]),\n    rep1Correcte: new FormControl('', [Validators.required]),\n    rep2: new FormControl('', [Validators.required]),\n    rep3: new FormControl('', [Validators.required]),\n    rep4: new FormControl('', [Validators.required]),\n\n  })\n  Backup = new FormGroup({\n    year: new FormControl('2022', [Validators.required]),\n    trimestre: new FormControl('1', [Validators.required]),\n  });\n  reponses: any;\n  sk: any;\n  shkun: any;\n  seeDetails(content: any, skill: any, user: any) {\n    this.shkun = user;\n    this.reponses = null;\n    this.matriceDeCompetencesService.getResp(skill, user).subscribe(\n      (res) => {\n        this.reponses = res;\n        this.sk = skill;\n        this.open(content);\n      }\n    )\n  }\n  backupFunction() {\n    this.matriceDeCompetencesService.getNotesBackup(this.Backup.value.year, this.Backup.value.trimestre, this.whereIam, this.Perimetre, this.Pole).subscribe(\n      (res) => {\n        this.listeEtatUsers = res;\n        this.matriceDeCompetencesService.getNotesBackup(this.Backup.value.year, this.Backup.value.trimestre, this.whereIam, this.Perimetre, this.Pole).subscribe(\n          (res) => {\n            this.exportExcel();\n          })\n        console.log(JSON.stringify(this.listeEtatUsers) + \"prob exc 2\")\n      }\n    )\n  }\n\n  notifi: any = false;\n\n  invite() {\n    this.matriceDeCompetencesService.invite(this.Perimetre, this.Pole).subscribe(\n      (res) => {\n        this.notifi = true;\n      })\n  }\n\n  editCategorie() {\n    this.matriceDeCompetencesService.editCat(this.editFormCat.value.cat, this.editFormCat.value.newName).subscribe(\n      (res) => {\n        this.getCategories();\n        this.close();\n      }\n\n    )\n  }\n  catToDel: any\n\n  Pole: any;\n  Perimetre: any;\n  Matrixe: any;\n  role: any;\n\n  ngOnInit(): void {\n    this.Pole = this.route.snapshot.queryParamMap.get(\"pole\")!\n    this.Perimetre = this.route.snapshot.queryParamMap.get(\"perimetre\")!\n    this.Matrixe = this.route.snapshot.queryParamMap.get(\"name\")!\n    this.getCategories();\n\n    if (this.tokenService.getToken() != null) {\n      if (this.tokenService.isAdmin() == true) {\n        this.role = \"admin\";\n        //alert(\"hi\")\n        this.getUsers();\n\n      }\n      else if (this.tokenService.isConsultant() == true) {\n        this.role = \"consultant\";\n        this.getMyInfo()\n      }\n      else if (this.tokenService.isTeamManager() == true) {\n        this.role = \"Team-manager\";\n        this.getUsers();\n\n      }\n      else if (this.tokenService.isSpecialiste() == true) {\n        this.role = \"specialiste\";\n\n      }\n    }\n\n  }\n  getMyInfo() {\n    this.matriceDeCompetencesService.getUser().subscribe(\n      (res) => {\n        this.users = res;\n      }\n    )\n  }\n  dataAddCat = {\n    \"name\": \"\",\n    \"matrixe\": \"\"\n  }\n  private modalRef = {};\n  categoToDel = \"\";\n  open(content: any) {\n    this.modalRef = this.modalService.open(content, { centered: true });\n    console.log(this.modalRef);\n  }\n\n  skillForQuest: any;\n  cpt: any = 1;\n\n  open2(content: any, skill: any) {\n    this.skillForQuest = skill;\n    this.dataSkill.name = this.skillForQuest.name!;\n    this.dataSkill.categorie = this.skillForQuest.categorie;\n    this.editFormSkill.get('name')?.setValue(this.skillForQuest.name)\n    this.editFormSkill.get('spSc')?.setValue(this.skillForQuest.spSc)\n    this.editFormSkill.get('nvc')?.setValue(this.skillForQuest.niveauCible)\n    this.editFormSkill.get('nvm')?.setValue(this.skillForQuest.niveauMin)\n    this.editFormSkill.get('criticite')?.setValue(this.skillForQuest.criticite)\n    console.log(\"shuf\" + JSON.stringify(this.skillForQuest))\n\n    this.modalRef = this.modalService.open(content, { centered: true });\n    console.log(this.modalRef);\n  }\n\n  async delay() {\n    return new Promise(resolve => setTimeout(resolve, 500));\n  }\n  async nextOpen(content: any) {\n    this.addQuestion();\n    this.close()\n    await this.delay();\n    this.open2(\"addQuestio\", this.skillForQuest.name);\n    this.cpt++;\n    this.modalRef = this.modalService.open(content, { centered: true });\n    console.log(this.modalRef);\n  }\n  close() {\n    this.modalManager.close(this.modalRef);\n\n  }\n  question = {\n    \"skill\": \"\",\n    \"quest\": \"\",\n    \"rep1Correcte\": \"\",\n    \"rep2\": \"\",\n    \"rep3\": \"\",\n    \"rep4\": \"\"\n  };\n  questions: any;\n  skillForDelAll: any;\n  openToSee(content: any, skill: any) {\n    this.skillForDelAll = skill;\n\n    this.matriceDeCompetencesService.getQuestions(skill.name).subscribe(\n      (res) => {\n        this.questions = res;\n        console.log(\"quests :\" + JSON.stringify(this.skillForDelAll) + JSON.stringify(this.questions))\n      }\n    )\n    this.modalRef = this.modalService.open(content, { centered: true });\n  }\n\n  seee() {\n    console.log(\"eawwwd \" + JSON.stringify(this.questions) + JSON.stringify(this.skillForDelAll));\n\n  }\n\n  reset() {\n    this.addQuestionForm.get('quest')?.setValue(\"\")\n    this.addQuestionForm.get('rep1Correcte')?.setValue(\"\")\n    this.addQuestionForm.get('rep2')?.setValue(\"\")\n    this.addQuestionForm.get('rep3')?.setValue(\"\")\n    this.addQuestionForm.get('rep4')?.setValue(\"\")\n  }\n  addQuestDone() {\n    this.addQuestion();\n    this.skillForQuest = null;\n    this.cpt = 1;\n    this.close();\n\n  }\n  addQuestion() {\n    console.log(\"shuf 11\" + JSON.stringify(this.skillForQuest));\n\n    this.question.skill = this.skillForQuest.name;\n    this.question.quest = this.addQuestionForm.value.quest!;\n    this.question.rep1Correcte = this.addQuestionForm.value.rep1Correcte!;\n    this.question.rep2 = this.addQuestionForm.value.rep2!;\n    this.question.rep3 = this.addQuestionForm.value.rep3!;\n    this.question.rep4 = this.addQuestionForm.value.rep4!;\n\n    this.matriceDeCompetencesService.addQuestion(this.question).subscribe(\n      (res) => {\n        this.reset()\n      },\n      (err) => { }\n    )\n  }\n\n  deleteAllQuest() {\n    this.matriceDeCompetencesService.deleteQuestions(this.skillForDelAll.name).subscribe(\n      (res) => {\n        this.reset()\n        this.close()\n      },\n      (err) => { }\n    )\n  }\n\n  deleteCategorie() {\n    this.catToDel = this.delFormCat.value.cat!;\n    this.matriceDeCompetencesService.deleteCategorie(this.catToDel).subscribe(\n      (res) => {\n        this.catToDel = \"\"\n        this.getCategories()\n        this.close()\n      },\n      (err) => { }\n    )\n  }\n\n  editSki() {\n    this.dataSkill.newName = this.editFormSkill.value.name!;\n    this.dataSkill.criticite = this.editFormSkill.value.criticite!;\n    this.dataSkill.niveauMin = this.editFormSkill.value.nvm!;\n    this.dataSkill.niveauCible = this.editFormSkill.value.nvc!;\n    this.dataSkill.spSc = this.editFormSkill.value.spSc!;\n    console.log(\"shuf 2\" + JSON.stringify(this.dataSkill));\n\n    this.matriceDeCompetencesService.editSkill(this.dataSkill).subscribe(\n      (res) => {\n        this.getCategories();\n        this.close()\n      }\n    )\n  }\n  deleteSki(skill: any) {\n    this.matriceDeCompetencesService.deleteSkill(skill).subscribe(\n      (res) => {\n        this.getCategories();\n        this.close()\n      }\n    )\n  }\n  addCategory() {\n\n    this.dataAddCat.name = this.addFormCat.value.name!;\n    this.dataAddCat.matrixe = this.Matrixe;\n    this.addFormCat.value.name = \"\";\n    console.log(JSON.stringify(this.dataAddCat))\n    this.matriceDeCompetencesService.addCategorie(this.dataAddCat).subscribe(\n      (res) => {\n        this.categories = this.getCategories();\n        this.close()\n      },\n      (err) => { }\n    )\n  }\n\n  dataSkill = {\n    newName: \"\",\n    name: \"\",\n    criticite: \"\",\n    niveauMin: \"\",\n    niveauCible: \"\",\n    spSc: \"\",\n    categorie: \"\"\n  }\n  users: any;\n  getUsers() {\n    this.matriceDeCompetencesService.getUsers(this.Perimetre, this.Pole).subscribe(\n      (res) => {\n        this.users = res;\n      }\n    )\n  }\n\n  addSki() {\n\n    this.dataSkill.name = this.addFormSkill.value.name!;\n    this.dataSkill.criticite = this.addFormSkill.value.criticite!;\n    this.dataSkill.niveauMin = this.addFormSkill.value.nvm!;\n    this.dataSkill.categorie = this.addFormSkill.value.cat!;\n    this.dataSkill.niveauCible = this.addFormSkill.value.nvc!;\n    this.dataSkill.spSc = this.addFormSkill.value.spSc!;\n\n    console.log(this.dataSkill)\n    this.matriceDeCompetencesService.addSkill(this.dataSkill).subscribe(\n      (res) => {\n        this.getCategories();\n        this.close()\n      }\n    )\n\n  }\n  categories: any;\n  listeEtatUsers: any;\n  whereIam: any;\n  onTabChange(event: MatTabChangeEvent) {\n    this.whereIam = event.tab.textLabel;\n    if (this.role != 'consultant') {\n      this.matriceDeCompetencesService.getNotes(event.tab.textLabel, this.Perimetre, this.Pole).subscribe(\n        (res) => {\n          this.listeEtatUsers = res;\n          console.log(JSON.stringify(this.listeEtatUsers) + \"done\");\n\n        }\n      )\n    }\n    else {\n      this.matriceDeCompetencesService.getNotesUser(event.tab.textLabel).subscribe(\n        (res) => {\n          this.listeEtatUsers = res;\n          console.log(JSON.stringify(this.listeEtatUsers) + \"done\");\n\n        }\n      )\n    }\n    console.log(event.tab.textLabel + \"hiiii\");\n\n    // do something based on selected tab index\n  }\n  getSkills(): any {\n    for (let i = 0; i < this.categories.length; i++) {\n\n      this.matriceDeCompetencesService.getSkills(this.categories[i].name).subscribe(\n        (res) => {\n          this.categories[i].skills = res\n          console.log(\"lol\" + JSON.stringify(this.categories))\n          // for (let j = 0; j < this.skills.length; j++) {\n\n          //   this.matriceDeCompetencesService.getNotes(this.categories[i].skills[j].name, this.Perimetre, this.Pole).subscribe(\n          //     (res) => {\n          //       this.categories[i].skills[j].notes = res;\n          //       console.log(\"lol\" + JSON.stringify(this.categories))\n          //     }\n          //   )\n\n          // }\n        },\n        (err) => { }\n      )\n    }\n  }\n  name: any;\n  getCategories() {\n    /*this.matriceDeCompetencesService.getCategories(this.Matrixe).subscribe(\n      (res) => {\n        this.categories = res;\n        this.close()\n      },\n      (err) => { }\n    )\n    this.matriceDeCompetencesService.getCategories(this.Matrixe).subscribe(\n      (res) => {\n        this.categories = res;\n      }\n    )\n    for (let i = 0; i < this.categories.length; i++) {\n      this.categories[i].skills = this.getSkills(this.categories[i].name);\n    }*/\n    this.matriceDeCompetencesService.getCategories(this.Matrixe).subscribe((result) => {\n      // wait for the async response\n      this.categories = result;\n      this.getSkills();\n\n      console.log('I get some data from asyncCall()');\n    });\n    // sync code executed, even if the previous async call doesn't respond anything\n    console.log('Code executed after the subscription. But not waiting for it to respond');\n  }\n\n\n  perimetres = this.data.perimetres;\n\n  fileName = \"SkillsMatrixsheet.xlsx\";\n\n\n  dataoutils: Competence[] = [\n    { NomConsultant: 'Consultant1', CatiaV5: 4, VLM: 3, TeamCenter: 0 },\n    { NomConsultant: 'Consultant2', CatiaV5: 1, VLM: 4, TeamCenter: 1 },\n    { NomConsultant: 'Consultant3', CatiaV5: 0, VLM: 4, TeamCenter: 2 },\n    { NomConsultant: 'Consultant4', CatiaV5: 3, VLM: 4, TeamCenter: 1 },\n  ];\n\n\n  displayedColumns =\n    ['ID consultant', 'fullName', 'Email', 'Pole', 'Perimetre', 'Role'];\n\n  folders: Section[] = [\n    {\n      name: 'Trimestre 1',\n      updated: new Date('1/1/21'),\n    },\n    {\n      name: 'Trimestre 2',\n      updated: new Date('5/1/21'),\n    },\n    {\n      name: 'Trimestre 3',\n      updated: new Date('9/1/21'),\n    }\n  ];\n\n  wb: XLSX.WorkBook = XLSX.utils.book_new();\n  i = 1;\n  addToExcel(): void {\n    let element = document.getElementById('infos-excel');\n    const ws: XLSX.WorkSheet = XLSX.utils.table_to_sheet(element);\n    XLSX.utils.book_append_sheet(this.wb, ws, 'Sheet' + this.i);\n\n    this.i = this.i + 1;\n  }\n\n  exportExcel() {\n    this.addToExcel()\n\n    XLSX.writeFile(this.wb, this.fileName);\n    console.log(JSON.stringify(this.listeEtatUsers) + \"prob exc\")\n\n    this.matriceDeCompetencesService.getNotes(this.whereIam, this.Perimetre, this.Pole).subscribe(\n      (res) => {\n        this.listeEtatUsers = res;\n\n      }\n    )\n    this.close()\n  }\n\n}\n\n\nexport interface Competence {\n  NomConsultant?: string;\n  critique?: string;\n  NiveauMin?: number;\n  NiveauCible?: number;\n  CatiaV5?: number;\n  VLM?: number;\n  TeamCenter: number;\n}\n\nexport interface Section {\n  name: string;\n  updated: Date;\n}\n\n\n"]},"metadata":{},"sourceType":"module"}