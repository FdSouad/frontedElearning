{"ast":null,"code":"import { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n/**\n * IncrementalSearch module file\n */\n\nvar queryString = '';\nvar prevString = '';\nvar matches$1 = [];\nvar activeClass = 'e-active';\nvar prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\n\nfunction incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId) {\n  queryString += String.fromCharCode(keyCode);\n  setTimeout(function () {\n    queryString = '';\n  }, 1000);\n  var index;\n  queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n\n  if (prevElementId === elementId && prevString === queryString) {\n    for (var i = 0; i < matches$1.length; i++) {\n      if (matches$1[i].classList.contains(activeClass)) {\n        index = i;\n        break;\n      }\n    }\n\n    index = index + 1;\n    return matches$1[index] ? matches$1[index] : matches$1[0];\n  } else {\n    var listItems = items;\n    var strLength = queryString.length;\n    var text = void 0;\n    var item = void 0;\n    selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n    var i = selectedIndex;\n    matches$1 = [];\n\n    do {\n      if (i === listItems.length) {\n        i = -1;\n      }\n\n      if (i === -1) {\n        index = 0;\n      } else {\n        index = i;\n      }\n\n      item = listItems[index];\n      text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n\n      if (text.substr(0, strLength) === queryString) {\n        matches$1.push(listItems[index]);\n      }\n\n      i++;\n    } while (i !== selectedIndex);\n\n    prevString = queryString;\n    prevElementId = elementId;\n    return matches$1[0];\n  }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\n\n\nfunction Search(inputVal, items, searchType, ignoreCase) {\n  var listItems = items;\n  ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n  var itemData = {\n    item: null,\n    index: null\n  };\n\n  if (inputVal && inputVal.length) {\n    var strLength = inputVal.length;\n    var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n    queryStr = escapeCharRegExp(queryStr);\n\n    for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {\n      var item = itemsData[i];\n      var text = (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n\n      if (searchType === 'Equal' && text === queryStr || searchType === 'StartsWith' && text.substr(0, strLength) === queryStr || searchType === 'EndsWith' && text.substr(text.length - queryStr.length) === queryStr || searchType === 'Contains' && new RegExp(queryStr, \"g\").test(text)) {\n        itemData.item = item;\n        itemData.index = i;\n        return {\n          item: item,\n          index: i\n        };\n      }\n    }\n\n    return itemData;\n  }\n\n  return itemData;\n}\n\nfunction escapeCharRegExp(value) {\n  return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction resetIncrementalSearchValues(elementId) {\n  if (prevElementId === elementId) {\n    prevElementId = '';\n    prevString = '';\n    queryString = '';\n    matches$1 = [];\n  }\n}\n/* eslint-disable jsdoc/require-param, valid-jsdoc */\n\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\n\n\nfunction highlightSearch(element, query, ignoreCase, type) {\n  if (query === '') {\n    return;\n  } else {\n    var ignoreRegex = ignoreCase ? 'gim' : 'gm'; // eslint-disable-next-line\n\n    query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    var replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ? '(' + query + ')$' : '(' + query + ')';\n    findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n  }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\n\n\nfunction findTextNode(element, pattern) {\n  for (var index = 0; element.childNodes && index < element.childNodes.length; index++) {\n    if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n      var value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n      element.childNodes[index].nodeValue = '';\n      element.innerHTML = element.innerHTML.trim() + value;\n      break;\n    } else {\n      findTextNode(element.childNodes[index], pattern);\n    }\n  }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\n\n\nfunction revertHighlightSearch(content) {\n  var contentElement = content.querySelectorAll('.e-highlight');\n\n  for (var i = contentElement.length - 1; i >= 0; i--) {\n    var parent_1 = contentElement[i].parentNode;\n    var text = document.createTextNode(contentElement[i].textContent);\n    parent_1.replaceChild(text, contentElement[i]);\n  }\n}\n/**\n * Common source\n */\n\n\nvar __extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar FieldSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends(FieldSettings, _super);\n\n  function FieldSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property()], FieldSettings.prototype, \"text\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"value\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"iconCss\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"groupBy\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"htmlAttributes\", void 0);\n\n  return FieldSettings;\n}(ChildProperty);\n\nvar dropDownBaseClasses = {\n  root: 'e-dropdownbase',\n  rtl: 'e-rtl',\n  content: 'e-content',\n  selected: 'e-active',\n  hover: 'e-hover',\n  noData: 'e-nodata',\n  fixedHead: 'e-fixed-head',\n  focus: 'e-item-focus',\n  li: 'e-list-item',\n  group: 'e-list-group-item',\n  disabled: 'e-disabled',\n  grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar DISPLAYTEMPLATE_PROPERTY = 'DisplayTemplate';\nvar SPINNERTEMPLATE_PROPERTY = 'SpinnerTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\n\nvar DropDownBase =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends(DropDownBase, _super);\n  /**\n   * * Constructor for DropDownBase class\n   *\n   * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function DropDownBase(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.preventChange = false;\n    _this.isAngular = false;\n    _this.isPreventChange = false;\n    _this.isDynamicDataChange = false;\n    _this.addedNewItem = false;\n    return _this;\n  }\n\n  DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n    var newProperty = new Object();\n    var oldProperty = new Object();\n\n    var propName = function (prop) {\n      return prop;\n    };\n\n    newProperty[propName(prop)] = newProp[propName(prop)];\n    oldProperty[propName(prop)] = oldProp[propName(prop)];\n    var data = new Object();\n    data.newProperty = newProperty;\n    data.oldProperty = oldProperty;\n    return data;\n  };\n\n  DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n    var value = null;\n\n    if (!isNullOrUndefined(this.listData)) {\n      if (ignoreCase) {\n        value = this.checkValueCase(text, true, ignoreAccent);\n      } else {\n        value = this.checkValueCase(text, false, ignoreAccent);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n    var _this = this;\n\n    var value = null;\n\n    if (isTextByValue) {\n      value = text;\n    }\n\n    var dataSource = this.listData;\n    var fields = this.fields;\n    var type = this.typeOfData(dataSource).typeof;\n\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n        var item = dataSource_1[_i];\n\n        if (!isNullOrUndefined(item)) {\n          if (ignoreAccent) {\n            value = this.checkingAccent(String(item), text, ignoreCase);\n          } else {\n            if (ignoreCase) {\n              if (this.checkIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n              }\n            } else {\n              if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n              }\n            }\n          }\n        }\n      }\n    } else {\n      if (ignoreCase) {\n        dataSource.filter(function (item) {\n          var itemValue = getValue(fields.value, item);\n\n          if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n            value = getValue(fields.value, item);\n          }\n        });\n      } else {\n        if (isTextByValue) {\n          var compareValue_1 = null;\n          compareValue_1 = value;\n          dataSource.filter(function (item) {\n            var itemValue = getValue(fields.value, item);\n\n            if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n              value = getValue(fields.text, item);\n            }\n          });\n        } else {\n          dataSource.filter(function (item) {\n            if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n              value = getValue(fields.value, item);\n            }\n          });\n        }\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n    var dataItem = DataUtil.ignoreDiacritics(String(item));\n    var textItem = DataUtil.ignoreDiacritics(text.toString());\n    var value = null;\n\n    if (ignoreCase) {\n      if (this.checkIgnoreCase(dataItem, textItem)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    } else {\n      if (this.checkNonIgnoreCase(String(item), text)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n    return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n  };\n\n  DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n    return String(item) === text.toString() ? true : false;\n  };\n\n  DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n    var value = null;\n    var dataSource = this.listData;\n    var type = this.typeOfData(dataSource).typeof;\n\n    if (isTextByValue) {\n      value = dataItem.toString();\n    } else {\n      if (ignoreCase) {\n        value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n      } else {\n        value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n    var checkTemplate = false;\n\n    if (baseTemplate) {\n      try {\n        checkTemplate = selectAll(baseTemplate, document).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n    var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n\n    if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n      var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n      var compiledString = void 0;\n      var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n      ele.innerHTML = '';\n      var tempaltecheck = this.templateCompiler(template);\n\n      if (tempaltecheck) {\n        compiledString = compile(select(template, document).innerHTML.trim());\n      } else {\n        compiledString = compile(template);\n      }\n\n      var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n\n      if (noDataCompTemp && noDataCompTemp.length > 0) {\n        for (var i = 0; i < noDataCompTemp.length; i++) {\n          ele.appendChild(noDataCompTemp[i]);\n        }\n      }\n\n      this.renderReactTemplates();\n    } else {\n      var l10nLocale = {\n        noRecordsTemplate: 'No records found',\n        actionFailureTemplate: 'Request failed'\n      };\n      var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n\n      if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n        this.l10n = componentLocale;\n      } else {\n        this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : 'dropdowns', l10nLocale, this.locale);\n      }\n\n      var content = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n\n      if (this.getModuleName() === 'listbox') {\n        var liElem = this.createElement('li');\n        liElem.textContent = content;\n        ele.appendChild(liElem);\n        liElem.classList.add('e-list-nrt');\n        liElem.setAttribute('role', 'option');\n      } else {\n        ele.innerHTML = content;\n      }\n    }\n  };\n\n  DropDownBase.prototype.getLocaleName = function () {\n    return 'drop-down-base';\n  };\n\n  DropDownBase.prototype.getTextByValue = function (value) {\n    var text = this.checkValueCase(value, false, false, true);\n    return text;\n  };\n\n  DropDownBase.prototype.getFormattedValue = function (value) {\n    if (this.listData && this.listData.length) {\n      var item = this.typeOfData(this.listData);\n\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'number' || item.typeof === 'number') {\n        return parseFloat(value);\n      }\n\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'boolean' || item.typeof === 'boolean') {\n        return value === 'true' || '' + value === 'true';\n      }\n    }\n\n    return value;\n  };\n  /**\n   * Sets RTL to dropdownbase wrapper\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setEnableRtl = function () {\n    if (this.list) {\n      this.enableRtlElements.push(this.list);\n    }\n\n    if (this.enableRtl) {\n      addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n    } else {\n      removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n    }\n  };\n  /**\n   * Initialize the Component.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.initialize = function (e) {\n    this.bindEvent = true;\n    this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n\n    if (this.element.tagName === 'UL') {\n      var jsonElement = ListBase.createJsonFromElement(this.element);\n      this.setProperties({\n        fields: {\n          text: 'text',\n          value: 'text'\n        }\n      }, true);\n      this.resetList(jsonElement, this.fields);\n    } else if (this.element.tagName === 'SELECT') {\n      var dataSource = this.dataSource instanceof Array ? this.dataSource.length > 0 ? true : false : !isNullOrUndefined(this.dataSource) ? true : false;\n\n      if (!dataSource) {\n        this.renderItemsBySelect();\n      } else if (this.isDynamicDataChange) {\n        this.setListData(this.dataSource, this.fields, this.query);\n      }\n    } else {\n      this.setListData(this.dataSource, this.fields, this.query, e);\n    }\n  };\n  /**\n   * Get the properties to be maintained in persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  DropDownBase.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setEnabled = function () {\n    this.element.setAttribute('aria-disabled', this.enabled ? 'false' : 'true');\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @param {string} value - Specifies the attribute values to add on the input element.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.updateDataAttribute = function (value) {\n    var invalidAttr = ['class', 'style', 'id', 'type', 'aria-expanded', 'aria-autocomplete', 'aria-readonly'];\n    var attr = {};\n\n    for (var a = 0; a < this.element.attributes.length; a++) {\n      if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n        attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n      }\n    }\n\n    extend(attr, value, attr);\n    this.setProperties({\n      htmlAttributes: attr\n    }, true);\n  };\n\n  DropDownBase.prototype.renderItemsBySelect = function () {\n    var element = this.element;\n    var fields = {\n      value: 'value',\n      text: 'text'\n    };\n    var jsonElement = [];\n    var group = element.querySelectorAll('select>optgroup');\n    var option = element.querySelectorAll('select>option');\n    this.getJSONfromOption(jsonElement, option, fields);\n\n    if (group.length) {\n      for (var i = 0; i < group.length; i++) {\n        var item = group[i];\n        var optionGroup = {};\n        optionGroup[fields.text] = item.label;\n        optionGroup.isHeader = true;\n        var child = item.querySelectorAll('option');\n        jsonElement.push(optionGroup);\n        this.getJSONfromOption(jsonElement, child, fields);\n      }\n\n      element.querySelectorAll('select>option');\n    }\n\n    this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n    this.resetList(jsonElement, fields);\n  };\n\n  DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n    var field = {\n      'fields': {\n        text: text,\n        value: value,\n        groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n        htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n        iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n      }\n    };\n    this.setProperties(field, true);\n  };\n\n  DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n    for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n      var option = options_1[_i];\n      var json = {};\n      json[fields.text] = option.innerText;\n      json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ? option.getAttribute(fields.value) : option.innerText;\n      items.push(json);\n    }\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.preRender = function () {\n    // there is no event handler\n    this.scrollTimer = -1;\n    this.enableRtlElements = [];\n    this.isRequested = false;\n    this.isDataFetched = false;\n    this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n    this.displayTemplateId = \"\" + this.element.id + DISPLAYTEMPLATE_PROPERTY;\n    this.spinnerTemplateId = \"\" + this.element.id + SPINNERTEMPLATE_PROPERTY;\n    this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n    this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n    this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n    this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n    this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n  };\n  /**\n   * Creates the list items of DropDownBase component.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setListData = function (dataSource, fields, query, event) {\n    var _this = this;\n\n    fields = fields ? fields : this.fields;\n    var ulElement;\n    this.isActive = true;\n    var eventArgs = {\n      cancel: false,\n      data: dataSource,\n      query: query\n    };\n    this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n    this.trigger('actionBegin', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.showSpinner();\n\n        if (dataSource instanceof DataManager) {\n          _this.isRequested = true;\n\n          if (_this.isDataFetched) {\n            _this.emptyDataRequest(fields);\n\n            return;\n          }\n\n          eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n            _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n\n            _this.trigger('actionComplete', e, function (e) {\n              if (!e.cancel) {\n                var listItems = e.result;\n\n                if (listItems.length === 0) {\n                  _this.isDataFetched = true;\n                }\n\n                ulElement = _this.renderItems(listItems, fields);\n\n                if (_this.groupTemplate) {\n                  _this.renderGroupTemplate(ulElement);\n                }\n\n                _this.onActionComplete(ulElement, listItems, e);\n\n                _this.isRequested = false;\n\n                _this.bindChildItems(listItems, ulElement, fields, e);\n              }\n            });\n          }).catch(function (e) {\n            _this.isRequested = false;\n\n            _this.onActionFailure(e);\n\n            _this.hideSpinner();\n          });\n        } else {\n          var dataManager = new DataManager(eventArgs.data);\n\n          var listItems = _this.getQuery(eventArgs.query).executeLocal(dataManager);\n\n          var localDataArgs = {\n            cancel: false,\n            result: listItems\n          };\n          _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n\n          _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n            if (!localDataArgs.cancel) {\n              ulElement = _this.renderItems(localDataArgs.result, fields);\n\n              _this.onActionComplete(ulElement, localDataArgs.result, event);\n\n              if (_this.groupTemplate) {\n                _this.renderGroupTemplate(ulElement);\n              }\n\n              _this.bindChildItems(localDataArgs.result, ulElement, fields);\n\n              setTimeout(function () {\n                if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || _this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)) {\n                  _this.updateDataList();\n                }\n              });\n            }\n          });\n        }\n      }\n    });\n  };\n\n  DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n    var _this = this;\n\n    if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n      setTimeout(function () {\n        var childNode = _this.remainingItems(_this.sortedData, fields);\n\n        append(childNode, ulElement);\n        _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n\n        _this.updateListValues();\n\n        _this.raiseDataBound(listItems, e);\n      }, 0);\n    } else {\n      this.raiseDataBound(listItems, e);\n    }\n  };\n\n  DropDownBase.prototype.updateListValues = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n    var liElement = null;\n\n    if (list) {\n      var listArr = [].slice.call(list.querySelectorAll(findNode));\n\n      for (var index = 0; index < listArr.length; index++) {\n        if (listArr[index].getAttribute(attribute) === value + '') {\n          liElement = listArr[index];\n          break;\n        }\n      }\n    }\n\n    return liElement;\n  };\n\n  DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n    this.hideSpinner();\n    var dataBoundEventArgs = {\n      items: listItems,\n      e: e\n    };\n    this.trigger('dataBound', dataBoundEventArgs);\n  };\n\n  DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n    var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n\n    if (this.itemTemplate) {\n      var listElements = this.templateListItem(spliceData, fields);\n      return [].slice.call(listElements.childNodes);\n    }\n\n    var type = this.typeOfData(spliceData).typeof;\n\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n    }\n\n    return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n  };\n\n  DropDownBase.prototype.emptyDataRequest = function (fields) {\n    var listItems = [];\n    this.onActionComplete(this.renderItems(listItems, fields), listItems);\n    this.isRequested = false;\n    this.hideSpinner();\n  };\n\n  DropDownBase.prototype.showSpinner = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.hideSpinner = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.onActionFailure = function (e) {\n    this.liCollections = [];\n    this.trigger('actionFailure', e);\n    this.l10nUpdate(true);\n    addClass([this.list], dropDownBaseClasses.noData);\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    this.listData = list; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n    }\n\n    this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n\n    if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n      for (var i = 0; i < ulElement.childElementCount; i++) {\n        if (ulElement.children[i].classList.contains('e-list-group-item')) {\n          if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n            addClass([ulElement.children[i]], HIDE_GROUPLIST);\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(this.list)) {\n      this.list.innerHTML = '';\n      this.list.appendChild(ulElement);\n      this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n      this.ulElement = this.list.querySelector('ul');\n      this.postRender(this.list, list, this.bindEvent);\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n    var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n\n    if (focusItem && !selectedItem) {\n      focusItem.classList.add(dropDownBaseClasses.focus);\n    }\n\n    if (list.length <= 0) {\n      this.l10nUpdate();\n      addClass([listElement], dropDownBaseClasses.noData);\n    } else {\n      listElement.classList.remove(dropDownBaseClasses.noData);\n    }\n  };\n  /**\n   * Get the query to do the data operation before list item generation.\n   *\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {Query} Returns the query to do the data query operation.\n   */\n\n\n  DropDownBase.prototype.getQuery = function (query) {\n    return query ? query : this.query ? this.query : new Query();\n  };\n  /**\n   * To render the template content for group header element.\n   *\n   * @param {HTMLElement} listEle - Specifies the group list elements.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n    if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n      var dataSource = this.dataSource;\n      var option = {\n        groupTemplateID: this.groupTemplateId,\n        isStringTemplate: this.isStringTemplate\n      };\n      var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n      var groupcheck = this.templateCompiler(this.groupTemplate);\n\n      if (groupcheck) {\n        var groupValue = select(this.groupTemplate, document).innerHTML.trim(); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n        var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this); //EJ2-55168- Group checkbox is not working with group template\n\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this); //EJ2-55168- Group checkbox is not working with group template\n\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      }\n\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * To create the ul li list items\n   *\n   * @param {object []} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the ul li list items.\n   */\n\n\n  DropDownBase.prototype.createListItems = function (dataSource, fields) {\n    if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n      if (fields.groupBy) {\n        if (this.sortOrder !== 'None') {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n\n        dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n      }\n\n      addClass([this.list], dropDownBaseClasses.grouping);\n    } else {\n      dataSource = this.getSortedDataSource(dataSource);\n    }\n\n    var options = this.listOption(dataSource, fields);\n    var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n    this.sortedData = dataSource;\n    return ListBase.createList(this.createElement, this.getModuleName() === 'autocomplete' ? spliceData : dataSource, options, true, this);\n  };\n\n  DropDownBase.prototype.listOption = function (dataSource, fields) {\n    var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n    var fieldValues = !isNullOrUndefined(fields.properties) ? fields.properties : fields;\n    var options = fields.text !== null || fields.value !== null ? {\n      fields: fieldValues,\n      showIcon: iconCss,\n      ariaAttributes: {\n        groupItemRole: 'presentation'\n      }\n    } : {\n      fields: {\n        value: 'text'\n      }\n    };\n    return extend({}, options, fields, true);\n  };\n\n  DropDownBase.prototype.setFloatingHeader = function (e) {\n    if (isNullOrUndefined(this.fixedHeaderElement)) {\n      this.fixedHeaderElement = this.createElement('div', {\n        className: dropDownBaseClasses.fixedHead\n      });\n\n      if (!this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n        this.fixedHeaderElement.style.display = 'none';\n      }\n\n      prepend([this.fixedHeaderElement], this.list);\n      this.setFixedHeader();\n    }\n\n    if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n      this.setFixedHeader();\n    }\n\n    this.scrollStop(e);\n  };\n\n  DropDownBase.prototype.scrollStop = function (e) {\n    var target = !isNullOrUndefined(e) ? e.target : this.list;\n    var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n    var topIndex = Math.round(target.scrollTop / liHeight);\n    var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n\n    for (var i = topIndex; i > -1; i--) {\n      if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n        var currentLi = liCollections[i];\n        this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n        this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n        this.fixedHeaderElement.style.display = 'block';\n        break;\n      } else {\n        this.fixedHeaderElement.style.display = 'none';\n        this.fixedHeaderElement.style.top = 'none';\n      }\n    }\n  };\n\n  DropDownBase.prototype.getValidLi = function () {\n    return this.liCollections[0];\n  };\n  /**\n   * To render the list items\n   *\n   * @param {object[]} listData - Specifies the list of array of data.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the list items.\n   */\n\n\n  DropDownBase.prototype.renderItems = function (listData, fields) {\n    var ulElement;\n\n    if (this.itemTemplate && listData) {\n      var dataSource = listData;\n\n      if (dataSource && fields.groupBy) {\n        if (this.sortOrder !== 'None') {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n\n        dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n      } else {\n        dataSource = this.getSortedDataSource(dataSource);\n      }\n\n      this.sortedData = dataSource;\n      var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n      ulElement = this.templateListItem(this.getModuleName() === 'autocomplete' ? spliceData : dataSource, fields);\n    } else {\n      ulElement = this.createListItems(listData, fields);\n    }\n\n    return ulElement;\n  };\n\n  DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n    var option = this.listOption(dataSource, fields);\n    option.templateID = this.itemTemplateId;\n    option.isStringTemplate = this.isStringTemplate;\n    var itemcheck = this.templateCompiler(this.itemTemplate);\n\n    if (itemcheck) {\n      var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n      return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n    } else {\n      return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n    }\n  };\n\n  DropDownBase.prototype.typeOfData = function (items) {\n    var item = {\n      typeof: null,\n      item: null\n    };\n\n    for (var i = 0; !isNullOrUndefined(items) && i < items.length; i++) {\n      if (!isNullOrUndefined(items[i])) {\n        var listDataType = typeof items[i] === 'string' || typeof items[i] === 'number' || typeof items[i] === 'boolean';\n        var isNullData = listDataType ? isNullOrUndefined(items[i]) : isNullOrUndefined(getValue(this.fields.value ? this.fields.value : 'value', items[i]));\n\n        if (!isNullData) {\n          return item = {\n            typeof: typeof items[i],\n            item: items[i]\n          };\n        }\n      }\n    }\n\n    return item;\n  };\n\n  DropDownBase.prototype.setFixedHeader = function () {\n    this.list.parentElement.style.display = 'block';\n    var borderWidth = 0;\n\n    if (this.list && this.list.parentElement) {\n      borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n      /*Shorthand property not working in Firefox for getComputedStyle method.\n      Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n      Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n\n      if (isNaN(borderWidth)) {\n        var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n        var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n        var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n        var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n        borderWidth = borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth;\n      }\n    }\n\n    var liWidth = this.getValidLi().offsetWidth - borderWidth;\n    this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n    setStyleAttribute(this.fixedHeaderElement, {\n      zIndex: 10\n    });\n    var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n    this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n  };\n\n  DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n    if (dataSource && this.sortOrder !== 'None') {\n      var textField = this.fields.text ? this.fields.text : 'text';\n\n      if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number' || this.typeOfData(dataSource).typeof === 'boolean') {\n        textField = '';\n      }\n\n      dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n    }\n\n    return dataSource;\n  };\n  /**\n   * Return the index of item which matched with given value in data source\n   *\n   * @param {string | number | boolean} value - Specifies given value.\n   * @returns {number} Returns the index of the item.\n   */\n\n\n  DropDownBase.prototype.getIndexByValue = function (value) {\n    var index;\n    var listItems = this.getItems();\n\n    for (var i = 0; i < listItems.length; i++) {\n      if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n        index = i;\n        break;\n      }\n    }\n\n    return index;\n  };\n  /**\n   * To dispatch the event manually\n   *\n   * @param {HTMLElement} element - Specifies the element to dispatch the event.\n   * @param {string} type - Specifies the name of the event.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.dispatchEvent = function (element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n  };\n  /**\n   * To set the current fields\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setFields = function () {\n    if (this.fields.value && !this.fields.text) {\n      this.updateFields(this.fields.value, this.fields.value);\n    } else if (!this.fields.value && this.fields.text) {\n      this.updateFields(this.fields.text, this.fields.text);\n    } else if (!this.fields.value && !this.fields.text) {\n      this.updateFields('text', 'text');\n    }\n  };\n  /**\n   * reset the items list.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.resetList = function (dataSource, fields, query, e) {\n    if (this.list) {\n      if (this.element.tagName === 'SELECT' && this.element.options.length > 0 || this.element.tagName === 'UL' && this.element.childNodes.length > 0) {\n        var data = dataSource instanceof Array ? dataSource.length > 0 : !isNullOrUndefined(dataSource);\n\n        if (!data && this.selectData && this.selectData.length > 0) {\n          dataSource = this.selectData;\n        }\n      }\n\n      dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;\n      this.addedNewItem = false;\n      this.setListData(dataSource, fields, query, e);\n    }\n  };\n\n  DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n    if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n      this.selectData = this.listData;\n    }\n  };\n\n  DropDownBase.prototype.updateSelection = function () {// This is for after added the item, need to update the selected index values.\n  };\n\n  DropDownBase.prototype.renderList = function () {\n    // This is for render the list items.\n    this.render();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateDataSource = function (props) {\n    this.resetList(this.dataSource);\n  };\n\n  DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n    this.isDataFetched = false;\n    var updateData = {};\n\n    for (var j = 0; props.length > j; j++) {\n      if (newProp[props[j]] && props[j] === 'fields') {\n        this.setFields();\n        updateData[props[j]] = newProp[props[j]];\n      } else if (newProp[props[j]]) {\n        updateData[props[j]] = newProp[props[j]];\n      }\n    }\n\n    if (Object.keys(updateData).length > 0) {\n      if (Object.keys(updateData).indexOf('dataSource') === -1) {\n        updateData.dataSource = this.dataSource;\n      }\n\n      this.updateDataSource(updateData);\n    }\n  };\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'dropdownbase') {\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'query':\n        case 'sortOrder':\n        case 'dataSource':\n        case 'itemTemplate':\n          break;\n\n        case 'enableRtl':\n          this.setEnableRtl();\n          break;\n\n        case 'enabled':\n          this.setEnabled();\n          break;\n\n        case 'groupTemplate':\n          this.renderGroupTemplate(this.list);\n\n          if (this.ulElement && this.fixedHeaderElement) {\n            var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n            this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n          }\n\n          break;\n\n        case 'locale':\n          if (this.list && !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0) {\n            this.l10nUpdate();\n          }\n\n          break;\n\n        case 'zIndex':\n          this.setProperties({\n            zIndex: newProp.zIndex\n          }, true);\n          this.setZIndex();\n          break;\n      }\n    }\n  };\n  /**\n   * Build and render the component\n   *\n   * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.render = function (e, isEmptyData) {\n    this.list = this.createElement('div', {\n      className: dropDownBaseClasses.content,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    this.list.classList.add(dropDownBaseClasses.root);\n    this.setFields();\n    var rippleModel = {\n      duration: 300,\n      selector: '.' + dropDownBaseClasses.li\n    };\n    this.rippleFun = rippleEffect(this.list, rippleModel);\n    var group = this.element.querySelector('select>optgroup');\n\n    if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n\n    if (this.getModuleName() === 'dropdownbase') {\n      if (this.element.getAttribute('tabindex')) {\n        this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n      }\n\n      removeClass([this.element], dropDownBaseClasses.root);\n      this.element.style.display = 'none';\n      var wrapperElement = this.createElement('div');\n      this.element.parentElement.insertBefore(wrapperElement, this.element);\n      wrapperElement.appendChild(this.element);\n      wrapperElement.appendChild(this.list);\n    }\n\n    this.setEnableRtl();\n    this.setEnabled();\n\n    if (!isEmptyData) {\n      this.initialize(e);\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  DropDownBase.prototype.getModuleName = function () {\n    return 'dropdownbase';\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n\n\n  DropDownBase.prototype.getItems = function () {\n    return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  DropDownBase.prototype.addItem = function (items, itemIndex) {\n    if (!this.list || this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox') {\n      this.renderList();\n    }\n\n    if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n      var newList = [].slice.call(this.listData);\n      newList.push(items);\n      newList = this.getSortedDataSource(newList);\n\n      if (this.fields.groupBy) {\n        newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n        itemIndex = newList.indexOf(items);\n      } else {\n        itemIndex = newList.indexOf(items);\n      }\n    }\n\n    var itemsCount = this.getItems().length;\n    var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n    items = items instanceof Array ? items : [items];\n    var index;\n    index = isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1 ? itemsCount : itemIndex;\n    var fields = this.fields;\n\n    if (items && fields.groupBy) {\n      items = ListBase.groupDataSource(items, fields.properties);\n    }\n\n    var liCollections = [];\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var isHeader = item.isHeader;\n      var li = this.createElement('li', {\n        className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li,\n        id: 'option-add-' + i\n      });\n      var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n\n      if (isHeader) {\n        li.innerText = itemText;\n      }\n\n      if (this.itemTemplate && !isHeader) {\n        var itemCheck = this.templateCompiler(this.itemTemplate);\n        var compiledString = itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n\n        if (addItemTemplate) {\n          append(addItemTemplate, li);\n        }\n      } else if (!isHeader) {\n        li.appendChild(document.createTextNode(itemText));\n      }\n\n      li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n      li.setAttribute('role', 'option');\n      this.notify('addItem', {\n        module: 'CheckBoxSelection',\n        item: li\n      });\n      liCollections.push(li);\n      this.listData.push(item);\n\n      if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n        index = null;\n      }\n\n      this.updateActionCompleteData(li, item, index); //Listbox event\n\n      this.trigger('beforeItemRender', {\n        element: li,\n        item: item\n      });\n    }\n\n    if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n      this.list.innerHTML = '';\n      this.list.classList.remove(dropDownBaseClasses.noData);\n      this.list.appendChild(this.ulElement);\n      this.liCollections = liCollections;\n      append(liCollections, this.ulElement);\n      this.updateAddItemList(this.list, itemsCount);\n    } else {\n      if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n        this.ulElement.innerHTML = '';\n      }\n\n      var attr = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n\n        for (var j = 0; j < listGroupItem.length; j++) {\n          attr[j] = listGroupItem[j].innerText;\n        }\n\n        if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n          for (var j = 0; j < listGroupItem.length; j++) {\n            if (attr[j] === liCollections[i].innerText) {\n              if (this.sortOrder === 'None') {\n                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n              } else {\n                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n              }\n\n              i = i + 1;\n              break;\n            }\n          }\n        } else {\n          if (this.liCollections[index]) {\n            this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n          } else {\n            this.ulElement.appendChild(liCollections[i]);\n          }\n        }\n\n        var tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 0, liCollections[i]);\n        this.liCollections = tempLi;\n        index += 1;\n\n        if (this.getModuleName() === 'multiselect') {\n          this.updateDataList();\n        }\n      }\n    }\n\n    if (selectedItemValue || itemIndex === 0) {\n      this.updateSelection();\n    }\n\n    this.addedNewItem = true;\n  };\n\n  DropDownBase.prototype.validationAttribute = function (target, hidden) {\n    var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n    hidden.setAttribute('name', name);\n    target.removeAttribute('name');\n    var attributes$$1 = ['required', 'aria-required', 'form'];\n\n    for (var i = 0; i < attributes$$1.length; i++) {\n      if (!target.getAttribute(attributes$$1[i])) {\n        continue;\n      }\n\n      var attr = target.getAttribute(attributes$$1[i]);\n      hidden.setAttribute(attributes$$1[i], attr);\n      target.removeAttribute(attributes$$1[i]);\n    }\n  };\n\n  DropDownBase.prototype.setZIndex = function () {// this is for component wise\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {// this is for ComboBox custom value\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateAddItemList = function (list, itemCount) {// this is for multiselect add item\n  };\n\n  DropDownBase.prototype.updateDataList = function () {// this is for multiselect update list items\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n\n\n  DropDownBase.prototype.getDataByValue = function (value) {\n    if (!isNullOrUndefined(this.listData)) {\n      var type = this.typeOfData(this.listData).typeof;\n\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n          var item = _a[_i];\n\n          if (!isNullOrUndefined(item) && item === value) {\n            return item;\n          }\n        }\n      } else {\n        for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n          var item = _c[_b];\n\n          if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : 'value', item) === value) {\n            return item;\n          }\n        }\n      }\n    }\n\n    return null;\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.destroy = function () {\n    if (document.body.contains(this.list)) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n\n      if (!isNullOrUndefined(this.rippleFun)) {\n        this.rippleFun();\n      }\n\n      detach(this.list);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  __decorate([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], DropDownBase.prototype, \"fields\", void 0);\n\n  __decorate([Property(false)], DropDownBase.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"itemTemplate\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"groupTemplate\", void 0);\n\n  __decorate([Property('No records found')], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate([Property('Request failed')], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate([Property('None')], DropDownBase.prototype, \"sortOrder\", void 0);\n\n  __decorate([Property(true)], DropDownBase.prototype, \"enabled\", void 0);\n\n  __decorate([Property([])], DropDownBase.prototype, \"dataSource\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"query\", void 0);\n\n  __decorate([Property('StartsWith')], DropDownBase.prototype, \"filterType\", void 0);\n\n  __decorate([Property(true)], DropDownBase.prototype, \"ignoreCase\", void 0);\n\n  __decorate([Property(1000)], DropDownBase.prototype, \"zIndex\", void 0);\n\n  __decorate([Property(false)], DropDownBase.prototype, \"ignoreAccent\", void 0);\n\n  __decorate([Property()], DropDownBase.prototype, \"locale\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionBegin\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionComplete\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionFailure\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"select\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"dataBound\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"created\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"destroyed\", void 0);\n\n  DropDownBase = __decorate([NotifyPropertyChanges], DropDownBase);\n  return DropDownBase;\n}(Component);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$1 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\n\n\nvar dropDownListClasses = {\n  root: 'e-dropdownlist',\n  hover: dropDownBaseClasses.hover,\n  selected: dropDownBaseClasses.selected,\n  rtl: dropDownBaseClasses.rtl,\n  li: dropDownBaseClasses.li,\n  disable: dropDownBaseClasses.disabled,\n  base: dropDownBaseClasses.root,\n  focus: dropDownBaseClasses.focus,\n  input: 'e-input-group',\n  inputFocus: 'e-input-focus',\n  icon: 'e-input-group-icon e-ddl-icon',\n  iconAnimation: 'e-icon-anim',\n  value: 'e-input-value',\n  device: 'e-ddl-device',\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  mobileFilter: 'e-ddl-device-filter',\n  footer: 'e-ddl-footer',\n  header: 'e-ddl-header',\n  clearIcon: 'e-clear-icon',\n  clearIconHide: 'e-clear-icon-hide',\n  popupFullScreen: 'e-popup-full-page',\n  disableIcon: 'e-ddl-disable-icon',\n  hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n  container: null,\n  buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\n\nvar DropDownList =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$1(DropDownList, _super);\n  /**\n   * * Constructor for creating the DropDownList component.\n   *\n   * @param {DropDownListModel} options - Specifies the DropDownList model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function DropDownList(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.isListSearched = false;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    return _this;\n  }\n  /**\n   * Initialize the event handler.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.preRender = function () {\n    this.valueTempElement = null;\n    this.element.style.opacity = '0';\n    this.initializeData();\n\n    _super.prototype.preRender.call(this);\n\n    this.activeIndex = this.index;\n    this.queryString = '';\n  };\n\n  DropDownList.prototype.initializeData = function () {\n    this.isPopupOpen = false;\n    this.isDocumentClick = false;\n    this.isInteracted = false;\n    this.isFilterFocus = false;\n    this.beforePopupOpen = false;\n    this.initial = true;\n    this.initRemoteRender = false;\n    this.isNotSearchList = false;\n    this.isTyped = false;\n    this.isSelected = false;\n    this.preventFocus = false;\n    this.preventAutoFill = false;\n    this.isValidKey = false;\n    this.typedString = '';\n    this.isEscapeKey = false;\n    this.isPreventBlur = false;\n    this.isTabKey = false;\n    this.actionCompleteData = {\n      isUpdated: false\n    };\n    this.actionData = {\n      isUpdated: false\n    };\n    this.prevSelectPoints = {};\n    this.isSelectCustom = false;\n    this.isDropDownClick = false;\n    this.preventAltUp = false;\n    this.isCustomFilter = false;\n    this.isSecondClick = false;\n    this.previousValue = null;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n\n  DropDownList.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  };\n\n  DropDownList.prototype.renderList = function (e, isEmptyData) {\n    _super.prototype.render.call(this, e, isEmptyData);\n\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n\n  DropDownList.prototype.floatLabelChange = function () {\n    if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n      var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n\n      if (this.inputElement.value !== '' || this.isInteracted) {\n        classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n      } else {\n        classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n      }\n    }\n  };\n\n  DropDownList.prototype.resetHandler = function (e) {\n    e.preventDefault();\n    this.clearAll(e);\n  };\n\n  DropDownList.prototype.resetFocusElement = function () {\n    this.removeHover();\n    this.removeSelection();\n    this.removeFocus();\n    this.list.scrollTop = 0;\n\n    if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n      var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n\n      if (li) {\n        li.classList.add(dropDownListClasses.focus);\n      }\n    }\n  };\n\n  DropDownList.prototype.clearAll = function (e, properties) {\n    if (isNullOrUndefined(properties) || !isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n      this.isActive = true;\n      this.resetSelection(properties);\n    }\n\n    var dataItem = this.getItemData();\n\n    if (this.previousValue === dataItem.value) {\n      return;\n    }\n\n    this.onChangeEvent(e);\n  };\n\n  DropDownList.prototype.resetSelection = function (properties) {\n    if (this.list) {\n      if (!isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n        this.selectedLI = null;\n        this.actionCompleteData.isUpdated = false;\n        this.actionCompleteData.ulElement = null;\n        this.actionCompleteData.list = null;\n        this.resetList(properties.dataSource);\n      } else {\n        if (this.allowFiltering && this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n        }\n\n        this.resetFocusElement();\n      }\n    }\n\n    this.hiddenElement.innerHTML = '';\n    this.inputElement.value = '';\n    this.value = null;\n    this.itemData = null;\n    this.text = null;\n    this.index = null;\n    this.activeIndex = null;\n    this.item = null;\n    this.queryString = '';\n\n    if (this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n      this.valueTempElement = null;\n    }\n\n    this.setSelection(null, null);\n    this.isSelectCustom = false;\n    this.updateIconState();\n    this.cloneElements();\n  };\n\n  DropDownList.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        if (htmlAttr === 'class') {\n          var updatedClassValue = this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ').trim();\n\n          if (updatedClassValue !== '') {\n            addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n          }\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n          this.enabled = false;\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n          this.readonly = true;\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'role', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n\n          if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            defaultAttr.push('tabindex');\n          }\n\n          if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            if (htmlAttr === 'placeholder') {\n              Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement);\n            } else {\n              this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n            }\n          } else {\n            this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          }\n        }\n      }\n    }\n\n    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n      this.inputWrapper.container.removeAttribute('tabindex');\n    }\n  };\n\n  DropDownList.prototype.getAriaAttributes = function () {\n    return {\n      'aria-disabled': 'false',\n      'role': 'combobox',\n      'aria-expanded': 'false',\n      'aria-live': 'polite',\n      'aria-labelledby': this.hiddenElement.id\n    };\n  };\n\n  DropDownList.prototype.setEnableRtl = function () {\n    Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = this.enableRtl;\n      this.popupObj.dataBind();\n    }\n  };\n\n  DropDownList.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputElement);\n\n    if (this.enabled) {\n      removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'false');\n      this.targetElement().setAttribute('tabindex', this.tabIndex);\n    } else {\n      this.hidePopup();\n      addClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'true');\n      this.targetElement().tabIndex = -1;\n    }\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  DropDownList.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  DropDownList.prototype.getLocaleName = function () {\n    return 'drop-down-list';\n  };\n\n  DropDownList.prototype.preventTabIndex = function (element) {\n    if (this.getModuleName() === 'dropdownlist') {\n      element.tabIndex = -1;\n    }\n  };\n\n  DropDownList.prototype.targetElement = function () {\n    return this.inputWrapper.container;\n  };\n\n  DropDownList.prototype.getNgDirective = function () {\n    return 'EJS-DROPDOWNLIST';\n  };\n\n  DropDownList.prototype.getElementByText = function (text) {\n    return this.getElementByValue(this.getValueByText(text));\n  };\n\n  DropDownList.prototype.getElementByValue = function (value) {\n    var item;\n    var listItems = this.getItems();\n\n    for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n      var liItem = listItems_1[_i];\n\n      if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n        item = liItem;\n        break;\n      }\n    }\n\n    return item;\n  };\n\n  DropDownList.prototype.initValue = function () {\n    this.renderList();\n\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n\n  DropDownList.prototype.updateValues = function () {\n    if (!isNullOrUndefined(this.value)) {\n      this.setSelection(this.getElementByValue(this.value), null);\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var element = this.getElementByText(this.text);\n\n      if (isNullOrUndefined(element)) {\n        this.setProperties({\n          text: null\n        });\n        return;\n      } else {\n        this.setSelection(element, null);\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n\n  DropDownList.prototype.onBlurHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var target = e.relatedTarget;\n    var currentTarget = e.target;\n    var isPreventBlur = this.isPreventBlur;\n    this.isPreventBlur = false; //IE 11 - issue\n\n    if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {\n      if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n        this.filterInput.focus();\n      } else {\n        this.targetElement().focus();\n      }\n\n      return;\n    }\n\n    if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {\n      if (!this.beforePopupOpen) {\n        this.isDocumentClick = false;\n      }\n\n      return;\n    }\n\n    if (this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== 'dropdownlist' && !this.inputWrapper.container.contains(target) || this.isTabKey) {\n      this.isDocumentClick = this.isPopupOpen ? true : false;\n      this.focusOutAction(e);\n      this.isTabKey = false;\n    }\n\n    if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n      this.isActive = false;\n      this.beforePopupOpen = false;\n    }\n  };\n\n  DropDownList.prototype.focusOutAction = function (e) {\n    this.isInteracted = false;\n    this.focusOut(e);\n    this.onFocusOut();\n  };\n\n  DropDownList.prototype.onFocusOut = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isSelected) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(null);\n    }\n\n    this.floatLabelChange();\n    this.dispatchEvent(this.hiddenElement, 'change');\n\n    if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n      this.dispatchEvent(this.inputElement, 'blur');\n    }\n\n    if (this.inputWrapper.clearButton) {\n      addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n    }\n\n    this.trigger('blur');\n  };\n\n  DropDownList.prototype.onFocus = function (e) {\n    if (!this.isInteracted) {\n      this.isInteracted = true;\n      var args = {\n        isInteracted: e ? true : false,\n        event: e\n      };\n      this.trigger('focus', args);\n    }\n\n    this.updateIconState();\n  };\n\n  DropDownList.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement && e.target === formElement) {\n      var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute('value');\n      this.text = val;\n    }\n  };\n\n  DropDownList.prototype.wireEvent = function () {\n    EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n    this.bindCommonEvent();\n  };\n\n  DropDownList.prototype.bindCommonEvent = function () {\n    EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    } else {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.mobileKeyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n\n    this.bindClearEvent();\n  };\n\n  DropDownList.prototype.bindClearEvent = function () {\n    if (this.showClearButton) {\n      EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n    }\n  };\n\n  DropDownList.prototype.unBindCommonEvent = function () {\n    if (this.targetElement()) {\n      EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n    }\n\n    var formElement = this.inputElement && closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n\n    if (this.showClearButton) {\n      EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n    }\n  };\n\n  DropDownList.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, 'click', this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n\n  DropDownList.prototype.onSearch = function (e) {\n    if (e.charCode !== 32 && e.charCode !== 13) {\n      if (this.list === undefined) {\n        this.renderList();\n      }\n\n      this.searchKeyEvent = e;\n      this.onServerIncrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onServerIncrementalSearch = function (e) {\n    if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n      this.incrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n\n    if (!this.isValidLI(li)) {\n      return;\n    }\n\n    this.setSelection(li, e);\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      history.back();\n    } else {\n      var delay = 100;\n      this.closePopup(delay, e);\n    }\n  };\n\n  DropDownList.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n\n  DropDownList.prototype.setHover = function (li) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n\n  DropDownList.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n\n  DropDownList.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  DropDownList.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n\n  DropDownList.prototype.incrementalSearch = function (e) {\n    if (this.liCollections.length > 0) {\n      var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n\n      if (!isNullOrUndefined(li)) {\n        this.setSelection(li, e);\n        this.setScrollPosition();\n      }\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      this.spinnerElement.innerHTML = '';\n      this.spinnerElement = null;\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n\n  DropDownList.prototype.keyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n    var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n    this.isEscapeKey = e.action === 'escape';\n    this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n    var isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n\n    if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      var isTabAction = e.action === 'tab' || e.action === 'close';\n\n      if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n        this.searchKeyEvent = e;\n        this.renderList(e);\n      }\n\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n\n      if (isTabAction && this.getModuleName() !== 'autocomplete' && this.isPopupOpen || e.action === 'escape') {\n        e.preventDefault();\n      }\n\n      this.isSelected = e.action === 'escape' ? false : this.isSelected;\n      this.isTyped = isNavigation || e.action === 'escape' ? false : this.isTyped;\n\n      switch (e.action) {\n        case 'down':\n        case 'up':\n          this.updateUpDownAction(e);\n          break;\n\n        case 'pageUp':\n          this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'pageDown':\n          this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'home':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'end':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'space':\n          if (this.getModuleName() === 'dropdownlist') {\n            if (!this.beforePopupOpen) {\n              this.showPopup();\n            }\n          }\n\n          break;\n\n        case 'open':\n          this.showPopup(e);\n          break;\n\n        case 'hide':\n          this.preventAltUp = this.isPopupOpen;\n          this.hidePopup(e);\n          this.focusDropDown(e);\n          break;\n\n        case 'enter':\n          this.selectCurrentItem(e);\n          break;\n\n        case 'tab':\n          this.selectCurrentValueOnTab(e);\n          break;\n\n        case 'escape':\n        case 'close':\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n            this.focusDropDown(e);\n          }\n\n          break;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateUpDownAction = function (e) {\n    var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n\n      if (this.getModuleName() === 'autocomplete') {\n        startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n        index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      }\n\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n\n    e.preventDefault();\n  };\n\n  DropDownList.prototype.updateHomeEndAction = function (e) {\n    if (this.getModuleName() === 'dropdownlist') {\n      var findLi = 0;\n\n      if (e.action === 'home') {\n        findLi = 0;\n      } else {\n        findLi = this.getItems().length - 1;\n      }\n\n      e.preventDefault();\n\n      if (this.activeIndex === findLi) {\n        return;\n      }\n\n      this.setSelection(this.liCollections[findLi], e);\n    }\n  };\n\n  DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.selectCurrentItem(e);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n        this.focusDropDown(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.mobileKeyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isEditTextBox() && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      if (this.list === undefined && !this.isRequested) {\n        this.searchKeyEvent = e;\n        this.renderList();\n      }\n\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n\n      if (e.action === 'enter') {\n        this.selectCurrentItem(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectCurrentItem = function (e) {\n    if (this.isPopupOpen) {\n      var li = this.list.querySelector('.' + dropDownListClasses.focus);\n\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n\n      this.hidePopup(e);\n      this.focusDropDown(e);\n    } else {\n      this.showPopup();\n    }\n  };\n\n  DropDownList.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  DropDownList.prototype.getPageCount = function () {\n    var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n  };\n\n  DropDownList.prototype.pageUpSelection = function (steps, event) {\n    var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n    this.setSelection(previousItem, event);\n  };\n\n  DropDownList.prototype.pageDownSelection = function (steps, event) {\n    var list = this.getItems();\n    var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n    this.setSelection(previousItem, event);\n  };\n\n  DropDownList.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n    EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n    EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n    this.unBindCommonEvent();\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, 'click', this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n\n  DropDownList.prototype.checkSelector = function (id) {\n    return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n  };\n\n  DropDownList.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !this.inputWrapper.container.contains(e.target)) {\n      if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n        this.isDocumentClick = true;\n        var isActive = this.isRequested;\n        this.isInteracted = false;\n        this.hidePopup(e);\n\n        if (!isActive) {\n          this.onFocusOut();\n          this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n      }\n    } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === 'combobox' && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n      this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);\n      e.preventDefault();\n    }\n  };\n\n  DropDownList.prototype.activeStateChange = function () {\n    if (this.isDocumentClick) {\n      this.hidePopup();\n      this.onFocusOut();\n      this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n    }\n  };\n\n  DropDownList.prototype.focusDropDown = function (e) {\n    if (!this.initial && this.isFilterLayout()) {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.dropDownClick = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n      return;\n    }\n\n    var target = e.target;\n\n    if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n      e.preventDefault();\n    }\n\n    if (!this.readonly) {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n\n        if (this.isFilterLayout()) {\n          this.focusDropDown(e);\n        }\n      } else {\n        this.focusIn(e);\n        this.floatLabelChange();\n        this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n        this.isDropDownClick = true;\n        this.showPopup(e);\n      } // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n      var proxy_1 = this; // eslint-disable-next-line max-len\n\n      var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;\n\n      if (!this.isSecondClick) {\n        setTimeout(function () {\n          proxy_1.cloneElements();\n          proxy_1.isSecondClick = true;\n        }, duration);\n      }\n    } else {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.cloneElements = function () {\n    if (this.list) {\n      var ulElement = this.list.querySelector('ul');\n\n      if (ulElement) {\n        ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n        this.actionCompleteData.ulElement = ulElement;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n\n    if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n        } else {\n          _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n\n  DropDownList.prototype.activeItem = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n      this.removeSelection();\n      li.classList.add(dropDownBaseClasses.selected);\n      this.removeHover();\n      li.setAttribute('aria-selected', 'true');\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownList.prototype.setValue = function (e) {\n    var dataItem = this.getItemData();\n\n    if (dataItem.value === null) {\n      Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n    } else {\n      Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    if (this.valueTemplate && this.itemData !== null) {\n      this.setValueTemplate();\n    } else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n    }\n\n    var clearIcon = dropDownListClasses.clearIcon;\n    var isFilterElement = this.isFiltering() && this.filterInput && this.getModuleName() === 'combobox';\n    var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n    if (this.isFiltering() && clearElement) {\n      clearElement.style.removeProperty('visibility');\n    }\n\n    if (this.previousValue === dataItem.value) {\n      this.isSelected = false;\n      return true;\n    } else {\n      this.isSelected = !this.initial ? true : false;\n      this.isSelectCustom = false;\n\n      if (this.getModuleName() === 'dropdownlist') {\n        this.updateIconState();\n      }\n\n      return false;\n    }\n  };\n\n  DropDownList.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n\n  DropDownList.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n\n    if (this.setValue(e)) {\n      return;\n    }\n\n    if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter')) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(e);\n    }\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n      this.setScrollPosition(e);\n    }\n\n    if (Browser.info.name !== 'mozilla') {\n      attributes(this.inputElement, {\n        'aria-label': this.inputElement.value\n      });\n      attributes(this.targetElement(), {\n        'aria-describedby': this.inputElement.id != '' ? this.inputElement.id : this.element.id\n      });\n      this.targetElement().removeAttribute('aria-live');\n    }\n  };\n\n  DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n    var checkTemplate = false;\n\n    if (dropdownTemplate) {\n      try {\n        checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  DropDownList.prototype.setValueTemplate = function () {\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['valueTemplate']);\n\n      if (this.valueTempElement) {\n        detach(this.valueTempElement);\n        this.inputElement.style.display = 'block';\n        this.valueTempElement = null;\n      }\n    }\n\n    if (!this.valueTempElement) {\n      this.valueTempElement = this.createElement('span', {\n        className: dropDownListClasses.value\n      });\n      this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n      this.inputElement.style.display = 'none';\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.valueTempElement.innerHTML = '';\n    }\n\n    var valuecheck = this.dropdownCompiler(this.valueTemplate);\n\n    if (valuecheck) {\n      compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n    } else {\n      compiledString = compile(this.valueTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n\n    if (valueCompTemp && valueCompTemp.length > 0) {\n      for (var i = 0; i < valueCompTemp.length; i++) {\n        this.valueTempElement.appendChild(valueCompTemp[i]);\n      }\n    }\n\n    this.renderReactTemplates();\n  };\n\n  DropDownList.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  DropDownList.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n  /**\n   * To trigger the change event for list.\n   *\n   * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onChangeEvent = function (eve) {\n    var dataItem = this.getItemData();\n    var index = this.isSelectCustom ? null : this.activeIndex;\n    this.setProperties({\n      'index': index,\n      'text': dataItem.text,\n      'value': dataItem.value\n    }, true);\n    this.detachChangeEvent(eve);\n  };\n\n  DropDownList.prototype.detachChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  DropDownList.prototype.detachChangeEvent = function (eve) {\n    this.isSelected = false;\n    this.previousValue = this.value;\n    this.activeIndex = this.index;\n    this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n\n    if (!this.initial) {\n      var items = this.detachChanges(this.itemData);\n      var preItems = void 0;\n\n      if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n        preItems = Object.defineProperties({}, {\n          value: {\n            value: this.previousItemData,\n            enumerable: true\n          },\n          text: {\n            value: this.previousItemData,\n            enumerable: true\n          }\n        });\n      } else {\n        preItems = this.previousItemData;\n      }\n\n      this.setHiddenValue();\n      var eventArgs = {\n        e: eve,\n        item: this.item,\n        itemData: items,\n        previousItem: this.previousSelectedLI,\n        previousItemData: preItems,\n        isInteracted: eve ? true : false,\n        value: this.value,\n        element: this.element,\n        event: eve\n      };\n\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n    }\n\n    if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n      removeClass([this.inputWrapper.container], 'e-valid-input');\n    }\n  };\n\n  DropDownList.prototype.setHiddenValue = function () {\n    if (!isNullOrUndefined(this.value)) {\n      if (this.hiddenElement.querySelector('option')) {\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.textContent = this.text;\n        selectedElement.setAttribute('value', this.value.toString());\n      } else {\n        this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.setAttribute('value', this.value.toString());\n      }\n    } else {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /**\n   * Filter bar implementation\n   *\n   * @param {KeyboardEventArgs} e - Specifies the event arguments.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onFilterUp = function (e) {\n    if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n      this.isValidKey = false;\n\n      switch (e.keyCode) {\n        case 38: //up arrow\n\n        case 40:\n          //down arrow\n          if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else {\n            this.preventAutoFill = false;\n          }\n\n          this.preventAltUp = false;\n          e.preventDefault();\n          break;\n\n        case 46: //delete\n\n        case 8:\n          //backspace\n          this.typedString = this.filterInput.value;\n\n          if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '') {\n            if (this.list) {\n              this.resetFocusElement();\n            }\n\n            this.activeIndex = null;\n\n            if (this.getModuleName() !== 'dropdownlist') {\n              this.preventAutoFill = true;\n              this.searchLists(e);\n\n              if (this.getModuleName() === 'autocomplete') {\n                this.hidePopup();\n              }\n            }\n          }\n\n          e.preventDefault();\n          break;\n\n        default:\n          this.typedString = this.filterInput.value;\n          this.preventAutoFill = false;\n          this.searchLists(e);\n          break;\n      }\n    } else {\n      this.isValidKey = false;\n    }\n  };\n\n  DropDownList.prototype.onFilterDown = function (e) {\n    switch (e.keyCode) {\n      case 13:\n        //enter\n        break;\n\n      case 40: //down arrow\n\n      case 38:\n        //up arrow\n        this.queryString = this.filterInput.value;\n        e.preventDefault();\n        break;\n\n      case 9:\n        //tab\n        if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n          e.preventDefault();\n        }\n\n        break;\n\n      default:\n        this.prevSelectPoints = this.getSelectionPoints();\n        this.queryString = this.filterInput.value;\n        break;\n    }\n  };\n\n  DropDownList.prototype.removeFillSelection = function () {\n    if (this.isInteracted) {\n      var selection = this.getSelectionPoints();\n      this.inputElement.setSelectionRange(selection.end, selection.end);\n    }\n  };\n\n  DropDownList.prototype.getQuery = function (query) {\n    var filterQuery;\n\n    if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n      var filterType = this.typedString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    }\n\n    return filterQuery;\n  };\n\n  DropDownList.prototype.getSelectionPoints = function () {\n    var input = this.inputElement;\n    return {\n      start: Math.abs(input.selectionStart),\n      end: Math.abs(input.selectionEnd)\n    };\n  };\n\n  DropDownList.prototype.searchLists = function (e) {\n    var _this = this;\n\n    this.isTyped = true;\n    this.activeIndex = null;\n    this.isListSearched = true;\n\n    if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n\n    this.isDataFetched = false;\n\n    if (this.isFiltering()) {\n      var eventArgs_1 = {\n        preventDefaultAction: false,\n        text: this.filterInput.value,\n        updateData: function (dataSource, query, fields) {\n          if (eventArgs_1.cancel) {\n            return;\n          }\n\n          _this.isCustomFilter = true;\n\n          _this.filteringAction(dataSource, query, fields);\n        },\n        baseEventArgs: e,\n        cancel: false\n      };\n      this.trigger('filtering', eventArgs_1, function (eventArgs) {\n        if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n          _this.filteringAction(_this.dataSource, null, _this.fields);\n        }\n      });\n    }\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  DropDownList.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFilter = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n\n  DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n    if (!isNullOrUndefined(this.filterInput)) {\n      this.beforePopupOpen = !this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '' ? false : true;\n\n      if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n        this.actionCompleteData.isUpdated = false;\n        this.isTyped = false;\n\n        if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n        }\n\n        this.isTyped = true;\n\n        if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n          this.focusIndexItem();\n          this.setScrollPosition();\n        }\n\n        this.isNotSearchList = true;\n      } else {\n        this.isNotSearchList = false;\n        query = this.filterInput.value.trim() === '' ? null : query;\n        this.resetList(dataSource, fields, query);\n      }\n\n      this.renderReactTemplates();\n    }\n  };\n\n  DropDownList.prototype.setSearchBox = function (popupElement) {\n    if (this.isFiltering()) {\n      var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ? popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n        className: dropDownListClasses.filterParent\n      });\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: dropDownListClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      var backIcon = false;\n\n      if (Browser.isDevice) {\n        backIcon = true;\n      }\n\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n\n      if (!isNullOrUndefined(this.cssClass)) {\n        if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n\n      append([this.filterInputObj.container], parentElement);\n      prepend([parentElement], popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'role': 'combobox',\n        'autocomplete': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n\n      if (!Browser.isDevice) {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.keyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      } else {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.mobileKeyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.onInput, this);\n      EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n      return this.filterInputObj;\n    } else {\n      return inputObject;\n    }\n  };\n\n  DropDownList.prototype.onInput = function (e) {\n    this.isValidKey = true; // For filtering works in mobile firefox.\n\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.typedString = this.filterInput.value;\n      this.preventAutoFill = true;\n      this.searchLists(e);\n    }\n  };\n\n  DropDownList.prototype.pasteHandler = function (e) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.typedString = _this.filterInput.value;\n\n      _this.searchLists(e);\n    });\n  };\n\n  DropDownList.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n\n    if (this.beforePopupOpen) {\n      this.renderPopup();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n\n    if (this.isNotSearchList) {\n      this.isNotSearchList = false;\n      return;\n    }\n\n    if (this.isActive) {\n      var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n\n      _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n      this.updateSelectElementData(this.allowFiltering);\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n        this.isRequested = false;\n        this.keyActionHandler(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n        this.incrementalSearch(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      this.list.scrollTop = 0;\n\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.element.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n      }\n\n      if (this.initRemoteRender) {\n        this.initial = true;\n        this.activeIndex = this.index;\n        this.initRemoteRender = false;\n\n        if (this.value && this.dataSource instanceof DataManager) {\n          var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n          var checkVal = list.some(function (x) {\n            return x[checkField_1] === _this.value;\n          });\n\n          if (!checkVal) {\n            this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value))).then(function (e) {\n              if (e.result.length > 0) {\n                _this.addItem(e.result, list.length);\n\n                _this.updateValues();\n              } else {\n                _this.updateValues();\n              }\n            });\n          } else {\n            this.updateValues();\n          }\n        } else {\n          this.updateValues();\n        }\n\n        this.initial = false;\n      } else if (this.getModuleName() === 'autocomplete' && this.value) {\n        this.setInputValue();\n      }\n\n      if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n        if (!this.actionCompleteData.isUpdated || !this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0)) {\n          if (this.itemTemplate && (this.element.tagName === 'EJS-COMBOBOX' || this.element.tagName === 'EJS-DROPDOWNLIST') && this.allowFiltering) {\n            setTimeout(function () {\n              _this.updateActionCompleteDataValues(ulElement, list);\n            }, 0);\n          } else {\n            this.updateActionCompleteDataValues(ulElement, list);\n          }\n        }\n\n        this.addNewItem(list, selectedItem);\n\n        if (!isNullOrUndefined(this.itemData)) {\n          this.focusIndexItem();\n        }\n      }\n\n      if (this.beforePopupOpen) {\n        this.renderPopup(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n    this.actionCompleteData = {\n      ulElement: ulElement.cloneNode(true),\n      list: list,\n      isUpdated: true\n    };\n\n    if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n      this.actionData = this.actionCompleteData;\n    }\n  };\n\n  DropDownList.prototype.addNewItem = function (listData, newElement) {\n    var _this = this;\n\n    if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n      var value_1 = this.getItemData().value;\n      var isExist = listData.some(function (data) {\n        return (typeof data === 'string' || typeof data === 'number') && data === value_1 || getValue(_this.fields.value, data) === value_1;\n      });\n\n      if (!isExist) {\n        this.addItem(this.itemData);\n      }\n    }\n  };\n\n  DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n    var _this = this;\n\n    if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n      if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n        setTimeout(function () {\n          _this.actionCompleteDataUpdate(li, item, index);\n        }, 0);\n      } else {\n        this.actionCompleteDataUpdate(li, item, index);\n      }\n    }\n  };\n\n  DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n    if (index != null) {\n      this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n    } else {\n      this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n    }\n\n    if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n      this.actionCompleteData.list.push(item);\n    }\n  };\n\n  DropDownList.prototype.focusIndexItem = function () {\n    var value = this.getItemData().value;\n    this.activeIndex = this.getIndexByValue(value);\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.selectedLI = element;\n    this.activeItem(element);\n    this.removeFocus();\n  };\n\n  DropDownList.prototype.updateSelection = function () {\n    var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n    if (selectedItem) {\n      this.setProperties({\n        'index': this.getIndexByValue(selectedItem.getAttribute('data-value'))\n      });\n      this.activeIndex = this.index;\n    } else {\n      this.removeFocus();\n      this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n    }\n  };\n\n  DropDownList.prototype.removeFocus = function () {\n    var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n\n    if (highlightedItem && highlightedItem.length) {\n      removeClass(highlightedItem, dropDownListClasses.focus);\n    }\n  };\n\n  DropDownList.prototype.renderPopup = function (e) {\n    var _this = this;\n\n    if (this.popupObj && document.body.contains(this.popupObj.element)) {\n      this.refreshPopup();\n      return;\n    }\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle = _this.createElement('div', {\n          id: _this.element.id + '_popup',\n          className: 'e-ddl e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n        });\n\n        var searchBox = _this.setSearchBox(popupEle);\n\n        _this.listHeight = formatUnit(_this.popupHeight);\n\n        if (_this.headerTemplate) {\n          _this.setHeaderTemplate(popupEle);\n        }\n\n        append([_this.list], popupEle);\n\n        if (_this.footerTemplate) {\n          _this.setFooterTemplate(popupEle);\n        }\n\n        document.body.appendChild(popupEle);\n        popupEle.style.visibility = 'hidden';\n\n        if (_this.popupHeight !== 'auto') {\n          _this.searchBoxHeight = 0;\n\n          if (!isNullOrUndefined(searchBox.container)) {\n            _this.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;\n            _this.listHeight = (parseInt(_this.listHeight, 10) - _this.searchBoxHeight).toString() + 'px';\n          }\n\n          if (_this.headerTemplate) {\n            _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n            var height = Math.round(_this.header.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          if (_this.footerTemplate) {\n            _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n            var height = Math.round(_this.footer.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n          popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n        } else {\n          popupEle.style.height = 'auto';\n        }\n\n        var offsetValue = 0;\n        var left = void 0;\n\n        if (!isNullOrUndefined(_this.selectedLI) && !isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0) {\n          _this.setScrollPosition();\n        } else {\n          _this.list.scrollTop = 0;\n        }\n\n        if (Browser.isDevice && !_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' || _this.isDropDownClick && _this.getModuleName() === 'combobox')) {\n          offsetValue = _this.getOffsetValue(popupEle);\n          var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n          left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n        }\n\n        _this.getFocusElement();\n\n        _this.createPopup(popupEle, offsetValue, left);\n\n        _this.checkCollision(popupEle);\n\n        if (Browser.isDevice) {\n          _this.popupObj.element.classList.add(dropDownListClasses.device);\n\n          if (_this.getModuleName() === 'dropdownlist' || _this.getModuleName() === 'combobox' && !_this.allowFiltering && _this.isDropDownClick) {\n            _this.popupObj.collision = {\n              X: 'fit',\n              Y: 'fit'\n            };\n          }\n\n          if (_this.isFilterLayout()) {\n            _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n\n            _this.popupObj.position = {\n              X: 0,\n              Y: 0\n            };\n\n            _this.popupObj.dataBind();\n\n            attributes(_this.popupObj.element, {\n              style: 'left:0px;right:0px;top:0px;bottom:0px;'\n            });\n            addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n\n            _this.setSearchBoxPosition();\n\n            _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n            _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n            EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n            EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n          }\n        }\n\n        popupEle.style.visibility = 'visible';\n        addClass([popupEle], 'e-popup-close');\n\n        var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n\n        for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n          var element = scrollParentElements_1[_i];\n          EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n        }\n\n        if (Browser.isDevice && _this.isFilterLayout()) {\n          EventHandler.add(_this.list, 'scroll', _this.listScroll, _this);\n        }\n\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n\n          _this.wireListEvents();\n        }\n\n        _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n        attributes(_this.targetElement(), {\n          'aria-expanded': 'true',\n          'aria-owns': _this.inputElement.id + '_options',\n          'aria-activedescendant': _this.selectedElementID\n        });\n\n        _this.inputElement.setAttribute('aria-expanded', 'true');\n\n        if (_this.selectedElementID == null) {\n          _this.targetElement().removeAttribute('aria-activedescendant');\n        }\n\n        var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n        addClass([inputParent], [dropDownListClasses.inputFocus]);\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          event: e,\n          cancel: false,\n          animation: animModel\n        };\n\n        _this.trigger('open', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n\n            _this.renderReactTemplates();\n\n            _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.element : null);\n          } else {\n            _this.beforePopupOpen = false;\n\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n\n  DropDownList.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick)) {\n      var collision = isCollide(popupEle);\n\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n      }\n\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.getOffsetValue = function (popupEle) {\n    var popupStyles = getComputedStyle(popupEle);\n    var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n    var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n    return this.setPopupPosition(borderTop + borderBottom);\n  };\n\n  DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n    var _this = this;\n\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputWrapper.container,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      zIndex: this.zIndex,\n      close: function () {\n        if (!_this.isDocumentClick) {\n          _this.focusDropDown();\n        } // eslint-disable-next-line\n\n\n        if (_this.isReact) {\n          _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n        }\n\n        var isResetItem = _this.getModuleName() === 'autocomplete' ? true : false;\n        _this.isNotSearchList = false;\n        _this.isDocumentClick = false;\n\n        _this.destroyPopup();\n\n        if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n          _this.isActive = true;\n\n          _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n        }\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n\n        var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement && _this.actionCompleteData.ulElement.querySelector('li');\n\n        var ulElement = _this.list.querySelector('ul li');\n\n        if (_this.isFiltering() && _this.itemTemplate && _this.element.tagName === _this.getNgDirective() && actionList && ulElement && actionList.textContent !== ulElement.textContent && _this.element.tagName !== 'EJS-COMBOBOX') {\n          _this.cloneElements();\n        }\n\n        if (_this.isFilterLayout()) {\n          removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n          _this.isFilterFocus = true;\n\n          _this.filterInput.focus();\n\n          if (_this.inputWrapper.clearButton) {\n            addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n          }\n        }\n\n        _this.activeStateChange();\n      },\n      targetExitViewport: function () {\n        if (!Browser.isDevice) {\n          _this.hidePopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.isEmptyList = function () {\n    return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n  };\n\n  DropDownList.prototype.getFocusElement = function () {// combo-box used this method\n  };\n\n  DropDownList.prototype.isFilterLayout = function () {\n    return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n  };\n\n  DropDownList.prototype.scrollHandler = function () {\n    if (Browser.isDevice && (this.getModuleName() === 'dropdownlist' && !this.isFilterLayout() || this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick)) {\n      this.hidePopup();\n    }\n  };\n\n  DropDownList.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    this.popupObj.element.style.maxHeight = '100%';\n    this.popupObj.element.style.width = '100%';\n    this.list.style.maxHeight = window.innerHeight - searchBoxHeight + 'px';\n    this.list.style.height = window.innerHeight - searchBoxHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n\n  DropDownList.prototype.setPopupPosition = function (border) {\n    var offsetValue;\n    var popupOffset = border;\n    var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n    var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n    var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n    var liHeight = firstItem.getBoundingClientRect().height;\n    var listHeight = this.list.offsetHeight / 2;\n    var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n    var lastItemOffsetValue = lastItem.offsetTop;\n\n    if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n      var count = this.list.offsetHeight / liHeight;\n      var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n      offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n      this.list.scrollTop = selectedLI.offsetTop;\n    } else if (height > listHeight) {\n      offsetValue = listHeight - liHeight / 2;\n      this.list.scrollTop = height - listHeight + liHeight / 2;\n    } else {\n      offsetValue = height;\n    }\n\n    var inputHeight = this.inputWrapper.container.offsetHeight;\n    offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;\n    return -offsetValue;\n  };\n\n  DropDownList.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    if (Browser.isDevice && !this.allowFiltering && (this.getModuleName() === 'dropdownlist' || this.isDropDownClick && this.getModuleName() === 'combobox')) {\n      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n      width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + 'px';\n    }\n\n    return width;\n  };\n\n  DropDownList.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n\n  DropDownList.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n      }\n    }\n  };\n\n  DropDownList.prototype.isEditTextBox = function () {\n    return false;\n  };\n\n  DropDownList.prototype.isFiltering = function () {\n    return this.allowFiltering;\n  };\n\n  DropDownList.prototype.isPopupButton = function () {\n    return true;\n  };\n\n  DropDownList.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n\n  DropDownList.prototype.clearText = function () {\n    this.filterInput.value = this.typedString = '';\n    this.searchLists(null);\n  };\n\n  DropDownList.prototype.listScroll = function () {\n    this.filterInput.blur();\n  };\n\n  DropDownList.prototype.setEleWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.inputWrapper.container.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n\n  DropDownList.prototype.closePopup = function (delay, e) {\n    var _this = this;\n\n    this.isTyped = false;\n\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.isActive = false;\n    this.filterInputObj = null;\n    this.isDropDownClick = false;\n    this.preventAutoFill = false;\n    var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n\n    for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n      var element = scrollableParentElements_1[_i];\n      EventHandler.remove(element, 'scroll', this.scrollHandler);\n    }\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n      EventHandler.remove(this.list, 'scroll', this.listScroll);\n    }\n\n    if (this.isFilterLayout()) {\n      if (!Browser.isDevice) {\n        this.searchKeyModule.destroy();\n\n        if (this.clearIconElement) {\n          EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n        }\n      }\n\n      if (this.backIconElement) {\n        EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n        EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n      }\n\n      EventHandler.remove(this.filterInput, 'input', this.onInput);\n      EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n      EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n      EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n      EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n      this.filterInput = null;\n    }\n\n    attributes(this.targetElement(), {\n      'aria-expanded': 'false'\n    });\n    this.inputElement.setAttribute('aria-expanded', 'false');\n    this.targetElement().removeAttribute('aria-owns');\n    this.targetElement().removeAttribute('aria-activedescendant');\n    this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n\n    if (this.isFiltering()) {\n      this.actionCompleteData.isUpdated = false;\n    }\n\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('close', eventArgs, function (eventArgs) {\n      if (!isNullOrUndefined(_this.popupObj) && !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n        var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n\n        fixedHeader.parentNode.removeChild(fixedHeader);\n        _this.fixedHeaderElement = null;\n      }\n\n      if (!eventArgs.cancel) {\n        if (_this.getModuleName() === 'autocomplete') {\n          _this.rippleFun();\n        }\n\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.isFilterFocus = false;\n    this.popupObj.destroy();\n    detach(this.popupObj.element);\n  };\n\n  DropDownList.prototype.clickOnBackIcon = function () {\n    this.hidePopup();\n    this.focusIn();\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.render = function () {\n    if (this.element.tagName === 'INPUT') {\n      this.inputElement = this.element;\n\n      if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n        this.inputElement.setAttribute('role', 'combobox');\n      }\n\n      if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n        this.inputElement.setAttribute('type', 'text');\n      }\n\n      this.inputElement.setAttribute('aria-expanded', 'false');\n    } else {\n      this.inputElement = this.createElement('input', {\n        attrs: {\n          role: 'combobox',\n          type: 'text'\n        }\n      });\n\n      if (this.element.tagName !== this.getNgDirective()) {\n        this.element.style.display = 'none';\n      }\n\n      this.element.parentElement.insertBefore(this.inputElement, this.element);\n      this.preventTabIndex(this.inputElement);\n    }\n\n    var updatedCssClassValues = this.cssClass;\n\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    this.inputWrapper = Input.createInput({\n      element: this.inputElement,\n      buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n      floatLabelType: this.floatLabelType,\n      properties: {\n        readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n        placeholder: this.placeholder,\n        cssClass: updatedCssClassValues,\n        enabled: this.enabled,\n        enableRtl: this.enableRtl,\n        showClearButton: this.showClearButton\n      }\n    }, this.createElement);\n\n    if (this.element.tagName === this.getNgDirective()) {\n      this.element.appendChild(this.inputWrapper.container);\n    } else {\n      this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n    }\n\n    this.hiddenElement = this.createElement('select', {\n      attrs: {\n        'aria-hidden': 'true',\n        'tabindex': '-1',\n        'class': dropDownListClasses.hiddenElement\n      }\n    });\n    prepend([this.hiddenElement], this.inputWrapper.container);\n    this.validationAttribute(this.element, this.hiddenElement);\n    this.setReadOnly();\n    this.setFields();\n    this.inputWrapper.container.style.width = formatUnit(this.width);\n    this.inputWrapper.container.classList.add('e-ddl');\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never') {\n      this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n\n    this.wireEvent();\n    this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n    this.element.removeAttribute('tabindex');\n    var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n    this.element.id = id;\n    this.hiddenElement.id = id + '_hidden';\n    this.targetElement().setAttribute('tabindex', this.tabIndex);\n    attributes(this.targetElement(), this.getAriaAttributes());\n    this.updateDataAttribute(this.htmlAttributes);\n    this.setHTMLAttributes();\n\n    if (this.targetElement() === this.inputElement) {\n      this.inputElement.removeAttribute('aria-labelledby');\n    }\n\n    if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n      this.initValue();\n    } else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n      var selectElement = this.element;\n      this.value = selectElement.options[selectElement.selectedIndex].value;\n      this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n      this.initValue();\n    }\n\n    this.preventTabIndex(this.element);\n\n    if (!this.enabled) {\n      this.targetElement().tabIndex = -1;\n    }\n\n    this.initial = false;\n    this.element.style.opacity = '';\n\n    this.inputElement.onselect = function (e) {\n      e.stopImmediatePropagation();\n    };\n\n    this.inputElement.onchange = function (e) {\n      e.stopImmediatePropagation();\n    };\n\n    if (this.element.hasAttribute('autofocus')) {\n      this.focusIn();\n    }\n\n    if (!isNullOrUndefined(this.text)) {\n      this.inputElement.setAttribute('value', this.text);\n    }\n\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n\n    var floatLabelElement = this.inputWrapper.container.getElementsByClassName('e-float-text')[0];\n\n    if (!isNullOrUndefined(this.element.id) && this.element.id !== '' && !isNullOrUndefined(floatLabelElement)) {\n      floatLabelElement.id = 'label_' + this.element.id.replace(/ /g, '_');\n      attributes(this.inputElement, {\n        'aria-labelledby': floatLabelElement.id\n      });\n    }\n\n    this.renderComplete();\n  };\n\n  DropDownList.prototype.setFooterTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.footer) {\n      if (this.isReact) {\n        this.clearTemplate(['footerTemplate']);\n      } else {\n        this.footer.innerHTML = '';\n      }\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], dropDownListClasses.footer);\n    }\n\n    var footercheck = this.dropdownCompiler(this.footerTemplate);\n\n    if (footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n    if (footerCompTemp && footerCompTemp.length > 0) {\n      for (var i = 0; i < footerCompTemp.length; i++) {\n        this.footer.appendChild(footerCompTemp[i]);\n      }\n    }\n\n    append([this.footer], popupEle);\n  };\n\n  DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], dropDownListClasses.header);\n    }\n\n    var headercheck = this.dropdownCompiler(this.headerTemplate);\n\n    if (headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n    if (headerCompTemp && headerCompTemp.length) {\n      for (var i = 0; i < headerCompTemp.length; i++) {\n        this.header.appendChild(headerCompTemp[i]);\n      }\n    }\n\n    var contentEle = popupEle.querySelector('div.e-content');\n    popupEle.insertBefore(this.header, contentEle);\n  };\n\n  DropDownList.prototype.setOldText = function (text) {\n    this.text = text;\n  };\n\n  DropDownList.prototype.setOldValue = function (value) {\n    this.value = value;\n  };\n\n  DropDownList.prototype.refreshPopup = function () {\n    if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === 'autocomplete')) {\n      removeClass([this.popupObj.element], 'e-popup-close');\n      this.popupObj.refreshPosition(this.inputWrapper.container);\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.checkData = function (newProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {\n      this.list = null;\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n    }\n\n    this.isListSearched = false;\n    var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n    var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n\n    if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n      this.itemData = null;\n    }\n\n    if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n      this.actionData = this.actionCompleteData;\n    } else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n      this.actionCompleteData = this.getModuleName() === 'combobox' ? {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      } : this.actionCompleteData;\n      this.actionData = this.actionCompleteData;\n    }\n  };\n\n  DropDownList.prototype.updateDataSource = function (props) {\n    if (this.inputElement.value !== '' || !isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) {\n      this.clearAll(null, props);\n    }\n\n    if (this.fields.groupBy && props.fields && !this.isGroupChecking && this.list) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n\n    if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) || !(props.dataSource === [])) {\n      this.typedString = '';\n      this.resetList(this.dataSource);\n    }\n\n    if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n      this.checkCustomValue();\n    }\n  };\n\n  DropDownList.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n    this.setProperties({\n      'text': dataItem.text,\n      'value': dataItem.value\n    });\n  };\n\n  DropDownList.prototype.updateInputFields = function () {\n    if (this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @private\n   * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n\n    if (this.getModuleName() === 'dropdownlist') {\n      this.checkData(newProp);\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          break;\n\n        case 'htmlAttributes':\n          this_1.setHTMLAttributes();\n          break;\n\n        case 'width':\n          this_1.setEleWidth(newProp.width);\n          Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n          break;\n\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this_1.filterInput) {\n            Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n          }\n\n          break;\n\n        case 'readonly':\n          if (this_1.getModuleName() !== 'dropdownlist') {\n            Input.setReadonly(newProp.readonly, this_1.inputElement);\n          }\n\n          this_1.setReadOnly();\n          break;\n\n        case 'cssClass':\n          this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n          Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n          break;\n\n        case 'enableRtl':\n          this_1.setEnableRtl();\n          break;\n\n        case 'enabled':\n          this_1.setEnable();\n          break;\n\n        case 'text':\n          if (newProp.text === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender) {\n            var li = this_1.getElementByText(newProp.text);\n\n            if (!this_1.checkValidLi(li)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n              } else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                var listLength_1 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_1);\n\n                    _this.updateValues();\n                  } else {\n                    _this.setOldText(oldProp.text);\n                  }\n                });\n              } else if (this_1.getModuleName() === 'autocomplete') {\n                this_1.setInputValue(newProp, oldProp);\n              } else {\n                this_1.setOldText(oldProp.text);\n              }\n            }\n\n            this_1.updateInputFields();\n          }\n\n          break;\n\n        case 'value':\n          if (newProp.value === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          this_1.notify('beforeValueChange', {\n            newProp: newProp\n          }); // gird component value type change\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender) {\n            var item = this_1.getElementByValue(newProp.value);\n\n            if (!this_1.checkValidLi(item)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n              } else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                var listLength_2 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_2);\n\n                    _this.updateValues();\n                  } else {\n                    _this.setOldValue(oldProp.value);\n                  }\n                });\n              } else if (this_1.getModuleName() === 'autocomplete') {\n                this_1.setInputValue(newProp, oldProp);\n              } else {\n                this_1.setOldValue(oldProp.value);\n              }\n            }\n\n            this_1.updateInputFields();\n            this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n          }\n\n          break;\n\n        case 'index':\n          if (newProp.index === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender && this_1.liCollections) {\n            var element = this_1.liCollections[newProp.index];\n\n            if (!this_1.checkValidLi(element)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n              } else {\n                this_1.index = oldProp.index;\n              }\n            }\n\n            this_1.updateInputFields();\n          }\n\n          break;\n\n        case 'footerTemplate':\n          if (this_1.popupObj) {\n            this_1.setFooterTemplate(this_1.popupObj.element);\n          }\n\n          break;\n\n        case 'headerTemplate':\n          if (this_1.popupObj) {\n            this_1.setHeaderTemplate(this_1.popupObj.element);\n          }\n\n          break;\n\n        case 'valueTemplate':\n          if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate != null) {\n            this_1.setValueTemplate();\n          }\n\n          break;\n\n        case 'allowFiltering':\n          if (this_1.allowFiltering) {\n            this_1.actionCompleteData = {\n              ulElement: this_1.ulElement,\n              list: this_1.listData,\n              isUpdated: true\n            };\n            this_1.actionData = this_1.actionCompleteData;\n            this_1.updateSelectElementData(this_1.allowFiltering);\n          }\n\n          break;\n\n        case 'floatLabelType':\n          Input.removeFloating(this_1.inputWrapper);\n          Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n\n          if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0] && this_1.floatLabelType !== 'Never') {\n            this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n          }\n\n          break;\n\n        case 'showClearButton':\n          Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n          this_1.bindClearEvent();\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n          }\n          break;\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      _loop_1(prop);\n    }\n  };\n\n  DropDownList.prototype.checkValidLi = function (element) {\n    if (this.isValidLI(element)) {\n      this.setSelection(element, null);\n      return true;\n    }\n\n    return false;\n  };\n\n  DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n    var _this = this;\n\n    var li;\n\n    this.updateListValues = function () {\n      if (prop === 'text') {\n        li = _this.getElementByText(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldText(oldProp);\n        }\n      } else if (prop === 'value') {\n        li = _this.getElementByValue(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldValue(oldProp);\n        }\n      } else if (prop === 'index') {\n        li = _this.liCollections[newProp];\n\n        if (!_this.checkValidLi(li)) {\n          _this.index = oldProp;\n        }\n      }\n    };\n  };\n\n  DropDownList.prototype.setReadOnly = function () {\n    if (this.readonly) {\n      addClass([this.inputWrapper.container], ['e-readonly']);\n    } else {\n      removeClass([this.inputWrapper.container], ['e-readonly']);\n    }\n  };\n\n  DropDownList.prototype.setInputValue = function (newProp, oldProp) {};\n\n  DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n\n    if (this.popupObj) {\n      Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  DropDownList.prototype.getModuleName = function () {\n    return 'dropdownlist';\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.showPopup = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isFiltering() && this.dataSource instanceof DataManager && this.actionData.list != this.actionCompleteData.list && this.actionData.list && this.actionData.ulElement) {\n      this.actionCompleteData = this.actionData;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    }\n\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n\n    this.beforePopupOpen = true;\n\n    if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n      this.isActive = true;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n      this.renderList(e);\n    }\n\n    this.invokeRenderPopup(e);\n  };\n\n  DropDownList.prototype.invokeRenderPopup = function (e) {\n    if (Browser.isDevice && this.isFilterLayout()) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_2 = this;\n\n      window.onpopstate = function () {\n        proxy_2.hidePopup();\n      };\n\n      history.pushState({}, '');\n    }\n\n    if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\n      this.renderPopup(e);\n    }\n\n    attributes(this.targetElement(), {\n      'aria-activedescendant': this.selectedElementID\n    });\n\n    if (this.selectedElementID == null) {\n      this.targetElement().removeAttribute('aria-activedescendant');\n    }\n  };\n\n  DropDownList.prototype.renderHightSearch = function () {// update high light search\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.hidePopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.isEscapeKey = false;\n\n      if (!isNullOrUndefined(this.index)) {\n        var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n        this.selectedLI = this.liCollections[this.index] || element;\n\n        if (this.selectedLI) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n\n          if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n          }\n        }\n      } else {\n        this.resetSelection();\n      }\n    }\n\n    this.closePopup(0, e);\n    var dataItem = this.getItemData();\n    var isSelectVal = !isNullOrUndefined(this.selectedLI);\n\n    if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {\n      this.isSelectCustom = false;\n      this.clearAll(e);\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Sets the focus on the component for interaction.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.focusIn = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n      return;\n    }\n\n    var isFocused = false;\n\n    if (this.preventFocus && Browser.isDevice) {\n      this.inputWrapper.container.tabIndex = 1;\n      this.inputWrapper.container.focus();\n      this.preventFocus = false;\n      isFocused = true;\n    }\n\n    if (!isFocused) {\n      this.targetElement().focus();\n    }\n\n    addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    this.onFocus(e);\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n  };\n  /**\n   * Moves the focus from the component if the component is already focused.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.focusOut = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (!this.enabled) {\n      return;\n    }\n\n    this.isTyped = true;\n    this.hidePopup(e);\n\n    if (this.targetElement()) {\n      this.targetElement().blur();\n    }\n\n    removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.destroy = function () {\n    this.isActive = false;\n    resetIncrementalSearchValues(this.element.id); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    this.hidePopup();\n    this.unWireEvent();\n\n    if (this.list) {\n      this.unWireListEvents();\n    }\n\n    if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n\n    if (this.inputElement) {\n      var attrArray = ['readonly', 'aria-disabled', 'placeholder', 'aria-labelledby', 'aria-expanded', 'autocomplete', 'aria-readonly', 'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n\n      for (var i = 0; i < attrArray.length; i++) {\n        this.inputElement.removeAttribute(attrArray[i]);\n      }\n\n      this.inputElement.setAttribute('tabindex', this.tabIndex);\n      this.inputElement.classList.remove('e-input');\n      Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    this.element.style.display = 'block';\n\n    if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n      detach(this.inputWrapper.container);\n    } else {\n      this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n      detach(this.inputWrapper.container);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n\n\n  DropDownList.prototype.getItems = function () {\n    if (!this.list) {\n      if (this.dataSource instanceof DataManager) {\n        this.initRemoteRender = true;\n      }\n\n      this.renderList();\n    }\n\n    return this.ulElement ? _super.prototype.getItems.call(this) : [];\n  };\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n\n\n  DropDownList.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Allows you to clear the selected values from the component.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.clear = function () {\n    this.value = null;\n  };\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"cssClass\", void 0);\n\n  __decorate$1([Property('100%')], DropDownList.prototype, \"width\", void 0);\n\n  __decorate$1([Property('300px')], DropDownList.prototype, \"popupHeight\", void 0);\n\n  __decorate$1([Property('100%')], DropDownList.prototype, \"popupWidth\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"placeholder\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$1([Property({})], DropDownList.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"query\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"valueTemplate\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"headerTemplate\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"footerTemplate\", void 0);\n\n  __decorate$1([Property(false)], DropDownList.prototype, \"allowFiltering\", void 0);\n\n  __decorate$1([Property(false)], DropDownList.prototype, \"readonly\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"text\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"value\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"index\", void 0);\n\n  __decorate$1([Property('Never')], DropDownList.prototype, \"floatLabelType\", void 0);\n\n  __decorate$1([Property(false)], DropDownList.prototype, \"showClearButton\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"filtering\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"change\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"beforeOpen\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"open\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"close\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"blur\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"focus\", void 0);\n\n  DropDownList = __decorate$1([NotifyPropertyChanges], DropDownList);\n  return DropDownList;\n}(DropDownBase);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$2 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar RTL = 'e-rtl';\nvar DROPDOWNTREE = 'e-ddt';\nvar HIDDENELEMENT = 'e-ddt-hidden';\nvar DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nvar SHOW_CHIP = 'e-show-chip';\nvar SHOW_CLEAR = 'e-show-clear';\nvar SHOW_DD_ICON = 'e-show-dd-icon';\nvar CHIP_INPUT = 'e-chip-input';\nvar INPUTFOCUS = 'e-input-focus';\nvar INPUTGROUP = 'e-input-group';\nvar ICONANIMATION = 'e-icon-anim';\nvar CLOSEICON_CLASS = 'e-clear-icon e-icons';\nvar CHIP_WRAPPER = 'e-chips-wrapper';\nvar CHIP_COLLECTION = 'e-chips-collection';\nvar CHIP = 'e-chips';\nvar CHIP_CONTENT = 'e-chipcontent';\nvar CHIP_CLOSE = 'e-chips-close';\nvar HIDEICON = 'e-icon-hide';\nvar DDTHIDEICON = 'e-ddt-icon-hide';\nvar POPUP_CLASS = 'e-ddt e-popup';\nvar PARENTITEM = 'e-list-parent';\nvar CONTENT = 'e-popup-content';\nvar DROPDOWN = 'e-dropdown';\nvar DISABLED = 'e-disabled';\nvar ICONS = 'e-icons';\nvar CHECKALLPARENT = 'e-selectall-parent';\nvar CHECKALLHIDE = 'e-hide-selectall';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar ALLTEXT = 'e-all-text';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar FILTERWRAP = 'e-filter-wrap';\nvar DDTICON = 'e-ddt-icon';\nvar FOOTER = 'e-ddt-footer';\nvar HEADER = 'e-ddt-header';\nvar NODATACONTAINER = 'e-ddt-nodata';\nvar NODATA = 'e-no-data';\nvar HEADERTEMPLATE = 'HeaderTemplate';\nvar FOOTERTEMPLATE = 'FooterTemplate';\nvar NORECORDSTEMPLATE = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nvar CUSTOMTEMPLATE = 'CustomTemplate';\nvar REMAIN_WRAPPER = 'e-remain';\nvar OVERFLOW_VIEW = 'e-overflow';\nvar SHOW_TEXT = 'e-show-text';\nvar TOTAL_COUNT_WRAPPER = 'e-total-count';\nvar REMAIN_COUNT = 'e-wrap-count';\n\nvar Fields =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$2(Fields, _super);\n\n  function Fields() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$2([Property('child')], Fields.prototype, \"child\", void 0);\n\n  __decorate$2([Property([])], Fields.prototype, \"dataSource\", void 0);\n\n  __decorate$2([Property('expanded')], Fields.prototype, \"expanded\", void 0);\n\n  __decorate$2([Property('hasChildren')], Fields.prototype, \"hasChildren\", void 0);\n\n  __decorate$2([Property('htmlAttributes')], Fields.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$2([Property('iconCss')], Fields.prototype, \"iconCss\", void 0);\n\n  __decorate$2([Property('imageUrl')], Fields.prototype, \"imageUrl\", void 0);\n\n  __decorate$2([Property('parentValue')], Fields.prototype, \"parentValue\", void 0);\n\n  __decorate$2([Property(null)], Fields.prototype, \"query\", void 0);\n\n  __decorate$2([Property('selected')], Fields.prototype, \"selected\", void 0);\n\n  __decorate$2([Property(null)], Fields.prototype, \"tableName\", void 0);\n\n  __decorate$2([Property('text')], Fields.prototype, \"text\", void 0);\n\n  __decorate$2([Property('tooltip')], Fields.prototype, \"tooltip\", void 0);\n\n  __decorate$2([Property('value')], Fields.prototype, \"value\", void 0);\n\n  return Fields;\n}(ChildProperty);\n\nvar TreeSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$2(TreeSettings, _super);\n\n  function TreeSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$2([Property(false)], TreeSettings.prototype, \"autoCheck\", void 0);\n\n  __decorate$2([Property('Auto')], TreeSettings.prototype, \"expandOn\", void 0);\n\n  __decorate$2([Property(false)], TreeSettings.prototype, \"loadOnDemand\", void 0);\n\n  return TreeSettings;\n}(ChildProperty);\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\n\n\nvar DropDownTree =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$2(DropDownTree, _super);\n\n  function DropDownTree(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.filterTimer = null;\n    _this.isFilteredData = false;\n    _this.isFilterRestore = false; // eslint-disable-next-line\n\n    _this.selectedData = [];\n    _this.filterDelayTime = 300;\n    _this.isClicked = false;\n    return _this;\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string}\n   * @hidden\n   */\n\n\n  DropDownTree.prototype.getPersistData = function () {\n    var keyEntity = ['value'];\n    return this.addOnPersist(keyEntity);\n  };\n\n  DropDownTree.prototype.getLocaleName = function () {\n    return 'drop-down-tree';\n  };\n  /**\n   * Initialize the event handler.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  DropDownTree.prototype.preRender = function () {\n    this.inputFocus = false;\n    this.isPopupOpen = false;\n    this.isFirstRender = true;\n    this.isInitialized = false;\n    this.currentText = null;\n    this.currentValue = null;\n    this.oldValue = null;\n    this.removeValue = false;\n    this.selectedText = [];\n    this.treeItems = [];\n    this.dataValue = null;\n    this.isNodeSelected = false;\n    this.isDynamicChange = false;\n    this.clearIconWidth = 0;\n    this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE;\n    this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE;\n    this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE;\n    this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE;\n    this.customTemplateId = \"\" + this.element.id + CUSTOMTEMPLATE;\n    this.keyConfigs = {\n      escape: 'escape',\n      altUp: 'alt+uparrow',\n      altDown: 'alt+downarrow',\n      tab: 'tab',\n      shiftTab: 'shift+tab',\n      end: 'end',\n      enter: 'enter',\n      home: 'home',\n      moveDown: 'downarrow',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      ctrlDown: 'ctrl+downarrow',\n      ctrlUp: 'ctrl+uparrow',\n      ctrlEnter: 'ctrl+enter',\n      ctrlHome: 'ctrl+home',\n      ctrlEnd: 'ctrl+end',\n      shiftDown: 'shift+downarrow',\n      shiftUp: 'shift+uparrow',\n      shiftEnter: 'shift+enter',\n      shiftHome: 'shift+home',\n      shiftEnd: 'shift+end',\n      csDown: 'ctrl+shift+downarrow',\n      csUp: 'ctrl+shift+uparrow',\n      csEnter: 'ctrl+shift+enter',\n      csHome: 'ctrl+shift+home',\n      csEnd: 'ctrl+shift+end',\n      space: 'space',\n      ctrlA: 'ctrl+A'\n    };\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.render = function () {\n    var isTree = select('#' + this.element.id + '_tree', document);\n\n    if (isTree) {\n      var popupDiv = select('#' + this.element.id + '_popup', document);\n      detach(popupDiv ? popupDiv : isTree.parentElement);\n    }\n\n    this.ensureAutoCheck();\n\n    if (this.element.tagName === 'INPUT') {\n      this.inputEle = this.element;\n\n      if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n        this.inputEle.setAttribute('role', 'textbox');\n      }\n\n      if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n        this.inputEle.setAttribute('type', 'text');\n      }\n    } else {\n      this.inputEle = this.createElement('input', {\n        attrs: {\n          role: 'textbox',\n          type: 'text'\n        }\n      });\n      this.element.parentElement.insertBefore(this.inputEle, this.element);\n    }\n\n    this.inputObj = Input.createInput({\n      element: this.inputEle,\n      floatLabelType: this.floatLabelType,\n      buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n      properties: {\n        readonly: true,\n        placeholder: this.placeholder,\n        enabled: this.enabled,\n        cssClass: this.cssClass,\n        enableRtl: this.enableRtl\n      }\n    }, this.createElement);\n    this.inputWrapper = this.inputObj.container;\n\n    if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n      this.inputWrapper.classList.add(INPUTGROUP);\n    }\n\n    if (this.showDropDownIcon) {\n      this.inputWrapper.classList.add(SHOW_DD_ICON);\n    }\n\n    if (this.element.tagName === this.getDirective()) {\n      this.element.appendChild(this.inputWrapper);\n    }\n\n    this.createHiddenElement();\n    this.createClearIcon();\n    this.inputWrapper.classList.add(DROPDOWNTREE);\n    this.setElementWidth(this.width);\n    this.updateDataAttribute();\n    this.setHTMLAttributes();\n    this.setAttributes();\n    this.popupDiv = this.createElement('div', {\n      className: CONTENT,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    this.popupDiv.classList.add(DROPDOWN);\n    this.tree = this.createElement('div', {\n      id: this.element.id + '_tree'\n    });\n    this.popupDiv.appendChild(this.tree);\n    document.body.appendChild(this.popupDiv);\n    this.wireTreeEvents();\n    addClass([this.popupDiv], DDTHIDEICON);\n    this.renderTree();\n    this.isRemoteData = this.fields.dataSource instanceof DataManager;\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.mode !== 'Delimiter') {\n        this.createChip();\n      }\n\n      if (!this.wrapText && this.mode !== 'Custom') {\n        this.overFlowWrapper = this.createElement('span', {\n          className: OVERFLOW_VIEW + ' ' + HIDEICON\n        });\n        this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n\n        if (this.mode !== 'Box') {\n          addClass([this.overFlowWrapper], SHOW_TEXT);\n        }\n      }\n    }\n\n    if (!this.isRemoteData) {\n      this.setTreeValue();\n      this.setTreeText();\n      this.updateHiddenValue();\n      this.setSelectedValue();\n\n      if (!this.wrapText) {\n        this.updateView();\n      }\n    }\n\n    this.wireEvents();\n    var firstUl = select('.' + PARENTITEM, this.treeObj.element);\n\n    if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n      firstUl.removeAttribute('aria-multiselectable');\n    }\n\n    this.oldValue = this.value;\n    this.isInitialized = true;\n    this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate || this.noRecordsTemplate || this.customTemplate;\n    this.renderComplete();\n  };\n\n  DropDownTree.prototype.ensureAutoCheck = function () {\n    if (this.allowFiltering && this.treeSettings.autoCheck) {\n      this.setProperties({\n        treeSettings: {\n          autoCheck: false\n        }\n      }, true);\n    }\n  };\n\n  DropDownTree.prototype.hideCheckAll = function (flag) {\n    var checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n\n    if (!isNullOrUndefined(checkAllEle)) {\n      if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n        addClass([checkAllEle], CHECKALLHIDE);\n      } else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n        removeClass([checkAllEle], CHECKALLHIDE);\n      }\n    }\n  };\n\n  DropDownTree.prototype.renderFilter = function () {\n    this.filterContainer = this.createElement('div', {\n      id: this.element.id + '_filter_wrap',\n      className: FILTERWRAP\n    });\n    var filterInput = this.createElement('input', {\n      id: this.element.id + '_filter',\n      attrs: {\n        autocomplete: 'off',\n        'aria-label': this.filterBarPlaceholder\n      }\n    });\n    this.filterContainer.appendChild(filterInput);\n    prepend([this.filterContainer], this.popupEle);\n    this.filterObj = new TextBox({\n      value: '',\n      showClearButton: true,\n      placeholder: this.filterBarPlaceholder,\n      input: this.filterChangeHandler.bind(this)\n    });\n    this.filterObj.appendTo('#' + this.element.id + '_filter');\n  };\n\n  DropDownTree.prototype.filterChangeHandler = function (args) {\n    var _this = this;\n\n    if (!isNullOrUndefined(args.value)) {\n      window.clearTimeout(this.filterTimer);\n      this.filterTimer = window.setTimeout(function () {\n        _this.filterHandler(args.value, args.event);\n      }, this.filterDelayTime);\n    }\n  };\n\n  DropDownTree.prototype.filterHandler = function (value, event) {\n    var _this = this;\n\n    if (!this.isFilteredData) {\n      this.treeData = this.treeObj.getTreeData();\n    }\n\n    var filterFields = this.cloneFields(this.fields);\n    var args = {\n      cancel: false,\n      preventDefaultAction: false,\n      event: event,\n      text: value,\n      fields: filterFields\n    };\n    this.trigger('filtering', args, function (args) {\n      if (!args.cancel) {\n        var flag = false;\n        var fields = void 0;\n        _this.isFilteredData = true;\n\n        if (value === '') {\n          _this.isFilteredData = false;\n          _this.isFilterRestore = true;\n          fields = _this.cloneFields(_this.fields);\n        } else if (args.preventDefaultAction) {\n          fields = args.fields;\n        } else {\n          if (_this.treeDataType === 1) {\n            fields = _this.selfReferencefilter(value, args.fields);\n          } else {\n            if (_this.fields.dataSource instanceof DataManager) {\n              flag = true;\n            } else {\n              fields = _this.nestedFilter(value, args.fields);\n            }\n          }\n        }\n\n        _this.hideCheckAll(_this.isFilteredData);\n\n        if (flag) {\n          return;\n        }\n\n        _this.treeObj.fields = _this.getTreeFields(fields);\n\n        _this.treeObj.dataBind();\n      }\n    });\n  };\n\n  DropDownTree.prototype.nestedFilter = function (value, filteredFields) {\n    // eslint-disable-next-line\n    var matchedDataSource = [];\n\n    for (var i = 0; i < this.treeData.length; i++) {\n      // eslint-disable-next-line\n      var filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n\n      if (!isNullOrUndefined(filteredChild)) {\n        matchedDataSource.push(filteredChild);\n      }\n    }\n\n    filteredFields.dataSource = matchedDataSource;\n    return filteredFields;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.nestedChildFilter = function (value, node) {\n    // eslint-disable-next-line\n    var children = node[this.fields.child];\n\n    if (isNullOrUndefined(children)) {\n      return this.isMatchedNode(value, node) ? node : null;\n    } else {\n      // eslint-disable-next-line\n      var matchedChildren = [];\n\n      for (var i = 0; i < children.length; i++) {\n        // eslint-disable-next-line\n        var filteredChild = this.nestedChildFilter(value, children[i]);\n\n        if (!isNullOrUndefined(filteredChild)) {\n          matchedChildren.push(filteredChild);\n        }\n      }\n\n      var filteredItems = Object.assign({}, node);\n\n      if (matchedChildren.length !== 0) {\n        filteredItems[this.fields.child] = matchedChildren;\n        return filteredItems;\n      } else {\n        filteredItems[this.fields.child] = null;\n        return this.isMatchedNode(value, filteredItems) ? filteredItems : null;\n      }\n    }\n  };\n\n  DropDownTree.prototype.selfReferencefilter = function (value, filteredFields) {\n    // eslint-disable-next-line\n    var matchedData = []; // eslint-disable-next-line\n\n    var matchedDataSource = [];\n\n    for (var i = 0; i < this.treeData.length; i++) {\n      if (this.isMatchedNode(value, this.treeData[i])) {\n        matchedData.push(this.treeData[i]);\n      }\n    }\n\n    for (var i = 0; i < matchedData.length; i++) {\n      if (matchedDataSource.indexOf(matchedData[i]) === -1) {\n        matchedDataSource.push(matchedData[i]); // eslint-disable-next-line\n\n        var parentId = matchedData[i][this.fields.parentValue];\n\n        while (!isNullOrUndefined(parentId)) {\n          // eslint-disable-next-line\n          var parent_1 = null;\n\n          for (var j = 0; j < this.treeData.length; j++) {\n            // eslint-disable-next-line\n            var value_1 = this.treeData[j][this.fields.value];\n\n            if (!isNullOrUndefined(value_1) && value_1 === parentId) {\n              parent_1 = this.treeData[j];\n              break;\n            }\n          }\n\n          if (!isNullOrUndefined(parent_1) && matchedDataSource.indexOf(parent_1) === -1) {\n            matchedDataSource.push(parent_1);\n            parentId = parent_1[this.fields.parentValue];\n          } else {\n            break;\n          }\n        }\n      }\n    }\n\n    filteredFields.dataSource = matchedDataSource;\n    return filteredFields;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.isMatchedNode = function (value, node) {\n    var checkValue = node[this.fields.text];\n\n    if (this.ignoreCase) {\n      checkValue = checkValue.toLowerCase();\n      value = value.toLowerCase();\n    }\n\n    if (this.ignoreAccent) {\n      checkValue = DataUtil.ignoreDiacritics(checkValue);\n      value = DataUtil.ignoreDiacritics(value);\n    }\n\n    if (this.filterType === 'StartsWith') {\n      return checkValue.slice(0, value.length) === value;\n    } else if (this.filterType === 'EndsWith') {\n      return checkValue.slice(-value.length) === value;\n    } else {\n      return checkValue.indexOf(value) !== -1;\n    }\n  };\n  /* To wire events for the dropdown tree */\n\n\n  DropDownTree.prototype.wireEvents = function () {\n    EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n    EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n    EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n    EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n    EventHandler.add(window, 'resize', this.windowResize, this);\n    var formElement = closest(this.inputWrapper, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n\n  DropDownTree.prototype.wireTreeEvents = function () {\n    this.keyboardModule = new KeyboardEvents(this.tree, {\n      keyAction: this.treeAction.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n\n  DropDownTree.prototype.wireCheckAllWrapperEvents = function () {\n    this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n      keyAction: this.checkAllAction.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  /* To unwire events for the dropdown tree */\n\n\n  DropDownTree.prototype.unWireEvents = function () {\n    EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n    EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n    EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n    EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n    EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n    EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n    EventHandler.remove(window, 'resize', this.windowResize);\n    var formElement = closest(this.inputWrapper, 'form');\n\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n  };\n  /* Trigger when the dropdown is clicked */\n\n\n  DropDownTree.prototype.dropDownClick = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    if (this.isClearButtonClick) {\n      this.isClearButtonClick = false;\n      return;\n    }\n\n    if (this.isPopupOpen) {\n      this.hidePopup();\n    } else {\n      this.focusIn(e);\n      this.renderPopup();\n    }\n\n    this.showOverAllClear();\n  };\n\n  DropDownTree.prototype.mouseIn = function () {\n    if (this.enabled || !this.readonly) {\n      this.showOverAllClear();\n    }\n  };\n\n  DropDownTree.prototype.onMouseLeave = function () {\n    if (!this.inputFocus) {\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n  };\n\n  DropDownTree.prototype.getDirective = function () {\n    return 'EJS-DROPDOWNTREE';\n  };\n\n  DropDownTree.prototype.focusOut = function (e) {\n    if (!this.enabled || this.readonly || !this.inputFocus) {\n      return;\n    }\n\n    if ((Browser.isIE || Browser.info.name === 'edge') && e.target === this.inputWrapper) {\n      return;\n    }\n\n    var target = e.relatedTarget;\n\n    if (target !== this.inputEle && isNullOrUndefined(target) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n      this.onFocusOut(e);\n    }\n  };\n\n  DropDownTree.prototype.onFocusOut = function (event) {\n    this.inputFocus = false;\n\n    if (this.isPopupOpen) {\n      this.hidePopup();\n    }\n\n    if (this.isClearButtonClick) {\n      this.isClearButtonClick = false;\n    }\n\n    if (this.showClearButton) {\n      this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n\n    removeClass([this.inputWrapper], [INPUTFOCUS]);\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      var isValue = this.value ? this.value.length ? true : false : false;\n\n      if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n        if (this.chipWrapper && this.mode === 'Default') {\n          addClass([this.chipWrapper], HIDEICON);\n          removeClass([this.inputWrapper], SHOW_CHIP);\n          removeClass([this.inputEle], CHIP_INPUT);\n        }\n      }\n\n      if (!this.wrapText && isValue) {\n        this.updateView();\n      }\n    }\n\n    if (this.changeOnBlur) {\n      this.triggerChangeEvent(event);\n    }\n\n    this.removeValue = false;\n    this.oldValue = this.value;\n    this.trigger('blur');\n  };\n\n  DropDownTree.prototype.updateView = function () {\n    if (!this.showCheckBox && !this.allowMultiSelection || this.mode === 'Custom' || this.inputFocus) {\n      return;\n    }\n\n    if (this.mode !== 'Box') {\n      addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n    } else {\n      addClass([this.inputWrapper], SHOW_CHIP);\n    }\n\n    if (this.value && this.value.length !== 0) {\n      if (this.inputWrapper.contains(this.chipWrapper)) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n\n      addClass([this.inputEle], CHIP_INPUT);\n      this.updateOverFlowView();\n      this.ensurePlaceHolder();\n    }\n  };\n\n  DropDownTree.prototype.triggerChangeEvent = function (event) {\n    var isEqual = this.ddtCompareValues(this.oldValue, this.value);\n\n    if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n      var eventArgs = {\n        e: event,\n        oldValue: this.oldValue,\n        value: this.value,\n        isInteracted: event ? true : false,\n        element: this.element\n      };\n      this.trigger('change', eventArgs);\n      this.oldValue = this.value;\n    }\n  };\n\n  DropDownTree.prototype.ddtCompareValues = function (oldValue, newValue) {\n    if (oldValue === null || newValue === null) {\n      var isValid = oldValue === null ? newValue === oldValue ? true : false : oldValue.length === 0 ? newValue === oldValue : false;\n      return isValid;\n    } else if (oldValue.length !== newValue.length) {\n      return false;\n    }\n\n    for (var i = 0; i < oldValue.length; i++) {\n      if (oldValue[i] !== newValue[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  DropDownTree.prototype.focusIn = function (e) {\n    if (!this.enabled || this.readonly || this.inputFocus) {\n      return;\n    }\n\n    this.showOverAllClear();\n    this.inputFocus = true;\n    addClass([this.inputWrapper], [INPUTFOCUS]);\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.mode !== 'Delimiter' && this.inputFocus) {\n        if (this.chipWrapper && this.value && this.value.length !== 0) {\n          removeClass([this.chipWrapper], HIDEICON);\n          addClass([this.inputEle], CHIP_INPUT);\n        }\n\n        addClass([this.inputWrapper], SHOW_CHIP);\n\n        if (this.popupObj) {\n          this.popupObj.refreshPosition();\n        }\n      }\n\n      if (!this.wrapText && this.mode !== 'Custom') {\n        if (this.inputWrapper.contains(this.overFlowWrapper)) {\n          addClass([this.overFlowWrapper], HIDEICON);\n        }\n\n        if (this.mode === 'Delimiter') {\n          removeClass([this.inputWrapper], SHOW_CHIP);\n          removeClass([this.inputEle], CHIP_INPUT);\n        } else {\n          addClass([this.inputWrapper], SHOW_CHIP);\n        }\n\n        removeClass([this.inputWrapper], SHOW_TEXT);\n        this.ensurePlaceHolder();\n      }\n    }\n\n    var args = {\n      isInteracted: e ? true : false,\n      event: e\n    };\n    this.trigger('focus', args);\n  };\n\n  DropDownTree.prototype.treeAction = function (e) {\n    var _this = this;\n\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'escape':\n          case 'altUp':\n            _this.inputWrapper.focus();\n\n            e.preventDefault();\n\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            break;\n\n          case 'tab':\n          case 'shiftTab':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            break;\n\n          case 'enter':\n          case 'ctrlEnter':\n          case 'shiftEnter':\n          case 'csEnter':\n            if (!_this.showCheckBox) {\n              _this.isValueChange = true;\n              _this.keyEventArgs = e;\n            }\n\n            break;\n\n          case 'space':\n            _this.isValueChange = true;\n            _this.keyEventArgs = e;\n            break;\n\n          case 'ctrlA':\n            if (_this.allowMultiSelection) {\n              _this.selectAll(true);\n            }\n\n            break;\n\n          case 'moveRight':\n          case 'moveLeft':\n          case 'shiftDown':\n          case 'moveDown':\n          case 'ctrlDown':\n          case 'csDown':\n          case 'shiftUp':\n          case 'moveUp':\n          case 'ctrlUp':\n          case 'csUp':\n          case 'home':\n          case 'shiftHome':\n          case 'ctrlHome':\n          case 'csHome':\n          case 'end':\n          case 'shiftEnd':\n          case 'ctrlEnd':\n          case 'csEnd':\n        }\n      } else {\n        e.stopImmediatePropagation();\n      }\n    });\n  };\n\n  DropDownTree.prototype.keyActionHandler = function (e) {\n    var _this = this;\n\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'escape':\n          case 'altUp':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            break;\n\n          case 'shiftTab':\n          case 'tab':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            if (_this.inputFocus) {\n              _this.onFocusOut();\n            }\n\n            break;\n\n          case 'altDown':\n            if (!_this.isPopupOpen) {\n              _this.showPopup();\n\n              e.preventDefault();\n            }\n\n            break;\n\n          case 'moveDown':\n            if (_this.showSelectAll && _this.showCheckBox) {\n              _this.checkAllParent.focus();\n            }\n\n            break;\n        }\n      }\n    });\n  };\n\n  DropDownTree.prototype.checkAllAction = function (e) {\n    var _this = this;\n\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'space':\n            _this.clickHandler(e);\n\n            break;\n\n          case 'moveDown':\n            _this.treeObj.element.focus();\n\n        }\n      }\n    });\n  };\n\n  DropDownTree.prototype.windowResize = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        width: this.setWidth()\n      });\n      this.popupObj.refreshPosition();\n    }\n  };\n\n  DropDownTree.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputWrapper, 'form');\n\n    if (formElement && e.target === formElement) {\n      this.isDynamicChange = true;\n      this.setProperties({\n        value: null\n      }, true);\n      this.resetValue(true);\n      this.isDynamicChange = false;\n    }\n  };\n\n  DropDownTree.prototype.getAriaAttributes = function () {\n    var disable = this.enabled ? 'false' : 'true';\n    return {\n      'aria-disabled': disable,\n      'aria-owns': this.element.id + '_options',\n      'role': 'listbox',\n      'aria-haspopup': 'true',\n      'aria-expanded': 'false',\n      'aria-activedescendant': 'null',\n      'aria-labelledby': this.hiddenElement.id\n    };\n  };\n\n  DropDownTree.prototype.updateOverFlowView = function () {\n    this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n    removeClass([this.overFlowWrapper], HIDEICON);\n\n    if (this.value && this.value.length) {\n      var data = '';\n      var overAllContainer = void 0;\n      var temp = void 0;\n      var tempData = void 0;\n      var tempIndex = 1;\n      var wrapperleng = void 0;\n      var remaining = void 0;\n      var downIconWidth = 0;\n      this.overFlowWrapper.innerHTML = ''; // eslint-disable-next-line\n\n      var l10nLocale = {\n        overflowCountTemplate: '+${count} more..',\n        totalCountTemplate: '${count} selected'\n      };\n      this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n      var remainContent = this.l10n.getConstant('overflowCountTemplate');\n      var totalContent = this.l10n.getConstant('totalCountTemplate');\n      var remainElement = this.createElement('span', {\n        className: REMAIN_WRAPPER\n      });\n      this.overFlowWrapper.appendChild(remainElement);\n      remainElement.innerText = remainContent.replace('${count}', this.value.length.toString());\n      var remainSize = remainElement.offsetWidth;\n      remove(remainElement);\n\n      if (this.showDropDownIcon) {\n        downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n      }\n\n      if (!isNullOrUndefined(this.value)) {\n        if (this.mode !== 'Box') {\n          for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n            data += index === 0 ? '' : this.delimiterChar + ' ';\n            temp = this.getOverflowVal(index);\n            data += temp;\n            temp = this.overFlowWrapper.innerHTML;\n            this.overFlowWrapper.innerHTML = data;\n            wrapperleng = this.overFlowWrapper.offsetWidth;\n            overAllContainer = this.inputWrapper.offsetWidth;\n\n            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n              if (tempData !== undefined && tempData !== '') {\n                temp = tempData;\n                index = tempIndex + 1;\n              }\n\n              this.overFlowWrapper.innerHTML = temp;\n              remaining = this.value.length - index;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n\n              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                var textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                textArr.pop();\n                this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                remaining++;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n              }\n\n              break;\n            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n              tempData = data;\n              tempIndex = index;\n            } else if (index === 0) {\n              tempData = '';\n              tempIndex = -1;\n            }\n          }\n        } else {\n          addClass([this.chipWrapper], HIDEICON);\n          var ele = this.chipWrapper.cloneNode(true);\n          var chips = selectAll('.' + CHIP, ele);\n\n          for (var i = 0; i < chips.length; i++) {\n            temp = this.overFlowWrapper.innerHTML;\n            this.overFlowWrapper.appendChild(chips[i]);\n            data = this.overFlowWrapper.innerHTML;\n            wrapperleng = this.overFlowWrapper.offsetWidth;\n            overAllContainer = this.inputWrapper.offsetWidth;\n\n            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n              if (tempData !== undefined && tempData !== '') {\n                temp = tempData;\n                i = tempIndex + 1;\n              }\n\n              this.overFlowWrapper.innerHTML = temp;\n              remaining = this.value.length - i;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n\n              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                remaining++;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n              }\n\n              break;\n            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n              tempData = data;\n              tempIndex = i;\n            } else if (i === 0) {\n              tempData = '';\n              tempIndex = -1;\n            }\n          }\n        }\n      }\n\n      if (remaining > 0) {\n        this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, remainContent, totalContent));\n      }\n\n      if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n        addClass([remainElement], REMAIN_COUNT);\n      }\n    } else {\n      this.overFlowWrapper.innerHTML = '';\n      addClass([this.overFlowWrapper], HIDEICON);\n    }\n\n    this.updateDelimMode();\n  };\n\n  DropDownTree.prototype.updateRemainTemplate = function (remainElement, remaining, remainContent, totalContent) {\n    if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 && this.overFlowWrapper.firstChild.nodeValue === '') {\n      this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n    }\n\n    remainElement.innerHTML = '';\n    remainElement.innerText = this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box') ? remainContent.replace('${count}', remaining.toString()) : totalContent.replace('${count}', remaining.toString());\n\n    if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n      removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n    } else {\n      addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n      removeClass([this.overFlowWrapper], REMAIN_COUNT);\n    }\n\n    return remainElement;\n  };\n\n  DropDownTree.prototype.getOverflowVal = function (index) {\n    // eslint-disable-next-line\n    var selectedData = this.getSelectedData(this.value[index]);\n    return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n  };\n\n  DropDownTree.prototype.updateDelimMode = function () {\n    if (this.mode !== 'Box') {\n      if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n        addClass([this.overFlowWrapper], REMAIN_COUNT);\n        addClass([this.overFlowWrapper], SHOW_TEXT);\n      } else {\n        this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n        removeClass([this.overFlowWrapper], REMAIN_COUNT);\n      }\n    } else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n      this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n    }\n  };\n\n  DropDownTree.prototype.createHiddenElement = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'class': HIDDENELEMENT,\n          'tabindex': '-1',\n          'multiple': ''\n        }\n      });\n    } else {\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'tabindex': '-1',\n          'class': HIDDENELEMENT\n        }\n      });\n    }\n\n    prepend([this.hiddenElement], this.inputWrapper);\n    this.validationAttribute();\n  };\n\n  DropDownTree.prototype.createClearIcon = function () {\n    this.overAllClear = this.createElement('span', {\n      className: CLOSEICON_CLASS\n    });\n    addClass([this.overAllClear], HIDEICON);\n    removeClass([this.inputWrapper], SHOW_CLEAR);\n\n    if (this.showClearButton) {\n      this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n    }\n  };\n\n  DropDownTree.prototype.validationAttribute = function () {\n    var name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n    this.hiddenElement.setAttribute('name', name);\n    this.inputEle.removeAttribute('name');\n    var attributes$$1 = ['required', 'aria-required', 'form'];\n\n    for (var i = 0; i < attributes$$1.length; i++) {\n      var attr = this.inputEle.getAttribute(attributes$$1[i]);\n\n      if (attr) {\n        this.hiddenElement.setAttribute(attributes$$1[i], attr);\n        this.inputEle.removeAttribute(attributes$$1[i]);\n      }\n    }\n  };\n\n  DropDownTree.prototype.createChip = function () {\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.chipWrapper = this.createElement('span', {\n        className: CHIP_WRAPPER\n      });\n      this.chipCollection = this.createElement('span', {\n        className: CHIP_COLLECTION\n      });\n      this.chipWrapper.appendChild(this.chipCollection);\n      this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n      addClass([this.inputWrapper], SHOW_CHIP);\n      var isValid = this.getValidMode();\n\n      if (isValid && this.value !== null && this.value && this.value.length !== 0) {\n        addClass([this.inputEle], CHIP_INPUT);\n      } else if (this.value === null || this.value && this.value.length === 0) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n    }\n  };\n\n  DropDownTree.prototype.getValidMode = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      return this.mode === 'Box' ? true : this.mode === 'Default' && this.inputFocus ? true : false;\n    } else {\n      return false;\n    }\n  };\n\n  DropDownTree.prototype.createSelectAllWrapper = function () {\n    this.checkAllParent = this.createElement('div', {\n      className: CHECKALLPARENT,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    this.selectAllSpan = this.createElement('span', {\n      className: ALLTEXT\n    });\n    this.selectAllSpan.textContent = '';\n    var ele = closest(this.element, '.' + BIGGER);\n    var touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n    this.checkBoxElement = createCheckBox(this.createElement, true, {\n      cssClass: touchClass\n    });\n    this.checkBoxElement.setAttribute('role', 'checkbox');\n    this.checkAllParent.appendChild(this.checkBoxElement);\n    this.checkAllParent.appendChild(this.selectAllSpan);\n    this.setLocale();\n    EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n    this.wireCheckAllWrapperEvents();\n  };\n\n  DropDownTree.prototype.clickHandler = function (e) {\n    var target;\n\n    if (e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT)) {\n      target = e.currentTarget.firstElementChild.lastElementChild;\n    } else {\n      target = e.target;\n    }\n\n    this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      this.isClicked = true;\n      var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n      this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n      this.isClicked = false;\n    }\n\n    e.preventDefault();\n  };\n\n  DropDownTree.prototype.changeState = function (wrapper, state, e) {\n    var ariaState;\n    var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\n    if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.add(CHECK);\n      ariaState = 'true';\n\n      if (!this.isReverseUpdate) {\n        this.treeObj.checkAll();\n\n        if (!this.changeOnBlur) {\n          this.triggerChangeEvent(e);\n        }\n      }\n\n      this.setLocale(true);\n    } else if (state === 'uncheck' && frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.remove(CHECK);\n      ariaState = 'false';\n\n      if (!this.isReverseUpdate) {\n        this.treeObj.uncheckAll();\n\n        if (!this.changeOnBlur) {\n          this.triggerChangeEvent(e);\n        }\n      }\n\n      this.setLocale(false);\n    }\n\n    this.setMultiSelect();\n    this.ensurePlaceHolder();\n    ariaState = state === 'check' ? 'true' : 'false';\n\n    if (!isNullOrUndefined(ariaState)) {\n      wrapper.setAttribute('aria-checked', ariaState);\n    }\n  };\n\n  DropDownTree.prototype.setLocale = function (unSelect) {\n    if (!this.selectAllSpan) {\n      return;\n    }\n\n    if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n      var template = unSelect ? this.unSelectAllText : this.selectAllText;\n      this.selectAllSpan.textContent = ''; // eslint-disable-next-line\n\n      var compiledString = compile(template);\n      var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n\n      for (var _i = 0, _a = compiledString({}, this, templateName, null, !this.isStringTemplate); _i < _a.length; _i++) {\n        var item = _a[_i];\n        this.selectAllSpan.textContent = item.textContent;\n      }\n    } else {\n      this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n    }\n  };\n\n  DropDownTree.prototype.setAttributes = function () {\n    this.inputEle.setAttribute('tabindex', '-1');\n    var id = this.element.getAttribute('id');\n    this.hiddenElement.id = id + '_hidden';\n    this.inputWrapper.setAttribute('tabindex', '0');\n    attributes(this.inputWrapper, this.getAriaAttributes());\n  };\n\n  DropDownTree.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        if (htmlAttr === 'class') {\n          this.inputWrapper.classList.add(this.htmlAttributes[htmlAttr]);\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n          this.setProperties({\n            enabled: false\n          }, true);\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n          this.setProperties({\n            readonly: true\n          }, true);\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.setAttribute('style', this.htmlAttributes[htmlAttr]);\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder', 'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n\n          if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            if (htmlAttr === 'placeholder') {\n              Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputEle);\n            } else {\n              this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n            }\n          } else {\n            this.inputWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          }\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateDataAttribute = function () {\n    var value = this.htmlAttributes;\n    var invalidAttr = ['class', 'style', 'id', 'type'];\n    var attr = {};\n\n    for (var a = 0; a < this.element.attributes.length; a++) {\n      if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.element.attributes[a].name === 'readonly')) {\n        attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n      }\n    }\n\n    extend(attr, value, attr);\n    this.setProperties({\n      htmlAttributes: attr\n    }, true);\n  };\n\n  DropDownTree.prototype.showOverAllClear = function () {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    if (this.overAllClear) {\n      var isValue = this.value ? this.value.length ? true : false : false;\n\n      if (isValue && this.showClearButton) {\n        removeClass([this.overAllClear], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CLEAR);\n      } else {\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n      }\n    }\n  };\n\n  DropDownTree.prototype.setTreeValue = function () {\n    if (this.value !== null && this.value.length !== 0) {\n      // eslint-disable-next-line\n      var data = void 0;\n\n      if (this.showCheckBox || this.allowMultiSelection) {\n        for (var i = 0; i < this.value.length; i++) {\n          data = this.treeObj.getTreeData(this.value[i])[0];\n\n          if (isNullOrUndefined(data)) {\n            this.value.splice(this.value.indexOf(this.value[i]), 1);\n          }\n        }\n\n        if (this.value.length !== 0) {\n          this.setValidValue();\n        }\n      } else {\n        data = this.treeObj.getTreeData(this.value[0])[0];\n\n        if (!isNullOrUndefined(data)) {\n          this.setProperties({\n            text: data[this.fields.text]\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            value: this.currentValue\n          }, true);\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.setTreeText = function () {\n    if (this.value !== null && !this.isInitialized) {\n      return;\n    }\n\n    if (this.text !== null) {\n      // eslint-disable-next-line\n      var data = void 0;\n      var valArr = [];\n\n      if (this.showCheckBox || this.allowMultiSelection) {\n        var textArr = this.text.split(this.delimiterChar);\n\n        for (var i = 0; i < textArr.length; i++) {\n          data = this.getItems(textArr[i]);\n\n          if (!isNullOrUndefined(data)) {\n            valArr.push(data[this.fields.value].toString());\n          }\n        }\n\n        if (valArr.length !== 0) {\n          this.oldValue = this.value;\n          this.setProperties({\n            value: valArr\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            text: this.currentText\n          }, true);\n        }\n      } else {\n        data = this.getItems(this.text);\n\n        if (!isNullOrUndefined(data)) {\n          this.oldValue = this.value;\n          this.setProperties({\n            value: [data[this.fields.value].toString()]\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            text: this.currentText\n          }, true);\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.setSelectedValue = function () {\n    if (this.value != null) {\n      return;\n    }\n\n    if (!this.isInitialized) {\n      this.oldValue = this.value;\n\n      if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n        this.setProperties({\n          value: this.treeObj.selectedNodes\n        }, true);\n\n        if (this.allowMultiSelection) {\n          this.updateMode();\n        }\n      } else if (this.showCheckBox && this.treeObj.checkedNodes) {\n        if (this.treeObj.checkedNodes.length > 0) {\n          this.setProperties({\n            value: this.treeObj.checkedNodes\n          }, true);\n          setValue('selectedNodes', [], this.treeObj);\n          this.treeObj.dataBind();\n          this.updateMode();\n        }\n      }\n\n      this.updateSelectedValues();\n      this.currentText = this.text;\n      this.currentValue = this.value;\n    }\n  };\n\n  DropDownTree.prototype.setValidValue = function () {\n    var _this = this;\n\n    if (!this.showCheckBox && !this.allowMultiSelection) {\n      Input.setValue(this.text, this.inputEle, this.floatLabelType);\n      var id = this.value[0].toString();\n\n      if (this.treeObj.selectedNodes[0] !== id) {\n        setValue('selectedNodes', [id], this.treeObj);\n      }\n    } else {\n      if (this.showCheckBox) {\n        var difference = this.value.filter(function (e) {\n          return _this.treeObj.checkedNodes.indexOf(e) === -1;\n        });\n\n        if (difference.length > 0 || this.treeSettings.autoCheck) {\n          this.treeObj.checkedNodes = this.value.slice();\n          this.treeObj.dataBind();\n          this.setMultiSelect();\n        }\n      } else {\n        this.treeObj.selectedNodes = this.value.slice();\n        this.selectedText = [];\n        this.updateSelectedValues();\n      }\n\n      this.treeObj.dataBind();\n    }\n\n    this.currentText = this.text;\n    this.currentValue = this.value;\n\n    if (this.isInitialized) {\n      this.triggerChangeEvent();\n    }\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getItems = function (givenText) {\n    // eslint-disable-next-line\n    var data;\n\n    if (this.treeDataType === 1) {\n      for (var i = 0; i < this.treeItems.length; i++) {\n        // eslint-disable-next-line\n        var text = getValue(this.fields.text, this.treeItems[i]);\n\n        if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n          data = this.treeItems[i];\n          break;\n        }\n      }\n    } else {\n      data = this.getNestedItems(this.treeItems, this.fields, givenText);\n    }\n\n    return data;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getNestedItems = function (data, field, givenText) {\n    // eslint-disable-next-line\n    var newData;\n\n    for (var i = 0, objlen = data.length; i < objlen; i++) {\n      // eslint-disable-next-line\n      var dataId = getValue(this.fields.text, data[i]);\n\n      if (data[i] && dataId && dataId.toString() === givenText) {\n        return data[i];\n      } else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n        // eslint-disable-next-line\n        var childData = getValue(field.child, data[i]); // eslint-disable-next-line\n\n        newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n\n        if (newData !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n        var child = 'child'; // eslint-disable-next-line\n\n        newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n\n        if (newData !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return newData;\n  };\n\n  DropDownTree.prototype.getChildType = function (mapper) {\n    return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n  };\n  /* To render the treeview */\n\n\n  DropDownTree.prototype.renderTree = function () {\n    this.treeObj = new TreeView({\n      fields: this.getTreeFields(this.fields),\n      enableRtl: this.enableRtl,\n      nodeSelected: this.onNodeSelected.bind(this),\n      nodeChecked: this.onNodeChecked.bind(this),\n      nodeChecking: this.beforeCheck.bind(this),\n      actionFailure: this.onActionFailure.bind(this),\n      nodeClicked: this.onNodeClicked.bind(this),\n      dataBound: this.OnDataBound.bind(this),\n      allowMultiSelection: this.allowMultiSelection,\n      showCheckBox: this.showCheckBox,\n      autoCheck: this.treeSettings.autoCheck,\n      sortOrder: this.sortOrder,\n      expandOn: this.treeSettings.expandOn,\n      loadOnDemand: this.treeSettings.loadOnDemand,\n      nodeSelecting: this.onBeforeSelect.bind(this),\n      nodeTemplate: this.itemTemplate\n    });\n    this.treeObj.root = this.root ? this.root : this;\n    this.treeObj.appendTo('#' + this.tree.id);\n  };\n  /* To render the popup element */\n\n\n  DropDownTree.prototype.renderPopup = function () {\n    var _this = this;\n\n    if (this.isFilteredData) {\n      this.filterObj.value = '';\n      this.treeObj.fields = this.getTreeFields(this.fields);\n      this.isFilterRestore = true;\n      this.isFilteredData = false;\n      this.hideCheckAll(false);\n    }\n\n    var isCancelled = false;\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        addClass([_this.inputWrapper], [ICONANIMATION]);\n\n        if (_this.isFirstRender) {\n          _this.popupEle = _this.createElement('div', {\n            id: _this.element.id + '_popup',\n            className: POPUP_CLASS + ' ' + (_this.cssClass != null ? _this.cssClass : '')\n          });\n          document.body.appendChild(_this.popupEle);\n\n          _this.createPopup(_this.popupEle);\n        } else {\n          _this.popupEle = _this.popupObj.element;\n        }\n      } else {\n        isCancelled = true;\n      }\n\n      if (_this.isFirstRender && !isCancelled) {\n        prepend([_this.popupDiv], _this.popupEle);\n        removeClass([_this.popupDiv], DDTHIDEICON);\n\n        if (_this.allowFiltering) {\n          _this.renderFilter();\n        }\n\n        if (_this.showCheckBox && _this.showSelectAll && !_this.popupDiv.classList.contains(NODATA)) {\n          _this.createSelectAllWrapper();\n\n          _this.popupEle.insertBefore(_this.checkAllParent, _this.popupDiv);\n        }\n\n        if (_this.headerTemplate) {\n          _this.setHeaderTemplate();\n        }\n\n        if (_this.footerTemplate) {\n          _this.setFooterTemplate();\n        }\n\n        _this.isFirstRender = false;\n        /* eslint-disable */\n\n        if (_this.hasTemplate && _this.portals) {\n          _this.portals = _this.portals.concat(_this.treeObj.portals);\n          /* eslint-enable */\n\n          _this.renderReactTemplates();\n        }\n      }\n\n      if (!isCancelled) {\n        attributes(_this.inputWrapper, {\n          'aria-expanded': 'true'\n        });\n\n        _this.popupObj.show(null, _this.zIndex === 1000 ? _this.inputEle : null);\n\n        removeClass([_this.popupEle], DDTHIDEICON);\n\n        _this.updatePopupHeight();\n\n        _this.popupObj.refreshPosition();\n\n        if (!(_this.showCheckBox && _this.showSelectAll) && !_this.popupDiv.classList.contains(NODATA) && _this.treeItems.length > 0) {\n          _this.treeObj.element.focus();\n        }\n\n        if (_this.checkSelectAll && _this.checkBoxElement) {\n          var wrap = closest(_this.checkBoxElement, '.' + CHECKBOXWRAP);\n\n          _this.changeState(wrap, 'check');\n\n          _this.checkSelectAll = false;\n        }\n\n        if (_this.allowFiltering) {\n          removeClass([_this.inputWrapper], [INPUTFOCUS]);\n\n          _this.filterObj.element.focus();\n        }\n\n        var eventArgs = {\n          popup: _this.popupObj\n        };\n\n        _this.trigger('open', eventArgs);\n      }\n    });\n  };\n\n  DropDownTree.prototype.updatePopupHeight = function () {\n    if (this.isFirstRender) {\n      return;\n    }\n\n    var popupHeight = this.getHeight();\n    this.popupEle.style.maxHeight = popupHeight;\n\n    if (this.allowFiltering) {\n      var height = Math.round(this.filterContainer.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    if (this.headerTemplate) {\n      var height = Math.round(this.header.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    if (this.showCheckBox && this.showSelectAll) {\n      var height = Math.round(this.checkAllParent.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    if (this.footerTemplate) {\n      var height = Math.round(this.footer.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    var border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n    border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n    popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n    this.popupDiv.style.maxHeight = popupHeight;\n  };\n\n  DropDownTree.prototype.createPopup = function (element) {\n    var _this = this;\n\n    if (this.isFirstRender) {\n      this.popupObj = new Popup(element, {\n        width: this.setWidth(),\n        targetType: 'relative',\n        collision: {\n          X: 'flip',\n          Y: 'flip'\n        },\n        relateTo: this.inputWrapper,\n        zIndex: this.zIndex,\n        enableRtl: this.enableRtl,\n        position: {\n          X: 'left',\n          Y: 'bottom'\n        },\n        close: function () {\n          _this.isPopupOpen = false;\n        },\n        open: function () {\n          EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n          _this.isPopupOpen = true;\n        },\n        targetExitViewport: function () {\n          if (!Browser.isDevice) {\n            _this.hidePopup();\n          }\n        }\n      });\n    }\n  };\n  /* To calculate the width when change via set model */\n\n\n  DropDownTree.prototype.setElementWidth = function (inputWidth) {\n    var ddElement = this.inputWrapper;\n\n    if (!isNullOrUndefined(inputWidth)) {\n      if (typeof inputWidth === 'number') {\n        ddElement.style.width = formatUnit(inputWidth);\n      } else if (typeof inputWidth === 'string') {\n        ddElement.style.width = inputWidth.match(/px|%|em/) ? inputWidth : formatUnit(inputWidth);\n      }\n    }\n  };\n  /* To calculate the width of the popup */\n\n\n  DropDownTree.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n    } else if (typeof this.popupWidth === 'string') {\n      width = this.popupWidth.match(/px|em/) ? this.popupWidth : width;\n    }\n\n    return width;\n  };\n  /* To calculate the height of the popup */\n\n\n  DropDownTree.prototype.getHeight = function () {\n    var height = formatUnit(this.popupHeight);\n\n    if (height.indexOf('%') > -1) {\n      // Will set the height of the popup according to the view port height\n      height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n    } else if (typeof this.popupHeight === 'string') {\n      height = this.popupHeight.match(/px|em/) ? this.popupHeight : height;\n    }\n\n    return height;\n  };\n\n  DropDownTree.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    var isTree = closest(target, '.' + PARENTITEM);\n    var isFilter = closest(target, '.' + FILTERWRAP);\n    var isHeader = closest(target, '.' + HEADER);\n    var isFooter = closest(target, '.' + FOOTER);\n    var isScroller = target.classList.contains(DROPDOWN) ? true : matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview');\n\n    if (this.isPopupOpen && (this.inputWrapper.contains(target) || isTree || isFilter || isScroller || isHeader || isFooter) || (this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) || this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT) || target.classList.contains(CHECKBOXFRAME)))) {\n      this.isDocumentClick = false;\n      e.preventDefault();\n    } else if (!this.inputWrapper.contains(target) && this.inputFocus) {\n      this.focusOut(e);\n    }\n  };\n\n  DropDownTree.prototype.onActionFailure = function (e) {\n    this.trigger('actionFailure', e);\n    this.l10nUpdate(true);\n    addClass([this.popupDiv], NODATA);\n  };\n\n  DropDownTree.prototype.OnDataBound = function (args) {\n    this.treeItems = args.data;\n\n    if (this.treeItems.length <= 0) {\n      this.l10nUpdate();\n      addClass([this.popupDiv], NODATA);\n      this.hideCheckAll(true);\n    } else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n      removeClass([this.popupDiv], NODATA);\n      this.hideCheckAll(false);\n    }\n\n    this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n\n    if (this.isFirstRender && this.isRemoteData) {\n      this.setTreeValue();\n      this.setTreeText();\n      this.updateHiddenValue();\n      this.setSelectedValue();\n\n      if (!this.wrapText) {\n        this.updateView();\n      }\n\n      this.treeObj.element.focus();\n    }\n\n    var eventArgs = {\n      data: args.data\n    };\n    this.trigger('dataBound', eventArgs);\n\n    if (this.isFilteredData) {\n      this.treeObj.expandAll();\n    }\n\n    if (this.isFilterRestore) {\n      this.restoreFilterSelection();\n      this.isFilterRestore = false;\n    }\n  };\n\n  DropDownTree.prototype.restoreFilterSelection = function () {\n    if (this.showCheckBox) {\n      this.treeObj.checkedNodes = this.value ? this.value : [];\n    } else {\n      this.treeObj.selectedNodes = this.value ? this.value : [];\n    }\n  };\n  /* To set cssclass for the dropdowntree */\n\n\n  DropDownTree.prototype.setCssClass = function (newClass, oldClass) {\n    var elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(newClass) && newClass !== '') {\n      addClass(elements, newClass.split(' '));\n    }\n  };\n\n  DropDownTree.prototype.setEnableRTL = function (state) {\n    if (state) {\n      this.inputWrapper.classList.add(RTL);\n    } else {\n      this.inputWrapper.classList.remove(RTL);\n    }\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = state;\n      this.popupObj.dataBind();\n    }\n\n    if (this.treeObj) {\n      this.treeObj.enableRtl = state;\n      this.treeObj.dataBind();\n    }\n  };\n  /* To set enable property */\n\n\n  DropDownTree.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputEle);\n\n    if (this.enabled) {\n      removeClass([this.inputWrapper], DISABLED);\n      this.inputEle.setAttribute('aria-disabled', 'false');\n      this.inputWrapper.setAttribute('aria-disabled', 'false');\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      addClass([this.inputWrapper], DISABLED);\n\n      if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n        removeClass([this.inputWrapper], [INPUTFOCUS]);\n      }\n\n      this.inputEle.setAttribute('aria-disabled', 'true');\n      this.inputWrapper.setAttribute('aria-disabled', 'true');\n    }\n  };\n\n  DropDownTree.prototype.cloneFields = function (fields) {\n    var clonedField = {\n      dataSource: fields.dataSource,\n      value: fields.value,\n      text: fields.text,\n      parentValue: fields.parentValue,\n      child: this.cloneChildField(fields.child),\n      hasChildren: fields.hasChildren,\n      expanded: fields.expanded,\n      iconCss: fields.iconCss,\n      imageUrl: fields.imageUrl,\n      htmlAttributes: fields.htmlAttributes,\n      query: fields.query,\n      selected: fields.selected,\n      tableName: fields.tableName,\n      tooltip: fields.tooltip\n    };\n    return clonedField;\n  };\n\n  DropDownTree.prototype.cloneChildField = function (fields) {\n    if (typeof fields === 'string') {\n      return fields;\n    } else {\n      var clonedField = {\n        dataSource: fields.dataSource,\n        value: fields.value,\n        text: fields.text,\n        parentValue: fields.parentValue,\n        child: fields.child ? this.cloneChildField(fields.child) : null,\n        hasChildren: fields.hasChildren,\n        expanded: fields.expanded,\n        iconCss: fields.iconCss,\n        imageUrl: fields.imageUrl,\n        htmlAttributes: fields.htmlAttributes,\n        query: fields.query,\n        selected: fields.selected,\n        tableName: fields.tableName,\n        tooltip: fields.tooltip\n      };\n      return clonedField;\n    }\n  };\n\n  DropDownTree.prototype.getTreeFields = function (fields) {\n    var treeFields = {\n      dataSource: fields.dataSource,\n      id: fields.value,\n      text: fields.text,\n      parentID: fields.parentValue,\n      child: this.getTreeChildren(fields.child),\n      hasChildren: fields.hasChildren,\n      expanded: fields.expanded,\n      iconCss: fields.iconCss,\n      imageUrl: fields.imageUrl,\n      isChecked: fields.selected,\n      htmlAttributes: fields.htmlAttributes,\n      query: fields.query,\n      selected: fields.selected,\n      tableName: fields.tableName,\n      tooltip: fields.tooltip\n    };\n    return treeFields;\n  };\n\n  DropDownTree.prototype.getTreeChildren = function (mapper) {\n    if (typeof mapper === 'string') {\n      return mapper;\n    } else if (!isNullOrUndefined(mapper)) {\n      mapper = this.getActualProperties(mapper);\n      var childFields = mapper;\n\n      if (mapper.value) {\n        childFields.id = mapper.value;\n      }\n\n      if (mapper.parentValue) {\n        childFields.parentID = mapper.parentValue;\n      }\n\n      if (mapper.child) {\n        childFields.child = this.getTreeChildren(mapper.child);\n      }\n\n      if (mapper.selected && this.showCheckBox) {\n        childFields.isChecked = mapper.selected;\n      }\n\n      return childFields;\n    }\n\n    return null;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getTreeDataType = function (ds, field) {\n    if (this.fields.dataSource instanceof DataManager) {\n      for (var i = 0; i < ds.length; i++) {\n        if (typeof field.child === 'string' && isNullOrUndefined(getValue(field.child, ds[i]))) {\n          return 1;\n        }\n      }\n\n      return 2;\n    }\n\n    if (isNullOrUndefined(this.fields.dataSource)) this.fields.dataSource = [];\n\n    for (var i = 0, len = this.fields.dataSource.length; i < len; i++) {\n      if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, this.fields.dataSource[i]))) {\n        return 2;\n      }\n\n      if (!isNullOrUndefined(getValue(field.parentValue, this.fields.dataSource[i])) || !isNullOrUndefined(getValue(field.hasChildren, this.fields.dataSource[i]))) {\n        return 1;\n      }\n    }\n\n    return 1;\n  };\n  /* Triggers when the tree fields is changed dynamically */\n\n\n  DropDownTree.prototype.setFields = function () {\n    this.resetValue();\n\n    if (this.hasTemplate) {\n      this.updateTemplate();\n    }\n\n    this.treeObj.fields = this.getTreeFields(this.fields);\n    this.treeObj.dataBind();\n  };\n\n  DropDownTree.prototype.getEventArgs = function (args) {\n    // eslint-disable-next-line\n    var checkData = args.data; // eslint-disable-next-line\n\n    var selectData = args.nodeData;\n    var state;\n\n    if (this.showCheckBox) {\n      if (args.action === 'check') {\n        state = 'select';\n      } else if (args.action === 'uncheck') {\n        state = 'un-select';\n      }\n    }\n\n    var eventArgs = {\n      action: this.showCheckBox ? state : args.action,\n      isInteracted: this.isClicked ? true : args.isInteracted,\n      item: args.node,\n      itemData: this.showCheckBox ? checkData[0] : selectData\n    };\n    return eventArgs;\n  };\n\n  DropDownTree.prototype.onBeforeSelect = function (args) {\n    if (args.isInteracted) {\n      this.oldValue = this.value ? this.value.slice() : this.value;\n\n      if (this.value === null) {\n        this.setProperties({\n          value: []\n        }, true);\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateHiddenValue = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      return;\n    }\n\n    if (this.value && this.value.length) {\n      this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n    } else {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /* Triggers when the tree node is selected */\n\n\n  DropDownTree.prototype.onNodeSelected = function (args) {\n    if (this.showCheckBox) {\n      return;\n    }\n\n    var selectedText;\n\n    if (args.isInteracted) {\n      var id = getValue('id', args.nodeData).toString();\n\n      if (!this.allowMultiSelection) {\n        this.hiddenElement.innerHTML = '';\n        this.setProperties({\n          value: [id]\n        }, true);\n\n        if (this.itemTemplate) {\n          selectedText = getValue('text', this.treeObj.getNode(id));\n        } else {\n          selectedText = getValue('text', args.nodeData).toString();\n        }\n\n        Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n        this.setProperties({\n          text: selectedText\n        }, true);\n        this.currentText = this.text;\n        this.currentValue = this.value;\n        attributes(this.inputWrapper, {\n          'aria-describedby': this.element.id\n        });\n        attributes(this.inputWrapper, {\n          'aria-activedescendant': id.toString()\n        });\n        this.updateHiddenValue();\n        this.showOverAllClear();\n        this.hidePopup();\n        this.isNodeSelected = true;\n      } else if (this.allowMultiSelection) {\n        this.setMultiSelect();\n      }\n    }\n\n    var eventArgs = this.getEventArgs(args);\n    this.trigger('select', eventArgs);\n\n    if (this.isValueChange && !this.changeOnBlur) {\n      this.triggerChangeEvent(this.keyEventArgs);\n      this.isValueChange = false;\n    }\n  };\n\n  DropDownTree.prototype.onNodeClicked = function (args) {\n    if (!this.changeOnBlur && this.isNodeSelected) {\n      this.triggerChangeEvent(args.event);\n      this.isNodeSelected = false;\n    }\n\n    var target = args.event.target;\n\n    if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n      this.isClicked = true; // eslint-disable-next-line\n\n      var getNodeDetails = this.treeObj.getNode(args.node);\n\n      if (getNodeDetails.isChecked === 'true') {\n        this.treeObj.uncheckAll([args.node]);\n      } else {\n        this.treeObj.checkAll([args.node]);\n      }\n\n      this.isClicked = false;\n      this.setMultiSelect();\n      this.ensurePlaceHolder();\n    }\n\n    if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n      this.triggerChangeEvent(args.event);\n    }\n  };\n\n  DropDownTree.prototype.onNodeChecked = function (args) {\n    var eventArgs = this.getEventArgs(args);\n    this.trigger('select', eventArgs);\n\n    if (this.isFilteredData && args.action === 'uncheck') {\n      var id = getValue('id', args.data[0]).toString();\n      this.removeSelectedData(id, true);\n    }\n\n    if (!this.isChipDelete && args.isInteracted) {\n      this.setMultiSelect();\n      this.ensurePlaceHolder();\n    }\n\n    if (this.showSelectAll && this.checkBoxElement) {\n      var nodes = this.treeObj.element.querySelectorAll('li');\n      var checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n      var wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n\n      if (wrap && args.action === 'uncheck') {\n        this.isReverseUpdate = true;\n        this.changeState(wrap, 'uncheck');\n        this.isReverseUpdate = false;\n      } else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length) {\n        this.isReverseUpdate = true;\n        this.changeState(wrap, 'check');\n        this.isReverseUpdate = false;\n      }\n    }\n  };\n\n  DropDownTree.prototype.beforeCheck = function (args) {\n    if (args.isInteracted) {\n      this.oldValue = this.value ? this.value.slice() : this.value;\n    }\n  };\n\n  DropDownTree.prototype.updateClearButton = function (state) {\n    if (state) {\n      if (!this.inputWrapper.contains(this.overAllClear)) {\n        this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n      } else {\n        removeClass([this.overAllClear], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CLEAR);\n      }\n    } else {\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n\n    if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n      var chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n\n      for (var i = 0; i < chipClose.length; i++) {\n        if (!state) {\n          addClass([chipClose[i]], HIDEICON);\n        } else {\n          removeClass([chipClose[i]], HIDEICON);\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateDropDownIconState = function (state) {\n    var spinIcon = select('.' + DDTICON, this.inputWrapper);\n\n    if (state) {\n      if (!spinIcon) {\n        Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n      } else {\n        removeClass([spinIcon], HIDEICON);\n      }\n\n      addClass([this.inputWrapper], SHOW_DD_ICON);\n    } else {\n      addClass([spinIcon], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_DD_ICON);\n    }\n  };\n\n  DropDownTree.prototype.updateMode = function () {\n    if (this.mode === 'Custom') {\n      return;\n    }\n\n    if (this.mode !== 'Delimiter') {\n      if (!this.inputWrapper.contains(this.chipWrapper)) {\n        this.createChip();\n      }\n\n      var isValid = this.getValidMode();\n\n      if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n        removeClass([this.chipWrapper], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CHIP);\n      } else if (!isValid) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n\n      var isValue = this.value !== null ? this.value.length !== 0 ? true : false : false;\n\n      if (isValid && isValue) {\n        addClass([this.inputEle], CHIP_INPUT);\n      } else {\n        removeClass([this.inputEle], CHIP_INPUT);\n      }\n    } else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n      removeClass([this.inputEle], CHIP_INPUT);\n\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n    }\n  };\n\n  DropDownTree.prototype.ensurePlaceHolder = function () {\n    if (this.value && this.value.length === 0) {\n      removeClass([this.inputEle], CHIP_INPUT);\n\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n    }\n  };\n\n  DropDownTree.prototype.ensureClearIconPosition = function (floatLabelType) {\n    if (floatLabelType !== 'Never') {\n      this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n    }\n  };\n\n  DropDownTree.prototype.setMultiSelectValue = function (newValues) {\n    if (!this.isFilteredData) {\n      this.setProperties({\n        value: newValues\n      }, true);\n\n      if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n        this.treeObj.selectedNodes = this.value.slice();\n        this.treeObj.dataBind();\n      }\n    } else {\n      var selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n\n      for (var i = 0; i < newValues.length; i++) {\n        if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n          selectedValues.push(newValues[i]);\n        }\n      }\n\n      this.setProperties({\n        value: selectedValues\n      }, true);\n    }\n  };\n\n  DropDownTree.prototype.setMultiSelect = function () {\n    if (this.showCheckBox && !this.isDynamicChange) {\n      this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n    } else {\n      var ddtValue = this.allowMultiSelection ? this.showCheckBox ? this.treeObj.checkedNodes : this.treeObj.selectedNodes : this.value ? this.showCheckBox ? this.value : [this.value[0]] : null;\n      this.setMultiSelectValue(ddtValue);\n\n      if (this.showCheckBox && this.value !== null) {\n        this.treeObj.checkedNodes = this.value;\n        this.treeObj.dataBind();\n      }\n    }\n\n    this.selectedText = [];\n    var checkSelection = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n\n    if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n      removeClass([this.inputEle], CHIP_INPUT);\n      detach(this.chipWrapper);\n    }\n\n    var isValid = this.getValidMode();\n\n    if (isValid && this.value !== null) {\n      addClass([this.inputEle], CHIP_INPUT);\n\n      if (this.chipWrapper) {\n        removeClass([this.chipWrapper], HIDEICON);\n      }\n    }\n\n    var isValue = this.value ? this.value.length ? true : false : false;\n\n    if (this.chipWrapper && this.mode === 'Box' && !isValue) {\n      addClass([this.chipWrapper], HIDEICON);\n      removeClass([this.inputEle], CHIP_INPUT);\n    }\n\n    this.updateSelectedValues();\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getSelectedData = function (value) {\n    // eslint-disable-next-line\n    var data = null;\n\n    if (this.isFilteredData) {\n      for (var i = 0; i < this.selectedData.length; i++) {\n        if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n          data = this.selectedData[i];\n          break;\n        }\n      }\n    }\n\n    if (isNullOrUndefined(data)) {\n      if (this.treeSettings.loadOnDemand) {\n        data = this.getNodeData(value);\n      } else {\n        data = this.treeObj.getNode(value);\n      }\n\n      if (!isNullOrUndefined(data)) {\n        this.selectedData.push(data);\n      }\n    }\n\n    return data;\n  };\n\n  DropDownTree.prototype.getNodeData = function (id) {\n    var childItems;\n\n    if (isNullOrUndefined(id)) {\n      return childItems;\n    } else if (this.treeDataType === 1) {\n      for (var i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n        var dataId = getValue(this.fields.value, this.treeItems[i]);\n\n        if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n          return this.treeItems[i];\n        }\n      }\n    } else {\n      return this.getChildNodeData(this.treeItems, this.fields, id);\n    }\n\n    return childItems;\n  };\n\n  DropDownTree.prototype.getChildNodeData = function (obj, mapper, id) {\n    var newChildItems;\n\n    if (isNullOrUndefined(obj)) {\n      return newChildItems;\n    }\n\n    for (var i = 0, objlen = obj.length; i < objlen; i++) {\n      var dataValue = getValue(mapper.value, obj[i]);\n\n      if (obj[i] && dataValue && dataValue.toString() === id) {\n        return obj[i];\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        var childNodeData = getValue(mapper.child, obj[i]);\n        newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n\n        if (newChildItems !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        var child = 'child';\n        newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n\n        if (newChildItems !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return newChildItems;\n  };\n\n  DropDownTree.prototype.getChildMapperFields = function (mapper) {\n    return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n  };\n\n  DropDownTree.prototype.removeSelectedData = function (value, muteOnChange) {\n    var selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n    selectedValues.splice(selectedValues.indexOf(value), 1);\n    this.setProperties({\n      value: selectedValues\n    }, muteOnChange);\n\n    for (var i = 0; i < this.selectedData.length; i++) {\n      if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n        this.selectedData.splice(i, 1);\n        break;\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateSelectedValues = function () {\n    this.dataValue = '';\n    var temp;\n    var text;\n    var textValue = ''; // eslint-disable-next-line\n\n    var selectedData;\n    this.hiddenElement.innerHTML = '';\n    var hiddenInputValue = '';\n\n    if ((!this.isChipDelete || this.treeSettings.autoCheck) && this.inputWrapper.contains(this.chipWrapper)) {\n      this.chipCollection.innerHTML = '';\n    }\n\n    if (!this.isFilteredData) {\n      this.selectedData = [];\n    }\n\n    if (!isNullOrUndefined(this.value)) {\n      for (var i = 0, len = this.value.length; i < len; i++) {\n        selectedData = this.getSelectedData(this.value[i]);\n        text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n        this.selectedText.push(text);\n        temp = this.selectedText[this.selectedText.length - 1];\n\n        if (this.selectedText.length > 1) {\n          this.dataValue += this.delimiterChar + ' ' + temp;\n          textValue += ',' + temp;\n        } else {\n          this.dataValue += temp;\n          textValue += temp;\n        }\n\n        if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) && (this.allowMultiSelection || this.showCheckBox)) {\n          this.setChipValues(temp, this.value[i]);\n        }\n\n        hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' + this.selectedText[this.selectedText.length - 1] + '</option>';\n      }\n\n      if (this.selectedText.length >= 1) {\n        this.setProperties({\n          text: textValue\n        }, true);\n      }\n\n      this.hiddenElement.innerHTML = hiddenInputValue;\n\n      if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n        this.setTagValues();\n      }\n    }\n\n    var isValid = this.getValidMode();\n\n    if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n    }\n\n    Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n\n    if (textValue === '') {\n      this.setProperties({\n        text: null\n      }, true);\n    } else {\n      this.setProperties({\n        text: textValue\n      }, true);\n    }\n\n    if (this.showClearButton && this.inputFocus) {\n      this.showOverAllClear();\n    }\n\n    if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n      this.popupObj.refreshPosition();\n    }\n\n    this.currentText = this.text;\n    this.currentValue = this.value;\n  };\n\n  DropDownTree.prototype.setChipValues = function (text, value) {\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.createChip();\n    }\n\n    var chip = this.createElement('span', {\n      className: CHIP,\n      attrs: {\n        'data-value': value\n      }\n    });\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT\n    });\n    var chipClose = this.createElement('span', {\n      className: CHIP_CLOSE + ' ' + ICONS\n    });\n    chipContent.innerHTML = text;\n    chip.appendChild(chipContent);\n    this.chipCollection.appendChild(chip);\n\n    if (this.showClearButton) {\n      chip.appendChild(chipClose);\n      EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n    }\n  };\n\n  DropDownTree.prototype.setTagValues = function () {\n    if (this.value === null || this.text == null) {\n      return;\n    }\n\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.createChip();\n    }\n\n    if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n      addClass([this.inputWrapper], SHOW_CHIP);\n    }\n\n    var chip = this.createElement('span', {\n      className: CHIP\n    });\n\n    if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n      addClass([this.inputEle], CHIP_INPUT);\n    }\n\n    if (this.chipWrapper.classList.contains(HIDEICON)) {\n      removeClass([this.chipWrapper], HIDEICON);\n    }\n\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT\n    });\n    var template = this.customTemplate;\n    var templateId = this.customTemplateId;\n    var templatestring = 'customTemplate';\n    var compiledString = this.templateComplier(template);\n    var tempArr = compiledString({\n      'value': this.value,\n      'text': this.text\n    }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, chipContent);\n    }\n\n    chip.appendChild(chipContent);\n    this.chipCollection.appendChild(chip);\n  };\n\n  DropDownTree.prototype.setSelectAllWrapper = function (state) {\n    if (this.isFirstRender) {\n      return;\n    }\n\n    if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n      this.createSelectAllWrapper();\n      this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n    } else if (this.popupEle.contains(this.checkAllParent)) {\n      detach(this.checkAllParent);\n      this.checkAllParent = null;\n    }\n  };\n\n  DropDownTree.prototype.setHeaderTemplate = function () {\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], HEADER);\n    } // eslint-disable-next-line\n\n\n    var compiledString = this.templateComplier(this.headerTemplate);\n    var tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, this.header);\n    }\n\n    this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.templateComplier = function (template) {\n    if (template) {\n      // eslint-disable-next-line\n      try {\n        if (document.querySelectorAll(template).length) {\n          return compile(document.querySelector(template).innerHTML.trim());\n        } else {\n          return compile(template);\n        }\n      } catch (e) {\n        return compile(template);\n      }\n    }\n\n    return compile(template);\n  };\n\n  DropDownTree.prototype.setFooterTemplate = function () {\n    if (this.footer) {\n      this.footer.innerHTML = '';\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], FOOTER);\n    } // eslint-disable-next-line\n\n\n    var compiledString = this.templateComplier(this.footerTemplate);\n    var tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, this.footer);\n    }\n\n    append([this.footer], this.popupEle);\n  };\n\n  DropDownTree.prototype.clearAll = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    this.resetValue();\n    this.showOverAllClear();\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.popupObj) {\n        this.popupObj.refreshPosition();\n      }\n\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(true);\n      }\n    }\n\n    if (e) {\n      this.isClearButtonClick = true;\n    }\n\n    if (!this.changeOnBlur) {\n      this.triggerChangeEvent(e);\n    }\n  };\n\n  DropDownTree.prototype.removeChip = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    var element = e.target.parentElement;\n    var value = element.getAttribute('data-value');\n\n    if (this.chipCollection) {\n      if (element) {\n        remove(element);\n      }\n    }\n\n    this.isChipDelete = true;\n    this.isClearButtonClick = true;\n    this.removeSelectedData(value, true);\n    this.selectedText = [];\n\n    if (this.allowMultiSelection) {\n      this.treeObj.selectedNodes = this.value.slice();\n      this.updateSelectedValues();\n    }\n\n    if (this.showCheckBox) {\n      this.treeObj.uncheckAll([value]);\n      this.clearCheckAll();\n      this.setMultiSelect();\n    }\n\n    this.triggerChangeEvent(e);\n    this.isChipDelete = false;\n    this.ensurePlaceHolder();\n  };\n\n  DropDownTree.prototype.resetValue = function (isDynamicChange) {\n    if (this.value == [] && this.text == null) {\n      return;\n    }\n\n    Input.setValue(null, this.inputEle, this.floatLabelType);\n\n    if (!isDynamicChange) {\n      this.oldValue = this.value;\n      this.setProperties({\n        value: []\n      }, true);\n    }\n\n    this.dataValue = null;\n    this.setProperties({\n      text: null\n    }, true);\n    this.selectedData = [];\n    setValue('selectedNodes', [], this.treeObj);\n    this.hiddenElement.innerHTML = '';\n\n    if (this.showCheckBox) {\n      this.treeObj.checkedNodes = [];\n      this.treeObj.dataBind();\n      this.setMultiSelect();\n      this.clearCheckAll();\n    }\n\n    if (this.oldValue === null && !isDynamicChange) {\n      this.removeValue = true;\n    } else if (isDynamicChange) {\n      this.triggerChangeEvent();\n    }\n\n    if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n      this.chipCollection.innerHTML = '';\n\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(true);\n      }\n\n      this.ensurePlaceHolder();\n    }\n  };\n\n  DropDownTree.prototype.clearCheckAll = function () {\n    if (this.showSelectAll && this.value && this.value.length === 0) {\n      this.setLocale(false);\n    }\n  };\n\n  DropDownTree.prototype.selectAllItems = function (state) {\n    if (this.showCheckBox) {\n      if (state) {\n        this.treeObj.checkAll();\n      } else {\n        this.treeObj.uncheckAll();\n      }\n\n      this.checkSelectAll = true;\n    } else if (this.allowMultiSelection) {\n      if (!state) {\n        this.treeObj.selectedNodes = [];\n      } else {\n        var li = selectAll('li', this.treeObj.element);\n        var id = void 0;\n        var arr = [];\n\n        for (var i = 0; i < li.length; i++) {\n          id = li[i].getAttribute('data-uid').toString();\n          arr.push(id);\n        }\n\n        this.treeObj.selectedNodes = arr;\n      }\n    }\n\n    this.updateMode();\n    this.setMultiSelect();\n\n    if (!this.wrapText) {\n      if (state) {\n        this.updateView();\n      } else {\n        this.updateOverflowWrapper(true);\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateTreeSettings = function (prop) {\n    var value = Object.keys(prop.treeSettings)[0];\n\n    if (value === 'autoCheck') {\n      this.ensureAutoCheck();\n      this.treeObj.autoCheck = this.treeSettings.autoCheck;\n    } else if (value === 'loadOnDemand') {\n      this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n    } else if (value === 'expandOn') {\n      this.treeObj.expandOn = this.treeSettings.expandOn;\n      this.treeObj.dataBind();\n      return;\n    }\n\n    this.treeObj.dataBind();\n    this.setMultiSelect();\n    this.updateValue(this.value);\n  };\n\n  DropDownTree.prototype.updateCheckBoxState = function (checkBox) {\n    if (this.hasTemplate) {\n      this.updateTemplate();\n    }\n\n    if (!this.wrapText) {\n      this.updateOverflowWrapper(false);\n    }\n\n    this.treeObj.showCheckBox = checkBox;\n    this.treeObj.dataBind();\n    this.isDynamicChange = true;\n    this.setSelectAllWrapper(this.showSelectAll);\n\n    if (this.showSelectAll) {\n      this.setLocale();\n    }\n\n    if (this.showCheckBox) {\n      this.updateMode();\n    }\n\n    this.setMultiSelect();\n    this.isDynamicChange = false;\n  };\n\n  DropDownTree.prototype.updateTemplate = function () {\n    if (this.popupObj) {\n      this.clearTemplate();\n      /* eslint-disable */\n\n      this.portals = [];\n      /* eslint-enable */\n\n      this.popupObj.destroy();\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n        this.isFirstRender = true;\n        this.renderPopup();\n      } else {\n        this.isFirstRender = true;\n      }\n    }\n  };\n\n  DropDownTree.prototype.l10nUpdate = function (actionFailure) {\n    if (this.noRecord) {\n      this.noRecord.innerHTML = '';\n    } else {\n      this.noRecord = this.createElement('div');\n      addClass([this.noRecord], NODATACONTAINER);\n      prepend([this.noRecord], this.popupDiv);\n    }\n\n    if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n      var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n      var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n      var templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate'; // eslint-disable-next-line\n\n      var compiledString = this.templateComplier(template);\n      var tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n\n      if (tempArr) {\n        tempArr = Array.prototype.slice.call(tempArr);\n        append(tempArr, this.noRecord);\n      }\n    } else {\n      // eslint-disable-next-line\n      var l10nLocale = {\n        noRecordsTemplate: 'No Records Found',\n        actionFailureTemplate: 'The Request Failed'\n      };\n      this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n      this.noRecord.innerHTML = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n    }\n  };\n\n  DropDownTree.prototype.updateRecordTemplate = function (action) {\n    if (this.treeItems && this.treeItems.length <= 0) {\n      this.l10nUpdate(action);\n\n      if (this.hasTemplate) {\n        this.updateTemplate();\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateOverflowWrapper = function (state) {\n    if (!state) {\n      if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n        this.overFlowWrapper = this.createElement('span', {\n          className: OVERFLOW_VIEW + ' ' + HIDEICON\n        });\n        this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n      }\n    } else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n      this.overFlowWrapper.innerHTML = '';\n    }\n  };\n\n  DropDownTree.prototype.updateMultiSelection = function (state) {\n    if (!this.wrapText) {\n      this.updateOverflowWrapper(false);\n    }\n\n    this.treeObj.allowMultiSelection = state;\n    this.treeObj.dataBind();\n    this.updateOption();\n\n    if (this.allowMultiSelection) {\n      this.updateMode();\n    }\n\n    this.setMultiSelect();\n  };\n\n  DropDownTree.prototype.updateAllowFiltering = function (state) {\n    if (!this.isFirstRender) {\n      if (state) {\n        this.renderFilter();\n      } else {\n        this.destroyFilter();\n      }\n    }\n\n    this.ensureAutoCheck();\n  };\n\n  DropDownTree.prototype.updateFilterPlaceHolder = function () {\n    if (this.filterObj) {\n      this.filterObj.placeholder = this.filterBarPlaceholder;\n      this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n    }\n  };\n\n  DropDownTree.prototype.updateValue = function (value) {\n    this.isDynamicChange = true;\n\n    if (isNullOrUndefined(value) || value.length === 0) {\n      this.resetValue(true);\n    } else {\n      this.setTreeValue();\n\n      if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n        this.updateOverflowWrapper(false);\n        this.updateView();\n      }\n    }\n\n    this.updateHiddenValue();\n    this.isDynamicChange = false;\n  };\n\n  DropDownTree.prototype.updateText = function (text) {\n    if (isNullOrUndefined(text)) {\n      this.resetValue();\n    } else {\n      this.setTreeText();\n\n      if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n        this.updateOverflowWrapper(false);\n        this.updateView();\n      }\n    }\n\n    this.updateHiddenValue();\n  };\n\n  DropDownTree.prototype.updateModelMode = function () {\n    var validMode = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n\n    if (!validMode) {\n      return;\n    }\n\n    if (!this.wrapText) {\n      var overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n\n      if (overFlow) {\n        overFlow.innerHTML = '';\n      }\n    }\n\n    this.updateMode();\n    this.setMultiSelect();\n\n    if (!this.wrapText && this.value && this.value.length !== 0) {\n      this.updateOverFlowView();\n      addClass([this.inputEle], CHIP_INPUT);\n\n      if (this.mode === 'Box') {\n        removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n      } else {\n        addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateOption = function () {\n    if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n      this.hiddenElement.setAttribute('multiple', '');\n    } else if (this.hiddenElement.hasAttribute('multiple') && !this.allowMultiSelection && !this.showCheckBox) {\n      this.hiddenElement.removeAttribute('multiple');\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {DropDownTreeModel} newProp - specifies the newProp value.\n   * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n   * @returns {void}\n   * @private\n   */\n\n\n  DropDownTree.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'width':\n          this.setElementWidth(newProp.width);\n\n          if (this.popupObj) {\n            this.popupObj.element.style.width = this.setWidth();\n          }\n\n          break;\n\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this.inputEle);\n          break;\n\n        case 'cssClass':\n          this.setCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n\n        case 'enableRtl':\n          this.setEnableRTL(this.enableRtl);\n          break;\n\n        case 'fields':\n          this.setFields();\n          break;\n\n        case 'readonly':\n          Input.setReadonly(newProp.readonly, this.inputEle);\n          break;\n\n        case 'enabled':\n          this.setEnable();\n          break;\n\n        case 'floatLabelType':\n          Input.removeFloating(this.inputObj);\n          Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n          this.ensureClearIconPosition(newProp.floatLabelType);\n          break;\n\n        case 'showClearButton':\n          this.updateClearButton(newProp.showClearButton);\n          break;\n\n        case 'allowFiltering':\n          this.updateAllowFiltering(newProp.allowFiltering);\n          break;\n\n        case 'filterBarPlaceholder':\n          this.updateFilterPlaceHolder();\n          break;\n\n        case 'value':\n          this.oldValue = oldProp.value;\n          this.updateValue(newProp.value);\n          break;\n\n        case 'text':\n          this.updateText(newProp.text);\n          break;\n\n        case 'allowMultiSelection':\n          this.updateMultiSelection(newProp.allowMultiSelection);\n          break;\n\n        case 'mode':\n          if (!this.showCheckBox && !this.allowMultiSelection) {\n            return;\n          }\n\n          if (this.mode === 'Custom') {\n            if (this.overFlowWrapper) {\n              detach(this.overFlowWrapper);\n            }\n\n            if (this.chipWrapper) {\n              detach(this.chipWrapper);\n            }\n\n            this.setTagValues();\n          } else {\n            if (oldProp.mode === 'Custom') {\n              this.updateOverflowWrapper(this.wrapText);\n            }\n\n            this.updateModelMode();\n          }\n\n          break;\n\n        case 'delimiterChar':\n          if (this.mode === 'Box') {\n            return;\n          }\n\n          if (this.showCheckBox || this.allowMultiSelection) {\n            this.setMultiSelect();\n          }\n\n          break;\n\n        case 'selectAllText':\n          if (this.showCheckBox && this.showSelectAll) {\n            this.setLocale();\n          }\n\n          break;\n\n        case 'unSelectAllText':\n          if (this.showCheckBox && this.showSelectAll) {\n            this.setLocale(false);\n          }\n\n          break;\n\n        case 'showSelectAll':\n          if (this.showCheckBox) {\n            this.setSelectAllWrapper(newProp.showSelectAll);\n            this.updatePopupHeight();\n          }\n\n          break;\n\n        case 'showCheckBox':\n          this.updateCheckBoxState(newProp.showCheckBox);\n\n          if (!this.wrapText) {\n            this.updateOverflowWrapper(true);\n          }\n\n          this.updatePopupHeight();\n          this.updateOption();\n          break;\n\n        case 'treeSettings':\n          this.updateTreeSettings(newProp);\n          break;\n\n        case 'customTemplate':\n          if (this.mode !== \"Custom\") {\n            return;\n          }\n\n          this.chipCollection.innerHTML = \"\";\n          this.setTagValues();\n          break;\n\n        case 'sortOrder':\n          if (this.hasTemplate) {\n            this.updateTemplate();\n          }\n\n          this.treeObj.sortOrder = newProp.sortOrder;\n          this.treeObj.dataBind();\n          this.updateValue(this.value);\n          break;\n\n        case 'showDropDownIcon':\n          this.updateDropDownIconState(newProp.showDropDownIcon);\n          break;\n\n        case 'popupWidth':\n          if (this.popupObj) {\n            this.popupObj.element.style.width = this.setWidth();\n          }\n\n          break;\n\n        case 'popupHeight':\n          if (this.popupObj) {\n            this.updatePopupHeight();\n          }\n\n          break;\n\n        case 'zIndex':\n          if (this.popupObj) {\n            this.popupObj.zIndex = newProp.zIndex;\n            this.popupObj.dataBind();\n          }\n\n          break;\n\n        case 'headerTemplate':\n          this.updateTemplate();\n          break;\n\n        case 'footerTemplate':\n          this.updateTemplate();\n          break;\n\n        case 'itemTemplate':\n          this.updateTemplate();\n          this.treeObj.nodeTemplate = newProp.itemTemplate;\n          this.treeObj.dataBind();\n          break;\n\n        case 'noRecordsTemplate':\n          this.updateRecordTemplate();\n          break;\n\n        case 'actionFailureTemplate':\n          this.updateRecordTemplate(true);\n          break;\n\n        case 'htmlAttributes':\n          this.setHTMLAttributes();\n          break;\n\n        case 'wrapText':\n          this.updateOverflowWrapper(this.wrapText);\n\n          if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n            this.updateView();\n          } else {\n            addClass([this.overFlowWrapper], HIDEICON);\n\n            if (this.chipWrapper && this.mode === 'Box') {\n              removeClass([this.chipWrapper], HIDEICON);\n            } else {\n              removeClass([this.inputWrapper], SHOW_CHIP);\n              removeClass([this.inputEle], CHIP_INPUT);\n            }\n\n            this.ensurePlaceHolder();\n          }\n\n          break;\n      }\n    }\n  };\n  /**\n   * Allows you to clear the selected values from the Dropdown Tree component.\n   *\n   * @method clear\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.clear = function () {\n    this.clearAll();\n\n    if (this.inputFocus) {\n      this.onFocusOut();\n    } else {\n      if (this.changeOnBlur) {\n        this.triggerChangeEvent();\n      }\n\n      this.removeValue = false;\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.destroy = function () {\n    this.clearTemplate();\n    this.unWireEvents();\n    this.setCssClass(null, this.cssClass);\n    this.setProperties({\n      value: []\n    }, true);\n    this.setProperties({\n      text: null\n    }, true);\n    this.treeObj.destroy();\n    this.destroyFilter();\n\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      detach(this.popupObj.element);\n    }\n\n    if (this.element.tagName !== this.getDirective()) {\n      this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n    }\n\n    Input.setValue(null, this.inputEle, this.floatLabelType);\n    detach(this.inputWrapper);\n    detach(this.popupDiv);\n    this.element.classList.remove('e-input');\n\n    if (this.showCheckBox || this.allowMultiSelection) {\n      this.element.classList.remove(CHIP_INPUT);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  DropDownTree.prototype.destroyFilter = function () {\n    if (this.filterObj) {\n      this.filterObj.destroy();\n      detach(this.filterObj.element);\n      detach(this.filterContainer);\n      this.filterObj = null;\n    }\n  };\n  /**\n   * Ensures visibility of the Dropdown Tree item by using item value or item element.\n   * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n   * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n   *\n   * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.ensureVisible = function (item) {\n    this.treeObj.ensureVisible(item);\n  };\n  /**\n   * To get the updated data source of the Dropdown Tree.\n   *\n   * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n   * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n   */\n  // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getData = function (item) {\n    return this.treeObj.getTreeData(item);\n  };\n  /**\n   * Close the Dropdown tree pop-up.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.hidePopup = function () {\n    var eventArgs = {\n      popup: this.popupObj\n    };\n    this.inputWrapper.classList.remove(ICONANIMATION);\n\n    if (this.popupEle) {\n      addClass([this.popupEle], DDTHIDEICON);\n    }\n\n    attributes(this.inputWrapper, {\n      'aria-expanded': 'false'\n    });\n\n    if (this.popupObj && this.isPopupOpen) {\n      this.popupObj.hide();\n\n      if (this.inputFocus) {\n        this.inputWrapper.focus();\n\n        if (this.allowFiltering) {\n          addClass([this.inputWrapper], [INPUTFOCUS]);\n        }\n      }\n\n      this.trigger('close', eventArgs);\n    }\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected or deselected.\n   *\n   * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n   * @returns {void}\n   *\n   */\n\n\n  DropDownTree.prototype.selectAll = function (state) {\n    this.selectAllItems(state);\n  };\n  /**\n   * Opens the popup that displays the Dropdown Tree items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.showPopup = function () {\n    if (!this.enabled || this.readonly || this.isPopupOpen) {\n      return;\n    }\n\n    this.renderPopup();\n    this.focusIn();\n  };\n  /**\n   * Return the module name.\n   *\n   * @private\n   * @returns {string} - returns the module name.\n   */\n\n\n  DropDownTree.prototype.getModuleName = function () {\n    return 'dropdowntree';\n  };\n\n  __decorate$2([Property('The Request Failed')], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"allowFiltering\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"changeOnBlur\", void 0);\n\n  __decorate$2([Property('')], DropDownTree.prototype, \"cssClass\", void 0);\n\n  __decorate$2([Property(\"${value.length} item(s) selected\")], DropDownTree.prototype, \"customTemplate\", void 0);\n\n  __decorate$2([Property(',')], DropDownTree.prototype, \"delimiterChar\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"enabled\", void 0);\n\n  __decorate$2([Complex({}, Fields)], DropDownTree.prototype, \"fields\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$2([Property('StartsWith')], DropDownTree.prototype, \"filterType\", void 0);\n\n  __decorate$2([Property('Never')], DropDownTree.prototype, \"floatLabelType\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"footerTemplate\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"ignoreAccent\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"ignoreCase\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"headerTemplate\", void 0);\n\n  __decorate$2([Property({})], DropDownTree.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"itemTemplate\", void 0);\n\n  __decorate$2([Property('Default')], DropDownTree.prototype, \"mode\", void 0);\n\n  __decorate$2([Property('No Records Found')], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"placeholder\", void 0);\n\n  __decorate$2([Property('300px')], DropDownTree.prototype, \"popupHeight\", void 0);\n\n  __decorate$2([Property('100%')], DropDownTree.prototype, \"popupWidth\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"readonly\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"showSelectAll\", void 0);\n\n  __decorate$2([Property('Select All')], DropDownTree.prototype, \"selectAllText\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"showCheckBox\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"showClearButton\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n\n  __decorate$2([Property('None')], DropDownTree.prototype, \"sortOrder\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"text\", void 0);\n\n  __decorate$2([Complex({}, TreeSettings)], DropDownTree.prototype, \"treeSettings\", void 0);\n\n  __decorate$2([Property('Unselect All')], DropDownTree.prototype, \"unSelectAllText\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"value\", void 0);\n\n  __decorate$2([Property('100%')], DropDownTree.prototype, \"width\", void 0);\n\n  __decorate$2([Property(1000)], DropDownTree.prototype, \"zIndex\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"wrapText\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"actionFailure\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"beforeOpen\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"change\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"close\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"blur\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"created\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"dataBound\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"destroyed\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"filtering\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"focus\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"keyPress\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"open\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"select\", void 0);\n\n  DropDownTree = __decorate$2([NotifyPropertyChanges], DropDownTree);\n  return DropDownTree;\n}(Component);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$3 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\n\n\nvar SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nvar inputObject$1 = {\n  container: null,\n  buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\n\nvar ComboBox =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$3(ComboBox, _super);\n  /**\n   * *Constructor for creating the component\n   *\n   * @param {ComboBoxModel} options - Specifies the ComboBox model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function ComboBox(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.preRender = function () {\n    _super.prototype.preRender.call(this);\n  };\n\n  ComboBox.prototype.getLocaleName = function () {\n    return 'combo-box';\n  };\n\n  ComboBox.prototype.wireEvent = function () {\n    if (this.getModuleName() === 'combobox') {\n      EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n      EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n    }\n\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n      EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n    }\n\n    EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n\n    if (!this.readonly) {\n      EventHandler.add(this.inputElement, 'input', this.onInput, this);\n      EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n    }\n\n    this.bindCommonEvent();\n  };\n\n  ComboBox.prototype.preventBlur = function (e) {\n    if (!this.allowFiltering && document.activeElement !== this.inputElement && !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice) {\n      e.preventDefault();\n    }\n  };\n\n  ComboBox.prototype.onBlurHandler = function (e) {\n    var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n\n    if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n      this.customValue(e);\n    }\n\n    _super.prototype.onBlurHandler.call(this, e);\n  };\n\n  ComboBox.prototype.targetElement = function () {\n    return this.inputElement;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ComboBox.prototype.setOldText = function (text) {\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    this.customValue();\n    this.removeSelection();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ComboBox.prototype.setOldValue = function (value) {\n    if (this.allowCustom) {\n      this.valueMuteChange(this.value);\n    } else {\n      this.valueMuteChange(null);\n    }\n\n    this.removeSelection();\n    this.setHiddenValue();\n  };\n\n  ComboBox.prototype.valueMuteChange = function (value) {\n    var inputValue = isNullOrUndefined(value) ? null : value.toString();\n    Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n    this.setProperties({\n      value: value,\n      text: value,\n      index: null\n    }, true);\n    this.activeIndex = this.index;\n    var fields = this.fields;\n    var dataItem = {};\n    dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n    dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n    this.itemData = dataItem;\n    this.item = null;\n\n    if (this.previousValue !== this.value) {\n      this.detachChangeEvent(null);\n    }\n  };\n\n  ComboBox.prototype.updateValues = function () {\n    if (!isNullOrUndefined(this.value)) {\n      var li = this.getElementByValue(this.value);\n\n      if (li) {\n        this.setSelection(li, null);\n      } else if (this.allowCustom) {\n        this.valueMuteChange(this.value);\n      } else {\n        this.valueMuteChange(null);\n      }\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var li = this.getElementByText(this.text);\n\n      if (li) {\n        this.setSelection(li, null);\n      } else {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.customValue();\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n\n  ComboBox.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n\n  ComboBox.prototype.getAriaAttributes = function () {\n    var ariaAttributes = {\n      'role': 'combobox',\n      'aria-autocomplete': 'both',\n      'aria-labelledby': this.hiddenElement.id,\n      'aria-expanded': 'false',\n      'aria-readonly': this.readonly.toString(),\n      'autocomplete': 'off',\n      'autocapitalize': 'off',\n      'spellcheck': 'false'\n    };\n    return ariaAttributes;\n  };\n\n  ComboBox.prototype.searchLists = function (e) {\n    this.isTyped = true;\n\n    if (this.isFiltering()) {\n      _super.prototype.searchLists.call(this, e);\n\n      if (this.ulElement && this.filterInput.value.trim() === '') {\n        this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n      }\n    } else {\n      if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n        this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n      }\n\n      this.incrementalSearch(e);\n    }\n  };\n\n  ComboBox.prototype.getNgDirective = function () {\n    return 'EJS-COMBOBOX';\n  };\n\n  ComboBox.prototype.setSearchBox = function () {\n    this.filterInput = this.inputElement;\n    return this.isFiltering() ? this.inputWrapper : inputObject$1;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ComboBox.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    if (this.isSelectCustom) {\n      this.removeSelection();\n    }\n\n    if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped) {\n      setTimeout(function () {\n        _this.inlineSearch();\n      });\n    }\n  };\n\n  ComboBox.prototype.getFocusElement = function () {\n    var dataItem = this.isSelectCustom ? {\n      text: ''\n    } : this.getItemData();\n    var selected = this.list.querySelector('.' + dropDownListClasses.selected);\n    var isSelected = dataItem.text === this.inputElement.value && !isNullOrUndefined(selected);\n\n    if (isSelected) {\n      return selected;\n    }\n\n    if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n      var inputValue = this.inputElement.value;\n      var activeItem = Search(inputValue, this.liCollections, this.filterType, true);\n      var activeElement = activeItem.item;\n\n      if (!isNullOrUndefined(activeElement)) {\n        var count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n        var height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n\n        if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n          this.removeFocus();\n          var fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n          this.list.scrollTop = count * height + fixedHead;\n          addClass([activeElement], dropDownListClasses.focus);\n        }\n      } else {\n        if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n          this.removeFocus();\n          this.list.scrollTop = 0;\n        }\n      }\n\n      return activeElement;\n    } else {\n      return null;\n    }\n  };\n\n  ComboBox.prototype.setValue = function (e) {\n    if (e && e.type === 'keydown' && e.action === 'enter') {\n      this.removeFillSelection();\n    }\n\n    if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n      this.preventAutoFill = false;\n      this.inlineSearch(e);\n      return false;\n    } else {\n      return _super.prototype.setValue.call(this, e);\n    }\n  };\n\n  ComboBox.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n\n    if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n      this.setProperties({\n        'value': dataItem.value,\n        'text': dataItem.text\n      }, !this.allowCustom);\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = this.getModuleName() === 'autocomplete' ? this.inputWrapper.buttons[0] || this.inputWrapper.clearButton || Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement) : this.inputWrapper.buttons[0] || this.inputWrapper.clearButton;\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n\n      if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n        detach(this.spinnerElement);\n      } else {\n        this.spinnerElement.innerHTML = '';\n      }\n\n      this.spinnerElement = null;\n    }\n  };\n\n  ComboBox.prototype.setAutoFill = function (activeElement, isHover) {\n    if (!isHover) {\n      this.setHoverList(activeElement);\n    }\n\n    if (this.autofill && !this.preventAutoFill) {\n      var currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n      var currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n\n      if (this.getModuleName() === 'combobox') {\n        if (!this.isSelected && this.previousValue !== currentFillValue) {\n          this.updateSelectedItem(activeElement, null);\n          this.isSelected = true;\n          this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n        } else {\n          this.updateSelectedItem(activeElement, null, true);\n        }\n      }\n\n      if (!this.isAndroidAutoFill(currentValue)) {\n        this.setAutoFillSelection(currentValue, isHover);\n      }\n    }\n  };\n\n  ComboBox.prototype.isAndroidAutoFill = function (value) {\n    if (Browser.isAndroid) {\n      var currentPoints = this.getSelectionPoints();\n      var prevEnd = this.prevSelectPoints.end;\n      var curEnd = currentPoints.end;\n      var prevStart = this.prevSelectPoints.start;\n      var curStart = currentPoints.start;\n\n      if (prevEnd !== 0 && (prevEnd === value.length && prevStart === value.length || prevStart > curStart && prevEnd > curEnd || prevEnd === curEnd && prevStart === curStart)) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n\n  ComboBox.prototype.clearAll = function (e, property) {\n    if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n      _super.prototype.clearAll.call(this, e);\n    }\n\n    if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n      this.searchLists(e);\n    }\n  };\n\n  ComboBox.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  ComboBox.prototype.inlineSearch = function (e) {\n    var isKeyNavigate = e && (e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown');\n    var activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n\n    if (!isNullOrUndefined(activeElement)) {\n      if (!isKeyNavigate) {\n        var value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n        this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n      }\n\n      this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n      this.setAutoFill(activeElement, isKeyNavigate);\n    } else if (this.inputElement.value === '') {\n      this.activeIndex = null;\n      this.list.scrollTop = 0;\n      var focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n      this.setHoverList(focusItem);\n    } else {\n      this.activeIndex = null;\n      this.removeSelection();\n\n      if (this.liCollections && this.liCollections.length > 0 && !this.isCustomFilter) {\n        this.removeFocus();\n      }\n    }\n  };\n\n  ComboBox.prototype.incrementalSearch = function (e) {\n    this.showPopup(e);\n\n    if (!isNullOrUndefined(this.listData)) {\n      this.inlineSearch(e);\n      e.preventDefault();\n    }\n  };\n\n  ComboBox.prototype.setAutoFillSelection = function (currentValue, isKeyNavigate) {\n    if (isKeyNavigate === void 0) {\n      isKeyNavigate = false;\n    }\n\n    var selection = this.getSelectionPoints();\n    var value = this.inputElement.value.substr(0, selection.start);\n\n    if (value && value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase()) {\n      var inputValue = value + currentValue.substr(value.length, currentValue.length);\n      Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n    } else if (isKeyNavigate) {\n      Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n    }\n  };\n\n  ComboBox.prototype.getValueByText = function (text) {\n    return _super.prototype.getValueByText.call(this, text, true, this.ignoreAccent);\n  };\n\n  ComboBox.prototype.unWireEvent = function () {\n    if (this.getModuleName() === 'combobox') {\n      EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n      EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n    }\n\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n      EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n    }\n\n    if (this.inputElement) {\n      EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n\n      if (!this.readonly) {\n        EventHandler.remove(this.inputElement, 'input', this.onInput);\n        EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n        EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n        EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n      }\n    }\n\n    this.unBindCommonEvent();\n  };\n\n  ComboBox.prototype.setSelection = function (li, e) {\n    _super.prototype.setSelection.call(this, li, e);\n\n    if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n      this.removeFocus();\n    }\n  };\n\n  ComboBox.prototype.selectCurrentItem = function (e) {\n    var li;\n\n    if (this.isPopupOpen) {\n      if (this.isSelected) {\n        li = this.list.querySelector('.' + dropDownListClasses.selected);\n      } else {\n        li = this.list.querySelector('.' + dropDownListClasses.focus);\n      }\n\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n    }\n\n    if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n      this.clearAll(e);\n    } else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n      this.customValue(e);\n    }\n\n    this.hidePopup(e);\n  };\n\n  ComboBox.prototype.setHoverList = function (li) {\n    this.removeSelection();\n\n    if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n      this.removeFocus();\n      li.classList.add(dropDownListClasses.focus);\n    }\n  };\n\n  ComboBox.prototype.targetFocus = function (e) {\n    if (Browser.isDevice && !this.allowFiltering) {\n      this.preventFocus = false;\n    }\n\n    this.onFocus(e);\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n  };\n\n  ComboBox.prototype.dropDownClick = function (e) {\n    e.preventDefault();\n\n    if (Browser.isDevice && !this.isFiltering()) {\n      this.preventFocus = true;\n    }\n\n    _super.prototype.dropDownClick.call(this, e);\n  };\n\n  ComboBox.prototype.customValue = function (e) {\n    var _this = this;\n\n    var value = this.getValueByText(this.inputElement.value);\n\n    if (!this.allowCustom && this.inputElement.value !== '') {\n      var previousValue = this.previousValue;\n      var currentValue = this.value;\n      this.setProperties({\n        value: value\n      });\n\n      if (isNullOrUndefined(this.value)) {\n        Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n\n      if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n        this.onChangeEvent(null);\n      }\n    } else if (this.inputElement.value.trim() !== '') {\n      var previousValue_1 = this.value;\n\n      if (isNullOrUndefined(value)) {\n        var value_1 = this.inputElement.value === '' ? null : this.inputElement.value; // eslint-disable-next-line max-len\n\n        var eventArgs = {\n          text: value_1,\n          item: {}\n        };\n\n        if (!this.initial) {\n          this.trigger('customValueSpecifier', eventArgs, function (eventArgs) {\n            _this.updateCustomValueCallback(value_1, eventArgs, previousValue_1, e);\n          });\n        } else {\n          this.updateCustomValueCallback(value_1, eventArgs, previousValue_1);\n        }\n      } else {\n        this.isSelectCustom = false;\n        this.setProperties({\n          value: value\n        });\n\n        if (previousValue_1 !== this.value) {\n          this.onChangeEvent(e);\n        }\n      }\n    } else if (this.allowCustom) {\n      this.isSelectCustom = true;\n    }\n  };\n\n  ComboBox.prototype.updateCustomValueCallback = function (value, eventArgs, previousValue, e) {\n    var fields = this.fields;\n    var item = eventArgs.item;\n    var dataItem = {};\n\n    if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n      dataItem = item;\n    } else {\n      setValue(fields.text, value, dataItem);\n      setValue(fields.value, value, dataItem);\n    }\n\n    this.itemData = dataItem;\n    var changeData = {\n      text: getValue(fields.text, this.itemData),\n      value: getValue(fields.value, this.itemData),\n      index: null\n    };\n    this.setProperties(changeData, true);\n    this.setSelection(null, null);\n    this.isSelectCustom = true;\n\n    if (previousValue !== this.value) {\n      this.onChangeEvent(e);\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n   * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'combobox') {\n      this.checkData(newProp);\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'readonly':\n          Input.setReadonly(this.readonly, this.inputElement);\n\n          if (this.readonly) {\n            EventHandler.remove(this.inputElement, 'input', this.onInput);\n            EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n            EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n          } else {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n            EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n          }\n\n          this.setReadOnly();\n          break;\n\n        case 'allowFiltering':\n          this.setSearchBox();\n\n          if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this);\n          }\n\n          break;\n\n        case 'allowCustom':\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var comboProps = this.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this, comboProps.newProperty, comboProps.oldProperty);\n\n            if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate && this.getModuleName() === 'combobox') {\n              _super.prototype.renderList.call(this);\n            }\n\n            break;\n          }\n      }\n    }\n  };\n  /**\n   * To initialize the control rendering.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.render = function () {\n    _super.prototype.render.call(this);\n\n    this.setSearchBox();\n\n    if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n      _super.prototype.renderList.call(this);\n    }\n\n    this.renderComplete();\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  ComboBox.prototype.getModuleName = function () {\n    return 'combobox';\n  };\n  /**\n   * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.filter = function (dataSource, query, fields) {\n    _super.prototype.filter.call(this, dataSource, query, fields);\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.showPopup = function (e) {\n    _super.prototype.showPopup.call(this, e);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in open state.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.hidePopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n\n    if (!isNullOrUndefined(this.listData)) {\n      var isEscape = this.isEscapeKey;\n\n      if (this.isEscapeKey) {\n        Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.isEscapeKey = false;\n      }\n\n      if (this.autofill) {\n        this.removeFillSelection();\n      }\n\n      var dataItem = this.isSelectCustom ? {\n        text: ''\n      } : this.getItemData();\n      var selected = this.list.querySelector('.' + dropDownListClasses.selected);\n\n      if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n        if (this.isSelected) {\n          this.onChangeEvent(e);\n          this.isSelectCustom = false;\n        }\n\n        _super.prototype.hidePopup.call(this, e);\n\n        return;\n      }\n\n      if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n        var searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true);\n        this.selectedLI = searchItem.item;\n\n        if (isNullOrUndefined(searchItem.index)) {\n          searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true).index;\n        }\n\n        this.activeIndex = searchItem.index;\n\n        if (!isNullOrUndefined(this.selectedLI)) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n        } else if (isEscape) {\n          this.isSelectCustom = true;\n          this.removeSelection();\n        }\n      }\n\n      if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n        this.customValue(e);\n      }\n    }\n\n    if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n      this.customValue();\n    }\n\n    _super.prototype.hidePopup.call(this, e);\n  };\n  /**\n   * Sets the focus to the component for interaction.\n   *\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.focusIn = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (Browser.isDevice && !this.isFiltering()) {\n      this.preventFocus = true;\n    }\n\n    _super.prototype.focusIn.call(this);\n  };\n  /**\n   * Allows you to clear the selected values from the component.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.clear = function () {\n    this.value = null;\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Moves the focus from the component if the component is already focused.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.focusOut = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    _super.prototype.focusOut.call(this, e);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.getItems = function () {\n    return _super.prototype.getItems.call(this);\n  };\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n\n  ComboBox.prototype.renderHightSearch = function () {// update high light search\n  };\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"autofill\", void 0);\n\n  __decorate$3([Property(true)], ComboBox.prototype, \"allowCustom\", void 0);\n\n  __decorate$3([Property({})], ComboBox.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"allowFiltering\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"query\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"index\", void 0);\n\n  __decorate$3([Property(true)], ComboBox.prototype, \"showClearButton\", void 0);\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"enableRtl\", void 0);\n\n  __decorate$3([Event()], ComboBox.prototype, \"customValueSpecifier\", void 0);\n\n  __decorate$3([Event()], ComboBox.prototype, \"filtering\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"valueTemplate\", void 0);\n\n  __decorate$3([Property('Never')], ComboBox.prototype, \"floatLabelType\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"cssClass\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"headerTemplate\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"footerTemplate\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"placeholder\", void 0);\n\n  __decorate$3([Property('100%')], ComboBox.prototype, \"width\", void 0);\n\n  __decorate$3([Property('300px')], ComboBox.prototype, \"popupHeight\", void 0);\n\n  __decorate$3([Property('100%')], ComboBox.prototype, \"popupWidth\", void 0);\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"readonly\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"text\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"value\", void 0);\n\n  ComboBox = __decorate$3([NotifyPropertyChanges], ComboBox);\n  return ComboBox;\n}(DropDownList);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$4 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\n\n\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\n\nvar AutoComplete =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$4(AutoComplete, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function AutoComplete(options, element) {\n    var _this_1 = _super.call(this, options, element) || this;\n\n    _this_1.isFiltered = false;\n    _this_1.searchList = false;\n    return _this_1;\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.preRender = function () {\n    _super.prototype.preRender.call(this);\n  };\n\n  AutoComplete.prototype.getLocaleName = function () {\n    return 'auto-complete';\n  };\n\n  AutoComplete.prototype.getNgDirective = function () {\n    return 'EJS-AUTOCOMPLETE';\n  };\n\n  AutoComplete.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.value) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.value) ? this.value : this.queryString;\n\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n\n    if (!isNullOrUndefined(this.suggestionCount)) {\n      // Since defualt value of suggestioncount is 20, checked the condition\n      if (this.suggestionCount !== 20) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n\n      filterQuery.take(this.suggestionCount);\n    }\n\n    return filterQuery;\n  };\n\n  AutoComplete.prototype.searchLists = function (e) {\n    var _this_1 = this;\n\n    this.isTyped = true;\n    this.isDataFetched = this.isSelectCustom = false;\n\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.renderList.call(this, e, true);\n    }\n\n    this.queryString = this.filterInput.value;\n\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields, null, e);\n      return;\n    }\n\n    this.isSelected = false;\n    this.activeIndex = null;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.filterInput.value,\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n\n        _this_1.isFiltered = true;\n\n        _this_1.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this_1.isFiltered && !eventArgs.preventDefaultAction) {\n        _this_1.searchList = true;\n\n        _this_1.filterAction(_this_1.dataSource, null, _this_1.fields, e);\n      }\n    });\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  AutoComplete.prototype.filter = function (dataSource, query, fields) {\n    this.isFiltered = true;\n    this.filterAction(dataSource, query, fields);\n  };\n\n  AutoComplete.prototype.filterAction = function (dataSource, query, fields, e) {\n    this.beforePopupOpen = true;\n\n    if (this.queryString !== '' && this.queryString.length >= this.minLength) {\n      this.resetList(dataSource, fields, query, e);\n    } else {\n      this.hidePopup(e);\n      this.beforePopupOpen = false;\n    }\n\n    this.renderReactTemplates();\n  };\n\n  AutoComplete.prototype.clearAll = function (e, property) {\n    if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n      _super.prototype.clearAll.call(this, e);\n    }\n\n    if (this.beforePopupOpen) {\n      this.hidePopup();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  AutoComplete.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    this.fixedHeaderElement = null;\n\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    var item = this.list.querySelector('.' + dropDownListClasses.li);\n\n    if (!isNullOrUndefined(item)) {\n      removeClass([item], dropDownListClasses.focus);\n    }\n\n    this.postBackAction();\n  };\n\n  AutoComplete.prototype.postBackAction = function () {\n    if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n      var items = [this.liCollections[0]];\n      var searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase);\n      this.searchList = false;\n\n      if (!isNullOrUndefined(searchItem.item)) {\n        _super.prototype.setAutoFill.call(this, this.liCollections[0], true);\n      }\n    }\n  };\n\n  AutoComplete.prototype.setSelection = function (li, e) {\n    if (!this.isValidLI(li)) {\n      this.selectedLI = li;\n      return;\n    }\n\n    if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter' && e.action !== 'tab' && this.isValidLI(li)) {\n      var value = this.getFormattedValue(li.getAttribute('data-value'));\n      this.activeIndex = this.getIndexByValue(value);\n      this.setHoverList(li);\n      this.selectedLI = li;\n      this.setScrollPosition(e);\n\n      if (this.autofill && this.isPopupOpen) {\n        this.preventAutoFill = false;\n        var isKeyNavigate = e && e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown';\n\n        _super.prototype.setAutoFill.call(this, li, isKeyNavigate);\n      }\n    } else {\n      _super.prototype.setSelection.call(this, li, e);\n    }\n  };\n\n  AutoComplete.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this_1 = this;\n\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this_1.highlight) {\n          if (_this_1.element.tagName === _this_1.getNgDirective() && _this_1.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n            }, 0);\n          } else {\n            highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n\n      fields.itemCreated = function (e) {\n        if (_this_1.highlight) {\n          highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n        }\n\n        itemCreated_1.apply(_this_1, [e]);\n      };\n    }\n\n    return fields;\n  };\n\n  AutoComplete.prototype.isFiltering = function () {\n    return true;\n  };\n\n  AutoComplete.prototype.renderPopup = function (e) {\n    this.list.scrollTop = 0;\n\n    _super.prototype.renderPopup.call(this, e);\n  };\n\n  AutoComplete.prototype.isEditTextBox = function () {\n    return true && this.inputElement.value.trim() !== '';\n  };\n\n  AutoComplete.prototype.isPopupButton = function () {\n    return this.showPopupButton;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  AutoComplete.prototype.isSelectFocusItem = function (element) {\n    return false;\n  };\n\n  AutoComplete.prototype.setInputValue = function (newProp, oldProp) {\n    var oldValue = oldProp && oldProp.text ? oldProp.text : oldProp ? oldProp.value : oldProp;\n    var value = newProp && newProp.text ? newProp.text : newProp && newProp.value ? newProp.value : this.value;\n\n    if (value && this.typedString === '' && !this.allowCustom && !(this.dataSource instanceof DataManager)) {\n      var checkFields_1_1 = this.typeOfData(this.dataSource).typeof === 'string' ? '' : this.fields.value;\n      var listLength_1 = this.getItems().length;\n      var query = new Query();\n\n      var _this_2 = this;\n\n      new DataManager(this.dataSource).executeQuery(query.where(new Predicate(checkFields_1_1, 'equal', value))).then(function (e) {\n        if (e.result.length > 0) {\n          _this_2.value = checkFields_1_1 !== '' ? e.result[0][_this_2.fields.value].toString() : e.result[0].toString();\n\n          _this_2.addItem(e.result, listLength_1);\n\n          _this_2.updateValues();\n        } else {\n          newProp && newProp.text ? _this_2.setOldText(oldValue) : newProp && newProp.value ? _this_2.setOldValue(oldValue) : _this_2.updateValues();\n        }\n      });\n    } else if (newProp) {\n      newProp.text ? this.setOldText(oldValue) : this.setOldValue(oldValue);\n    }\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  AutoComplete.prototype.showPopup = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n\n    this.beforePopupOpen = true;\n    this.preventAutoFill = true;\n\n    if (isNullOrUndefined(this.list)) {\n      this.renderList(e);\n    } else {\n      this.resetList(this.dataSource, this.fields, null, e);\n    }\n  };\n  /**\n   * Hides the popup if it is in open state.\n   *\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.hidePopup = function (e) {\n    _super.prototype.hidePopup.call(this, e);\n\n    this.activeIndex = -1;\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n   * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'showPopupButton':\n          if (this.showPopupButton) {\n            var button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n            this.inputWrapper.buttons[0] = button;\n            Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n\n            if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0]) && this.floatLabelType !== 'Never') {\n              this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n            }\n\n            if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n              EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n            }\n          } else {\n            detach(this.inputWrapper.buttons[0]);\n            this.inputWrapper.buttons[0] = null;\n          }\n\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var atcProps = this.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this, atcProps.newProperty, atcProps.oldProperty);\n\n            break;\n          }\n      }\n    }\n  };\n\n  AutoComplete.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  AutoComplete.prototype.getModuleName = function () {\n    return 'autocomplete';\n  };\n  /**\n   * To initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.render = function () {\n    _super.prototype.render.call(this);\n  };\n\n  __decorate$4([Complex({\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], AutoComplete.prototype, \"fields\", void 0);\n\n  __decorate$4([Property(true)], AutoComplete.prototype, \"ignoreCase\", void 0);\n\n  __decorate$4([Property(false)], AutoComplete.prototype, \"showPopupButton\", void 0);\n\n  __decorate$4([Property(false)], AutoComplete.prototype, \"highlight\", void 0);\n\n  __decorate$4([Property(20)], AutoComplete.prototype, \"suggestionCount\", void 0);\n\n  __decorate$4([Property({})], AutoComplete.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"query\", void 0);\n\n  __decorate$4([Property(1)], AutoComplete.prototype, \"minLength\", void 0);\n\n  __decorate$4([Property('Contains')], AutoComplete.prototype, \"filterType\", void 0);\n\n  __decorate$4([Event()], AutoComplete.prototype, \"filtering\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"index\", void 0);\n\n  __decorate$4([Property('Never')], AutoComplete.prototype, \"floatLabelType\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"valueTemplate\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$4([Property(false)], AutoComplete.prototype, \"allowFiltering\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"text\", void 0);\n\n  AutoComplete = __decorate$4([NotifyPropertyChanges], AutoComplete);\n  return AutoComplete;\n}(ComboBox);\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\n\n\nvar FLOATLINE = 'e-float-line';\nvar FLOATTEXT = 'e-float-text';\nvar LABELTOP = 'e-label-top';\nvar LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n  var floatLinelement = createElement('span', {\n    className: FLOATLINE\n  });\n  var floatLabelElement = createElement('label', {\n    className: FLOATTEXT\n  });\n  var id = element.getAttribute('id') ? element.getAttribute('id') : getUniqueID('ej2_multiselect');\n  element.id = id;\n\n  if (!isNullOrUndefined(element.id) && element.id !== '') {\n    floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n    attributes(inputElement, {\n      'aria-labelledby': floatLabelElement.id\n    });\n  }\n\n  if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n    floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n    inputElement.removeAttribute('placeholder');\n  }\n\n  floatLabelElement.innerText = encodePlaceholder(placeholder);\n  searchWrapper.appendChild(floatLinelement);\n  searchWrapper.appendChild(floatLabelElement);\n  overAllWrapper.classList.add('e-float-input');\n  updateFloatLabelState(value, floatLabelElement);\n\n  if (floatLabelType === 'Always') {\n    if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n      removeClass([floatLabelElement], LABELBOTTOM);\n    }\n\n    addClass([floatLabelElement], LABELTOP);\n  }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\n\n\nfunction updateFloatLabelState(value, label) {\n  if (value && value.length > 0) {\n    addClass([label], LABELTOP);\n    removeClass([label], LABELBOTTOM);\n  } else {\n    removeClass([label], LABELTOP);\n    addClass([label], LABELBOTTOM);\n  }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n  var placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n  var floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n  var placeholderText;\n\n  if (!isNullOrUndefined(placeholderElement)) {\n    placeholderText = placeholderElement.innerText;\n    detach(searchWrapper.querySelector('.' + FLOATTEXT));\n    setPlaceHolder(value, inputElement, placeholderText);\n\n    if (!isNullOrUndefined(floatLine)) {\n      detach(searchWrapper.querySelector('.' + FLOATLINE));\n    }\n  } else {\n    placeholderText = placeholder !== null ? placeholder : '';\n    setPlaceHolder(value, inputElement, placeholderText);\n  }\n\n  overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction setPlaceHolder(value, inputElement, placeholder) {\n  if (value && value.length) {\n    inputElement.placeholder = '';\n  } else {\n    inputElement.placeholder = placeholder;\n  }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\n\n\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n  overAllWrapper.classList.add('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n\n  if (!isNullOrUndefined(label)) {\n    addClass([label], LABELTOP);\n\n    if (label.classList.contains(LABELBOTTOM)) {\n      removeClass([label], LABELBOTTOM);\n    }\n  }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  overAllWrapper.classList.remove('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n\n  if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n    if (label.classList.contains(LABELTOP)) {\n      removeClass([label], LABELTOP);\n    }\n\n    addClass([label], LABELBOTTOM);\n  }\n}\n\nfunction encodePlaceholder(placeholder) {\n  var result = '';\n\n  if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n    var spanElement = document.createElement('span');\n    spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n    var hiddenInput = spanElement.children[0];\n    result = hiddenInput.placeholder;\n  }\n\n  return result;\n}\n/* eslint-enable valid-jsdoc */\n\n\nvar __extends$5 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n\nvar FOCUS = 'e-input-focus';\nvar DISABLED$1 = 'e-disabled';\nvar OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nvar ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nvar ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nvar HIDE_LIST = 'e-hide-listitem';\nvar DELIMITER_VIEW = 'e-delim-view';\nvar CHIP_WRAPPER$1 = 'e-chips-collection';\nvar CHIP$1 = 'e-chips';\nvar CHIP_CONTENT$1 = 'e-chipcontent';\nvar CHIP_CLOSE$1 = 'e-chips-close';\nvar CHIP_SELECTED = 'e-chip-selected';\nvar SEARCHBOX_WRAPPER = 'e-searcher';\nvar DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nvar ZERO_SIZE = 'e-zero-size';\nvar REMAIN_WRAPPER$1 = 'e-remain';\nvar CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nvar DELIMITER_WRAPPER = 'e-delim-values';\nvar POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nvar INPUT_ELEMENT = 'e-dropdownbase';\nvar RTL_CLASS = 'e-rtl';\nvar CLOSE_ICON_HIDE = 'e-close-icon-hide';\nvar MOBILE_CHIP = 'e-mob-chip';\nvar FOOTER$1 = 'e-ddl-footer';\nvar HEADER$1 = 'e-ddl-header';\nvar DISABLE_ICON = 'e-ddl-disable-icon';\nvar SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nvar HIDDEN_ELEMENT = 'e-multi-hidden';\nvar destroy = 'destroy';\nvar dropdownIcon = 'e-input-group-icon e-ddl-icon';\nvar iconAnimation = 'e-icon-anim';\nvar TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nvar BOX_ELEMENT = 'e-multiselect-box';\nvar FILTERPARENT = 'e-filter-parent';\nvar CUSTOM_WIDTH = 'e-search-custom-width';\nvar FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\n\nvar MultiSelect =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$5(MultiSelect, _super);\n  /**\n   * Constructor for creating the DropDownList widget.\n   *\n   * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function MultiSelect(option, element) {\n    var _this = _super.call(this, option, element) || this;\n\n    _this.clearIconWidth = 0;\n    _this.previousFilterText = '';\n    _this.isValidKey = false;\n    _this.selectAllEventData = [];\n    _this.selectAllEventEle = [];\n    _this.scrollFocusStatus = false;\n    _this.keyDownStatus = false;\n    return _this;\n  }\n\n  MultiSelect.prototype.enableRTL = function (state) {\n    if (state) {\n      this.overAllWrapper.classList.add(RTL_CLASS);\n    } else {\n      this.overAllWrapper.classList.remove(RTL_CLASS);\n    }\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = state;\n      this.popupObj.dataBind();\n    }\n  };\n\n  MultiSelect.prototype.requiredModules = function () {\n    var modules = [];\n\n    if (this.mode === 'CheckBox') {\n      this.isGroupChecking = this.enableGroupCheckBox;\n\n      if (this.enableGroupCheckBox) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.enableSelectionOrder = false;\n        this.isProtectedOnChange = prevOnChange;\n      }\n\n      this.allowCustomValue = false;\n      this.hideSelectedItem = false;\n      this.closePopupOnSelect = false;\n      modules.push({\n        member: 'CheckBoxSelection',\n        args: [this]\n      });\n    }\n\n    return modules;\n  };\n\n  MultiSelect.prototype.updateHTMLAttribute = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        switch (htmlAttr) {\n          case 'class':\n            {\n              var updatedClassValue = this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ').trim();\n\n              if (updatedClassValue !== '') {\n                addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                addClass([this.popupWrapper], updatedClassValue.split(' '));\n              }\n\n              break;\n            }\n\n          case 'disabled':\n            this.enable(false);\n            break;\n\n          case 'placeholder':\n            if (!this.placeholder) {\n              this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n              this.setProperties({\n                placeholder: this.inputElement.placeholder\n              }, true);\n              this.refreshPlaceHolder();\n            }\n\n            break;\n\n          default:\n            {\n              var defaultAttr = ['id'];\n              var validateAttr = ['name', 'required', 'aria-required', 'form'];\n              var containerAttr = ['title', 'role', 'style', 'class'];\n\n              if (defaultAttr.indexOf(htmlAttr) > -1) {\n                this.element.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n              } else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n              } else if (containerAttr.indexOf(htmlAttr) > -1) {\n                this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n              } else if (htmlAttr !== 'size') {\n                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n              }\n\n              break;\n            }\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateReadonly = function (state) {\n    if (state || this.mode === 'CheckBox') {\n      this.inputElement.setAttribute('readonly', 'true');\n    } else {\n      this.inputElement.removeAttribute('readonly');\n    }\n  };\n\n  MultiSelect.prototype.updateClearButton = function (state) {\n    if (state) {\n      if (this.overAllClear.parentNode) {\n        this.overAllClear.style.display = '';\n      } else {\n        this.componentWrapper.appendChild(this.overAllClear);\n      }\n\n      this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n    } else {\n      this.overAllClear.style.display = 'none';\n      this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n    }\n  };\n\n  MultiSelect.prototype.updateCssClass = function () {\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      var updatedCssClassValues = this.cssClass;\n      updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n\n      if (updatedCssClassValues !== '') {\n        addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n        addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateOldPropCssClass = function (oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n\n      if (oldClass !== '') {\n        removeClass([this.overAllWrapper], oldClass.split(' '));\n        removeClass([this.popupWrapper], oldClass.split(' '));\n      }\n    }\n  };\n\n  MultiSelect.prototype.onPopupShown = function (e) {\n    var _this = this;\n\n    if (Browser.isDevice && this.mode === 'CheckBox' && this.allowFiltering) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_1 = this;\n\n      window.onpopstate = function () {\n        proxy_1.hidePopup();\n        proxy_1.inputElement.focus();\n      };\n\n      history.pushState({}, '');\n    }\n\n    var animModel = {\n      name: 'FadeIn',\n      duration: 100\n    };\n    var eventArgs = {\n      popup: this.popupObj,\n      event: e,\n      cancel: false,\n      animation: animModel\n    };\n    this.trigger('open', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.focusAtFirstListItem();\n\n        document.body.appendChild(_this.popupObj.element);\n\n        if (_this.mode === 'CheckBox' && _this.enableGroupCheckBox && !isNullOrUndefined(_this.fields.groupBy)) {\n          _this.updateListItems(_this.list.querySelectorAll('li.e-list-item'), _this.mainList.querySelectorAll('li.e-list-item'));\n        }\n\n        if (_this.mode === 'CheckBox' || _this.showDropDownIcon) {\n          addClass([_this.overAllWrapper], [iconAnimation]);\n        }\n\n        _this.refreshPopup();\n\n        _this.renderReactTemplates();\n\n        _this.popupObj.show(eventArgs.animation, _this.zIndex === 1000 ? _this.element : null);\n\n        attributes(_this.inputElement, {\n          'aria-expanded': 'true',\n          'aria-owns': _this.inputElement.id + '_options'\n        });\n\n        if (_this.selectedElementID == null) {\n          _this.inputElement.removeAttribute('aria-activedescendant');\n        } else {\n          attributes(_this.inputElement, {\n            'aria-activedescendant': _this.selectedElementID\n          });\n        }\n\n        if (_this.isFirstClick) {\n          _this.loadTemplate();\n        }\n      }\n    });\n  };\n\n  MultiSelect.prototype.updateListItems = function (listItems, mainListItems) {\n    for (var i = 0; i < listItems.length; i++) {\n      this.findGroupStart(listItems[i]);\n      this.findGroupStart(mainListItems[i]);\n    }\n\n    this.deselectHeader();\n  };\n\n  MultiSelect.prototype.loadTemplate = function () {\n    this.refreshListItems(null);\n\n    if (this.mode === 'CheckBox') {\n      this.removeFocus();\n    }\n\n    this.notify('reOrder', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      e: this\n    });\n  };\n\n  MultiSelect.prototype.setScrollPosition = function () {\n    if ((!this.hideSelectedItem && this.mode !== 'CheckBox' || this.mode === 'CheckBox' && !this.enableSelectionOrder) && !isNullOrUndefined(this.value) && this.value.length > 0) {\n      var valueEle = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', this.value[this.value.length - 1]);\n\n      if (!isNullOrUndefined(valueEle)) {\n        this.scrollBottom(valueEle);\n      }\n    }\n  };\n\n  MultiSelect.prototype.focusAtFirstListItem = function () {\n    if (this.ulElement && this.ulElement.querySelector('li.' + dropDownBaseClasses.li)) {\n      var element = void 0;\n\n      if (this.mode === 'CheckBox') {\n        this.removeFocus();\n        return;\n      } else {\n        element = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n      }\n\n      if (element !== null) {\n        this.removeFocus();\n        this.addListFocus(element);\n      }\n    }\n  };\n\n  MultiSelect.prototype.focusAtLastListItem = function (data) {\n    var activeElement;\n\n    if (data) {\n      activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n    } else {\n      if (this.value && this.value.length) {\n        Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n      } else {\n        activeElement = null;\n      }\n    }\n\n    if (activeElement && activeElement.item !== null) {\n      this.addListFocus(activeElement.item);\n      this.scrollBottom(activeElement.item, activeElement.index);\n    }\n  };\n\n  MultiSelect.prototype.getAriaAttributes = function () {\n    var ariaAttributes = {\n      'aria-disabled': 'false',\n      'role': 'combobox',\n      'aria-expanded': 'false'\n    };\n    return ariaAttributes;\n  };\n\n  MultiSelect.prototype.updateListARIA = function () {\n    if (!isNullOrUndefined(this.ulElement)) {\n      attributes(this.ulElement, {\n        'id': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-hidden': 'false'\n      });\n    }\n\n    var disableStatus = this.inputElement.disabled ? true : false;\n\n    if (!this.isPopupOpen()) {\n      attributes(this.inputElement, this.getAriaAttributes());\n    }\n\n    if (disableStatus) {\n      attributes(this.inputElement, {\n        'aria-disabled': 'true'\n      });\n    }\n\n    this.ensureAriaDisabled(disableStatus ? 'true' : 'false');\n  };\n\n  MultiSelect.prototype.ensureAriaDisabled = function (status) {\n    if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n      var attr = this.htmlAttributes;\n      extend(attr, {\n        'aria-disabled': status\n      }, attr);\n      this.setProperties({\n        htmlAttributes: attr\n      }, true);\n    }\n  };\n\n  MultiSelect.prototype.removelastSelection = function (e) {\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n    var value = elements[elements.length - 1].getAttribute('data-value');\n\n    if (!isNullOrUndefined(this.value)) {\n      this.tempValues = this.value.slice();\n    }\n\n    var customValue = this.getFormattedValue(value);\n\n    if (this.allowCustomValue && (value !== 'false' && customValue === false || !isNullOrUndefined(customValue) && customValue.toString() === 'NaN')) {\n      customValue = value;\n    }\n\n    this.removeValue(customValue, e);\n    this.removeChipSelection();\n    this.updateDelimeter(this.delimiterChar, e);\n    this.makeTextBoxEmpty();\n\n    if (this.mainList && this.listData) {\n      this.refreshSelection();\n    }\n\n    this.checkPlaceholderSize();\n  };\n\n  MultiSelect.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n\n    this.renderPopup();\n    this.onPopupShown();\n  };\n\n  MultiSelect.prototype.targetElement = function () {\n    this.targetInputElement = this.inputElement;\n\n    if (this.mode === 'CheckBox' && this.allowFiltering) {\n      this.notify('targetElement', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox'\n      });\n    }\n\n    return this.targetInputElement.value;\n  };\n\n  MultiSelect.prototype.getForQuery = function (valuecheck) {\n    var predicate;\n    var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n\n    for (var i = 0; i < valuecheck.length; i++) {\n      if (i === 0) {\n        predicate = new Predicate(field, 'equal', valuecheck[i]);\n      } else {\n        predicate = predicate.or(field, 'equal', valuecheck[i]);\n      }\n    }\n\n    return this.getQuery(this.query).where(predicate);\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  MultiSelect.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    this.updateSelectElementData(this.allowFiltering); // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    var proxy = this;\n\n    if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n      for (var i = 0; i < this.value.length; i++) {\n        var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, 'li', 'data-value', proxy.value[i]);\n\n        if (!checkEle) {\n          this.value.splice(i, 1);\n          i -= 1;\n        }\n      }\n    }\n\n    this.updateActionList(ulElement, list, e);\n\n    if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n      this.removeFocus();\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  MultiSelect.prototype.updateActionList = function (ulElement, list, e, isUpdated) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    if (this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('selectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox'\n      });\n    }\n\n    if (!this.mainList && !this.mainData) {\n      this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n      this.mainData = list;\n      this.mainListCollection = this.liCollections;\n    } else if (isNullOrUndefined(this.mainData) || this.mainData.length === 0) {\n      this.mainData = list;\n    }\n\n    if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering && this.inputElement.value && this.inputElement.value !== '') {\n      this.checkForCustomValue(this.tempQuery, this.fields);\n      return;\n    }\n\n    if (this.value && this.value.length && (this.mode !== 'CheckBox' && this.inputElement.value.trim() !== '' || this.mode === 'CheckBox' || (this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering && this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === '')) {\n      this.refreshSelection();\n    }\n\n    this.updateListARIA();\n    this.unwireListEvents();\n    this.wireListEvents();\n\n    if (!isNullOrUndefined(this.setInitialValue)) {\n      this.setInitialValue();\n    }\n\n    if (!isNullOrUndefined(this.selectAllAction)) {\n      this.selectAllAction();\n    }\n\n    if (this.setDynValue) {\n      if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.initialTextUpdate();\n      }\n\n      this.initialValueUpdate();\n      this.initialUpdate();\n      this.refreshPlaceHolder();\n\n      if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n        this.updateValueState(null, this.value, null);\n      }\n    }\n\n    this.renderPopup();\n\n    if (this.beforePopupOpen) {\n      this.beforePopupOpen = false;\n      this.onPopupShown(e);\n    }\n  };\n\n  MultiSelect.prototype.refreshSelection = function () {\n    var value;\n    var element;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n    if (!isNullOrUndefined(this.value)) {\n      for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n        value = this.value[index];\n        element = this.findListElement(this.list, 'li', 'data-value', value);\n\n        if (element) {\n          addClass([element], className);\n\n          if (this.hideSelectedItem && element.previousSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group) && (!element.nextElementSibling || element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n            addClass([element.previousElementSibling], className);\n          }\n\n          if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            this.hideGroupItem(value);\n          }\n\n          if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n            removeClass([element], dropDownBaseClasses.focus);\n            var listEle = element.parentElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n\n            if (listEle.length > 0) {\n              addClass([listEle[0]], dropDownBaseClasses.focus);\n            } else {\n              //EJ2-57588 - for this task, we prevent the ul element cloning ( this.ulElement = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n              if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                this.l10nUpdate();\n                addClass([this.list], dropDownBaseClasses.noData);\n              }\n            }\n          }\n\n          element.setAttribute('aria-selected', 'true');\n\n          if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n            var ariaValue = element.firstElementChild.getAttribute('aria-checked');\n\n            if (isNullOrUndefined(ariaValue) || ariaValue === 'false') {\n              var args = {\n                module: 'CheckBoxSelection',\n                enable: this.mode === 'CheckBox',\n                li: element,\n                e: null\n              };\n              this.notify('updatelist', args);\n            }\n          }\n        }\n      }\n    }\n\n    this.checkSelectAll();\n    this.checkMaxSelection();\n  };\n\n  MultiSelect.prototype.hideGroupItem = function (value) {\n    var element;\n    var element1;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n    var i = 0;\n    var j = 0;\n    var temp = true;\n    var temp1 = true;\n\n    do {\n      if (element && element.previousElementSibling && !element.previousElementSibling.classList.contains(HIDE_LIST) && element.previousElementSibling.classList.contains(dropDownBaseClasses.li)) {\n        temp = false;\n      }\n\n      if (!temp || !element || element.previousElementSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)) {\n        i = 10;\n      } else {\n        element = element.previousElementSibling;\n      }\n\n      if (element1 && element1.nextElementSibling && !element1.nextElementSibling.classList.contains(HIDE_LIST) && element1.nextElementSibling.classList.contains(dropDownBaseClasses.li)) {\n        temp1 = false;\n      }\n\n      if (!temp1 || !element1 || element1.nextElementSibling && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group)) {\n        j = 10;\n      } else {\n        element1 = element1.nextElementSibling;\n      }\n    } while (i < 10 || j < 10);\n\n    if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n      addClass([element.previousElementSibling], className);\n    } else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n      removeClass([element.previousElementSibling], className);\n    }\n  };\n\n  MultiSelect.prototype.getValidLi = function () {\n    var liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n    return !isNullOrUndefined(liElement) ? liElement : this.liCollections[0];\n  };\n\n  MultiSelect.prototype.checkSelectAll = function () {\n    var groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n    var listItem = this.list.querySelectorAll('li.e-list-item');\n    var searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n    var searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n\n    if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      searchActiveCount = searchActiveCount - groupItemLength;\n    }\n\n    if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength) && this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'check'\n      });\n    } else if (searchCount !== searchActiveCount && this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'uncheck'\n      });\n    }\n\n    if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n      for (var i = 0; i < listItem.length; i++) {\n        this.findGroupStart(listItem[i]);\n      }\n\n      this.deselectHeader();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.openClick = function (e) {\n    if (!this.openOnClick && this.mode !== 'CheckBox') {\n      if (this.targetElement() !== '') {\n        this.showPopup();\n      } else {\n        this.hidePopup(e);\n      }\n    } else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n      this.showPopup();\n    }\n  };\n\n  MultiSelect.prototype.keyUp = function (e) {\n    if (this.mode === 'CheckBox' && !this.openOnClick) {\n      var char = String.fromCharCode(e.keyCode);\n      var isWordCharacter = char.match(/\\w/);\n\n      if (!isNullOrUndefined(isWordCharacter)) {\n        this.isValidKey = true;\n      }\n    }\n\n    this.isValidKey = this.isPopupOpen() && e.keyCode === 8 || this.isValidKey;\n    this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n\n    if (this.isValidKey) {\n      this.isValidKey = false;\n      this.expandTextbox();\n      this.showOverAllClear();\n\n      switch (e.keyCode) {\n        default:\n          // For filtering works in mobile firefox\n          this.search(e);\n      }\n    }\n  };\n  /**\n   * To filter the multiselect data from given data source by using query\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.filter = function (dataSource, query, fields) {\n    this.isFiltered = true;\n    this.remoteFilterAction = true;\n    this.dataUpdater(dataSource, query, fields);\n  };\n\n  MultiSelect.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n\n    if (this.filterAction) {\n      if (this.targetElement() !== null) {\n        var dataType = this.typeOfData(this.dataSource).typeof;\n\n        if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n          filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n        } else {\n          var fields = this.fields;\n          filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n        }\n      }\n\n      return filterQuery;\n    } else {\n      return query ? query : this.query ? this.query : new Query();\n    }\n  };\n\n  MultiSelect.prototype.dataUpdater = function (dataSource, query, fields) {\n    this.isDataFetched = false;\n\n    if (this.targetElement().trim() === '') {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n\n      if (this.backCommand) {\n        this.remoteCustomValue = false;\n\n        if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n          this.mainData = [];\n        }\n\n        this.onActionComplete(list, this.mainData);\n\n        if (this.value && this.value.length) {\n          this.refreshSelection();\n        }\n\n        if (this.keyCode !== 8) {\n          this.focusAtFirstListItem();\n        }\n\n        this.notify('reOrder', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          e: this\n        });\n      }\n    } else {\n      this.resetList(dataSource, fields, query);\n\n      if (this.allowCustomValue) {\n        if (!(dataSource instanceof DataManager)) {\n          this.checkForCustomValue(query, fields);\n        } else {\n          this.remoteCustomValue = true;\n          this.tempQuery = query;\n        }\n      }\n    }\n\n    this.refreshPopup();\n\n    if (this.mode === 'CheckBox') {\n      this.removeFocus();\n    }\n  };\n\n  MultiSelect.prototype.checkForCustomValue = function (query, fields) {\n    var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n\n    if (this.allowCustomValue && dataChecks) {\n      var value = this.inputElement.value;\n      var field = fields ? fields : this.fields;\n      var customData = !isNullOrUndefined(this.mainData) && this.mainData.length > 0 ? this.mainData[0] : this.mainData;\n\n      if (typeof customData !== 'string' && typeof customData !== 'number' && typeof customData !== 'boolean') {\n        var dataItem = {};\n        setValue(field.text, value, dataItem);\n\n        if (typeof getValue(this.fields.value ? this.fields.value : 'value', customData) === 'number') {\n          setValue(field.value, Math.random(), dataItem);\n        } else {\n          setValue(field.value, value, dataItem);\n        }\n\n        var tempData = JSON.parse(JSON.stringify(this.listData));\n        tempData.splice(0, 0, dataItem);\n        this.resetList(tempData, field, query);\n      } else {\n        var tempData = [this.inputElement.value];\n        tempData[0] = typeof customData === 'number' && !isNaN(parseFloat(tempData[0])) ? parseFloat(tempData[0]) : tempData[0];\n        tempData[0] = typeof customData === 'boolean' ? tempData[0] === 'true' ? true : tempData[0] === 'false' ? false : tempData[0] : tempData[0];\n        this.resetList(tempData, field);\n      }\n    }\n\n    if (this.value && this.value.length) {\n      this.refreshSelection();\n    }\n  };\n\n  MultiSelect.prototype.getNgDirective = function () {\n    return 'EJS-MULTISELECT';\n  };\n\n  MultiSelect.prototype.wrapperClick = function (e) {\n    this.setDynValue = false;\n\n    if (!this.enabled) {\n      return;\n    }\n\n    if (e.target === this.overAllClear) {\n      e.preventDefault();\n      return;\n    }\n\n    if (!this.inputFocus) {\n      this.inputElement.focus();\n    }\n\n    if (!this.readonly) {\n      if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n        if (this.isPopupOpen()) {\n          this.refreshPopup();\n        }\n\n        return;\n      }\n\n      if (!this.isPopupOpen() && (this.openOnClick || this.showDropDownIcon && e.target && e.target.className === dropdownIcon)) {\n        this.showPopup(e);\n      } else {\n        this.hidePopup(e);\n\n        if (this.mode === 'CheckBox') {\n          this.showOverAllClear();\n          this.inputFocus = true;\n\n          if (!this.overAllWrapper.classList.contains(FOCUS)) {\n            this.overAllWrapper.classList.add(FOCUS);\n          }\n        }\n      }\n    }\n\n    if (!(this.targetElement() && this.targetElement() !== '')) {\n      e.preventDefault();\n    }\n  };\n\n  MultiSelect.prototype.enable = function (state) {\n    if (state) {\n      this.overAllWrapper.classList.remove(DISABLED$1);\n      this.inputElement.removeAttribute('disabled');\n      attributes(this.inputElement, {\n        'aria-disabled': 'false'\n      });\n      this.ensureAriaDisabled('false');\n    } else {\n      this.overAllWrapper.classList.add(DISABLED$1);\n      this.inputElement.setAttribute('disabled', 'true');\n      attributes(this.inputElement, {\n        'aria-disabled': 'true'\n      });\n      this.ensureAriaDisabled('true');\n    }\n\n    if (this.enabled !== state) {\n      this.enabled = state;\n    }\n\n    this.hidePopup();\n  };\n\n  MultiSelect.prototype.onBlurHandler = function (eve, isDocClickFromCheck) {\n    var target;\n\n    if (!isNullOrUndefined(eve)) {\n      target = eve.relatedTarget;\n    }\n\n    if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n      if (this.mode !== 'CheckBox') {\n        this.inputElement.focus();\n      } else if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline') || this.overAllWrapper.classList.contains('e-filled'))) {\n        addClass([this.overAllWrapper], 'e-valid-input');\n      }\n\n      return;\n    }\n\n    if (this.floatLabelType === 'Auto' && this.overAllWrapper.classList.contains('e-outline') && this.mode === 'CheckBox' && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      removeClass([this.overAllWrapper], 'e-valid-input');\n    }\n\n    if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n      this.inputFocus = false;\n      this.overAllWrapper.classList.remove(FOCUS);\n      return;\n    }\n\n    if (this.scrollFocusStatus) {\n      if (!isNullOrUndefined(eve)) {\n        eve.preventDefault();\n      }\n\n      this.inputElement.focus();\n      this.scrollFocusStatus = false;\n      return;\n    }\n\n    this.inputFocus = false;\n    this.overAllWrapper.classList.remove(FOCUS);\n\n    if (this.addTagOnBlur) {\n      var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n      var listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n      var allowChipAddition = listLiElement && !listLiElement.classList.contains(className) ? true : false;\n\n      if (allowChipAddition) {\n        this.updateListSelection(listLiElement, eve);\n\n        if (this.mode === 'Delimiter') {\n          this.updateDelimeter(this.delimiterChar);\n        }\n      }\n    }\n\n    this.updateDataList();\n    this.refreshListItems(null);\n\n    if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n      this.updateDelimView();\n    }\n\n    if (this.changeOnBlur) {\n      this.updateValueState(eve, this.value, this.tempValues);\n      this.dispatchEvent(this.hiddenElement, 'change');\n    }\n\n    this.overAllClear.style.display = 'none';\n\n    if (this.isPopupOpen()) {\n      this.hidePopup(eve);\n    }\n\n    this.makeTextBoxEmpty();\n    this.trigger('blur');\n    this.focused = true;\n\n    if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n      this.removeChipFocus();\n    }\n\n    this.removeChipSelection();\n    this.refreshInputHight();\n    floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n    this.refreshPlaceHolder();\n\n    if ((this.allowFiltering || this.enableSelectionOrder === true && this.mode === 'CheckBox') && !isNullOrUndefined(this.mainList)) {\n      this.ulElement = this.mainList;\n    }\n\n    this.checkPlaceholderSize();\n    Input.createSpanElement(this.overAllWrapper, this.createElement);\n    Input.calculateWidth(this.inputElement, this.overAllWrapper);\n\n    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n      this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n  };\n\n  MultiSelect.prototype.checkPlaceholderSize = function () {\n    if (this.showDropDownIcon) {\n      var downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n      this.setPlaceholderSize(downIconWidth);\n    } else {\n      if (!isNullOrUndefined(this.dropIcon)) {\n        this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n      }\n    }\n  };\n\n  MultiSelect.prototype.setPlaceholderSize = function (downIconWidth) {\n    if (isNullOrUndefined(this.value) || this.value.length === 0) {\n      if (this.dropIcon.offsetWidth !== 0) {\n        this.searchWrapper.style.width = 'calc(100% - ' + (downIconWidth + 10) + 'px';\n      } else {\n        addClass([this.searchWrapper], CUSTOM_WIDTH);\n      }\n    } else if (!isNullOrUndefined(this.value)) {\n      this.searchWrapper.removeAttribute('style');\n      removeClass([this.searchWrapper], CUSTOM_WIDTH);\n    }\n  };\n\n  MultiSelect.prototype.refreshInputHight = function () {\n    if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n      this.searchWrapper.classList.remove(ZERO_SIZE);\n    } else {\n      this.searchWrapper.classList.add(ZERO_SIZE);\n    }\n  };\n\n  MultiSelect.prototype.validateValues = function (newValue, oldValue) {\n    return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n  };\n\n  MultiSelect.prototype.updateValueState = function (event, newVal, oldVal) {\n    var newValue = newVal ? newVal : [];\n    var oldValue = oldVal ? oldVal : [];\n\n    if (this.initStatus && this.validateValues(newValue, oldValue)) {\n      var eventArgs = {\n        e: event,\n        oldValue: oldVal,\n        value: newVal,\n        isInteracted: event ? true : false,\n        element: this.element,\n        event: event\n      };\n\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n\n      this.updateTempValue();\n\n      if (!this.changeOnBlur) {\n        this.dispatchEvent(this.hiddenElement, 'change');\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateTempValue = function () {\n    if (!this.value) {\n      this.tempValues = this.value;\n    } else {\n      this.tempValues = this.value.slice();\n    }\n  };\n\n  MultiSelect.prototype.getPagingCount = function () {\n    var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    return Math.round(this.list.offsetHeight / parseInt(height, 10));\n  };\n\n  MultiSelect.prototype.pageUpSelection = function (steps) {\n    var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n    this.addListFocus(previousItem);\n    this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n  };\n\n  MultiSelect.prototype.pageDownSelection = function (steps) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    var list = this.getItems();\n    var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n    this.addListFocus(previousItem);\n    this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n  };\n\n  MultiSelect.prototype.getItems = function () {\n    if (!this.list) {\n      _super.prototype.render.call(this);\n    }\n\n    return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ? this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')') : [];\n  };\n\n  MultiSelect.prototype.focusInHandler = function (e) {\n    if (this.enabled) {\n      this.showOverAllClear();\n      this.inputFocus = true;\n\n      if (this.value && this.value.length) {\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n          this.chipCollectionWrapper.style.display = '';\n        } else {\n          this.showDelimWrapper();\n        }\n\n        if (this.mode !== 'CheckBox') {\n          this.viewWrapper.style.display = 'none';\n        }\n      }\n\n      if (this.mode !== 'CheckBox') {\n        this.searchWrapper.classList.remove(ZERO_SIZE);\n      }\n\n      this.checkPlaceholderSize();\n\n      if (this.focused) {\n        var args = {\n          isInteracted: e ? true : false,\n          event: e\n        };\n        this.trigger('focus', args);\n        this.focused = false;\n      }\n\n      if (!this.overAllWrapper.classList.contains(FOCUS)) {\n        this.overAllWrapper.classList.add(FOCUS);\n      }\n\n      floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n\n      if (this.isPopupOpen()) {\n        this.refreshPopup();\n      }\n\n      Input.calculateWidth(this.inputElement, this.overAllWrapper);\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  MultiSelect.prototype.showDelimWrapper = function () {\n    if (this.mode === 'CheckBox') {\n      this.viewWrapper.style.display = '';\n    } else {\n      this.delimiterWrapper.style.display = '';\n    }\n\n    this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n  };\n\n  MultiSelect.prototype.hideDelimWrapper = function () {\n    this.delimiterWrapper.style.display = 'none';\n    this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n  };\n\n  MultiSelect.prototype.expandTextbox = function () {\n    var size = 5;\n\n    if (this.placeholder) {\n      size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n    }\n\n    if (this.inputElement.value.length > size) {\n      this.inputElement.size = this.inputElement.value.length;\n    } else {\n      this.inputElement.size = size;\n    }\n  };\n\n  MultiSelect.prototype.isPopupOpen = function () {\n    return this.popupWrapper !== null && this.popupWrapper.parentElement !== null;\n  };\n\n  MultiSelect.prototype.refreshPopup = function () {\n    if (this.popupObj && this.mobFilter) {\n      this.popupObj.setProperties({\n        width: this.calcPopupWidth()\n      });\n      this.popupObj.refreshPosition(this.overAllWrapper);\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  MultiSelect.prototype.checkTextLength = function () {\n    return this.targetElement().length < 1;\n  };\n\n  MultiSelect.prototype.popupKeyActions = function (e) {\n    switch (e.keyCode) {\n      case 38:\n        this.hidePopup(e);\n\n        if (this.mode === 'CheckBox') {\n          this.inputElement.focus();\n        }\n\n        e.preventDefault();\n        break;\n\n      case 40:\n        if (!this.isPopupOpen()) {\n          this.showPopup(e);\n          e.preventDefault();\n        }\n\n        break;\n    }\n  };\n\n  MultiSelect.prototype.updateAriaAttribute = function () {\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (!isNullOrUndefined(focusedItem)) {\n      this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n\n      if (this.allowFiltering) {\n        var filterInput = this.popupWrapper.querySelector('.' + FILTERINPUT);\n        filterInput && filterInput.setAttribute('aria-activedescendant', focusedItem.id);\n      } else if (this.mode == \"CheckBox\") {\n        this.overAllWrapper.setAttribute('aria-activedescendant', focusedItem.id);\n      }\n    }\n  };\n\n  MultiSelect.prototype.homeNavigation = function (isHome) {\n    this.removeFocus();\n    var scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n    if (scrollEle.length > 0) {\n      var element = scrollEle[isHome ? 0 : scrollEle.length - 1];\n      element.classList.add(dropDownBaseClasses.focus);\n      this.scrollBottom(element);\n    }\n  };\n\n  MultiSelect.prototype.onKeyDown = function (e) {\n    if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n      return;\n    }\n\n    this.keyCode = e.keyCode;\n    this.keyDownStatus = true;\n\n    if (e.keyCode > 111 && e.keyCode < 124) {\n      return;\n    }\n\n    if (e.altKey) {\n      this.popupKeyActions(e);\n      return;\n    } else if (this.isPopupOpen()) {\n      var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n      var activeIndex = void 0;\n\n      switch (e.keyCode) {\n        case 36:\n        case 35:\n          this.homeNavigation(e.keyCode === 36 ? true : false);\n          break;\n\n        case 33:\n          e.preventDefault();\n\n          if (focusedItem) {\n            this.getIndexByValue(focusedItem.getAttribute('data-value'));\n            this.pageUpSelection(activeIndex - this.getPagingCount());\n            this.updateAriaAttribute();\n          }\n\n          return;\n\n        case 34:\n          e.preventDefault();\n\n          if (focusedItem) {\n            this.getIndexByValue(focusedItem.getAttribute('data-value'));\n            this.pageDownSelection(activeIndex + this.getPagingCount());\n            this.updateAriaAttribute();\n          }\n\n          return;\n\n        case 38:\n          this.arrowUp(e);\n          break;\n\n        case 40:\n          this.arrowDown(e);\n          break;\n\n        case 27:\n          e.preventDefault();\n          this.hidePopup(e);\n\n          if (this.mode === 'CheckBox') {\n            this.inputElement.focus();\n          }\n\n          return;\n\n        case 13:\n          e.preventDefault();\n\n          if (this.mode !== 'CheckBox') {\n            this.selectByKey(e);\n          }\n\n          this.checkPlaceholderSize();\n          return;\n\n        case 32:\n          this.spaceKeySelection(e);\n          return;\n\n        case 9:\n          e.preventDefault();\n          this.hidePopup(e);\n          this.inputElement.focus();\n          this.overAllWrapper.classList.add(FOCUS);\n      }\n    } else {\n      switch (e.keyCode) {\n        case 13:\n        case 9:\n        case 16:\n        case 17:\n        case 20:\n          return;\n\n        case 40:\n          if (this.openOnClick) {\n            this.showPopup();\n          }\n\n          break;\n\n        case 27:\n          e.preventDefault();\n          this.escapeAction();\n          return;\n      }\n    }\n\n    if (this.checkTextLength()) {\n      this.keyNavigation(e);\n    }\n\n    if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n      if (this.allowFiltering) {\n        this.previousFilterText = this.targetElement();\n      }\n\n      this.checkBackCommand(e);\n    }\n\n    this.expandTextbox();\n\n    if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n      this.refreshPopup();\n    }\n  };\n\n  MultiSelect.prototype.arrowDown = function (e) {\n    e.preventDefault();\n    this.moveByList(1);\n    this.keyAction = true;\n\n    if (document.activeElement.classList.contains(FILTERINPUT) || this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list) {\n      EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n    }\n\n    this.updateAriaAttribute();\n  };\n\n  MultiSelect.prototype.arrowUp = function (e) {\n    e.preventDefault();\n    this.keyAction = true;\n    var list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    }\n\n    var focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n    var index = Array.prototype.slice.call(list).indexOf(focuseElem);\n\n    if (index <= 0 && this.mode === 'CheckBox' && this.allowFiltering) {\n      this.keyAction = false;\n      this.notify('inputFocus', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'focus'\n      });\n    }\n\n    this.moveByList(-1);\n    this.updateAriaAttribute();\n  };\n\n  MultiSelect.prototype.spaceKeySelection = function (e) {\n    if (this.mode === 'CheckBox') {\n      if (!document.activeElement.classList.contains(FILTERINPUT)) {\n        e.preventDefault();\n        this.keyAction = true;\n      }\n\n      this.selectByKey(e);\n    }\n\n    this.checkPlaceholderSize();\n  };\n\n  MultiSelect.prototype.checkBackCommand = function (e) {\n    if (e.keyCode === 8 && this.allowFiltering ? this.targetElement() !== this.previousFilterText : this.targetElement() === '') {\n      this.backCommand = false;\n    } else {\n      this.backCommand = true;\n    }\n  };\n\n  MultiSelect.prototype.keyNavigation = function (e) {\n    if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox' && this.value && this.value.length) {\n      switch (e.keyCode) {\n        case 37:\n          //left arrow\n          e.preventDefault();\n          this.moveBy(-1, e);\n          break;\n\n        case 39:\n          //right arrow\n          e.preventDefault();\n          this.moveBy(1, e);\n          break;\n\n        case 8:\n          this.removelastSelection(e);\n          break;\n\n        case 46:\n          //del\n          this.removeSelectedChip(e);\n          break;\n      }\n    } else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n      if (this.value && this.value.length) {\n        e.preventDefault();\n        var temp = this.value[this.value.length - 1];\n        this.removeValue(temp, e);\n        this.updateDelimeter(this.delimiterChar, e);\n        this.focusAtLastListItem(temp);\n      }\n    }\n  };\n\n  MultiSelect.prototype.selectByKey = function (e) {\n    this.removeChipSelection();\n    this.selectListByKey(e);\n\n    if (this.hideSelectedItem) {\n      this.focusAtFirstListItem();\n    }\n  };\n\n  MultiSelect.prototype.escapeAction = function () {\n    var temp = this.tempValues ? this.tempValues.slice() : [];\n\n    if (this.value && this.validateValues(this.value, temp)) {\n      if (this.mode !== 'CheckBox') {\n        this.value = temp;\n        this.initialValueUpdate();\n      }\n\n      if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n        this.chipCollectionWrapper.style.display = '';\n      } else {\n        this.showDelimWrapper();\n      }\n\n      this.refreshPlaceHolder();\n\n      if (this.value.length) {\n        this.showOverAllClear();\n      } else {\n        this.hideOverAllClear();\n      }\n    }\n\n    this.makeTextBoxEmpty();\n  };\n\n  MultiSelect.prototype.scrollBottom = function (selectedLI, activeIndex) {\n    var currentOffset = this.list.offsetHeight;\n    var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n    var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n    var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n    boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n    if (activeIndex === 0) {\n      this.list.scrollTop = 0;\n    } else if (nextBottom > currentOffset) {\n      this.list.scrollTop = nextOffset;\n    } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n      this.list.scrollTop = nextOffset;\n    }\n  };\n\n  MultiSelect.prototype.scrollTop = function (selectedLI, activeIndex) {\n    var nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n    nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n    var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n\n    if (activeIndex === 0) {\n      this.list.scrollTop = 0;\n    } else if (nextOffset < 0) {\n      this.list.scrollTop = this.list.scrollTop + nextOffset;\n    } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n      this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n    }\n  };\n\n  MultiSelect.prototype.selectListByKey = function (e) {\n    var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n    var limit = this.value && this.value.length ? this.value.length : 0;\n    var target;\n\n    if (li !== null) {\n      if (li.classList.contains('e-active')) {\n        limit = limit - 1;\n      }\n\n      if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n        this.updateListSelection(li, e);\n        this.addListFocus(li);\n\n        if (this.mode === 'CheckBox') {\n          this.updateDelimView();\n          this.updateDelimeter(this.delimiterChar, e);\n          this.refreshInputHight();\n          this.checkPlaceholderSize();\n\n          if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            target = li.firstElementChild.lastElementChild;\n            this.findGroupStart(target);\n            this.deselectHeader();\n          }\n        } else {\n          this.updateDelimeter(this.delimiterChar, e);\n        }\n\n        this.makeTextBoxEmpty();\n\n        if (this.mode !== 'CheckBox') {\n          this.refreshListItems(li.textContent);\n        }\n\n        if (!this.changeOnBlur) {\n          this.updateValueState(e, this.value, this.tempValues);\n        }\n\n        this.refreshPopup();\n      } else {\n        if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n          target = li.firstElementChild.lastElementChild;\n\n          if (target.classList.contains('e-check')) {\n            this.selectAllItem(false, e, li);\n          } else {\n            this.selectAllItem(true, e, li);\n          }\n        }\n      }\n\n      this.refreshSelection();\n\n      if (this.closePopupOnSelect) {\n        this.hidePopup(e);\n      }\n    }\n\n    this.refreshPlaceHolder();\n  };\n\n  MultiSelect.prototype.refreshListItems = function (data) {\n    if ((this.allowFiltering || this.mode === 'CheckBox' && this.enableSelectionOrder === true || this.allowCustomValue) && this.mainList && this.listData) {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      this.onActionComplete(list, this.mainData);\n      this.focusAtLastListItem(data);\n\n      if (this.value && this.value.length) {\n        this.refreshSelection();\n      }\n    }\n  };\n\n  MultiSelect.prototype.removeSelectedChip = function (e) {\n    var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n    var temp;\n\n    if (selectedElem !== null) {\n      if (!isNullOrUndefined(this.value)) {\n        this.tempValues = this.value.slice();\n      }\n\n      temp = selectedElem.nextElementSibling;\n\n      if (temp !== null) {\n        this.removeChipSelection();\n        this.addChipSelection(temp, e);\n      }\n\n      this.removeValue(selectedElem.getAttribute('data-value'), e);\n      this.makeTextBoxEmpty();\n    }\n\n    if (this.closePopupOnSelect) {\n      this.hidePopup(e);\n    }\n\n    this.checkPlaceholderSize();\n  };\n\n  MultiSelect.prototype.moveByTop = function (state) {\n    var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n    var index;\n\n    if (elements.length > 1) {\n      this.removeFocus();\n      index = state ? 0 : elements.length - 1;\n      this.addListFocus(elements[index]);\n      this.scrollBottom(elements[index], index);\n    }\n\n    this.updateAriaAttribute();\n  };\n\n  MultiSelect.prototype.moveByList = function (position) {\n    if (this.list) {\n      var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n      if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n        elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n      }\n\n      var selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n      var temp = -1;\n\n      if (elements.length) {\n        for (var index = 0; index < elements.length; index++) {\n          if (elements[index] === selectedElem) {\n            temp = index;\n            break;\n          }\n        }\n\n        if (position > 0) {\n          if (temp < elements.length - 1) {\n            this.removeFocus();\n            this.addListFocus(elements[++temp]);\n            this.updateCheck(elements[temp]);\n            this.scrollBottom(elements[temp], temp);\n          }\n        } else {\n          if (temp > 0) {\n            this.removeFocus();\n            this.addListFocus(elements[--temp]);\n            this.updateCheck(elements[temp]);\n            this.scrollTop(elements[temp], temp);\n          }\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateCheck = function (element) {\n    if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      var checkElement = element.firstElementChild.lastElementChild;\n\n      if (checkElement.classList.contains('e-check')) {\n        element.classList.add('e-active');\n      } else {\n        element.classList.remove('e-active');\n      }\n    }\n  };\n\n  MultiSelect.prototype.moveBy = function (position, e) {\n    var temp;\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n    var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n\n    if (selectedElem === null) {\n      if (position < 0) {\n        this.addChipSelection(elements[elements.length - 1], e);\n      }\n    } else {\n      if (position < 0) {\n        temp = selectedElem.previousElementSibling;\n\n        if (temp !== null) {\n          this.removeChipSelection();\n          this.addChipSelection(temp, e);\n        }\n      } else {\n        temp = selectedElem.nextElementSibling;\n        this.removeChipSelection();\n\n        if (temp !== null) {\n          this.addChipSelection(temp, e);\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.chipClick = function (e) {\n    if (this.enabled) {\n      var elem = closest(e.target, '.' + CHIP$1);\n      this.removeChipSelection();\n      this.addChipSelection(elem, e);\n    }\n  };\n\n  MultiSelect.prototype.removeChipSelection = function () {\n    if (this.chipCollectionWrapper) {\n      this.removeChipFocus();\n    }\n  };\n\n  MultiSelect.prototype.addChipSelection = function (element, e) {\n    addClass([element], CHIP_SELECTED);\n    this.trigger('chipSelection', e);\n  };\n\n  MultiSelect.prototype.onChipRemove = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n\n    if (this.enabled && !this.readonly) {\n      var element = e.target.parentElement;\n      var customVal = element.getAttribute('data-value');\n      var value = this.getFormattedValue(customVal);\n\n      if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n        value = customVal;\n      }\n\n      if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n        this.hidePopup(e);\n      }\n\n      if (!this.inputFocus) {\n        this.inputElement.focus();\n      }\n\n      this.removeValue(value, e);\n\n      if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n        this.onActionComplete(list, this.mainData);\n      }\n\n      this.updateDelimeter(this.delimiterChar, e);\n\n      if (this.placeholder && this.floatLabelType === 'Never') {\n        this.makeTextBoxEmpty();\n        this.checkPlaceholderSize();\n      } else {\n        this.inputElement.value = '';\n      }\n\n      e.preventDefault();\n    }\n  };\n\n  MultiSelect.prototype.makeTextBoxEmpty = function () {\n    this.inputElement.value = '';\n    this.refreshPlaceHolder();\n  };\n\n  MultiSelect.prototype.refreshPlaceHolder = function () {\n    if (this.placeholder && this.floatLabelType === 'Never') {\n      if (this.value && this.value.length || !isNullOrUndefined(this.text) && this.text !== '') {\n        this.inputElement.placeholder = '';\n      } else {\n        this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n      }\n    } else {\n      this.setFloatLabelType();\n    }\n\n    this.expandTextbox();\n  };\n\n  MultiSelect.prototype.removeAllItems = function (value, eve, isClearAll, element, mainElement) {\n    var index = this.value.indexOf(value);\n    var removeVal = this.value.slice(0);\n    removeVal.splice(index, 1);\n    this.setProperties({\n      value: [].concat([], removeVal)\n    }, true);\n    element.setAttribute('aria-selected', 'false');\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    removeClass([element], className);\n    this.notify('activeList', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      li: element,\n      e: this,\n      index: index\n    });\n    this.invokeCheckboxSelection(element, eve, isClearAll);\n    this.updateMainList(true, value, mainElement);\n    this.updateChipStatus();\n  };\n\n  MultiSelect.prototype.invokeCheckboxSelection = function (element, eve, isClearAll) {\n    this.notify('updatelist', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      li: element,\n      e: eve\n    });\n    attributes(this.inputElement, {\n      'aria-activedescendant': element.id\n    });\n\n    if (this.value && this.value.length !== this.mainData.length && this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll)) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'uncheck'\n      });\n    }\n  };\n\n  MultiSelect.prototype.removeValue = function (value, eve, length, isClearAll) {\n    var _this = this;\n\n    var index = this.value.indexOf(this.getFormattedValue(value));\n\n    if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n      index = this.value.indexOf(value.toString());\n    }\n\n    var targetEle = eve && eve.target;\n    isClearAll = isClearAll || targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n    if (index !== -1) {\n      var element_1 = this.findListElement(this.list, 'li', 'data-value', value);\n      var val_1 = this.getDataByValue(value);\n      var eventArgs = {\n        e: eve,\n        item: element_1,\n        itemData: val_1,\n        isInteracted: eve ? true : false,\n        cancel: false\n      };\n      this.trigger('removing', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          _this.removeIndex++;\n        } else {\n          var removeVal = _this.value.slice(0);\n\n          removeVal.splice(index, 1);\n\n          _this.setProperties({\n            value: [].concat([], removeVal)\n          }, true);\n\n          if (element_1 !== null) {\n            var hideElement = _this.findListElement(_this.mainList, 'li', 'data-value', value);\n\n            element_1.setAttribute('aria-selected', 'false');\n            removeClass([element_1], className);\n\n            if (hideElement) {\n              hideElement.setAttribute('aria-selected', 'false');\n              removeClass([element_1, hideElement], className);\n            }\n\n            _this.notify('activeList', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox',\n              li: element_1,\n              e: _this,\n              index: index\n            });\n\n            _this.invokeCheckboxSelection(element_1, eve, isClearAll);\n          }\n\n          if (_this.hideSelectedItem && _this.fields.groupBy && element_1) {\n            _this.hideGroupItem(value);\n          }\n\n          if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox' && _this.isPopupOpen()) {\n            _super.prototype.scrollStop.call(_this);\n          }\n\n          _this.updateMainList(true, value);\n\n          _this.removeChip(value);\n\n          _this.updateChipStatus();\n\n          var limit = _this.value && _this.value.length ? _this.value.length : 0;\n\n          if (limit < _this.maximumSelectionLength) {\n            var collection = _this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n\n            removeClass(collection, 'e-disable');\n          }\n\n          _this.trigger('removed', eventArgs);\n\n          var targetEle_1 = eve && eve.currentTarget;\n          var isSelectAll = targetEle_1 && targetEle_1.classList.contains('e-selectall-parent') ? true : null;\n\n          if (!_this.changeOnBlur && !isClearAll && eve && length && !isSelectAll) {\n            _this.updateValueState(eve, _this.value, _this.tempValues);\n          }\n\n          if (length) {\n            _this.selectAllEventData.push(val_1);\n\n            _this.selectAllEventEle.push(element_1);\n          }\n\n          if (length === 1) {\n            if (!_this.changeOnBlur) {\n              _this.updateValueState(eve, _this.value, _this.tempValues);\n            }\n\n            var args = {\n              event: eve,\n              items: _this.selectAllEventEle,\n              itemData: _this.selectAllEventData,\n              isInteracted: eve ? true : false,\n              isChecked: false\n            };\n\n            _this.trigger('selectedAll', args);\n\n            _this.selectAllEventData = [];\n            _this.selectAllEventEle = [];\n          }\n\n          if (isClearAll && (length === 1 || length === null)) {\n            _this.clearAllCallback(eve, isClearAll);\n          }\n        }\n      });\n    }\n  };\n\n  MultiSelect.prototype.updateMainList = function (state, value, mainElement) {\n    if (this.allowFiltering || this.mode === 'CheckBox') {\n      var element2 = mainElement ? mainElement : this.findListElement(this.mainList, 'li', 'data-value', value);\n\n      if (element2) {\n        if (state) {\n          element2.setAttribute('aria-selected', 'false');\n          removeClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n\n          if (this.mode === 'CheckBox') {\n            element2.firstElementChild.setAttribute('aria-checked', 'false');\n            removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n          }\n        } else {\n          element2.setAttribute('aria-selected', 'true');\n          addClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n\n          if (this.mode === 'CheckBox') {\n            element2.firstElementChild.setAttribute('aria-checked', 'true');\n            addClass([element2.firstElementChild.lastElementChild], 'e-check');\n          }\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.removeChip = function (value) {\n    if (this.chipCollectionWrapper) {\n      var element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n\n      if (element) {\n        remove(element);\n      }\n    }\n  };\n\n  MultiSelect.prototype.setWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.overAllWrapper.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.overAllWrapper.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateChipStatus = function () {\n    if (this.value && this.value.length) {\n      if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n        this.chipCollectionWrapper.style.display = '';\n      }\n\n      if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n        this.showDelimWrapper();\n      }\n\n      this.showOverAllClear();\n    } else {\n      if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n        this.chipCollectionWrapper.style.display = 'none';\n      }\n\n      if (!isNullOrUndefined(this.delimiterWrapper)) {\n        this.delimiterWrapper.style.display = 'none';\n      }\n\n      this.hideOverAllClear();\n    }\n  };\n\n  MultiSelect.prototype.addValue = function (value, text, eve) {\n    if (!this.value) {\n      this.value = [];\n    }\n\n    if (this.value.indexOf(value) < 0) {\n      this.setProperties({\n        value: [].concat([], this.value, [value])\n      }, true);\n    }\n\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.removeFocus();\n\n    if (element) {\n      this.addListFocus(element);\n      this.addListSelection(element);\n    }\n\n    if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n      this.addChip(text, value, eve);\n    }\n\n    if (this.hideSelectedItem && this.fields.groupBy) {\n      this.hideGroupItem(value);\n    }\n\n    this.updateChipStatus();\n    this.checkMaxSelection();\n  };\n\n  MultiSelect.prototype.checkMaxSelection = function () {\n    var limit = this.value && this.value.length ? this.value.length : 0;\n\n    if (limit === this.maximumSelectionLength) {\n      var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n      addClass(collection, 'e-disable');\n    }\n  };\n\n  MultiSelect.prototype.dispatchSelect = function (value, eve, element, isNotTrigger, length) {\n    var _this = this;\n\n    var list = this.listData;\n\n    if (this.initStatus && !isNotTrigger) {\n      var val_2 = this.getDataByValue(value);\n      var eventArgs = {\n        e: eve,\n        item: element,\n        itemData: val_2,\n        isInteracted: eve ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          if (length) {\n            _this.selectAllEventData.push(val_2);\n\n            _this.selectAllEventEle.push(element);\n          }\n\n          if (length === 1) {\n            var args = {\n              event: eve,\n              items: _this.selectAllEventEle,\n              itemData: _this.selectAllEventData,\n              isInteracted: eve ? true : false,\n              isChecked: true\n            };\n\n            _this.trigger('selectedAll', args);\n\n            _this.selectAllEventData = [];\n          }\n\n          if (_this.allowCustomValue && _this.isServerRendered && _this.listData !== list) {\n            _this.listData = list;\n          }\n\n          _this.updateListSelectEventCallback(value, element, eve);\n\n          if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox') {\n            _super.prototype.scrollStop.call(_this);\n          }\n        }\n      });\n    }\n  };\n\n  MultiSelect.prototype.addChip = function (text, value, e) {\n    if (this.chipCollectionWrapper) {\n      this.getChip(text, value, e);\n    }\n  };\n\n  MultiSelect.prototype.removeChipFocus = function () {\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n    var closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n    removeClass(elements, CHIP_SELECTED);\n\n    if (Browser.isDevice) {\n      for (var index = 0; index < closeElements.length; index++) {\n        closeElements[index].style.display = 'none';\n      }\n    }\n  };\n\n  MultiSelect.prototype.onMobileChipInteraction = function (e) {\n    var chipElem = closest(e.target, '.' + CHIP$1);\n    var chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n\n    if (this.enabled && !this.readonly) {\n      if (!chipElem.classList.contains(CHIP_SELECTED)) {\n        this.removeChipFocus();\n        chipClose.style.display = '';\n        chipElem.classList.add(CHIP_SELECTED);\n      }\n\n      this.refreshPopup();\n      e.preventDefault();\n    }\n  };\n\n  MultiSelect.prototype.multiCompiler = function (multiselectTemplate) {\n    var checkTemplate = false;\n\n    if (multiselectTemplate) {\n      try {\n        checkTemplate = selectAll(multiselectTemplate, document).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  MultiSelect.prototype.getChip = function (data, value, e) {\n    var _this = this;\n\n    var itemData = {\n      text: value,\n      value: value\n    };\n    var chip = this.createElement('span', {\n      className: CHIP$1,\n      attrs: {\n        'data-value': value,\n        'title': data\n      }\n    });\n    var compiledString;\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT$1\n    });\n    var chipClose = this.createElement('span', {\n      className: CHIP_CLOSE$1\n    });\n\n    if (this.mainData) {\n      itemData = this.getDataByValue(value);\n    }\n\n    if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n      var valuecheck = this.multiCompiler(this.valueTemplate);\n\n      if (valuecheck) {\n        compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n      } else {\n        compiledString = compile(this.valueTemplate);\n      } // eslint-disable-next-line\n\n\n      var valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n\n      if (valueCompTemp && valueCompTemp.length > 0) {\n        for (var i = 0; i < valueCompTemp.length; i++) {\n          chipContent.appendChild(valueCompTemp[i]);\n        }\n      }\n\n      this.renderReactTemplates();\n    } else if (this.enableHtmlSanitizer) {\n      chipContent.innerText = data;\n    } else {\n      chipContent.innerHTML = data;\n    }\n\n    chip.appendChild(chipContent);\n    var eventArgs = {\n      isInteracted: e ? true : false,\n      itemData: itemData,\n      e: e,\n      setClass: function (classes) {\n        addClass([chip], classes);\n      },\n      cancel: false\n    };\n    this.isPreventChange = this.isAngular && this.preventChange;\n    this.trigger('tagging', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        if (Browser.isDevice) {\n          chip.classList.add(MOBILE_CHIP);\n          append([chipClose], chip);\n          chipClose.style.display = 'none';\n          EventHandler.add(chip, 'click', _this.onMobileChipInteraction, _this);\n        } else {\n          EventHandler.add(chip, 'mousedown', _this.chipClick, _this);\n\n          if (_this.showClearButton) {\n            chip.appendChild(chipClose);\n          }\n        }\n\n        EventHandler.add(chipClose, 'mousedown', _this.onChipRemove, _this);\n\n        _this.chipCollectionWrapper.appendChild(chip);\n\n        if (!_this.changeOnBlur && e) {\n          _this.updateValueState(e, _this.value, _this.tempValues);\n        }\n      }\n    });\n  };\n\n  MultiSelect.prototype.calcPopupWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.componentWrapper.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    return width;\n  };\n\n  MultiSelect.prototype.mouseIn = function () {\n    if (this.enabled && !this.readonly) {\n      this.showOverAllClear();\n    }\n  };\n\n  MultiSelect.prototype.mouseOut = function () {\n    if (!this.inputFocus) {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n\n  MultiSelect.prototype.listOption = function (dataSource, fields) {\n    var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n    var fieldProperty = isNullOrUndefined(fields.properties) ? fields : fields.properties;\n    this.listCurrentOptions = fields.text !== null || fields.value !== null ? {\n      fields: fieldProperty,\n      showIcon: iconCss,\n      ariaAttributes: {\n        groupItemRole: 'presentation'\n      }\n    } : {\n      fields: {\n        value: 'text'\n      }\n    };\n    extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n\n    if (this.mode === 'CheckBox') {\n      this.notify('listoption', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        dataSource: dataSource,\n        fieldProperty: fieldProperty\n      });\n    }\n\n    return this.listCurrentOptions;\n  };\n\n  MultiSelect.prototype.renderPopup = function () {\n    var _this = this;\n\n    if (!this.list) {\n      _super.prototype.render.call(this);\n    }\n\n    if (!this.popupObj) {\n      document.body.appendChild(this.popupWrapper);\n      var checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n\n      if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n        checkboxFilter.remove();\n        this.filterParent = null;\n      }\n\n      var overAllHeight = parseInt(this.popupHeight, 10);\n      this.popupWrapper.style.visibility = 'hidden';\n\n      if (this.headerTemplate) {\n        this.setHeaderTemplate();\n        overAllHeight -= this.header.offsetHeight;\n      }\n\n      append([this.list], this.popupWrapper);\n\n      if (this.footerTemplate) {\n        this.setFooterTemplate();\n        overAllHeight -= this.footer.offsetHeight;\n      }\n\n      if (this.mode === 'CheckBox' && this.showSelectAll) {\n        this.notify('selectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox'\n        });\n        overAllHeight -= this.selectAllHeight;\n      } else if (this.mode === 'CheckBox' && !this.showSelectAll && !this.headerTemplate && !this.footerTemplate) {\n        this.notify('selectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox'\n        });\n        overAllHeight = parseInt(this.popupHeight, 10);\n      } else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n        this.notify('selectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox'\n        });\n        overAllHeight = parseInt(this.popupHeight, 10);\n\n        if (this.headerTemplate && this.header) {\n          overAllHeight -= this.header.offsetHeight;\n        }\n\n        if (this.footerTemplate && this.footer) {\n          overAllHeight -= this.footer.offsetHeight;\n        }\n      }\n\n      if (this.mode === 'CheckBox') {\n        var args = {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          popupElement: this.popupWrapper\n        };\n\n        if (this.allowFiltering) {\n          this.notify('searchBox', args);\n          overAllHeight -= this.searchBoxHeight;\n        }\n\n        addClass([this.popupWrapper], 'e-checkbox');\n      }\n\n      if (this.popupHeight !== 'auto') {\n        this.list.style.maxHeight = formatUnit(overAllHeight);\n        this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n      } else {\n        this.list.style.maxHeight = formatUnit(this.popupHeight);\n      }\n\n      this.popupObj = new Popup(this.popupWrapper, {\n        width: this.calcPopupWidth(),\n        targetType: 'relative',\n        position: {\n          X: 'left',\n          Y: 'bottom'\n        },\n        relateTo: this.overAllWrapper,\n        collision: {\n          X: 'flip',\n          Y: 'flip'\n        },\n        offsetY: 1,\n        enableRtl: this.enableRtl,\n        zIndex: this.zIndex,\n        close: function () {\n          if (_this.popupObj.element.parentElement) {\n            _this.popupObj.unwireScrollEvents(); // For restrict the page scrolling in safari browser\n\n\n            var checkboxFilterInput = _this.popupWrapper.querySelector('.' + FILTERINPUT);\n\n            if (_this.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n              checkboxFilterInput.blur();\n            }\n\n            detach(_this.popupObj.element);\n          }\n        },\n        open: function () {\n          _this.popupObj.resolveCollision();\n\n          if (!_this.isFirstClick) {\n            var ulElement = _this.list.querySelector('ul');\n\n            if (ulElement) {\n              if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== '')) {\n                _this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n              }\n            }\n\n            _this.isFirstClick = true;\n          }\n\n          _this.popupObj.wireScrollEvents();\n\n          if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== '')) {\n            _this.loadTemplate();\n          }\n\n          _this.setScrollPosition();\n\n          if (_this.allowFiltering) {\n            _this.notify('inputFocus', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox',\n              value: 'focus'\n            });\n          }\n        },\n        targetExitViewport: function () {\n          if (!Browser.isDevice) {\n            _this.hidePopup();\n          }\n        }\n      });\n\n      if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n        this.notify('deviceSearchBox', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox'\n        });\n      }\n\n      this.popupObj.close();\n      this.popupWrapper.style.visibility = '';\n    }\n  };\n\n  MultiSelect.prototype.setHeaderTemplate = function () {\n    var compiledString;\n\n    if (this.header) {\n      this.header.remove();\n    }\n\n    this.header = this.createElement('div');\n    addClass([this.header], HEADER$1);\n    var headercheck = this.multiCompiler(this.headerTemplate);\n\n    if (headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    } // eslint-disable-next-line\n\n\n    var elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n    if (elements && elements.length > 0) {\n      for (var temp = 0; temp < elements.length; temp++) {\n        this.header.appendChild(elements[temp]);\n      }\n    }\n\n    if (this.mode === 'CheckBox' && this.showSelectAll) {\n      prepend([this.header], this.popupWrapper);\n    } else {\n      append([this.header], this.popupWrapper);\n    }\n\n    EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n  };\n\n  MultiSelect.prototype.setFooterTemplate = function () {\n    var compiledString;\n\n    if (this.footer) {\n      this.footer.remove();\n    }\n\n    this.footer = this.createElement('div');\n    addClass([this.footer], FOOTER$1);\n    var footercheck = this.multiCompiler(this.footerTemplate);\n\n    if (footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    } // eslint-disable-next-line\n\n\n    var elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n    if (elements && elements.length > 0) {\n      for (var temp = 0; temp < elements.length; temp++) {\n        this.footer.appendChild(elements[temp]);\n      }\n    }\n\n    append([this.footer], this.popupWrapper);\n    EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n  };\n\n  MultiSelect.prototype.clearAll = function (e) {\n    if (this.enabled && !this.readonly) {\n      var temp = void 0;\n\n      if (this.value && this.value.length > 0) {\n        var liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n\n        if (liElement && liElement.length > 0) {\n          this.selectAllItems(false, e);\n        } else {\n          this.removeIndex = 0;\n\n          for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n            this.removeValue(temp, e, null, true);\n          }\n        }\n\n        this.selectedElementID = null;\n        this.inputElement.removeAttribute('aria-activedescendant');\n      } else {\n        this.clearAllCallback(e);\n      }\n    }\n  };\n\n  MultiSelect.prototype.clearAllCallback = function (e, isClearAll) {\n    var tempValues = this.value ? this.value.slice() : [];\n\n    if (this.mainList && this.listData && (this.allowFiltering && this.mode !== 'CheckBox' || this.allowCustomValue)) {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      this.onActionComplete(list, this.mainData);\n    }\n\n    this.focusAtFirstListItem();\n    this.updateDelimeter(this.delimiterChar, e);\n\n    if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n      this.updateDelimView();\n    }\n\n    if (this.inputElement.value !== '') {\n      this.makeTextBoxEmpty();\n      this.search(null);\n    }\n\n    this.checkPlaceholderSize();\n\n    if (this.isPopupOpen()) {\n      this.refreshPopup();\n    }\n\n    if (!this.inputFocus) {\n      if (this.changeOnBlur) {\n        this.updateValueState(e, this.value, tempValues);\n      }\n\n      if (this.mode !== 'CheckBox') {\n        this.inputElement.focus();\n      }\n    }\n\n    if (this.mode === 'CheckBox') {\n      this.refreshPlaceHolder();\n      this.refreshInputHight();\n\n      if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.updateValueState(e, this.value, this.tempValues);\n      }\n    }\n\n    if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      this.updateValueState(e, this.value, this.tempValues);\n    }\n\n    if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n    }\n\n    e.preventDefault();\n  };\n\n  MultiSelect.prototype.windowResize = function () {\n    this.refreshPopup();\n\n    if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n      this.updateDelimView();\n    }\n  };\n\n  MultiSelect.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement && e.target === formElement) {\n      var textVal = this.element.tagName === this.getNgDirective() ? null : this.element.getAttribute('data-initial-value');\n      this.text = textVal;\n    }\n  };\n\n  MultiSelect.prototype.wireEvent = function () {\n    EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n    EventHandler.add(window, 'resize', this.windowResize, this);\n    EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n    EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n    EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n\n    if (this.mode !== 'CheckBox') {\n      EventHandler.add(this.inputElement, 'input', this.onInput, this);\n    }\n\n    EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n    EventHandler.add(this.componentWrapper, 'mouseover', this.mouseIn, this);\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n    EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n    EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n  };\n\n  MultiSelect.prototype.onInput = function (e) {\n    if (this.keyDownStatus) {\n      this.isValidKey = true;\n    } else {\n      this.isValidKey = false;\n    }\n\n    this.keyDownStatus = false; // For Filtering works in mobile firefox\n\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.search(e);\n    }\n  };\n\n  MultiSelect.prototype.pasteHandler = function (event) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.expandTextbox();\n\n      _this.search(event);\n    });\n  };\n\n  MultiSelect.prototype.search = function (e) {\n    var _this = this;\n\n    if (!isNullOrUndefined(e)) {\n      this.keyCode = e.keyCode;\n    }\n\n    if (!this.isPopupOpen() && this.openOnClick) {\n      this.showPopup(e);\n    }\n\n    this.openClick(e);\n\n    if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && e.keyCode !== 8) {\n      this.focusAtFirstListItem();\n    } else {\n      var text = this.targetElement();\n\n      if (this.allowFiltering) {\n        var eventArgs_1 = {\n          preventDefaultAction: false,\n          text: this.targetElement(),\n          updateData: function (dataSource, query, fields) {\n            if (eventArgs_1.cancel) {\n              return;\n            }\n\n            _this.isFiltered = true;\n            _this.remoteFilterAction = true;\n\n            _this.dataUpdater(dataSource, query, fields);\n          },\n          event: e,\n          cancel: false\n        };\n        this.trigger('filtering', eventArgs_1, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            if (!_this.isFiltered && !eventArgs.preventDefaultAction) {\n              _this.filterAction = true;\n\n              _this.dataUpdater(_this.dataSource, null, _this.fields);\n            }\n          }\n        });\n      } else if (this.allowCustomValue) {\n        var query = new Query();\n        query = text !== '' ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n        this.dataUpdater(this.mainData, query, this.fields);\n      } else {\n        var liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n        var activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n\n        if (activeElement && activeElement.item !== null) {\n          this.addListFocus(activeElement.item);\n          this.list.scrollTop = activeElement.item.offsetHeight * activeElement.index;\n        } else if (this.targetElement() !== '') {\n          this.removeFocus();\n        } else {\n          this.focusAtFirstListItem();\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.preRender = function () {\n    if (this.allowFiltering === null) {\n      this.allowFiltering = this.mode === 'CheckBox' ? true : false;\n    }\n\n    this.initializeData();\n    this.updateDataAttribute(this.htmlAttributes);\n\n    _super.prototype.preRender.call(this);\n  };\n\n  MultiSelect.prototype.getLocaleName = function () {\n    return 'multi-select';\n  };\n\n  MultiSelect.prototype.initializeData = function () {\n    this.mainListCollection = [];\n    this.beforePopupOpen = false;\n    this.filterAction = false;\n    this.remoteFilterAction = false;\n    this.isFirstClick = false;\n    this.mobFilter = true;\n    this.isFiltered = false;\n    this.focused = true;\n    this.initial = true;\n    this.backCommand = true;\n  };\n\n  MultiSelect.prototype.updateData = function (delimiterChar, e) {\n    var data = '';\n    var delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n    var text = [];\n    var temp;\n    var tempData = this.listData;\n    this.listData = this.mainData;\n    this.hiddenElement.innerHTML = '';\n\n    if (!isNullOrUndefined(this.value)) {\n      for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n        var listValue = this.findListElement(!isNullOrUndefined(this.mainList) ? this.mainList : this.ulElement, 'li', 'data-value', this.value[index]);\n\n        if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n          this.value.splice(index, 1);\n          index -= 1;\n        } else {\n          if (this.listData) {\n            temp = this.getTextByValue(this.value[index]);\n          } else {\n            temp = this.value[index];\n          }\n\n          data += temp + delimiterChar + ' ';\n          text.push(temp);\n        }\n\n        this.hiddenElement.innerHTML += '<option selected value =\"' + this.value[index] + '\">' + index + '</option>';\n      }\n    }\n\n    this.setProperties({\n      text: text.toString()\n    }, true);\n\n    if (delim) {\n      this.updateWrapperText(this.delimiterWrapper, data);\n      this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n      this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n      this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n    }\n\n    var targetEle = e && e.target;\n    var isClearAll = targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n\n    if (!this.changeOnBlur && e && !isClearAll || this.isSelectAll) {\n      this.isSelectAll = false;\n      this.updateValueState(e, this.value, this.tempValues);\n    }\n\n    this.listData = tempData;\n    this.addValidInputClass();\n  };\n\n  MultiSelect.prototype.initialTextUpdate = function () {\n    if (!isNullOrUndefined(this.text)) {\n      var textArr = this.text.split(this.delimiterChar);\n      var textVal = [];\n\n      for (var index = 0; textArr.length > index; index++) {\n        var val = this.getValueByText(textArr[index]);\n\n        if (!isNullOrUndefined(val)) {\n          textVal.push(val);\n        } else if (this.allowCustomValue) {\n          textVal.push(textArr[index]);\n        }\n      }\n\n      if (textVal && textVal.length) {\n        this.setProperties({\n          value: textVal\n        }, true);\n      }\n    } else {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n\n  MultiSelect.prototype.renderList = function (isEmptyData) {\n    if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n      isEmptyData = true;\n    }\n\n    _super.prototype.render.call(this, null, isEmptyData);\n\n    this.unwireListEvents();\n    this.wireListEvents();\n  };\n\n  MultiSelect.prototype.initialValueUpdate = function () {\n    if (this.list) {\n      var text = void 0;\n      var element = void 0;\n      var value = void 0;\n\n      if (this.chipCollectionWrapper) {\n        this.chipCollectionWrapper.innerHTML = '';\n      }\n\n      this.removeListSelection();\n\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          value = this.value[index];\n          element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n          text = this.getTextByValue(value);\n\n          if (element && element.getAttribute('aria-selected') !== 'true' || element && element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem && (this.mode === 'Box' || this.mode === 'Default')) {\n            this.addChip(text, value);\n            this.addListSelection(element);\n          } else if (value && this.allowCustomValue) {\n            var indexItem = this.listData.length;\n            var newValue = {};\n            setValue(this.fields.text, value, newValue);\n            setValue(this.fields.value, value, newValue);\n            var noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n            this.addItem(newValue, indexItem);\n            element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n\n            if (this.popupWrapper.contains(noDataEle)) {\n              this.list.setAttribute('style', noDataEle.getAttribute('style'));\n              this.popupWrapper.replaceChild(this.list, noDataEle);\n              this.wireListEvents();\n            }\n\n            this.addChip(text, value);\n            this.addListSelection(element);\n          }\n        }\n      }\n\n      if (this.mode === 'CheckBox') {\n        this.updateDelimView();\n\n        if (this.changeOnBlur) {\n          this.updateValueState(null, this.value, this.tempValues);\n        }\n\n        this.updateDelimeter(this.delimiterChar);\n        this.refreshInputHight();\n      } else {\n        this.updateDelimeter(this.delimiterChar);\n      }\n\n      if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n        this.notify('checkSelectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'uncheck'\n        });\n      }\n\n      if (this.mode === 'Box' || this.mode === 'Default' && this.inputFocus) {\n        this.chipCollectionWrapper.style.display = '';\n      } else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n        this.showDelimWrapper();\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.updateActionCompleteData = function (li, item) {\n    if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n      this.mainList = this.ulElement;\n\n      if (this.hideSelectedItem) {\n        addClass([li], HIDE_LIST);\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.updateAddItemList = function (list, itemCount) {\n    if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n      this.list = list;\n      this.mainList = this.ulElement = list.querySelector('ul');\n      remove(this.popupWrapper.querySelector('.e-content'));\n      this.popupObj = null;\n      this.renderPopup();\n    } else if (this.allowCustomValue) {\n      this.list = list;\n      this.mainList = this.ulElement = list.querySelector('ul');\n    }\n  };\n\n  MultiSelect.prototype.updateDataList = function () {\n    if (this.mainList && this.ulElement && !(this.isFiltered || this.filterAction || this.targetElement().trim())) {\n      var isDynamicGroupItemUpdate = this.mainList.childElementCount < this.ulElement.childElementCount;\n      var isReactTemplateUpdate = this.ulElement.childElementCount > 0 && this.ulElement.children[0].childElementCount > 0 && this.mainList.children[0].childElementCount < this.ulElement.children[0].childElementCount;\n      var isAngularTemplateUpdate = this.itemTemplate && this.ulElement.childElementCount > 0 && !(this.ulElement.childElementCount < this.mainList.childElementCount) && (this.ulElement.children[0].childElementCount > 0 || this.fields.groupBy && this.ulElement.children[1] && this.ulElement.children[1].childElementCount > 0);\n\n      if (isDynamicGroupItemUpdate || isReactTemplateUpdate || isAngularTemplateUpdate) {\n        //EJ2-57748 - for this task, we prevent the ul element cloning ( this.mainList = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n        this.mainList = this.ulElement;\n      }\n    }\n  };\n\n  MultiSelect.prototype.isValidLI = function (li) {\n    return li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) && li.classList.contains(dropDownBaseClasses.li);\n  };\n\n  MultiSelect.prototype.updateListSelection = function (li, e, length) {\n    var customVal = li.getAttribute('data-value');\n    var value = this.getFormattedValue(customVal);\n\n    if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n      value = customVal;\n    }\n\n    this.removeHover();\n\n    if (!this.value || this.value.indexOf(value) === -1) {\n      this.dispatchSelect(value, e, li, li.getAttribute('aria-selected') === 'true', length);\n    } else {\n      this.removeValue(value, e, length);\n    }\n  };\n\n  MultiSelect.prototype.updateListSelectEventCallback = function (value, li, e) {\n    var _this = this;\n\n    var text = this.getTextByValue(value);\n\n    if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n      var temp_1 = li.cloneNode(true);\n      var fieldValue = this.fields.value ? this.fields.value : 'value';\n\n      if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n        value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n      }\n\n      var data_1 = this.getDataByValue(value);\n      var eventArgs = {\n        newData: data_1,\n        cancel: false\n      };\n      this.trigger('customValueSelection', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          append([temp_1], _this.mainList);\n\n          _this.mainData.push(data_1);\n\n          _this.remoteCustomValue = false;\n\n          _this.addValue(value, text, e);\n        }\n      });\n    } else {\n      this.remoteCustomValue = false;\n      this.addValue(value, text, e);\n    }\n  };\n\n  MultiSelect.prototype.removeListSelection = function () {\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    var selectedItems = this.list.querySelectorAll('.' + className);\n    var temp = selectedItems.length;\n\n    if (selectedItems && selectedItems.length) {\n      removeClass(selectedItems, className);\n\n      while (temp > 0) {\n        selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n        temp--;\n      }\n    }\n\n    if (!isNullOrUndefined(this.mainList)) {\n      var selectItems = this.mainList.querySelectorAll('.' + className);\n      var temp1 = selectItems.length;\n\n      if (selectItems && selectItems.length) {\n        removeClass(selectItems, className);\n\n        while (temp1 > 0) {\n          selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n\n          if (this.mode === 'CheckBox') {\n            if (selectedItems && selectedItems.length > temp1 - 1) {\n              selectedItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n              removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n            }\n\n            selectItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n            removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n          }\n\n          temp1--;\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.removeHover = function () {\n    var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n    if (hoveredItem && hoveredItem.length) {\n      removeClass(hoveredItem, dropDownBaseClasses.hover);\n    }\n  };\n\n  MultiSelect.prototype.removeFocus = function () {\n    if (this.list && this.mainList) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n      var mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.focus);\n        removeClass(mainlist, dropDownBaseClasses.focus);\n      }\n    }\n  };\n\n  MultiSelect.prototype.addListHover = function (li) {\n    if (this.enabled && this.isValidLI(li)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    } else {\n      if (li !== null && li.classList.contains('e-list-group-item') && this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        this.removeHover();\n        addClass([li], dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  MultiSelect.prototype.addListFocus = function (element) {\n    if (this.enabled && this.isValidLI(element)) {\n      this.removeFocus();\n      addClass([element], dropDownBaseClasses.focus);\n    } else {\n      if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        addClass([element], dropDownBaseClasses.focus);\n      }\n    }\n  };\n\n  MultiSelect.prototype.addListSelection = function (element, mainElement) {\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n    if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n      addClass([element], className);\n      this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n      element.setAttribute('aria-selected', 'true');\n\n      if (this.mode === 'CheckBox') {\n        var ariaCheck = element.firstElementChild.getAttribute('aria-checked');\n\n        if (ariaCheck === 'false' || isNullOrUndefined(ariaCheck)) {\n          this.notify('updatelist', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            li: element,\n            e: this\n          });\n        }\n      }\n\n      this.notify('activeList', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        li: element,\n        e: this\n      });\n\n      if (this.chipCollectionWrapper) {\n        this.removeChipSelection();\n      }\n\n      this.selectedElementID = element.id;\n    }\n  };\n\n  MultiSelect.prototype.updateDelimeter = function (delimChar, e) {\n    this.updateData(delimChar, e);\n  };\n\n  MultiSelect.prototype.onMouseClick = function (e) {\n    var _this = this;\n\n    this.keyCode = null;\n    this.scrollFocusStatus = false;\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n    var headerLi = closest(target, '.' + dropDownBaseClasses.group);\n\n    if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n      target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild : e.target;\n\n      if (target.classList.contains('e-check')) {\n        this.selectAllItem(false, e);\n        target.classList.remove('e-check');\n        target.classList.remove('e-stop');\n        closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n        target.setAttribute('aria-selected', 'false');\n      } else {\n        this.selectAllItem(true, e);\n        target.classList.remove('e-stop');\n        target.classList.add('e-check');\n        closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n        target.setAttribute('aria-selected', 'true');\n      }\n\n      this.refreshSelection();\n      this.checkSelectAll();\n    } else {\n      if (this.isValidLI(li)) {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n\n        if (li.classList.contains('e-active')) {\n          limit = limit - 1;\n        }\n\n        if (limit < this.maximumSelectionLength) {\n          this.updateListSelection(li, e);\n          this.checkPlaceholderSize();\n          this.addListFocus(li);\n\n          if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n            if (this.mode !== 'CheckBox') {\n              this.focusAtLastListItem(li.getAttribute('data-value'));\n              this.refreshSelection();\n            }\n          } else {\n            this.makeTextBoxEmpty();\n          }\n        }\n\n        if (this.mode === 'CheckBox') {\n          this.updateDelimView();\n\n          if (this.value && this.value.length > 50) {\n            setTimeout(function () {\n              _this.updateDelimeter(_this.delimiterChar, e);\n            }, 0);\n          } else {\n            this.updateDelimeter(this.delimiterChar, e);\n          }\n\n          this.refreshInputHight();\n        } else {\n          this.updateDelimeter(this.delimiterChar, e);\n        }\n\n        this.checkSelectAll();\n        this.refreshPopup();\n\n        if (this.hideSelectedItem) {\n          this.focusAtFirstListItem();\n        }\n\n        if (this.closePopupOnSelect) {\n          this.hidePopup(e);\n        } else {\n          e.preventDefault();\n        }\n\n        this.makeTextBoxEmpty();\n        this.findGroupStart(target);\n\n        if (this.mode !== 'CheckBox') {\n          this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n        }\n      } else {\n        e.preventDefault();\n      }\n\n      this.refreshPlaceHolder();\n      this.deselectHeader();\n    }\n  };\n\n  MultiSelect.prototype.findGroupStart = function (target) {\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      var count = 0;\n      var liChecked = 0;\n      var liUnchecked = 0;\n      var groupValues = void 0;\n\n      if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n        while (!target.getElementsByClassName('e-frame').length) {\n          target = target.parentElement;\n        }\n      }\n\n      if (target.classList.contains('e-frame')) {\n        target = target.parentElement.parentElement;\n      }\n\n      groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n      groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n\n      while (!target.classList.contains('e-list-group-item')) {\n        if (target.classList.contains('e-list-icon')) {\n          target = target.parentElement;\n        }\n\n        target = target.previousElementSibling;\n\n        if (target == null) {\n          break;\n        }\n      }\n\n      this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n    }\n  };\n\n  MultiSelect.prototype.findGroupAttrtibutes = function (listElement, checked, unChecked, count, position) {\n    while (!listElement.classList.contains('e-list-group-item')) {\n      if (listElement.classList.contains('e-list-icon')) {\n        listElement = listElement.parentElement;\n      }\n\n      if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') && listElement.classList.contains('e-list-item')) {\n        checked++;\n      } else if (listElement.classList.contains('e-list-item')) {\n        unChecked++;\n      }\n\n      count++;\n      listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n\n      if (listElement == null) {\n        break;\n      }\n    }\n\n    return [checked, unChecked, count];\n  };\n\n  MultiSelect.prototype.updateCheckBox = function (groupHeader, checked, unChecked, count) {\n    if (groupHeader === null) {\n      return;\n    }\n\n    var checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n\n    if (count === checked) {\n      checkBoxElement.classList.remove('e-stop');\n      checkBoxElement.classList.add('e-check');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      groupHeader.setAttribute('aria-selected', 'true');\n    } else if (count === unChecked) {\n      checkBoxElement.classList.remove('e-check');\n      checkBoxElement.classList.remove('e-stop');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n      groupHeader.setAttribute('aria-selected', 'false');\n    } else if (this.maximumSelectionLength === checked - 1) {\n      checkBoxElement.classList.remove('e-stop');\n      groupHeader.setAttribute('aria-selected', 'true');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      checkBoxElement.classList.add('e-check');\n    } else {\n      checkBoxElement.classList.remove('e-check');\n      checkBoxElement.classList.add('e-stop');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      groupHeader.setAttribute('aria-selected', 'false');\n    }\n  };\n\n  MultiSelect.prototype.deselectHeader = function () {\n    var limit = this.value && this.value.length ? this.value.length : 0;\n    var collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n\n    if (limit < this.maximumSelectionLength) {\n      removeClass(collection, 'e-disable');\n    }\n\n    if (limit === this.maximumSelectionLength) {\n      addClass(collection, 'e-disable');\n    }\n  };\n\n  MultiSelect.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n\n    if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy) && this.enableGroupCheckBox) {\n      currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n    }\n\n    this.addListHover(currentLi);\n  };\n\n  MultiSelect.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n\n  MultiSelect.prototype.onListMouseDown = function (e) {\n    e.preventDefault();\n    this.scrollFocusStatus = true;\n  };\n\n  MultiSelect.prototype.onDocumentClick = function (e) {\n    if (this.mode !== 'CheckBox') {\n      var target = e.target;\n\n      if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) && !this.overAllWrapper.contains(e.target)) {\n        this.scrollFocusStatus = false;\n      } else {\n        this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.inputElement;\n      }\n    }\n  };\n\n  MultiSelect.prototype.wireListEvents = function () {\n    if (!isNullOrUndefined(this.list)) {\n      EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n      EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n      EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n      EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n  };\n\n  MultiSelect.prototype.unwireListEvents = function () {\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n\n    if (this.list) {\n      EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n      EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n      EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n      EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    }\n  };\n\n  MultiSelect.prototype.hideOverAllClear = function () {\n    if (!this.value || !this.value.length || this.inputElement.value === '') {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n\n  MultiSelect.prototype.showOverAllClear = function () {\n    if ((this.value && this.value.length || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n      this.overAllClear.style.display = '';\n    } else {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n  /**\n   * Sets the focus to widget for interaction.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.focusIn = function () {\n    if (document.activeElement !== this.inputElement && this.enabled) {\n      this.inputElement.focus();\n    }\n  };\n  /**\n   * Remove the focus from widget, if the widget is in focus state.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.focusOut = function () {\n    if (document.activeElement === this.inputElement && this.enabled) {\n      this.inputElement.blur();\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      var filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n\n      if (this.overAllClear.style.display !== 'none' || filterClear) {\n        this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n      } else {\n        this.spinnerElement = this.createElement('span', {\n          className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1\n        });\n        this.componentWrapper.appendChild(this.spinnerElement);\n      }\n\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      addClass([this.spinnerElement], DISABLE_ICON);\n      showSpinner(this.spinnerElement);\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], DISABLE_ICON);\n\n      if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n        detach(this.spinnerElement);\n      } else {\n        this.spinnerElement.innerHTML = '';\n      }\n\n      this.spinnerElement = null;\n    }\n  };\n\n  MultiSelect.prototype.updateWrapperText = function (wrapperType, wrapperData) {\n    if (this.valueTemplate || !this.enableHtmlSanitizer) {\n      wrapperType.innerHTML = wrapperData;\n    } else {\n      wrapperType.innerText = SanitizeHtmlHelper.sanitize(wrapperData);\n    }\n  };\n\n  MultiSelect.prototype.updateDelimView = function () {\n    if (this.delimiterWrapper) {\n      this.hideDelimWrapper();\n    }\n\n    if (this.chipCollectionWrapper) {\n      this.chipCollectionWrapper.style.display = 'none';\n    }\n\n    this.viewWrapper.style.display = '';\n    this.viewWrapper.style.width = '';\n    this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n\n    if (this.value && this.value.length) {\n      var data = '';\n      var temp = void 0;\n      var tempData = void 0;\n      var tempIndex = 1;\n      var wrapperleng = void 0;\n      var remaining = void 0;\n      var downIconWidth = 0;\n      var overAllContainer = void 0;\n      this.updateWrapperText(this.viewWrapper, data);\n      var l10nLocale = {\n        noRecordsTemplate: 'No records found',\n        actionFailureTemplate: 'Request failed',\n        overflowCountTemplate: '+${count} more..',\n        totalCountTemplate: '${count} selected'\n      };\n      var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n\n      if (l10n.getConstant('actionFailureTemplate') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.locale);\n      }\n\n      if (l10n.getConstant('noRecordsTemplate') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.locale);\n      }\n\n      var remainContent = l10n.getConstant('overflowCountTemplate');\n      var totalContent = l10n.getConstant('totalCountTemplate');\n      var raminElement = this.createElement('span', {\n        className: REMAIN_WRAPPER$1\n      });\n      var remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n      raminElement.innerText = remainCompildTemp;\n      this.viewWrapper.appendChild(raminElement);\n      this.renderReactTemplates();\n      var remainSize = raminElement.offsetWidth;\n      remove(raminElement);\n\n      if (this.showDropDownIcon) {\n        downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n      }\n\n      this.checkClearIconWidth();\n\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          data += index === 0 ? '' : this.delimiterChar + ' ';\n          temp = this.getOverflowVal(index);\n          data += temp;\n          temp = this.viewWrapper.innerHTML;\n          this.updateWrapperText(this.viewWrapper, data);\n          wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n          overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n\n          if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n            if (tempData !== undefined && tempData !== '') {\n              temp = tempData;\n              index = tempIndex + 1;\n            }\n\n            this.updateWrapperText(this.viewWrapper, temp);\n            remaining = this.value.length - index;\n            wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n\n            while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.innerHTML !== '') {\n              var textArr = [];\n              this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n              remaining = this.value.length;\n              wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n            }\n\n            break;\n          } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n            tempData = data;\n            tempIndex = index;\n          } else if (index === 0) {\n            tempData = '';\n            tempIndex = -1;\n          }\n        }\n      }\n\n      if (remaining > 0) {\n        var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n        this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n        this.updateRemainWidth(this.viewWrapper, totalWidth);\n        this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n      }\n    } else {\n      this.viewWrapper.innerHTML = '';\n      this.viewWrapper.style.display = 'none';\n    }\n  };\n\n  MultiSelect.prototype.checkClearIconWidth = function () {\n    if (this.showClearButton) {\n      this.clearIconWidth = this.overAllClear.offsetWidth;\n    }\n  };\n\n  MultiSelect.prototype.updateRemainWidth = function (viewWrapper, totalWidth) {\n    if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < viewWrapper.offsetWidth + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10) + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)) {\n      viewWrapper.style.width = totalWidth + 'px';\n    }\n  };\n\n  MultiSelect.prototype.updateRemainTemplate = function (raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n    if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n      viewWrapper.removeChild(viewWrapper.firstChild);\n    }\n\n    raminElement.innerHTML = '';\n    var remainTemp = remainContent.replace('${count}', remaining.toString());\n    var totalTemp = totalContent.replace('${count}', remaining.toString());\n    raminElement.innerText = viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 ? remainTemp : totalTemp;\n\n    if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n      viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n    } else {\n      viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n      this.updateRemainWidth(viewWrapper, totalWidth);\n    }\n\n    return raminElement;\n  };\n\n  MultiSelect.prototype.updateRemainingText = function (raminElement, downIconWidth, remaining, remainContent, totalContent) {\n    var overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n    var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n\n    if (wrapperleng + downIconWidth >= overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n      while (wrapperleng + downIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n        var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n        textArr.pop();\n        this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n\n        if (this.viewWrapper.firstChild.nodeValue === '') {\n          this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n        }\n\n        remaining++;\n        wrapperleng = this.viewWrapper.offsetWidth;\n      }\n\n      var totalWidth = overAllContainer - downIconWidth;\n      this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n    }\n  };\n\n  MultiSelect.prototype.getOverflowVal = function (index) {\n    var temp;\n\n    if (this.mainData && this.mainData.length) {\n      if (this.mode === 'CheckBox') {\n        var newTemp = this.listData;\n        this.listData = this.mainData;\n        temp = this.getTextByValue(this.value[index]);\n        this.listData = newTemp;\n      } else {\n        temp = this.getTextByValue(this.value[index]);\n      }\n    } else {\n      temp = this.value[index];\n    }\n\n    return temp;\n  };\n\n  MultiSelect.prototype.unWireEvent = function () {\n    EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n    EventHandler.remove(window, 'resize', this.windowResize);\n    EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n    EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n\n    if (this.mode !== 'CheckBox') {\n      EventHandler.remove(this.inputElement, 'input', this.onInput);\n    }\n\n    EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n\n    EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n    EventHandler.remove(this.componentWrapper, 'mouseover', this.mouseIn);\n    EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n    EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n    EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n  };\n\n  MultiSelect.prototype.selectAllItem = function (state, event, list) {\n    var li;\n    li = this.list.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n\n    if (this.value && this.value.length && event && event.target && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n      li = this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n    }\n\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      var target = event ? this.groupTemplate ? closest(event.target, '.e-list-group-item') : event.target : null;\n      target = event && event.keyCode === 32 ? list : target;\n      target = target && target.classList.contains('e-frame') ? target.parentElement.parentElement : target;\n\n      if (target && target.classList.contains('e-list-group-item')) {\n        var listElement = target.nextElementSibling;\n\n        if (isNullOrUndefined(listElement)) {\n          return;\n        }\n\n        while (listElement.classList.contains('e-list-item')) {\n          if (state) {\n            if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n              var selectionLimit = this.value && this.value.length ? this.value.length : 0;\n\n              if (listElement.classList.contains('e-active')) {\n                selectionLimit -= 1;\n              }\n\n              if (selectionLimit < this.maximumSelectionLength) {\n                this.updateListSelection(listElement, event);\n              }\n            }\n          } else {\n            if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n              this.updateListSelection(listElement, event);\n            }\n          }\n\n          listElement = listElement.nextElementSibling;\n\n          if (listElement == null) {\n            break;\n          }\n        }\n\n        if (target.classList.contains('e-list-group-item')) {\n          var focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n\n          if (focusedElement) {\n            focusedElement.classList.remove('e-item-focus');\n          }\n\n          if (state) {\n            target.classList.add('e-active');\n          } else {\n            target.classList.remove('e-active');\n          }\n\n          target.classList.add('e-item-focus');\n        }\n\n        this.textboxValueUpdate();\n        this.checkPlaceholderSize();\n\n        if (!this.changeOnBlur && event) {\n          this.updateValueState(event, this.value, this.tempValues);\n        }\n      } else {\n        this.updateValue(event, li, state);\n      }\n    } else {\n      this.updateValue(event, li, state);\n    }\n  };\n\n  MultiSelect.prototype.updateValue = function (event, li, state) {\n    var _this = this;\n\n    var length = li.length;\n    var beforeSelectArgs = {\n      event: event,\n      items: state ? li : [],\n      itemData: state ? this.listData : [],\n      isInteracted: event ? true : false,\n      isChecked: state,\n      preventSelectEvent: false\n    };\n    this.trigger('beforeSelectAll', beforeSelectArgs);\n\n    if (li && li.length) {\n      var index_1 = 0;\n      var count_1 = 0;\n\n      if (this.enableGroupCheckBox) {\n        count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n      } else {\n        count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n      }\n\n      if (!beforeSelectArgs.preventSelectEvent) {\n        while (index_1 < length && index_1 <= 50 && index_1 < count_1) {\n          this.updateListSelection(li[index_1], event, length - index_1);\n\n          if (this.enableGroupCheckBox) {\n            this.findGroupStart(li[index_1]);\n          }\n\n          index_1++;\n        }\n\n        if (length > 50) {\n          setTimeout(function () {\n            while (index_1 < length && index_1 < count_1) {\n              _this.updateListSelection(li[index_1], event, length - index_1);\n\n              if (_this.enableGroupCheckBox) {\n                _this.findGroupStart(li[index_1]);\n              }\n\n              index_1++;\n            }\n\n            _this.updatedataValueItems(event);\n\n            if (!_this.changeOnBlur) {\n              _this.updateValueState(event, _this.value, _this.tempValues);\n\n              _this.isSelectAll = _this.isSelectAll ? !_this.isSelectAll : _this.isSelectAll;\n            }\n\n            _this.updateHiddenElement();\n          }, 0);\n        }\n      } else {\n        for (var i = 0; i < li.length && i < count_1; i++) {\n          this.removeHover();\n          var customVal = li[i].getAttribute('data-value');\n          var value = this.getFormattedValue(customVal);\n          var mainElement = this.mainList ? this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n\n          if (state) {\n            this.value = !this.value ? [] : this.value;\n\n            if (this.value.indexOf(value) < 0) {\n              this.setProperties({\n                value: [].concat([], this.value, [value])\n              }, true);\n            }\n\n            this.removeFocus();\n            this.addListSelection(li[i], mainElement);\n            this.updateChipStatus();\n            this.checkMaxSelection();\n          } else {\n            this.removeAllItems(value, event, false, li[i], mainElement);\n          }\n\n          if (this.enableGroupCheckBox) {\n            this.findGroupStart(li[i]);\n          }\n        }\n\n        if (!state) {\n          var limit = this.value && this.value.length ? this.value.length : 0;\n\n          if (limit < this.maximumSelectionLength) {\n            var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n            removeClass(collection, 'e-disable');\n          }\n        }\n\n        var args = {\n          event: event,\n          items: state ? li : [],\n          itemData: state ? this.listData : [],\n          isInteracted: event ? true : false,\n          isChecked: state\n        };\n        this.trigger('selectedAll', args);\n      }\n    }\n\n    this.updatedataValueItems(event);\n    this.checkPlaceholderSize();\n\n    if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n      if (!this.changeOnBlur) {\n        this.updateValueState(event, this.value, this.tempValues);\n        this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n      }\n\n      this.updateHiddenElement();\n    }\n  };\n\n  MultiSelect.prototype.updateHiddenElement = function () {\n    var _this = this;\n\n    var hiddenValue = '';\n    var wrapperText = '';\n    var data = '';\n    var text = [];\n\n    if (this.mode === 'CheckBox') {\n      this.value.map(function (value, index) {\n        hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n\n        if (_this.listData) {\n          data = _this.getTextByValue(value);\n        } else {\n          data = value;\n        }\n\n        wrapperText += data + _this.delimiterChar + ' ';\n        text.push(data);\n      });\n      this.hiddenElement.innerHTML = hiddenValue;\n      this.updateWrapperText(this.delimiterWrapper, wrapperText);\n      this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n      this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n      this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n      this.setProperties({\n        text: text.toString()\n      }, true);\n      this.refreshInputHight();\n      this.refreshPlaceHolder();\n    }\n  };\n\n  MultiSelect.prototype.updatedataValueItems = function (event) {\n    this.deselectHeader();\n    this.textboxValueUpdate(event);\n  };\n\n  MultiSelect.prototype.textboxValueUpdate = function (event) {\n    var isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent') || closest(event.target, '.e-close-hooker'));\n\n    if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n      this.updateDelimView();\n    } else {\n      this.searchWrapper.classList.remove(ZERO_SIZE);\n    }\n\n    if (this.mode === 'CheckBox') {\n      this.updateDelimView();\n\n      if (!(isRemoveAll || this.isSelectAll)) {\n        this.updateDelimeter(this.delimiterChar, event);\n      }\n\n      this.refreshInputHight();\n    } else {\n      this.updateDelimeter(this.delimiterChar, event);\n    }\n\n    this.refreshPlaceHolder();\n  };\n\n  MultiSelect.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.updateDataSource = function (prop) {\n    if (isNullOrUndefined(this.list)) {\n      this.renderPopup();\n    } else {\n      this.resetList(this.dataSource);\n    }\n\n    if (this.value && this.value.length) {\n      this.setProperties({\n        'value': this.value\n      });\n      this.refreshSelection();\n    }\n  };\n\n  MultiSelect.prototype.onLoadSelect = function () {\n    this.setDynValue = true;\n    this.renderPopup();\n  };\n\n  MultiSelect.prototype.selectAllItems = function (state, event) {\n    var _this = this;\n\n    if (isNullOrUndefined(this.list)) {\n      this.selectAllAction = function () {\n        if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n          var args = {\n            module: 'CheckBoxSelection',\n            enable: _this.mode === 'CheckBox',\n            value: state ? 'check' : 'uncheck'\n          };\n\n          _this.notify('checkSelectAll', args);\n        }\n\n        _this.selectAllItem(state, event);\n\n        _this.selectAllAction = null;\n      };\n\n      _super.prototype.render.call(this);\n    } else {\n      this.selectAllAction = null;\n\n      if (this.mode === 'CheckBox' && this.showSelectAll) {\n        var args = {\n          value: state ? 'check' : 'uncheck',\n          enable: this.mode === 'CheckBox',\n          module: 'CheckBoxSelection'\n        };\n        this.notify('checkSelectAll', args);\n      }\n\n      this.selectAllItem(state, event);\n    }\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  MultiSelect.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n   * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n      this.mainList = null;\n      this.mainData = null;\n      this.isFirstClick = false;\n      this.isDynamicDataChange = true;\n    }\n\n    if (this.getModuleName() === 'multiselect') {\n      this.filterAction = false;\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          if (this.mode === 'CheckBox' && this.showSelectAll) {\n            if (!isNullOrUndefined(this.popupObj)) {\n              this.popupObj.destroy();\n              this.popupObj = null;\n            }\n\n            this.renderPopup();\n          }\n\n          break;\n\n        case 'htmlAttributes':\n          this.updateHTMLAttribute();\n          break;\n\n        case 'showClearButton':\n          this.updateClearButton(newProp.showClearButton);\n          break;\n\n        case 'text':\n          this.updateVal(this.value, this.value, 'text');\n          break;\n\n        case 'value':\n          this.updateVal(this.value, oldProp.value, 'value');\n          this.addValidInputClass();\n\n          if (!this.closePopupOnSelect && this.isPopupOpen()) {\n            this.refreshPopup();\n          }\n\n          this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n          break;\n\n        case 'width':\n          this.setWidth(newProp.width);\n          this.popupObj.setProperties({\n            width: this.calcPopupWidth()\n          });\n          break;\n\n        case 'placeholder':\n          this.refreshPlaceHolder();\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this.allowFiltering) {\n            this.notify('filterBarPlaceholder', {\n              filterBarPlaceholder: newProp.filterBarPlaceholder\n            });\n          }\n\n          break;\n\n        case 'delimiterChar':\n          if (this.mode !== 'Box') {\n            this.updateDelimView();\n          }\n\n          this.updateData(newProp.delimiterChar);\n          break;\n\n        case 'cssClass':\n          this.updateOldPropCssClass(oldProp.cssClass);\n          this.updateCssClass();\n          Input.calculateWidth(this.inputElement.parentElement.parentElement, this.overAllWrapper);\n          break;\n\n        case 'enableRtl':\n          this.enableRTL(newProp.enableRtl);\n\n          _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n\n          break;\n\n        case 'readonly':\n          this.updateReadonly(newProp.readonly);\n          this.hidePopup();\n          break;\n\n        case 'enabled':\n          this.hidePopup();\n          this.enable(newProp.enabled);\n          break;\n\n        case 'showSelectAll':\n          if (this.popupObj) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n          }\n\n          this.renderPopup();\n          break;\n\n        case 'showDropDownIcon':\n          this.dropDownIcon();\n          break;\n\n        case 'floatLabelType':\n          this.setFloatLabelType();\n          this.addValidInputClass();\n          Input.createSpanElement(this.overAllWrapper, this.createElement);\n          Input.calculateWidth(this.inputElement.parentElement.parentElement, this.overAllWrapper);\n\n          if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n          }\n\n          break;\n\n        case 'enableSelectionOrder':\n          break;\n\n        case 'selectAllText':\n          this.notify('selectAllText', false);\n          break;\n\n        case 'popupHeight':\n          if (this.popupObj) {\n            var overAllHeight = parseInt(this.popupHeight, 10);\n\n            if (this.popupHeight !== 'auto') {\n              this.list.style.maxHeight = formatUnit(overAllHeight);\n              this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n            } else {\n              this.list.style.maxHeight = formatUnit(this.popupHeight);\n            }\n          }\n\n          break;\n\n        case 'headerTemplate':\n        case 'footerTemplate':\n          this.reInitializePoup();\n          break;\n\n        case 'allowFiltering':\n          if (this.mode === 'CheckBox' && this.popupObj) {\n            this.reInitializePoup();\n          }\n\n          this.updateSelectElementData(this.allowFiltering);\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var msProps = this.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this, msProps.newProperty, msProps.oldProperty);\n          }\n          break;\n      }\n    }\n  };\n\n  MultiSelect.prototype.reInitializePoup = function () {\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      this.popupObj = null;\n    }\n\n    this.renderPopup();\n  };\n\n  MultiSelect.prototype.presentItemValue = function (ulElement) {\n    var valuecheck = [];\n\n    for (var i = 0; i < this.value.length; i++) {\n      var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, 'li', 'data-value', this.value[i]);\n\n      if (!checkEle) {\n        valuecheck.push(this.value[i]);\n      }\n    }\n\n    return valuecheck;\n  };\n\n  MultiSelect.prototype.addNonPresentItems = function (valuecheck, ulElement, list, event) {\n    var _this = this;\n\n    this.dataSource.executeQuery(this.getForQuery(valuecheck)).then(function (e) {\n      _this.addItem(e.result, list.length);\n\n      _this.updateActionList(ulElement, list, event);\n    });\n  };\n\n  MultiSelect.prototype.updateVal = function (newProp, oldProp, prop) {\n    if (!this.list) {\n      this.onLoadSelect();\n    } else if (this.dataSource instanceof DataManager && (!this.listData || !(this.mainList && this.mainData))) {\n      this.onLoadSelect();\n    } else {\n      var valuecheck = [];\n\n      if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n        valuecheck = this.presentItemValue(this.ulElement);\n      }\n\n      if (prop == 'value' && valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value) && this.listData != null) {\n        this.mainData = null;\n        this.setDynValue = true;\n        this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n      } else {\n        if (prop === 'text') {\n          this.initialTextUpdate();\n          newProp = this.value;\n        }\n\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n          this.tempValues = oldProp;\n        } // eslint-disable-next-line\n\n\n        if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus && this.isPopupOpen() && this.mainData !== this.listData) {\n          var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n          this.onActionComplete(list, this.mainData);\n        }\n\n        this.initialValueUpdate();\n\n        if (this.mode !== 'Box' && !this.inputFocus) {\n          this.updateDelimView();\n        }\n\n        if (!this.inputFocus) {\n          this.refreshInputHight();\n        }\n\n        this.refreshPlaceHolder();\n\n        if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n          this.updateValueState(null, newProp, oldProp);\n        }\n\n        this.checkPlaceholderSize();\n      }\n    }\n\n    if (!this.changeOnBlur) {\n      this.updateValueState(null, newProp, oldProp);\n    }\n  };\n  /**\n   * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Hides the popup, if the popup in a open state.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.hidePopup = function (e) {\n    var _this = this;\n\n    var delay = 100;\n\n    if (this.isPopupOpen()) {\n      var animModel = {\n        name: 'FadeOut',\n        duration: 100,\n        delay: delay ? delay : 0\n      };\n      var eventArgs = {\n        popup: this.popupObj,\n        cancel: false,\n        animation: animModel,\n        event: e || null\n      };\n      this.trigger('close', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          if (_this.fields.groupBy && _this.mode !== 'CheckBox' && _this.fixedHeaderElement) {\n            remove(_this.fixedHeaderElement);\n            _this.fixedHeaderElement = null;\n          }\n\n          _this.beforePopupOpen = false;\n\n          _this.overAllWrapper.classList.remove(iconAnimation);\n\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n\n          attributes(_this.inputElement, {\n            'aria-expanded': 'false'\n          });\n\n          _this.inputElement.removeAttribute('aria-owns');\n\n          _this.inputElement.removeAttribute('aria-activedescendant');\n\n          if (_this.allowFiltering) {\n            _this.notify('inputFocus', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox',\n              value: 'clear'\n            });\n          }\n\n          _this.popupObj.hide();\n\n          removeClass([document.body, _this.popupObj.element], 'e-popup-full-page');\n          EventHandler.remove(_this.list, 'keydown', _this.onKeyDown);\n        }\n      });\n    }\n  };\n  /**\n   * Shows the popup, if the popup in a closed state.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.showPopup = function (e) {\n    var _this = this;\n\n    if (!this.enabled) {\n      return;\n    }\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        if (!_this.ulElement) {\n          _this.beforePopupOpen = true;\n\n          _super.prototype.render.call(_this, e);\n\n          if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n            _this.notify('popupFullScreen', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox'\n            });\n          }\n\n          return;\n        }\n\n        if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n          _this.notify('popupFullScreen', {\n            module: 'CheckBoxSelection',\n            enable: _this.mode === 'CheckBox'\n          });\n        }\n\n        var mainLiLength = _this.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n\n        var liLength = _this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n\n        if (mainLiLength > 0 && mainLiLength === liLength && liLength === _this.mainData.length && !(_this.targetElement() !== '' && _this.allowCustomValue)) {\n          _this.beforePopupOpen = false;\n          return;\n        }\n\n        _this.onPopupShown(e);\n      }\n    });\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected/deselected.\n   * parameter\n   * `true`   - Selects entire list items.\n   * `false`  - Un Selects entire list items.\n   *\n   * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.selectAll = function (state) {\n    this.isSelectAll = true;\n    this.selectAllItems(state);\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  MultiSelect.prototype.getModuleName = function () {\n    return 'multiselect';\n  };\n  /**\n   * Allows you to clear the selected values from the Multiselect component.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.clear = function () {\n    var _this = this;\n\n    this.selectAll(false);\n\n    if (this.value && this.value.length) {\n      setTimeout(function () {\n        _this.setProperties({\n          value: null\n        }, true);\n      }, 0);\n    } else {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.render = function () {\n    this.setDynValue = this.initStatus = false;\n    this.isSelectAll = false;\n    this.searchWrapper = this.createElement('span', {\n      className: SEARCHBOX_WRAPPER + ' ' + (this.mode === 'Box' ? BOX_ELEMENT : '')\n    });\n    this.viewWrapper = this.createElement('span', {\n      className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER,\n      styles: 'display:none;'\n    });\n    this.overAllClear = this.createElement('span', {\n      className: CLOSEICON_CLASS$1,\n      styles: 'display:none;'\n    });\n    this.componentWrapper = this.createElement('div', {\n      className: ELEMENT_WRAPPER\n    });\n    this.overAllWrapper = this.createElement('div', {\n      className: OVER_ALL_WRAPPER\n    });\n\n    if (this.mode === 'CheckBox') {\n      addClass([this.overAllWrapper], 'e-checkbox');\n    }\n\n    if (Browser.isDevice) {\n      this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n    }\n\n    this.setWidth(this.width);\n    this.overAllWrapper.appendChild(this.componentWrapper);\n    this.popupWrapper = this.createElement('div', {\n      id: this.element.id + '_popup',\n      className: POPUP_WRAPPER\n    });\n\n    if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n      this.delimiterWrapper = this.createElement('span', {\n        className: DELIMITER_WRAPPER,\n        styles: 'display:none'\n      });\n      this.componentWrapper.appendChild(this.delimiterWrapper);\n    } else {\n      this.chipCollectionWrapper = this.createElement('span', {\n        className: CHIP_WRAPPER$1,\n        styles: 'display:none'\n      });\n\n      if (this.mode === 'Default') {\n        this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n      } else if (this.mode === 'Box') {\n        this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n      }\n\n      this.componentWrapper.appendChild(this.chipCollectionWrapper);\n    }\n\n    if (this.mode !== 'Box') {\n      this.componentWrapper.appendChild(this.viewWrapper);\n    }\n\n    this.componentWrapper.appendChild(this.searchWrapper);\n\n    if (this.showClearButton && !Browser.isDevice) {\n      this.componentWrapper.appendChild(this.overAllClear);\n    } else {\n      this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n    }\n\n    this.dropDownIcon();\n    this.inputElement = this.createElement('input', {\n      className: INPUT_ELEMENT,\n      attrs: {\n        spellcheck: 'false',\n        type: 'text',\n        autocomplete: 'off',\n        tabindex: '0'\n      }\n    });\n\n    if (this.mode === 'Default' || this.mode === 'Box') {\n      this.inputElement.setAttribute('aria-describedby', this.chipCollectionWrapper.id);\n    }\n\n    if (this.element.tagName !== this.getNgDirective()) {\n      this.element.style.display = 'none';\n    }\n\n    if (this.element.tagName === this.getNgDirective()) {\n      this.element.appendChild(this.overAllWrapper);\n      this.searchWrapper.appendChild(this.inputElement);\n    } else {\n      this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n      this.searchWrapper.appendChild(this.inputElement);\n      this.searchWrapper.appendChild(this.element);\n      this.element.removeAttribute('tabindex');\n    }\n\n    if (this.floatLabelType !== 'Never') {\n      createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n    } else if (this.floatLabelType === 'Never') {\n      this.refreshPlaceHolder();\n    }\n\n    this.addValidInputClass();\n    this.element.style.opacity = '';\n    var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n    this.element.id = id;\n    this.hiddenElement = this.createElement('select', {\n      attrs: {\n        'aria-hidden': 'true',\n        'class': HIDDEN_ELEMENT,\n        'tabindex': '-1',\n        'multiple': ''\n      }\n    });\n    this.componentWrapper.appendChild(this.hiddenElement);\n    this.validationAttribute(this.element, this.hiddenElement);\n\n    if (this.mode !== 'CheckBox') {\n      this.hideOverAllClear();\n    }\n\n    this.wireEvent();\n    this.enable(this.enabled);\n    this.enableRTL(this.enableRtl);\n    this.checkInitialValue();\n\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n\n    Input.createSpanElement(this.overAllWrapper, this.createElement);\n    Input.calculateWidth(this.inputElement.parentElement.parentElement, this.overAllWrapper);\n\n    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n      this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n\n    this.renderComplete();\n  };\n\n  MultiSelect.prototype.checkInitialValue = function () {\n    var _this = this;\n\n    var isData = this.dataSource instanceof Array ? this.dataSource.length > 0 : !isNullOrUndefined(this.dataSource);\n\n    if (!(this.value && this.value.length) && isNullOrUndefined(this.text) && !isData && this.element.tagName === 'SELECT' && this.element.options.length > 0) {\n      var optionsElement = this.element.options;\n      var valueCol = [];\n      var textCol = '';\n\n      for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n        var opt = optionsElement[index];\n\n        if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n          if (opt.getAttribute('value')) {\n            valueCol.push(opt.getAttribute('value'));\n          } else {\n            textCol += opt.text + this.delimiterChar;\n          }\n        }\n      }\n\n      if (valueCol.length > 0) {\n        this.setProperties({\n          value: valueCol\n        }, true);\n      } else if (textCol !== '') {\n        this.setProperties({\n          text: textCol\n        }, true);\n      }\n\n      if (valueCol.length > 0 || textCol !== '') {\n        this.refreshInputHight();\n        this.refreshPlaceHolder();\n      }\n    }\n\n    if (this.value && this.value.length || !isNullOrUndefined(this.text)) {\n      if (!this.list) {\n        _super.prototype.render.call(this);\n      }\n    }\n\n    if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      this.initialTextUpdate();\n    }\n\n    if (this.value && this.value.length) {\n      if (!(this.dataSource instanceof DataManager)) {\n        this.initialValueUpdate();\n        this.initialUpdate();\n      } else {\n        this.setInitialValue = function () {\n          _this.initStatus = false;\n\n          _this.initialValueUpdate();\n\n          _this.initialUpdate();\n\n          _this.setInitialValue = null;\n          _this.initStatus = true;\n        };\n      }\n\n      this.updateTempValue();\n    } else {\n      this.initialUpdate();\n    }\n\n    this.initStatus = true;\n    this.checkAutoFocus();\n\n    if (!isNullOrUndefined(this.text)) {\n      this.element.setAttribute('data-initial-value', this.text);\n    }\n  };\n\n  MultiSelect.prototype.checkAutoFocus = function () {\n    if (this.element.hasAttribute('autofocus')) {\n      this.inputElement.focus();\n    }\n  };\n\n  MultiSelect.prototype.setFloatLabelType = function () {\n    removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n\n    if (this.floatLabelType !== 'Never') {\n      createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n    }\n  };\n\n  MultiSelect.prototype.addValidInputClass = function () {\n    if (!isNullOrUndefined(this.value) && this.value.length || this.floatLabelType === 'Always') {\n      addClass([this.overAllWrapper], 'e-valid-input');\n    } else {\n      removeClass([this.overAllWrapper], 'e-valid-input');\n    }\n  };\n\n  MultiSelect.prototype.dropDownIcon = function () {\n    if (this.showDropDownIcon) {\n      this.dropIcon = this.createElement('span', {\n        className: dropdownIcon\n      });\n      this.componentWrapper.appendChild(this.dropIcon);\n      addClass([this.componentWrapper], ['e-down-icon']);\n    } else {\n      if (!isNullOrUndefined(this.dropIcon)) {\n        this.dropIcon.parentElement.removeChild(this.dropIcon);\n        removeClass([this.componentWrapper], ['e-down-icon']);\n      }\n    }\n  };\n\n  MultiSelect.prototype.initialUpdate = function () {\n    if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n      this.updateDelimView();\n    }\n\n    this.updateCssClass();\n    this.updateHTMLAttribute();\n    this.updateReadonly(this.readonly);\n    this.refreshInputHight();\n    this.checkPlaceholderSize();\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.destroy = function () {\n    // eslint-disable-next-line\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    if (this.popupObj) {\n      this.popupObj.hide();\n    }\n\n    this.notify(destroy, {});\n    this.unwireListEvents();\n    this.unWireEvent();\n    this.list = null;\n    this.popupObj = null;\n    this.mainList = null;\n    this.mainData = null;\n    this.filterParent = null;\n    this.ulElement = null;\n    this.mainListCollection = null;\n\n    _super.prototype.destroy.call(this);\n\n    var temp = ['readonly', 'aria-disabled', 'placeholder'];\n    var length = temp.length;\n\n    while (length > 0) {\n      this.inputElement.removeAttribute(temp[length - 1]);\n      length--;\n    }\n\n    this.element.removeAttribute('data-initial-value');\n    this.element.style.display = 'block';\n\n    if (this.overAllWrapper.parentElement) {\n      if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n        remove(this.overAllWrapper);\n      } else {\n        this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n        remove(this.overAllWrapper);\n      }\n    }\n  };\n\n  __decorate$5([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], MultiSelect.prototype, \"fields\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enablePersistence\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"groupTemplate\", void 0);\n\n  __decorate$5([Property('No records found')], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate$5([Property('Request failed')], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate$5([Property('None')], MultiSelect.prototype, \"sortOrder\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"enabled\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate$5([Property([])], MultiSelect.prototype, \"dataSource\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"query\", void 0);\n\n  __decorate$5([Property('StartsWith')], MultiSelect.prototype, \"filterType\", void 0);\n\n  __decorate$5([Property(1000)], MultiSelect.prototype, \"zIndex\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"ignoreAccent\", void 0);\n\n  __decorate$5([Property()], MultiSelect.prototype, \"locale\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"cssClass\", void 0);\n\n  __decorate$5([Property('100%')], MultiSelect.prototype, \"width\", void 0);\n\n  __decorate$5([Property('300px')], MultiSelect.prototype, \"popupHeight\", void 0);\n\n  __decorate$5([Property('100%')], MultiSelect.prototype, \"popupWidth\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"placeholder\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$5([Property({})], MultiSelect.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"valueTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"headerTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"footerTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"itemTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"allowFiltering\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"changeOnBlur\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"allowCustomValue\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"showClearButton\", void 0);\n\n  __decorate$5([Property(1000)], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"readonly\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"text\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"value\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n\n  __decorate$5([Property('Default')], MultiSelect.prototype, \"mode\", void 0);\n\n  __decorate$5([Property(',')], MultiSelect.prototype, \"delimiterChar\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"ignoreCase\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n\n  __decorate$5([Property('Never')], MultiSelect.prototype, \"floatLabelType\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"showSelectAll\", void 0);\n\n  __decorate$5([Property('Select All')], MultiSelect.prototype, \"selectAllText\", void 0);\n\n  __decorate$5([Property('Unselect All')], MultiSelect.prototype, \"unSelectAllText\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"openOnClick\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"change\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"removing\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"removed\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"selectedAll\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"beforeOpen\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"open\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"close\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"blur\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"focus\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"chipSelection\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"filtering\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"tagging\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"customValueSelection\", void 0);\n\n  MultiSelect = __decorate$5([NotifyPropertyChanges], MultiSelect);\n  return MultiSelect;\n}(DropDownBase);\n\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME$1 = 'e-frame';\nvar CHECK$1 = 'e-check';\nvar CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\n\nvar CheckBoxSelection =\n/** @__PURE__ @class */\nfunction () {\n  function CheckBoxSelection(parent) {\n    this.activeLi = [];\n    this.activeEle = [];\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n\n  CheckBoxSelection.prototype.getModuleName = function () {\n    return 'CheckBoxSelection';\n  };\n\n  CheckBoxSelection.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on('updatelist', this.listSelection, this);\n    this.parent.on('listoption', this.listOption, this);\n    this.parent.on('selectAll', this.setSelectAll, this);\n    this.parent.on('checkSelectAll', this.checkSelectAll, this);\n    this.parent.on('searchBox', this.setSearchBox, this);\n    this.parent.on('blur', this.onBlurHandler, this);\n    this.parent.on('targetElement', this.targetElement, this);\n    this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n    this.parent.on('inputFocus', this.getFocus, this);\n    this.parent.on('reOrder', this.setReorder, this);\n    this.parent.on('activeList', this.getActiveList, this);\n    this.parent.on('selectAllText', this.setLocale, this);\n    this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n    EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n    this.parent.on('addItem', this.checboxCreate, this);\n    this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n  };\n\n  CheckBoxSelection.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off('updatelist', this.listSelection);\n    this.parent.off('listoption', this.listOption);\n    this.parent.off('selectAll', this.setSelectAll);\n    this.parent.off('checkSelectAll', this.checkSelectAll);\n    this.parent.off('searchBox', this.setSearchBox);\n    this.parent.off('blur', this.onBlurHandler);\n    this.parent.off('targetElement', this.targetElement);\n    this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n    this.parent.off('inputFocus', this.getFocus);\n    this.parent.off('reOrder', this.setReorder);\n    this.parent.off('activeList', this.getActiveList);\n    this.parent.off('selectAllText', this.setLocale);\n    this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n    this.parent.off('addItem', this.checboxCreate);\n    this.parent.off('popupFullScreen', this.setPopupFullScreen);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.listOption = function (args) {\n    var _this = this;\n\n    if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n      };\n    } else {\n      var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n  };\n\n  CheckBoxSelection.prototype.setPlaceholder = function (props) {\n    Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n  };\n\n  CheckBoxSelection.prototype.checboxCreate = function (e) {\n    var item;\n\n    if (!isNullOrUndefined(e.item)) {\n      item = e.item;\n    } else {\n      item = e;\n    }\n\n    if (this.parent.enableGroupCheckBox || item.className !== 'e-list-group-item ' && item.className !== 'e-list-group-item') {\n      var checkboxEle = createCheckBox(this.parent.createElement, true);\n      var icon = select('div.' + ICON, item);\n      item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n      select('.' + CHECKBOXFRAME$1, checkboxEle);\n\n      if (this.parent.enableGroupCheckBox) {\n        this.parent.popupWrapper.classList.add('e-multiselect-group');\n      }\n\n      return item;\n    } else {\n      return item;\n    }\n  };\n\n  CheckBoxSelection.prototype.setSelectAll = function () {\n    if (this.parent.showSelectAll) {\n      if (isNullOrUndefined(this.checkAllParent)) {\n        this.checkAllParent = this.parent.createElement('div', {\n          className: checkAllParent\n        });\n        this.selectAllSpan = this.parent.createElement('span', {\n          className: 'e-all-text'\n        });\n        this.selectAllSpan.textContent = '';\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        this.checboxCreate(this.checkAllParent);\n\n        if (this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            append([this.checkAllParent], this.parent.filterParent);\n          } else {\n            append([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n\n        if (!this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n          } else {\n            prepend([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n\n        EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n      }\n\n      if (this.parent.list.classList.contains('e-nodata') || this.parent.listData && this.parent.listData.length <= 1 && !this.parent.isDynamicDataChange || this.parent.isDynamicDataChange && this.parent.listData && this.parent.listData.length <= 1) {\n        this.checkAllParent.style.display = 'none';\n      } else {\n        this.checkAllParent.style.display = 'block';\n      }\n\n      this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    } else if (!isNullOrUndefined(this.checkAllParent)) {\n      this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n      this.checkAllParent = null;\n    }\n  };\n\n  CheckBoxSelection.prototype.destroy = function () {\n    this.removeEventListener();\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n  };\n\n  CheckBoxSelection.prototype.listSelection = function (args) {\n    var target;\n\n    if (!isNullOrUndefined(args.e)) {\n      var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n      target = !isNullOrUndefined(args.e.target) ? args.e.target.classList.contains('e-frame') && (!this.parent.showSelectAll || this.checkAllParent && !this.checkAllParent.contains(args.e.target)) ? args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1] : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n    } else {\n      var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n      target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n    }\n\n    if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n      target = args.li.firstElementChild.childNodes[1];\n    }\n\n    if (!isNullOrUndefined(target)) {\n      this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n    }\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n      var selectAll$$1 = false;\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n    }\n  };\n\n  CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll$$1) {\n    this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n  };\n\n  CheckBoxSelection.prototype.clickHandler = function (e) {\n    var target;\n\n    if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n      target = e.currentTarget.firstElementChild.lastElementChild;\n    } else {\n      target = e.currentTarget;\n    }\n\n    this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n    var selectAll$$1 = true;\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n    }\n\n    e.preventDefault();\n  };\n\n  CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll$$1) {\n    var ariaState;\n    var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n\n    if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n      frameSpan.classList.remove(INDETERMINATE);\n      frameSpan.classList.add(CHECK$1);\n      ariaState = 'true';\n\n      if (selectAll$$1) {\n        this.parent.selectAllItems(true, e);\n        this.setLocale(true);\n      }\n    } else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n      removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n      ariaState = 'false';\n\n      if (selectAll$$1) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    } else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n      removeClass([frameSpan], [CHECK$1]);\n      frameSpan.classList.add(INDETERMINATE);\n      ariaState = 'false';\n\n      if (selectAll$$1) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    }\n\n    ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n\n    if (!isNullOrUndefined(ariaState)) {\n      wrapper.setAttribute('aria-checked', ariaState);\n    }\n  };\n\n  CheckBoxSelection.prototype.setSearchBox = function (args) {\n    if (isNullOrUndefined(this.parent.filterParent)) {\n      this.parent.filterParent = this.parent.createElement('span', {\n        className: filterParent\n      });\n      this.filterInput = this.parent.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: filterInput\n      });\n      this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n      var backIcon = false;\n\n      if (Browser.isDevice) {\n        backIcon = true;\n        this.parent.mobFilter = false;\n      }\n\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n        properties: {\n          placeholder: this.parent.filterBarPlaceholder\n        }\n      }, this.parent.createElement);\n\n      if (!isNullOrUndefined(this.parent.cssClass)) {\n        if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n\n      append([this.filterInputObj.container], this.parent.filterParent);\n      prepend([this.parent.filterParent], args.popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'role': 'combobox',\n        'autocomplete': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n      EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n      EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n      this.parent.searchBoxHeight = this.filterInputObj.container.parentElement.getBoundingClientRect().height;\n      return this.filterInputObj;\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n    this.parent.hidePopup();\n    removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n    this.parent.inputElement.focus();\n  };\n\n  CheckBoxSelection.prototype.clearText = function (e) {\n    this.parent.targetInputElement.value = '';\n\n    if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n      this.parent.search(null);\n    }\n\n    this.parent.refreshPopup();\n    this.parent.refreshListItems(null);\n    this.clearIconElement.style.visibility = 'hidden';\n    this.filterInput.focus();\n    this.setReorder(e);\n    e.preventDefault();\n  };\n\n  CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n    this.parent.popupObj.element.classList.add(device);\n    this.parent.popupObj.element.classList.add(mobileFilter);\n    this.parent.popupObj.position = {\n      X: 0,\n      Y: 0\n    };\n    this.parent.popupObj.dataBind();\n    this.setSearchBoxPosition();\n    this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n    this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n    this.clearIconElement.style.visibility = 'hidden';\n    EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n    EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n  };\n\n  CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    var selectAllHeight = 0;\n\n    if (this.checkAllParent) {\n      selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    }\n\n    this.parent.popupObj.element.style.maxHeight = '100%';\n    this.parent.popupObj.element.style.width = '100%';\n    this.parent.list.style.maxHeight = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    this.parent.list.style.height = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n\n  CheckBoxSelection.prototype.setPopupFullScreen = function () {\n    attributes(this.parent.popupObj.element, {\n      style: 'left:0px;right:0px;top:0px;bottom:0px;'\n    });\n    addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n    this.parent.popupObj.element.style.maxHeight = '100%';\n    this.parent.popupObj.element.style.width = '100%';\n  };\n\n  CheckBoxSelection.prototype.targetElement = function () {\n    if (!isNullOrUndefined(this.clearIconElement)) {\n      this.parent.targetInputElement = this.filterInput;\n      this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n    }\n\n    return this.parent.targetInputElement.value;\n  };\n\n  CheckBoxSelection.prototype.onBlurHandler = function (e) {\n    if (!this.parent.element.classList.contains('e-listbox')) {\n      var target = void 0;\n\n      if (this.parent.keyAction) {\n        return;\n      }\n\n      if (Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.target;\n      }\n\n      if (!Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.relatedTarget;\n      } // eslint-disable-next-line max-len\n\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target) && !Browser.isIE && this.filterInput) {\n        this.filterInput.focus();\n        return;\n      }\n\n      if (this.parent.scrollFocusStatus && this.filterInput) {\n        e.preventDefault();\n        this.filterInput.focus();\n        this.parent.scrollFocusStatus = false;\n        return;\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n        this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.overAllWrapper.classList.remove(FOCUS$1);\n        this.parent.trigger('blur');\n        this.parent.focused = true;\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n        this.parent.hidePopup();\n      }\n    }\n  };\n\n  CheckBoxSelection.prototype.onDocumentClick = function (e) {\n    if (this.parent.getLocaleName() !== 'listbox') {\n      var target = e.target;\n\n      if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n        if (!(this.filterInput && this.filterInput.value !== '')) {\n          e.preventDefault();\n        }\n      }\n\n      if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) && !this.parent.overAllWrapper.contains(e.target)) {\n        if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n          this.parent.inputFocus = false;\n          this.parent.scrollFocusStatus = false;\n          this.parent.hidePopup();\n          this.parent.onBlurHandler(e, true);\n          this.parent.focused = true;\n        }\n      } else {\n        this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.filterInput;\n      }\n\n      if (!this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') && !this.parent.isPopupOpen()) {\n        if (Browser.isIE) {\n          this.parent.onBlurHandler();\n        } else {\n          this.parent.onBlurHandler(e);\n        }\n      }\n\n      if (this.filterInput === target) {\n        this.filterInput.focus();\n      }\n    }\n  };\n\n  CheckBoxSelection.prototype.getFocus = function (e) {\n    this.parent.overAllWrapper.classList.remove(FOCUS$1);\n\n    if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n      this.parent.keyAction = false;\n      return;\n    }\n\n    if (e.value === 'focus') {\n      this.filterInput.focus();\n      this.parent.removeFocus();\n      EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n    }\n\n    if (e.value === 'clear') {\n      this.filterInput.value = '';\n      this.clearIconElement.style.visibility = 'hidden';\n    }\n  };\n\n  CheckBoxSelection.prototype.checkSelectAll = function (e) {\n    if (e.value === 'check' && this.checkAllParent.getAttribute('aria-checked') !== 'true') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale(true);\n    }\n\n    if (e.value === 'uncheck') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n\n    if (e.value === 'indeterminate') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n  };\n\n  CheckBoxSelection.prototype.setLocale = function (unSelect) {\n    if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n      var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n      this.selectAllSpan.textContent = '';\n      var compiledString = compile(template);\n      var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n\n      for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n        var item = _a[_i];\n        this.selectAllSpan.textContent = item.textContent;\n      }\n    } else {\n      var l10nLocale = {\n        selectAllText: 'Select All',\n        unSelectAllText: 'Unselect All'\n      };\n      var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n\n      if (l10n.getConstant('selectAllText') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n      }\n\n      this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n    }\n  };\n\n  CheckBoxSelection.prototype.getActiveList = function (args) {\n    if (args.li.classList.contains('e-active')) {\n      this.activeLi.push(args.li.cloneNode(true));\n    } else {\n      this.activeLi.splice(args.index, 1);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.setReorder = function (args) {\n    if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n      var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n      var remLi = void 0;\n      var ulEle = this.parent.createElement('ul', {\n        className: 'e-list-parent e-ul e-reorder'\n      });\n\n      if (activeLiCount > 0) {\n        append(this.parent.ulElement.querySelectorAll('li.e-active'), ulEle);\n        remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n        addClass(remLi, 'e-reorder-hide');\n        prepend([ulEle], this.parent.list);\n      }\n\n      this.parent.focusAtFirstListItem();\n    }\n  };\n\n  return CheckBoxSelection;\n}();\n/**\n * export all modules from current location\n */\n\n\nvar __extends$6 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n/**\n * Defines the Selection settings of List Box.\n */\n\n\nvar SelectionSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$6(SelectionSettings, _super);\n\n  function SelectionSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$6([Property('Multiple')], SelectionSettings.prototype, \"mode\", void 0);\n\n  __decorate$6([Property(false)], SelectionSettings.prototype, \"showCheckbox\", void 0);\n\n  __decorate$6([Property(false)], SelectionSettings.prototype, \"showSelectAll\", void 0);\n\n  __decorate$6([Property('Left')], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n\n  return SelectionSettings;\n}(ChildProperty);\n/**\n * Defines the toolbar settings of List Box.\n */\n\n\nvar ToolbarSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$6(ToolbarSettings, _super);\n\n  function ToolbarSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$6([Property([])], ToolbarSettings.prototype, \"items\", void 0);\n\n  __decorate$6([Property('Right')], ToolbarSettings.prototype, \"position\", void 0);\n\n  return ToolbarSettings;\n}(ChildProperty);\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\n\n\nvar ListBox =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$6(ListBox, _super);\n  /**\n   * Constructor for creating the ListBox component.\n   *\n   * @param {ListBoxModel} options - Specifies ListBox model\n   * @param {string | HTMLElement} element - Specifies the element.\n   */\n\n\n  function ListBox(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.isValidKey = false;\n    _this.isDataSourceUpdate = false;\n    _this.keyDownStatus = false;\n    return _this;\n  }\n\n  ListBox_1 = ListBox;\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}.\n   * @private\n   */\n\n  ListBox.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Build and render the component.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.render = function () {\n    this.inputString = '';\n    this.initLoad = true;\n    this.isCustomFiltering = false;\n    this.initialSelectedOptions = this.value;\n\n    _super.prototype.render.call(this);\n\n    this.renderComplete();\n  };\n\n  ListBox.prototype.initWrapper = function () {\n    var hiddenSelect = this.createElement('select', {\n      className: 'e-hidden-select',\n      attrs: {\n        'multiple': ''\n      }\n    });\n    hiddenSelect.style.visibility = 'hidden';\n    this.list.classList.add('e-listbox-wrapper');\n\n    if (this.itemTemplate) {\n      this.list.classList.add('e-list-template');\n    }\n\n    this.list.classList.add('e-wrapper');\n    this.list.classList.add('e-lib');\n\n    if (this.element.tagName === 'EJS-LISTBOX') {\n      this.element.setAttribute('tabindex', '0');\n\n      if (this.initLoad) {\n        this.element.appendChild(this.list);\n      }\n    } else {\n      if (this.initLoad) {\n        this.element.parentElement.insertBefore(this.list, this.element);\n      }\n\n      this.list.insertBefore(this.element, this.list.firstChild);\n      this.element.style.display = 'none';\n    }\n\n    this.list.insertBefore(hiddenSelect, this.list.firstChild);\n\n    if (this.list.getElementsByClassName('e-list-item')[0]) {\n      this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n    }\n\n    if (this.itemTemplate) {\n      this.renderReactTemplates();\n    }\n\n    removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n    this.validationAttribute(this.element, hiddenSelect);\n    this.list.setAttribute('role', 'listbox');\n    attributes(this.list, {\n      'role': 'listbox',\n      'aria-label': 'listbox',\n      'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false'\n    });\n    this.updateSelectionSettings();\n  };\n\n  ListBox.prototype.updateSelectionSettings = function () {\n    if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n      var l10nSelect = new L10n(this.getModuleName(), {\n        selectAllText: 'Select All',\n        unSelectAllText: 'Unselect All'\n      }, this.locale);\n      this.showSelectAll = true;\n      this.selectAllText = l10nSelect.getConstant('selectAllText');\n      this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n      this.popupWrapper = this.list;\n      this.checkBoxSelectionModule.checkAllParent = null;\n      this.notify('selectAll', {});\n    }\n  };\n\n  ListBox.prototype.initDraggable = function () {\n    var _this = this;\n\n    if (this.ulElement) {\n      this.ulElement.id = this.element.id + '_parent';\n    }\n\n    if (this.allowDragAndDrop) {\n      new Sortable(this.ulElement, {\n        scope: this.scope,\n        itemClass: 'e-list-item',\n        dragStart: this.triggerDragStart.bind(this),\n        drag: this.triggerDrag.bind(this),\n        beforeDrop: this.beforeDragEnd.bind(this),\n        drop: this.dragEnd.bind(this),\n        placeHolder: function () {\n          return _this.createElement('span', {\n            className: 'e-placeholder'\n          });\n        },\n        helper: function (e) {\n          var wrapper = _this.list.cloneNode();\n\n          var ele = e.sender.cloneNode(true);\n          wrapper.appendChild(ele);\n\n          var refEle = _this.getItems()[0];\n\n          wrapper.style.width = refEle.offsetWidth + 'px';\n          wrapper.style.height = refEle.offsetHeight + 'px';\n\n          if ((_this.value && _this.value.length) > 1 && _this.isSelected(ele)) {\n            ele.appendChild(_this.createElement('span', {\n              className: 'e-list-badge',\n              innerHTML: _this.value.length + ''\n            }));\n          }\n\n          wrapper.style.zIndex = getZindexPartial(_this.element) + '';\n          return wrapper;\n        }\n      });\n    }\n  };\n\n  ListBox.prototype.updateActionCompleteData = function (li, item, index) {\n    this.jsonData.splice(index, 0, item);\n  };\n\n  ListBox.prototype.initToolbar = function () {\n    var pos = this.toolbarSettings.position;\n    var prevScope = this.element.getAttribute('data-value');\n\n    if (this.toolbarSettings.items.length) {\n      var toolElem = this.createElement('div', {\n        className: 'e-listbox-tool',\n        attrs: {\n          'role': 'toolbar'\n        }\n      });\n      var wrapper = this.createElement('div', {\n        className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n      });\n      this.list.parentElement.insertBefore(wrapper, this.list);\n      wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n      wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n      this.createButtons(toolElem);\n\n      if (!this.element.id) {\n        this.element.id = getUniqueID('e-' + this.getModuleName());\n      }\n\n      if (this.scope) {\n        document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n      } else {\n        this.updateToolBarState();\n      }\n    }\n\n    var scope = this.element.getAttribute('data-value');\n\n    if (prevScope && scope && prevScope !== scope) {\n      this.tBListBox = getComponent(document.getElementById(prevScope), this.getModuleName());\n      this.tBListBox.updateToolBarState();\n    } else if (scope) {\n      this.tBListBox = getComponent(document.getElementById(scope), this.getModuleName());\n      this.tBListBox.updateToolBarState();\n    }\n  };\n\n  ListBox.prototype.createButtons = function (toolElem) {\n    var _this = this;\n\n    var btn;\n    var ele;\n    var title;\n    var l10n = new L10n(this.getModuleName(), {\n      moveUp: 'Move Up',\n      moveDown: 'Move Down',\n      moveTo: 'Move To',\n      moveFrom: 'Move From',\n      moveAllTo: 'Move All To',\n      moveAllFrom: 'Move All From'\n    }, this.locale);\n    this.toolbarSettings.items.forEach(function (value) {\n      title = l10n.getConstant(value);\n      ele = _this.createElement('button', {\n        attrs: {\n          'type': 'button',\n          'data-value': value,\n          'title': title,\n          'aria-label': title\n        }\n      });\n      toolElem.appendChild(ele);\n      btn = new Button({\n        iconCss: 'e-icons e-' + value.toLowerCase()\n      }, ele);\n      btn.createElement = _this.createElement;\n    });\n  };\n\n  ListBox.prototype.validationAttribute = function (input, hiddenSelect) {\n    _super.prototype.validationAttribute.call(this, input, hiddenSelect);\n\n    hiddenSelect.required = input.required;\n    input.required = false;\n  };\n\n  ListBox.prototype.setHeight = function () {\n    var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n    ele.style.height = formatUnit(this.height);\n\n    if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n      addClass([this.list], 'e-filter-list');\n    } else {\n      removeClass([this.list], 'e-filter-list');\n    }\n  };\n\n  ListBox.prototype.setCssClass = function () {\n    var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n    if (this.cssClass) {\n      addClass([wrap], this.cssClass.split(' '));\n    }\n\n    if (this.enableRtl) {\n      addClass([this.list], 'e-rtl');\n    }\n  };\n\n  ListBox.prototype.setEnable = function () {\n    var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n    if (this.enabled) {\n      removeClass([ele], cssClass.disabled);\n    } else {\n      addClass([ele], cssClass.disabled);\n    }\n  };\n\n  ListBox.prototype.showSpinner = function () {\n    if (!this.spinner) {\n      this.spinner = this.createElement('div', {\n        className: 'e-listbox-wrapper'\n      });\n    }\n\n    this.spinner.style.height = formatUnit(this.height);\n    this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n    createSpinner({\n      target: this.spinner\n    }, this.createElement);\n    showSpinner(this.spinner);\n  };\n\n  ListBox.prototype.hideSpinner = function () {\n    if (this.spinner.querySelector('.e-spinner-pane')) {\n      hideSpinner(this.spinner);\n    }\n\n    if (this.spinner.parentElement) {\n      detach(this.spinner);\n    }\n  };\n\n  ListBox.prototype.onInput = function () {\n    this.isDataSourceUpdate = false;\n\n    if (this.keyDownStatus) {\n      this.isValidKey = true;\n    } else {\n      this.isValidKey = false;\n    }\n\n    this.keyDownStatus = false;\n    this.refreshClearIcon();\n  };\n\n  ListBox.prototype.clearText = function () {\n    this.filterInput.value = '';\n    this.refreshClearIcon();\n    var event = document.createEvent('KeyboardEvent');\n    this.isValidKey = true;\n    this.KeyUp(event);\n  };\n\n  ListBox.prototype.refreshClearIcon = function () {\n    if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n  };\n\n  ListBox.prototype.onActionComplete = function (ulElement, list, e) {\n    var searchEle;\n\n    if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n      searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n    }\n\n    if (list.length === 0) {\n      var noRecElem = ulElement.childNodes[0];\n\n      if (noRecElem) {\n        ulElement.removeChild(noRecElem);\n      }\n    }\n\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n      this.list.insertBefore(searchEle, this.list.firstElementChild);\n      this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n      this.filterWireEvents(searchEle);\n    }\n\n    this.initWrapper();\n    this.setSelection();\n    this.initDraggable();\n    this.mainList = this.ulElement;\n\n    if (this.initLoad) {\n      this.jsonData = [];\n      extend(this.jsonData, list, []);\n      this.initToolbarAndStyles();\n      this.wireEvents();\n\n      if (this.showCheckbox) {\n        this.setCheckboxPosition();\n      }\n\n      if (this.allowFiltering) {\n        this.setFiltering();\n      }\n    } else {\n      if (this.isDataSourceUpdate) {\n        this.jsonData = [];\n        extend(this.jsonData, list, []);\n        this.isDataSourceUpdate = false;\n      }\n\n      if (this.allowFiltering) {\n        var filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n        var txtLength = this.filterInput.value.length;\n        filterElem.selectionStart = txtLength;\n        filterElem.selectionEnd = txtLength;\n        filterElem.focus();\n      }\n    }\n\n    if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n      var scope = this.scope.replace('#', '');\n      var scopedLB = getComponent(document.getElementById(scope), this.getModuleName());\n      scopedLB.initToolbar();\n    }\n\n    this.initLoad = false;\n  };\n\n  ListBox.prototype.initToolbarAndStyles = function () {\n    this.initToolbar();\n    this.setCssClass();\n    this.setEnable();\n    this.setHeight();\n  };\n\n  ListBox.prototype.triggerDragStart = function (args) {\n    var _this = this;\n\n    var badge;\n    args = extend(this.getDragArgs(args), {\n      dragSelected: true\n    });\n\n    if (Browser.isIos) {\n      this.list.style.overflow = 'hidden';\n    }\n\n    this.trigger('dragStart', args, function (dragEventArgs) {\n      _this.allowDragAll = dragEventArgs.dragSelected;\n\n      if (!_this.allowDragAll) {\n        badge = _this.ulElement.getElementsByClassName('e-list-badge')[0];\n\n        if (badge) {\n          detach(badge);\n        }\n      }\n    });\n  };\n\n  ListBox.prototype.triggerDrag = function (args) {\n    var scrollParent;\n    var boundRect;\n    var scrollMoved = 36; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var event = args.event;\n    var wrapper;\n\n    if (args.target && (args.target.classList.contains(\"e-listbox-wrapper\") || args.target.classList.contains(\"e-list-item\") || args.target.classList.contains(\"e-filter-parent\") || args.target.classList.contains(\"e-input-group\"))) {\n      if (args.target.classList.contains(\"e-list-item\") || args.target.classList.contains(\"e-filter-parent\") || args.target.classList.contains(\"e-input-group\")) {\n        wrapper = args.target.closest('.e-listbox-wrapper');\n      } else {\n        wrapper = args.target;\n      }\n\n      if (this.allowFiltering) {\n        scrollParent = wrapper.querySelector('.e-list-parent');\n      } else {\n        scrollParent = wrapper;\n      }\n\n      boundRect = scrollParent.getBoundingClientRect();\n\n      if (boundRect.y + scrollParent.offsetHeight - (event.pageY + scrollMoved) < 1) {\n        scrollParent.scrollTop = scrollParent.scrollTop + 10;\n      } else if (event.pageY - scrollMoved - boundRect.y < 1) {\n        scrollParent.scrollTop = scrollParent.scrollTop - 10;\n      }\n    }\n\n    if (args.target === null) {\n      return;\n    }\n\n    this.trigger('drag', this.getDragArgs(args));\n    var listObj = this.getComponent(args.target);\n\n    if (listObj && listObj.listData.length === 0) {\n      var noRecElem = listObj.ulElement.childNodes[0];\n\n      if (noRecElem) {\n        listObj.ulElement.removeChild(noRecElem);\n      }\n    }\n  };\n\n  ListBox.prototype.beforeDragEnd = function (args) {\n    this.dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n\n    if (this.value.indexOf(this.dragValue) > -1) {\n      args.items = this.getDataByValues(this.value);\n    } else {\n      args.items = this.getDataByValues([this.dragValue]);\n    }\n\n    this.trigger('beforeDrop', args);\n  };\n\n  ListBox.prototype.dragEnd = function (args) {\n    var _this = this;\n\n    var listData;\n    var liColl;\n    var jsonData;\n    var droppedData;\n    var selectedOptions;\n    var sortedData;\n    var dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n    var listObj = this.getComponent(args.droppedElement);\n    var getArgs = this.getDragArgs({\n      target: args.droppedElement\n    }, true);\n    var sourceArgs = {\n      previousData: this.dataSource\n    };\n    var destArgs = {\n      previousData: listObj.dataSource\n    };\n    var dragArgs = extend({}, getArgs, {\n      target: args.target,\n      source: {\n        previousData: this.dataSource\n      },\n      previousIndex: args.previousIndex,\n      currentIndex: args.currentIndex\n    });\n\n    if (listObj !== this) {\n      var sourceArgs1 = extend(sourceArgs, {\n        currentData: this.listData\n      });\n      dragArgs = extend(dragArgs, {\n        source: sourceArgs1,\n        destination: destArgs\n      });\n    }\n\n    if (Browser.isIos) {\n      this.list.style.overflow = '';\n    }\n\n    if (listObj === this) {\n      var ul_1 = this.ulElement;\n      listData = [].slice.call(this.listData);\n      liColl = [].slice.call(this.liCollections);\n      jsonData = [].slice.call(this.jsonData);\n      sortedData = [].slice.call(this.sortedData);\n      var toSortIdx_1 = args.currentIndex;\n      var toIdx_1 = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n      var rIdx = listData.indexOf(this.getDataByValue(dropValue));\n      var jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n      var sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n      listData.splice(toIdx_1, 0, listData.splice(rIdx, 1)[0]);\n      sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx, 1)[0]);\n      jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx, 1)[0]);\n      liColl.splice(toIdx_1, 0, liColl.splice(rIdx, 1)[0]);\n\n      if (this.allowDragAll) {\n        selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n        selectedOptions.forEach(function (value) {\n          if (value !== dropValue) {\n            var idx = listData.indexOf(_this.getDataByValue(value));\n            var jsonIdx_1 = jsonData.indexOf(_this.getDataByValue(value));\n            var sIdx_1 = sortedData.indexOf(_this.getDataByValue(value));\n\n            if (idx > toIdx_1) {\n              toIdx_1++;\n            }\n\n            jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx_1, 1)[0]);\n            listData.splice(toIdx_1, 0, listData.splice(idx, 1)[0]);\n            sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx_1, 1)[0]);\n            liColl.splice(toIdx_1, 0, liColl.splice(idx, 1)[0]);\n            ul_1.insertBefore(_this.getItems()[_this.getIndexByValue(value)], ul_1.getElementsByClassName('e-placeholder')[0]);\n          }\n        });\n      }\n\n      this.listData = listData;\n      this.jsonData = jsonData;\n      this.sortedData = sortedData;\n      this.liCollections = liColl;\n    } else {\n      var li_1;\n      var fLiColl_1 = [].slice.call(this.liCollections);\n      var currIdx_1 = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n      var ul_2 = listObj.ulElement;\n      listData = [].slice.call(listObj.listData);\n      liColl = [].slice.call(listObj.liCollections);\n      jsonData = [].slice.call(listObj.jsonData);\n      sortedData = [].slice.call(listObj.sortedData);\n      selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll ? this.value : [dropValue];\n      var fListData_1 = [].slice.call(this.listData);\n      var fSortData_1 = [].slice.call(this.sortedData);\n      selectedOptions.forEach(function (value, index) {\n        droppedData = _this.getDataByValue(value);\n\n        var srcIdx = _this.listData.indexOf(droppedData);\n\n        var jsonSrcIdx = _this.jsonData.indexOf(droppedData);\n\n        var sortIdx = _this.sortedData.indexOf(droppedData);\n\n        fListData_1.splice(srcIdx, 1);\n\n        _this.jsonData.splice(jsonSrcIdx, 1);\n\n        fSortData_1.splice(sortIdx, 1);\n        _this.listData = fListData_1;\n        _this.sortedData = fSortData_1;\n        var destIdx = value === dropValue ? args.currentIndex : currIdx_1;\n        listData.splice(destIdx, 0, droppedData);\n        jsonData.splice(destIdx, 0, droppedData);\n        sortedData.splice(destIdx, 0, droppedData);\n        liColl.splice(destIdx, 0, fLiColl_1.splice(srcIdx, 1)[0]);\n\n        if (!value) {\n          var liCollElem_1 = _this.getItems();\n\n          for (var i = 0; i < liCollElem_1.length; i++) {\n            if (liCollElem_1[i].getAttribute('data-value') === null && liCollElem_1[i].classList.contains('e-list-item')) {\n              li_1 = liCollElem_1[i];\n              break;\n            }\n          }\n        } else {\n          li_1 = _this.getItems()[_this.getIndexByValue(value)];\n        }\n\n        if (!li_1) {\n          li_1 = args.helper;\n        }\n\n        _this.removeSelected(_this, value === dropValue ? [args.droppedElement] : [li_1]);\n\n        ul_2.insertBefore(li_1, ul_2.getElementsByClassName('e-placeholder')[0]);\n        currIdx_1++;\n      });\n\n      if (this.fields.groupBy) {\n        var sourceElem = this.renderItems(this.listData, this.fields);\n        this.updateListItems(sourceElem, this.ulElement);\n        this.setSelection();\n      }\n\n      if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n        var sortable = getComponent(ul_2, 'sortable');\n        var sourceElem = listObj.renderItems(listData, listObj.fields);\n        listObj.updateListItems(sourceElem, ul_2);\n        this.setSelection();\n\n        if (sortable.placeHolderElement) {\n          ul_2.appendChild(sortable.placeHolderElement);\n        }\n\n        ul_2.appendChild(args.helper);\n        listObj.setSelection();\n      }\n\n      this.liCollections = fLiColl_1;\n      listObj.liCollections = liColl;\n      listObj.jsonData = extend([], [], jsonData, false);\n      listObj.listData = extend([], [], listData, false);\n      listObj.sortedData = extend([], [], sortedData, false);\n\n      if (this.listData.length === 0) {\n        this.l10nUpdate();\n      }\n    }\n\n    if (this === listObj) {\n      var sourceArgs1 = extend(sourceArgs, {\n        currentData: listData\n      });\n      dragArgs = extend(dragArgs, {\n        source: sourceArgs1\n      });\n    } else {\n      var dragArgs1 = extend(destArgs, {\n        currentData: listData\n      });\n      dragArgs = extend(dragArgs, {\n        destination: dragArgs1\n      });\n    }\n\n    this.trigger('drop', dragArgs);\n    var liCollElem = dragArgs.elements;\n\n    if (liCollElem.length) {\n      for (var i = 0; i < liCollElem.length; i++) {\n        liCollElem[i].classList.remove('e-grabbed');\n      }\n    }\n  };\n\n  ListBox.prototype.updateListItems = function (sourceElem, destElem) {\n    var i = 0;\n    destElem.innerHTML = \"\";\n\n    while (i < sourceElem.childNodes.length) {\n      destElem.appendChild(sourceElem.childNodes[i]);\n    }\n  };\n\n  ListBox.prototype.removeSelected = function (listObj, elems) {\n    if (listObj.selectionSettings.showCheckbox) {\n      elems.forEach(function (ele) {\n        ele.getElementsByClassName('e-frame')[0].classList.remove('e-check');\n      });\n    } else {\n      removeClass(elems, cssClass.selected);\n    }\n  };\n\n  ListBox.prototype.getCurIdx = function (listObj, idx) {\n    if (listObj.fields.groupBy) {\n      idx -= [].slice.call(listObj.ulElement.children).slice(0, idx).filter(function (ele) {\n        return ele.classList.contains(cssClass.group);\n      }).length;\n    }\n\n    return idx;\n  };\n\n  ListBox.prototype.getComponent = function (li) {\n    var listObj;\n    var ele = this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox') : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox');\n\n    if (ele) {\n      listObj = getComponent(ele, this.getModuleName());\n    }\n\n    return listObj;\n  };\n\n  ListBox.prototype.listOption = function (dataSource, fields) {\n    this.listCurrentOptions = _super.prototype.listOption.call(this, dataSource, fields);\n    this.listCurrentOptions = extend({}, this.listCurrentOptions, {\n      itemCreated: this.triggerBeforeItemRender.bind(this)\n    }, true);\n    this.notify('listoption', {\n      module: 'CheckBoxSelection'\n    });\n    return this.listCurrentOptions;\n  };\n\n  ListBox.prototype.triggerBeforeItemRender = function (e) {\n    e.item.setAttribute('tabindex', '-1');\n    this.trigger('beforeItemRender', {\n      element: e.item,\n      item: e.curData\n    });\n  };\n\n  ListBox.prototype.requiredModules = function () {\n    var modules = [];\n\n    if (this.selectionSettings.showCheckbox) {\n      modules.push({\n        member: 'CheckBoxSelection',\n        args: [this]\n      });\n    }\n\n    return modules;\n  };\n  /**\n   * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n   *\n   * @param {string[]} items - Text items that needs to be enabled/disabled.\n   * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n   * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.enableItems = function (items, enable, isValue) {\n    var _this = this;\n\n    if (enable === void 0) {\n      enable = true;\n    }\n\n    var li;\n    items.forEach(function (item) {\n      var text = item;\n      li = _this.findListElement(_this.list, 'li', 'data-value', isValue ? text : _this.getValueByText(text));\n\n      if (!li) {\n        return;\n      }\n\n      if (enable) {\n        removeClass([li], cssClass.disabled);\n        li.removeAttribute('aria-disabled');\n      } else {\n        addClass([li], cssClass.disabled);\n        li.setAttribute('aria-disabled', 'true');\n      }\n    });\n  };\n  /**\n   * Based on the state parameter, specified list item will be selected/deselected.\n   *\n   * @param {string[]} items - Array of text value of the item.\n   * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n   * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.selectItems = function (items, state, isValue) {\n    if (state === void 0) {\n      state = true;\n    }\n\n    this.setSelection(items, state, !isValue);\n    this.updateSelectedOptions();\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected/deselected.\n   *\n   * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.selectAll = function (state) {\n    if (state === void 0) {\n      state = true;\n    }\n\n    this.selectAllItems(state);\n  };\n  /**\n   * Adds a new item to the list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.addItems = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Removes a item from the list. By default, removed the last item in the list,\n   * but you can remove based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to remove the item from the list.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.removeItems = function (items, itemIndex) {\n    this.removeItem(items, itemIndex);\n  };\n  /**\n   * Removes a item from the list. By default, removed the last item in the list,\n   * but you can remove based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to remove the item from the list.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.removeItem = function (items, itemIndex) {\n    var liCollections = [];\n    var liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n\n    if (items) {\n      items = items instanceof Array ? items : [items];\n      var fields = this.fields;\n      var dataValue = void 0;\n      var objValue = void 0;\n      var dupData = [];\n      var itemIdx = void 0;\n      extend(dupData, [], this.jsonData);\n      var removeIdxes = [];\n      var removeLiIdxes = [];\n\n      for (var j = 0; j < items.length; j++) {\n        if (items[j] instanceof Object) {\n          dataValue = getValue(fields.value, items[j]);\n        } else {\n          dataValue = items[j].toString();\n        }\n\n        for (var i = 0, len = dupData.length; i < len; i++) {\n          if (dupData[i] instanceof Object) {\n            objValue = getValue(fields.value, dupData[i]);\n          } else {\n            objValue = dupData[i].toString();\n          }\n\n          if (objValue === dataValue) {\n            itemIdx = this.getIndexByValue(dataValue);\n            var idx = itemIdx === i ? itemIdx : i;\n            liCollections.push(liElement[idx]);\n            removeIdxes.push(idx);\n            removeLiIdxes.push(idx);\n          }\n        }\n      }\n\n      for (var k = removeIdxes.length - 1; k >= 0; k--) {\n        this.listData.splice(removeIdxes[k], 1);\n      }\n\n      for (var k = removeIdxes.length - 1; k >= 0; k--) {\n        this.jsonData.splice(removeIdxes[k], 1);\n      }\n\n      for (var k = removeLiIdxes.length - 1; k >= 0; k--) {\n        this.updateLiCollection(removeLiIdxes[k]);\n      }\n    } else {\n      itemIndex = itemIndex ? itemIndex : 0;\n      liCollections.push(liElement[itemIndex]);\n      this.listData.splice(itemIndex, 1);\n      this.jsonData.splice(itemIndex, 1);\n      this.updateLiCollection(itemIndex);\n    }\n\n    for (var i = 0; i < liCollections.length; i++) {\n      this.ulElement.removeChild(liCollections[i]);\n    }\n\n    if (this.listData.length === 0) {\n      this.l10nUpdate();\n    }\n\n    this.value = null;\n    this.updateToolBarState();\n  };\n  /**\n   * Gets the array of data Object that matches the given array of values.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n   * @returns {object[]}.\n   */\n\n\n  ListBox.prototype.getDataByValues = function (value) {\n    var data = [];\n\n    for (var i = 0; i < value.length; i++) {\n      data.push(this.getDataByValue(value[i]));\n    }\n\n    return data;\n  };\n  /**\n   * Moves the given value(s) / selected value(s) upwards.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveUp = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(true, false, elem);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) downwards.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveDown = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(false, false, elem);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n   * @param {number} index - Specifies the index.\n   * @param {string} targetId - Specifies the target id.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveTo = function (value, index, targetId) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    var tlistbox = targetId ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n    this.moveData(this, tlistbox, false, elem, index);\n  };\n  /**\n   * Moves all the values from one ListBox to the scoped ListBox.\n   *\n   * @param  { string } targetId - Specifies the scoped ListBox ID.\n   * @param  { string } index - Specifies the index to where the items moved.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveAllTo = function (targetId, index) {\n    if (this.listData.length > 0) {\n      var tlistbox = targetId ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n      this.moveAllData(this, tlistbox, false, index);\n    }\n  };\n  /* eslint-disable */\n\n  /**\n   * Gets the updated dataSource in ListBox.\n   *\n   * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n   */\n\n  /* eslint-enable */\n\n\n  ListBox.prototype.getDataList = function () {\n    return this.jsonData;\n  };\n  /* eslint-disable */\n\n  /**\n   * Returns the sorted Data in ListBox.\n   *\n   * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n   */\n\n  /* eslint-enable */\n\n\n  ListBox.prototype.getSortedList = function () {\n    var sortData;\n    var tempData;\n    sortData = tempData = this.sortedData;\n\n    if (this.fields.groupBy) {\n      sortData = [];\n\n      for (var i = 0; i < tempData.length; i++) {\n        if (tempData[i].isHeader) {\n          continue;\n        }\n\n        sortData.push(tempData[i]);\n      }\n    }\n\n    return sortData;\n  };\n\n  ListBox.prototype.getElemByValue = function (value) {\n    var elem = [];\n\n    for (var i = 0; i < value.length; i++) {\n      elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n    }\n\n    return elem;\n  };\n\n  ListBox.prototype.updateLiCollection = function (index) {\n    var tempLi = [].slice.call(this.liCollections);\n    tempLi.splice(index, 1);\n    this.liCollections = tempLi;\n  };\n\n  ListBox.prototype.selectAllItems = function (state, event) {\n    var _this = this;\n\n    [].slice.call(this.getItems()).forEach(function (li) {\n      if (!li.classList.contains(cssClass.disabled)) {\n        if (_this.selectionSettings.showCheckbox) {\n          var ele = li.getElementsByClassName('e-check')[0];\n\n          if (!ele && state || ele && !state) {\n            _this.notify('updatelist', {\n              li: li,\n              module: 'listbox'\n            });\n\n            if (_this.maximumSelectionLength >= _this.list.querySelectorAll('.e-list-item span.e-check').length) {\n              _this.checkMaxSelection();\n            }\n          }\n        } else {\n          if (state) {\n            li.classList.add(cssClass.selected);\n          } else {\n            li.classList.remove(cssClass.selected);\n          }\n        }\n      }\n    });\n    this.updateSelectedOptions();\n\n    if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n      var liEle = this.list.getElementsByTagName('li');\n      var index = 0;\n\n      if (state) {\n        var _loop_1 = function () {\n          var dataValue1 = this_1.getFormattedValue(liEle[index].getAttribute('data-value'));\n\n          if (!this_1.value.some(function (e) {\n            return e === dataValue1;\n          })) {\n            this_1.value.push(this_1.getFormattedValue(liEle[index].getAttribute('data-value')));\n          }\n        };\n\n        var this_1 = this;\n\n        for (index = 0; index < liEle.length; index++) {\n          _loop_1();\n        }\n      } else {\n        var _loop_2 = function () {\n          var dataValue2 = this_2.getFormattedValue(liEle[index].getAttribute('data-value'));\n          this_2.value = this_2.value.filter(function (e) {\n            return e !== dataValue2;\n          });\n        };\n\n        var this_2 = this;\n\n        for (index = 0; index < liEle.length; index++) {\n          _loop_2();\n        }\n      }\n\n      if (document.querySelectorAll('ul').length < 2) {\n        this.updateMainList();\n      }\n    }\n\n    this.triggerChange(this.getSelectedItems(), event);\n  };\n\n  ListBox.prototype.updateMainList = function () {\n    var mainList = this.mainList.querySelectorAll('.e-list-item');\n    var ulList = this.ulElement.querySelectorAll('.e-list-item');\n    var mainCount = mainList.length;\n    var ulEleCount = ulList.length;\n\n    if (this.selectionSettings.showCheckbox || document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount) {\n      var listindex = 0;\n      var valueindex = 0;\n      var count = 0;\n\n      for (listindex; listindex < mainCount;) {\n        if (this.value) {\n          for (valueindex; valueindex < this.value.length; valueindex++) {\n            if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n              count++;\n            }\n          }\n        }\n\n        if (!count && this.selectionSettings.showCheckbox) {\n          mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n        }\n\n        if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n          this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n          listindex = 0;\n        } else {\n          listindex++;\n        }\n\n        count = 0;\n        valueindex = 0;\n      }\n    }\n  };\n\n  ListBox.prototype.wireEvents = function () {\n    var form = closest(this.element, 'form');\n    var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n    EventHandler.add(this.list, 'click', this.clickHandler, this);\n    EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n    EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n    this.wireToolbarEvent();\n\n    if (this.selectionSettings.showCheckbox) {\n      EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n    }\n\n    if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n    }\n\n    if (form) {\n      EventHandler.add(form, 'reset', this.formResetHandler, this);\n    }\n  };\n\n  ListBox.prototype.wireToolbarEvent = function () {\n    if (this.toolbarSettings.items.length) {\n      EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n    }\n  };\n\n  ListBox.prototype.unwireEvents = function () {\n    var form = closest(this.element, 'form');\n    var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n    EventHandler.remove(this.list, 'click', this.clickHandler);\n    EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n    EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n\n    if (this.allowFiltering && this.clearFilterIconElem) {\n      EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n    }\n\n    if (this.toolbarSettings.items.length) {\n      EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n    }\n\n    if (form) {\n      EventHandler.remove(form, 'reset', this.formResetHandler);\n    }\n  };\n\n  ListBox.prototype.clickHandler = function (e) {\n    this.selectHandler(e);\n  };\n\n  ListBox.prototype.checkSelectAll = function () {\n    var searchCount = 0;\n    var liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n\n    for (var i = 0; i < liItems.length; i++) {\n      if (!liItems[i].classList.contains('e-disabled')) {\n        searchCount++;\n      }\n    }\n\n    var len = this.getSelectedItems().length;\n\n    if (this.showSelectAll && searchCount) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        value: searchCount === len ? 'check' : len === 0 ? 'uncheck' : 'indeterminate'\n      });\n    }\n  };\n\n  ListBox.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n\n    if (this.allowFiltering) {\n      var filterType = this.inputString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (dataType === null) {\n        dataType = this.typeOfData(this.jsonData).typeof;\n      }\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query : this.query ? this.query : new Query();\n    }\n\n    return filterQuery;\n  };\n\n  ListBox.prototype.setFiltering = function () {\n    var filterInputObj;\n\n    if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n      this.filterParent = this.createElement('span', {\n        className: listBoxClasses.filterParent\n      });\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: listBoxClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: [listBoxClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n      append([filterInputObj.container], this.filterParent);\n      prepend([this.filterParent], this.list);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'aria-owns': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-activedescendant': null,\n        'autocomplete': 'off',\n        'autocorrect': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n\n      if (this.height.toString().indexOf('%') < 0) {\n        addClass([this.list], 'e-filter-list');\n      }\n\n      this.inputString = this.filterInput.value;\n      this.filterWireEvents();\n      return filterInputObj;\n    }\n  };\n\n  ListBox.prototype.filterWireEvents = function (filterElem) {\n    if (filterElem) {\n      this.filterInput = filterElem.querySelector('.e-input-filter');\n    }\n\n    this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n\n    if (this.clearFilterIconElem) {\n      EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n\n      if (!filterElem) {\n        this.clearFilterIconElem.style.visibility = 'hidden';\n      }\n    }\n\n    EventHandler.add(this.filterInput, 'input', this.onInput, this);\n    EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n    EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n  };\n\n  ListBox.prototype.selectHandler = function (e, isKey) {\n    var isSelect = true;\n    var currSelIdx;\n    var li = closest(e.target, '.' + 'e-list-item');\n    var selectedLi = [li];\n\n    if (li && li.parentElement) {\n      currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n\n      if (!this.selectionSettings.showCheckbox) {\n        if ((e.ctrlKey || Browser.isDevice) && this.isSelected(li)) {\n          li.classList.remove(cssClass.selected);\n          li.removeAttribute('aria-selected');\n          isSelect = false;\n        } else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || Browser.isDevice))) {\n          this.getSelectedItems().forEach(function (ele) {\n            ele.removeAttribute('aria-selected');\n          });\n          removeClass(this.getSelectedItems(), cssClass.selected);\n        }\n      } else {\n        isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n      }\n\n      if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n        selectedLi = [].slice.call(li.parentElement.children).slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1).filter(function (ele) {\n          return ele.classList.contains('e-list-item');\n        });\n      } else {\n        this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n      }\n\n      if (isSelect) {\n        if (!this.selectionSettings.showCheckbox) {\n          addClass(selectedLi, cssClass.selected);\n        }\n\n        selectedLi.forEach(function (ele) {\n          ele.setAttribute('aria-selected', 'true');\n        });\n        this.list.setAttribute('aria-activedescendant', li.id);\n      } else {\n        selectedLi.forEach(function (ele) {\n          ele.setAttribute('aria-selected', 'false');\n        });\n      }\n\n      if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) && (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) && !(this.maximumSelectionLength < (this.value && this.value.length))) {\n        this.notify('updatelist', {\n          li: li,\n          e: e,\n          module: 'listbox'\n        });\n      }\n\n      if (this.allowFiltering && !isKey) {\n        var liDataValue_1 = this.getFormattedValue(li.getAttribute('data-value'));\n\n        if (!isSelect) {\n          this.value = this.value.filter(function (value1) {\n            return value1 !== liDataValue_1;\n          });\n        } else {\n          var values = [];\n          extend(values, this.value);\n          values.push(liDataValue_1);\n          this.value = values;\n        }\n\n        if (document.querySelectorAll('ul').length < 2) {\n          this.updateMainList();\n        }\n      }\n\n      this.updateSelectedOptions();\n      this.triggerChange(this.getSelectedItems(), e);\n      this.checkMaxSelection();\n    }\n  };\n\n  ListBox.prototype.triggerChange = function (selectedLis, event) {\n    this.trigger('change', {\n      elements: selectedLis,\n      items: this.getDataByElements(selectedLis),\n      value: this.value,\n      event: event\n    });\n  };\n\n  ListBox.prototype.getDataByElems = function (elems) {\n    var data = [];\n\n    for (var i = 0, len = elems.length; i < len; i++) {\n      data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n    }\n\n    return data;\n  };\n\n  ListBox.prototype.getDataByElements = function (elems) {\n    var data = [];\n    var value;\n    var sIdx = 0;\n\n    if (!isNullOrUndefined(this.listData)) {\n      var type = this.typeOfData(this.listData).typeof;\n\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n          var item = _a[_i];\n\n          for (var i = sIdx, len = elems.length; i < len; i++) {\n            value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n\n            if (!isNullOrUndefined(item) && item === value) {\n              sIdx = i;\n              data.push(item);\n              break;\n            }\n          }\n\n          if (elems.length === data.length) {\n            break;\n          }\n        }\n      } else {\n        for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n          var item = _c[_b];\n\n          for (var i = sIdx, len = elems.length; i < len; i++) {\n            value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n\n            if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : 'value', item) === value) {\n              sIdx = i;\n              data.push(item);\n              break;\n            }\n          }\n\n          if (elems.length === data.length) {\n            break;\n          }\n        }\n      }\n\n      return data;\n    }\n\n    return null;\n  };\n\n  ListBox.prototype.checkMaxSelection = function () {\n    var limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n\n    if (this.selectionSettings.showCheckbox) {\n      var index = 0;\n      var liCollElem = this.list.getElementsByClassName('e-list-item');\n\n      for (index; index < liCollElem.length; index++) {\n        if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n          if (limit === this.maximumSelectionLength) {\n            liCollElem[index].classList.add('e-disable');\n          } else if (liCollElem[index].classList.contains('e-disable')) {\n            liCollElem[index].classList.remove('e-disable');\n          }\n        }\n      }\n    }\n  };\n\n  ListBox.prototype.toolbarClickHandler = function (e) {\n    var btn = closest(e.target, 'button');\n\n    if (btn) {\n      this.toolbarAction = btn.getAttribute('data-value');\n\n      if (btn.disabled) {\n        return;\n      }\n\n      switch (this.toolbarAction) {\n        case 'moveUp':\n          this.moveUpDown(true);\n          break;\n\n        case 'moveDown':\n          this.moveUpDown();\n          break;\n\n        case 'moveTo':\n          this.moveItemTo();\n          break;\n\n        case 'moveFrom':\n          this.moveItemFrom();\n          break;\n\n        case 'moveAllTo':\n          this.moveAllItemTo();\n          break;\n\n        case 'moveAllFrom':\n          this.moveAllItemFrom();\n          break;\n\n        default:\n          this.trigger('actionBegin', {\n            cancel: false,\n            items: this.getDataByElems(this.getSelectedItems()),\n            eventName: this.toolbarAction\n          });\n          break;\n      }\n    }\n  };\n\n  ListBox.prototype.moveUpDown = function (isUp, isKey, value) {\n    var _this = this;\n\n    var elems = this.getSelectedItems();\n\n    if (value) {\n      elems = value;\n    }\n\n    if ((isUp && this.isSelected(this.ulElement.firstElementChild) || !isUp && this.isSelected(this.ulElement.lastElementChild)) && !value) {\n      return;\n    }\n\n    var tempItems = this.getDataByElems(elems);\n    var localDataArgs = {\n      cancel: false,\n      items: tempItems,\n      eventName: this.toolbarAction\n    };\n    this.trigger('actionBegin', localDataArgs);\n\n    if (localDataArgs.cancel) {\n      return;\n    }\n\n    (isUp ? elems : elems.reverse()).forEach(function (ele) {\n      var jsonToIdx = Array.prototype.indexOf.call(_this.ulElement.querySelectorAll('.e-list-item'), ele);\n      var idx = Array.prototype.indexOf.call(_this.ulElement.children, ele);\n      moveTo(_this.ulElement, _this.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n\n      _this.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n    });\n    this.trigger('actionComplete', {\n      items: tempItems,\n      eventName: this.toolbarAction\n    });\n    elems[0].focus();\n\n    if (!isKey && this.toolbarSettings.items.length) {\n      this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n    }\n\n    this.updateToolBarState();\n  };\n\n  ListBox.prototype.moveItemTo = function () {\n    this.moveData(this, this.getScopedListBox());\n  };\n\n  ListBox.prototype.moveItemFrom = function () {\n    this.moveData(this.getScopedListBox(), this);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {ListBox} fListBox - Specifies the from listbox.\n   * @param {ListBox} tListBox - Specifies the to listbox.\n   * @param {boolean} isKey - Specifies the key.\n   * @param {Element[]} value - Specifies the value.\n   * @param {number} index - Specifies the index.\n   * @returns {void}\n   * @private\n   */\n\n\n  ListBox.prototype.moveData = function (fListBox, tListBox, isKey, value, index) {\n    var idx = [];\n    var dataIdx = [];\n    var jsonIdx = [];\n    var sortIdx = [];\n    var listData = [].slice.call(fListBox.listData);\n    var tListData = [].slice.call(tListBox.listData);\n    var sortData = [].slice.call(fListBox.sortedData);\n    var tSortData = [].slice.call(tListBox.sortedData);\n    var fliCollections = [].slice.call(fListBox.liCollections);\n    var dataLiIdx = [];\n    var tliCollections = [].slice.call(tListBox.liCollections);\n    var tempItems = [];\n    var data = [];\n    var elems = fListBox.getSelectedItems();\n\n    if (value) {\n      elems = value;\n    }\n\n    var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n    fListBox.value = [];\n\n    if (elems.length) {\n      this.removeSelected(fListBox, elems);\n      elems.forEach(function (ele) {\n        idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n        // To update lb view data\n\n        dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele)); // To update lb listdata data\n\n        dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0])); // To update lb sorted data\n\n        sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0])); // To update lb original data\n\n        jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n      });\n\n      if (this.sortOrder !== 'None') {\n        sortIdx.forEach(function (i) {\n          tempItems.push(fListBox.sortedData[i]);\n        });\n      } else {\n        jsonIdx.forEach(function (i) {\n          tempItems.push(fListBox.jsonData[i]);\n        });\n      }\n\n      var localDataArgs = {\n        cancel: false,\n        items: tempItems,\n        eventName: this.toolbarAction\n      };\n      fListBox.trigger('actionBegin', localDataArgs);\n\n      if (localDataArgs.cancel) {\n        return;\n      }\n\n      var rLiCollection_1 = [];\n      dataLiIdx.sort(function (n1, n2) {\n        return n1 - n2;\n      }).reverse().forEach(function (i) {\n        rLiCollection_1.push(fliCollections.splice(i, 1)[0]);\n      });\n      fListBox.liCollections = fliCollections;\n\n      if (index) {\n        var toColl = tliCollections.splice(0, index);\n        tListBox.liCollections = toColl.concat(rLiCollection_1.reverse()).concat(tliCollections);\n      } else {\n        tListBox.liCollections = tliCollections.concat(rLiCollection_1.reverse());\n      }\n\n      if (tListBox.listData.length === 0) {\n        var noRecElem = tListBox.ulElement.childNodes[0];\n\n        if (noRecElem) {\n          tListBox.ulElement.removeChild(noRecElem);\n        }\n      }\n\n      dataIdx.sort(function (n1, n2) {\n        return n2 - n1;\n      }).forEach(function (i) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        listData.splice(i, 1)[0];\n      });\n      sortIdx.sort(function (n1, n2) {\n        return n2 - n1;\n      }).forEach(function (i) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        sortData.splice(i, 1)[0];\n      });\n      jsonIdx.slice().reverse().forEach(function (i) {\n        data.push(fListBox.jsonData.splice(i, 1)[0]);\n      });\n\n      if (isRefresh) {\n        if (fListBox.fields.groupBy) {\n          var sourceElem = fListBox.renderItems(listData, fListBox.fields);\n          fListBox.updateListItems(sourceElem, fListBox.ulElement);\n        } else {\n          elems.forEach(function (ele) {\n            detach(ele);\n          });\n        }\n      } else {\n        moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n        fListBox.trigger('actionComplete', {\n          items: tempItems,\n          eventName: this.toolbarAction\n        });\n      }\n\n      if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n        tListBox.mainList = tListBox.ulElement;\n      }\n\n      fListBox.updateMainList();\n      var tJsonData = [].slice.call(tListBox.jsonData);\n      tSortData = [].slice.call(tListBox.sortedData);\n      this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n\n      if (isKey) {\n        this.list.focus();\n      }\n\n      fListBox.listData = listData;\n      fListBox.sortedData = sortData;\n      index = index ? index : tListData.length;\n\n      for (var i = tempItems.length - 1; i >= 0; i--) {\n        tListData.splice(index, 0, tempItems[i]);\n        tJsonData.splice(index, 0, tempItems[i]);\n        tSortData.splice(index, 0, tempItems[i]);\n      }\n\n      tListBox.listData = tListData;\n      tListBox.jsonData = tJsonData;\n      tListBox.sortedData = tSortData;\n\n      if (isRefresh) {\n        var sourceElem = tListBox.renderItems(tListData, tListBox.fields);\n        tListBox.updateListItems(sourceElem, tListBox.ulElement);\n        tListBox.setSelection();\n        fListBox.trigger('actionComplete', {\n          items: tempItems,\n          eventName: this.toolbarAction\n        });\n      }\n\n      fListBox.updateSelectedOptions();\n\n      if (fListBox.listData.length === 0) {\n        fListBox.l10nUpdate();\n      }\n    }\n\n    if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n      fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n    }\n  };\n\n  ListBox.prototype.selectNextList = function (elems, dataLiIdx, dataIdx, inst) {\n    var childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n    var ele;\n    var liIdx;\n    var validIdx = -1;\n\n    if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n      liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n      ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n      validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n\n      if (validIdx > -1) {\n        inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected);\n      }\n    }\n  };\n\n  ListBox.prototype.moveAllItemTo = function () {\n    this.moveAllData(this, this.getScopedListBox());\n  };\n\n  ListBox.prototype.moveAllItemFrom = function () {\n    this.moveAllData(this.getScopedListBox(), this);\n  };\n\n  ListBox.prototype.moveAllData = function (fListBox, tListBox, isKey, index) {\n    var listData = [].slice.call(tListBox.listData);\n    var jsonData = [].slice.call(tListBox.jsonData);\n    var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n    this.removeSelected(fListBox, fListBox.getSelectedItems());\n    var tempItems = [].slice.call(fListBox.jsonData);\n    var localDataArgs = {\n      cancel: false,\n      items: tempItems,\n      eventName: this.toolbarAction\n    };\n    fListBox.trigger('actionBegin', localDataArgs);\n\n    if (localDataArgs.cancel) {\n      return;\n    }\n\n    if (tListBox.listData.length === 0) {\n      var noRecElem = tListBox.ulElement.childNodes[0];\n\n      if (noRecElem) {\n        tListBox.ulElement.removeChild(noRecElem);\n      }\n    }\n\n    if (isRefresh) {\n      var noRecElem = fListBox.ulElement.childNodes[0];\n\n      if (noRecElem) {\n        fListBox.ulElement.removeChild(noRecElem);\n      }\n    }\n\n    moveTo(fListBox.ulElement, tListBox.ulElement, // eslint-disable-next-line prefer-spread\n    Array.apply(null, {\n      length: fListBox.ulElement.childElementCount\n    }).map(Number.call, Number), index);\n    this.trigger('actionComplete', {\n      items: tempItems,\n      eventName: this.toolbarAction\n    });\n\n    if (isKey) {\n      this.list.focus();\n    }\n\n    index = index ? index : listData.length;\n\n    for (var i = 0; i < fListBox.listData.length; i++) {\n      listData.splice(index + i, 0, fListBox.listData[i]);\n    }\n\n    for (var i = 0; i < fListBox.jsonData.length; i++) {\n      jsonData.splice(index + i, 0, fListBox.jsonData[i]);\n    }\n\n    var fliCollections = [].slice.call(fListBox.liCollections);\n    var tliCollections = [].slice.call(tListBox.liCollections);\n    fListBox.liCollections = [];\n\n    if (index) {\n      var toColl = tliCollections.splice(0, index);\n      tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n    } else {\n      tListBox.liCollections = tliCollections.concat(fliCollections);\n    }\n\n    fListBox.value = [];\n    listData = listData.filter(function (data) {\n      return data.isHeader !== true;\n    });\n    tListBox.listData = tListBox.jsonData = listData;\n\n    if (fListBox.listData.length == fListBox.jsonData.length) {\n      fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n    } else if (this.allowFiltering) {\n      for (var i = 0; i < fListBox.listData.length; i++) {\n        for (var j = 0; j < fListBox.jsonData.length; j++) {\n          if (fListBox.listData[i] === fListBox.jsonData[j]) {\n            fListBox.jsonData.splice(j, 1);\n          }\n        }\n      }\n\n      fListBox.listData = fListBox.sortedData = [];\n    }\n\n    if (isRefresh) {\n      var sourceElem = tListBox.renderItems(listData, tListBox.fields);\n      tListBox.updateListItems(sourceElem, tListBox.ulElement);\n      this.trigger('actionComplete', {\n        items: tempItems,\n        eventName: this.toolbarAction\n      });\n    } else {\n      tListBox.sortedData = listData;\n    }\n\n    fListBox.updateSelectedOptions();\n\n    if (fListBox.listData.length === 0) {\n      fListBox.l10nUpdate();\n    }\n  };\n\n  ListBox.prototype.changeData = function (fromIdx, toIdx, jsonToIdx, ele) {\n    var listData = [].slice.call(this.listData);\n    var jsonData = [].slice.call(this.jsonData);\n    var sortData = [].slice.call(this.sortedData);\n    var jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n    var sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n    var liColl = [].slice.call(this.liCollections);\n    listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n    jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n    sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n    liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n    this.listData = listData;\n    this.jsonData = jsonData;\n    this.liCollections = liColl;\n    this.sortedData = sortData;\n  };\n\n  ListBox.prototype.getSelectedItems = function () {\n    var ele = [];\n\n    if (this.selectionSettings.showCheckbox) {\n      [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach(function (cbox) {\n        ele.push(closest(cbox, '.' + 'e-list-item'));\n      });\n    } else {\n      ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n    }\n\n    return ele;\n  };\n\n  ListBox.prototype.getScopedListBox = function () {\n    var _this = this;\n\n    var listObj;\n\n    if (this.scope) {\n      [].slice.call(document.querySelectorAll(this.scope)).forEach(function (ele) {\n        if (getComponent(ele, _this.getModuleName())) {\n          listObj = getComponent(ele, _this.getModuleName());\n        }\n      });\n    }\n\n    return listObj;\n  };\n\n  ListBox.prototype.getGrabbedItems = function () {\n    for (var i = 0; i < this.value.length; i++) {\n      var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n\n      for (var j = 0; j < liColl.length; j++) {\n        if (this.value[i] === liColl[j].textContent) {\n          liColl[j].classList.add('e-grabbed');\n        }\n      }\n    }\n\n    var elems = Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll('.e-grabbed'));\n    return elems;\n  };\n\n  ListBox.prototype.getDragArgs = function (args, isDragEnd) {\n    var elems = this.getGrabbedItems();\n\n    if (elems.length) {\n      if (isDragEnd) {\n        elems.push(args.target);\n      }\n    } else {\n      elems = [args.target];\n    }\n\n    return {\n      elements: elems,\n      items: this.getDataByElems(elems)\n    };\n  };\n\n  ListBox.prototype.onKeyDown = function (e) {\n    this.keyDownHandler(e);\n    e.stopPropagation();\n  };\n\n  ListBox.prototype.keyDownHandler = function (e) {\n    if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && !this.allowFiltering) {\n      if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n        return;\n      }\n\n      e.preventDefault();\n\n      if (e.keyCode === 32 && this.ulElement.children.length) {\n        this.selectHandler({\n          target: this.ulElement.getElementsByClassName('e-focused')[0],\n          ctrlKey: e.ctrlKey,\n          shiftKey: e.shiftKey\n        });\n      } else if (e.keyCode === 65 && e.ctrlKey) {\n        this.selectAll();\n      } else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n        this.moveUpDown(e.keyCode === 38 ? true : false, true);\n      } else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n        var listObj = this.tBListBox || this.getScopedListBox();\n\n        if (e.keyCode === 39) {\n          if (e.shiftKey) {\n            this.moveAllData(this, listObj, true);\n          } else {\n            this.moveData(this, listObj, true);\n          }\n        } else {\n          if (e.shiftKey) {\n            this.moveAllData(listObj, this, true);\n          } else {\n            this.moveData(listObj, this, true);\n          }\n        }\n      } else if (e.keyCode !== 37 && e.keyCode !== 39 && e.code !== \"KeyA\") {\n        this.upDownKeyHandler(e);\n      }\n    } else if (this.allowFiltering) {\n      if (e.keyCode === 40 || e.keyCode === 38) {\n        this.upDownKeyHandler(e);\n      }\n    }\n  };\n\n  ListBox.prototype.upDownKeyHandler = function (e) {\n    var ul = this.ulElement;\n    var defaultIdx = e.keyCode === 40 || e.keyCode === 36 ? 0 : ul.childElementCount - 1;\n    var fliIdx = defaultIdx;\n    var fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n\n    if (fli) {\n      if (e.keyCode !== 35 && e.keyCode !== 36) {\n        fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n\n        if (e.keyCode === 40) {\n          fliIdx++;\n        } else {\n          fliIdx--;\n        }\n\n        if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n          return;\n        }\n      }\n\n      removeClass([fli], 'e-focused');\n    }\n\n    var cli = ul.children[fliIdx];\n\n    if (cli) {\n      fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n\n      if (fliIdx === -1) {\n        addClass([fli], 'e-focused');\n        return;\n      }\n\n      ul.children[fliIdx].focus();\n      ul.children[fliIdx].classList.add('e-focused');\n\n      if (!e.ctrlKey || !this.selectionSettings.showCheckbox && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n        this.selectHandler({\n          target: ul.children[fliIdx],\n          ctrlKey: e.ctrlKey,\n          shiftKey: e.shiftKey\n        }, true);\n      }\n\n      if (this.selectionSettings.showCheckbox && e.ctrlKey && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n        var selectedidx = Array.prototype.indexOf.call(ul.children, fli);\n        var sidx = e.code === \"Home\" ? 0 : selectedidx;\n        var eidx = e.code === \"Home\" ? selectedidx : ul.children.length - 1;\n\n        for (var i = sidx; i <= eidx; i++) {\n          var item = ul.children[i];\n          this.notify('updatelist', {\n            li: item,\n            e: {\n              target: this.ulElement.getElementsByClassName('e-focused')[0],\n              ctrlKey: e.ctrlKey,\n              shiftKey: e.shiftKey\n            },\n            module: 'listbox'\n          });\n        }\n      }\n    }\n  };\n\n  ListBox.prototype.KeyUp = function (e) {\n    var _this = this;\n\n    var char = String.fromCharCode(e.keyCode);\n    var isWordCharacter = char.match(/\\w/);\n\n    if (!isNullOrUndefined(isWordCharacter)) {\n      this.isValidKey = true;\n    }\n\n    this.isValidKey = e.keyCode === 8 || e.keyCode === 46 || this.isValidKey;\n\n    if (this.isValidKey) {\n      this.isValidKey = false;\n\n      switch (e.keyCode) {\n        default:\n          if (this.allowFiltering) {\n            var eventArgsData_1 = {\n              preventDefaultAction: false,\n              text: this.targetElement(),\n              updateData: function (dataSource, query, fields) {\n                if (eventArgsData_1.cancel) {\n                  return;\n                }\n\n                _this.isFiltered = true;\n                _this.remoteFilterAction = true;\n\n                _this.dataUpdater(dataSource, query, fields);\n              },\n              event: e,\n              cancel: false\n            };\n            this.trigger('filtering', eventArgsData_1, function (args) {\n              _this.isDataFetched = false;\n\n              if (args.cancel || _this.filterInput.value !== '' && _this.isFiltered) {\n                return;\n              }\n\n              if (!args.cancel && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                _this.inputString = _this.filterInput.value;\n\n                _this.filteringAction(_this.jsonData, new Query(), _this.fields);\n              }\n\n              if (!_this.isFiltered && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                _this.dataUpdater(_this.jsonData, new Query(), _this.fields);\n              }\n            });\n          }\n\n      }\n    }\n  };\n  /**\n   * To filter the data from given data source by using query.\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFiltering = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n\n  ListBox.prototype.filteringAction = function (dataSource, query, fields) {\n    this.resetList(dataSource, fields, query);\n  };\n\n  ListBox.prototype.targetElement = function () {\n    this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n    return this.targetInputElement.value;\n  };\n\n  ListBox.prototype.dataUpdater = function (dataSource, query, fields) {\n    this.isDataFetched = false;\n    var backCommand = true;\n\n    if (this.targetElement().trim() === '') {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n\n      if (backCommand) {\n        this.remoteCustomValue = false;\n        this.onActionComplete(list, this.jsonData);\n        this.notify('reOrder', {\n          module: 'CheckBoxSelection',\n          enable: this.selectionSettings.showCheckbox,\n          e: this\n        });\n      }\n    } else {\n      this.resetList(dataSource, fields, query);\n    }\n  };\n\n  ListBox.prototype.focusOutHandler = function () {\n    var ele = this.list.getElementsByClassName('e-focused')[0];\n\n    if (ele) {\n      ele.classList.remove('e-focused');\n    }\n\n    if (this.allowFiltering) {\n      this.refreshClearIcon();\n    }\n  };\n\n  ListBox.prototype.getValidIndex = function (cli, index, keyCode) {\n    var cul = this.ulElement;\n\n    if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n      if (keyCode === 40 || keyCode === 36) {\n        index++;\n      } else {\n        index--;\n      }\n    }\n\n    if (index < 0 || index === cul.childElementCount) {\n      return -1;\n    }\n\n    cli = cul.querySelectorAll('.e-list-item')[index];\n\n    if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n      index = this.getValidIndex(cli, index, keyCode);\n    }\n\n    return index;\n  };\n\n  ListBox.prototype.updateSelectedOptions = function () {\n    var _this = this;\n\n    var selectedOptions = [];\n    var values = [];\n    extend(values, this.value);\n    this.getSelectedItems().forEach(function (ele) {\n      if (!ele.classList.contains('e-grabbed')) {\n        selectedOptions.push(_this.getFormattedValue(ele.getAttribute('data-value')));\n      }\n    });\n\n    if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n      if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n        for (var i = 0; i < selectedOptions.length; i++) {\n          if (values.indexOf(selectedOptions[i]) > -1) {\n            continue;\n          } else {\n            values.push(selectedOptions[i]);\n          }\n        }\n\n        this.setProperties({\n          value: values\n        }, true);\n      } else {\n        this.setProperties({\n          value: selectedOptions\n        }, true);\n      }\n    }\n\n    this.updateSelectTag();\n    this.updateToolBarState();\n\n    if (this.tBListBox) {\n      this.tBListBox.updateToolBarState();\n    }\n  };\n\n  ListBox.prototype.clearSelection = function (values) {\n    var _this = this;\n\n    if (values === void 0) {\n      values = this.value;\n    }\n\n    if (this.selectionSettings.showCheckbox) {\n      var dvalue_1;\n      this.getSelectedItems().forEach(function (li) {\n        dvalue_1 = _this.getFormattedValue(li.getAttribute('data-value'));\n\n        if (values.indexOf(dvalue_1) < 0) {\n          li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n          li.getElementsByClassName('e-checkbox-wrapper')[0].removeAttribute('aria-checked');\n          li.removeAttribute('aria-selected');\n        }\n      });\n    }\n  };\n\n  ListBox.prototype.setSelection = function (values, isSelect, isText) {\n    var _this = this;\n\n    if (values === void 0) {\n      values = this.value;\n    }\n\n    if (isSelect === void 0) {\n      isSelect = true;\n    }\n\n    if (isText === void 0) {\n      isText = false;\n    }\n\n    var li;\n    var liselect;\n\n    if (values) {\n      values.forEach(function (value) {\n        var text;\n\n        if (isText) {\n          text = _this.getValueByText(value);\n        } else {\n          text = value;\n        }\n\n        li = _this.list.querySelector('[data-value=\"' + text + '\"]');\n\n        if (li) {\n          if (_this.selectionSettings.showCheckbox) {\n            liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n          } else {\n            liselect = li.classList.contains('e-selected');\n          }\n\n          if (!isSelect && liselect || isSelect && !liselect && li) {\n            if (_this.selectionSettings.showCheckbox) {\n              _this.notify('updatelist', {\n                li: li,\n                module: 'listbox'\n              });\n            } else {\n              if (isSelect) {\n                li.classList.add(cssClass.selected);\n                li.setAttribute('aria-selected', 'true');\n              } else {\n                li.classList.remove(cssClass.selected);\n                li.removeAttribute('aria-selected');\n              }\n            }\n          }\n        }\n      });\n    }\n\n    this.updateSelectTag();\n  };\n\n  ListBox.prototype.updateSelectTag = function () {\n    var ele = this.getSelectTag();\n    var innerHTML = '';\n    ele.innerHTML = '';\n\n    if (this.value) {\n      for (var i = 0, len = this.value.length; i < len; i++) {\n        innerHTML += '<option selected value=\"' + this.value[i] + '\"></option>';\n      }\n\n      ele.innerHTML += innerHTML;\n    }\n\n    this.checkSelectAll();\n  };\n\n  ListBox.prototype.checkDisabledState = function (inst) {\n    return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n  };\n\n  ListBox.prototype.updateToolBarState = function () {\n    var _this = this;\n\n    if (this.toolbarSettings.items.length) {\n      var listObj_1 = this.getScopedListBox();\n      var wrap_1 = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n      this.toolbarSettings.items.forEach(function (value) {\n        var btn = wrap_1.querySelector('[data-value=\"' + value + '\"]');\n\n        switch (value) {\n          case 'moveAllTo':\n            btn.disabled = _this.checkDisabledState(_this);\n            break;\n\n          case 'moveAllFrom':\n            btn.disabled = _this.checkDisabledState(listObj_1);\n            break;\n\n          case 'moveFrom':\n            btn.disabled = listObj_1.value && listObj_1.value.length ? false : true;\n            break;\n\n          case 'moveUp':\n            btn.disabled = _this.value && _this.value.length && !_this.isSelected(_this.ulElement.children[0]) ? false : true;\n            break;\n\n          case 'moveDown':\n            btn.disabled = _this.value && _this.value.length && !_this.isSelected(_this.ulElement.children[_this.ulElement.childElementCount - 1]) ? false : true;\n            break;\n\n          default:\n            btn.disabled = _this.value && _this.value.length ? false : true;\n            break;\n        }\n      });\n    }\n  };\n\n  ListBox.prototype.setCheckboxPosition = function () {\n    var listWrap = this.list;\n\n    if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n      listWrap.classList.remove('e-right');\n    }\n\n    if (this.selectionSettings.checkboxPosition === 'Right') {\n      listWrap.classList.add('e-right');\n    }\n  };\n\n  ListBox.prototype.showCheckbox = function (showCheckbox) {\n    var index = 0;\n    var liColl = this.list.lastElementChild.querySelectorAll('li');\n    var liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n\n    if (showCheckbox) {\n      this.ulElement = this.renderItems(this.listData, this.fields);\n      this.mainList = this.ulElement;\n      this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n      this.list.appendChild(this.ulElement);\n\n      if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n        var l10nShow = new L10n(this.getModuleName(), {\n          selectAllText: 'Select All',\n          unSelectAllText: 'Unselect All'\n        }, this.locale);\n        this.showSelectAll = true;\n        this.selectAllText = l10nShow.getConstant('selectAllText');\n        this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n        this.popupWrapper = this.list;\n        this.checkBoxSelectionModule.checkAllParent = null;\n        this.notify('selectAll', {});\n        this.checkSelectAll();\n      }\n    } else {\n      if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n        this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n      }\n\n      for (index; index < liCollLen; index++) {\n        if (liColl[index].classList.contains('e-list-item')) {\n          liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n        }\n\n        if (liColl[index].hasAttribute('aria-selected')) {\n          liColl[index].removeAttribute('aria-selected');\n        }\n      }\n\n      this.mainList = this.ulElement;\n    }\n\n    this.value = [];\n  };\n\n  ListBox.prototype.isSelected = function (ele) {\n    if (!isNullOrUndefined(ele)) {\n      return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n    } else {\n      return false;\n    }\n  };\n\n  ListBox.prototype.getSelectTag = function () {\n    return this.list.getElementsByClassName('e-hidden-select')[0];\n  };\n\n  ListBox.prototype.getToolElem = function () {\n    return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n  };\n\n  ListBox.prototype.formResetHandler = function () {\n    this.value = this.initialSelectedOptions;\n  };\n  /**\n   * Return the module name.\n   *\n   * @private\n   * @returns {string} - Module name\n   */\n\n\n  ListBox.prototype.getModuleName = function () {\n    return 'listbox';\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n\n\n  ListBox.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  ListBox.prototype.getLocaleName = function () {\n    return 'listbox';\n  };\n\n  ListBox.prototype.destroy = function () {\n    this.unwireEvents();\n\n    if (this.element.tagName === 'EJS-LISTBOX') {\n      this.element.innerHTML = '';\n    } else {\n      this.element.style.display = 'inline-block';\n\n      if (this.toolbarSettings.items.length) {\n        this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n        detach(this.list.nextElementSibling);\n      }\n\n      this.list.parentElement.insertBefore(this.element, this.list);\n    }\n\n    _super.prototype.destroy.call(this);\n\n    this.enableRtlElements = [];\n    this.liCollections = null;\n    this.list = null;\n    this.ulElement = null;\n    this.mainList = null;\n    this.spinner = null;\n    this.rippleFun = null;\n\n    if (this.itemTemplate) {\n      this.clearTemplate();\n    }\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {ListBoxModel} newProp - Specifies the new properties.\n   * @param {ListBoxModel} oldProp - Specifies the old properties.\n   * @returns {void}\n   * @private\n   */\n\n\n  ListBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n    _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n\n    this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([wrap], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([wrap], newProp.cssClass.split(' '));\n          }\n\n          break;\n\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            this.list.classList.add('e-rtl');\n          } else {\n            this.list.classList.remove('e-rtl');\n          }\n\n          break;\n\n        case 'value':\n          removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n          this.clearSelection(this.value);\n          this.setSelection();\n          break;\n\n        case 'height':\n          this.setHeight();\n          break;\n\n        case 'enabled':\n          this.setEnable();\n          break;\n\n        case 'allowDragAndDrop':\n          if (newProp.allowDragAndDrop) {\n            this.initDraggable();\n          } else {\n            getComponent(this.ulElement, 'sortable').destroy();\n          }\n\n          break;\n\n        case 'allowFiltering':\n          if (this.allowFiltering) {\n            this.setFiltering();\n          } else {\n            this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n            this.filterParent = null;\n            removeClass([this.list], 'e-filter-list');\n          }\n\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this.allowFiltering) {\n            if (this.filterInput) {\n              Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n            }\n          }\n\n          break;\n\n        case 'scope':\n          if (this.allowDragAndDrop) {\n            getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n          }\n\n          if (this.toolbarSettings.items.length) {\n            if (oldProp.scope) {\n              getComponent(document.querySelector(oldProp.scope), this.getModuleName()).tBListBox = null;\n            }\n\n            if (newProp.scope) {\n              getComponent(document.querySelector(newProp.scope), this.getModuleName()).tBListBox = this;\n            }\n          }\n\n          break;\n\n        case 'toolbarSettings':\n          {\n            var ele = void 0;\n            var pos = newProp.toolbarSettings.position;\n            var toolElem = this.getToolElem();\n\n            if (pos) {\n              removeClass([wrap], ['e-right', 'e-left']);\n              wrap.classList.add('e-' + pos.toLowerCase());\n\n              if (pos === 'Left') {\n                wrap.insertBefore(toolElem, this.list);\n              } else {\n                wrap.appendChild(toolElem);\n              }\n            }\n\n            if (newProp.toolbarSettings.items) {\n              if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                ele = this.list.parentElement;\n                ele.parentElement.insertBefore(this.list, ele);\n                detach(ele);\n              }\n\n              this.initToolbarAndStyles();\n              this.wireToolbarEvent();\n            }\n\n            break;\n          }\n\n        case 'selectionSettings':\n          {\n            var showSelectAll = newProp.selectionSettings.showSelectAll;\n            var showCheckbox = newProp.selectionSettings.showCheckbox;\n\n            if (!isNullOrUndefined(showSelectAll)) {\n              this.showSelectAll = showSelectAll;\n\n              if (this.showSelectAll) {\n                var l10nSel = new L10n(this.getModuleName(), {\n                  selectAllText: 'Select All',\n                  unSelectAllText: 'Unselect All'\n                }, this.locale);\n                this.checkBoxSelectionModule.checkAllParent = null;\n                this.showSelectAll = true;\n                this.selectAllText = l10nSel.getConstant('selectAllText');\n                this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                this.popupWrapper = this.list;\n              }\n\n              this.notify('selectAll', {});\n              this.checkSelectAll();\n            }\n\n            if (!isNullOrUndefined(showCheckbox)) {\n              this.showCheckbox(showCheckbox);\n            }\n\n            if (this.selectionSettings.showCheckbox) {\n              this.setCheckboxPosition();\n            }\n\n            break;\n          }\n\n        case 'dataSource':\n          this.isDataSourceUpdate = true;\n          this.jsonData = [].slice.call(this.dataSource);\n          break;\n      }\n    }\n  };\n\n  var ListBox_1;\n\n  __decorate$6([Property('')], ListBox.prototype, \"cssClass\", void 0);\n\n  __decorate$6([Property([])], ListBox.prototype, \"value\", void 0);\n\n  __decorate$6([Property('')], ListBox.prototype, \"height\", void 0);\n\n  __decorate$6([Property(false)], ListBox.prototype, \"allowDragAndDrop\", void 0);\n\n  __decorate$6([Property(1000)], ListBox.prototype, \"maximumSelectionLength\", void 0);\n\n  __decorate$6([Property(false)], ListBox.prototype, \"allowFiltering\", void 0);\n\n  __decorate$6([Property('')], ListBox.prototype, \"scope\", void 0);\n\n  __decorate$6([Property(true)], ListBox.prototype, \"ignoreCase\", void 0);\n\n  __decorate$6([Property(null)], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"beforeItemRender\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"filtering\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"select\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"change\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"beforeDrop\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"dragStart\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"drag\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"drop\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"dataBound\", void 0);\n\n  __decorate$6([Property(null)], ListBox.prototype, \"groupTemplate\", void 0);\n\n  __decorate$6([Property('Request failed')], ListBox.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate$6([Property(1000)], ListBox.prototype, \"zIndex\", void 0);\n\n  __decorate$6([Property(false)], ListBox.prototype, \"ignoreAccent\", void 0);\n\n  __decorate$6([Complex({}, ToolbarSettings)], ListBox.prototype, \"toolbarSettings\", void 0);\n\n  __decorate$6([Complex({}, SelectionSettings)], ListBox.prototype, \"selectionSettings\", void 0);\n\n  ListBox = ListBox_1 = __decorate$6([NotifyPropertyChanges], ListBox);\n  return ListBox;\n}(DropDownBase);\n\nvar listBoxClasses = {\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  clearIcon: 'e-clear-icon'\n};\n/**\n * export all modules from current location\n */\n\nvar __extends$7 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\n\n\nvar Mention =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$7(Mention, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {MentionModel} options - Specifies the MentionComponent model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function Mention(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n   * @param {MentionModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'minLength':\n          this.minLength = newProp.minLength;\n          break;\n\n        case 'suffixText':\n          this.suffixText = newProp.suffixText;\n          break;\n\n        case 'allowSpaces':\n          this.allowSpaces = newProp.allowSpaces;\n          break;\n\n        case 'mentionChar':\n          this.mentionChar = newProp.mentionChar;\n          break;\n\n        case 'showMentionChar':\n          this.showMentionChar = newProp.showMentionChar;\n          break;\n\n        case 'cssClass':\n          this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n      }\n    }\n  };\n\n  Mention.prototype.updateCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    this.setCssClass(newClass, [this.inputElement], oldClass);\n\n    if (this.popupObj) {\n      this.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n\n  Mention.prototype.setCssClass = function (cssClass$$1, elements, oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(cssClass$$1) && cssClass$$1 !== '') {\n      addClass(elements, cssClass$$1.split(' '));\n    }\n  };\n\n  Mention.prototype.initializeData = function () {\n    this.isSelected = false;\n    this.isFiltered = false;\n    this.beforePopupOpen = false;\n    this.initRemoteRender = false;\n    this.isPopupOpen = false;\n    this.isCollided = false;\n    this.lineBreak = false;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Mention.prototype.preRender = function () {\n    this.initializeData();\n\n    _super.prototype.preRender.call(this);\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Mention.prototype.render = function () {\n    this.inputElement = !isNullOrUndefined(this.target) ? typeof this.target === 'string' ? document.querySelector(this.target) : this.target : this.element;\n\n    if (this.isContentEditable(this.inputElement)) {\n      this.inputElement.setAttribute('contenteditable', 'true');\n      addClass([this.inputElement], ['e-mention']);\n\n      if (isNullOrUndefined(this.target)) {\n        addClass([this.inputElement], ['e-editable-element']);\n      }\n    }\n\n    this.queryString = this.elementValue();\n    this.wireEvent();\n  };\n\n  Mention.prototype.wireEvent = function () {\n    EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n    this.bindCommonEvent();\n  };\n\n  Mention.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n    this.unBindCommonEvent();\n  };\n\n  Mention.prototype.bindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.inputElement, {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.hideSpinner = function () {\n    this.hideWaitingSpinner();\n  };\n\n  Mention.prototype.hideWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n    }\n\n    if (!isNullOrUndefined(this.spinnerTemplate)) {\n      detach(this.spinnerTemplateElement);\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.showWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.popupObj)) {\n      if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n        this.spinnerElement = this.popupObj.element;\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n        showSpinner(this.spinnerElement);\n      }\n\n      if (!isNullOrUndefined(this.spinnerTemplate)) {\n        this.setSpinnerTemplate();\n        this.popupObj.element.appendChild(this.spinnerTemplateElement);\n      }\n    }\n  };\n\n  Mention.prototype.keyActionHandler = function (e) {\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n    var isTabAction = e.action === 'tab' || e.action === 'close';\n\n    if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n      this.renderList();\n    }\n\n    if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n      return;\n    }\n\n    if (e.action === 'escape') {\n      e.preventDefault();\n    }\n\n    this.isSelected = e.action === 'escape' ? false : this.isSelected;\n\n    switch (e.action) {\n      case 'down':\n      case 'up':\n        this.updateUpDownAction(e);\n        break;\n\n      case 'tab':\n        if (this.isPopupOpen) {\n          var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n          if (li) {\n            this.setSelection(li, e);\n          }\n\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n          }\n        }\n\n        break;\n\n      case 'enter':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n\n          if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n            this.setValue(e);\n          }\n        }\n\n        break;\n\n      case 'escape':\n        if (this.isPopupOpen) {\n          this.hidePopup(e);\n        }\n\n        break;\n    }\n  };\n\n  Mention.prototype.updateUpDownAction = function (e) {\n    var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n      if (!isNullOrUndefined(li)) {\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n      }\n\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n      startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n      index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n\n    if (this.isPopupOpen) {\n      e.preventDefault();\n    }\n  };\n\n  Mention.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  Mention.prototype.unBindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n  };\n\n  Mention.prototype.onKeyUp = function (e) {\n    var rangetextContent;\n\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n      rangetextContent = this.range.startContainer.textContent.split('');\n    }\n\n    var currentRange = this.getTextRange();\n    var lastWordRange = this.getLastLetter(currentRange);\n    var Regex = new RegExp(this.mentionChar, 'g');\n    var charRegex = new RegExp('[a-zA-Z]', 'g');\n\n    if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    }\n\n    if (!currentRange || !lastWordRange || e.code === 'Enter' || e.keyCode === 27 || lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1 || this.isContentEditable(this.inputElement) && this.range.startContainer && this.range.startContainer.previousElementSibling && this.range.startContainer.textContent.split('').length > 0 && (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 || this.range.startContainer.nodeType === 1)) {\n      if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1 && !this.isMatchedText() && currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ' && this.list && this.list.querySelectorAll('ul').length > 0) {\n        this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n        this.searchLists(e);\n      } else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange)) {\n        this.hidePopup();\n        this.lineBreak = true;\n      }\n\n      return;\n    }\n\n    this.queryString = lastWordRange.replace(this.mentionChar, '');\n\n    if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) && this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n      this.searchLists(e);\n\n      if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n        if (!this.isContentEditable(this.inputElement)) {\n          this.showPopup();\n        } else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement) {\n          this.showPopup();\n        }\n      }\n    } else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj || isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) || !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element))) {\n      if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n        this.searchLists(e);\n      }\n\n      this.resetList(this.dataSource, this.fields);\n\n      if (isNullOrUndefined(this.list)) {\n        this.initValue();\n      }\n\n      if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n        this.showPopup();\n\n        if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n          this.showWaitingSpinner();\n        }\n\n        this.lineBreak = false;\n      }\n    } else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 && e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8) {\n      this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n      this.searchLists(e);\n    } else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n      this.resetList(this.dataSource, this.fields);\n    }\n  };\n\n  Mention.prototype.isMatchedText = function () {\n    var isMatched = false;\n\n    for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n      if (this.getTextRange() && this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n        isMatched = true;\n      }\n    }\n\n    return isMatched;\n  };\n\n  Mention.prototype.getCurrentRange = function () {\n    this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n    return this.range;\n  };\n\n  Mention.prototype.searchLists = function (e) {\n    var _this = this;\n\n    this.isDataFetched = false;\n\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.render.call(this);\n\n      this.unWireListEvents();\n      this.wireListEvents();\n    }\n\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields);\n      return;\n    }\n\n    this.isSelected = false;\n    this.activeIndex = null;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.elementValue(),\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n\n        _this.isFiltered = true;\n\n        _this.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n        _this.filterAction(_this.dataSource, null, _this.fields);\n      }\n    });\n  };\n\n  Mention.prototype.filterAction = function (dataSource, query, fields) {\n    this.beforePopupOpen = true;\n\n    if (this.queryString !== '' && this.queryString.length >= this.minLength) {\n      this.resetList(dataSource, fields, query);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.beforePopupOpen = false;\n    }\n\n    this.setDataIndex();\n    this.renderReactTemplates();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    if (this.isActive) {\n      var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n\n      if (focusItem) {\n        focusItem.classList.add(dropDownBaseClasses.selected);\n        this.selectedLI = focusItem;\n        var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n        this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n      }\n    }\n  };\n\n  Mention.prototype.setDataIndex = function () {\n    for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n      this.liCollections[i].setAttribute('data-index', i.toString());\n    }\n  };\n\n  Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this = this;\n\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n            }, 0);\n          } else {\n            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n        }\n\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n\n    return fields;\n  };\n\n  Mention.prototype.elementValue = function () {\n    if (!this.isContentEditable(this.inputElement)) {\n      return this.inputElement.value.replace(this.mentionChar, '');\n    } else {\n      return this.inputElement.textContent.replace(this.mentionChar, '');\n    }\n  };\n\n  Mention.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? this.elementValue() : this.queryString;\n\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n\n    if (!isNullOrUndefined(this.suggestionCount)) {\n      // Since defualt value of suggestioncount is 25, checked the condition\n      if (this.suggestionCount !== 25) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n\n      filterQuery.take(this.suggestionCount);\n    }\n\n    return filterQuery;\n  };\n\n  Mention.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n\n  Mention.prototype.getTextRange = function () {\n    var text;\n\n    if (!this.isContentEditable(this.inputElement)) {\n      var component = this.inputElement;\n\n      if (!isNullOrUndefined(component)) {\n        var startPos = component.selectionStart;\n\n        if (component.value && startPos >= 0) {\n          text = component.value.substring(0, startPos);\n        }\n      }\n    } else {\n      var selectedElem = this.range.startContainer;\n\n      if (!isNullOrUndefined(selectedElem)) {\n        var workingNodeContent = selectedElem.textContent;\n        var selectStartOffset = this.range.startOffset;\n\n        if (workingNodeContent && selectStartOffset >= 0) {\n          text = workingNodeContent.substring(0, selectStartOffset);\n        }\n      }\n    }\n\n    return text;\n  };\n\n  Mention.prototype.getLastLetter = function (text) {\n    if (isNullOrUndefined(text)) {\n      return '';\n    }\n\n    var textValue = text.replace(/\\u00A0/g, ' ');\n    var words = textValue.split(/\\s+/);\n    var wordCnt = words.length - 1;\n    return words[wordCnt].trim();\n  };\n\n  Mention.prototype.isContentEditable = function (element) {\n    return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.showPopup = function () {\n    this.renderPopup();\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.hidePopup = function (e) {\n    this.removeSelection();\n    this.closePopup(0, e);\n  };\n\n  Mention.prototype.closePopup = function (delay, e) {\n    var _this = this;\n\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('closed', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && _this.popupObj) {\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n\n  Mention.prototype.renderPopup = function () {\n    var _this = this;\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle_1 = isNullOrUndefined(_this.target) ? _this.createElement('div', {\n          id: _this.inputElement.id + '_popup',\n          className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n        }) : _this.element;\n\n        if (!isNullOrUndefined(_this.target)) {\n          popupEle_1.id = _this.inputElement.id + '_popup';\n          addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n        }\n\n        _this.listHeight = formatUnit(_this.popupHeight);\n\n        if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n          var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n          if (!isNullOrUndefined(li)) {\n            _this.selectedLI = li;\n\n            var value = _this.getFormattedValue(li.getAttribute('data-value'));\n\n            _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n          }\n        }\n\n        append([_this.list], popupEle_1);\n\n        if (!_this.popupObj || !document.body.contains(_this.popupObj.element) || !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n          document.body.appendChild(popupEle_1);\n        }\n\n        var coordinates_1;\n        popupEle_1.style.visibility = 'hidden';\n\n        if (_this.popupHeight !== 'auto') {\n          _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n          popupEle_1.style.maxHeight = formatUnit(_this.popupHeight);\n        } else {\n          popupEle_1.style.height = 'auto';\n        }\n\n        var offsetValue = 0;\n        var left = 0;\n\n        _this.initializePopup(popupEle_1, offsetValue, left);\n\n        _this.checkCollision(popupEle_1);\n\n        popupEle_1.style.visibility = 'visible';\n\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n\n          _this.wireListEvents();\n        }\n\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          cancel: false,\n          animation: animModel\n        };\n\n        _this.trigger('opened', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            _this.renderReactTemplates();\n\n            _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.inputElement : null);\n\n            coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n\n            if (!_this.isCollided) {\n              popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n            } else {\n              popupEle_1.style.left = formatUnit(coordinates_1.left);\n              _this.isCollided = false;\n            }\n\n            popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n          } else {\n            _this.beforePopupOpen = false;\n\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n\n  Mention.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'mention')) {\n      var collision = isCollide(popupEle);\n\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n        this.isCollided = true;\n      }\n\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  Mention.prototype.getTriggerCharPosition = function () {\n    var mostRecentTriggerCharPos;\n    var currentRange = this.getTextRange();\n\n    if (currentRange !== undefined && currentRange !== null) {\n      mostRecentTriggerCharPos = 0;\n      var idx = currentRange.lastIndexOf(this.mentionChar);\n\n      if (idx >= mostRecentTriggerCharPos) {\n        mostRecentTriggerCharPos = idx;\n      }\n    }\n\n    return mostRecentTriggerCharPos;\n  };\n\n  Mention.prototype.initializePopup = function (element, offsetValue, left) {\n    var _this = this;\n\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputElement,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'top',\n        Y: 'left'\n      },\n      actionOnScroll: 'hide',\n      zIndex: this.zIndex,\n      close: function () {\n        _this.destroyPopup();\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n\n        _this.setDataIndex();\n      }\n    });\n  };\n\n  Mention.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    return width;\n  };\n\n  Mention.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.popupObj.destroy();\n\n    if (isNullOrUndefined(this.target)) {\n      detach(this.popupObj.element);\n    } else {\n      this.popupObj.element.innerHTML = '';\n      this.popupObj.element.removeAttribute('style');\n      this.popupObj.element.removeAttribute('aria-disabled');\n    }\n  };\n\n  Mention.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n      this.hidePopup(e);\n    }\n  };\n\n  Mention.prototype.getCoordinates = function (element, position) {\n    var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n    var div;\n    var span;\n    var range;\n    var globalRange;\n    var coordinates;\n    var computed;\n    var rect;\n\n    if (!this.isContentEditable(this.inputElement)) {\n      div = this.createElement('div', {\n        className: 'e-form-mirror-div'\n      });\n      document.body.appendChild(div);\n      computed = getComputedStyle(element);\n      div.style.position = 'absolute';\n      div.style.visibility = 'hidden';\n      properties.forEach(function (prop) {\n        div.style[prop] = computed[prop];\n      });\n      div.textContent = element.value.substring(0, position);\n\n      if (this.inputElement.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n      }\n\n      span = this.createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      rect = element.getBoundingClientRect();\n    } else {\n      var selectedNodePosition = this.getTriggerCharPosition();\n      globalRange = this.range;\n      range = document.createRange();\n      range.setStart(globalRange.startContainer, selectedNodePosition);\n      range.setEnd(globalRange.startContainer, selectedNodePosition);\n      range.collapse(false);\n      rect = range.getBoundingClientRect();\n    }\n\n    var doc = document.documentElement;\n    var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n    var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n\n    if (!this.isContentEditable(this.inputElement)) {\n      coordinates = {\n        top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) + parseInt(computed.fontSize, 10) + 3 - element.scrollTop,\n        left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n      };\n      document.body.removeChild(div);\n    } else {\n      coordinates = {\n        top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize),\n        left: rect.left + windowLeft\n      };\n    }\n\n    return coordinates;\n  };\n\n  Mention.prototype.initValue = function () {\n    this.renderList();\n\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n\n  Mention.prototype.updateValues = function () {\n    var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (!isNullOrUndefined(li)) {\n      this.setSelection(li, null);\n    }\n  };\n\n  Mention.prototype.renderList = function () {\n    _super.prototype.render.call(this);\n\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, 'click', this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, 'click', this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n\n  Mention.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n\n    if (!this.isValidLI(li)) {\n      return;\n    }\n\n    this.setSelection(li, e);\n    var delay = 100;\n    this.closePopup(delay, e);\n    this.inputElement.focus();\n  };\n\n  Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n\n    if (!preventSelect && !isNullOrUndefined(e)) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n        } else {\n          _this.selectEventCallback(li, selectedData, value);\n\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, selectedData, value);\n\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n\n  Mention.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n\n  Mention.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n      this.setScrollPosition(e);\n    }\n\n    if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n      return;\n    }\n\n    if (isNullOrUndefined(e) || this.setValue(e)) {\n      return;\n    }\n  };\n\n  Mention.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n\n  Mention.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n\n  Mention.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop;\n      }\n    }\n  };\n\n  Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n\n    if (selectLi) {\n      addClass([li], dropDownBaseClasses.selected);\n    }\n\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n\n  Mention.prototype.detachChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.setValue = function (e) {\n    var dataItem = this.getItemData();\n    var textSuffix;\n    var value;\n    var endPos;\n    var range;\n    var globalRange;\n    var selection = this.inputElement.ownerDocument.getSelection();\n    var startPos = this.getTriggerCharPosition();\n    textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n\n    if (dataItem.value !== null) {\n      value = this.mentionVal(dataItem.text);\n    }\n\n    if (!this.isContentEditable(this.inputElement)) {\n      var myField = this.inputElement;\n      var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n      value += textSuffix;\n      endPos = startPos + this.mentionChar.length;\n      endPos += currentTriggerSnippet.length;\n      myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n      myField.selectionStart = startPos + value.length;\n      myField.selectionEnd = startPos + value.length;\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.onChangeEvent(e);\n      return true;\n    } else {\n      endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n\n      if (this.range && this.range.startContainer.textContent.trim() !== this.mentionChar) {\n        endPos = this.range.endOffset;\n      }\n\n      globalRange = this.range;\n      range = document.createRange();\n      range.setStart(globalRange.startContainer, startPos);\n      range.setEnd(globalRange.startContainer, endPos);\n      range.deleteContents();\n      var element = this.createElement('div');\n      element.innerHTML = value;\n      var frag = document.createDocumentFragment();\n      var node = void 0;\n      var lastNode = void 0;\n\n      while (node = element.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n\n      range.insertNode(frag);\n\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.onChangeEvent(e);\n      return true;\n    }\n  };\n\n  Mention.prototype.mentionVal = function (value) {\n    var showChar = this.showMentionChar ? this.mentionChar : '';\n\n    if (!isNullOrUndefined(this.displayTemplate)) {\n      value = this.setDisplayTemplate();\n    }\n\n    if (this.isContentEditable(this.inputElement)) {\n      return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n    } else {\n      return showChar + value;\n    }\n  };\n\n  Mention.prototype.setDisplayTemplate = function () {\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['displayTemplate']);\n\n      if (this.displayTempElement) {\n        detach(this.displayTempElement);\n        this.displayTempElement = null;\n      }\n    }\n\n    if (!this.displayTempElement) {\n      this.displayTempElement = this.createElement('div');\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.displayTempElement.innerHTML = '';\n    }\n\n    compiledString = compile(this.displayTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n\n    if (displayCompTemp && displayCompTemp.length > 0) {\n      for (var i = 0; i < displayCompTemp.length; i++) {\n        this.displayTempElement.appendChild(displayCompTemp[i]);\n      }\n    }\n\n    this.renderReactTemplates();\n    return this.displayTempElement.innerHTML;\n  };\n\n  Mention.prototype.setSpinnerTemplate = function () {\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['spinnerTemplate']);\n\n      if (this.spinnerTemplateElement) {\n        detach(this.spinnerTemplateElement);\n        this.spinnerTemplateElement = null;\n      }\n    }\n\n    if (!this.spinnerTemplateElement) {\n      this.spinnerTemplateElement = this.createElement('div');\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.spinnerTemplateElement.innerHTML = '';\n    }\n\n    compiledString = compile(this.spinnerTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n\n    if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n      for (var i = 0; i < spinnerCompTemp.length; i++) {\n        this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n      }\n    }\n\n    this.renderReactTemplates();\n  };\n\n  Mention.prototype.onChangeEvent = function (eve) {\n    this.isSelected = false;\n    var items = this.detachMentionChanges(this.itemData);\n    var preItems;\n\n    if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n      preItems = Object.defineProperties({}, {\n        value: {\n          value: this.previousItemData,\n          enumerable: true\n        },\n        text: {\n          value: this.previousItemData,\n          enumerable: true\n        }\n      });\n    } else {\n      preItems = this.previousItemData;\n    }\n\n    var eventArgs = {\n      e: eve,\n      item: this.item,\n      itemData: items,\n      previousItem: this.previousSelectedLI,\n      previousItemData: preItems,\n      isInteracted: eve ? true : false,\n      value: this.item.innerHTML,\n      element: this.inputElement\n    };\n    this.trigger('change', eventArgs);\n  };\n\n  Mention.prototype.detachMentionChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  Mention.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n\n  Mention.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  Mention.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n\n  Mention.prototype.setHover = function (li) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n\n  Mention.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  Mention.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n\n  Mention.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.search = function (text, positionX, positionY) {\n    if (this.ignoreCase && (text === this.elementValue() || text === this.elementValue().toLowerCase()) || !this.ignoreCase && text === this.elementValue()) {\n      this.resetList(this.dataSource, this.fields);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      return;\n    }\n\n    if (isNullOrUndefined(this.list)) {\n      this.renderList();\n      this.renderPopup();\n    } else {\n      this.showPopup();\n    }\n\n    this.popupObj.element.style.left = formatUnit(positionX);\n    this.popupObj.element.style.top = formatUnit(positionY);\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  Mention.prototype.destroy = function () {\n    this.hidePopup();\n    this.unWireEvent();\n\n    if (this.list) {\n      this.unWireListEvents();\n    }\n\n    if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  Mention.prototype.getLocaleName = function () {\n    return 'mention';\n  };\n\n  Mention.prototype.getNgDirective = function () {\n    return 'EJS-MENTION';\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  Mention.prototype.getModuleName = function () {\n    return 'mention';\n  };\n\n  __decorate$7([Property(null)], Mention.prototype, \"cssClass\", void 0);\n\n  __decorate$7([Property('@')], Mention.prototype, \"mentionChar\", void 0);\n\n  __decorate$7([Property(false)], Mention.prototype, \"showMentionChar\", void 0);\n\n  __decorate$7([Property(false)], Mention.prototype, \"allowSpaces\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"suffixText\", void 0);\n\n  __decorate$7([Property(25)], Mention.prototype, \"suggestionCount\", void 0);\n\n  __decorate$7([Property(0)], Mention.prototype, \"minLength\", void 0);\n\n  __decorate$7([Property('None')], Mention.prototype, \"sortOrder\", void 0);\n\n  __decorate$7([Property(true)], Mention.prototype, \"ignoreCase\", void 0);\n\n  __decorate$7([Property(false)], Mention.prototype, \"highlight\", void 0);\n\n  __decorate$7([Property()], Mention.prototype, \"locale\", void 0);\n\n  __decorate$7([Property('auto')], Mention.prototype, \"popupWidth\", void 0);\n\n  __decorate$7([Property('300px')], Mention.prototype, \"popupHeight\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"displayTemplate\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"itemTemplate\", void 0);\n\n  __decorate$7([Property('No records found')], Mention.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"spinnerTemplate\", void 0);\n\n  __decorate$7([Property()], Mention.prototype, \"target\", void 0);\n\n  __decorate$7([Property([])], Mention.prototype, \"dataSource\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"query\", void 0);\n\n  __decorate$7([Property('Contains')], Mention.prototype, \"filterType\", void 0);\n\n  __decorate$7([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], Mention.prototype, \"fields\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"actionBegin\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"actionComplete\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"actionFailure\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"change\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"beforeOpen\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"opened\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"closed\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"select\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"filtering\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"created\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"destroyed\", void 0);\n\n  Mention = __decorate$7([NotifyPropertyChanges], Mention);\n  return Mention;\n}(DropDownBase);\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\n\nexport { incrementalSearch, Search, escapeCharRegExp, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox, Mention };","map":{"version":3,"names":["Animation","Browser","ChildProperty","Complex","Component","Event","EventHandler","KeyboardEvents","L10n","NotifyPropertyChanges","Property","SanitizeHtmlHelper","addClass","append","attributes","classList","closest","compile","createElement","detach","extend","formatUnit","getComponent","getUniqueID","getValue","isNullOrUndefined","isUndefined","matches","prepend","remove","removeClass","rippleEffect","select","selectAll","setStyleAttribute","setValue","DataManager","DataUtil","Predicate","Query","ListBase","Sortable","cssClass","moveTo","Popup","createSpinner","getZindexPartial","hideSpinner","isCollide","showSpinner","Input","TextBox","Button","createCheckBox","TreeView","queryString","prevString","matches$1","activeClass","prevElementId","incrementalSearch","keyCode","items","selectedIndex","ignoreCase","elementId","String","fromCharCode","setTimeout","index","toLowerCase","i","length","contains","listItems","strLength","text","item","innerText","substr","push","Search","inputVal","searchType","undefined","itemData","queryStr","toLocaleLowerCase","escapeCharRegExp","itemsData","textContent","replace","RegExp","test","value","resetIncrementalSearchValues","highlightSearch","element","query","type","ignoreRegex","replaceQuery","findTextNode","pattern","childNodes","nodeType","trim","nodeValue","innerHTML","revertHighlightSearch","content","contentElement","querySelectorAll","parent_1","parentNode","document","createTextNode","replaceChild","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FieldSettings","_super","apply","dropDownBaseClasses","root","rtl","selected","hover","noData","fixedHead","focus","li","group","disabled","grouping","ITEMTEMPLATE_PROPERTY","DISPLAYTEMPLATE_PROPERTY","SPINNERTEMPLATE_PROPERTY","VALUETEMPLATE_PROPERTY","GROUPTEMPLATE_PROPERTY","HEADERTEMPLATE_PROPERTY","FOOTERTEMPLATE_PROPERTY","NORECORDSTEMPLATE_PROPERTY","ACTIONFAILURETEMPLATE_PROPERTY","HIDE_GROUPLIST","DropDownBase","options","_this","call","preventChange","isAngular","isPreventChange","isDynamicDataChange","addedNewItem","getPropObject","prop","newProp","oldProp","newProperty","oldProperty","propName","data","getValueByText","ignoreAccent","listData","checkValueCase","isTextByValue","dataSource","fields","typeOfData","typeof","_i","dataSource_1","checkingAccent","checkIgnoreCase","getItemValue","checkNonIgnoreCase","filter","itemValue","toString","compareValue_1","dataItem","ignoreDiacritics","textItem","typedText","getFormattedValue","templateCompiler","baseTemplate","checkTemplate","exception","l10nUpdate","actionFailure","ele","getModuleName","ulElement","list","noRecordsTemplate","actionFailureTemplate","template","compiledString","templateId","actionFailureTemplateId","noRecordsTemplateId","tempaltecheck","templateName","noDataCompTemp","isStringTemplate","appendChild","renderReactTemplates","l10nLocale","componentLocale","getLocaleName","locale","getConstant","l10n","liElem","add","setAttribute","getTextByValue","parseFloat","setEnableRtl","enableRtlElements","enableRtl","initialize","e","bindEvent","id","tagName","jsonElement","createJsonFromElement","setProperties","resetList","renderItemsBySelect","setListData","getPersistData","addOnPersist","setEnabled","enabled","updateDataAttribute","invalidAttr","attr","a","indexOf","name","getAttribute","htmlAttributes","option","getJSONfromOption","optionGroup","label","isHeader","child","updateFields","groupBy","iconCss","field","options_1","json","preRender","scrollTimer","isRequested","isDataFetched","itemTemplateId","displayTemplateId","spinnerTemplateId","valueTemplateId","groupTemplateId","headerTemplateId","footerTemplateId","event","isActive","eventArgs","cancel","trigger","emptyDataRequest","executeQuery","getQuery","then","result","renderItems","groupTemplate","renderGroupTemplate","onActionComplete","bindChildItems","catch","onActionFailure","dataManager","executeLocal","localDataArgs","itemTemplate","childElementCount","children","updateDataList","childNode","remainingItems","sortedData","liCollections","updateListValues","raiseDataBound","findListElement","findNode","attribute","liElement","listArr","slice","dataBoundEventArgs","spliceData","skip","listElements","templateListItem","createListItemFromArray","listOption","createListItemFromJson","isReact","clearTemplate","fixedHeaderElement","properties","allowCustomValue","querySelector","postRender","listElement","focusItem","selectedItem","listEle","groupTemplateID","headerItems","groupcheck","groupValue","tempHeaders","isGroupChecking","notify","module","createListItems","sortOrder","getSortedDataSource","groupDataSource","take","createList","fieldValues","showIcon","ariaAttributes","groupItemRole","setFloatingHeader","className","style","display","setFixedHeader","zIndex","scrollStop","liHeight","parseInt","getComputedStyle","getValidLi","getPropertyValue","topIndex","Math","round","scrollTop","currentLi","top","templateID","itemcheck","renderContentTemplate","listDataType","isNullData","parentElement","borderWidth","defaultView","isNaN","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","liWidth","offsetWidth","width","firstLi","textField","getDataSource","addSorting","getIndexByValue","getItems","dispatchEvent","evt","createEvent","initEvent","setFields","selectData","updateSelectElementData","isFiltering","updateSelection","renderList","render","updateDataSource","props","setUpdateInitial","updateData","j","keys","onPropertyChanged","_a","setZIndex","isEmptyData","attrs","rippleModel","duration","selector","rippleFun","wrapperElement","insertBefore","addItem","itemIndex","newList","itemsCount","selectedItemValue","itemText","itemCheck","addItemTemplate","updateActionCompleteData","updateAddItemList","listGroupItem","tempLi","splice","validationAttribute","hidden","removeAttribute","attributes$$1","itemCount","getDataByValue","_b","_c","destroy","body","__extends$1","__decorate$1","dropDownListClasses","disable","base","input","inputFocus","icon","iconAnimation","device","backIcon","filterBarClearIcon","filterInput","filterParent","mobileFilter","footer","header","clearIcon","clearIconHide","popupFullScreen","disableIcon","hiddenElement","inputObject","container","buttons","DropDownList","isListSearched","valueTempElement","opacity","initializeData","activeIndex","isPopupOpen","isDocumentClick","isInteracted","isFilterFocus","beforePopupOpen","initial","initRemoteRender","isNotSearchList","isTyped","isSelected","preventFocus","preventAutoFill","isValidKey","typedString","isEscapeKey","isPreventBlur","isTabKey","actionCompleteData","isUpdated","actionData","prevSelectPoints","isSelectCustom","isDropDownClick","preventAltUp","isCustomFilter","isSecondClick","previousValue","keyConfigure","tab","enter","escape","end","home","down","up","pageUp","pageDown","open","close","hide","space","popupObj","unWireListEvents","wireListEvents","floatLabelChange","floatLabelType","floatElement","inputWrapper","inputElement","resetHandler","preventDefault","clearAll","resetFocusElement","removeHover","removeSelection","removeFocus","resetSelection","getItemData","onChangeEvent","selectedLI","allowFiltering","cloneNode","setSelection","updateIconState","cloneElements","setHTMLAttributes","htmlAttr","updatedClassValue","split","setEnable","readonly","dataBind","defaultAttr","validateAttr","setPlaceholder","getAriaAttributes","targetElement","tabIndex","hidePopup","preventTabIndex","getNgDirective","getElementByText","getElementByValue","listItems_1","liItem","initValue","updateValues","setHiddenValue","showClearButton","onBlurHandler","relatedTarget","currentTarget","isFilterLayout","activeElement","focusOutAction","focusOut","onFocusOut","clearButton","onFocus","args","resetValueHandler","formElement","val","wireEvent","dropDownClick","focusIn","onSearch","bindCommonEvent","isDevice","keyboardModule","keyAction","keyActionHandler","bind","keyConfigs","eventName","mobileKeyActionHandler","bindClearEvent","unBindCommonEvent","onMouseClick","onMouseOver","onMouseLeave","charCode","searchKeyEvent","onServerIncrementalSearch","isValidLI","history","back","delay","closePopup","setHover","hoveredItem","hasAttribute","setScrollPosition","spinnerElement","filterInputObj","preventAction","action","preventHomeEnd","isNavAction","isNavigation","isEditTextBox","isTabAction","updateUpDownAction","pageUpSelection","getPageCount","pageDownSelection","updateHomeEndAction","showPopup","focusDropDown","selectCurrentItem","selectCurrentValueOnTab","focusEle","isSelectFocusItem","startIndex","nextItem","findLi","getBoundingClientRect","height","steps","previousItem","unWireEvent","checkSelector","onDocumentClick","isIE","info","activeStateChange","which","button","proxy_1","updateSelectedItem","preventSelect","isSelection","selectedData","detachChanges","selectEventCallback","setSelectOptions","previousItemData","focusedItem","activeItem","valueTemplate","setValueTemplate","previousSibling","isFilterElement","clearElement","removeProperty","previousSelectedLI","dropdownCompiler","dropdownTemplate","valuecheck","valueCompTemp","selectedItems","dataValue","dataText","eve","detachChangeEvent","defineProperties","enumerable","preItems","selectedElement","onFilterUp","ctrlKey","searchLists","onFilterDown","getSelectionPoints","removeFillSelection","selection","setSelectionRange","filterQuery","clone","filterType","dataType","where","start","abs","selectionStart","selectionEnd","visibility","eventArgs_1","preventDefaultAction","filteringAction","baseEventArgs","focusIndexItem","setSearchBox","popupElement","createInput","placeholder","filterBarPlaceholder","clearIconElement","clearText","searchKeyModule","onInput","pasteHandler","renderPopup","checkField_1","checkVal","some","x","setInputValue","updateActionCompleteDataValues","addNewItem","newElement","value_1","isExist","actionCompleteDataUpdate","highlightedItem","refreshPopup","popupEle","searchBox","listHeight","popupHeight","headerTemplate","setHeaderTemplate","footerTemplate","setFooterTemplate","searchBoxHeight","maxHeight","offsetValue","left","getOffsetValue","firstItem","isEmptyList","textIndent","paddingLeft","getFocusElement","createPopup","checkCollision","collision","X","Y","position","setSearchBoxPosition","backIconElement","clickOnBackIcon","scrollParentElements","getScrollableParent","scrollParentElements_1","scrollHandler","listScroll","selectedElementID","inputParent","animModel","popupInstance","popup","animation","show","destroyPopup","marginTop","resolveCollision","popupStyles","borderTop","borderBottom","setPopupPosition","setWidth","targetType","relateTo","offsetY","offsetX","isResetItem","actionList","targetExitViewport","window","innerHeight","border","popupOffset","lastItem","offsetHeight","offsetTop","lastItemOffsetValue","count","paddingBottom","inputHeight","popupWidth","inputWidth","scrollBottom","isInitial","currentOffset","nextBottom","nextOffset","paddingTop","boxRange","isPopupButton","blur","setEleWidth","match","scrollableParentElements","scrollableParentElements_1","fixedHeader","removeChild","role","updatedCssClassValues","setReadOnly","calculateWidth","getElementsByClassName","selectElement","onselect","stopImmediatePropagation","onchange","floatLabelElement","renderComplete","footercheck","footerCompTemp","headercheck","headerCompTemp","contentEle","setOldText","setOldValue","refreshPosition","checkData","isChangeValue","isChangeText","checkCustomValue","updateInputFields","_loop_1","this_1","setReadonly","setCssClass","checkValidLi","setSelectionData","listLength_1","checkField","listLength_2","removeFloating","addFloating","setClearButton","ddlProps","newClass","oldClass","invokeRenderPopup","proxy_2","onpopstate","pushState","renderHightSearch","isSelectVal","isFocused","attrArray","clear","__extends$2","__decorate$2","RTL","DROPDOWNTREE","HIDDENELEMENT","DROPDOWNICON","SHOW_CHIP","SHOW_CLEAR","SHOW_DD_ICON","CHIP_INPUT","INPUTFOCUS","INPUTGROUP","ICONANIMATION","CLOSEICON_CLASS","CHIP_WRAPPER","CHIP_COLLECTION","CHIP","CHIP_CONTENT","CHIP_CLOSE","HIDEICON","DDTHIDEICON","POPUP_CLASS","PARENTITEM","CONTENT","DROPDOWN","DISABLED","ICONS","CHECKALLPARENT","CHECKALLHIDE","BIGGER","SMALL","ALLTEXT","CHECKBOXFRAME","CHECK","CHECKBOXWRAP","FILTERWRAP","DDTICON","FOOTER","HEADER","NODATACONTAINER","NODATA","HEADERTEMPLATE","FOOTERTEMPLATE","NORECORDSTEMPLATE","ACTIONFAILURETEMPLATE","CUSTOMTEMPLATE","REMAIN_WRAPPER","OVERFLOW_VIEW","SHOW_TEXT","TOTAL_COUNT_WRAPPER","REMAIN_COUNT","Fields","TreeSettings","DropDownTree","filterTimer","isFilteredData","isFilterRestore","filterDelayTime","isClicked","keyEntity","isFirstRender","isInitialized","currentText","currentValue","oldValue","removeValue","selectedText","treeItems","isNodeSelected","isDynamicChange","clearIconWidth","customTemplateId","altUp","altDown","shiftTab","moveDown","moveLeft","moveRight","moveUp","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","ctrlA","isTree","popupDiv","ensureAutoCheck","inputEle","inputObj","showDropDownIcon","getDirective","createHiddenElement","createClearIcon","setElementWidth","setAttributes","tree","wireTreeEvents","renderTree","isRemoteData","allowMultiSelection","showCheckBox","mode","createChip","wrapText","overFlowWrapper","setTreeValue","setTreeText","updateHiddenValue","setSelectedValue","updateView","wireEvents","firstUl","treeObj","hasTemplate","customTemplate","treeSettings","autoCheck","hideCheckAll","flag","checkAllEle","renderFilter","filterContainer","autocomplete","filterObj","filterChangeHandler","appendTo","clearTimeout","filterHandler","treeData","getTreeData","filterFields","cloneFields","treeDataType","selfReferencefilter","nestedFilter","getTreeFields","filteredFields","matchedDataSource","filteredChild","nestedChildFilter","node","isMatchedNode","matchedChildren","filteredItems","assign","matchedData","parentId","parentValue","checkValue","mouseIn","overAllClear","windowResize","treeAction","wireCheckAllWrapperEvents","checkAllParent","checkAllAction","unWireEvents","isClearButtonClick","showOverAllClear","isValue","chipWrapper","changeOnBlur","triggerChangeEvent","updateOverFlowView","ensurePlaceHolder","isEqual","ddtCompareValues","isChipDelete","newValue","isValid","observedArgs","isValueChange","keyEventArgs","showSelectAll","clickHandler","resetValue","overAllContainer","temp","tempData","tempIndex","wrapperleng","remaining","downIconWidth","overflowCountTemplate","totalCountTemplate","remainContent","totalContent","remainElement","remainSize","delimiterChar","getOverflowVal","textArr","pop","join","chips","lastChild","updateRemainTemplate","updateDelimMode","firstChild","getSelectedData","loadOnDemand","chipCollection","getValidMode","createSelectAllWrapper","selectAllSpan","touchClass","checkBoxElement","setLocale","firstElementChild","lastElementChild","checkWrapper","checkElement","changeState","wrapper","state","ariaState","frameSpan","isReverseUpdate","checkAll","uncheckAll","setMultiSelect","unSelect","selectAllText","unSelectAllText","setValidValue","valArr","selectedNodes","updateMode","checkedNodes","updateSelectedValues","difference","givenText","getNestedItems","newData","objlen","dataId","childData","getChildType","mapper","nodeSelected","onNodeSelected","nodeChecked","onNodeChecked","nodeChecking","beforeCheck","nodeClicked","onNodeClicked","dataBound","OnDataBound","expandOn","nodeSelecting","onBeforeSelect","nodeTemplate","isCancelled","portals","concat","updatePopupHeight","checkSelectAll","wrap","getHeight","ddElement","documentElement","clientHeight","isFilter","isFooter","isScroller","getTreeDataType","expandAll","restoreFilterSelection","elements","setEnableRTL","clonedField","cloneChildField","hasChildren","expanded","imageUrl","tableName","tooltip","treeFields","parentID","getTreeChildren","isChecked","getActualProperties","childFields","ds","len","updateTemplate","getEventArgs","nodeData","getNode","getNodeDetails","removeSelectedData","nodes","updateClearButton","nextSibling","chipClose","updateDropDownIconState","spinIcon","appendSpan","ensureClearIconPosition","setMultiSelectValue","newValues","selectedValues","ddtValue","checkSelection","getNodeData","childItems","getChildNodeData","obj","newChildItems","childNodeData","getChildMapperFields","muteOnChange","textValue","hiddenInputValue","setChipValues","setTagValues","chip","chipContent","removeChip","templatestring","templateComplier","tempArr","setSelectAllWrapper","updateOverflowWrapper","clearCheckAll","selectAllItems","arr","updateTreeSettings","updateValue","updateCheckBoxState","checkBox","noRecord","updateRecordTemplate","updateMultiSelection","updateOption","updateAllowFiltering","destroyFilter","updateFilterPlaceHolder","updateText","updateModelMode","validMode","overFlow","ensureVisible","getData","__extends$3","__decorate$3","SPINNER_CLASS","inputObject$1","ComboBox","preventBlur","targetFocus","inputValue","customValue","allowCustom","valueMuteChange","setHoverList","inlineSearch","autofill","setAutoFill","isHover","currentFillValue","isAndroidAutoFill","setAutoFillSelection","isAndroid","currentPoints","prevEnd","curEnd","prevStart","curStart","property","isKeyNavigate","previousValue_1","updateCustomValueCallback","changeData","comboProps","isEscape","searchItem","__extends$4","__decorate$4","AutoComplete","_this_1","isFiltered","searchList","mapping","suggestionCount","queryElements","queries","fn","filterAction","minLength","postBackAction","fieldsSettings","itemCreated","highlight","itemCreated_1","showPopupButton","checkFields_1_1","_this_2","atcProps","isHighlight","FLOATLINE","FLOATTEXT","LABELTOP","LABELBOTTOM","createFloatLabel","overAllWrapper","searchWrapper","floatLinelement","encodePlaceholder","updateFloatLabelState","componentWrapper","placeholderElement","floatLine","placeholderText","setPlaceHolder","floatLabelFocus","floatLabelBlur","spanElement","hiddenInput","__extends$5","__decorate$5","FOCUS","DISABLED$1","OVER_ALL_WRAPPER","ELEMENT_WRAPPER","ELEMENT_MOBILE_WRAPPER","HIDE_LIST","DELIMITER_VIEW","CHIP_WRAPPER$1","CHIP$1","CHIP_CONTENT$1","CHIP_CLOSE$1","CHIP_SELECTED","SEARCHBOX_WRAPPER","DELIMITER_VIEW_WRAPPER","ZERO_SIZE","REMAIN_WRAPPER$1","CLOSEICON_CLASS$1","DELIMITER_WRAPPER","POPUP_WRAPPER","INPUT_ELEMENT","RTL_CLASS","CLOSE_ICON_HIDE","MOBILE_CHIP","FOOTER$1","HEADER$1","DISABLE_ICON","SPINNER_CLASS$1","HIDDEN_ELEMENT","dropdownIcon","TOTAL_COUNT_WRAPPER$1","BOX_ELEMENT","FILTERPARENT","CUSTOM_WIDTH","FILTERINPUT","MultiSelect","previousFilterText","selectAllEventData","selectAllEventEle","scrollFocusStatus","keyDownStatus","enableRTL","requiredModules","modules","enableGroupCheckBox","prevOnChange","isProtectedOnChange","enableSelectionOrder","hideSelectedItem","closePopupOnSelect","member","updateHTMLAttribute","popupWrapper","enable","refreshPlaceHolder","containerAttr","updateReadonly","updateCssClass","updateOldPropCssClass","onPopupShown","focusAtFirstListItem","updateListItems","mainList","isFirstClick","loadTemplate","mainListItems","findGroupStart","deselectHeader","refreshListItems","valueEle","addListFocus","focusAtLastListItem","updateListARIA","disableStatus","ensureAriaDisabled","status","removelastSelection","chipCollectionWrapper","tempValues","removeChipSelection","updateDelimeter","makeTextBoxEmpty","refreshSelection","checkPlaceholderSize","targetInputElement","getForQuery","predicate","or","proxy","checkEle","updateActionList","mainData","mainListCollection","remoteCustomValue","checkForCustomValue","tempQuery","unwireListEvents","setInitialValue","selectAllAction","setDynValue","initialTextUpdate","initialValueUpdate","initialUpdate","updateValueState","previousElementSibling","nextElementSibling","hideGroupItem","ariaValue","checkMaxSelection","element1","temp1","groupItemLength","listItem","searchCount","searchActiveCount","maximumSelectionLength","openClick","openOnClick","keyUp","char","isWordCharacter","expandTextbox","search","remoteFilterAction","dataUpdater","backCommand","dataChecks","customData","random","JSON","parse","stringify","wrapperClick","isDocClickFromCheck","addTagOnBlur","listLiElement","allowChipAddition","updateListSelection","updateDelimView","focused","removeChipFocus","refreshInputHight","createSpanElement","dropIcon","marginRight","setPlaceholderSize","validateValues","sort","newVal","oldVal","initStatus","updateTempValue","getPagingCount","collection","focusInHandler","showDelimWrapper","viewWrapper","delimiterWrapper","hideDelimWrapper","size","mobFilter","calcPopupWidth","checkTextLength","popupKeyActions","updateAriaAttribute","homeNavigation","isHome","scrollEle","onKeyDown","altKey","arrowUp","arrowDown","selectByKey","spaceKeySelection","escapeAction","keyNavigation","checkBackCommand","moveByList","focuseElem","moveBy","removeSelectedChip","selectListByKey","hideOverAllClear","limit","selectAllItem","selectedElem","addChipSelection","moveByTop","updateCheck","chipClick","elem","onChipRemove","customVal","setFloatLabelType","removeAllItems","isClearAll","mainElement","removeVal","invokeCheckboxSelection","updateMainList","updateChipStatus","isSelectAll","targetEle","element_1","val_1","removeIndex","hideElement","targetEle_1","clearAllCallback","element2","addValue","addListSelection","addChip","dispatchSelect","isNotTrigger","val_2","isServerRendered","updateListSelectEventCallback","getChip","closeElements","onMobileChipInteraction","chipElem","multiCompiler","multiselectTemplate","enableHtmlSanitizer","setClass","classes","mouseOut","fieldProperty","listCurrentOptions","checkboxFilter","overAllHeight","selectAllHeight","unwireScrollEvents","checkboxFilterInput","wireScrollEvents","onListMouseDown","textVal","delim","listValue","updateWrapperText","addValidInputClass","removeListSelection","indexItem","noDataEle","isDynamicGroupItemUpdate","isReactTemplateUpdate","isAngularTemplateUpdate","temp_1","fieldValue","data_1","selectItems","mainlist","addListHover","ariaCheck","delimChar","headerLi","liChecked","liUnchecked","groupValues","findGroupAttrtibutes","updateCheckBox","checked","unChecked","groupHeader","filterClear","wrapperType","wrapperData","sanitize","raminElement","remainCompildTemp","checkClearIconWidth","paddingRight","totalWidth","updateRemainWidth","updateRemainingText","remainTemp","totalTemp","newTemp","selectionLimit","focusedElement","textboxValueUpdate","beforeSelectArgs","preventSelectEvent","index_1","count_1","updatedataValueItems","updateHiddenElement","hiddenValue","wrapperText","map","isRemoveAll","onLoadSelect","updateVal","dropDownIcon","reInitializePoup","msProps","presentItemValue","addNonPresentItems","mainLiLength","liLength","styles","spellcheck","tabindex","checkInitialValue","isData","optionsElement","valueCol","textCol","optionsLen","opt","checkAutoFocus","ICON","CHECKBOXFRAME$1","CHECK$1","CHECKBOXWRAP$1","INDETERMINATE","searchBackIcon","FOCUS$1","CheckBoxSelection","parent","activeLi","activeEle","removeEventListener","addEventListener","isDestroyed","on","listSelection","setSelectAll","setDeviceSearchBox","getFocus","setReorder","getActiveList","checboxCreate","setPopupFullScreen","off","checkboxEle","frameElm","checkboxWrapper","selectAll$$1","validateCheckNode","checkWrap","isCheck","isPrevent","activeLiCount","remLi","ulEle","__extends$6","__decorate$6","SelectionSettings","ToolbarSettings","ListBox","isDataSourceUpdate","ListBox_1","inputString","initLoad","isCustomFiltering","initialSelectedOptions","initWrapper","hiddenSelect","selectionSettings","updateSelectionSettings","showCheckbox","l10nSelect","checkBoxSelectionModule","initDraggable","allowDragAndDrop","scope","itemClass","dragStart","triggerDragStart","drag","triggerDrag","beforeDrop","beforeDragEnd","drop","dragEnd","placeHolder","helper","sender","refEle","jsonData","initToolbar","pos","toolbarSettings","prevScope","toolElem","createButtons","updateToolBarState","tBListBox","getElementById","btn","title","moveFrom","moveAllTo","moveAllFrom","forEach","required","setHeight","spinner","refreshClearIcon","KeyUp","listBoxClasses","searchEle","noRecElem","filterWireEvents","initToolbarAndStyles","setCheckboxPosition","setFiltering","filterElem","txtLength","scopedLB","badge","getDragArgs","dragSelected","isIos","overflow","dragEventArgs","allowDragAll","scrollParent","boundRect","scrollMoved","y","pageY","listObj","dragValue","droppedElement","getDataByValues","liColl","droppedData","selectedOptions","dropValue","getArgs","sourceArgs","previousData","destArgs","dragArgs","source","previousIndex","currentIndex","sourceArgs1","currentData","destination","ul_1","toSortIdx_1","toIdx_1","getCurIdx","rIdx","jsonIdx","sIdx","idx","jsonIdx_1","sIdx_1","li_1","fLiColl_1","currIdx_1","ul_2","fListData_1","fSortData_1","srcIdx","jsonSrcIdx","sortIdx","destIdx","liCollElem_1","removeSelected","sourceElem","sortable","placeHolderElement","dragArgs1","liCollElem","destElem","elems","triggerBeforeItemRender","curData","enableItems","updateSelectedOptions","addItems","removeItems","removeItem","objValue","dupData","itemIdx","removeIdxes","removeLiIdxes","k","updateLiCollection","getElemByValue","getSelectedItems","moveUpDown","targetId","tlistbox","getScopedListBox","moveData","moveAllData","getDataList","getSortedList","sortData","liEle","getElementsByTagName","dataValue1","_loop_2","dataValue2","this_2","triggerChange","ulList","mainCount","ulEleCount","listindex","valueindex","form","keyDownHandler","focusOutHandler","wireToolbarEvent","formResetHandler","getToolElem","toolbarClickHandler","unwireEvents","clearFilterIconElem","selectHandler","liItems","isKey","isSelect","currSelIdx","selectedLi","shiftKey","min","prevSelIdx","max","liDataValue_1","value1","values","selectedLis","getDataByElements","getDataByElems","toolbarAction","moveItemTo","moveItemFrom","moveAllItemTo","moveAllItemFrom","isUp","tempItems","reverse","jsonToIdx","fListBox","tListBox","dataIdx","tListData","tSortData","fliCollections","dataLiIdx","tliCollections","isRefresh","rLiCollection_1","n1","n2","toColl","tJsonData","selectNextList","inst","childCnt","liIdx","validIdx","getValidIndex","Number","fromIdx","toIdx","cbox","getGrabbedItems","isDragEnd","stopPropagation","code","upDownKeyHandler","ul","defaultIdx","fliIdx","fli","cli","selectedidx","sidx","eidx","eventArgsData_1","cul","updateSelectTag","clearSelection","dvalue_1","isText","liselect","getSelectTag","checkDisabledState","listObj_1","wrap_1","listWrap","checkboxPosition","liCollLen","l10nShow","l10nSel","__extends$7","__decorate$7","Mention","suffixText","allowSpaces","mentionChar","showMentionChar","cssClass$$1","isCollided","lineBreak","isContentEditable","elementValue","onKeyUp","hideWaitingSpinner","spinnerTemplate","spinnerTemplateElement","showWaitingSpinner","setSpinnerTemplate","rangetextContent","range","getCurrentRange","startContainer","currentRange","getTextRange","lastWordRange","getLastLetter","Regex","charRegex","isMatchedText","charAt","substring","lastIndexOf","charCodeAt","isMatched","ownerDocument","getSelection","getRangeAt","setDataIndex","component","startPos","workingNodeContent","selectStartOffset","startOffset","words","wordCnt","nodeName","popupEle_1","coordinates_1","initializePopup","getCoordinates","getTriggerCharPosition","cssText","mostRecentTriggerCharPos","actionOnScroll","div","span","globalRange","coordinates","computed","rect","selectedNodePosition","createRange","setStart","setEnd","collapse","doc","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","fontSize","offsetLeft","selectLi","textSuffix","endPos","mentionVal","myField","currentTriggerSnippet","endOffset","deleteContents","frag","createDocumentFragment","lastNode","insertNode","cloneRange","setStartAfter","removeAllRanges","addRange","showChar","displayTemplate","setDisplayTemplate","displayTempElement","displayCompTemp","spinnerCompTemp","detachMentionChanges","positionX","positionY"],"sources":["C:/Users/High Tech Assistance/Desktop/e-learningProject__frontend - Copie/e-learningProject__frontend - Copie/frontend/node_modules/@syncfusion/ej2-grids/node_modules/@syncfusion/ej2-dropdowns/dist/es6/ej2-dropdowns.es5.js"],"sourcesContent":["import { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n\n/**\n * IncrementalSearch module file\n */\nvar queryString = '';\nvar prevString = '';\nvar matches$1 = [];\nvar activeClass = 'e-active';\nvar prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\nfunction incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId) {\n    queryString += String.fromCharCode(keyCode);\n    setTimeout(function () {\n        queryString = '';\n    }, 1000);\n    var index;\n    queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n    if (prevElementId === elementId && prevString === queryString) {\n        for (var i = 0; i < matches$1.length; i++) {\n            if (matches$1[i].classList.contains(activeClass)) {\n                index = i;\n                break;\n            }\n        }\n        index = index + 1;\n        return matches$1[index] ? matches$1[index] : matches$1[0];\n    }\n    else {\n        var listItems = items;\n        var strLength = queryString.length;\n        var text = void 0;\n        var item = void 0;\n        selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n        var i = selectedIndex;\n        matches$1 = [];\n        do {\n            if (i === listItems.length) {\n                i = -1;\n            }\n            if (i === -1) {\n                index = 0;\n            }\n            else {\n                index = i;\n            }\n            item = listItems[index];\n            text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n            if (text.substr(0, strLength) === queryString) {\n                matches$1.push(listItems[index]);\n            }\n            i++;\n        } while (i !== selectedIndex);\n        prevString = queryString;\n        prevElementId = elementId;\n        return matches$1[0];\n    }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\nfunction Search(inputVal, items, searchType, ignoreCase) {\n    var listItems = items;\n    ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n    var itemData = { item: null, index: null };\n    if (inputVal && inputVal.length) {\n        var strLength = inputVal.length;\n        var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n        queryStr = escapeCharRegExp(queryStr);\n        for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {\n            var item = itemsData[i];\n            var text = (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n            if ((searchType === 'Equal' && text === queryStr) || (searchType === 'StartsWith' && text.substr(0, strLength) === queryStr) || (searchType === 'EndsWith' && text.substr(text.length - queryStr.length) === queryStr) || (searchType === 'Contains' && new RegExp(queryStr, \"g\").test(text))) {\n                itemData.item = item;\n                itemData.index = i;\n                return { item: item, index: i };\n            }\n        }\n        return itemData;\n    }\n    return itemData;\n}\nfunction escapeCharRegExp(value) {\n    return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nfunction resetIncrementalSearchValues(elementId) {\n    if (prevElementId === elementId) {\n        prevElementId = '';\n        prevString = '';\n        queryString = '';\n        matches$1 = [];\n    }\n}\n\n/* eslint-disable jsdoc/require-param, valid-jsdoc */\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\nfunction highlightSearch(element, query, ignoreCase, type) {\n    if (query === '') {\n        return;\n    }\n    else {\n        var ignoreRegex = ignoreCase ? 'gim' : 'gm';\n        // eslint-disable-next-line\n        query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n        var replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ?\n            '(' + query + ')$' : '(' + query + ')';\n        findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n    }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\nfunction findTextNode(element, pattern) {\n    for (var index = 0; element.childNodes && (index < element.childNodes.length); index++) {\n        if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n            var value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n            element.childNodes[index].nodeValue = '';\n            element.innerHTML = element.innerHTML.trim() + value;\n            break;\n        }\n        else {\n            findTextNode(element.childNodes[index], pattern);\n        }\n    }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\nfunction revertHighlightSearch(content) {\n    var contentElement = content.querySelectorAll('.e-highlight');\n    for (var i = contentElement.length - 1; i >= 0; i--) {\n        var parent_1 = contentElement[i].parentNode;\n        var text = document.createTextNode(contentElement[i].textContent);\n        parent_1.replaceChild(text, contentElement[i]);\n    }\n}\n\n/**\n * Common source\n */\n\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FieldSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends(FieldSettings, _super);\n    function FieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"groupBy\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"htmlAttributes\", void 0);\n    return FieldSettings;\n}(ChildProperty));\nvar dropDownBaseClasses = {\n    root: 'e-dropdownbase',\n    rtl: 'e-rtl',\n    content: 'e-content',\n    selected: 'e-active',\n    hover: 'e-hover',\n    noData: 'e-nodata',\n    fixedHead: 'e-fixed-head',\n    focus: 'e-item-focus',\n    li: 'e-list-item',\n    group: 'e-list-group-item',\n    disabled: 'e-disabled',\n    grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar DISPLAYTEMPLATE_PROPERTY = 'DisplayTemplate';\nvar SPINNERTEMPLATE_PROPERTY = 'SpinnerTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\nvar DropDownBase = /** @__PURE__ @class */ (function (_super) {\n    __extends(DropDownBase, _super);\n    /**\n     * * Constructor for DropDownBase class\n     *\n     * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownBase(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        _this.isPreventChange = false;\n        _this.isDynamicDataChange = false;\n        _this.addedNewItem = false;\n        return _this;\n    }\n    DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n        var newProperty = new Object();\n        var oldProperty = new Object();\n        var propName = function (prop) {\n            return prop;\n        };\n        newProperty[propName(prop)] = newProp[propName(prop)];\n        oldProperty[propName(prop)] = oldProp[propName(prop)];\n        var data = new Object();\n        data.newProperty = newProperty;\n        data.oldProperty = oldProperty;\n        return data;\n    };\n    DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n        var value = null;\n        if (!isNullOrUndefined(this.listData)) {\n            if (ignoreCase) {\n                value = this.checkValueCase(text, true, ignoreAccent);\n            }\n            else {\n                value = this.checkValueCase(text, false, ignoreAccent);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n        var _this = this;\n        var value = null;\n        if (isTextByValue) {\n            value = text;\n        }\n        var dataSource = this.listData;\n        var fields = this.fields;\n        var type = this.typeOfData(dataSource).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n                var item = dataSource_1[_i];\n                if (!isNullOrUndefined(item)) {\n                    if (ignoreAccent) {\n                        value = this.checkingAccent(String(item), text, ignoreCase);\n                    }\n                    else {\n                        if (ignoreCase) {\n                            if (this.checkIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase);\n                            }\n                        }\n                        else {\n                            if (this.checkNonIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (ignoreCase) {\n                dataSource.filter(function (item) {\n                    var itemValue = getValue(fields.value, item);\n                    if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n                        value = getValue(fields.value, item);\n                    }\n                });\n            }\n            else {\n                if (isTextByValue) {\n                    var compareValue_1 = null;\n                    compareValue_1 = value;\n                    dataSource.filter(function (item) {\n                        var itemValue = getValue(fields.value, item);\n                        if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n                            value = getValue(fields.text, item);\n                        }\n                    });\n                }\n                else {\n                    dataSource.filter(function (item) {\n                        if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n                            value = getValue(fields.value, item);\n                        }\n                    });\n                }\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n        var dataItem = DataUtil.ignoreDiacritics(String(item));\n        var textItem = DataUtil.ignoreDiacritics(text.toString());\n        var value = null;\n        if (ignoreCase) {\n            if (this.checkIgnoreCase(dataItem, textItem)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        else {\n            if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n        return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n    };\n    DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n        return String(item) === text.toString() ? true : false;\n    };\n    DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n        var value = null;\n        var dataSource = this.listData;\n        var type = this.typeOfData(dataSource).typeof;\n        if (isTextByValue) {\n            value = dataItem.toString();\n        }\n        else {\n            if (ignoreCase) {\n                value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n            }\n            else {\n                value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n        var checkTemplate = false;\n        if (baseTemplate) {\n            try {\n                checkTemplate = (selectAll(baseTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n        var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n        if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n            var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            var compiledString = void 0;\n            var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            ele.innerHTML = '';\n            var tempaltecheck = this.templateCompiler(template);\n            if (tempaltecheck) {\n                compiledString = compile(select(template, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(template);\n            }\n            var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n            if (noDataCompTemp && noDataCompTemp.length > 0) {\n                for (var i = 0; i < noDataCompTemp.length; i++) {\n                    ele.appendChild(noDataCompTemp[i]);\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else {\n            var l10nLocale = { noRecordsTemplate: 'No records found', actionFailureTemplate: 'Request failed' };\n            var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n            if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n                this.l10n = componentLocale;\n            }\n            else {\n                this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : 'dropdowns', l10nLocale, this.locale);\n            }\n            var content = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n            if (this.getModuleName() === 'listbox') {\n                var liElem = this.createElement('li');\n                liElem.textContent = content;\n                ele.appendChild(liElem);\n                liElem.classList.add('e-list-nrt');\n                liElem.setAttribute('role', 'option');\n            }\n            else {\n                ele.innerHTML = content;\n            }\n        }\n    };\n    DropDownBase.prototype.getLocaleName = function () {\n        return 'drop-down-base';\n    };\n    DropDownBase.prototype.getTextByValue = function (value) {\n        var text = this.checkValueCase(value, false, false, true);\n        return text;\n    };\n    DropDownBase.prototype.getFormattedValue = function (value) {\n        if (this.listData && this.listData.length) {\n            var item = this.typeOfData(this.listData);\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'number'\n                || item.typeof === 'number') {\n                return parseFloat(value);\n            }\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'boolean'\n                || item.typeof === 'boolean') {\n                return ((value === 'true') || ('' + value === 'true'));\n            }\n        }\n        return value;\n    };\n    /**\n     * Sets RTL to dropdownbase wrapper\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setEnableRtl = function () {\n        if (this.list) {\n            this.enableRtlElements.push(this.list);\n        }\n        if (this.enableRtl) {\n            addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n        }\n        else {\n            removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n        }\n    };\n    /**\n     * Initialize the Component.\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.initialize = function (e) {\n        this.bindEvent = true;\n        this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n        if (this.element.tagName === 'UL') {\n            var jsonElement = ListBase.createJsonFromElement(this.element);\n            this.setProperties({ fields: { text: 'text', value: 'text' } }, true);\n            this.resetList(jsonElement, this.fields);\n        }\n        else if (this.element.tagName === 'SELECT') {\n            var dataSource = this.dataSource instanceof Array ? (this.dataSource.length > 0 ? true : false)\n                : !isNullOrUndefined(this.dataSource) ? true : false;\n            if (!dataSource) {\n                this.renderItemsBySelect();\n            }\n            else if (this.isDynamicDataChange) {\n                this.setListData(this.dataSource, this.fields, this.query);\n            }\n        }\n        else {\n            this.setListData(this.dataSource, this.fields, this.query, e);\n        }\n    };\n    /**\n     * Get the properties to be maintained in persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownBase.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setEnabled = function () {\n        this.element.setAttribute('aria-disabled', (this.enabled) ? 'false' : 'true');\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @param {string} value - Specifies the attribute values to add on the input element.\n     * @returns {void}\n     */\n    DropDownBase.prototype.updateDataAttribute = function (value) {\n        var invalidAttr = ['class', 'style', 'id', 'type', 'aria-expanded', 'aria-autocomplete', 'aria-readonly'];\n        var attr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    };\n    DropDownBase.prototype.renderItemsBySelect = function () {\n        var element = this.element;\n        var fields = { value: 'value', text: 'text' };\n        var jsonElement = [];\n        var group = element.querySelectorAll('select>optgroup');\n        var option = element.querySelectorAll('select>option');\n        this.getJSONfromOption(jsonElement, option, fields);\n        if (group.length) {\n            for (var i = 0; i < group.length; i++) {\n                var item = group[i];\n                var optionGroup = {};\n                optionGroup[fields.text] = item.label;\n                optionGroup.isHeader = true;\n                var child = item.querySelectorAll('option');\n                jsonElement.push(optionGroup);\n                this.getJSONfromOption(jsonElement, child, fields);\n            }\n            element.querySelectorAll('select>option');\n        }\n        this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n        this.resetList(jsonElement, fields);\n    };\n    DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n        var field = {\n            'fields': {\n                text: text,\n                value: value,\n                groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n                htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n                iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n            }\n        };\n        this.setProperties(field, true);\n    };\n    DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n        for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n            var option = options_1[_i];\n            var json = {};\n            json[fields.text] = option.innerText;\n            json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ?\n                option.getAttribute(fields.value) : option.innerText;\n            items.push(json);\n        }\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.preRender = function () {\n        // there is no event handler\n        this.scrollTimer = -1;\n        this.enableRtlElements = [];\n        this.isRequested = false;\n        this.isDataFetched = false;\n        this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n        this.displayTemplateId = \"\" + this.element.id + DISPLAYTEMPLATE_PROPERTY;\n        this.spinnerTemplateId = \"\" + this.element.id + SPINNERTEMPLATE_PROPERTY;\n        this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n        this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n        this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n        this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n        this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n    };\n    /**\n     * Creates the list items of DropDownBase component.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.setListData = function (dataSource, fields, query, event) {\n        var _this = this;\n        fields = fields ? fields : this.fields;\n        var ulElement;\n        this.isActive = true;\n        var eventArgs = { cancel: false, data: dataSource, query: query };\n        this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n        this.trigger('actionBegin', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.showSpinner();\n                if (dataSource instanceof DataManager) {\n                    _this.isRequested = true;\n                    if (_this.isDataFetched) {\n                        _this.emptyDataRequest(fields);\n                        return;\n                    }\n                    eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n                        _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                        _this.trigger('actionComplete', e, function (e) {\n                            if (!e.cancel) {\n                                var listItems = e.result;\n                                if (listItems.length === 0) {\n                                    _this.isDataFetched = true;\n                                }\n                                ulElement = _this.renderItems(listItems, fields);\n                                if (_this.groupTemplate) {\n                                    _this.renderGroupTemplate(ulElement);\n                                }\n                                _this.onActionComplete(ulElement, listItems, e);\n                                _this.isRequested = false;\n                                _this.bindChildItems(listItems, ulElement, fields, e);\n                            }\n                        });\n                    }).catch(function (e) {\n                        _this.isRequested = false;\n                        _this.onActionFailure(e);\n                        _this.hideSpinner();\n                    });\n                }\n                else {\n                    var dataManager = new DataManager(eventArgs.data);\n                    var listItems = (_this.getQuery(eventArgs.query)).executeLocal(dataManager);\n                    var localDataArgs = { cancel: false, result: listItems };\n                    _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                    _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n                        if (!localDataArgs.cancel) {\n                            ulElement = _this.renderItems(localDataArgs.result, fields);\n                            _this.onActionComplete(ulElement, localDataArgs.result, event);\n                            if (_this.groupTemplate) {\n                                _this.renderGroupTemplate(ulElement);\n                            }\n                            _this.bindChildItems(localDataArgs.result, ulElement, fields);\n                            setTimeout(function () {\n                                if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && (ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || (_this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)))) {\n                                    _this.updateDataList();\n                                }\n                            });\n                        }\n                    });\n                }\n            }\n        });\n    };\n    DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n        var _this = this;\n        if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n            setTimeout(function () {\n                var childNode = _this.remainingItems(_this.sortedData, fields);\n                append(childNode, ulElement);\n                _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                _this.updateListValues();\n                _this.raiseDataBound(listItems, e);\n            }, 0);\n        }\n        else {\n            this.raiseDataBound(listItems, e);\n        }\n    };\n    DropDownBase.prototype.updateListValues = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n        var liElement = null;\n        if (list) {\n            var listArr = [].slice.call(list.querySelectorAll(findNode));\n            for (var index = 0; index < listArr.length; index++) {\n                if (listArr[index].getAttribute(attribute) === (value + '')) {\n                    liElement = listArr[index];\n                    break;\n                }\n            }\n        }\n        return liElement;\n    };\n    DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n        this.hideSpinner();\n        var dataBoundEventArgs = {\n            items: listItems,\n            e: e\n        };\n        this.trigger('dataBound', dataBoundEventArgs);\n    };\n    DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n        var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n        if (this.itemTemplate) {\n            var listElements = this.templateListItem(spliceData, fields);\n            return [].slice.call(listElements.childNodes);\n        }\n        var type = this.typeOfData(spliceData).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n        }\n        return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n    };\n    DropDownBase.prototype.emptyDataRequest = function (fields) {\n        var listItems = [];\n        this.onActionComplete(this.renderItems(listItems, fields), listItems);\n        this.isRequested = false;\n        this.hideSpinner();\n    };\n    DropDownBase.prototype.showSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.hideSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.onActionFailure = function (e) {\n        this.liCollections = [];\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        addClass([this.list], dropDownBaseClasses.noData);\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        this.listData = list;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n        }\n        this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n        if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n            for (var i = 0; i < ulElement.childElementCount; i++) {\n                if (ulElement.children[i].classList.contains('e-list-group-item')) {\n                    if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n                        addClass([ulElement.children[i]], HIDE_GROUPLIST);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(this.list)) {\n            this.list.innerHTML = '';\n            this.list.appendChild(ulElement);\n            this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n            this.ulElement = this.list.querySelector('ul');\n            this.postRender(this.list, list, this.bindEvent);\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n        var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n        if (focusItem && !selectedItem) {\n            focusItem.classList.add(dropDownBaseClasses.focus);\n        }\n        if (list.length <= 0) {\n            this.l10nUpdate();\n            addClass([listElement], dropDownBaseClasses.noData);\n        }\n        else {\n            listElement.classList.remove(dropDownBaseClasses.noData);\n        }\n    };\n    /**\n     * Get the query to do the data operation before list item generation.\n     *\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {Query} Returns the query to do the data query operation.\n     */\n    DropDownBase.prototype.getQuery = function (query) {\n        return query ? query : this.query ? this.query : new Query();\n    };\n    /**\n     * To render the template content for group header element.\n     *\n     * @param {HTMLElement} listEle - Specifies the group list elements.\n     * @returns {void}\n     */\n    DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n        if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n            var dataSource = this.dataSource;\n            var option = { groupTemplateID: this.groupTemplateId, isStringTemplate: this.isStringTemplate };\n            var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n            var groupcheck = this.templateCompiler(this.groupTemplate);\n            if (groupcheck) {\n                var groupValue = select(this.groupTemplate, document).innerHTML.trim();\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * To create the ul li list items\n     *\n     * @param {object []} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the ul li list items.\n     */\n    DropDownBase.prototype.createListItems = function (dataSource, fields) {\n        if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n            if (fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            addClass([this.list], dropDownBaseClasses.grouping);\n        }\n        else {\n            dataSource = this.getSortedDataSource(dataSource);\n        }\n        var options = this.listOption(dataSource, fields);\n        var spliceData = (dataSource.length > 100) ?\n            new DataManager(dataSource).executeLocal(new Query().take(100))\n            : dataSource;\n        this.sortedData = dataSource;\n        return ListBase.createList(this.createElement, (this.getModuleName() === 'autocomplete') ? spliceData : dataSource, options, true, this);\n    };\n    DropDownBase.prototype.listOption = function (dataSource, fields) {\n        var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        var fieldValues = !isNullOrUndefined(fields.properties) ?\n            fields.properties : fields;\n        var options = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldValues,\n            showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        return extend({}, options, fields, true);\n    };\n    DropDownBase.prototype.setFloatingHeader = function (e) {\n        if (isNullOrUndefined(this.fixedHeaderElement)) {\n            this.fixedHeaderElement = this.createElement('div', { className: dropDownBaseClasses.fixedHead });\n            if (!this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n                this.fixedHeaderElement.style.display = 'none';\n            }\n            prepend([this.fixedHeaderElement], this.list);\n            this.setFixedHeader();\n        }\n        if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n            this.setFixedHeader();\n        }\n        this.scrollStop(e);\n    };\n    DropDownBase.prototype.scrollStop = function (e) {\n        var target = !isNullOrUndefined(e) ? e.target : this.list;\n        var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n        var topIndex = Math.round(target.scrollTop / liHeight);\n        var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n        for (var i = topIndex; i > -1; i--) {\n            if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n                var currentLi = liCollections[i];\n                this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n                this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n                this.fixedHeaderElement.style.display = 'block';\n                break;\n            }\n            else {\n                this.fixedHeaderElement.style.display = 'none';\n                this.fixedHeaderElement.style.top = 'none';\n            }\n        }\n    };\n    DropDownBase.prototype.getValidLi = function () {\n        return this.liCollections[0];\n    };\n    /**\n     * To render the list items\n     *\n     * @param {object[]} listData - Specifies the list of array of data.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the list items.\n     */\n    DropDownBase.prototype.renderItems = function (listData, fields) {\n        var ulElement;\n        if (this.itemTemplate && listData) {\n            var dataSource = listData;\n            if (dataSource && fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            else {\n                dataSource = this.getSortedDataSource(dataSource);\n            }\n            this.sortedData = dataSource;\n            var spliceData = (dataSource.length > 100) ?\n                new DataManager(dataSource).executeLocal(new Query().take(100))\n                : dataSource;\n            ulElement = this.templateListItem((this.getModuleName() === 'autocomplete') ? spliceData : dataSource, fields);\n        }\n        else {\n            ulElement = this.createListItems(listData, fields);\n        }\n        return ulElement;\n    };\n    DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n        var option = this.listOption(dataSource, fields);\n        option.templateID = this.itemTemplateId;\n        option.isStringTemplate = this.isStringTemplate;\n        var itemcheck = this.templateCompiler(this.itemTemplate);\n        if (itemcheck) {\n            var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n            return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n        }\n        else {\n            return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n        }\n    };\n    DropDownBase.prototype.typeOfData = function (items) {\n        var item = { typeof: null, item: null };\n        for (var i = 0; (!isNullOrUndefined(items) && i < items.length); i++) {\n            if (!isNullOrUndefined(items[i])) {\n                var listDataType = typeof (items[i]) === 'string' ||\n                    typeof (items[i]) === 'number' || typeof (items[i]) === 'boolean';\n                var isNullData = listDataType ? isNullOrUndefined(items[i]) :\n                    isNullOrUndefined(getValue((this.fields.value ? this.fields.value : 'value'), items[i]));\n                if (!isNullData) {\n                    return item = { typeof: typeof items[i], item: items[i] };\n                }\n            }\n        }\n        return item;\n    };\n    DropDownBase.prototype.setFixedHeader = function () {\n        this.list.parentElement.style.display = 'block';\n        var borderWidth = 0;\n        if (this.list && this.list.parentElement) {\n            borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n            /*Shorthand property not working in Firefox for getComputedStyle method.\n            Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n            Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n            if (isNaN(borderWidth)) {\n                var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n                var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n                var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n                var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n                borderWidth = (borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth);\n            }\n        }\n        var liWidth = this.getValidLi().offsetWidth - borderWidth;\n        this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n        setStyleAttribute(this.fixedHeaderElement, { zIndex: 10 });\n        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n    };\n    DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n        if (dataSource && this.sortOrder !== 'None') {\n            var textField = this.fields.text ? this.fields.text : 'text';\n            if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number'\n                || this.typeOfData(dataSource).typeof === 'boolean') {\n                textField = '';\n            }\n            dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n        }\n        return dataSource;\n    };\n    /**\n     * Return the index of item which matched with given value in data source\n     *\n     * @param {string | number | boolean} value - Specifies given value.\n     * @returns {number} Returns the index of the item.\n     */\n    DropDownBase.prototype.getIndexByValue = function (value) {\n        var index;\n        var listItems = this.getItems();\n        for (var i = 0; i < listItems.length; i++) {\n            if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * To dispatch the event manually\n     *\n     * @param {HTMLElement} element - Specifies the element to dispatch the event.\n     * @param {string} type - Specifies the name of the event.\n     * @returns {void}\n     */\n    DropDownBase.prototype.dispatchEvent = function (element, type) {\n        var evt = document.createEvent('HTMLEvents');\n        evt.initEvent(type, false, true);\n        element.dispatchEvent(evt);\n    };\n    /**\n     * To set the current fields\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setFields = function () {\n        if (this.fields.value && !this.fields.text) {\n            this.updateFields(this.fields.value, this.fields.value);\n        }\n        else if (!this.fields.value && this.fields.text) {\n            this.updateFields(this.fields.text, this.fields.text);\n        }\n        else if (!this.fields.value && !this.fields.text) {\n            this.updateFields('text', 'text');\n        }\n    };\n    /**\n     * reset the items list.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.resetList = function (dataSource, fields, query, e) {\n        if (this.list) {\n            if ((this.element.tagName === 'SELECT' && this.element.options.length > 0)\n                || (this.element.tagName === 'UL' && this.element.childNodes.length > 0)) {\n                var data = dataSource instanceof Array ? (dataSource.length > 0)\n                    : !isNullOrUndefined(dataSource);\n                if (!data && this.selectData && this.selectData.length > 0) {\n                    dataSource = this.selectData;\n                }\n            }\n            dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;\n            this.addedNewItem = false;\n            this.setListData(dataSource, fields, query, e);\n        }\n    };\n    DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n        if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n            this.selectData = this.listData;\n        }\n    };\n    DropDownBase.prototype.updateSelection = function () {\n        // This is for after added the item, need to update the selected index values.\n    };\n    DropDownBase.prototype.renderList = function () {\n        // This is for render the list items.\n        this.render();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateDataSource = function (props) {\n        this.resetList(this.dataSource);\n    };\n    DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n        this.isDataFetched = false;\n        var updateData = {};\n        for (var j = 0; props.length > j; j++) {\n            if (newProp[props[j]] && props[j] === 'fields') {\n                this.setFields();\n                updateData[props[j]] = newProp[props[j]];\n            }\n            else if (newProp[props[j]]) {\n                updateData[props[j]] = newProp[props[j]];\n            }\n        }\n        if (Object.keys(updateData).length > 0) {\n            if (Object.keys(updateData).indexOf('dataSource') === -1) {\n                updateData.dataSource = this.dataSource;\n            }\n            this.updateDataSource(updateData);\n        }\n    };\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'dropdownbase') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'query':\n                case 'sortOrder':\n                case 'dataSource':\n                case 'itemTemplate':\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this.setEnabled();\n                    break;\n                case 'groupTemplate':\n                    this.renderGroupTemplate(this.list);\n                    if (this.ulElement && this.fixedHeaderElement) {\n                        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n                        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n                    }\n                    break;\n                case 'locale':\n                    if (this.list && (!isNullOrUndefined(this.liCollections) && this.liCollections.length === 0)) {\n                        this.l10nUpdate();\n                    }\n                    break;\n                case 'zIndex':\n                    this.setProperties({ zIndex: newProp.zIndex }, true);\n                    this.setZIndex();\n                    break;\n            }\n        }\n    };\n    /**\n     * Build and render the component\n     *\n     * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.render = function (e, isEmptyData) {\n        this.list = this.createElement('div', { className: dropDownBaseClasses.content, attrs: { 'tabindex': '0' } });\n        this.list.classList.add(dropDownBaseClasses.root);\n        this.setFields();\n        var rippleModel = { duration: 300, selector: '.' + dropDownBaseClasses.li };\n        this.rippleFun = rippleEffect(this.list, rippleModel);\n        var group = this.element.querySelector('select>optgroup');\n        if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (this.getModuleName() === 'dropdownbase') {\n            if (this.element.getAttribute('tabindex')) {\n                this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n            }\n            removeClass([this.element], dropDownBaseClasses.root);\n            this.element.style.display = 'none';\n            var wrapperElement = this.createElement('div');\n            this.element.parentElement.insertBefore(wrapperElement, this.element);\n            wrapperElement.appendChild(this.element);\n            wrapperElement.appendChild(this.list);\n        }\n        this.setEnableRtl();\n        this.setEnabled();\n        if (!isEmptyData) {\n            this.initialize(e);\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownBase.prototype.getModuleName = function () {\n        return 'dropdownbase';\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownBase.prototype.getItems = function () {\n        return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    DropDownBase.prototype.addItem = function (items, itemIndex) {\n        if (!this.list || (this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox')) {\n            this.renderList();\n        }\n        if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n            var newList = [].slice.call(this.listData);\n            newList.push(items);\n            newList = this.getSortedDataSource(newList);\n            if (this.fields.groupBy) {\n                newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n                itemIndex = newList.indexOf(items);\n            }\n            else {\n                itemIndex = newList.indexOf(items);\n            }\n        }\n        var itemsCount = this.getItems().length;\n        var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        items = (items instanceof Array ? items : [items]);\n        var index;\n        index = (isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1) ? itemsCount : itemIndex;\n        var fields = this.fields;\n        if (items && fields.groupBy) {\n            items = ListBase.groupDataSource(items, fields.properties);\n        }\n        var liCollections = [];\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var isHeader = item.isHeader;\n            var li = this.createElement('li', { className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li, id: 'option-add-' + i });\n            var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n            if (isHeader) {\n                li.innerText = itemText;\n            }\n            if (this.itemTemplate && !isHeader) {\n                var itemCheck = this.templateCompiler(this.itemTemplate);\n                var compiledString = itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n                if (addItemTemplate) {\n                    append(addItemTemplate, li);\n                }\n            }\n            else if (!isHeader) {\n                li.appendChild(document.createTextNode(itemText));\n            }\n            li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n            li.setAttribute('role', 'option');\n            this.notify('addItem', { module: 'CheckBoxSelection', item: li });\n            liCollections.push(li);\n            this.listData.push(item);\n            if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n                index = null;\n            }\n            this.updateActionCompleteData(li, item, index);\n            //Listbox event\n            this.trigger('beforeItemRender', { element: li, item: item });\n        }\n        if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n            this.list.innerHTML = '';\n            this.list.classList.remove(dropDownBaseClasses.noData);\n            this.list.appendChild(this.ulElement);\n            this.liCollections = liCollections;\n            append(liCollections, this.ulElement);\n            this.updateAddItemList(this.list, itemsCount);\n        }\n        else {\n            if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n                this.ulElement.innerHTML = '';\n            }\n            var attr = [];\n            for (var i = 0; i < items.length; i++) {\n                var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n                for (var j = 0; j < listGroupItem.length; j++) {\n                    attr[j] = listGroupItem[j].innerText;\n                }\n                if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n                    for (var j = 0; j < listGroupItem.length; j++) {\n                        if (attr[j] === liCollections[i].innerText) {\n                            if (this.sortOrder === 'None') {\n                                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n                            }\n                            else {\n                                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n                            }\n                            i = i + 1;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.liCollections[index]) {\n                        this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n                    }\n                    else {\n                        this.ulElement.appendChild(liCollections[i]);\n                    }\n                }\n                var tempLi = [].slice.call(this.liCollections);\n                tempLi.splice(index, 0, liCollections[i]);\n                this.liCollections = tempLi;\n                index += 1;\n                if (this.getModuleName() === 'multiselect') {\n                    this.updateDataList();\n                }\n            }\n        }\n        if (selectedItemValue || itemIndex === 0) {\n            this.updateSelection();\n        }\n        this.addedNewItem = true;\n    };\n    DropDownBase.prototype.validationAttribute = function (target, hidden) {\n        var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n        hidden.setAttribute('name', name);\n        target.removeAttribute('name');\n        var attributes$$1 = ['required', 'aria-required', 'form'];\n        for (var i = 0; i < attributes$$1.length; i++) {\n            if (!target.getAttribute(attributes$$1[i])) {\n                continue;\n            }\n            var attr = target.getAttribute(attributes$$1[i]);\n            hidden.setAttribute(attributes$$1[i], attr);\n            target.removeAttribute(attributes$$1[i]);\n        }\n    };\n    DropDownBase.prototype.setZIndex = function () {\n        // this is for component wise\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {\n        // this is for ComboBox custom value\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateAddItemList = function (list, itemCount) {\n        // this is for multiselect add item\n    };\n    DropDownBase.prototype.updateDataList = function () {\n        // this is for multiselect update list items\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownBase.prototype.getDataByValue = function (value) {\n        if (!isNullOrUndefined(this.listData)) {\n            var type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (!isNullOrUndefined(item) && item === value) {\n                        return item;\n                    }\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                        return item;\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownBase.prototype.destroy = function () {\n        if (document.body.contains(this.list)) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            if (!isNullOrUndefined(this.rippleFun)) {\n                this.rippleFun();\n            }\n            detach(this.list);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], DropDownBase.prototype, \"fields\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownBase.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"itemTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"groupTemplate\", void 0);\n    __decorate([\n        Property('No records found')\n    ], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n    __decorate([\n        Property('Request failed')\n    ], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n    __decorate([\n        Property('None')\n    ], DropDownBase.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property(true)\n    ], DropDownBase.prototype, \"enabled\", void 0);\n    __decorate([\n        Property([])\n    ], DropDownBase.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"query\", void 0);\n    __decorate([\n        Property('StartsWith')\n    ], DropDownBase.prototype, \"filterType\", void 0);\n    __decorate([\n        Property(true)\n    ], DropDownBase.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(1000)\n    ], DropDownBase.prototype, \"zIndex\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownBase.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], DropDownBase.prototype, \"locale\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"destroyed\", void 0);\n    DropDownBase = __decorate([\n        NotifyPropertyChanges\n    ], DropDownBase);\n    return DropDownBase;\n}(Component));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\nvar dropDownListClasses = {\n    root: 'e-dropdownlist',\n    hover: dropDownBaseClasses.hover,\n    selected: dropDownBaseClasses.selected,\n    rtl: dropDownBaseClasses.rtl,\n    li: dropDownBaseClasses.li,\n    disable: dropDownBaseClasses.disabled,\n    base: dropDownBaseClasses.root,\n    focus: dropDownBaseClasses.focus,\n    input: 'e-input-group',\n    inputFocus: 'e-input-focus',\n    icon: 'e-input-group-icon e-ddl-icon',\n    iconAnimation: 'e-icon-anim',\n    value: 'e-input-value',\n    device: 'e-ddl-device',\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    mobileFilter: 'e-ddl-device-filter',\n    footer: 'e-ddl-footer',\n    header: 'e-ddl-header',\n    clearIcon: 'e-clear-icon',\n    clearIconHide: 'e-clear-icon-hide',\n    popupFullScreen: 'e-popup-full-page',\n    disableIcon: 'e-ddl-disable-icon',\n    hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n    container: null,\n    buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\nvar DropDownList = /** @__PURE__ @class */ (function (_super) {\n    __extends$1(DropDownList, _super);\n    /**\n     * * Constructor for creating the DropDownList component.\n     *\n     * @param {DropDownListModel} options - Specifies the DropDownList model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownList(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isListSearched = false;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        return _this;\n    }\n    /**\n     * Initialize the event handler.\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.preRender = function () {\n        this.valueTempElement = null;\n        this.element.style.opacity = '0';\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n        this.activeIndex = this.index;\n        this.queryString = '';\n    };\n    DropDownList.prototype.initializeData = function () {\n        this.isPopupOpen = false;\n        this.isDocumentClick = false;\n        this.isInteracted = false;\n        this.isFilterFocus = false;\n        this.beforePopupOpen = false;\n        this.initial = true;\n        this.initRemoteRender = false;\n        this.isNotSearchList = false;\n        this.isTyped = false;\n        this.isSelected = false;\n        this.preventFocus = false;\n        this.preventAutoFill = false;\n        this.isValidKey = false;\n        this.typedString = '';\n        this.isEscapeKey = false;\n        this.isPreventBlur = false;\n        this.isTabKey = false;\n        this.actionCompleteData = { isUpdated: false };\n        this.actionData = { isUpdated: false };\n        this.prevSelectPoints = {};\n        this.isSelectCustom = false;\n        this.isDropDownClick = false;\n        this.preventAltUp = false;\n        this.isCustomFilter = false;\n        this.isSecondClick = false;\n        this.previousValue = null;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    };\n    DropDownList.prototype.setZIndex = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    };\n    DropDownList.prototype.renderList = function (e, isEmptyData) {\n        _super.prototype.render.call(this, e, isEmptyData);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    DropDownList.prototype.floatLabelChange = function () {\n        if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n            var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n            if (this.inputElement.value !== '' || this.isInteracted) {\n                classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n            }\n            else {\n                classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n            }\n        }\n    };\n    DropDownList.prototype.resetHandler = function (e) {\n        e.preventDefault();\n        this.clearAll(e);\n    };\n    DropDownList.prototype.resetFocusElement = function () {\n        this.removeHover();\n        this.removeSelection();\n        this.removeFocus();\n        this.list.scrollTop = 0;\n        if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n            var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n            if (li) {\n                li.classList.add(dropDownListClasses.focus);\n            }\n        }\n    };\n    DropDownList.prototype.clearAll = function (e, properties) {\n        if (isNullOrUndefined(properties) || (!isNullOrUndefined(properties) &&\n            (isNullOrUndefined(properties.dataSource) ||\n                (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n            this.isActive = true;\n            this.resetSelection(properties);\n        }\n        var dataItem = this.getItemData();\n        if (this.previousValue === dataItem.value) {\n            return;\n        }\n        this.onChangeEvent(e);\n    };\n    DropDownList.prototype.resetSelection = function (properties) {\n        if (this.list) {\n            if ((!isNullOrUndefined(properties) &&\n                (isNullOrUndefined(properties.dataSource) ||\n                    (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n                this.selectedLI = null;\n                this.actionCompleteData.isUpdated = false;\n                this.actionCompleteData.ulElement = null;\n                this.actionCompleteData.list = null;\n                this.resetList(properties.dataSource);\n            }\n            else {\n                if (this.allowFiltering && this.getModuleName() !== 'autocomplete'\n                    && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n                }\n                this.resetFocusElement();\n            }\n        }\n        this.hiddenElement.innerHTML = '';\n        this.inputElement.value = '';\n        this.value = null;\n        this.itemData = null;\n        this.text = null;\n        this.index = null;\n        this.activeIndex = null;\n        this.item = null;\n        this.queryString = '';\n        if (this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n            this.valueTempElement = null;\n        }\n        this.setSelection(null, null);\n        this.isSelectCustom = false;\n        this.updateIconState();\n        this.cloneElements();\n    };\n    DropDownList.prototype.setHTMLAttributes = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                if (htmlAttr === 'class') {\n                    var updatedClassValue = (this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ')).trim();\n                    if (updatedClassValue !== '') {\n                        addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n                    }\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n                    this.enabled = false;\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n                    this.readonly = true;\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\n                }\n                else {\n                    var defaultAttr = ['title', 'id', 'placeholder',\n                        'role', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    var validateAttr = ['name', 'required'];\n                    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n                        defaultAttr.push('tabindex');\n                    }\n                    if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement);\n                        }\n                        else {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                }\n            }\n        }\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            this.inputWrapper.container.removeAttribute('tabindex');\n        }\n    };\n    DropDownList.prototype.getAriaAttributes = function () {\n        return {\n            'aria-disabled': 'false',\n            'role': 'combobox',\n            'aria-expanded': 'false',\n            'aria-live': 'polite',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    };\n    DropDownList.prototype.setEnableRtl = function () {\n        Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n        if (this.popupObj) {\n            this.popupObj.enableRtl = this.enableRtl;\n            this.popupObj.dataBind();\n        }\n    };\n    DropDownList.prototype.setEnable = function () {\n        Input.setEnabled(this.enabled, this.inputElement);\n        if (this.enabled) {\n            removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'false');\n            this.targetElement().setAttribute('tabindex', this.tabIndex);\n        }\n        else {\n            this.hidePopup();\n            addClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'true');\n            this.targetElement().tabIndex = -1;\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownList.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    DropDownList.prototype.getLocaleName = function () {\n        return 'drop-down-list';\n    };\n    DropDownList.prototype.preventTabIndex = function (element) {\n        if (this.getModuleName() === 'dropdownlist') {\n            element.tabIndex = -1;\n        }\n    };\n    DropDownList.prototype.targetElement = function () {\n        return this.inputWrapper.container;\n    };\n    DropDownList.prototype.getNgDirective = function () {\n        return 'EJS-DROPDOWNLIST';\n    };\n    DropDownList.prototype.getElementByText = function (text) {\n        return this.getElementByValue(this.getValueByText(text));\n    };\n    DropDownList.prototype.getElementByValue = function (value) {\n        var item;\n        var listItems = this.getItems();\n        for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n            var liItem = listItems_1[_i];\n            if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n                item = liItem;\n                break;\n            }\n        }\n        return item;\n    };\n    DropDownList.prototype.initValue = function () {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    DropDownList.prototype.updateValues = function () {\n        if (!isNullOrUndefined(this.value)) {\n            this.setSelection(this.getElementByValue(this.value), null);\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            var element = this.getElementByText(this.text);\n            if (isNullOrUndefined(element)) {\n                this.setProperties({ text: null });\n                return;\n            }\n            else {\n                this.setSelection(element, null);\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    };\n    DropDownList.prototype.onBlurHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        var target = e.relatedTarget;\n        var currentTarget = e.target;\n        var isPreventBlur = this.isPreventBlur;\n        this.isPreventBlur = false;\n        //IE 11 - issue\n        if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) ||\n            !this.isFilterLayout() && isNullOrUndefined(target))) {\n            if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n                this.filterInput.focus();\n            }\n            else {\n                this.targetElement().focus();\n            }\n            return;\n        }\n        if (this.isDocumentClick || (!isNullOrUndefined(this.popupObj)\n            && document.body.contains(this.popupObj.element) &&\n            this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter))) {\n            if (!this.beforePopupOpen) {\n                this.isDocumentClick = false;\n            }\n            return;\n        }\n        if (((this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement)\n            && (document.activeElement !== target || (document.activeElement === target &&\n                currentTarget.classList.contains(dropDownListClasses.inputFocus)))) ||\n            (isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering &&\n                currentTarget !== this.inputWrapper.container) || this.getModuleName() !== 'dropdownlist' &&\n            !this.inputWrapper.container.contains(target) || this.isTabKey) {\n            this.isDocumentClick = this.isPopupOpen ? true : false;\n            this.focusOutAction(e);\n            this.isTabKey = false;\n        }\n        if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n            this.isActive = false;\n            this.beforePopupOpen = false;\n        }\n    };\n    DropDownList.prototype.focusOutAction = function (e) {\n        this.isInteracted = false;\n        this.focusOut(e);\n        this.onFocusOut();\n    };\n    DropDownList.prototype.onFocusOut = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isSelected) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(null);\n        }\n        this.floatLabelChange();\n        this.dispatchEvent(this.hiddenElement, 'change');\n        if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n            this.dispatchEvent(this.inputElement, 'blur');\n        }\n        if (this.inputWrapper.clearButton) {\n            addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        }\n        this.trigger('blur');\n    };\n    DropDownList.prototype.onFocus = function (e) {\n        if (!this.isInteracted) {\n            this.isInteracted = true;\n            var args = { isInteracted: e ? true : false, event: e };\n            this.trigger('focus', args);\n        }\n        this.updateIconState();\n    };\n    DropDownList.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            var val = (this.element.tagName === this.getNgDirective()) ? null : this.inputElement.getAttribute('value');\n            this.text = val;\n        }\n    };\n    DropDownList.prototype.wireEvent = function () {\n        EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n        this.bindCommonEvent();\n    };\n    DropDownList.prototype.bindCommonEvent = function () {\n        EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        else {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.mobileKeyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        this.bindClearEvent();\n    };\n    DropDownList.prototype.bindClearEvent = function () {\n        if (this.showClearButton) {\n            EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n        }\n    };\n    DropDownList.prototype.unBindCommonEvent = function () {\n        if (this.targetElement()) {\n            EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n        }\n        var formElement = this.inputElement && closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n        if (this.showClearButton) {\n            EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n        }\n    };\n    DropDownList.prototype.updateIconState = function () {\n        if (this.showClearButton) {\n            if (this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.wireListEvents = function () {\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    };\n    DropDownList.prototype.onSearch = function (e) {\n        if (e.charCode !== 32 && e.charCode !== 13) {\n            if (this.list === undefined) {\n                this.renderList();\n            }\n            this.searchKeyEvent = e;\n            this.onServerIncrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onServerIncrementalSearch = function (e) {\n        if (!this.isRequested && !isNullOrUndefined(this.list) &&\n            !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n            this.incrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.setSelection(li, e);\n        if (Browser.isDevice && this.isFilterLayout()) {\n            history.back();\n        }\n        else {\n            var delay = 100;\n            this.closePopup(delay, e);\n        }\n    };\n    DropDownList.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    DropDownList.prototype.setHover = function (li) {\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    DropDownList.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    DropDownList.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    DropDownList.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    DropDownList.prototype.incrementalSearch = function (e) {\n        if (this.liCollections.length > 0) {\n            var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n            if (!isNullOrUndefined(li)) {\n                this.setSelection(li, e);\n                this.setScrollPosition();\n            }\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            this.spinnerElement.innerHTML = '';\n            this.spinnerElement = null;\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] ||\n                !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    DropDownList.prototype.keyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n        var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n        this.isEscapeKey = e.action === 'escape';\n        this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n        var isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            var isTabAction = e.action === 'tab' || e.action === 'close';\n            if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n                this.searchKeyEvent = e;\n                this.renderList(e);\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                isNavigation && this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if ((isTabAction && this.getModuleName() !== 'autocomplete') && this.isPopupOpen\n                || e.action === 'escape') {\n                e.preventDefault();\n            }\n            this.isSelected = e.action === 'escape' ? false : this.isSelected;\n            this.isTyped = (isNavigation || e.action === 'escape') ? false : this.isTyped;\n            switch (e.action) {\n                case 'down':\n                case 'up':\n                    this.updateUpDownAction(e);\n                    break;\n                case 'pageUp':\n                    this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'pageDown':\n                    this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'home':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'end':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'space':\n                    if (this.getModuleName() === 'dropdownlist') {\n                        if (!this.beforePopupOpen) {\n                            this.showPopup();\n                        }\n                    }\n                    break;\n                case 'open':\n                    this.showPopup(e);\n                    break;\n                case 'hide':\n                    this.preventAltUp = this.isPopupOpen;\n                    this.hidePopup(e);\n                    this.focusDropDown(e);\n                    break;\n                case 'enter':\n                    this.selectCurrentItem(e);\n                    break;\n                case 'tab':\n                    this.selectCurrentValueOnTab(e);\n                    break;\n                case 'escape':\n                case 'close':\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                        this.focusDropDown(e);\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownList.prototype.updateUpDownAction = function (e) {\n        var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            if (this.getModuleName() === 'autocomplete') {\n                startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n                index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            }\n            var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        e.preventDefault();\n    };\n    DropDownList.prototype.updateHomeEndAction = function (e) {\n        if (this.getModuleName() === 'dropdownlist') {\n            var findLi = 0;\n            if (e.action === 'home') {\n                findLi = 0;\n            }\n            else {\n                findLi = this.getItems().length - 1;\n            }\n            e.preventDefault();\n            if (this.activeIndex === findLi) {\n                return;\n            }\n            this.setSelection(this.liCollections[findLi], e);\n        }\n    };\n    DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.selectCurrentItem(e);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                this.focusDropDown(e);\n            }\n        }\n    };\n    DropDownList.prototype.mobileKeyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if ((this.isEditTextBox()) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            if (this.list === undefined && !this.isRequested) {\n                this.searchKeyEvent = e;\n                this.renderList();\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if (e.action === 'enter') {\n                this.selectCurrentItem(e);\n            }\n        }\n    };\n    DropDownList.prototype.selectCurrentItem = function (e) {\n        if (this.isPopupOpen) {\n            var li = this.list.querySelector('.' + dropDownListClasses.focus);\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n            this.hidePopup(e);\n            this.focusDropDown(e);\n        }\n        else {\n            this.showPopup();\n        }\n    };\n    DropDownList.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    DropDownList.prototype.getPageCount = function () {\n        var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n    };\n    DropDownList.prototype.pageUpSelection = function (steps, event) {\n        var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n        this.setSelection(previousItem, event);\n    };\n    DropDownList.prototype.pageDownSelection = function (steps, event) {\n        var list = this.getItems();\n        var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n        this.setSelection(previousItem, event);\n    };\n    DropDownList.prototype.unWireEvent = function () {\n        EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n        EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n        EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n        this.unBindCommonEvent();\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.unWireListEvents = function () {\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    };\n    DropDownList.prototype.checkSelector = function (id) {\n        return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n    };\n    DropDownList.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) &&\n            !this.inputWrapper.container.contains(e.target)) {\n            if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n                this.isDocumentClick = true;\n                var isActive = this.isRequested;\n                this.isInteracted = false;\n                this.hidePopup(e);\n                if (!isActive) {\n                    this.onFocusOut();\n                    this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n                }\n            }\n        }\n        else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput)\n            && !(this.getModuleName() === 'combobox' &&\n                !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n            this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() ||\n                document.activeElement === this.filterInput);\n            e.preventDefault();\n        }\n    };\n    DropDownList.prototype.activeStateChange = function () {\n        if (this.isDocumentClick) {\n            this.hidePopup();\n            this.onFocusOut();\n            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n    };\n    DropDownList.prototype.focusDropDown = function (e) {\n        if (!this.initial && this.isFilterLayout()) {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.dropDownClick = function (e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n            return;\n        }\n        var target = e.target;\n        if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n            e.preventDefault();\n        }\n        if (!this.readonly) {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                if (this.isFilterLayout()) {\n                    this.focusDropDown(e);\n                }\n            }\n            else {\n                this.focusIn(e);\n                this.floatLabelChange();\n                this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n                this.isDropDownClick = true;\n                this.showPopup(e);\n            }\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            // eslint-disable-next-line max-len\n            var duration = (this.element.tagName === this.getNgDirective() && this.itemTemplate) ? 500 : 100;\n            if (!this.isSecondClick) {\n                setTimeout(function () {\n                    proxy_1.cloneElements();\n                    proxy_1.isSecondClick = true;\n                }, duration);\n            }\n        }\n        else {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.cloneElements = function () {\n        if (this.list) {\n            var ulElement = this.list.querySelector('ul');\n            if (ulElement) {\n                ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                this.actionCompleteData.ulElement = ulElement;\n            }\n        }\n    };\n    DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                }\n                else {\n                    _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, e, preventSelect, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    DropDownList.prototype.activeItem = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n            this.removeSelection();\n            li.classList.add(dropDownBaseClasses.selected);\n            this.removeHover();\n            li.setAttribute('aria-selected', 'true');\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.setValue = function (e) {\n        var dataItem = this.getItemData();\n        if (dataItem.value === null) {\n            Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        else {\n            Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n        }\n        else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n        }\n        var clearIcon = dropDownListClasses.clearIcon;\n        var isFilterElement = this.isFiltering() && this.filterInput && (this.getModuleName() === 'combobox');\n        var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n        if (this.isFiltering() && clearElement) {\n            clearElement.style.removeProperty('visibility');\n        }\n        if (this.previousValue === dataItem.value) {\n            this.isSelected = false;\n            return true;\n        }\n        else {\n            this.isSelected = !this.initial ? true : false;\n            this.isSelectCustom = false;\n            if (this.getModuleName() === 'dropdownlist') {\n                this.updateIconState();\n            }\n            return false;\n        }\n    };\n    DropDownList.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    DropDownList.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.setValue(e)) {\n            return;\n        }\n        if ((!this.isPopupOpen && !isNullOrUndefined(li)) || (this.isPopupOpen && !isNullOrUndefined(e) &&\n            (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter'))) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(e);\n        }\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n            this.setScrollPosition(e);\n        }\n        if (Browser.info.name !== 'mozilla') {\n            attributes(this.inputElement, { 'aria-label': this.inputElement.value });\n            attributes(this.targetElement(), { 'aria-describedby': this.inputElement.id != '' ? this.inputElement.id : this.element.id });\n            this.targetElement().removeAttribute('aria-live');\n        }\n    };\n    DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n        var checkTemplate = false;\n        if (dropdownTemplate) {\n            try {\n                checkTemplate = (document.querySelectorAll(dropdownTemplate).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownList.prototype.setValueTemplate = function () {\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['valueTemplate']);\n            if (this.valueTempElement) {\n                detach(this.valueTempElement);\n                this.inputElement.style.display = 'block';\n                this.valueTempElement = null;\n            }\n        }\n        if (!this.valueTempElement) {\n            this.valueTempElement = this.createElement('span', { className: dropDownListClasses.value });\n            this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n            this.inputElement.style.display = 'none';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.valueTempElement.innerHTML = '';\n        }\n        var valuecheck = this.dropdownCompiler(this.valueTemplate);\n        if (valuecheck) {\n            compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.valueTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n        if (valueCompTemp && valueCompTemp.length > 0) {\n            for (var i = 0; i < valueCompTemp.length; i++) {\n                this.valueTempElement.appendChild(valueCompTemp[i]);\n            }\n        }\n        this.renderReactTemplates();\n    };\n    DropDownList.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    DropDownList.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    /**\n     * To trigger the change event for list.\n     *\n     * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onChangeEvent = function (eve) {\n        var dataItem = this.getItemData();\n        var index = this.isSelectCustom ? null : this.activeIndex;\n        this.setProperties({ 'index': index, 'text': dataItem.text, 'value': dataItem.value }, true);\n        this.detachChangeEvent(eve);\n    };\n    DropDownList.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    DropDownList.prototype.detachChangeEvent = function (eve) {\n        this.isSelected = false;\n        this.previousValue = this.value;\n        this.activeIndex = this.index;\n        this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n        if (!this.initial) {\n            var items = this.detachChanges(this.itemData);\n            var preItems = void 0;\n            if (typeof this.previousItemData === 'string' ||\n                typeof this.previousItemData === 'boolean' ||\n                typeof this.previousItemData === 'number') {\n                preItems = Object.defineProperties({}, {\n                    value: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    },\n                    text: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    }\n                });\n            }\n            else {\n                preItems = this.previousItemData;\n            }\n            this.setHiddenValue();\n            var eventArgs = {\n                e: eve,\n                item: this.item,\n                itemData: items,\n                previousItem: this.previousSelectedLI,\n                previousItemData: preItems,\n                isInteracted: eve ? true : false,\n                value: this.value,\n                element: this.element,\n                event: eve\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n        }\n        if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n            removeClass([this.inputWrapper.container], 'e-valid-input');\n        }\n    };\n    DropDownList.prototype.setHiddenValue = function () {\n        if (!isNullOrUndefined(this.value)) {\n            if (this.hiddenElement.querySelector('option')) {\n                var selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.textContent = this.text;\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n            else {\n                this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n                var selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    };\n    /**\n     * Filter bar implementation\n     *\n     * @param {KeyboardEventArgs} e - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onFilterUp = function (e) {\n        if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                case 38: //up arrow\n                case 40: //down arrow\n                    if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else {\n                        this.preventAutoFill = false;\n                    }\n                    this.preventAltUp = false;\n                    e.preventDefault();\n                    break;\n                case 46: //delete\n                case 8: //backspace\n                    this.typedString = this.filterInput.value;\n                    if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '') {\n                        if (this.list) {\n                            this.resetFocusElement();\n                        }\n                        this.activeIndex = null;\n                        if (this.getModuleName() !== 'dropdownlist') {\n                            this.preventAutoFill = true;\n                            this.searchLists(e);\n                            if (this.getModuleName() === 'autocomplete') {\n                                this.hidePopup();\n                            }\n                        }\n                    }\n                    e.preventDefault();\n                    break;\n                default:\n                    this.typedString = this.filterInput.value;\n                    this.preventAutoFill = false;\n                    this.searchLists(e);\n                    break;\n            }\n        }\n        else {\n            this.isValidKey = false;\n        }\n    };\n    DropDownList.prototype.onFilterDown = function (e) {\n        switch (e.keyCode) {\n            case 13: //enter\n                break;\n            case 40: //down arrow\n            case 38: //up arrow\n                this.queryString = this.filterInput.value;\n                e.preventDefault();\n                break;\n            case 9: //tab\n                if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n                    e.preventDefault();\n                }\n                break;\n            default:\n                this.prevSelectPoints = this.getSelectionPoints();\n                this.queryString = this.filterInput.value;\n                break;\n        }\n    };\n    DropDownList.prototype.removeFillSelection = function () {\n        if (this.isInteracted) {\n            var selection = this.getSelectionPoints();\n            this.inputElement.setSelectionRange(selection.end, selection.end);\n        }\n    };\n    DropDownList.prototype.getQuery = function (query) {\n        var filterQuery;\n        if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n            var filterType = this.typedString === '' ? 'contains' : this.filterType;\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        }\n        return filterQuery;\n    };\n    DropDownList.prototype.getSelectionPoints = function () {\n        var input = this.inputElement;\n        return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };\n    };\n    DropDownList.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isTyped = true;\n        this.activeIndex = null;\n        this.isListSearched = true;\n        if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n            var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n        this.isDataFetched = false;\n        if (this.isFiltering()) {\n            var eventArgs_1 = {\n                preventDefaultAction: false,\n                text: this.filterInput.value,\n                updateData: function (dataSource, query, fields) {\n                    if (eventArgs_1.cancel) {\n                        return;\n                    }\n                    _this.isCustomFilter = true;\n                    _this.filteringAction(dataSource, query, fields);\n                },\n                baseEventArgs: e,\n                cancel: false\n            };\n            this.trigger('filtering', eventArgs_1, function (eventArgs) {\n                if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n                    _this.filteringAction(_this.dataSource, null, _this.fields);\n                }\n            });\n        }\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    DropDownList.prototype.filter = function (dataSource, query, fields) {\n        this.isCustomFilter = true;\n        this.filteringAction(dataSource, query, fields);\n    };\n    DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n        if (!isNullOrUndefined(this.filterInput)) {\n            this.beforePopupOpen = (!this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '') ?\n                false : true;\n            if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n                this.actionCompleteData.isUpdated = false;\n                this.isTyped = false;\n                if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n                }\n                this.isTyped = true;\n                if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n                    this.focusIndexItem();\n                    this.setScrollPosition();\n                }\n                this.isNotSearchList = true;\n            }\n            else {\n                this.isNotSearchList = false;\n                query = (this.filterInput.value.trim() === '') ? null : query;\n                this.resetList(dataSource, fields, query);\n            }\n            this.renderReactTemplates();\n        }\n    };\n    DropDownList.prototype.setSearchBox = function (popupElement) {\n        if (this.isFiltering()) {\n            var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ?\n                popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n                className: dropDownListClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: dropDownListClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ?\n                    [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            if (!isNullOrUndefined(this.cssClass)) {\n                if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], parentElement);\n            prepend([parentElement], popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'role': 'combobox',\n                'autocomplete': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            if (!Browser.isDevice) {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.keyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            else {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.mobileKeyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            EventHandler.add(this.filterInput, 'input', this.onInput, this);\n            EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n            return this.filterInputObj;\n        }\n        else {\n            return inputObject;\n        }\n    };\n    DropDownList.prototype.onInput = function (e) {\n        this.isValidKey = true;\n        // For filtering works in mobile firefox.\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.typedString = this.filterInput.value;\n            this.preventAutoFill = true;\n            this.searchLists(e);\n        }\n    };\n    DropDownList.prototype.pasteHandler = function (e) {\n        var _this = this;\n        setTimeout(function () {\n            _this.typedString = _this.filterInput.value;\n            _this.searchLists(e);\n        });\n    };\n    DropDownList.prototype.onActionFailure = function (e) {\n        _super.prototype.onActionFailure.call(this, e);\n        if (this.beforePopupOpen) {\n            this.renderPopup();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        var _this = this;\n        if (this.isNotSearchList) {\n            this.isNotSearchList = false;\n            return;\n        }\n        if (this.isActive) {\n            var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n            _super.prototype.onActionComplete.call(this, ulElement, list, e);\n            this.updateSelectElementData(this.allowFiltering);\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n                this.isRequested = false;\n                this.keyActionHandler(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n                this.incrementalSearch(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            this.list.scrollTop = 0;\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n            }\n            if (this.initRemoteRender) {\n                this.initial = true;\n                this.activeIndex = this.index;\n                this.initRemoteRender = false;\n                if (this.value && this.dataSource instanceof DataManager) {\n                    var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n                    var checkVal = list.some(function (x) { return x[checkField_1] === _this.value; });\n                    if (!checkVal) {\n                        this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value)))\n                            .then(function (e) {\n                            if (e.result.length > 0) {\n                                _this.addItem(e.result, list.length);\n                                _this.updateValues();\n                            }\n                            else {\n                                _this.updateValues();\n                            }\n                        });\n                    }\n                    else {\n                        this.updateValues();\n                    }\n                }\n                else {\n                    this.updateValues();\n                }\n                this.initial = false;\n            }\n            else if (this.getModuleName() === 'autocomplete' && this.value) {\n                this.setInputValue();\n            }\n            if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n                if (!this.actionCompleteData.isUpdated || ((!this.isCustomFilter\n                    && !this.isFilterFocus) || (isNullOrUndefined(this.itemData) && this.allowFiltering)\n                    && ((this.dataSource instanceof DataManager)\n                        || (!isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) &&\n                            this.dataSource.length !== 0)))) {\n                    if (this.itemTemplate && (this.element.tagName === 'EJS-COMBOBOX' || this.element.tagName === 'EJS-DROPDOWNLIST') && this.allowFiltering) {\n                        setTimeout(function () {\n                            _this.updateActionCompleteDataValues(ulElement, list);\n                        }, 0);\n                    }\n                    else {\n                        this.updateActionCompleteDataValues(ulElement, list);\n                    }\n                }\n                this.addNewItem(list, selectedItem);\n                if (!isNullOrUndefined(this.itemData)) {\n                    this.focusIndexItem();\n                }\n            }\n            if (this.beforePopupOpen) {\n                this.renderPopup(e);\n            }\n        }\n    };\n    DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n        this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list: list, isUpdated: true };\n        if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.addNewItem = function (listData, newElement) {\n        var _this = this;\n        if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n            var value_1 = this.getItemData().value;\n            var isExist = listData.some(function (data) {\n                return (((typeof data === 'string' || typeof data === 'number') && data === value_1) ||\n                    (getValue(_this.fields.value, data) === value_1));\n            });\n            if (!isExist) {\n                this.addItem(this.itemData);\n            }\n        }\n    };\n    DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n        var _this = this;\n        if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n            if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                setTimeout(function () {\n                    _this.actionCompleteDataUpdate(li, item, index);\n                }, 0);\n            }\n            else {\n                this.actionCompleteDataUpdate(li, item, index);\n            }\n        }\n    };\n    DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n        if (index != null) {\n            this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n        }\n        else {\n            this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n        }\n        if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n            this.actionCompleteData.list.push(item);\n        }\n    };\n    DropDownList.prototype.focusIndexItem = function () {\n        var value = this.getItemData().value;\n        this.activeIndex = this.getIndexByValue(value);\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.selectedLI = element;\n        this.activeItem(element);\n        this.removeFocus();\n    };\n    DropDownList.prototype.updateSelection = function () {\n        var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        if (selectedItem) {\n            this.setProperties({ 'index': this.getIndexByValue(selectedItem.getAttribute('data-value')) });\n            this.activeIndex = this.index;\n        }\n        else {\n            this.removeFocus();\n            this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.removeFocus = function () {\n        var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n        if (highlightedItem && highlightedItem.length) {\n            removeClass(highlightedItem, dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.renderPopup = function (e) {\n        var _this = this;\n        if (this.popupObj && document.body.contains(this.popupObj.element)) {\n            this.refreshPopup();\n            return;\n        }\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle = _this.createElement('div', {\n                    id: _this.element.id + '_popup', className: 'e-ddl e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n                });\n                var searchBox = _this.setSearchBox(popupEle);\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (_this.headerTemplate) {\n                    _this.setHeaderTemplate(popupEle);\n                }\n                append([_this.list], popupEle);\n                if (_this.footerTemplate) {\n                    _this.setFooterTemplate(popupEle);\n                }\n                document.body.appendChild(popupEle);\n                popupEle.style.visibility = 'hidden';\n                if (_this.popupHeight !== 'auto') {\n                    _this.searchBoxHeight = 0;\n                    if (!isNullOrUndefined(searchBox.container)) {\n                        _this.searchBoxHeight = (searchBox.container.parentElement).getBoundingClientRect().height;\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (_this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.headerTemplate) {\n                        _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n                        var height = Math.round(_this.header.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.footerTemplate) {\n                        _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n                        var height = Math.round(_this.footer.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n                    popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n                }\n                else {\n                    popupEle.style.height = 'auto';\n                }\n                var offsetValue = 0;\n                var left = void 0;\n                if (!isNullOrUndefined(_this.selectedLI) && (!isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0)) {\n                    _this.setScrollPosition();\n                }\n                else {\n                    _this.list.scrollTop = 0;\n                }\n                if (Browser.isDevice && (!_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' ||\n                    (_this.isDropDownClick && _this.getModuleName() === 'combobox')))) {\n                    offsetValue = _this.getOffsetValue(popupEle);\n                    var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n                    left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                        parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) +\n                        parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n                }\n                _this.getFocusElement();\n                _this.createPopup(popupEle, offsetValue, left);\n                _this.checkCollision(popupEle);\n                if (Browser.isDevice) {\n                    _this.popupObj.element.classList.add(dropDownListClasses.device);\n                    if (_this.getModuleName() === 'dropdownlist' || (_this.getModuleName() === 'combobox'\n                        && !_this.allowFiltering && _this.isDropDownClick)) {\n                        _this.popupObj.collision = { X: 'fit', Y: 'fit' };\n                    }\n                    if (_this.isFilterLayout()) {\n                        _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n                        _this.popupObj.position = { X: 0, Y: 0 };\n                        _this.popupObj.dataBind();\n                        attributes(_this.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n                        addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n                        _this.setSearchBoxPosition();\n                        _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n                        _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n                        EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n                        EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n                    }\n                }\n                popupEle.style.visibility = 'visible';\n                addClass([popupEle], 'e-popup-close');\n                var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n                for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n                    var element = scrollParentElements_1[_i];\n                    EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n                }\n                if (Browser.isDevice && _this.isFilterLayout()) {\n                    EventHandler.add(_this.list, 'scroll', _this.listScroll, _this);\n                }\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n                attributes(_this.targetElement(), { 'aria-expanded': 'true', 'aria-owns': _this.inputElement.id + '_options', 'aria-activedescendant': _this.selectedElementID });\n                _this.inputElement.setAttribute('aria-expanded', 'true');\n                if (_this.selectedElementID == null) {\n                    _this.targetElement().removeAttribute('aria-activedescendant');\n                }\n                var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n                addClass([inputParent], [dropDownListClasses.inputFocus]);\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, event: e, cancel: false, animation: animModel };\n                _this.trigger('open', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n                        _this.renderReactTemplates();\n                        _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.element : null);\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    DropDownList.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick))) {\n            var collision = isCollide(popupEle);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.getOffsetValue = function (popupEle) {\n        var popupStyles = getComputedStyle(popupEle);\n        var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n        var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n        return this.setPopupPosition(borderTop + borderBottom);\n    };\n    DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputWrapper.container, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' },\n            zIndex: this.zIndex,\n            close: function () {\n                if (!_this.isDocumentClick) {\n                    _this.focusDropDown();\n                }\n                // eslint-disable-next-line\n                if (_this.isReact) {\n                    _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n                }\n                var isResetItem = (_this.getModuleName() === 'autocomplete') ? true : false;\n                _this.isNotSearchList = false;\n                _this.isDocumentClick = false;\n                _this.destroyPopup();\n                if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n                    _this.isActive = true;\n                    _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n                }\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement &&\n                    _this.actionCompleteData.ulElement.querySelector('li');\n                var ulElement = _this.list.querySelector('ul li');\n                if (_this.isFiltering() && _this.itemTemplate && (_this.element.tagName === _this.getNgDirective()) &&\n                    (actionList && ulElement && actionList.textContent !== ulElement.textContent) &&\n                    _this.element.tagName !== 'EJS-COMBOBOX') {\n                    _this.cloneElements();\n                }\n                if (_this.isFilterLayout()) {\n                    removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n                    _this.isFilterFocus = true;\n                    _this.filterInput.focus();\n                    if (_this.inputWrapper.clearButton) {\n                        addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n                    }\n                }\n                _this.activeStateChange();\n            },\n            targetExitViewport: function () {\n                if (!Browser.isDevice) {\n                    _this.hidePopup();\n                }\n            }\n        });\n    };\n    DropDownList.prototype.isEmptyList = function () {\n        return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n    };\n    DropDownList.prototype.getFocusElement = function () {\n        // combo-box used this method\n    };\n    DropDownList.prototype.isFilterLayout = function () {\n        return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n    };\n    DropDownList.prototype.scrollHandler = function () {\n        if (Browser.isDevice && ((this.getModuleName() === 'dropdownlist' &&\n            !this.isFilterLayout()) || (this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick))) {\n            this.hidePopup();\n        }\n    };\n    DropDownList.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        this.popupObj.element.style.maxHeight = '100%';\n        this.popupObj.element.style.width = '100%';\n        this.list.style.maxHeight = (window.innerHeight - searchBoxHeight) + 'px';\n        this.list.style.height = (window.innerHeight - searchBoxHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    DropDownList.prototype.setPopupPosition = function (border) {\n        var offsetValue;\n        var popupOffset = border;\n        var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n        var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n        var liHeight = firstItem.getBoundingClientRect().height;\n        var listHeight = this.list.offsetHeight / 2;\n        var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n        var lastItemOffsetValue = lastItem.offsetTop;\n        if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) &&\n            this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n            var count = this.list.offsetHeight / liHeight;\n            var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n            offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n            this.list.scrollTop = selectedLI.offsetTop;\n        }\n        else if (height > listHeight) {\n            offsetValue = listHeight - liHeight / 2;\n            this.list.scrollTop = height - listHeight + liHeight / 2;\n        }\n        else {\n            offsetValue = height;\n        }\n        var inputHeight = this.inputWrapper.container.offsetHeight;\n        offsetValue = offsetValue + liHeight + popupOffset - ((liHeight - inputHeight) / 2);\n        return -offsetValue;\n    };\n    DropDownList.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === 'dropdownlist' ||\n            (this.isDropDownClick && this.getModuleName() === 'combobox')))) {\n            var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n            width = (parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) +\n                parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2) + 'px';\n        }\n        return width;\n    };\n    DropDownList.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    DropDownList.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                    this.fixedHeaderElement.offsetHeight : 0);\n            }\n        }\n    };\n    DropDownList.prototype.isEditTextBox = function () {\n        return false;\n    };\n    DropDownList.prototype.isFiltering = function () {\n        return this.allowFiltering;\n    };\n    DropDownList.prototype.isPopupButton = function () {\n        return true;\n    };\n    DropDownList.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    DropDownList.prototype.clearText = function () {\n        this.filterInput.value = this.typedString = '';\n        this.searchLists(null);\n    };\n    DropDownList.prototype.listScroll = function () {\n        this.filterInput.blur();\n    };\n    DropDownList.prototype.setEleWidth = function (width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.inputWrapper.container.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.inputWrapper.container.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    };\n    DropDownList.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        this.isTyped = false;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.isActive = false;\n        this.filterInputObj = null;\n        this.isDropDownClick = false;\n        this.preventAutoFill = false;\n        var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n        for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n            var element = scrollableParentElements_1[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n        if (Browser.isDevice && this.isFilterLayout()) {\n            removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n            EventHandler.remove(this.list, 'scroll', this.listScroll);\n        }\n        if (this.isFilterLayout()) {\n            if (!Browser.isDevice) {\n                this.searchKeyModule.destroy();\n                if (this.clearIconElement) {\n                    EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n                }\n            }\n            if (this.backIconElement) {\n                EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n                EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n            }\n            EventHandler.remove(this.filterInput, 'input', this.onInput);\n            EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n            EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n            EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n            EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n            this.filterInput = null;\n        }\n        attributes(this.targetElement(), { 'aria-expanded': 'false' });\n        this.inputElement.setAttribute('aria-expanded', 'false');\n        this.targetElement().removeAttribute('aria-owns');\n        this.targetElement().removeAttribute('aria-activedescendant');\n        this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n        if (this.isFiltering()) {\n            this.actionCompleteData.isUpdated = false;\n        }\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('close', eventArgs, function (eventArgs) {\n            if (!isNullOrUndefined(_this.popupObj) &&\n                !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n                var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n                fixedHeader.parentNode.removeChild(fixedHeader);\n                _this.fixedHeaderElement = null;\n            }\n            if (!eventArgs.cancel) {\n                if (_this.getModuleName() === 'autocomplete') {\n                    _this.rippleFun();\n                }\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    DropDownList.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.isFilterFocus = false;\n        this.popupObj.destroy();\n        detach(this.popupObj.element);\n    };\n    DropDownList.prototype.clickOnBackIcon = function () {\n        this.hidePopup();\n        this.focusIn();\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.render = function () {\n        if (this.element.tagName === 'INPUT') {\n            this.inputElement = this.element;\n            if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n                this.inputElement.setAttribute('role', 'combobox');\n            }\n            if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n                this.inputElement.setAttribute('type', 'text');\n            }\n            this.inputElement.setAttribute('aria-expanded', 'false');\n        }\n        else {\n            this.inputElement = this.createElement('input', { attrs: { role: 'combobox', type: 'text' } });\n            if (this.element.tagName !== this.getNgDirective()) {\n                this.element.style.display = 'none';\n            }\n            this.element.parentElement.insertBefore(this.inputElement, this.element);\n            this.preventTabIndex(this.inputElement);\n        }\n        var updatedCssClassValues = this.cssClass;\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.inputWrapper = Input.createInput({\n            element: this.inputElement,\n            buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n            floatLabelType: this.floatLabelType,\n            properties: {\n                readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n                placeholder: this.placeholder,\n                cssClass: updatedCssClassValues,\n                enabled: this.enabled,\n                enableRtl: this.enableRtl,\n                showClearButton: this.showClearButton\n            }\n        }, this.createElement);\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.inputWrapper.container);\n        }\n        else {\n            this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n        }\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': dropDownListClasses.hiddenElement }\n        });\n        prepend([this.hiddenElement], this.inputWrapper.container);\n        this.validationAttribute(this.element, this.hiddenElement);\n        this.setReadOnly();\n        this.setFields();\n        this.inputWrapper.container.style.width = formatUnit(this.width);\n        this.inputWrapper.container.classList.add('e-ddl');\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never') {\n            this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n        this.wireEvent();\n        this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n        this.element.removeAttribute('tabindex');\n        var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement.id = id + '_hidden';\n        this.targetElement().setAttribute('tabindex', this.tabIndex);\n        attributes(this.targetElement(), this.getAriaAttributes());\n        this.updateDataAttribute(this.htmlAttributes);\n        this.setHTMLAttributes();\n        if (this.targetElement() === this.inputElement) {\n            this.inputElement.removeAttribute('aria-labelledby');\n        }\n        if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n            this.initValue();\n        }\n        else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n            var selectElement = this.element;\n            this.value = selectElement.options[selectElement.selectedIndex].value;\n            this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n            this.initValue();\n        }\n        this.preventTabIndex(this.element);\n        if (!this.enabled) {\n            this.targetElement().tabIndex = -1;\n        }\n        this.initial = false;\n        this.element.style.opacity = '';\n        this.inputElement.onselect = function (e) {\n            e.stopImmediatePropagation();\n        };\n        this.inputElement.onchange = function (e) {\n            e.stopImmediatePropagation();\n        };\n        if (this.element.hasAttribute('autofocus')) {\n            this.focusIn();\n        }\n        if (!isNullOrUndefined(this.text)) {\n            this.inputElement.setAttribute('value', this.text);\n        }\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        var floatLabelElement = this.inputWrapper.container.getElementsByClassName('e-float-text')[0];\n        if (!isNullOrUndefined(this.element.id) && this.element.id !== '' && !isNullOrUndefined(floatLabelElement)) {\n            floatLabelElement.id = 'label_' + this.element.id.replace(/ /g, '_');\n            attributes(this.inputElement, { 'aria-labelledby': floatLabelElement.id });\n        }\n        this.renderComplete();\n    };\n    DropDownList.prototype.setFooterTemplate = function (popupEle) {\n        var compiledString;\n        if (this.footer) {\n            if (this.isReact) {\n                this.clearTemplate(['footerTemplate']);\n            }\n            else {\n                this.footer.innerHTML = '';\n            }\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], dropDownListClasses.footer);\n        }\n        var footercheck = this.dropdownCompiler(this.footerTemplate);\n        if (footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (footerCompTemp && footerCompTemp.length > 0) {\n            for (var i = 0; i < footerCompTemp.length; i++) {\n                this.footer.appendChild(footerCompTemp[i]);\n            }\n        }\n        append([this.footer], popupEle);\n    };\n    DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n        var compiledString;\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], dropDownListClasses.header);\n        }\n        var headercheck = this.dropdownCompiler(this.headerTemplate);\n        if (headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (headerCompTemp && headerCompTemp.length) {\n            for (var i = 0; i < headerCompTemp.length; i++) {\n                this.header.appendChild(headerCompTemp[i]);\n            }\n        }\n        var contentEle = popupEle.querySelector('div.e-content');\n        popupEle.insertBefore(this.header, contentEle);\n    };\n    DropDownList.prototype.setOldText = function (text) {\n        this.text = text;\n    };\n    DropDownList.prototype.setOldValue = function (value) {\n        this.value = value;\n    };\n    DropDownList.prototype.refreshPopup = function () {\n        if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) &&\n            ((this.allowFiltering && !(Browser.isDevice && this.isFilterLayout())) || this.getModuleName() === 'autocomplete')) {\n            removeClass([this.popupObj.element], 'e-popup-close');\n            this.popupObj.refreshPosition(this.inputWrapper.container);\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.checkData = function (newProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering &&\n            !(this.isListSearched && (newProp.dataSource instanceof DataManager))) {\n            this.list = null;\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n        }\n        this.isListSearched = false;\n        var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n        var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n        if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n            this.itemData = null;\n        }\n        if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n            this.actionData = this.actionCompleteData;\n        }\n        else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            this.actionCompleteData = this.getModuleName() === 'combobox' ?\n                { ulElement: null, list: null, isUpdated: false } : this.actionCompleteData;\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.updateDataSource = function (props) {\n        if (this.inputElement.value !== '' || (!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0)))) {\n            this.clearAll(null, props);\n        }\n        if ((this.fields.groupBy && props.fields) && !this.isGroupChecking && this.list) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0))) || !(props.dataSource === [])) {\n            this.typedString = '';\n            this.resetList(this.dataSource);\n        }\n        if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n            this.checkCustomValue();\n        }\n    };\n    DropDownList.prototype.checkCustomValue = function () {\n        this.itemData = this.getDataByValue(this.value);\n        var dataItem = this.getItemData();\n        this.setProperties({ 'text': dataItem.text, 'value': dataItem.value });\n    };\n    DropDownList.prototype.updateInputFields = function () {\n        if (this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @private\n     * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n     * @returns {void}\n     */\n    DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        if (this.getModuleName() === 'dropdownlist') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'query':\n                case 'dataSource': break;\n                case 'htmlAttributes':\n                    this_1.setHTMLAttributes();\n                    break;\n                case 'width':\n                    this_1.setEleWidth(newProp.width);\n                    Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this_1.filterInput) {\n                        Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n                    }\n                    break;\n                case 'readonly':\n                    if (this_1.getModuleName() !== 'dropdownlist') {\n                        Input.setReadonly(newProp.readonly, this_1.inputElement);\n                    }\n                    this_1.setReadOnly();\n                    break;\n                case 'cssClass':\n                    this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n                    break;\n                case 'enableRtl':\n                    this_1.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this_1.setEnable();\n                    break;\n                case 'text':\n                    if (newProp.text === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var li = this_1.getElementByText(newProp.text);\n                        if (!this_1.checkValidLi(li)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n                            }\n                            else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                                var listLength_1 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_1);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldText(oldProp.text);\n                                    }\n                                });\n                            }\n                            else if (this_1.getModuleName() === 'autocomplete') {\n                                this_1.setInputValue(newProp, oldProp);\n                            }\n                            else {\n                                this_1.setOldText(oldProp.text);\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'value':\n                    if (newProp.value === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    this_1.notify('beforeValueChange', { newProp: newProp }); // gird component value type change\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var item = this_1.getElementByValue(newProp.value);\n                        if (!this_1.checkValidLi(item)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n                            }\n                            else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                                var listLength_2 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_2);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldValue(oldProp.value);\n                                    }\n                                });\n                            }\n                            else if (this_1.getModuleName() === 'autocomplete') {\n                                this_1.setInputValue(newProp, oldProp);\n                            }\n                            else {\n                                this_1.setOldValue(oldProp.value);\n                            }\n                        }\n                        this_1.updateInputFields();\n                        this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n                    }\n                    break;\n                case 'index':\n                    if (newProp.index === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender && this_1.liCollections) {\n                        var element = this_1.liCollections[newProp.index];\n                        if (!this_1.checkValidLi(element)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n                            }\n                            else {\n                                this_1.index = oldProp.index;\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'footerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setFooterTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'headerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setHeaderTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'valueTemplate':\n                    if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate != null) {\n                        this_1.setValueTemplate();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this_1.allowFiltering) {\n                        this_1.actionCompleteData = { ulElement: this_1.ulElement,\n                            list: this_1.listData, isUpdated: true };\n                        this_1.actionData = this_1.actionCompleteData;\n                        this_1.updateSelectElementData(this_1.allowFiltering);\n                    }\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this_1.inputWrapper);\n                    Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n                    if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0] && this_1.floatLabelType !== 'Never') {\n                        this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n                    }\n                    break;\n                case 'showClearButton':\n                    Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n                    this_1.bindClearEvent();\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n                        _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n                    }\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    DropDownList.prototype.checkValidLi = function (element) {\n        if (this.isValidLI(element)) {\n            this.setSelection(element, null);\n            return true;\n        }\n        return false;\n    };\n    DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n        var _this = this;\n        var li;\n        this.updateListValues = function () {\n            if (prop === 'text') {\n                li = _this.getElementByText(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldText(oldProp);\n                }\n            }\n            else if (prop === 'value') {\n                li = _this.getElementByValue(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldValue(oldProp);\n                }\n            }\n            else if (prop === 'index') {\n                li = _this.liCollections[newProp];\n                if (!_this.checkValidLi(li)) {\n                    _this.index = oldProp;\n                }\n            }\n        };\n    };\n    DropDownList.prototype.setReadOnly = function () {\n        if (this.readonly) {\n            addClass([this.inputWrapper.container], ['e-readonly']);\n        }\n        else {\n            removeClass([this.inputWrapper.container], ['e-readonly']);\n        }\n    };\n    DropDownList.prototype.setInputValue = function (newProp, oldProp) {\n    };\n    DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n        if (this.popupObj) {\n            Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownList.prototype.getModuleName = function () {\n        return 'dropdownlist';\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showPopup = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isFiltering() && this.dataSource instanceof DataManager && (this.actionData.list != this.actionCompleteData.list) &&\n            this.actionData.list && this.actionData.ulElement) {\n            this.actionCompleteData = this.actionData;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n            this.isActive = true;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) ||\n            this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n            this.renderList(e);\n        }\n        this.invokeRenderPopup(e);\n    };\n    DropDownList.prototype.invokeRenderPopup = function (e) {\n        if (Browser.isDevice && this.isFilterLayout()) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_2 = this;\n            window.onpopstate = function () {\n                proxy_2.hidePopup();\n            };\n            history.pushState({}, '');\n        }\n        if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\n            this.renderPopup(e);\n        }\n        attributes(this.targetElement(), { 'aria-activedescendant': this.selectedElementID });\n        if (this.selectedElementID == null) {\n            this.targetElement().removeAttribute('aria-activedescendant');\n        }\n    };\n    DropDownList.prototype.renderHightSearch = function () {\n        // update high light search\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hidePopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.isEscapeKey = false;\n            if (!isNullOrUndefined(this.index)) {\n                var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n                this.selectedLI = this.liCollections[this.index] || element;\n                if (this.selectedLI) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                    if (this.valueTemplate && this.itemData !== null) {\n                        this.setValueTemplate();\n                    }\n                }\n            }\n            else {\n                this.resetSelection();\n            }\n        }\n        this.closePopup(0, e);\n        var dataItem = this.getItemData();\n        var isSelectVal = !isNullOrUndefined(this.selectedLI);\n        if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom ||\n            isSelectVal && this.inputElement.value !== dataItem.text)) {\n            this.isSelectCustom = false;\n            this.clearAll(e);\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Sets the focus on the component for interaction.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusIn = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n            return;\n        }\n        var isFocused = false;\n        if (this.preventFocus && Browser.isDevice) {\n            this.inputWrapper.container.tabIndex = 1;\n            this.inputWrapper.container.focus();\n            this.preventFocus = false;\n            isFocused = true;\n        }\n        if (!isFocused) {\n            this.targetElement().focus();\n        }\n        addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        this.onFocus(e);\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    };\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusOut = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (!this.enabled) {\n            return;\n        }\n        this.isTyped = true;\n        this.hidePopup(e);\n        if (this.targetElement()) {\n            this.targetElement().blur();\n        }\n        removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownList.prototype.destroy = function () {\n        this.isActive = false;\n        resetIncrementalSearchValues(this.element.id);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        if (this.inputElement) {\n            var attrArray = ['readonly', 'aria-disabled', 'placeholder', 'aria-labelledby',\n                'aria-expanded', 'autocomplete', 'aria-readonly', 'autocapitalize',\n                'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n            for (var i = 0; i < attrArray.length; i++) {\n                this.inputElement.removeAttribute(attrArray[i]);\n            }\n            this.inputElement.setAttribute('tabindex', this.tabIndex);\n            this.inputElement.classList.remove('e-input');\n            Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        this.element.style.display = 'block';\n        if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n            detach(this.inputWrapper.container);\n        }\n        else {\n            this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n            detach(this.inputWrapper.container);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownList.prototype.getItems = function () {\n        if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n            }\n            this.renderList();\n        }\n        return this.ulElement ? _super.prototype.getItems.call(this) : [];\n    };\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownList.prototype.getDataByValue = function (value) {\n        return _super.prototype.getDataByValue.call(this, value);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.clear = function () {\n        this.value = null;\n    };\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"cssClass\", void 0);\n    __decorate$1([\n        Property('100%')\n    ], DropDownList.prototype, \"width\", void 0);\n    __decorate$1([\n        Property('300px')\n    ], DropDownList.prototype, \"popupHeight\", void 0);\n    __decorate$1([\n        Property('100%')\n    ], DropDownList.prototype, \"popupWidth\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"placeholder\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$1([\n        Property({})\n    ], DropDownList.prototype, \"htmlAttributes\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"query\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"valueTemplate\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"headerTemplate\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"footerTemplate\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"allowFiltering\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"readonly\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"text\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"value\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"index\", void 0);\n    __decorate$1([\n        Property('Never')\n    ], DropDownList.prototype, \"floatLabelType\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"showClearButton\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"filtering\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"change\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"beforeOpen\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"open\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"close\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"blur\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"focus\", void 0);\n    DropDownList = __decorate$1([\n        NotifyPropertyChanges\n    ], DropDownList);\n    return DropDownList;\n}(DropDownBase));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RTL = 'e-rtl';\nvar DROPDOWNTREE = 'e-ddt';\nvar HIDDENELEMENT = 'e-ddt-hidden';\nvar DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nvar SHOW_CHIP = 'e-show-chip';\nvar SHOW_CLEAR = 'e-show-clear';\nvar SHOW_DD_ICON = 'e-show-dd-icon';\nvar CHIP_INPUT = 'e-chip-input';\nvar INPUTFOCUS = 'e-input-focus';\nvar INPUTGROUP = 'e-input-group';\nvar ICONANIMATION = 'e-icon-anim';\nvar CLOSEICON_CLASS = 'e-clear-icon e-icons';\nvar CHIP_WRAPPER = 'e-chips-wrapper';\nvar CHIP_COLLECTION = 'e-chips-collection';\nvar CHIP = 'e-chips';\nvar CHIP_CONTENT = 'e-chipcontent';\nvar CHIP_CLOSE = 'e-chips-close';\nvar HIDEICON = 'e-icon-hide';\nvar DDTHIDEICON = 'e-ddt-icon-hide';\nvar POPUP_CLASS = 'e-ddt e-popup';\nvar PARENTITEM = 'e-list-parent';\nvar CONTENT = 'e-popup-content';\nvar DROPDOWN = 'e-dropdown';\nvar DISABLED = 'e-disabled';\nvar ICONS = 'e-icons';\nvar CHECKALLPARENT = 'e-selectall-parent';\nvar CHECKALLHIDE = 'e-hide-selectall';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar ALLTEXT = 'e-all-text';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar FILTERWRAP = 'e-filter-wrap';\nvar DDTICON = 'e-ddt-icon';\nvar FOOTER = 'e-ddt-footer';\nvar HEADER = 'e-ddt-header';\nvar NODATACONTAINER = 'e-ddt-nodata';\nvar NODATA = 'e-no-data';\nvar HEADERTEMPLATE = 'HeaderTemplate';\nvar FOOTERTEMPLATE = 'FooterTemplate';\nvar NORECORDSTEMPLATE = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nvar CUSTOMTEMPLATE = 'CustomTemplate';\nvar REMAIN_WRAPPER = 'e-remain';\nvar OVERFLOW_VIEW = 'e-overflow';\nvar SHOW_TEXT = 'e-show-text';\nvar TOTAL_COUNT_WRAPPER = 'e-total-count';\nvar REMAIN_COUNT = 'e-wrap-count';\nvar Fields = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(Fields, _super);\n    function Fields() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$2([\n        Property('child')\n    ], Fields.prototype, \"child\", void 0);\n    __decorate$2([\n        Property([])\n    ], Fields.prototype, \"dataSource\", void 0);\n    __decorate$2([\n        Property('expanded')\n    ], Fields.prototype, \"expanded\", void 0);\n    __decorate$2([\n        Property('hasChildren')\n    ], Fields.prototype, \"hasChildren\", void 0);\n    __decorate$2([\n        Property('htmlAttributes')\n    ], Fields.prototype, \"htmlAttributes\", void 0);\n    __decorate$2([\n        Property('iconCss')\n    ], Fields.prototype, \"iconCss\", void 0);\n    __decorate$2([\n        Property('imageUrl')\n    ], Fields.prototype, \"imageUrl\", void 0);\n    __decorate$2([\n        Property('parentValue')\n    ], Fields.prototype, \"parentValue\", void 0);\n    __decorate$2([\n        Property(null)\n    ], Fields.prototype, \"query\", void 0);\n    __decorate$2([\n        Property('selected')\n    ], Fields.prototype, \"selected\", void 0);\n    __decorate$2([\n        Property(null)\n    ], Fields.prototype, \"tableName\", void 0);\n    __decorate$2([\n        Property('text')\n    ], Fields.prototype, \"text\", void 0);\n    __decorate$2([\n        Property('tooltip')\n    ], Fields.prototype, \"tooltip\", void 0);\n    __decorate$2([\n        Property('value')\n    ], Fields.prototype, \"value\", void 0);\n    return Fields;\n}(ChildProperty));\nvar TreeSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(TreeSettings, _super);\n    function TreeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$2([\n        Property(false)\n    ], TreeSettings.prototype, \"autoCheck\", void 0);\n    __decorate$2([\n        Property('Auto')\n    ], TreeSettings.prototype, \"expandOn\", void 0);\n    __decorate$2([\n        Property(false)\n    ], TreeSettings.prototype, \"loadOnDemand\", void 0);\n    return TreeSettings;\n}(ChildProperty));\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\nvar DropDownTree = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(DropDownTree, _super);\n    function DropDownTree(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.filterTimer = null;\n        _this.isFilteredData = false;\n        _this.isFilterRestore = false;\n        // eslint-disable-next-line\n        _this.selectedData = [];\n        _this.filterDelayTime = 300;\n        _this.isClicked = false;\n        return _this;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string}\n     * @hidden\n     */\n    DropDownTree.prototype.getPersistData = function () {\n        var keyEntity = ['value'];\n        return this.addOnPersist(keyEntity);\n    };\n    DropDownTree.prototype.getLocaleName = function () {\n        return 'drop-down-tree';\n    };\n    /**\n     * Initialize the event handler.\n     *\n     * @returns {void}\n     * @private\n     */\n    DropDownTree.prototype.preRender = function () {\n        this.inputFocus = false;\n        this.isPopupOpen = false;\n        this.isFirstRender = true;\n        this.isInitialized = false;\n        this.currentText = null;\n        this.currentValue = null;\n        this.oldValue = null;\n        this.removeValue = false;\n        this.selectedText = [];\n        this.treeItems = [];\n        this.dataValue = null;\n        this.isNodeSelected = false;\n        this.isDynamicChange = false;\n        this.clearIconWidth = 0;\n        this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE;\n        this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE;\n        this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE;\n        this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE;\n        this.customTemplateId = \"\" + this.element.id + CUSTOMTEMPLATE;\n        this.keyConfigs = {\n            escape: 'escape',\n            altUp: 'alt+uparrow',\n            altDown: 'alt+downarrow',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            end: 'end',\n            enter: 'enter',\n            home: 'home',\n            moveDown: 'downarrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlUp: 'ctrl+uparrow',\n            ctrlEnter: 'ctrl+enter',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftEnter: 'shift+enter',\n            shiftHome: 'shift+home',\n            shiftEnd: 'shift+end',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            csEnter: 'ctrl+shift+enter',\n            csHome: 'ctrl+shift+home',\n            csEnd: 'ctrl+shift+end',\n            space: 'space',\n            ctrlA: 'ctrl+A'\n        };\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownTree.prototype.render = function () {\n        var isTree = select('#' + this.element.id + '_tree', document);\n        if (isTree) {\n            var popupDiv = select('#' + this.element.id + '_popup', document);\n            detach(popupDiv ? popupDiv : isTree.parentElement);\n        }\n        this.ensureAutoCheck();\n        if (this.element.tagName === 'INPUT') {\n            this.inputEle = this.element;\n            if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n                this.inputEle.setAttribute('role', 'textbox');\n            }\n            if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n                this.inputEle.setAttribute('type', 'text');\n            }\n        }\n        else {\n            this.inputEle = this.createElement('input', { attrs: { role: 'textbox', type: 'text' } });\n            this.element.parentElement.insertBefore(this.inputEle, this.element);\n        }\n        this.inputObj = Input.createInput({\n            element: this.inputEle,\n            floatLabelType: this.floatLabelType,\n            buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n            properties: {\n                readonly: true,\n                placeholder: this.placeholder,\n                enabled: this.enabled,\n                cssClass: this.cssClass,\n                enableRtl: this.enableRtl\n            }\n        }, this.createElement);\n        this.inputWrapper = this.inputObj.container;\n        if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n            this.inputWrapper.classList.add(INPUTGROUP);\n        }\n        if (this.showDropDownIcon) {\n            this.inputWrapper.classList.add(SHOW_DD_ICON);\n        }\n        if (this.element.tagName === this.getDirective()) {\n            this.element.appendChild(this.inputWrapper);\n        }\n        this.createHiddenElement();\n        this.createClearIcon();\n        this.inputWrapper.classList.add(DROPDOWNTREE);\n        this.setElementWidth(this.width);\n        this.updateDataAttribute();\n        this.setHTMLAttributes();\n        this.setAttributes();\n        this.popupDiv = this.createElement('div', { className: CONTENT, attrs: { 'tabindex': '0' } });\n        this.popupDiv.classList.add(DROPDOWN);\n        this.tree = this.createElement('div', { id: this.element.id + '_tree' });\n        this.popupDiv.appendChild(this.tree);\n        document.body.appendChild(this.popupDiv);\n        this.wireTreeEvents();\n        addClass([this.popupDiv], DDTHIDEICON);\n        this.renderTree();\n        this.isRemoteData = this.fields.dataSource instanceof DataManager;\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter') {\n                this.createChip();\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n                if (this.mode !== 'Box') {\n                    addClass([this.overFlowWrapper], SHOW_TEXT);\n                }\n            }\n        }\n        if (!this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n        }\n        this.wireEvents();\n        var firstUl = select('.' + PARENTITEM, this.treeObj.element);\n        if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n            firstUl.removeAttribute('aria-multiselectable');\n        }\n        this.oldValue = this.value;\n        this.isInitialized = true;\n        this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate\n            || this.noRecordsTemplate || this.customTemplate;\n        this.renderComplete();\n    };\n    DropDownTree.prototype.ensureAutoCheck = function () {\n        if (this.allowFiltering && this.treeSettings.autoCheck) {\n            this.setProperties({ treeSettings: { autoCheck: false } }, true);\n        }\n    };\n    DropDownTree.prototype.hideCheckAll = function (flag) {\n        var checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n        if (!isNullOrUndefined(checkAllEle)) {\n            if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n                addClass([checkAllEle], CHECKALLHIDE);\n            }\n            else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n                removeClass([checkAllEle], CHECKALLHIDE);\n            }\n        }\n    };\n    DropDownTree.prototype.renderFilter = function () {\n        this.filterContainer = this.createElement('div', {\n            id: this.element.id + '_filter_wrap',\n            className: FILTERWRAP\n        });\n        var filterInput = this.createElement('input', {\n            id: this.element.id + '_filter',\n            attrs: { autocomplete: 'off', 'aria-label': this.filterBarPlaceholder }\n        });\n        this.filterContainer.appendChild(filterInput);\n        prepend([this.filterContainer], this.popupEle);\n        this.filterObj = new TextBox({\n            value: '',\n            showClearButton: true,\n            placeholder: this.filterBarPlaceholder,\n            input: this.filterChangeHandler.bind(this)\n        });\n        this.filterObj.appendTo('#' + this.element.id + '_filter');\n    };\n    DropDownTree.prototype.filterChangeHandler = function (args) {\n        var _this = this;\n        if (!isNullOrUndefined(args.value)) {\n            window.clearTimeout(this.filterTimer);\n            this.filterTimer = window.setTimeout(function () { _this.filterHandler(args.value, args.event); }, this.filterDelayTime);\n        }\n    };\n    DropDownTree.prototype.filterHandler = function (value, event) {\n        var _this = this;\n        if (!this.isFilteredData) {\n            this.treeData = this.treeObj.getTreeData();\n        }\n        var filterFields = this.cloneFields(this.fields);\n        var args = {\n            cancel: false,\n            preventDefaultAction: false,\n            event: event,\n            text: value,\n            fields: filterFields\n        };\n        this.trigger('filtering', args, function (args) {\n            if (!args.cancel) {\n                var flag = false;\n                var fields = void 0;\n                _this.isFilteredData = true;\n                if (value === '') {\n                    _this.isFilteredData = false;\n                    _this.isFilterRestore = true;\n                    fields = _this.cloneFields(_this.fields);\n                }\n                else if (args.preventDefaultAction) {\n                    fields = args.fields;\n                }\n                else {\n                    if (_this.treeDataType === 1) {\n                        fields = _this.selfReferencefilter(value, args.fields);\n                    }\n                    else {\n                        if (_this.fields.dataSource instanceof DataManager) {\n                            flag = true;\n                        }\n                        else {\n                            fields = _this.nestedFilter(value, args.fields);\n                        }\n                    }\n                }\n                _this.hideCheckAll(_this.isFilteredData);\n                if (flag) {\n                    return;\n                }\n                _this.treeObj.fields = _this.getTreeFields(fields);\n                _this.treeObj.dataBind();\n            }\n        });\n    };\n    DropDownTree.prototype.nestedFilter = function (value, filteredFields) {\n        // eslint-disable-next-line\n        var matchedDataSource = [];\n        for (var i = 0; i < this.treeData.length; i++) {\n            // eslint-disable-next-line\n            var filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n            if (!isNullOrUndefined(filteredChild)) {\n                matchedDataSource.push(filteredChild);\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.nestedChildFilter = function (value, node) {\n        // eslint-disable-next-line\n        var children = node[this.fields.child];\n        if (isNullOrUndefined(children)) {\n            return (this.isMatchedNode(value, node)) ? node : null;\n        }\n        else {\n            // eslint-disable-next-line\n            var matchedChildren = [];\n            for (var i = 0; i < children.length; i++) {\n                // eslint-disable-next-line\n                var filteredChild = this.nestedChildFilter(value, children[i]);\n                if (!isNullOrUndefined(filteredChild)) {\n                    matchedChildren.push(filteredChild);\n                }\n            }\n            var filteredItems = Object.assign({}, node);\n            if (matchedChildren.length !== 0) {\n                filteredItems[this.fields.child] = matchedChildren;\n                return filteredItems;\n            }\n            else {\n                filteredItems[this.fields.child] = null;\n                return (this.isMatchedNode(value, filteredItems)) ? filteredItems : null;\n            }\n        }\n    };\n    DropDownTree.prototype.selfReferencefilter = function (value, filteredFields) {\n        // eslint-disable-next-line\n        var matchedData = [];\n        // eslint-disable-next-line\n        var matchedDataSource = [];\n        for (var i = 0; i < this.treeData.length; i++) {\n            if (this.isMatchedNode(value, this.treeData[i])) {\n                matchedData.push(this.treeData[i]);\n            }\n        }\n        for (var i = 0; i < matchedData.length; i++) {\n            if (matchedDataSource.indexOf(matchedData[i]) === -1) {\n                matchedDataSource.push(matchedData[i]);\n                // eslint-disable-next-line\n                var parentId = matchedData[i][this.fields.parentValue];\n                while (!isNullOrUndefined(parentId)) {\n                    // eslint-disable-next-line\n                    var parent_1 = null;\n                    for (var j = 0; j < this.treeData.length; j++) {\n                        // eslint-disable-next-line\n                        var value_1 = this.treeData[j][this.fields.value];\n                        if (!isNullOrUndefined(value_1) && (value_1 === parentId)) {\n                            parent_1 = this.treeData[j];\n                            break;\n                        }\n                    }\n                    if (!isNullOrUndefined(parent_1) && (matchedDataSource.indexOf(parent_1) === -1)) {\n                        matchedDataSource.push(parent_1);\n                        parentId = parent_1[this.fields.parentValue];\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.isMatchedNode = function (value, node) {\n        var checkValue = node[this.fields.text];\n        if (this.ignoreCase) {\n            checkValue = checkValue.toLowerCase();\n            value = value.toLowerCase();\n        }\n        if (this.ignoreAccent) {\n            checkValue = DataUtil.ignoreDiacritics(checkValue);\n            value = DataUtil.ignoreDiacritics(value);\n        }\n        if (this.filterType === 'StartsWith') {\n            return checkValue.slice(0, value.length) === value;\n        }\n        else if (this.filterType === 'EndsWith') {\n            return checkValue.slice(-value.length) === value;\n        }\n        else {\n            return checkValue.indexOf(value) !== -1;\n        }\n    };\n    /* To wire events for the dropdown tree */\n    DropDownTree.prototype.wireEvents = function () {\n        EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n        EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n        EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n        EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    DropDownTree.prototype.wireTreeEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.tree, {\n            keyAction: this.treeAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    DropDownTree.prototype.wireCheckAllWrapperEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n            keyAction: this.checkAllAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    /* To unwire events for the dropdown tree */\n    DropDownTree.prototype.unWireEvents = function () {\n        EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n        EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n        EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n        EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n        EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n        EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        EventHandler.remove(window, 'resize', this.windowResize);\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n    };\n    /* Trigger when the dropdown is clicked */\n    DropDownTree.prototype.dropDownClick = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n            return;\n        }\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        else {\n            this.focusIn(e);\n            this.renderPopup();\n        }\n        this.showOverAllClear();\n    };\n    DropDownTree.prototype.mouseIn = function () {\n        if (this.enabled || !this.readonly) {\n            this.showOverAllClear();\n        }\n    };\n    DropDownTree.prototype.onMouseLeave = function () {\n        if (!this.inputFocus) {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n    };\n    DropDownTree.prototype.getDirective = function () {\n        return 'EJS-DROPDOWNTREE';\n    };\n    DropDownTree.prototype.focusOut = function (e) {\n        if (!this.enabled || this.readonly || !this.inputFocus) {\n            return;\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && (e.target === this.inputWrapper)) {\n            return;\n        }\n        var target = e.relatedTarget;\n        if ((target !== this.inputEle) && (isNullOrUndefined(target)) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n            this.onFocusOut(e);\n        }\n    };\n    DropDownTree.prototype.onFocusOut = function (event) {\n        this.inputFocus = false;\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n        }\n        if (this.showClearButton) {\n            this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        removeClass([this.inputWrapper], [INPUTFOCUS]);\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            var isValue = this.value ? (this.value.length ? true : false) : false;\n            if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n                if (this.chipWrapper && (this.mode === 'Default')) {\n                    addClass([this.chipWrapper], HIDEICON);\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n            }\n            if (!this.wrapText && isValue) {\n                this.updateView();\n            }\n        }\n        if (this.changeOnBlur) {\n            this.triggerChangeEvent(event);\n        }\n        this.removeValue = false;\n        this.oldValue = this.value;\n        this.trigger('blur');\n    };\n    DropDownTree.prototype.updateView = function () {\n        if ((!this.showCheckBox && !this.allowMultiSelection) || this.mode === 'Custom' || this.inputFocus) {\n            return;\n        }\n        if (this.mode !== 'Box') {\n            addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n        }\n        else {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        if (this.value && this.value.length !== 0) {\n            if (this.inputWrapper.contains(this.chipWrapper)) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n            addClass([this.inputEle], CHIP_INPUT);\n            this.updateOverFlowView();\n            this.ensurePlaceHolder();\n        }\n    };\n    DropDownTree.prototype.triggerChangeEvent = function (event) {\n        var isEqual = this.ddtCompareValues(this.oldValue, this.value);\n        if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n            var eventArgs = {\n                e: event,\n                oldValue: this.oldValue,\n                value: this.value,\n                isInteracted: event ? true : false,\n                element: this.element\n            };\n            this.trigger('change', eventArgs);\n            this.oldValue = this.value;\n        }\n    };\n    DropDownTree.prototype.ddtCompareValues = function (oldValue, newValue) {\n        if (oldValue === null || newValue === null) {\n            var isValid = oldValue === null ? ((newValue === oldValue) ? true : false) :\n                (oldValue.length === 0 ? (newValue === oldValue) : false);\n            return isValid;\n        }\n        else if (oldValue.length !== newValue.length) {\n            return false;\n        }\n        for (var i = 0; i < oldValue.length; i++) {\n            if (oldValue[i] !== newValue[i]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    DropDownTree.prototype.focusIn = function (e) {\n        if (!this.enabled || this.readonly || this.inputFocus) {\n            return;\n        }\n        this.showOverAllClear();\n        this.inputFocus = true;\n        addClass([this.inputWrapper], [INPUTFOCUS]);\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter' && this.inputFocus) {\n                if (this.chipWrapper && (this.value && this.value.length !== 0)) {\n                    removeClass([this.chipWrapper], HIDEICON);\n                    addClass([this.inputEle], CHIP_INPUT);\n                }\n                addClass([this.inputWrapper], SHOW_CHIP);\n                if (this.popupObj) {\n                    this.popupObj.refreshPosition();\n                }\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                if (this.inputWrapper.contains(this.overFlowWrapper)) {\n                    addClass([this.overFlowWrapper], HIDEICON);\n                }\n                if (this.mode === 'Delimiter') {\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n                else {\n                    addClass([this.inputWrapper], SHOW_CHIP);\n                }\n                removeClass([this.inputWrapper], SHOW_TEXT);\n                this.ensurePlaceHolder();\n            }\n        }\n        var args = { isInteracted: e ? true : false, event: e };\n        this.trigger('focus', args);\n    };\n    DropDownTree.prototype.treeAction = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        _this.inputWrapper.focus();\n                        e.preventDefault();\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'tab':\n                    case 'shiftTab':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'enter':\n                    case 'ctrlEnter':\n                    case 'shiftEnter':\n                    case 'csEnter':\n                        if (!_this.showCheckBox) {\n                            _this.isValueChange = true;\n                            _this.keyEventArgs = e;\n                        }\n                        break;\n                    case 'space':\n                        _this.isValueChange = true;\n                        _this.keyEventArgs = e;\n                        break;\n                    case 'ctrlA':\n                        if (_this.allowMultiSelection) {\n                            _this.selectAll(true);\n                        }\n                        break;\n                    case 'moveRight':\n                    case 'moveLeft':\n                    case 'shiftDown':\n                    case 'moveDown':\n                    case 'ctrlDown':\n                    case 'csDown':\n                    case 'shiftUp':\n                    case 'moveUp':\n                    case 'ctrlUp':\n                    case 'csUp':\n                    case 'home':\n                    case 'shiftHome':\n                    case 'ctrlHome':\n                    case 'csHome':\n                    case 'end':\n                    case 'shiftEnd':\n                    case 'ctrlEnd':\n                    case 'csEnd':\n                }\n            }\n            else {\n                e.stopImmediatePropagation();\n            }\n        });\n    };\n    DropDownTree.prototype.keyActionHandler = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'shiftTab':\n                    case 'tab':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        if (_this.inputFocus) {\n                            _this.onFocusOut();\n                        }\n                        break;\n                    case 'altDown':\n                        if (!_this.isPopupOpen) {\n                            _this.showPopup();\n                            e.preventDefault();\n                        }\n                        break;\n                    case 'moveDown':\n                        if (_this.showSelectAll && _this.showCheckBox) {\n                            _this.checkAllParent.focus();\n                        }\n                        break;\n                }\n            }\n        });\n    };\n    DropDownTree.prototype.checkAllAction = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'space':\n                        _this.clickHandler(e);\n                        break;\n                    case 'moveDown':\n                        _this.treeObj.element.focus();\n                }\n            }\n        });\n    };\n    DropDownTree.prototype.windowResize = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ width: this.setWidth() });\n            this.popupObj.refreshPosition();\n        }\n    };\n    DropDownTree.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement && e.target === formElement) {\n            this.isDynamicChange = true;\n            this.setProperties({ value: null }, true);\n            this.resetValue(true);\n            this.isDynamicChange = false;\n        }\n    };\n    DropDownTree.prototype.getAriaAttributes = function () {\n        var disable = this.enabled ? 'false' : 'true';\n        return {\n            'aria-disabled': disable,\n            'aria-owns': this.element.id + '_options',\n            'role': 'listbox',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false',\n            'aria-activedescendant': 'null',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    };\n    DropDownTree.prototype.updateOverFlowView = function () {\n        this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n        removeClass([this.overFlowWrapper], HIDEICON);\n        if (this.value && this.value.length) {\n            var data = '';\n            var overAllContainer = void 0;\n            var temp = void 0;\n            var tempData = void 0;\n            var tempIndex = 1;\n            var wrapperleng = void 0;\n            var remaining = void 0;\n            var downIconWidth = 0;\n            this.overFlowWrapper.innerHTML = '';\n            // eslint-disable-next-line\n            var l10nLocale = { overflowCountTemplate: '+${count} more..', totalCountTemplate: '${count} selected' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            var remainContent = this.l10n.getConstant('overflowCountTemplate');\n            var totalContent = this.l10n.getConstant('totalCountTemplate');\n            var remainElement = this.createElement('span', { className: REMAIN_WRAPPER });\n            this.overFlowWrapper.appendChild(remainElement);\n            remainElement.innerText = remainContent.replace('${count}', this.value.length.toString());\n            var remainSize = remainElement.offsetWidth;\n            remove(remainElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n            }\n            if (!isNullOrUndefined(this.value)) {\n                if (this.mode !== 'Box') {\n                    for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                        data += (index === 0) ? '' : this.delimiterChar + ' ';\n                        temp = this.getOverflowVal(index);\n                        data += temp;\n                        temp = this.overFlowWrapper.innerHTML;\n                        this.overFlowWrapper.innerHTML = data;\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                index = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - index;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                var textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                                textArr.pop();\n                                this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = index;\n                        }\n                        else if (index === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n                else {\n                    addClass([this.chipWrapper], HIDEICON);\n                    var ele = this.chipWrapper.cloneNode(true);\n                    var chips = selectAll('.' + CHIP, ele);\n                    for (var i = 0; i < chips.length; i++) {\n                        temp = this.overFlowWrapper.innerHTML;\n                        this.overFlowWrapper.appendChild(chips[i]);\n                        data = this.overFlowWrapper.innerHTML;\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                i = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - i;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = i;\n                        }\n                        else if (i === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n            }\n            if (remaining > 0) {\n                this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, remainContent, totalContent));\n            }\n            if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([remainElement], REMAIN_COUNT);\n            }\n        }\n        else {\n            this.overFlowWrapper.innerHTML = '';\n            addClass([this.overFlowWrapper], HIDEICON);\n        }\n        this.updateDelimMode();\n    };\n    DropDownTree.prototype.updateRemainTemplate = function (remainElement, remaining, remainContent, totalContent) {\n        if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 &&\n            this.overFlowWrapper.firstChild.nodeValue === '') {\n            this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n        }\n        remainElement.innerHTML = '';\n        remainElement.innerText = (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) ?\n            remainContent.replace('${count}', remaining.toString()) : totalContent.replace('${count}', remaining.toString());\n        if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n            removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n        }\n        else {\n            addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n            removeClass([this.overFlowWrapper], REMAIN_COUNT);\n        }\n        return remainElement;\n    };\n    DropDownTree.prototype.getOverflowVal = function (index) {\n        // eslint-disable-next-line\n        var selectedData = this.getSelectedData(this.value[index]);\n        return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n    };\n    DropDownTree.prototype.updateDelimMode = function () {\n        if (this.mode !== 'Box') {\n            if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([this.overFlowWrapper], REMAIN_COUNT);\n                addClass([this.overFlowWrapper], SHOW_TEXT);\n            }\n            else {\n                this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n                removeClass([this.overFlowWrapper], REMAIN_COUNT);\n            }\n        }\n        else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n            this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n        }\n    };\n    DropDownTree.prototype.createHiddenElement = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'class': HIDDENELEMENT, 'tabindex': '-1', 'multiple': '' }\n            });\n        }\n        else {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': HIDDENELEMENT }\n            });\n        }\n        prepend([this.hiddenElement], this.inputWrapper);\n        this.validationAttribute();\n    };\n    DropDownTree.prototype.createClearIcon = function () {\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS\n        });\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n        if (this.showClearButton) {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    };\n    DropDownTree.prototype.validationAttribute = function () {\n        var name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n        this.hiddenElement.setAttribute('name', name);\n        this.inputEle.removeAttribute('name');\n        var attributes$$1 = ['required', 'aria-required', 'form'];\n        for (var i = 0; i < attributes$$1.length; i++) {\n            var attr = this.inputEle.getAttribute(attributes$$1[i]);\n            if (attr) {\n                this.hiddenElement.setAttribute(attributes$$1[i], attr);\n                this.inputEle.removeAttribute(attributes$$1[i]);\n            }\n        }\n    };\n    DropDownTree.prototype.createChip = function () {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.chipWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER\n            });\n            this.chipCollection = this.createElement('span', {\n                className: CHIP_COLLECTION\n            });\n            this.chipWrapper.appendChild(this.chipCollection);\n            this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n            addClass([this.inputWrapper], SHOW_CHIP);\n            var isValid = this.getValidMode();\n            if (isValid && this.value !== null && (this.value && this.value.length !== 0)) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else if (this.value === null || (this.value && this.value.length === 0)) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    };\n    DropDownTree.prototype.getValidMode = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return this.mode === 'Box' ? true : (this.mode === 'Default' && this.inputFocus) ? true : false;\n        }\n        else {\n            return false;\n        }\n    };\n    DropDownTree.prototype.createSelectAllWrapper = function () {\n        this.checkAllParent = this.createElement('div', {\n            className: CHECKALLPARENT, attrs: { 'tabindex': '0' }\n        });\n        this.selectAllSpan = this.createElement('span', {\n            className: ALLTEXT\n        });\n        this.selectAllSpan.textContent = '';\n        var ele = closest(this.element, '.' + BIGGER);\n        var touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n        this.checkBoxElement = createCheckBox(this.createElement, true, { cssClass: touchClass });\n        this.checkBoxElement.setAttribute('role', 'checkbox');\n        this.checkAllParent.appendChild(this.checkBoxElement);\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n        this.wireCheckAllWrapperEvents();\n    };\n    DropDownTree.prototype.clickHandler = function (e) {\n        var target;\n        if ((e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT))) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.target;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            this.isClicked = true;\n            var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n            this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n            this.isClicked = false;\n        }\n        e.preventDefault();\n    };\n    DropDownTree.prototype.changeState = function (wrapper, state, e) {\n        var ariaState;\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n            frameSpan.classList.add(CHECK);\n            ariaState = 'true';\n            if (!this.isReverseUpdate) {\n                this.treeObj.checkAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(true);\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK))) {\n            frameSpan.classList.remove(CHECK);\n            ariaState = 'false';\n            if (!this.isReverseUpdate) {\n                this.treeObj.uncheckAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(false);\n        }\n        this.setMultiSelect();\n        this.ensurePlaceHolder();\n        ariaState = state === 'check' ? 'true' : 'false';\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n    };\n    DropDownTree.prototype.setLocale = function (unSelect) {\n        if (!this.selectAllSpan) {\n            return;\n        }\n        if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n            var template = unSelect ? this.unSelectAllText : this.selectAllText;\n            this.selectAllSpan.textContent = '';\n            // eslint-disable-next-line\n            var compiledString = compile(template);\n            var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (var _i = 0, _a = compiledString({}, this, templateName, null, !this.isStringTemplate); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n        }\n    };\n    DropDownTree.prototype.setAttributes = function () {\n        this.inputEle.setAttribute('tabindex', '-1');\n        var id = this.element.getAttribute('id');\n        this.hiddenElement.id = id + '_hidden';\n        this.inputWrapper.setAttribute('tabindex', '0');\n        attributes(this.inputWrapper, this.getAriaAttributes());\n    };\n    DropDownTree.prototype.setHTMLAttributes = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                if (htmlAttr === 'class') {\n                    this.inputWrapper.classList.add(this.htmlAttributes[htmlAttr]);\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n                    this.setProperties({ enabled: false }, true);\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n                    this.setProperties({ readonly: true }, true);\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.setAttribute('style', this.htmlAttributes[htmlAttr]);\n                }\n                else {\n                    var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder',\n                        'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    var validateAttr = ['name', 'required'];\n                    if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputEle);\n                        }\n                        else {\n                            this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.updateDataAttribute = function () {\n        var value = this.htmlAttributes;\n        var invalidAttr = ['class', 'style', 'id', 'type'];\n        var attr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    };\n    DropDownTree.prototype.showOverAllClear = function () {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.overAllClear) {\n            var isValue = this.value ? (this.value.length ? true : false) : false;\n            if (isValue && this.showClearButton) {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n            else {\n                addClass([this.overAllClear], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n    };\n    DropDownTree.prototype.setTreeValue = function () {\n        if (this.value !== null && this.value.length !== 0) {\n            // eslint-disable-next-line\n            var data = void 0;\n            if (this.showCheckBox || this.allowMultiSelection) {\n                for (var i = 0; i < this.value.length; i++) {\n                    data = this.treeObj.getTreeData(this.value[i])[0];\n                    if (isNullOrUndefined(data)) {\n                        this.value.splice(this.value.indexOf(this.value[i]), 1);\n                    }\n                }\n                if (this.value.length !== 0) {\n                    this.setValidValue();\n                }\n            }\n            else {\n                data = this.treeObj.getTreeData(this.value[0])[0];\n                if (!isNullOrUndefined(data)) {\n                    this.setProperties({ text: data[this.fields.text] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ value: this.currentValue }, true);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.setTreeText = function () {\n        if (this.value !== null && !this.isInitialized) {\n            return;\n        }\n        if (this.text !== null) {\n            // eslint-disable-next-line\n            var data = void 0;\n            var valArr = [];\n            if (this.showCheckBox || this.allowMultiSelection) {\n                var textArr = this.text.split(this.delimiterChar);\n                for (var i = 0; i < textArr.length; i++) {\n                    data = this.getItems(textArr[i]);\n                    if (!isNullOrUndefined(data)) {\n                        valArr.push(data[this.fields.value].toString());\n                    }\n                }\n                if (valArr.length !== 0) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: valArr }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n            else {\n                data = this.getItems(this.text);\n                if (!isNullOrUndefined(data)) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: [data[this.fields.value].toString()] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.setSelectedValue = function () {\n        if (this.value != null) {\n            return;\n        }\n        if (!this.isInitialized) {\n            this.oldValue = this.value;\n            if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n                this.setProperties({ value: this.treeObj.selectedNodes }, true);\n                if (this.allowMultiSelection) {\n                    this.updateMode();\n                }\n            }\n            else if (this.showCheckBox && this.treeObj.checkedNodes) {\n                if (this.treeObj.checkedNodes.length > 0) {\n                    this.setProperties({ value: this.treeObj.checkedNodes }, true);\n                    setValue('selectedNodes', [], this.treeObj);\n                    this.treeObj.dataBind();\n                    this.updateMode();\n                }\n            }\n            this.updateSelectedValues();\n            this.currentText = this.text;\n            this.currentValue = this.value;\n        }\n    };\n    DropDownTree.prototype.setValidValue = function () {\n        var _this = this;\n        if (!this.showCheckBox && !this.allowMultiSelection) {\n            Input.setValue(this.text, this.inputEle, this.floatLabelType);\n            var id = this.value[0].toString();\n            if (this.treeObj.selectedNodes[0] !== id) {\n                setValue('selectedNodes', [id], this.treeObj);\n            }\n        }\n        else {\n            if (this.showCheckBox) {\n                var difference = this.value.filter(function (e) {\n                    return _this.treeObj.checkedNodes.indexOf(e) === -1;\n                });\n                if (difference.length > 0 || this.treeSettings.autoCheck) {\n                    this.treeObj.checkedNodes = this.value.slice();\n                    this.treeObj.dataBind();\n                    this.setMultiSelect();\n                }\n            }\n            else {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.selectedText = [];\n                this.updateSelectedValues();\n            }\n            this.treeObj.dataBind();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n        if (this.isInitialized) {\n            this.triggerChangeEvent();\n        }\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getItems = function (givenText) {\n        // eslint-disable-next-line\n        var data;\n        if (this.treeDataType === 1) {\n            for (var i = 0; i < this.treeItems.length; i++) {\n                // eslint-disable-next-line\n                var text = getValue(this.fields.text, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n                    data = this.treeItems[i];\n                    break;\n                }\n            }\n        }\n        else {\n            data = this.getNestedItems(this.treeItems, this.fields, givenText);\n        }\n        return data;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getNestedItems = function (data, field, givenText) {\n        // eslint-disable-next-line\n        var newData;\n        for (var i = 0, objlen = data.length; i < objlen; i++) {\n            // eslint-disable-next-line\n            var dataId = getValue(this.fields.text, data[i]);\n            if (data[i] && dataId && dataId.toString() === givenText) {\n                return data[i];\n            }\n            else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n                // eslint-disable-next-line\n                var childData = getValue(field.child, data[i]);\n                // eslint-disable-next-line\n                newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n                var child = 'child';\n                // eslint-disable-next-line\n                newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newData;\n    };\n    DropDownTree.prototype.getChildType = function (mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    };\n    /* To render the treeview */\n    DropDownTree.prototype.renderTree = function () {\n        this.treeObj = new TreeView({\n            fields: this.getTreeFields(this.fields),\n            enableRtl: this.enableRtl,\n            nodeSelected: this.onNodeSelected.bind(this),\n            nodeChecked: this.onNodeChecked.bind(this),\n            nodeChecking: this.beforeCheck.bind(this),\n            actionFailure: this.onActionFailure.bind(this),\n            nodeClicked: this.onNodeClicked.bind(this),\n            dataBound: this.OnDataBound.bind(this),\n            allowMultiSelection: this.allowMultiSelection,\n            showCheckBox: this.showCheckBox,\n            autoCheck: this.treeSettings.autoCheck,\n            sortOrder: this.sortOrder,\n            expandOn: this.treeSettings.expandOn,\n            loadOnDemand: this.treeSettings.loadOnDemand,\n            nodeSelecting: this.onBeforeSelect.bind(this),\n            nodeTemplate: this.itemTemplate\n        });\n        this.treeObj.root = this.root ? this.root : this;\n        this.treeObj.appendTo('#' + this.tree.id);\n    };\n    /* To render the popup element */\n    DropDownTree.prototype.renderPopup = function () {\n        var _this = this;\n        if (this.isFilteredData) {\n            this.filterObj.value = '';\n            this.treeObj.fields = this.getTreeFields(this.fields);\n            this.isFilterRestore = true;\n            this.isFilteredData = false;\n            this.hideCheckAll(false);\n        }\n        var isCancelled = false;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                addClass([_this.inputWrapper], [ICONANIMATION]);\n                if (_this.isFirstRender) {\n                    _this.popupEle = _this.createElement('div', {\n                        id: _this.element.id + '_popup', className: POPUP_CLASS + ' ' + (_this.cssClass != null ? _this.cssClass : '')\n                    });\n                    document.body.appendChild(_this.popupEle);\n                    _this.createPopup(_this.popupEle);\n                }\n                else {\n                    _this.popupEle = _this.popupObj.element;\n                }\n            }\n            else {\n                isCancelled = true;\n            }\n            if (_this.isFirstRender && !isCancelled) {\n                prepend([_this.popupDiv], _this.popupEle);\n                removeClass([_this.popupDiv], DDTHIDEICON);\n                if (_this.allowFiltering) {\n                    _this.renderFilter();\n                }\n                if (_this.showCheckBox && _this.showSelectAll && (!_this.popupDiv.classList.contains(NODATA))) {\n                    _this.createSelectAllWrapper();\n                    _this.popupEle.insertBefore(_this.checkAllParent, _this.popupDiv);\n                }\n                if (_this.headerTemplate) {\n                    _this.setHeaderTemplate();\n                }\n                if (_this.footerTemplate) {\n                    _this.setFooterTemplate();\n                }\n                _this.isFirstRender = false;\n                /* eslint-disable */\n                if (_this.hasTemplate && _this.portals) {\n                    _this.portals = _this.portals.concat(_this.treeObj.portals);\n                    /* eslint-enable */\n                    _this.renderReactTemplates();\n                }\n            }\n            if (!isCancelled) {\n                attributes(_this.inputWrapper, { 'aria-expanded': 'true' });\n                _this.popupObj.show(null, (_this.zIndex === 1000) ? _this.inputEle : null);\n                removeClass([_this.popupEle], DDTHIDEICON);\n                _this.updatePopupHeight();\n                _this.popupObj.refreshPosition();\n                if (!(_this.showCheckBox && _this.showSelectAll) && (!_this.popupDiv.classList.contains(NODATA)\n                    && _this.treeItems.length > 0)) {\n                    _this.treeObj.element.focus();\n                }\n                if (_this.checkSelectAll && _this.checkBoxElement) {\n                    var wrap = closest(_this.checkBoxElement, '.' + CHECKBOXWRAP);\n                    _this.changeState(wrap, 'check');\n                    _this.checkSelectAll = false;\n                }\n                if (_this.allowFiltering) {\n                    removeClass([_this.inputWrapper], [INPUTFOCUS]);\n                    _this.filterObj.element.focus();\n                }\n                var eventArgs = { popup: _this.popupObj };\n                _this.trigger('open', eventArgs);\n            }\n        });\n    };\n    DropDownTree.prototype.updatePopupHeight = function () {\n        if (this.isFirstRender) {\n            return;\n        }\n        var popupHeight = this.getHeight();\n        this.popupEle.style.maxHeight = popupHeight;\n        if (this.allowFiltering) {\n            var height = Math.round(this.filterContainer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.headerTemplate) {\n            var height = Math.round(this.header.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.showCheckBox && this.showSelectAll) {\n            var height = Math.round(this.checkAllParent.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.footerTemplate) {\n            var height = Math.round(this.footer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        var border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n        border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n        this.popupDiv.style.maxHeight = popupHeight;\n    };\n    DropDownTree.prototype.createPopup = function (element) {\n        var _this = this;\n        if (this.isFirstRender) {\n            this.popupObj = new Popup(element, {\n                width: this.setWidth(),\n                targetType: 'relative',\n                collision: { X: 'flip', Y: 'flip' },\n                relateTo: this.inputWrapper,\n                zIndex: this.zIndex,\n                enableRtl: this.enableRtl,\n                position: { X: 'left', Y: 'bottom' },\n                close: function () {\n                    _this.isPopupOpen = false;\n                },\n                open: function () {\n                    EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                    _this.isPopupOpen = true;\n                },\n                targetExitViewport: function () {\n                    if (!Browser.isDevice) {\n                        _this.hidePopup();\n                    }\n                }\n            });\n        }\n    };\n    /* To calculate the width when change via set model */\n    DropDownTree.prototype.setElementWidth = function (inputWidth) {\n        var ddElement = this.inputWrapper;\n        if (!isNullOrUndefined(inputWidth)) {\n            if (typeof inputWidth === 'number') {\n                ddElement.style.width = formatUnit(inputWidth);\n            }\n            else if (typeof inputWidth === 'string') {\n                ddElement.style.width = (inputWidth.match(/px|%|em/)) ? (inputWidth) :\n                    (formatUnit(inputWidth));\n            }\n        }\n    };\n    /* To calculate the width of the popup */\n    DropDownTree.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupWidth === 'string') {\n            width = (this.popupWidth.match(/px|em/)) ? (this.popupWidth) : width;\n        }\n        return width;\n    };\n    /* To calculate the height of the popup */\n    DropDownTree.prototype.getHeight = function () {\n        var height = formatUnit(this.popupHeight);\n        if (height.indexOf('%') > -1) {\n            // Will set the height of the popup according to the view port height\n            height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupHeight === 'string') {\n            height = (this.popupHeight.match(/px|em/)) ? (this.popupHeight) : height;\n        }\n        return height;\n    };\n    DropDownTree.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var isTree = closest(target, '.' + PARENTITEM);\n        var isFilter = closest(target, '.' + FILTERWRAP);\n        var isHeader = closest(target, '.' + HEADER);\n        var isFooter = closest(target, '.' + FOOTER);\n        var isScroller = target.classList.contains(DROPDOWN) ? true :\n            (matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview'));\n        if ((this.isPopupOpen && (this.inputWrapper.contains(target) || isTree || isFilter || isScroller || isHeader || isFooter)) ||\n            ((this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) ||\n                (this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT)\n                    || target.classList.contains(CHECKBOXFRAME)))))) {\n            this.isDocumentClick = false;\n            e.preventDefault();\n        }\n        else if (!this.inputWrapper.contains(target) && this.inputFocus) {\n            this.focusOut(e);\n        }\n    };\n    DropDownTree.prototype.onActionFailure = function (e) {\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        addClass([this.popupDiv], NODATA);\n    };\n    DropDownTree.prototype.OnDataBound = function (args) {\n        this.treeItems = args.data;\n        if (this.treeItems.length <= 0) {\n            this.l10nUpdate();\n            addClass([this.popupDiv], NODATA);\n            this.hideCheckAll(true);\n        }\n        else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n            removeClass([this.popupDiv], NODATA);\n            this.hideCheckAll(false);\n        }\n        this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n        if (this.isFirstRender && this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n            this.treeObj.element.focus();\n        }\n        var eventArgs = { data: args.data };\n        this.trigger('dataBound', eventArgs);\n        if (this.isFilteredData) {\n            this.treeObj.expandAll();\n        }\n        if (this.isFilterRestore) {\n            this.restoreFilterSelection();\n            this.isFilterRestore = false;\n        }\n    };\n    DropDownTree.prototype.restoreFilterSelection = function () {\n        if (this.showCheckBox) {\n            this.treeObj.checkedNodes = this.value ? this.value : [];\n        }\n        else {\n            this.treeObj.selectedNodes = this.value ? this.value : [];\n        }\n    };\n    /* To set cssclass for the dropdowntree */\n    DropDownTree.prototype.setCssClass = function (newClass, oldClass) {\n        var elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(newClass) && newClass !== '') {\n            addClass(elements, newClass.split(' '));\n        }\n    };\n    DropDownTree.prototype.setEnableRTL = function (state) {\n        if (state) {\n            this.inputWrapper.classList.add(RTL);\n        }\n        else {\n            this.inputWrapper.classList.remove(RTL);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n        if (this.treeObj) {\n            this.treeObj.enableRtl = state;\n            this.treeObj.dataBind();\n        }\n    };\n    /* To set enable property */\n    DropDownTree.prototype.setEnable = function () {\n        Input.setEnabled(this.enabled, this.inputEle);\n        if (this.enabled) {\n            removeClass([this.inputWrapper], DISABLED);\n            this.inputEle.setAttribute('aria-disabled', 'false');\n            this.inputWrapper.setAttribute('aria-disabled', 'false');\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            addClass([this.inputWrapper], DISABLED);\n            if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n                removeClass([this.inputWrapper], [INPUTFOCUS]);\n            }\n            this.inputEle.setAttribute('aria-disabled', 'true');\n            this.inputWrapper.setAttribute('aria-disabled', 'true');\n        }\n    };\n    DropDownTree.prototype.cloneFields = function (fields) {\n        var clonedField = {\n            dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n            child: this.cloneChildField(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes, query: fields.query,\n            selected: fields.selected, tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return clonedField;\n    };\n    DropDownTree.prototype.cloneChildField = function (fields) {\n        if (typeof fields === 'string') {\n            return fields;\n        }\n        else {\n            var clonedField = {\n                dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n                child: (fields.child ? this.cloneChildField(fields.child) : null), hasChildren: fields.hasChildren,\n                expanded: fields.expanded, iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes,\n                query: fields.query, selected: fields.selected, tableName: fields.tableName, tooltip: fields.tooltip\n            };\n            return clonedField;\n        }\n    };\n    DropDownTree.prototype.getTreeFields = function (fields) {\n        var treeFields = {\n            dataSource: fields.dataSource, id: fields.value, text: fields.text, parentID: fields.parentValue,\n            child: this.getTreeChildren(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, isChecked: fields.selected,\n            htmlAttributes: fields.htmlAttributes, query: fields.query, selected: fields.selected,\n            tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return treeFields;\n    };\n    DropDownTree.prototype.getTreeChildren = function (mapper) {\n        if (typeof mapper === 'string') {\n            return mapper;\n        }\n        else if (!isNullOrUndefined(mapper)) {\n            mapper = this.getActualProperties(mapper);\n            var childFields = mapper;\n            if (mapper.value) {\n                childFields.id = mapper.value;\n            }\n            if (mapper.parentValue) {\n                childFields.parentID = mapper.parentValue;\n            }\n            if (mapper.child) {\n                childFields.child = this.getTreeChildren(mapper.child);\n            }\n            if (mapper.selected && this.showCheckBox) {\n                childFields.isChecked = mapper.selected;\n            }\n            return childFields;\n        }\n        return null;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getTreeDataType = function (ds, field) {\n        if (this.fields.dataSource instanceof DataManager) {\n            for (var i = 0; i < ds.length; i++) {\n                if ((typeof field.child === 'string') && isNullOrUndefined(getValue(field.child, ds[i]))) {\n                    return 1;\n                }\n            }\n            return 2;\n        }\n        if (isNullOrUndefined(this.fields.dataSource))\n            this.fields.dataSource = [];\n        for (var i = 0, len = this.fields.dataSource.length; i < len; i++) {\n            if ((typeof field.child === 'string') && !isNullOrUndefined(getValue(field.child, this.fields.dataSource[i]))) {\n                return 2;\n            }\n            if (!isNullOrUndefined(getValue(field.parentValue, this.fields.dataSource[i])) || !isNullOrUndefined(getValue(field.hasChildren, this.fields.dataSource[i]))) {\n                return 1;\n            }\n        }\n        return 1;\n    };\n    /* Triggers when the tree fields is changed dynamically */\n    DropDownTree.prototype.setFields = function () {\n        this.resetValue();\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        this.treeObj.fields = this.getTreeFields(this.fields);\n        this.treeObj.dataBind();\n    };\n    DropDownTree.prototype.getEventArgs = function (args) {\n        // eslint-disable-next-line\n        var checkData = args.data;\n        // eslint-disable-next-line\n        var selectData = args.nodeData;\n        var state;\n        if (this.showCheckBox) {\n            if (args.action === 'check') {\n                state = 'select';\n            }\n            else if (args.action === 'uncheck') {\n                state = 'un-select';\n            }\n        }\n        var eventArgs = {\n            action: this.showCheckBox ? state : args.action,\n            isInteracted: this.isClicked ? true : args.isInteracted,\n            item: args.node,\n            itemData: this.showCheckBox ? checkData[0] : selectData\n        };\n        return eventArgs;\n    };\n    DropDownTree.prototype.onBeforeSelect = function (args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n            if (this.value === null) {\n                this.setProperties({ value: [] }, true);\n            }\n        }\n    };\n    DropDownTree.prototype.updateHiddenValue = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return;\n        }\n        if (this.value && this.value.length) {\n            this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    };\n    /* Triggers when the tree node is selected */\n    DropDownTree.prototype.onNodeSelected = function (args) {\n        if (this.showCheckBox) {\n            return;\n        }\n        var selectedText;\n        if (args.isInteracted) {\n            var id = getValue('id', args.nodeData).toString();\n            if (!this.allowMultiSelection) {\n                this.hiddenElement.innerHTML = '';\n                this.setProperties({ value: [id] }, true);\n                if (this.itemTemplate) {\n                    selectedText = getValue('text', this.treeObj.getNode(id));\n                }\n                else {\n                    selectedText = getValue('text', args.nodeData).toString();\n                }\n                Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n                this.setProperties({ text: selectedText }, true);\n                this.currentText = this.text;\n                this.currentValue = this.value;\n                attributes(this.inputWrapper, { 'aria-describedby': this.element.id });\n                attributes(this.inputWrapper, { 'aria-activedescendant': id.toString() });\n                this.updateHiddenValue();\n                this.showOverAllClear();\n                this.hidePopup();\n                this.isNodeSelected = true;\n            }\n            else if (this.allowMultiSelection) {\n                this.setMultiSelect();\n            }\n        }\n        var eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isValueChange && !this.changeOnBlur) {\n            this.triggerChangeEvent(this.keyEventArgs);\n            this.isValueChange = false;\n        }\n    };\n    DropDownTree.prototype.onNodeClicked = function (args) {\n        if (!this.changeOnBlur && this.isNodeSelected) {\n            this.triggerChangeEvent(args.event);\n            this.isNodeSelected = false;\n        }\n        var target = args.event.target;\n        if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n            this.isClicked = true;\n            // eslint-disable-next-line\n            var getNodeDetails = this.treeObj.getNode(args.node);\n            if (getNodeDetails.isChecked === 'true') {\n                this.treeObj.uncheckAll([args.node]);\n            }\n            else {\n                this.treeObj.checkAll([args.node]);\n            }\n            this.isClicked = false;\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n            this.triggerChangeEvent(args.event);\n        }\n    };\n    DropDownTree.prototype.onNodeChecked = function (args) {\n        var eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isFilteredData && args.action === 'uncheck') {\n            var id = getValue('id', args.data[0]).toString();\n            this.removeSelectedData(id, true);\n        }\n        if (!this.isChipDelete && args.isInteracted) {\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (this.showSelectAll && this.checkBoxElement) {\n            var nodes = this.treeObj.element.querySelectorAll('li');\n            var checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n            var wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n            if (wrap && args.action === 'uncheck') {\n                this.isReverseUpdate = true;\n                this.changeState(wrap, 'uncheck');\n                this.isReverseUpdate = false;\n            }\n            else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length) {\n                this.isReverseUpdate = true;\n                this.changeState(wrap, 'check');\n                this.isReverseUpdate = false;\n            }\n        }\n    };\n    DropDownTree.prototype.beforeCheck = function (args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n        }\n    };\n    DropDownTree.prototype.updateClearButton = function (state) {\n        if (state) {\n            if (!this.inputWrapper.contains(this.overAllClear)) {\n                this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n            }\n            else {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n        else {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            var chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n            for (var i = 0; i < chipClose.length; i++) {\n                if (!state) {\n                    addClass([chipClose[i]], HIDEICON);\n                }\n                else {\n                    removeClass([chipClose[i]], HIDEICON);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.updateDropDownIconState = function (state) {\n        var spinIcon = select('.' + DDTICON, this.inputWrapper);\n        if (state) {\n            if (!spinIcon) {\n                Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n            }\n            else {\n                removeClass([spinIcon], HIDEICON);\n            }\n            addClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n        else {\n            addClass([spinIcon], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n    };\n    DropDownTree.prototype.updateMode = function () {\n        if (this.mode === 'Custom') {\n            return;\n        }\n        if (this.mode !== 'Delimiter') {\n            if (!this.inputWrapper.contains(this.chipWrapper)) {\n                this.createChip();\n            }\n            var isValid = this.getValidMode();\n            if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n                removeClass([this.chipWrapper], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CHIP);\n            }\n            else if (!isValid) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n            var isValue = this.value !== null ? (this.value.length !== 0 ? true : false) : false;\n            if (isValid && isValue) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else {\n                removeClass([this.inputEle], CHIP_INPUT);\n            }\n        }\n        else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n    };\n    DropDownTree.prototype.ensurePlaceHolder = function () {\n        if (this.value && this.value.length === 0) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    };\n    DropDownTree.prototype.ensureClearIconPosition = function (floatLabelType) {\n        if (floatLabelType !== 'Never') {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    };\n    DropDownTree.prototype.setMultiSelectValue = function (newValues) {\n        if (!this.isFilteredData) {\n            this.setProperties({ value: newValues }, true);\n            if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.treeObj.dataBind();\n            }\n        }\n        else {\n            var selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n            for (var i = 0; i < newValues.length; i++) {\n                if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n                    selectedValues.push(newValues[i]);\n                }\n            }\n            this.setProperties({ value: selectedValues }, true);\n        }\n    };\n    DropDownTree.prototype.setMultiSelect = function () {\n        if (this.showCheckBox && !this.isDynamicChange) {\n            this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n        }\n        else {\n            var ddtValue = this.allowMultiSelection ? (this.showCheckBox ? this.treeObj.checkedNodes\n                : this.treeObj.selectedNodes) : (this.value ? (this.showCheckBox ? this.value : [this.value[0]]) : null);\n            this.setMultiSelectValue(ddtValue);\n            if (this.showCheckBox && this.value !== null) {\n                this.treeObj.checkedNodes = this.value;\n                this.treeObj.dataBind();\n            }\n        }\n        this.selectedText = [];\n        var checkSelection = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            detach(this.chipWrapper);\n        }\n        var isValid = this.getValidMode();\n        if (isValid && this.value !== null) {\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                removeClass([this.chipWrapper], HIDEICON);\n            }\n        }\n        var isValue = this.value ? (this.value.length ? true : false) : false;\n        if (this.chipWrapper && (this.mode === 'Box' && !isValue)) {\n            addClass([this.chipWrapper], HIDEICON);\n            removeClass([this.inputEle], CHIP_INPUT);\n        }\n        this.updateSelectedValues();\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getSelectedData = function (value) {\n        // eslint-disable-next-line\n        var data = null;\n        if (this.isFilteredData) {\n            for (var i = 0; i < this.selectedData.length; i++) {\n                if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                    data = this.selectedData[i];\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(data)) {\n            if (this.treeSettings.loadOnDemand) {\n                data = this.getNodeData(value);\n            }\n            else {\n                data = this.treeObj.getNode(value);\n            }\n            if (!isNullOrUndefined(data)) {\n                this.selectedData.push(data);\n            }\n        }\n        return data;\n    };\n    DropDownTree.prototype.getNodeData = function (id) {\n        var childItems;\n        if (isNullOrUndefined(id)) {\n            return childItems;\n        }\n        else if (this.treeDataType === 1) {\n            for (var i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n                var dataId = getValue(this.fields.value, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n                    return this.treeItems[i];\n                }\n            }\n        }\n        else {\n            return this.getChildNodeData(this.treeItems, this.fields, id);\n        }\n        return childItems;\n    };\n    DropDownTree.prototype.getChildNodeData = function (obj, mapper, id) {\n        var newChildItems;\n        if (isNullOrUndefined(obj)) {\n            return newChildItems;\n        }\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            var dataValue = getValue(mapper.value, obj[i]);\n            if (obj[i] && dataValue && dataValue.toString() === id) {\n                return obj[i];\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                var childNodeData = getValue(mapper.child, obj[i]);\n                newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                var child = 'child';\n                newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newChildItems;\n    };\n    DropDownTree.prototype.getChildMapperFields = function (mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    };\n    DropDownTree.prototype.removeSelectedData = function (value, muteOnChange) {\n        var selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n        selectedValues.splice(selectedValues.indexOf(value), 1);\n        this.setProperties({ value: selectedValues }, muteOnChange);\n        for (var i = 0; i < this.selectedData.length; i++) {\n            if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                this.selectedData.splice(i, 1);\n                break;\n            }\n        }\n    };\n    DropDownTree.prototype.updateSelectedValues = function () {\n        this.dataValue = '';\n        var temp;\n        var text;\n        var textValue = '';\n        // eslint-disable-next-line\n        var selectedData;\n        this.hiddenElement.innerHTML = '';\n        var hiddenInputValue = '';\n        if ((!this.isChipDelete || this.treeSettings.autoCheck) && (this.inputWrapper.contains(this.chipWrapper))) {\n            this.chipCollection.innerHTML = '';\n        }\n        if (!this.isFilteredData) {\n            this.selectedData = [];\n        }\n        if (!isNullOrUndefined(this.value)) {\n            for (var i = 0, len = this.value.length; i < len; i++) {\n                selectedData = this.getSelectedData(this.value[i]);\n                text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n                this.selectedText.push(text);\n                temp = this.selectedText[this.selectedText.length - 1];\n                if (this.selectedText.length > 1) {\n                    this.dataValue += (this.delimiterChar + ' ' + temp);\n                    textValue += (',' + temp);\n                }\n                else {\n                    this.dataValue += temp;\n                    textValue += temp;\n                }\n                if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) &&\n                    (this.allowMultiSelection || this.showCheckBox)) {\n                    this.setChipValues(temp, this.value[i]);\n                }\n                hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' +\n                    this.selectedText[this.selectedText.length - 1] + '</option>';\n            }\n            if (this.selectedText.length >= 1) {\n                this.setProperties({ text: textValue }, true);\n            }\n            this.hiddenElement.innerHTML = hiddenInputValue;\n            if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n                this.setTagValues();\n            }\n        }\n        var isValid = this.getValidMode();\n        if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n        Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n        if (textValue === '') {\n            this.setProperties({ text: null }, true);\n        }\n        else {\n            this.setProperties({ text: textValue }, true);\n        }\n        if (this.showClearButton && this.inputFocus) {\n            this.showOverAllClear();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n            this.popupObj.refreshPosition();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n    };\n    DropDownTree.prototype.setChipValues = function (text, value) {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        var chip = this.createElement('span', {\n            className: CHIP,\n            attrs: { 'data-value': value }\n        });\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        var chipClose = this.createElement('span', { className: CHIP_CLOSE + ' ' + ICONS });\n        chipContent.innerHTML = text;\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n        if (this.showClearButton) {\n            chip.appendChild(chipClose);\n            EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n        }\n    };\n    DropDownTree.prototype.setTagValues = function () {\n        if (this.value === null || this.text == null) {\n            return;\n        }\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        var chip = this.createElement('span', {\n            className: CHIP,\n        });\n        if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n            addClass([this.inputEle], CHIP_INPUT);\n        }\n        if (this.chipWrapper.classList.contains(HIDEICON)) {\n            removeClass([this.chipWrapper], HIDEICON);\n        }\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        var template = this.customTemplate;\n        var templateId = this.customTemplateId;\n        var templatestring = 'customTemplate';\n        var compiledString = this.templateComplier(template);\n        var tempArr = compiledString({ 'value': this.value, 'text': this.text }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, chipContent);\n        }\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n    };\n    DropDownTree.prototype.setSelectAllWrapper = function (state) {\n        if (this.isFirstRender) {\n            return;\n        }\n        if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n            this.createSelectAllWrapper();\n            this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n        }\n        else if (this.popupEle.contains(this.checkAllParent)) {\n            detach(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    };\n    DropDownTree.prototype.setHeaderTemplate = function () {\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], HEADER);\n        }\n        // eslint-disable-next-line\n        var compiledString = this.templateComplier(this.headerTemplate);\n        var tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.header);\n        }\n        this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.templateComplier = function (template) {\n        if (template) {\n            // eslint-disable-next-line\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (e) {\n                return compile(template);\n            }\n        }\n        return compile(template);\n    };\n    DropDownTree.prototype.setFooterTemplate = function () {\n        if (this.footer) {\n            this.footer.innerHTML = '';\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], FOOTER);\n        }\n        // eslint-disable-next-line\n        var compiledString = this.templateComplier(this.footerTemplate);\n        var tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.footer);\n        }\n        append([this.footer], this.popupEle);\n    };\n    DropDownTree.prototype.clearAll = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        this.resetValue();\n        this.showOverAllClear();\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            if (this.popupObj) {\n                this.popupObj.refreshPosition();\n            }\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n        }\n        if (e) {\n            this.isClearButtonClick = true;\n        }\n        if (!this.changeOnBlur) {\n            this.triggerChangeEvent(e);\n        }\n    };\n    DropDownTree.prototype.removeChip = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        var element = e.target.parentElement;\n        var value = element.getAttribute('data-value');\n        if (this.chipCollection) {\n            if (element) {\n                remove(element);\n            }\n        }\n        this.isChipDelete = true;\n        this.isClearButtonClick = true;\n        this.removeSelectedData(value, true);\n        this.selectedText = [];\n        if (this.allowMultiSelection) {\n            this.treeObj.selectedNodes = this.value.slice();\n            this.updateSelectedValues();\n        }\n        if (this.showCheckBox) {\n            this.treeObj.uncheckAll([value]);\n            this.clearCheckAll();\n            this.setMultiSelect();\n        }\n        this.triggerChangeEvent(e);\n        this.isChipDelete = false;\n        this.ensurePlaceHolder();\n    };\n    DropDownTree.prototype.resetValue = function (isDynamicChange) {\n        if (this.value == [] && this.text == null) {\n            return;\n        }\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        if (!isDynamicChange) {\n            this.oldValue = this.value;\n            this.setProperties({ value: [] }, true);\n        }\n        this.dataValue = null;\n        this.setProperties({ text: null }, true);\n        this.selectedData = [];\n        setValue('selectedNodes', [], this.treeObj);\n        this.hiddenElement.innerHTML = '';\n        if (this.showCheckBox) {\n            this.treeObj.checkedNodes = [];\n            this.treeObj.dataBind();\n            this.setMultiSelect();\n            this.clearCheckAll();\n        }\n        if (this.oldValue === null && !isDynamicChange) {\n            this.removeValue = true;\n        }\n        else if (isDynamicChange) {\n            this.triggerChangeEvent();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            this.chipCollection.innerHTML = '';\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n            this.ensurePlaceHolder();\n        }\n    };\n    DropDownTree.prototype.clearCheckAll = function () {\n        if (this.showSelectAll && this.value && this.value.length === 0) {\n            this.setLocale(false);\n        }\n    };\n    DropDownTree.prototype.selectAllItems = function (state) {\n        if (this.showCheckBox) {\n            if (state) {\n                this.treeObj.checkAll();\n            }\n            else {\n                this.treeObj.uncheckAll();\n            }\n            this.checkSelectAll = true;\n        }\n        else if (this.allowMultiSelection) {\n            if (!state) {\n                this.treeObj.selectedNodes = [];\n            }\n            else {\n                var li = selectAll('li', this.treeObj.element);\n                var id = void 0;\n                var arr = [];\n                for (var i = 0; i < li.length; i++) {\n                    id = li[i].getAttribute('data-uid').toString();\n                    arr.push(id);\n                }\n                this.treeObj.selectedNodes = arr;\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText) {\n            if (state) {\n                this.updateView();\n            }\n            else {\n                this.updateOverflowWrapper(true);\n            }\n        }\n    };\n    DropDownTree.prototype.updateTreeSettings = function (prop) {\n        var value = Object.keys(prop.treeSettings)[0];\n        if (value === 'autoCheck') {\n            this.ensureAutoCheck();\n            this.treeObj.autoCheck = this.treeSettings.autoCheck;\n        }\n        else if (value === 'loadOnDemand') {\n            this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n        }\n        else if (value === 'expandOn') {\n            this.treeObj.expandOn = this.treeSettings.expandOn;\n            this.treeObj.dataBind();\n            return;\n        }\n        this.treeObj.dataBind();\n        this.setMultiSelect();\n        this.updateValue(this.value);\n    };\n    DropDownTree.prototype.updateCheckBoxState = function (checkBox) {\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.showCheckBox = checkBox;\n        this.treeObj.dataBind();\n        this.isDynamicChange = true;\n        this.setSelectAllWrapper(this.showSelectAll);\n        if (this.showSelectAll) {\n            this.setLocale();\n        }\n        if (this.showCheckBox) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n        this.isDynamicChange = false;\n    };\n    DropDownTree.prototype.updateTemplate = function () {\n        if (this.popupObj) {\n            this.clearTemplate();\n            /* eslint-disable */\n            this.portals = [];\n            /* eslint-enable */\n            this.popupObj.destroy();\n            if (this.isPopupOpen) {\n                this.hidePopup();\n                this.isFirstRender = true;\n                this.renderPopup();\n            }\n            else {\n                this.isFirstRender = true;\n            }\n        }\n    };\n    DropDownTree.prototype.l10nUpdate = function (actionFailure) {\n        if (this.noRecord) {\n            this.noRecord.innerHTML = '';\n        }\n        else {\n            this.noRecord = this.createElement('div');\n            addClass([this.noRecord], NODATACONTAINER);\n            prepend([this.noRecord], this.popupDiv);\n        }\n        if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n            var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            var templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line\n            var compiledString = this.templateComplier(template);\n            var tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n            if (tempArr) {\n                tempArr = Array.prototype.slice.call(tempArr);\n                append(tempArr, this.noRecord);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var l10nLocale = { noRecordsTemplate: 'No Records Found', actionFailureTemplate: 'The Request Failed' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            this.noRecord.innerHTML = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n        }\n    };\n    DropDownTree.prototype.updateRecordTemplate = function (action) {\n        if (this.treeItems && this.treeItems.length <= 0) {\n            this.l10nUpdate(action);\n            if (this.hasTemplate) {\n                this.updateTemplate();\n            }\n        }\n    };\n    DropDownTree.prototype.updateOverflowWrapper = function (state) {\n        if (!state) {\n            if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n            }\n        }\n        else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n            this.overFlowWrapper.innerHTML = '';\n        }\n    };\n    DropDownTree.prototype.updateMultiSelection = function (state) {\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.allowMultiSelection = state;\n        this.treeObj.dataBind();\n        this.updateOption();\n        if (this.allowMultiSelection) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n    };\n    DropDownTree.prototype.updateAllowFiltering = function (state) {\n        if (!this.isFirstRender) {\n            if (state) {\n                this.renderFilter();\n            }\n            else {\n                this.destroyFilter();\n            }\n        }\n        this.ensureAutoCheck();\n    };\n    DropDownTree.prototype.updateFilterPlaceHolder = function () {\n        if (this.filterObj) {\n            this.filterObj.placeholder = this.filterBarPlaceholder;\n            this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n        }\n    };\n    DropDownTree.prototype.updateValue = function (value) {\n        this.isDynamicChange = true;\n        if (isNullOrUndefined(value) || value.length === 0) {\n            this.resetValue(true);\n        }\n        else {\n            this.setTreeValue();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n        this.isDynamicChange = false;\n    };\n    DropDownTree.prototype.updateText = function (text) {\n        if (isNullOrUndefined(text)) {\n            this.resetValue();\n        }\n        else {\n            this.setTreeText();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n    };\n    DropDownTree.prototype.updateModelMode = function () {\n        var validMode = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (!validMode) {\n            return;\n        }\n        if (!this.wrapText) {\n            var overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n            if (overFlow) {\n                overFlow.innerHTML = '';\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText && (this.value && this.value.length !== 0)) {\n            this.updateOverFlowView();\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.mode === 'Box') {\n                removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n            else {\n                addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n        }\n    };\n    DropDownTree.prototype.updateOption = function () {\n        if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n            this.hiddenElement.setAttribute('multiple', '');\n        }\n        else if (this.hiddenElement.hasAttribute('multiple') && (!this.allowMultiSelection && !this.showCheckBox)) {\n            this.hiddenElement.removeAttribute('multiple');\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {DropDownTreeModel} newProp - specifies the newProp value.\n     * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n     * @returns {void}\n     * @private\n     */\n    DropDownTree.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                    this.setElementWidth(newProp.width);\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this.inputEle);\n                    break;\n                case 'cssClass':\n                    this.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL(this.enableRtl);\n                    break;\n                case 'fields':\n                    this.setFields();\n                    break;\n                case 'readonly':\n                    Input.setReadonly(newProp.readonly, this.inputEle);\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this.inputObj);\n                    Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n                    this.ensureClearIconPosition(newProp.floatLabelType);\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'allowFiltering':\n                    this.updateAllowFiltering(newProp.allowFiltering);\n                    break;\n                case 'filterBarPlaceholder':\n                    this.updateFilterPlaceHolder();\n                    break;\n                case 'value':\n                    this.oldValue = oldProp.value;\n                    this.updateValue(newProp.value);\n                    break;\n                case 'text':\n                    this.updateText(newProp.text);\n                    break;\n                case 'allowMultiSelection':\n                    this.updateMultiSelection(newProp.allowMultiSelection);\n                    break;\n                case 'mode':\n                    if (!this.showCheckBox && !this.allowMultiSelection) {\n                        return;\n                    }\n                    if (this.mode === 'Custom') {\n                        if (this.overFlowWrapper) {\n                            detach(this.overFlowWrapper);\n                        }\n                        if (this.chipWrapper) {\n                            detach(this.chipWrapper);\n                        }\n                        this.setTagValues();\n                    }\n                    else {\n                        if (oldProp.mode === 'Custom') {\n                            this.updateOverflowWrapper(this.wrapText);\n                        }\n                        this.updateModelMode();\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode === 'Box') {\n                        return;\n                    }\n                    if (this.showCheckBox || this.allowMultiSelection) {\n                        this.setMultiSelect();\n                    }\n                    break;\n                case 'selectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale();\n                    }\n                    break;\n                case 'unSelectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale(false);\n                    }\n                    break;\n                case 'showSelectAll':\n                    if (this.showCheckBox) {\n                        this.setSelectAllWrapper(newProp.showSelectAll);\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'showCheckBox':\n                    this.updateCheckBoxState(newProp.showCheckBox);\n                    if (!this.wrapText) {\n                        this.updateOverflowWrapper(true);\n                    }\n                    this.updatePopupHeight();\n                    this.updateOption();\n                    break;\n                case 'treeSettings':\n                    this.updateTreeSettings(newProp);\n                    break;\n                case 'customTemplate':\n                    if (this.mode !== \"Custom\") {\n                        return;\n                    }\n                    this.chipCollection.innerHTML = \"\";\n                    this.setTagValues();\n                    break;\n                case 'sortOrder':\n                    if (this.hasTemplate) {\n                        this.updateTemplate();\n                    }\n                    this.treeObj.sortOrder = newProp.sortOrder;\n                    this.treeObj.dataBind();\n                    this.updateValue(this.value);\n                    break;\n                case 'showDropDownIcon':\n                    this.updateDropDownIconState(newProp.showDropDownIcon);\n                    break;\n                case 'popupWidth':\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'popupHeight':\n                    if (this.popupObj) {\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'zIndex':\n                    if (this.popupObj) {\n                        this.popupObj.zIndex = newProp.zIndex;\n                        this.popupObj.dataBind();\n                    }\n                    break;\n                case 'headerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'footerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'itemTemplate':\n                    this.updateTemplate();\n                    this.treeObj.nodeTemplate = newProp.itemTemplate;\n                    this.treeObj.dataBind();\n                    break;\n                case 'noRecordsTemplate':\n                    this.updateRecordTemplate();\n                    break;\n                case 'actionFailureTemplate':\n                    this.updateRecordTemplate(true);\n                    break;\n                case 'htmlAttributes':\n                    this.setHTMLAttributes();\n                    break;\n                case 'wrapText':\n                    this.updateOverflowWrapper(this.wrapText);\n                    if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                        this.updateView();\n                    }\n                    else {\n                        addClass([this.overFlowWrapper], HIDEICON);\n                        if (this.chipWrapper && this.mode === 'Box') {\n                            removeClass([this.chipWrapper], HIDEICON);\n                        }\n                        else {\n                            removeClass([this.inputWrapper], SHOW_CHIP);\n                            removeClass([this.inputEle], CHIP_INPUT);\n                        }\n                        this.ensurePlaceHolder();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Allows you to clear the selected values from the Dropdown Tree component.\n     *\n     * @method clear\n     * @returns {void}\n     */\n    DropDownTree.prototype.clear = function () {\n        this.clearAll();\n        if (this.inputFocus) {\n            this.onFocusOut();\n        }\n        else {\n            if (this.changeOnBlur) {\n                this.triggerChangeEvent();\n            }\n            this.removeValue = false;\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownTree.prototype.destroy = function () {\n        this.clearTemplate();\n        this.unWireEvents();\n        this.setCssClass(null, this.cssClass);\n        this.setProperties({ value: [] }, true);\n        this.setProperties({ text: null }, true);\n        this.treeObj.destroy();\n        this.destroyFilter();\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            detach(this.popupObj.element);\n        }\n        if (this.element.tagName !== this.getDirective()) {\n            this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n        }\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        detach(this.inputWrapper);\n        detach(this.popupDiv);\n        this.element.classList.remove('e-input');\n        if (this.showCheckBox || this.allowMultiSelection) {\n            this.element.classList.remove(CHIP_INPUT);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    DropDownTree.prototype.destroyFilter = function () {\n        if (this.filterObj) {\n            this.filterObj.destroy();\n            detach(this.filterObj.element);\n            detach(this.filterContainer);\n            this.filterObj = null;\n        }\n    };\n    /**\n     * Ensures visibility of the Dropdown Tree item by using item value or item element.\n     * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n     * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n     * @returns {void}\n     */\n    DropDownTree.prototype.ensureVisible = function (item) {\n        this.treeObj.ensureVisible(item);\n    };\n    /**\n     * To get the updated data source of the Dropdown Tree.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n     * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n     */\n    // eslint-disable-next-line\n    DropDownTree.prototype.getData = function (item) {\n        return this.treeObj.getTreeData(item);\n    };\n    /**\n     * Close the Dropdown tree pop-up.\n     *\n     * @returns {void}\n     */\n    DropDownTree.prototype.hidePopup = function () {\n        var eventArgs = { popup: this.popupObj };\n        this.inputWrapper.classList.remove(ICONANIMATION);\n        if (this.popupEle) {\n            addClass([this.popupEle], DDTHIDEICON);\n        }\n        attributes(this.inputWrapper, { 'aria-expanded': 'false' });\n        if (this.popupObj && this.isPopupOpen) {\n            this.popupObj.hide();\n            if (this.inputFocus) {\n                this.inputWrapper.focus();\n                if (this.allowFiltering) {\n                    addClass([this.inputWrapper], [INPUTFOCUS]);\n                }\n            }\n            this.trigger('close', eventArgs);\n        }\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected or deselected.\n     *\n     * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n     * @returns {void}\n     *\n     */\n    DropDownTree.prototype.selectAll = function (state) {\n        this.selectAllItems(state);\n    };\n    /**\n     * Opens the popup that displays the Dropdown Tree items.\n     *\n     * @returns {void}\n     */\n    DropDownTree.prototype.showPopup = function () {\n        if (!this.enabled || this.readonly || this.isPopupOpen) {\n            return;\n        }\n        this.renderPopup();\n        this.focusIn();\n    };\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - returns the module name.\n     */\n    DropDownTree.prototype.getModuleName = function () {\n        return 'dropdowntree';\n    };\n    __decorate$2([\n        Property('The Request Failed')\n    ], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"allowFiltering\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"changeOnBlur\", void 0);\n    __decorate$2([\n        Property('')\n    ], DropDownTree.prototype, \"cssClass\", void 0);\n    __decorate$2([\n        Property(\"${value.length} item(s) selected\")\n    ], DropDownTree.prototype, \"customTemplate\", void 0);\n    __decorate$2([\n        Property(',')\n    ], DropDownTree.prototype, \"delimiterChar\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"enabled\", void 0);\n    __decorate$2([\n        Complex({}, Fields)\n    ], DropDownTree.prototype, \"fields\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$2([\n        Property('StartsWith')\n    ], DropDownTree.prototype, \"filterType\", void 0);\n    __decorate$2([\n        Property('Never')\n    ], DropDownTree.prototype, \"floatLabelType\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"footerTemplate\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"ignoreAccent\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"ignoreCase\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"headerTemplate\", void 0);\n    __decorate$2([\n        Property({})\n    ], DropDownTree.prototype, \"htmlAttributes\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"itemTemplate\", void 0);\n    __decorate$2([\n        Property('Default')\n    ], DropDownTree.prototype, \"mode\", void 0);\n    __decorate$2([\n        Property('No Records Found')\n    ], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"placeholder\", void 0);\n    __decorate$2([\n        Property('300px')\n    ], DropDownTree.prototype, \"popupHeight\", void 0);\n    __decorate$2([\n        Property('100%')\n    ], DropDownTree.prototype, \"popupWidth\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"readonly\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"showSelectAll\", void 0);\n    __decorate$2([\n        Property('Select All')\n    ], DropDownTree.prototype, \"selectAllText\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"showCheckBox\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"showClearButton\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n    __decorate$2([\n        Property('None')\n    ], DropDownTree.prototype, \"sortOrder\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"text\", void 0);\n    __decorate$2([\n        Complex({}, TreeSettings)\n    ], DropDownTree.prototype, \"treeSettings\", void 0);\n    __decorate$2([\n        Property('Unselect All')\n    ], DropDownTree.prototype, \"unSelectAllText\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"value\", void 0);\n    __decorate$2([\n        Property('100%')\n    ], DropDownTree.prototype, \"width\", void 0);\n    __decorate$2([\n        Property(1000)\n    ], DropDownTree.prototype, \"zIndex\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"wrapText\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"actionFailure\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"beforeOpen\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"change\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"close\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"blur\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"created\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"dataBound\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"destroyed\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"filtering\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"focus\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"keyPress\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"open\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"select\", void 0);\n    DropDownTree = __decorate$2([\n        NotifyPropertyChanges\n    ], DropDownTree);\n    return DropDownTree;\n}(Component));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\nvar SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nvar inputObject$1 = {\n    container: null,\n    buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\nvar ComboBox = /** @__PURE__ @class */ (function (_super) {\n    __extends$3(ComboBox, _super);\n    /**\n     * *Constructor for creating the component\n     *\n     * @param {ComboBoxModel} options - Specifies the ComboBox model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function ComboBox(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.preRender = function () {\n        _super.prototype.preRender.call(this);\n    };\n    ComboBox.prototype.getLocaleName = function () {\n        return 'combo-box';\n    };\n    ComboBox.prototype.wireEvent = function () {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n            EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n        }\n        EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n        if (!this.readonly) {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n            EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n        }\n        this.bindCommonEvent();\n    };\n    ComboBox.prototype.preventBlur = function (e) {\n        if ((!this.allowFiltering && document.activeElement !== this.inputElement &&\n            !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice)) {\n            e.preventDefault();\n        }\n    };\n    ComboBox.prototype.onBlurHandler = function (e) {\n        var inputValue = this.inputElement && this.inputElement.value === '' ?\n            null : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n            this.customValue(e);\n        }\n        _super.prototype.onBlurHandler.call(this, e);\n    };\n    ComboBox.prototype.targetElement = function () {\n        return this.inputElement;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.setOldText = function (text) {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.customValue();\n        this.removeSelection();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.setOldValue = function (value) {\n        if (this.allowCustom) {\n            this.valueMuteChange(this.value);\n        }\n        else {\n            this.valueMuteChange(null);\n        }\n        this.removeSelection();\n        this.setHiddenValue();\n    };\n    ComboBox.prototype.valueMuteChange = function (value) {\n        var inputValue = isNullOrUndefined(value) ? null : value.toString();\n        Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.setProperties({ value: value, text: value, index: null }, true);\n        this.activeIndex = this.index;\n        var fields = this.fields;\n        var dataItem = {};\n        dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n        dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n        this.itemData = dataItem;\n        this.item = null;\n        if (this.previousValue !== this.value) {\n            this.detachChangeEvent(null);\n        }\n    };\n    ComboBox.prototype.updateValues = function () {\n        if (!isNullOrUndefined(this.value)) {\n            var li = this.getElementByValue(this.value);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else if (this.allowCustom) {\n                this.valueMuteChange(this.value);\n            }\n            else {\n                this.valueMuteChange(null);\n            }\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            var li = this.getElementByText(this.text);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else {\n                Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.customValue();\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    };\n    ComboBox.prototype.updateIconState = function () {\n        if (this.showClearButton) {\n            if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    };\n    ComboBox.prototype.getAriaAttributes = function () {\n        var ariaAttributes = {\n            'role': 'combobox',\n            'aria-autocomplete': 'both',\n            'aria-labelledby': this.hiddenElement.id,\n            'aria-expanded': 'false',\n            'aria-readonly': this.readonly.toString(),\n            'autocomplete': 'off',\n            'autocapitalize': 'off',\n            'spellcheck': 'false'\n        };\n        return ariaAttributes;\n    };\n    ComboBox.prototype.searchLists = function (e) {\n        this.isTyped = true;\n        if (this.isFiltering()) {\n            _super.prototype.searchLists.call(this, e);\n            if (this.ulElement && this.filterInput.value.trim() === '') {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n        }\n        else {\n            if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n            this.incrementalSearch(e);\n        }\n    };\n    ComboBox.prototype.getNgDirective = function () {\n        return 'EJS-COMBOBOX';\n    };\n    ComboBox.prototype.setSearchBox = function () {\n        this.filterInput = this.inputElement;\n        return (this.isFiltering() ? this.inputWrapper : inputObject$1);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        var _this = this;\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isSelectCustom) {\n            this.removeSelection();\n        }\n        if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped) {\n            setTimeout(function () {\n                _this.inlineSearch();\n            });\n        }\n    };\n    ComboBox.prototype.getFocusElement = function () {\n        var dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n        var selected = this.list.querySelector('.' + dropDownListClasses.selected);\n        var isSelected = dataItem.text === this.inputElement.value && !isNullOrUndefined(selected);\n        if (isSelected) {\n            return selected;\n        }\n        if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) &&\n            !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n            var inputValue = this.inputElement.value;\n            var activeItem = Search(inputValue, this.liCollections, this.filterType, true);\n            var activeElement = activeItem.item;\n            if (!isNullOrUndefined(activeElement)) {\n                var count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n                var height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n                if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n                    this.removeFocus();\n                    var fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n                    this.list.scrollTop = count * height + fixedHead;\n                    addClass([activeElement], dropDownListClasses.focus);\n                }\n            }\n            else {\n                if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n                    this.removeFocus();\n                    this.list.scrollTop = 0;\n                }\n            }\n            return activeElement;\n        }\n        else {\n            return null;\n        }\n    };\n    ComboBox.prototype.setValue = function (e) {\n        if (e && e.type === 'keydown' && e.action === 'enter') {\n            this.removeFillSelection();\n        }\n        if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n            this.preventAutoFill = false;\n            this.inlineSearch(e);\n            return false;\n        }\n        else {\n            return _super.prototype.setValue.call(this, e);\n        }\n    };\n    ComboBox.prototype.checkCustomValue = function () {\n        this.itemData = this.getDataByValue(this.value);\n        var dataItem = this.getItemData();\n        if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n            this.setProperties({ 'value': dataItem.value, 'text': dataItem.text }, !this.allowCustom);\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = (this.getModuleName() === 'autocomplete') ? (this.inputWrapper.buttons[0] ||\n                this.inputWrapper.clearButton ||\n                Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement)) :\n                (this.inputWrapper.buttons[0] || this.inputWrapper.clearButton);\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    };\n    ComboBox.prototype.setAutoFill = function (activeElement, isHover) {\n        if (!isHover) {\n            this.setHoverList(activeElement);\n        }\n        if (this.autofill && !this.preventAutoFill) {\n            var currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n            var currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n            if (this.getModuleName() === 'combobox') {\n                if (!this.isSelected && this.previousValue !== currentFillValue) {\n                    this.updateSelectedItem(activeElement, null);\n                    this.isSelected = true;\n                    this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                }\n                else {\n                    this.updateSelectedItem(activeElement, null, true);\n                }\n            }\n            if (!this.isAndroidAutoFill(currentValue)) {\n                this.setAutoFillSelection(currentValue, isHover);\n            }\n        }\n    };\n    ComboBox.prototype.isAndroidAutoFill = function (value) {\n        if (Browser.isAndroid) {\n            var currentPoints = this.getSelectionPoints();\n            var prevEnd = this.prevSelectPoints.end;\n            var curEnd = currentPoints.end;\n            var prevStart = this.prevSelectPoints.start;\n            var curStart = currentPoints.start;\n            if (prevEnd !== 0 && ((prevEnd === value.length && prevStart === value.length) ||\n                (prevStart > curStart && prevEnd > curEnd) || (prevEnd === curEnd && prevStart === curStart))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    ComboBox.prototype.clearAll = function (e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            _super.prototype.clearAll.call(this, e);\n        }\n        if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n            this.searchLists(e);\n        }\n    };\n    ComboBox.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    ComboBox.prototype.inlineSearch = function (e) {\n        var isKeyNavigate = (e && (e.action === 'down' || e.action === 'up' ||\n            e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown'));\n        var activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n        if (!isNullOrUndefined(activeElement)) {\n            if (!isKeyNavigate) {\n                var value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n                this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n            }\n            this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n            this.setAutoFill(activeElement, isKeyNavigate);\n        }\n        else if (this.inputElement.value === '') {\n            this.activeIndex = null;\n            this.list.scrollTop = 0;\n            var focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n            this.setHoverList(focusItem);\n        }\n        else {\n            this.activeIndex = null;\n            this.removeSelection();\n            if (this.liCollections && this.liCollections.length > 0 && !this.isCustomFilter) {\n                this.removeFocus();\n            }\n        }\n    };\n    ComboBox.prototype.incrementalSearch = function (e) {\n        this.showPopup(e);\n        if (!isNullOrUndefined(this.listData)) {\n            this.inlineSearch(e);\n            e.preventDefault();\n        }\n    };\n    ComboBox.prototype.setAutoFillSelection = function (currentValue, isKeyNavigate) {\n        if (isKeyNavigate === void 0) { isKeyNavigate = false; }\n        var selection = this.getSelectionPoints();\n        var value = this.inputElement.value.substr(0, selection.start);\n        if (value && (value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase())) {\n            var inputValue = value + currentValue.substr(value.length, currentValue.length);\n            Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n        }\n        else if (isKeyNavigate) {\n            Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n        }\n    };\n    ComboBox.prototype.getValueByText = function (text) {\n        return _super.prototype.getValueByText.call(this, text, true, this.ignoreAccent);\n    };\n    ComboBox.prototype.unWireEvent = function () {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n            EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n        }\n        if (this.inputElement) {\n            EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n            if (!this.readonly) {\n                EventHandler.remove(this.inputElement, 'input', this.onInput);\n                EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n            }\n        }\n        this.unBindCommonEvent();\n    };\n    ComboBox.prototype.setSelection = function (li, e) {\n        _super.prototype.setSelection.call(this, li, e);\n        if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n            this.removeFocus();\n        }\n    };\n    ComboBox.prototype.selectCurrentItem = function (e) {\n        var li;\n        if (this.isPopupOpen) {\n            if (this.isSelected) {\n                li = this.list.querySelector('.' + dropDownListClasses.selected);\n            }\n            else {\n                li = this.list.querySelector('.' + dropDownListClasses.focus);\n            }\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n        }\n        if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n            this.clearAll(e);\n        }\n        else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n            this.customValue(e);\n        }\n        this.hidePopup(e);\n    };\n    ComboBox.prototype.setHoverList = function (li) {\n        this.removeSelection();\n        if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n            this.removeFocus();\n            li.classList.add(dropDownListClasses.focus);\n        }\n    };\n    ComboBox.prototype.targetFocus = function (e) {\n        if (Browser.isDevice && !this.allowFiltering) {\n            this.preventFocus = false;\n        }\n        this.onFocus(e);\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    };\n    ComboBox.prototype.dropDownClick = function (e) {\n        e.preventDefault();\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        _super.prototype.dropDownClick.call(this, e);\n    };\n    ComboBox.prototype.customValue = function (e) {\n        var _this = this;\n        var value = this.getValueByText(this.inputElement.value);\n        if (!this.allowCustom && this.inputElement.value !== '') {\n            var previousValue = this.previousValue;\n            var currentValue = this.value;\n            this.setProperties({ value: value });\n            if (isNullOrUndefined(this.value)) {\n                Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n            }\n            if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n                this.onChangeEvent(null);\n            }\n        }\n        else if (this.inputElement.value.trim() !== '') {\n            var previousValue_1 = this.value;\n            if (isNullOrUndefined(value)) {\n                var value_1 = this.inputElement.value === '' ? null : this.inputElement.value;\n                // eslint-disable-next-line max-len\n                var eventArgs = { text: value_1, item: {} };\n                if (!this.initial) {\n                    this.trigger('customValueSpecifier', eventArgs, function (eventArgs) {\n                        _this.updateCustomValueCallback(value_1, eventArgs, previousValue_1, e);\n                    });\n                }\n                else {\n                    this.updateCustomValueCallback(value_1, eventArgs, previousValue_1);\n                }\n            }\n            else {\n                this.isSelectCustom = false;\n                this.setProperties({ value: value });\n                if (previousValue_1 !== this.value) {\n                    this.onChangeEvent(e);\n                }\n            }\n        }\n        else if (this.allowCustom) {\n            this.isSelectCustom = true;\n        }\n    };\n    ComboBox.prototype.updateCustomValueCallback = function (value, eventArgs, previousValue, e) {\n        var fields = this.fields;\n        var item = eventArgs.item;\n        var dataItem = {};\n        if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n            dataItem = item;\n        }\n        else {\n            setValue(fields.text, value, dataItem);\n            setValue(fields.value, value, dataItem);\n        }\n        this.itemData = dataItem;\n        var changeData = {\n            text: getValue(fields.text, this.itemData),\n            value: getValue(fields.value, this.itemData),\n            index: null\n        };\n        this.setProperties(changeData, true);\n        this.setSelection(null, null);\n        this.isSelectCustom = true;\n        if (previousValue !== this.value) {\n            this.onChangeEvent(e);\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n     * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'combobox') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'readonly':\n                    Input.setReadonly(this.readonly, this.inputElement);\n                    if (this.readonly) {\n                        EventHandler.remove(this.inputElement, 'input', this.onInput);\n                        EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                        EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                    }\n                    else {\n                        EventHandler.add(this.inputElement, 'input', this.onInput, this);\n                        EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n                        EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n                    }\n                    this.setReadOnly();\n                    break;\n                case 'allowFiltering':\n                    this.setSearchBox();\n                    if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n                        _super.prototype.renderList.call(this);\n                    }\n                    break;\n                case 'allowCustom':\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    var comboProps = this.getPropObject(prop, newProp, oldProp);\n                    _super.prototype.onPropertyChanged.call(this, comboProps.newProperty, comboProps.oldProperty);\n                    if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate &&\n                        this.getModuleName() === 'combobox') {\n                        _super.prototype.renderList.call(this);\n                    }\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * To initialize the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.render = function () {\n        _super.prototype.render.call(this);\n        this.setSearchBox();\n        if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this);\n        }\n        this.renderComplete();\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    ComboBox.prototype.getModuleName = function () {\n        return 'combobox';\n    };\n    /**\n     * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.filter = function (dataSource, query, fields) {\n        _super.prototype.filter.call(this, dataSource, query, fields);\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.showPopup = function (e) {\n        _super.prototype.showPopup.call(this, e);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.hidePopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        var inputValue = this.inputElement && this.inputElement.value === '' ? null\n            : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData)) {\n            var isEscape = this.isEscapeKey;\n            if (this.isEscapeKey) {\n                Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.isEscapeKey = false;\n            }\n            if (this.autofill) {\n                this.removeFillSelection();\n            }\n            var dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n            var selected = this.list.querySelector('.' + dropDownListClasses.selected);\n            if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n                if (this.isSelected) {\n                    this.onChangeEvent(e);\n                    this.isSelectCustom = false;\n                }\n                _super.prototype.hidePopup.call(this, e);\n                return;\n            }\n            if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n                var searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true);\n                this.selectedLI = searchItem.item;\n                if (isNullOrUndefined(searchItem.index)) {\n                    searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true).index;\n                }\n                this.activeIndex = searchItem.index;\n                if (!isNullOrUndefined(this.selectedLI)) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                }\n                else if (isEscape) {\n                    this.isSelectCustom = true;\n                    this.removeSelection();\n                }\n            }\n            if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n                this.customValue(e);\n            }\n        }\n        if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n            this.customValue();\n        }\n        _super.prototype.hidePopup.call(this, e);\n    };\n    /**\n     * Sets the focus to the component for interaction.\n     *\n     * @returns {void}\n     */\n    ComboBox.prototype.focusIn = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        _super.prototype.focusIn.call(this);\n    };\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.clear = function () {\n        this.value = null;\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.focusOut = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        _super.prototype.focusOut.call(this, e);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     * @deprecated\n     */\n    ComboBox.prototype.getItems = function () {\n        return _super.prototype.getItems.call(this);\n    };\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     * @deprecated\n     */\n    ComboBox.prototype.getDataByValue = function (value) {\n        return _super.prototype.getDataByValue.call(this, value);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    ComboBox.prototype.renderHightSearch = function () {\n        // update high light search\n    };\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"autofill\", void 0);\n    __decorate$3([\n        Property(true)\n    ], ComboBox.prototype, \"allowCustom\", void 0);\n    __decorate$3([\n        Property({})\n    ], ComboBox.prototype, \"htmlAttributes\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"allowFiltering\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"query\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"index\", void 0);\n    __decorate$3([\n        Property(true)\n    ], ComboBox.prototype, \"showClearButton\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"enableRtl\", void 0);\n    __decorate$3([\n        Event()\n    ], ComboBox.prototype, \"customValueSpecifier\", void 0);\n    __decorate$3([\n        Event()\n    ], ComboBox.prototype, \"filtering\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"valueTemplate\", void 0);\n    __decorate$3([\n        Property('Never')\n    ], ComboBox.prototype, \"floatLabelType\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"cssClass\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"headerTemplate\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"footerTemplate\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"placeholder\", void 0);\n    __decorate$3([\n        Property('100%')\n    ], ComboBox.prototype, \"width\", void 0);\n    __decorate$3([\n        Property('300px')\n    ], ComboBox.prototype, \"popupHeight\", void 0);\n    __decorate$3([\n        Property('100%')\n    ], ComboBox.prototype, \"popupWidth\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"readonly\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"text\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"value\", void 0);\n    ComboBox = __decorate$3([\n        NotifyPropertyChanges\n    ], ComboBox);\n    return ComboBox;\n}(DropDownList));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\nvar AutoComplete = /** @__PURE__ @class */ (function (_super) {\n    __extends$4(AutoComplete, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function AutoComplete(options, element) {\n        var _this_1 = _super.call(this, options, element) || this;\n        _this_1.isFiltered = false;\n        _this_1.searchList = false;\n        return _this_1;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.preRender = function () {\n        _super.prototype.preRender.call(this);\n    };\n    AutoComplete.prototype.getLocaleName = function () {\n        return 'auto-complete';\n    };\n    AutoComplete.prototype.getNgDirective = function () {\n        return 'EJS-AUTOCOMPLETE';\n    };\n    AutoComplete.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.value)) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.value)) ? this.value : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 20, checked the condition\n            if (this.suggestionCount !== 20) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    };\n    AutoComplete.prototype.searchLists = function (e) {\n        var _this_1 = this;\n        this.isTyped = true;\n        this.isDataFetched = this.isSelectCustom = false;\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this, e, true);\n        }\n        this.queryString = this.filterInput.value;\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields, null, e);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.filterInput.value,\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this_1.isFiltered = true;\n                _this_1.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this_1.isFiltered && !eventArgs.preventDefaultAction) {\n                _this_1.searchList = true;\n                _this_1.filterAction(_this_1.dataSource, null, _this_1.fields, e);\n            }\n        });\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    AutoComplete.prototype.filter = function (dataSource, query, fields) {\n        this.isFiltered = true;\n        this.filterAction(dataSource, query, fields);\n    };\n    AutoComplete.prototype.filterAction = function (dataSource, query, fields, e) {\n        this.beforePopupOpen = true;\n        if (this.queryString !== '' && (this.queryString.length >= this.minLength)) {\n            this.resetList(dataSource, fields, query, e);\n        }\n        else {\n            this.hidePopup(e);\n            this.beforePopupOpen = false;\n        }\n        this.renderReactTemplates();\n    };\n    AutoComplete.prototype.clearAll = function (e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            _super.prototype.clearAll.call(this, e);\n        }\n        if (this.beforePopupOpen) {\n            this.hidePopup();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    AutoComplete.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        this.fixedHeaderElement = null;\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        var item = this.list.querySelector('.' + dropDownListClasses.li);\n        if (!isNullOrUndefined(item)) {\n            removeClass([item], dropDownListClasses.focus);\n        }\n        this.postBackAction();\n    };\n    AutoComplete.prototype.postBackAction = function () {\n        if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n            var items = [this.liCollections[0]];\n            var searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase);\n            this.searchList = false;\n            if (!isNullOrUndefined(searchItem.item)) {\n                _super.prototype.setAutoFill.call(this, this.liCollections[0], true);\n            }\n        }\n    };\n    AutoComplete.prototype.setSelection = function (li, e) {\n        if (!this.isValidLI(li)) {\n            this.selectedLI = li;\n            return;\n        }\n        if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter'\n            && e.action !== 'tab' && this.isValidLI(li)) {\n            var value = this.getFormattedValue(li.getAttribute('data-value'));\n            this.activeIndex = this.getIndexByValue(value);\n            this.setHoverList(li);\n            this.selectedLI = li;\n            this.setScrollPosition(e);\n            if (this.autofill && this.isPopupOpen) {\n                this.preventAutoFill = false;\n                var isKeyNavigate = (e && e.action === 'down' || e.action === 'up' ||\n                    e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown');\n                _super.prototype.setAutoFill.call(this, li, isKeyNavigate);\n            }\n        }\n        else {\n            _super.prototype.setSelection.call(this, li, e);\n        }\n    };\n    AutoComplete.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this_1 = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this_1.highlight) {\n                    if (_this_1.element.tagName === _this_1.getNgDirective() && _this_1.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this_1.highlight) {\n                    highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                }\n                itemCreated_1.apply(_this_1, [e]);\n            };\n        }\n        return fields;\n    };\n    AutoComplete.prototype.isFiltering = function () {\n        return true;\n    };\n    AutoComplete.prototype.renderPopup = function (e) {\n        this.list.scrollTop = 0;\n        _super.prototype.renderPopup.call(this, e);\n    };\n    AutoComplete.prototype.isEditTextBox = function () {\n        return true && this.inputElement.value.trim() !== '';\n    };\n    AutoComplete.prototype.isPopupButton = function () {\n        return this.showPopupButton;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    AutoComplete.prototype.isSelectFocusItem = function (element) {\n        return false;\n    };\n    AutoComplete.prototype.setInputValue = function (newProp, oldProp) {\n        var oldValue = oldProp && oldProp.text ? oldProp.text : oldProp ? oldProp.value : oldProp;\n        var value = newProp && newProp.text ? newProp.text : newProp && newProp.value ? newProp.value : this.value;\n        if (value && this.typedString === '' && !this.allowCustom && !(this.dataSource instanceof DataManager)) {\n            var checkFields_1_1 = this.typeOfData(this.dataSource).typeof === 'string' ? '' : this.fields.value;\n            var listLength_1 = this.getItems().length;\n            var query = new Query();\n            var _this_2 = this;\n            new DataManager(this.dataSource).executeQuery(query.where(new Predicate(checkFields_1_1, 'equal', value)))\n                .then(function (e) {\n                if (e.result.length > 0) {\n                    _this_2.value = checkFields_1_1 !== '' ? e.result[0][_this_2.fields.value].toString() : e.result[0].toString();\n                    _this_2.addItem(e.result, listLength_1);\n                    _this_2.updateValues();\n                }\n                else {\n                    newProp && newProp.text ? _this_2.setOldText(oldValue) : newProp && newProp.value ? _this_2.setOldValue(oldValue) : _this_2.updateValues();\n                }\n            });\n        }\n        else if (newProp) {\n            newProp.text ? this.setOldText(oldValue) : this.setOldValue(oldValue);\n        }\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    AutoComplete.prototype.showPopup = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        this.preventAutoFill = true;\n        if (isNullOrUndefined(this.list)) {\n            this.renderList(e);\n        }\n        else {\n            this.resetList(this.dataSource, this.fields, null, e);\n        }\n    };\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     */\n    AutoComplete.prototype.hidePopup = function (e) {\n        _super.prototype.hidePopup.call(this, e);\n        this.activeIndex = -1;\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n     * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'showPopupButton':\n                    if (this.showPopupButton) {\n                        var button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n                        this.inputWrapper.buttons[0] = button;\n                        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n                        if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0]) && this.floatLabelType !== 'Never') {\n                            this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n                        }\n                        if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n                            EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n                        }\n                    }\n                    else {\n                        detach(this.inputWrapper.buttons[0]);\n                        this.inputWrapper.buttons[0] = null;\n                    }\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    var atcProps = this.getPropObject(prop, newProp, oldProp);\n                    _super.prototype.onPropertyChanged.call(this, atcProps.newProperty, atcProps.oldProperty);\n                    break;\n                }\n            }\n        }\n    };\n    AutoComplete.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    AutoComplete.prototype.getModuleName = function () {\n        return 'autocomplete';\n    };\n    /**\n     * To initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.render = function () {\n        _super.prototype.render.call(this);\n    };\n    __decorate$4([\n        Complex({ value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], AutoComplete.prototype, \"fields\", void 0);\n    __decorate$4([\n        Property(true)\n    ], AutoComplete.prototype, \"ignoreCase\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"showPopupButton\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"highlight\", void 0);\n    __decorate$4([\n        Property(20)\n    ], AutoComplete.prototype, \"suggestionCount\", void 0);\n    __decorate$4([\n        Property({})\n    ], AutoComplete.prototype, \"htmlAttributes\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"query\", void 0);\n    __decorate$4([\n        Property(1)\n    ], AutoComplete.prototype, \"minLength\", void 0);\n    __decorate$4([\n        Property('Contains')\n    ], AutoComplete.prototype, \"filterType\", void 0);\n    __decorate$4([\n        Event()\n    ], AutoComplete.prototype, \"filtering\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"index\", void 0);\n    __decorate$4([\n        Property('Never')\n    ], AutoComplete.prototype, \"floatLabelType\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"valueTemplate\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"allowFiltering\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"text\", void 0);\n    AutoComplete = __decorate$4([\n        NotifyPropertyChanges\n    ], AutoComplete);\n    return AutoComplete;\n}(ComboBox));\n\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\nvar FLOATLINE = 'e-float-line';\nvar FLOATTEXT = 'e-float-text';\nvar LABELTOP = 'e-label-top';\nvar LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n    var floatLinelement = createElement('span', { className: FLOATLINE });\n    var floatLabelElement = createElement('label', { className: FLOATTEXT });\n    var id = element.getAttribute('id') ? element.getAttribute('id') : getUniqueID('ej2_multiselect');\n    element.id = id;\n    if (!isNullOrUndefined(element.id) && element.id !== '') {\n        floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n        attributes(inputElement, { 'aria-labelledby': floatLabelElement.id });\n    }\n    if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n        floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n        inputElement.removeAttribute('placeholder');\n    }\n    floatLabelElement.innerText = encodePlaceholder(placeholder);\n    searchWrapper.appendChild(floatLinelement);\n    searchWrapper.appendChild(floatLabelElement);\n    overAllWrapper.classList.add('e-float-input');\n    updateFloatLabelState(value, floatLabelElement);\n    if (floatLabelType === 'Always') {\n        if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n            removeClass([floatLabelElement], LABELBOTTOM);\n        }\n        addClass([floatLabelElement], LABELTOP);\n    }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\nfunction updateFloatLabelState(value, label) {\n    if (value && value.length > 0) {\n        addClass([label], LABELTOP);\n        removeClass([label], LABELBOTTOM);\n    }\n    else {\n        removeClass([label], LABELTOP);\n        addClass([label], LABELBOTTOM);\n    }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n    var placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n    var floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n    var placeholderText;\n    if (!isNullOrUndefined(placeholderElement)) {\n        placeholderText = placeholderElement.innerText;\n        detach(searchWrapper.querySelector('.' + FLOATTEXT));\n        setPlaceHolder(value, inputElement, placeholderText);\n        if (!isNullOrUndefined(floatLine)) {\n            detach(searchWrapper.querySelector('.' + FLOATLINE));\n        }\n    }\n    else {\n        placeholderText = (placeholder !== null) ? placeholder : '';\n        setPlaceHolder(value, inputElement, placeholderText);\n    }\n    overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction setPlaceHolder(value, inputElement, placeholder) {\n    if (value && value.length) {\n        inputElement.placeholder = '';\n    }\n    else {\n        inputElement.placeholder = placeholder;\n    }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n    overAllWrapper.classList.add('e-input-focus');\n    var label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (!isNullOrUndefined(label)) {\n        addClass([label], LABELTOP);\n        if (label.classList.contains(LABELBOTTOM)) {\n            removeClass([label], LABELBOTTOM);\n        }\n    }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    overAllWrapper.classList.remove('e-input-focus');\n    var label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n        if (label.classList.contains(LABELTOP)) {\n            removeClass([label], LABELTOP);\n        }\n        addClass([label], LABELBOTTOM);\n    }\n}\nfunction encodePlaceholder(placeholder) {\n    var result = '';\n    if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n        var spanElement = document.createElement('span');\n        spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n        var hiddenInput = (spanElement.children[0]);\n        result = hiddenInput.placeholder;\n    }\n    return result;\n}\n/* eslint-enable valid-jsdoc */\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\nvar FOCUS = 'e-input-focus';\nvar DISABLED$1 = 'e-disabled';\nvar OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nvar ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nvar ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nvar HIDE_LIST = 'e-hide-listitem';\nvar DELIMITER_VIEW = 'e-delim-view';\nvar CHIP_WRAPPER$1 = 'e-chips-collection';\nvar CHIP$1 = 'e-chips';\nvar CHIP_CONTENT$1 = 'e-chipcontent';\nvar CHIP_CLOSE$1 = 'e-chips-close';\nvar CHIP_SELECTED = 'e-chip-selected';\nvar SEARCHBOX_WRAPPER = 'e-searcher';\nvar DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nvar ZERO_SIZE = 'e-zero-size';\nvar REMAIN_WRAPPER$1 = 'e-remain';\nvar CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nvar DELIMITER_WRAPPER = 'e-delim-values';\nvar POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nvar INPUT_ELEMENT = 'e-dropdownbase';\nvar RTL_CLASS = 'e-rtl';\nvar CLOSE_ICON_HIDE = 'e-close-icon-hide';\nvar MOBILE_CHIP = 'e-mob-chip';\nvar FOOTER$1 = 'e-ddl-footer';\nvar HEADER$1 = 'e-ddl-header';\nvar DISABLE_ICON = 'e-ddl-disable-icon';\nvar SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nvar HIDDEN_ELEMENT = 'e-multi-hidden';\nvar destroy = 'destroy';\nvar dropdownIcon = 'e-input-group-icon e-ddl-icon';\nvar iconAnimation = 'e-icon-anim';\nvar TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nvar BOX_ELEMENT = 'e-multiselect-box';\nvar FILTERPARENT = 'e-filter-parent';\nvar CUSTOM_WIDTH = 'e-search-custom-width';\nvar FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\nvar MultiSelect = /** @__PURE__ @class */ (function (_super) {\n    __extends$5(MultiSelect, _super);\n    /**\n     * Constructor for creating the DropDownList widget.\n     *\n     * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function MultiSelect(option, element) {\n        var _this = _super.call(this, option, element) || this;\n        _this.clearIconWidth = 0;\n        _this.previousFilterText = '';\n        _this.isValidKey = false;\n        _this.selectAllEventData = [];\n        _this.selectAllEventEle = [];\n        _this.scrollFocusStatus = false;\n        _this.keyDownStatus = false;\n        return _this;\n    }\n    MultiSelect.prototype.enableRTL = function (state) {\n        if (state) {\n            this.overAllWrapper.classList.add(RTL_CLASS);\n        }\n        else {\n            this.overAllWrapper.classList.remove(RTL_CLASS);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n    };\n    MultiSelect.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.mode === 'CheckBox') {\n            this.isGroupChecking = this.enableGroupCheckBox;\n            if (this.enableGroupCheckBox) {\n                var prevOnChange = this.isProtectedOnChange;\n                this.isProtectedOnChange = true;\n                this.enableSelectionOrder = false;\n                this.isProtectedOnChange = prevOnChange;\n            }\n            this.allowCustomValue = false;\n            this.hideSelectedItem = false;\n            this.closePopupOnSelect = false;\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    MultiSelect.prototype.updateHTMLAttribute = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                switch (htmlAttr) {\n                    case 'class': {\n                        var updatedClassValue = (this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ')).trim();\n                        if (updatedClassValue !== '') {\n                            addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                            addClass([this.popupWrapper], updatedClassValue.split(' '));\n                        }\n                        break;\n                    }\n                    case 'disabled':\n                        this.enable(false);\n                        break;\n                    case 'placeholder':\n                        if (!this.placeholder) {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                            this.setProperties({ placeholder: this.inputElement.placeholder }, true);\n                            this.refreshPlaceHolder();\n                        }\n                        break;\n                    default: {\n                        var defaultAttr = ['id'];\n                        var validateAttr = ['name', 'required', 'aria-required', 'form'];\n                        var containerAttr = ['title', 'role', 'style', 'class'];\n                        if (defaultAttr.indexOf(htmlAttr) > -1) {\n                            this.element.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        else if (containerAttr.indexOf(htmlAttr) > -1) {\n                            this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        else if (htmlAttr !== 'size') {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.updateReadonly = function (state) {\n        if (state || this.mode === 'CheckBox') {\n            this.inputElement.setAttribute('readonly', 'true');\n        }\n        else {\n            this.inputElement.removeAttribute('readonly');\n        }\n    };\n    MultiSelect.prototype.updateClearButton = function (state) {\n        if (state) {\n            if (this.overAllClear.parentNode) {\n                this.overAllClear.style.display = '';\n            }\n            else {\n                this.componentWrapper.appendChild(this.overAllClear);\n            }\n            this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n    };\n    MultiSelect.prototype.updateCssClass = function () {\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            var updatedCssClassValues = this.cssClass;\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n            if (updatedCssClassValues !== '') {\n                addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n                addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n            }\n        }\n    };\n    MultiSelect.prototype.updateOldPropCssClass = function (oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n            if (oldClass !== '') {\n                removeClass([this.overAllWrapper], oldClass.split(' '));\n                removeClass([this.popupWrapper], oldClass.split(' '));\n            }\n        }\n    };\n    MultiSelect.prototype.onPopupShown = function (e) {\n        var _this = this;\n        if (Browser.isDevice && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            window.onpopstate = function () {\n                proxy_1.hidePopup();\n                proxy_1.inputElement.focus();\n            };\n            history.pushState({}, '');\n        }\n        var animModel = { name: 'FadeIn', duration: 100 };\n        var eventArgs = { popup: this.popupObj, event: e, cancel: false, animation: animModel };\n        this.trigger('open', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.focusAtFirstListItem();\n                document.body.appendChild(_this.popupObj.element);\n                if (_this.mode === 'CheckBox' && _this.enableGroupCheckBox && !isNullOrUndefined(_this.fields.groupBy)) {\n                    _this.updateListItems(_this.list.querySelectorAll('li.e-list-item'), _this.mainList.querySelectorAll('li.e-list-item'));\n                }\n                if (_this.mode === 'CheckBox' || _this.showDropDownIcon) {\n                    addClass([_this.overAllWrapper], [iconAnimation]);\n                }\n                _this.refreshPopup();\n                _this.renderReactTemplates();\n                _this.popupObj.show(eventArgs.animation, (_this.zIndex === 1000) ? _this.element : null);\n                attributes(_this.inputElement, { 'aria-expanded': 'true', 'aria-owns': _this.inputElement.id + '_options' });\n                if (_this.selectedElementID == null) {\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                }\n                else {\n                    attributes(_this.inputElement, { 'aria-activedescendant': _this.selectedElementID });\n                }\n                if (_this.isFirstClick) {\n                    _this.loadTemplate();\n                }\n            }\n        });\n    };\n    MultiSelect.prototype.updateListItems = function (listItems, mainListItems) {\n        for (var i = 0; i < listItems.length; i++) {\n            this.findGroupStart(listItems[i]);\n            this.findGroupStart(mainListItems[i]);\n        }\n        this.deselectHeader();\n    };\n    MultiSelect.prototype.loadTemplate = function () {\n        this.refreshListItems(null);\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n        this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n    };\n    MultiSelect.prototype.setScrollPosition = function () {\n        if (((!this.hideSelectedItem && this.mode !== 'CheckBox') || (this.mode === 'CheckBox' && !this.enableSelectionOrder)) &&\n            (!isNullOrUndefined(this.value) && (this.value.length > 0))) {\n            var valueEle = this.findListElement((this.hideSelectedItem ? this.ulElement : this.list), 'li', 'data-value', this.value[this.value.length - 1]);\n            if (!isNullOrUndefined(valueEle)) {\n                this.scrollBottom(valueEle);\n            }\n        }\n    };\n    MultiSelect.prototype.focusAtFirstListItem = function () {\n        if (this.ulElement && this.ulElement.querySelector('li.'\n            + dropDownBaseClasses.li)) {\n            var element = void 0;\n            if (this.mode === 'CheckBox') {\n                this.removeFocus();\n                return;\n            }\n            else {\n                element = this.ulElement.querySelector('li.'\n                    + dropDownBaseClasses.li + ':not(.'\n                    + HIDE_LIST + ')');\n            }\n            if (element !== null) {\n                this.removeFocus();\n                this.addListFocus(element);\n            }\n        }\n    };\n    MultiSelect.prototype.focusAtLastListItem = function (data) {\n        var activeElement;\n        if (data) {\n            activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n        }\n        else {\n            if (this.value && this.value.length) {\n                Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n            }\n            else {\n                activeElement = null;\n            }\n        }\n        if (activeElement && activeElement.item !== null) {\n            this.addListFocus(activeElement.item);\n            this.scrollBottom(activeElement.item, activeElement.index);\n        }\n    };\n    MultiSelect.prototype.getAriaAttributes = function () {\n        var ariaAttributes = {\n            'aria-disabled': 'false',\n            'role': 'combobox',\n            'aria-expanded': 'false'\n        };\n        return ariaAttributes;\n    };\n    MultiSelect.prototype.updateListARIA = function () {\n        if (!isNullOrUndefined(this.ulElement)) {\n            attributes(this.ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n        }\n        var disableStatus = (this.inputElement.disabled) ? true : false;\n        if (!this.isPopupOpen()) {\n            attributes(this.inputElement, this.getAriaAttributes());\n        }\n        if (disableStatus) {\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n        }\n        this.ensureAriaDisabled((disableStatus) ? 'true' : 'false');\n    };\n    MultiSelect.prototype.ensureAriaDisabled = function (status) {\n        if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n            var attr = this.htmlAttributes;\n            extend(attr, { 'aria-disabled': status }, attr);\n            this.setProperties({ htmlAttributes: attr }, true);\n        }\n    };\n    MultiSelect.prototype.removelastSelection = function (e) {\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        var value = elements[elements.length - 1].getAttribute('data-value');\n        if (!isNullOrUndefined(this.value)) {\n            this.tempValues = this.value.slice();\n        }\n        var customValue = this.getFormattedValue(value);\n        if (this.allowCustomValue && (value !== 'false' && customValue === false || (!isNullOrUndefined(customValue) &&\n            customValue.toString() === 'NaN'))) {\n            customValue = value;\n        }\n        this.removeValue(customValue, e);\n        this.removeChipSelection();\n        this.updateDelimeter(this.delimiterChar, e);\n        this.makeTextBoxEmpty();\n        if (this.mainList && this.listData) {\n            this.refreshSelection();\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.onActionFailure = function (e) {\n        _super.prototype.onActionFailure.call(this, e);\n        this.renderPopup();\n        this.onPopupShown();\n    };\n    MultiSelect.prototype.targetElement = function () {\n        this.targetInputElement = this.inputElement;\n        if (this.mode === 'CheckBox' && this.allowFiltering) {\n            this.notify('targetElement', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        return this.targetInputElement.value;\n    };\n    MultiSelect.prototype.getForQuery = function (valuecheck) {\n        var predicate;\n        var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n        for (var i = 0; i < valuecheck.length; i++) {\n            if (i === 0) {\n                predicate = new Predicate(field, 'equal', valuecheck[i]);\n            }\n            else {\n                predicate = predicate.or(field, 'equal', valuecheck[i]);\n            }\n        }\n        return this.getQuery(this.query).where(predicate);\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    MultiSelect.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        this.updateSelectElementData(this.allowFiltering);\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n            for (var i = 0; i < this.value.length; i++) {\n                var checkEle = this.findListElement(((this.allowFiltering && !isNullOrUndefined(this.mainList)) ? this.mainList : ulElement), 'li', 'data-value', proxy.value[i]);\n                if (!checkEle) {\n                    this.value.splice(i, 1);\n                    i -= 1;\n                }\n            }\n        }\n        this.updateActionList(ulElement, list, e);\n        if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n            this.removeFocus();\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    MultiSelect.prototype.updateActionList = function (ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        if (!this.mainList && !this.mainData) {\n            this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n            this.mainData = list;\n            this.mainListCollection = this.liCollections;\n        }\n        else if (isNullOrUndefined(this.mainData) || this.mainData.length === 0) {\n            this.mainData = list;\n        }\n        if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering &&\n            this.inputElement.value && this.inputElement.value !== '') {\n            this.checkForCustomValue(this.tempQuery, this.fields);\n            return;\n        }\n        if (this.value && this.value.length && ((this.mode !== 'CheckBox' && this.inputElement.value.trim() !== '') ||\n            this.mode === 'CheckBox' || ((this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering &&\n            this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === ''))) {\n            this.refreshSelection();\n        }\n        this.updateListARIA();\n        this.unwireListEvents();\n        this.wireListEvents();\n        if (!isNullOrUndefined(this.setInitialValue)) {\n            this.setInitialValue();\n        }\n        if (!isNullOrUndefined(this.selectAllAction)) {\n            this.selectAllAction();\n        }\n        if (this.setDynValue) {\n            if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.initialTextUpdate();\n            }\n            this.initialValueUpdate();\n            this.initialUpdate();\n            this.refreshPlaceHolder();\n            if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                this.updateValueState(null, this.value, null);\n            }\n        }\n        this.renderPopup();\n        if (this.beforePopupOpen) {\n            this.beforePopupOpen = false;\n            this.onPopupShown(e);\n        }\n    };\n    MultiSelect.prototype.refreshSelection = function () {\n        var value;\n        var element;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (!isNullOrUndefined(this.value)) {\n            for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                value = this.value[index];\n                element = this.findListElement(this.list, 'li', 'data-value', value);\n                if (element) {\n                    addClass([element], className);\n                    if (this.hideSelectedItem && element.previousSibling\n                        && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)\n                        && (!element.nextElementSibling ||\n                            element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                        addClass([element.previousElementSibling], className);\n                    }\n                    if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n                        this.hideGroupItem(value);\n                    }\n                    if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n                        removeClass([element], dropDownBaseClasses.focus);\n                        var listEle = element.parentElement.querySelectorAll('.' +\n                            dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n                        if (listEle.length > 0) {\n                            addClass([listEle[0]], dropDownBaseClasses.focus);\n                        }\n                        else {\n                            //EJ2-57588 - for this task, we prevent the ul element cloning ( this.ulElement = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n                            if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                                this.l10nUpdate();\n                                addClass([this.list], dropDownBaseClasses.noData);\n                            }\n                        }\n                    }\n                    element.setAttribute('aria-selected', 'true');\n                    if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n                        var ariaValue = element.firstElementChild.getAttribute('aria-checked');\n                        if (isNullOrUndefined(ariaValue) || ariaValue === 'false') {\n                            var args = {\n                                module: 'CheckBoxSelection',\n                                enable: this.mode === 'CheckBox',\n                                li: element,\n                                e: null\n                            };\n                            this.notify('updatelist', args);\n                        }\n                    }\n                }\n            }\n        }\n        this.checkSelectAll();\n        this.checkMaxSelection();\n    };\n    MultiSelect.prototype.hideGroupItem = function (value) {\n        var element;\n        var element1;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n        var i = 0;\n        var j = 0;\n        var temp = true;\n        var temp1 = true;\n        do {\n            if (element && element.previousElementSibling\n                && (!element.previousElementSibling.classList.contains(HIDE_LIST) &&\n                    element.previousElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp = false;\n            }\n            if (!temp || !element || (element.previousElementSibling\n                && element.previousElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                i = 10;\n            }\n            else {\n                element = element.previousElementSibling;\n            }\n            if (element1 && element1.nextElementSibling\n                && (!element1.nextElementSibling.classList.contains(HIDE_LIST) &&\n                    element1.nextElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp1 = false;\n            }\n            if (!temp1 || !element1 || (element1.nextElementSibling\n                && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                j = 10;\n            }\n            else {\n                element1 = element1.nextElementSibling;\n            }\n        } while (i < 10 || j < 10);\n        if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            addClass([element.previousElementSibling], className);\n        }\n        else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            removeClass([element.previousElementSibling], className);\n        }\n    };\n    MultiSelect.prototype.getValidLi = function () {\n        var liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n        return (!isNullOrUndefined(liElement) ? liElement : this.liCollections[0]);\n    };\n    MultiSelect.prototype.checkSelectAll = function () {\n        var groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n        var listItem = this.list.querySelectorAll('li.e-list-item');\n        var searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n        var searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n        if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            searchActiveCount = searchActiveCount - groupItemLength;\n        }\n        if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength)\n            && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'check' });\n        }\n        else if ((searchCount !== searchActiveCount) && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n        }\n        if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n            for (var i = 0; i < listItem.length; i++) {\n                this.findGroupStart(listItem[i]);\n            }\n            this.deselectHeader();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.openClick = function (e) {\n        if (!this.openOnClick && this.mode !== 'CheckBox') {\n            if (this.targetElement() !== '') {\n                this.showPopup();\n            }\n            else {\n                this.hidePopup(e);\n            }\n        }\n        else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n            this.showPopup();\n        }\n    };\n    MultiSelect.prototype.keyUp = function (e) {\n        if (this.mode === 'CheckBox' && !this.openOnClick) {\n            var char = String.fromCharCode(e.keyCode);\n            var isWordCharacter = char.match(/\\w/);\n            if (!isNullOrUndefined(isWordCharacter)) {\n                this.isValidKey = true;\n            }\n        }\n        this.isValidKey = (this.isPopupOpen() && e.keyCode === 8) || this.isValidKey;\n        this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            this.expandTextbox();\n            this.showOverAllClear();\n            switch (e.keyCode) {\n                default:\n                    // For filtering works in mobile firefox\n                    this.search(e);\n            }\n        }\n    };\n    /**\n     * To filter the multiselect data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     */\n    MultiSelect.prototype.filter = function (dataSource, query, fields) {\n        this.isFiltered = true;\n        this.remoteFilterAction = true;\n        this.dataUpdater(dataSource, query, fields);\n    };\n    MultiSelect.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.filterAction) {\n            if (this.targetElement() !== null) {\n                var dataType = this.typeOfData(this.dataSource).typeof;\n                if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                    filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n                else {\n                    var fields = this.fields;\n                    filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n            }\n            return filterQuery;\n        }\n        else {\n            return query ? query : this.query ? this.query : new Query();\n        }\n    };\n    MultiSelect.prototype.dataUpdater = function (dataSource, query, fields) {\n        this.isDataFetched = false;\n        if (this.targetElement().trim() === '') {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (this.backCommand) {\n                this.remoteCustomValue = false;\n                if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n                    this.mainData = [];\n                }\n                this.onActionComplete(list, this.mainData);\n                if (this.value && this.value.length) {\n                    this.refreshSelection();\n                }\n                if (this.keyCode !== 8) {\n                    this.focusAtFirstListItem();\n                }\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n            if (this.allowCustomValue) {\n                if (!(dataSource instanceof DataManager)) {\n                    this.checkForCustomValue(query, fields);\n                }\n                else {\n                    this.remoteCustomValue = true;\n                    this.tempQuery = query;\n                }\n            }\n        }\n        this.refreshPopup();\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n    };\n    MultiSelect.prototype.checkForCustomValue = function (query, fields) {\n        var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n        if (this.allowCustomValue && dataChecks) {\n            var value = this.inputElement.value;\n            var field = fields ? fields : this.fields;\n            var customData = (!isNullOrUndefined(this.mainData) && this.mainData.length > 0) ?\n                this.mainData[0] : this.mainData;\n            if (typeof (customData) !== 'string' && typeof (customData) !== 'number' && typeof (customData) !== 'boolean') {\n                var dataItem = {};\n                setValue(field.text, value, dataItem);\n                if (typeof getValue((this.fields.value ? this.fields.value : 'value'), customData)\n                    === 'number') {\n                    setValue(field.value, Math.random(), dataItem);\n                }\n                else {\n                    setValue(field.value, value, dataItem);\n                }\n                var tempData = JSON.parse(JSON.stringify(this.listData));\n                tempData.splice(0, 0, dataItem);\n                this.resetList(tempData, field, query);\n            }\n            else {\n                var tempData = [this.inputElement.value];\n                tempData[0] = (typeof customData === 'number' && !isNaN(parseFloat(tempData[0]))) ?\n                    parseFloat(tempData[0]) : tempData[0];\n                tempData[0] = (typeof customData === 'boolean') ?\n                    (tempData[0] === 'true' ? true : (tempData[0] === 'false' ? false : tempData[0])) : tempData[0];\n                this.resetList(tempData, field);\n            }\n        }\n        if (this.value && this.value.length) {\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.getNgDirective = function () {\n        return 'EJS-MULTISELECT';\n    };\n    MultiSelect.prototype.wrapperClick = function (e) {\n        this.setDynValue = false;\n        if (!this.enabled) {\n            return;\n        }\n        if (e.target === this.overAllClear) {\n            e.preventDefault();\n            return;\n        }\n        if (!this.inputFocus) {\n            this.inputElement.focus();\n        }\n        if (!this.readonly) {\n            if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n                if (this.isPopupOpen()) {\n                    this.refreshPopup();\n                }\n                return;\n            }\n            if (!this.isPopupOpen() &&\n                (this.openOnClick || (this.showDropDownIcon && e.target && e.target.className === dropdownIcon))) {\n                this.showPopup(e);\n            }\n            else {\n                this.hidePopup(e);\n                if (this.mode === 'CheckBox') {\n                    this.showOverAllClear();\n                    this.inputFocus = true;\n                    if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                        this.overAllWrapper.classList.add(FOCUS);\n                    }\n                }\n            }\n        }\n        if (!(this.targetElement() && this.targetElement() !== '')) {\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.enable = function (state) {\n        if (state) {\n            this.overAllWrapper.classList.remove(DISABLED$1);\n            this.inputElement.removeAttribute('disabled');\n            attributes(this.inputElement, { 'aria-disabled': 'false' });\n            this.ensureAriaDisabled('false');\n        }\n        else {\n            this.overAllWrapper.classList.add(DISABLED$1);\n            this.inputElement.setAttribute('disabled', 'true');\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n            this.ensureAriaDisabled('true');\n        }\n        if (this.enabled !== state) {\n            this.enabled = state;\n        }\n        this.hidePopup();\n    };\n    MultiSelect.prototype.onBlurHandler = function (eve, isDocClickFromCheck) {\n        var target;\n        if (!isNullOrUndefined(eve)) {\n            target = eve.relatedTarget;\n        }\n        if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n            else if ((this.floatLabelType === 'Auto' &&\n                ((this.overAllWrapper.classList.contains('e-outline')) || (this.overAllWrapper.classList.contains('e-filled'))))) {\n                addClass([this.overAllWrapper], 'e-valid-input');\n            }\n            return;\n        }\n        if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline')) && this.mode === 'CheckBox' &&\n            ((isNullOrUndefined(this.value)) || this.value.length === 0)) {\n            removeClass([this.overAllWrapper], 'e-valid-input');\n        }\n        if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n            this.inputFocus = false;\n            this.overAllWrapper.classList.remove(FOCUS);\n            return;\n        }\n        if (this.scrollFocusStatus) {\n            if (!isNullOrUndefined(eve)) {\n                eve.preventDefault();\n            }\n            this.inputElement.focus();\n            this.scrollFocusStatus = false;\n            return;\n        }\n        this.inputFocus = false;\n        this.overAllWrapper.classList.remove(FOCUS);\n        if (this.addTagOnBlur) {\n            var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n            var listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n            var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n            var allowChipAddition = (listLiElement && !listLiElement.classList.contains(className)) ? true : false;\n            if (allowChipAddition) {\n                this.updateListSelection(listLiElement, eve);\n                if (this.mode === 'Delimiter') {\n                    this.updateDelimeter(this.delimiterChar);\n                }\n            }\n        }\n        this.updateDataList();\n        this.refreshListItems(null);\n        if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n            this.updateDelimView();\n        }\n        if (this.changeOnBlur) {\n            this.updateValueState(eve, this.value, this.tempValues);\n            this.dispatchEvent(this.hiddenElement, 'change');\n        }\n        this.overAllClear.style.display = 'none';\n        if (this.isPopupOpen()) {\n            this.hidePopup(eve);\n        }\n        this.makeTextBoxEmpty();\n        this.trigger('blur');\n        this.focused = true;\n        if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.removeChipFocus();\n        }\n        this.removeChipSelection();\n        this.refreshInputHight();\n        floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n        this.refreshPlaceHolder();\n        if ((this.allowFiltering || (this.enableSelectionOrder === true && this.mode === 'CheckBox'))\n            && !isNullOrUndefined(this.mainList)) {\n            this.ulElement = this.mainList;\n        }\n        this.checkPlaceholderSize();\n        Input.createSpanElement(this.overAllWrapper, this.createElement);\n        Input.calculateWidth(this.inputElement, this.overAllWrapper);\n        if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n    };\n    MultiSelect.prototype.checkPlaceholderSize = function () {\n        if (this.showDropDownIcon) {\n            var downIconWidth = this.dropIcon.offsetWidth +\n                parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            this.setPlaceholderSize(downIconWidth);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n            }\n        }\n    };\n    MultiSelect.prototype.setPlaceholderSize = function (downIconWidth) {\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n            if (this.dropIcon.offsetWidth !== 0) {\n                this.searchWrapper.style.width = ('calc(100% - ' + (downIconWidth + 10)) + 'px';\n            }\n            else {\n                addClass([this.searchWrapper], CUSTOM_WIDTH);\n            }\n        }\n        else if (!isNullOrUndefined(this.value)) {\n            this.searchWrapper.removeAttribute('style');\n            removeClass([this.searchWrapper], CUSTOM_WIDTH);\n        }\n    };\n    MultiSelect.prototype.refreshInputHight = function () {\n        if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n            this.searchWrapper.classList.remove(ZERO_SIZE);\n        }\n        else {\n            this.searchWrapper.classList.add(ZERO_SIZE);\n        }\n    };\n    MultiSelect.prototype.validateValues = function (newValue, oldValue) {\n        return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n    };\n    MultiSelect.prototype.updateValueState = function (event, newVal, oldVal) {\n        var newValue = newVal ? newVal : [];\n        var oldValue = oldVal ? oldVal : [];\n        if (this.initStatus && this.validateValues(newValue, oldValue)) {\n            var eventArgs = {\n                e: event,\n                oldValue: oldVal,\n                value: newVal,\n                isInteracted: event ? true : false,\n                element: this.element,\n                event: event\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n            this.updateTempValue();\n            if (!this.changeOnBlur) {\n                this.dispatchEvent(this.hiddenElement, 'change');\n            }\n        }\n    };\n    MultiSelect.prototype.updateTempValue = function () {\n        if (!this.value) {\n            this.tempValues = this.value;\n        }\n        else {\n            this.tempValues = this.value.slice();\n        }\n    };\n    MultiSelect.prototype.getPagingCount = function () {\n        var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.offsetHeight / parseInt(height, 10));\n    };\n    MultiSelect.prototype.pageUpSelection = function (steps) {\n        var collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    };\n    MultiSelect.prototype.pageDownSelection = function (steps) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var list = this.getItems();\n        var collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    };\n    MultiSelect.prototype.getItems = function () {\n        if (!this.list) {\n            _super.prototype.render.call(this);\n        }\n        return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ?\n            this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')') : [];\n    };\n    MultiSelect.prototype.focusInHandler = function (e) {\n        if (this.enabled) {\n            this.showOverAllClear();\n            this.inputFocus = true;\n            if (this.value && this.value.length) {\n                if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                    this.chipCollectionWrapper.style.display = '';\n                }\n                else {\n                    this.showDelimWrapper();\n                }\n                if (this.mode !== 'CheckBox') {\n                    this.viewWrapper.style.display = 'none';\n                }\n            }\n            if (this.mode !== 'CheckBox') {\n                this.searchWrapper.classList.remove(ZERO_SIZE);\n            }\n            this.checkPlaceholderSize();\n            if (this.focused) {\n                var args = { isInteracted: e ? true : false, event: e };\n                this.trigger('focus', args);\n                this.focused = false;\n            }\n            if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                this.overAllWrapper.classList.add(FOCUS);\n            }\n            floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n            if (this.isPopupOpen()) {\n                this.refreshPopup();\n            }\n            Input.calculateWidth(this.inputElement, this.overAllWrapper);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    MultiSelect.prototype.showDelimWrapper = function () {\n        if (this.mode === 'CheckBox') {\n            this.viewWrapper.style.display = '';\n        }\n        else {\n            this.delimiterWrapper.style.display = '';\n        }\n        this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n    };\n    MultiSelect.prototype.hideDelimWrapper = function () {\n        this.delimiterWrapper.style.display = 'none';\n        this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n    };\n    MultiSelect.prototype.expandTextbox = function () {\n        var size = 5;\n        if (this.placeholder) {\n            size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n        }\n        if (this.inputElement.value.length > size) {\n            this.inputElement.size = this.inputElement.value.length;\n        }\n        else {\n            this.inputElement.size = size;\n        }\n    };\n    MultiSelect.prototype.isPopupOpen = function () {\n        return ((this.popupWrapper !== null) && (this.popupWrapper.parentElement !== null));\n    };\n    MultiSelect.prototype.refreshPopup = function () {\n        if (this.popupObj && this.mobFilter) {\n            this.popupObj.setProperties({ width: this.calcPopupWidth() });\n            this.popupObj.refreshPosition(this.overAllWrapper);\n            this.popupObj.resolveCollision();\n        }\n    };\n    MultiSelect.prototype.checkTextLength = function () {\n        return this.targetElement().length < 1;\n    };\n    MultiSelect.prototype.popupKeyActions = function (e) {\n        switch (e.keyCode) {\n            case 38:\n                this.hidePopup(e);\n                if (this.mode === 'CheckBox') {\n                    this.inputElement.focus();\n                }\n                e.preventDefault();\n                break;\n            case 40:\n                if (!this.isPopupOpen()) {\n                    this.showPopup(e);\n                    e.preventDefault();\n                }\n                break;\n        }\n    };\n    MultiSelect.prototype.updateAriaAttribute = function () {\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(focusedItem)) {\n            this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n            if (this.allowFiltering) {\n                var filterInput = this.popupWrapper.querySelector('.' + FILTERINPUT);\n                filterInput && filterInput.setAttribute('aria-activedescendant', focusedItem.id);\n            }\n            else if (this.mode == \"CheckBox\") {\n                this.overAllWrapper.setAttribute('aria-activedescendant', focusedItem.id);\n            }\n        }\n    };\n    MultiSelect.prototype.homeNavigation = function (isHome) {\n        this.removeFocus();\n        var scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (scrollEle.length > 0) {\n            var element = scrollEle[(isHome) ? 0 : (scrollEle.length - 1)];\n            element.classList.add(dropDownBaseClasses.focus);\n            this.scrollBottom(element);\n        }\n    };\n    MultiSelect.prototype.onKeyDown = function (e) {\n        if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n            return;\n        }\n        this.keyCode = e.keyCode;\n        this.keyDownStatus = true;\n        if (e.keyCode > 111 && e.keyCode < 124) {\n            return;\n        }\n        if (e.altKey) {\n            this.popupKeyActions(e);\n            return;\n        }\n        else if (this.isPopupOpen()) {\n            var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n            var activeIndex = void 0;\n            switch (e.keyCode) {\n                case 36:\n                case 35:\n                    this.homeNavigation((e.keyCode === 36) ? true : false);\n                    break;\n                case 33:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageUpSelection(activeIndex - this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 34:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageDownSelection(activeIndex + this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 38:\n                    this.arrowUp(e);\n                    break;\n                case 40:\n                    this.arrowDown(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.hidePopup(e);\n                    if (this.mode === 'CheckBox') {\n                        this.inputElement.focus();\n                    }\n                    return;\n                case 13:\n                    e.preventDefault();\n                    if (this.mode !== 'CheckBox') {\n                        this.selectByKey(e);\n                    }\n                    this.checkPlaceholderSize();\n                    return;\n                case 32:\n                    this.spaceKeySelection(e);\n                    return;\n                case 9:\n                    e.preventDefault();\n                    this.hidePopup(e);\n                    this.inputElement.focus();\n                    this.overAllWrapper.classList.add(FOCUS);\n            }\n        }\n        else {\n            switch (e.keyCode) {\n                case 13:\n                case 9:\n                case 16:\n                case 17:\n                case 20:\n                    return;\n                case 40:\n                    if (this.openOnClick) {\n                        this.showPopup();\n                    }\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.escapeAction();\n                    return;\n            }\n        }\n        if (this.checkTextLength()) {\n            this.keyNavigation(e);\n        }\n        if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n            if (this.allowFiltering) {\n                this.previousFilterText = this.targetElement();\n            }\n            this.checkBackCommand(e);\n        }\n        this.expandTextbox();\n        if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.refreshPopup();\n        }\n    };\n    MultiSelect.prototype.arrowDown = function (e) {\n        e.preventDefault();\n        this.moveByList(1);\n        this.keyAction = true;\n        if (document.activeElement.classList.contains(FILTERINPUT)\n            || (this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list)) {\n            EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n        }\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.arrowUp = function (e) {\n        e.preventDefault();\n        this.keyAction = true;\n        var list = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            list = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        }\n        var focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        var index = Array.prototype.slice.call(list).indexOf(focuseElem);\n        if (index <= 0 && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            this.keyAction = false;\n            this.notify('inputFocus', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'focus' });\n        }\n        this.moveByList(-1);\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.spaceKeySelection = function (e) {\n        if (this.mode === 'CheckBox') {\n            if (!document.activeElement.classList.contains(FILTERINPUT)) {\n                e.preventDefault();\n                this.keyAction = true;\n            }\n            this.selectByKey(e);\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.checkBackCommand = function (e) {\n        if (e.keyCode === 8 && this.allowFiltering ? this.targetElement() !== this.previousFilterText : this.targetElement() === '') {\n            this.backCommand = false;\n        }\n        else {\n            this.backCommand = true;\n        }\n    };\n    MultiSelect.prototype.keyNavigation = function (e) {\n        if ((this.mode !== 'Delimiter' && this.mode !== 'CheckBox') && this.value && this.value.length) {\n            switch (e.keyCode) {\n                case 37: //left arrow\n                    e.preventDefault();\n                    this.moveBy(-1, e);\n                    break;\n                case 39: //right arrow\n                    e.preventDefault();\n                    this.moveBy(1, e);\n                    break;\n                case 8:\n                    this.removelastSelection(e);\n                    break;\n                case 46: //del\n                    this.removeSelectedChip(e);\n                    break;\n            }\n        }\n        else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n            if (this.value && this.value.length) {\n                e.preventDefault();\n                var temp = this.value[this.value.length - 1];\n                this.removeValue(temp, e);\n                this.updateDelimeter(this.delimiterChar, e);\n                this.focusAtLastListItem(temp);\n            }\n        }\n    };\n    MultiSelect.prototype.selectByKey = function (e) {\n        this.removeChipSelection();\n        this.selectListByKey(e);\n        if (this.hideSelectedItem) {\n            this.focusAtFirstListItem();\n        }\n    };\n    MultiSelect.prototype.escapeAction = function () {\n        var temp = this.tempValues ? this.tempValues.slice() : [];\n        if (this.value && this.validateValues(this.value, temp)) {\n            if (this.mode !== 'CheckBox') {\n                this.value = temp;\n                this.initialValueUpdate();\n            }\n            if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else {\n                this.showDelimWrapper();\n            }\n            this.refreshPlaceHolder();\n            if (this.value.length) {\n                this.showOverAllClear();\n            }\n            else {\n                this.hideOverAllClear();\n            }\n        }\n        this.makeTextBoxEmpty();\n    };\n    MultiSelect.prototype.scrollBottom = function (selectedLI, activeIndex) {\n        var currentOffset = this.list.offsetHeight;\n        var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n        var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n        var boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n            boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextBottom > currentOffset) {\n            this.list.scrollTop = nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = nextOffset;\n        }\n    };\n    MultiSelect.prototype.scrollTop = function (selectedLI, activeIndex) {\n        var nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n        nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n            nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n        var boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextOffset < 0) {\n            this.list.scrollTop = this.list.scrollTop + nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n                this.fixedHeaderElement.offsetHeight : 0);\n        }\n    };\n    MultiSelect.prototype.selectListByKey = function (e) {\n        var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        var target;\n        if (li !== null) {\n            if (li.classList.contains('e-active')) {\n                limit = limit - 1;\n            }\n            if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                this.updateListSelection(li, e);\n                this.addListFocus(li);\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    this.updateDelimeter(this.delimiterChar, e);\n                    this.refreshInputHight();\n                    this.checkPlaceholderSize();\n                    if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                        target = li.firstElementChild.lastElementChild;\n                        this.findGroupStart(target);\n                        this.deselectHeader();\n                    }\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.makeTextBoxEmpty();\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(li.textContent);\n                }\n                if (!this.changeOnBlur) {\n                    this.updateValueState(e, this.value, this.tempValues);\n                }\n                this.refreshPopup();\n            }\n            else {\n                if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                    target = li.firstElementChild.lastElementChild;\n                    if (target.classList.contains('e-check')) {\n                        this.selectAllItem(false, e, li);\n                    }\n                    else {\n                        this.selectAllItem(true, e, li);\n                    }\n                }\n            }\n            this.refreshSelection();\n            if (this.closePopupOnSelect) {\n                this.hidePopup(e);\n            }\n        }\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.refreshListItems = function (data) {\n        if ((this.allowFiltering || (this.mode === 'CheckBox' && this.enableSelectionOrder === true)\n            || this.allowCustomValue) && this.mainList && this.listData) {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n            this.focusAtLastListItem(data);\n            if (this.value && this.value.length) {\n                this.refreshSelection();\n            }\n        }\n    };\n    MultiSelect.prototype.removeSelectedChip = function (e) {\n        var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        var temp;\n        if (selectedElem !== null) {\n            if (!isNullOrUndefined(this.value)) {\n                this.tempValues = this.value.slice();\n            }\n            temp = selectedElem.nextElementSibling;\n            if (temp !== null) {\n                this.removeChipSelection();\n                this.addChipSelection(temp, e);\n            }\n            this.removeValue(selectedElem.getAttribute('data-value'), e);\n            this.makeTextBoxEmpty();\n        }\n        if (this.closePopupOnSelect) {\n            this.hidePopup(e);\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.moveByTop = function (state) {\n        var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        var index;\n        if (elements.length > 1) {\n            this.removeFocus();\n            index = state ? 0 : (elements.length - 1);\n            this.addListFocus(elements[index]);\n            this.scrollBottom(elements[index], index);\n        }\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.moveByList = function (position) {\n        if (this.list) {\n            var elements = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                elements = this.list.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                    + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            }\n            var selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n            var temp = -1;\n            if (elements.length) {\n                for (var index = 0; index < elements.length; index++) {\n                    if (elements[index] === selectedElem) {\n                        temp = index;\n                        break;\n                    }\n                }\n                if (position > 0) {\n                    if (temp < (elements.length - 1)) {\n                        this.removeFocus();\n                        this.addListFocus(elements[++temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollBottom(elements[temp], temp);\n                    }\n                }\n                else {\n                    if (temp > 0) {\n                        this.removeFocus();\n                        this.addListFocus(elements[--temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollTop(elements[temp], temp);\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.updateCheck = function (element) {\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox &&\n            !isNullOrUndefined(this.fields.groupBy)) {\n            var checkElement = element.firstElementChild.lastElementChild;\n            if (checkElement.classList.contains('e-check')) {\n                element.classList.add('e-active');\n            }\n            else {\n                element.classList.remove('e-active');\n            }\n        }\n    };\n    MultiSelect.prototype.moveBy = function (position, e) {\n        var temp;\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        if (selectedElem === null) {\n            if (position < 0) {\n                this.addChipSelection(elements[elements.length - 1], e);\n            }\n        }\n        else {\n            if (position < 0) {\n                temp = selectedElem.previousElementSibling;\n                if (temp !== null) {\n                    this.removeChipSelection();\n                    this.addChipSelection(temp, e);\n                }\n            }\n            else {\n                temp = selectedElem.nextElementSibling;\n                this.removeChipSelection();\n                if (temp !== null) {\n                    this.addChipSelection(temp, e);\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.chipClick = function (e) {\n        if (this.enabled) {\n            var elem = closest(e.target, '.' + CHIP$1);\n            this.removeChipSelection();\n            this.addChipSelection(elem, e);\n        }\n    };\n    MultiSelect.prototype.removeChipSelection = function () {\n        if (this.chipCollectionWrapper) {\n            this.removeChipFocus();\n        }\n    };\n    MultiSelect.prototype.addChipSelection = function (element, e) {\n        addClass([element], CHIP_SELECTED);\n        this.trigger('chipSelection', e);\n    };\n    MultiSelect.prototype.onChipRemove = function (e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.enabled && !this.readonly) {\n            var element = e.target.parentElement;\n            var customVal = element.getAttribute('data-value');\n            var value = this.getFormattedValue(customVal);\n            if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n                (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n                value = customVal;\n            }\n            if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n                this.hidePopup(e);\n            }\n            if (!this.inputFocus) {\n                this.inputElement.focus();\n            }\n            this.removeValue(value, e);\n            if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n                var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                this.onActionComplete(list, this.mainData);\n            }\n            this.updateDelimeter(this.delimiterChar, e);\n            if (this.placeholder && this.floatLabelType === 'Never') {\n                this.makeTextBoxEmpty();\n                this.checkPlaceholderSize();\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.makeTextBoxEmpty = function () {\n        this.inputElement.value = '';\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.refreshPlaceHolder = function () {\n        if (this.placeholder && this.floatLabelType === 'Never') {\n            if ((this.value && this.value.length) || (!isNullOrUndefined(this.text) && this.text !== '')) {\n                this.inputElement.placeholder = '';\n            }\n            else {\n                this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n            }\n        }\n        else {\n            this.setFloatLabelType();\n        }\n        this.expandTextbox();\n    };\n    MultiSelect.prototype.removeAllItems = function (value, eve, isClearAll, element, mainElement) {\n        var index = this.value.indexOf(value);\n        var removeVal = this.value.slice(0);\n        removeVal.splice(index, 1);\n        this.setProperties({ value: [].concat([], removeVal) }, true);\n        element.setAttribute('aria-selected', 'false');\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        removeClass([element], className);\n        this.notify('activeList', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox', li: element,\n            e: this, index: index\n        });\n        this.invokeCheckboxSelection(element, eve, isClearAll);\n        this.updateMainList(true, value, mainElement);\n        this.updateChipStatus();\n    };\n    MultiSelect.prototype.invokeCheckboxSelection = function (element, eve, isClearAll) {\n        this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: eve });\n        attributes(this.inputElement, { 'aria-activedescendant': element.id });\n        if ((this.value && this.value.length !== this.mainData.length)\n            && (this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll))) {\n            this.notify('checkSelectAll', {\n                module: 'CheckBoxSelection',\n                enable: this.mode === 'CheckBox',\n                value: 'uncheck'\n            });\n        }\n    };\n    MultiSelect.prototype.removeValue = function (value, eve, length, isClearAll) {\n        var _this = this;\n        var index = this.value.indexOf(this.getFormattedValue(value));\n        if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n            index = this.value.indexOf(value.toString());\n        }\n        var targetEle = eve && eve.target;\n        isClearAll = (isClearAll || targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (index !== -1) {\n            var element_1 = this.findListElement(this.list, 'li', 'data-value', value);\n            var val_1 = this.getDataByValue(value);\n            var eventArgs = {\n                e: eve,\n                item: element_1,\n                itemData: val_1,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('removing', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    _this.removeIndex++;\n                }\n                else {\n                    var removeVal = _this.value.slice(0);\n                    removeVal.splice(index, 1);\n                    _this.setProperties({ value: [].concat([], removeVal) }, true);\n                    if (element_1 !== null) {\n                        var hideElement = _this.findListElement(_this.mainList, 'li', 'data-value', value);\n                        element_1.setAttribute('aria-selected', 'false');\n                        removeClass([element_1], className);\n                        if (hideElement) {\n                            hideElement.setAttribute('aria-selected', 'false');\n                            removeClass([element_1, hideElement], className);\n                        }\n                        _this.notify('activeList', {\n                            module: 'CheckBoxSelection',\n                            enable: _this.mode === 'CheckBox', li: element_1,\n                            e: _this, index: index\n                        });\n                        _this.invokeCheckboxSelection(element_1, eve, isClearAll);\n                    }\n                    if (_this.hideSelectedItem && _this.fields.groupBy && element_1) {\n                        _this.hideGroupItem(value);\n                    }\n                    if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox' &&\n                        _this.isPopupOpen()) {\n                        _super.prototype.scrollStop.call(_this);\n                    }\n                    _this.updateMainList(true, value);\n                    _this.removeChip(value);\n                    _this.updateChipStatus();\n                    var limit = _this.value && _this.value.length ? _this.value.length : 0;\n                    if (limit < _this.maximumSelectionLength) {\n                        var collection = _this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                    _this.trigger('removed', eventArgs);\n                    var targetEle_1 = eve && eve.currentTarget;\n                    var isSelectAll = (targetEle_1 && targetEle_1.classList.contains('e-selectall-parent')) ? true : null;\n                    if (!_this.changeOnBlur && !isClearAll && (eve && length && !isSelectAll)) {\n                        _this.updateValueState(eve, _this.value, _this.tempValues);\n                    }\n                    if (length) {\n                        _this.selectAllEventData.push(val_1);\n                        _this.selectAllEventEle.push(element_1);\n                    }\n                    if (length === 1) {\n                        if (!_this.changeOnBlur) {\n                            _this.updateValueState(eve, _this.value, _this.tempValues);\n                        }\n                        var args = {\n                            event: eve,\n                            items: _this.selectAllEventEle,\n                            itemData: _this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: false\n                        };\n                        _this.trigger('selectedAll', args);\n                        _this.selectAllEventData = [];\n                        _this.selectAllEventEle = [];\n                    }\n                    if (isClearAll && (length === 1 || length === null)) {\n                        _this.clearAllCallback(eve, isClearAll);\n                    }\n                }\n            });\n        }\n    };\n    MultiSelect.prototype.updateMainList = function (state, value, mainElement) {\n        if (this.allowFiltering || this.mode === 'CheckBox') {\n            var element2 = mainElement ? mainElement :\n                this.findListElement(this.mainList, 'li', 'data-value', value);\n            if (element2) {\n                if (state) {\n                    element2.setAttribute('aria-selected', 'false');\n                    removeClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        element2.firstElementChild.setAttribute('aria-checked', 'false');\n                        removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n                else {\n                    element2.setAttribute('aria-selected', 'true');\n                    addClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        element2.firstElementChild.setAttribute('aria-checked', 'true');\n                        addClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.removeChip = function (value) {\n        if (this.chipCollectionWrapper) {\n            var element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n            if (element) {\n                remove(element);\n            }\n        }\n    };\n    MultiSelect.prototype.setWidth = function (width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.overAllWrapper.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.overAllWrapper.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    };\n    MultiSelect.prototype.updateChipStatus = function () {\n        if (this.value && this.value.length) {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                (this.chipCollectionWrapper.style.display = '');\n            }\n            if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n            this.showOverAllClear();\n        }\n        else {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                this.chipCollectionWrapper.style.display = 'none';\n            }\n            if (!isNullOrUndefined(this.delimiterWrapper)) {\n                (this.delimiterWrapper.style.display = 'none');\n            }\n            this.hideOverAllClear();\n        }\n    };\n    MultiSelect.prototype.addValue = function (value, text, eve) {\n        if (!this.value) {\n            this.value = [];\n        }\n        if (this.value.indexOf(value) < 0) {\n            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n        }\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.removeFocus();\n        if (element) {\n            this.addListFocus(element);\n            this.addListSelection(element);\n        }\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.addChip(text, value, eve);\n        }\n        if (this.hideSelectedItem && this.fields.groupBy) {\n            this.hideGroupItem(value);\n        }\n        this.updateChipStatus();\n        this.checkMaxSelection();\n    };\n    MultiSelect.prototype.checkMaxSelection = function () {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        if (limit === this.maximumSelectionLength) {\n            var collection = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ':not(.e-active)');\n            addClass(collection, 'e-disable');\n        }\n    };\n    MultiSelect.prototype.dispatchSelect = function (value, eve, element, isNotTrigger, length) {\n        var _this = this;\n        var list = this.listData;\n        if (this.initStatus && !isNotTrigger) {\n            var val_2 = this.getDataByValue(value);\n            var eventArgs = {\n                e: eve,\n                item: element,\n                itemData: val_2,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    if (length) {\n                        _this.selectAllEventData.push(val_2);\n                        _this.selectAllEventEle.push(element);\n                    }\n                    if (length === 1) {\n                        var args = {\n                            event: eve,\n                            items: _this.selectAllEventEle,\n                            itemData: _this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: true\n                        };\n                        _this.trigger('selectedAll', args);\n                        _this.selectAllEventData = [];\n                    }\n                    if (_this.allowCustomValue && _this.isServerRendered && _this.listData !== list) {\n                        _this.listData = list;\n                    }\n                    _this.updateListSelectEventCallback(value, element, eve);\n                    if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox') {\n                        _super.prototype.scrollStop.call(_this);\n                    }\n                }\n            });\n        }\n    };\n    MultiSelect.prototype.addChip = function (text, value, e) {\n        if (this.chipCollectionWrapper) {\n            this.getChip(text, value, e);\n        }\n    };\n    MultiSelect.prototype.removeChipFocus = function () {\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        var closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n        removeClass(elements, CHIP_SELECTED);\n        if (Browser.isDevice) {\n            for (var index = 0; index < closeElements.length; index++) {\n                closeElements[index].style.display = 'none';\n            }\n        }\n    };\n    MultiSelect.prototype.onMobileChipInteraction = function (e) {\n        var chipElem = closest(e.target, '.' + CHIP$1);\n        var chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n        if (this.enabled && !this.readonly) {\n            if (!chipElem.classList.contains(CHIP_SELECTED)) {\n                this.removeChipFocus();\n                chipClose.style.display = '';\n                chipElem.classList.add(CHIP_SELECTED);\n            }\n            this.refreshPopup();\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.multiCompiler = function (multiselectTemplate) {\n        var checkTemplate = false;\n        if (multiselectTemplate) {\n            try {\n                checkTemplate = (selectAll(multiselectTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    MultiSelect.prototype.getChip = function (data, value, e) {\n        var _this = this;\n        var itemData = { text: value, value: value };\n        var chip = this.createElement('span', {\n            className: CHIP$1,\n            attrs: { 'data-value': value, 'title': data }\n        });\n        var compiledString;\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT$1 });\n        var chipClose = this.createElement('span', { className: CHIP_CLOSE$1 });\n        if (this.mainData) {\n            itemData = this.getDataByValue(value);\n        }\n        if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n            var valuecheck = this.multiCompiler(this.valueTemplate);\n            if (valuecheck) {\n                compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(this.valueTemplate);\n            }\n            // eslint-disable-next-line\n            var valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n            if (valueCompTemp && valueCompTemp.length > 0) {\n                for (var i = 0; i < valueCompTemp.length; i++) {\n                    chipContent.appendChild(valueCompTemp[i]);\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else if (this.enableHtmlSanitizer) {\n            chipContent.innerText = data;\n        }\n        else {\n            chipContent.innerHTML = data;\n        }\n        chip.appendChild(chipContent);\n        var eventArgs = {\n            isInteracted: e ? true : false,\n            itemData: itemData,\n            e: e,\n            setClass: function (classes) {\n                addClass([chip], classes);\n            },\n            cancel: false\n        };\n        this.isPreventChange = this.isAngular && this.preventChange;\n        this.trigger('tagging', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                if (Browser.isDevice) {\n                    chip.classList.add(MOBILE_CHIP);\n                    append([chipClose], chip);\n                    chipClose.style.display = 'none';\n                    EventHandler.add(chip, 'click', _this.onMobileChipInteraction, _this);\n                }\n                else {\n                    EventHandler.add(chip, 'mousedown', _this.chipClick, _this);\n                    if (_this.showClearButton) {\n                        chip.appendChild(chipClose);\n                    }\n                }\n                EventHandler.add(chipClose, 'mousedown', _this.onChipRemove, _this);\n                _this.chipCollectionWrapper.appendChild(chip);\n                if (!_this.changeOnBlur && e) {\n                    _this.updateValueState(e, _this.value, _this.tempValues);\n                }\n            }\n        });\n    };\n    MultiSelect.prototype.calcPopupWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = (this.componentWrapper.offsetWidth) * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    MultiSelect.prototype.mouseIn = function () {\n        if (this.enabled && !this.readonly) {\n            this.showOverAllClear();\n        }\n    };\n    MultiSelect.prototype.mouseOut = function () {\n        if (!this.inputFocus) {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    MultiSelect.prototype.listOption = function (dataSource, fields) {\n        var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        var fieldProperty = isNullOrUndefined(fields.properties) ? fields :\n            fields.properties;\n        this.listCurrentOptions = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldProperty, showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n        if (this.mode === 'CheckBox') {\n            this.notify('listoption', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', dataSource: dataSource, fieldProperty: fieldProperty });\n        }\n        return this.listCurrentOptions;\n    };\n    MultiSelect.prototype.renderPopup = function () {\n        var _this = this;\n        if (!this.list) {\n            _super.prototype.render.call(this);\n        }\n        if (!this.popupObj) {\n            document.body.appendChild(this.popupWrapper);\n            var checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n            if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n                checkboxFilter.remove();\n                this.filterParent = null;\n            }\n            var overAllHeight = parseInt(this.popupHeight, 10);\n            this.popupWrapper.style.visibility = 'hidden';\n            if (this.headerTemplate) {\n                this.setHeaderTemplate();\n                overAllHeight -= this.header.offsetHeight;\n            }\n            append([this.list], this.popupWrapper);\n            if (this.footerTemplate) {\n                this.setFooterTemplate();\n                overAllHeight -= this.footer.offsetHeight;\n            }\n            if (this.mode === 'CheckBox' && this.showSelectAll) {\n                this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                overAllHeight -= this.selectAllHeight;\n            }\n            else if (this.mode === 'CheckBox' && !this.showSelectAll && (!this.headerTemplate && !this.footerTemplate)) {\n                this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                overAllHeight = parseInt(this.popupHeight, 10);\n            }\n            else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n                this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                overAllHeight = parseInt(this.popupHeight, 10);\n                if (this.headerTemplate && this.header) {\n                    overAllHeight -= this.header.offsetHeight;\n                }\n                if (this.footerTemplate && this.footer) {\n                    overAllHeight -= this.footer.offsetHeight;\n                }\n            }\n            if (this.mode === 'CheckBox') {\n                var args = {\n                    module: 'CheckBoxSelection',\n                    enable: this.mode === 'CheckBox',\n                    popupElement: this.popupWrapper\n                };\n                if (this.allowFiltering) {\n                    this.notify('searchBox', args);\n                    overAllHeight -= this.searchBoxHeight;\n                }\n                addClass([this.popupWrapper], 'e-checkbox');\n            }\n            if (this.popupHeight !== 'auto') {\n                this.list.style.maxHeight = formatUnit(overAllHeight);\n                this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n            }\n            else {\n                this.list.style.maxHeight = formatUnit(this.popupHeight);\n            }\n            this.popupObj = new Popup(this.popupWrapper, {\n                width: this.calcPopupWidth(), targetType: 'relative', position: { X: 'left', Y: 'bottom' },\n                relateTo: this.overAllWrapper, collision: { X: 'flip', Y: 'flip' }, offsetY: 1,\n                enableRtl: this.enableRtl, zIndex: this.zIndex,\n                close: function () {\n                    if (_this.popupObj.element.parentElement) {\n                        _this.popupObj.unwireScrollEvents();\n                        // For restrict the page scrolling in safari browser\n                        var checkboxFilterInput = _this.popupWrapper.querySelector('.' + FILTERINPUT);\n                        if (_this.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n                            checkboxFilterInput.blur();\n                        }\n                        detach(_this.popupObj.element);\n                    }\n                },\n                open: function () {\n                    _this.popupObj.resolveCollision();\n                    if (!_this.isFirstClick) {\n                        var ulElement = _this.list.querySelector('ul');\n                        if (ulElement) {\n                            if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) &&\n                                _this.targetElement().trim() !== '')) {\n                                _this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                            }\n                        }\n                        _this.isFirstClick = true;\n                    }\n                    _this.popupObj.wireScrollEvents();\n                    if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) &&\n                        _this.targetElement().trim() !== '')) {\n                        _this.loadTemplate();\n                    }\n                    _this.setScrollPosition();\n                    if (_this.allowFiltering) {\n                        _this.notify('inputFocus', {\n                            module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox', value: 'focus'\n                        });\n                    }\n                }, targetExitViewport: function () {\n                    if (!Browser.isDevice) {\n                        _this.hidePopup();\n                    }\n                }\n            });\n            if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n                this.notify('deviceSearchBox', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n            }\n            this.popupObj.close();\n            this.popupWrapper.style.visibility = '';\n        }\n    };\n    MultiSelect.prototype.setHeaderTemplate = function () {\n        var compiledString;\n        if (this.header) {\n            this.header.remove();\n        }\n        this.header = this.createElement('div');\n        addClass([this.header], HEADER$1);\n        var headercheck = this.multiCompiler(this.headerTemplate);\n        if (headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line\n        var elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (elements && elements.length > 0) {\n            for (var temp = 0; temp < elements.length; temp++) {\n                this.header.appendChild(elements[temp]);\n            }\n        }\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            prepend([this.header], this.popupWrapper);\n        }\n        else {\n            append([this.header], this.popupWrapper);\n        }\n        EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n    };\n    MultiSelect.prototype.setFooterTemplate = function () {\n        var compiledString;\n        if (this.footer) {\n            this.footer.remove();\n        }\n        this.footer = this.createElement('div');\n        addClass([this.footer], FOOTER$1);\n        var footercheck = this.multiCompiler(this.footerTemplate);\n        if (footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line\n        var elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (elements && elements.length > 0) {\n            for (var temp = 0; temp < elements.length; temp++) {\n                this.footer.appendChild(elements[temp]);\n            }\n        }\n        append([this.footer], this.popupWrapper);\n        EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n    };\n    MultiSelect.prototype.clearAll = function (e) {\n        if (this.enabled && !this.readonly) {\n            var temp = void 0;\n            if (this.value && this.value.length > 0) {\n                var liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n                if (liElement && liElement.length > 0) {\n                    this.selectAllItems(false, e);\n                }\n                else {\n                    this.removeIndex = 0;\n                    for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n                        this.removeValue(temp, e, null, true);\n                    }\n                }\n                this.selectedElementID = null;\n                this.inputElement.removeAttribute('aria-activedescendant');\n            }\n            else {\n                this.clearAllCallback(e);\n            }\n        }\n    };\n    MultiSelect.prototype.clearAllCallback = function (e, isClearAll) {\n        var tempValues = this.value ? this.value.slice() : [];\n        if (this.mainList && this.listData && ((this.allowFiltering && this.mode !== 'CheckBox') || this.allowCustomValue)) {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n        }\n        this.focusAtFirstListItem();\n        this.updateDelimeter(this.delimiterChar, e);\n        if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n            this.updateDelimView();\n        }\n        if (this.inputElement.value !== '') {\n            this.makeTextBoxEmpty();\n            this.search(null);\n        }\n        this.checkPlaceholderSize();\n        if (this.isPopupOpen()) {\n            this.refreshPopup();\n        }\n        if (!this.inputFocus) {\n            if (this.changeOnBlur) {\n                this.updateValueState(e, this.value, tempValues);\n            }\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n        }\n        if (this.mode === 'CheckBox') {\n            this.refreshPlaceHolder();\n            this.refreshInputHight();\n            if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.updateValueState(e, this.value, this.tempValues);\n            }\n        }\n        if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n        }\n        e.preventDefault();\n    };\n    MultiSelect.prototype.windowResize = function () {\n        this.refreshPopup();\n        if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n            this.updateDelimView();\n        }\n    };\n    MultiSelect.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            var textVal = (this.element.tagName === this.getNgDirective()) ?\n                null : this.element.getAttribute('data-initial-value');\n            this.text = textVal;\n        }\n    };\n    MultiSelect.prototype.wireEvent = function () {\n        EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n        EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        if (this.mode !== 'CheckBox') {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n        }\n        EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n        EventHandler.add(this.componentWrapper, 'mouseover', this.mouseIn, this);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n        EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n        EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n    };\n    MultiSelect.prototype.onInput = function (e) {\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        // For Filtering works in mobile firefox\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.search(e);\n        }\n    };\n    MultiSelect.prototype.pasteHandler = function (event) {\n        var _this = this;\n        setTimeout(function () {\n            _this.expandTextbox();\n            _this.search(event);\n        });\n    };\n    MultiSelect.prototype.search = function (e) {\n        var _this = this;\n        if (!isNullOrUndefined(e)) {\n            this.keyCode = e.keyCode;\n        }\n        if (!this.isPopupOpen() && this.openOnClick) {\n            this.showPopup(e);\n        }\n        this.openClick(e);\n        if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && (e.keyCode !== 8)) {\n            this.focusAtFirstListItem();\n        }\n        else {\n            var text = this.targetElement();\n            if (this.allowFiltering) {\n                var eventArgs_1 = {\n                    preventDefaultAction: false,\n                    text: this.targetElement(),\n                    updateData: function (dataSource, query, fields) {\n                        if (eventArgs_1.cancel) {\n                            return;\n                        }\n                        _this.isFiltered = true;\n                        _this.remoteFilterAction = true;\n                        _this.dataUpdater(dataSource, query, fields);\n                    },\n                    event: e,\n                    cancel: false\n                };\n                this.trigger('filtering', eventArgs_1, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        if (!_this.isFiltered && !eventArgs.preventDefaultAction) {\n                            _this.filterAction = true;\n                            _this.dataUpdater(_this.dataSource, null, _this.fields);\n                        }\n                    }\n                });\n            }\n            else if (this.allowCustomValue) {\n                var query = new Query();\n                query = (text !== '') ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n                this.dataUpdater(this.mainData, query, this.fields);\n            }\n            else {\n                var liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n                var activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n                if (activeElement && activeElement.item !== null) {\n                    this.addListFocus(activeElement.item);\n                    this.list.scrollTop =\n                        activeElement.item.offsetHeight * activeElement.index;\n                }\n                else if (this.targetElement() !== '') {\n                    this.removeFocus();\n                }\n                else {\n                    this.focusAtFirstListItem();\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.preRender = function () {\n        if (this.allowFiltering === null) {\n            this.allowFiltering = (this.mode === 'CheckBox') ? true : false;\n        }\n        this.initializeData();\n        this.updateDataAttribute(this.htmlAttributes);\n        _super.prototype.preRender.call(this);\n    };\n    MultiSelect.prototype.getLocaleName = function () {\n        return 'multi-select';\n    };\n    MultiSelect.prototype.initializeData = function () {\n        this.mainListCollection = [];\n        this.beforePopupOpen = false;\n        this.filterAction = false;\n        this.remoteFilterAction = false;\n        this.isFirstClick = false;\n        this.mobFilter = true;\n        this.isFiltered = false;\n        this.focused = true;\n        this.initial = true;\n        this.backCommand = true;\n    };\n    MultiSelect.prototype.updateData = function (delimiterChar, e) {\n        var data = '';\n        var delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n        var text = [];\n        var temp;\n        var tempData = this.listData;\n        this.listData = this.mainData;\n        this.hiddenElement.innerHTML = '';\n        if (!isNullOrUndefined(this.value)) {\n            for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                var listValue = this.findListElement(((!isNullOrUndefined(this.mainList)) ? this.mainList : this.ulElement), 'li', 'data-value', this.value[index]);\n                if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n                    this.value.splice(index, 1);\n                    index -= 1;\n                }\n                else {\n                    if (this.listData) {\n                        temp = this.getTextByValue(this.value[index]);\n                    }\n                    else {\n                        temp = this.value[index];\n                    }\n                    data += temp + delimiterChar + ' ';\n                    text.push(temp);\n                }\n                this.hiddenElement.innerHTML += '<option selected value =\"' + this.value[index] + '\">' + index + '</option>';\n            }\n        }\n        this.setProperties({ text: text.toString() }, true);\n        if (delim) {\n            this.updateWrapperText(this.delimiterWrapper, data);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n        }\n        var targetEle = e && e.target;\n        var isClearAll = (targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        if (!this.changeOnBlur && ((e && !isClearAll)) || this.isSelectAll) {\n            this.isSelectAll = false;\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        this.listData = tempData;\n        this.addValidInputClass();\n    };\n    MultiSelect.prototype.initialTextUpdate = function () {\n        if (!isNullOrUndefined(this.text)) {\n            var textArr = this.text.split(this.delimiterChar);\n            var textVal = [];\n            for (var index = 0; textArr.length > index; index++) {\n                var val = this.getValueByText(textArr[index]);\n                if (!isNullOrUndefined(val)) {\n                    textVal.push(val);\n                }\n                else if (this.allowCustomValue) {\n                    textVal.push(textArr[index]);\n                }\n            }\n            if (textVal && textVal.length) {\n                this.setProperties({ value: textVal }, true);\n            }\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    };\n    MultiSelect.prototype.renderList = function (isEmptyData) {\n        if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate\n            || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n            isEmptyData = true;\n        }\n        _super.prototype.render.call(this, null, isEmptyData);\n        this.unwireListEvents();\n        this.wireListEvents();\n    };\n    MultiSelect.prototype.initialValueUpdate = function () {\n        if (this.list) {\n            var text = void 0;\n            var element = void 0;\n            var value = void 0;\n            if (this.chipCollectionWrapper) {\n                this.chipCollectionWrapper.innerHTML = '';\n            }\n            this.removeListSelection();\n            if (!isNullOrUndefined(this.value)) {\n                for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    value = this.value[index];\n                    element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                    text = this.getTextByValue(value);\n                    if ((element && (element.getAttribute('aria-selected') !== 'true')) ||\n                        (element && (element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem) &&\n                            (this.mode === 'Box' || this.mode === 'Default'))) {\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                    else if (value && this.allowCustomValue) {\n                        var indexItem = this.listData.length;\n                        var newValue = {};\n                        setValue(this.fields.text, value, newValue);\n                        setValue(this.fields.value, value, newValue);\n                        var noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n                        this.addItem(newValue, indexItem);\n                        element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                        if (this.popupWrapper.contains(noDataEle)) {\n                            this.list.setAttribute('style', noDataEle.getAttribute('style'));\n                            this.popupWrapper.replaceChild(this.list, noDataEle);\n                            this.wireListEvents();\n                        }\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                }\n            }\n            if (this.mode === 'CheckBox') {\n                this.updateDelimView();\n                if (this.changeOnBlur) {\n                    this.updateValueState(null, this.value, this.tempValues);\n                }\n                this.updateDelimeter(this.delimiterChar);\n                this.refreshInputHight();\n            }\n            else {\n                this.updateDelimeter(this.delimiterChar);\n            }\n            if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n                this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n            }\n            if (this.mode === 'Box' || (this.mode === 'Default' && this.inputFocus)) {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateActionCompleteData = function (li, item) {\n        if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n            this.mainList = this.ulElement;\n            if (this.hideSelectedItem) {\n                addClass([li], HIDE_LIST);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateAddItemList = function (list, itemCount) {\n        if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n            remove(this.popupWrapper.querySelector('.e-content'));\n            this.popupObj = null;\n            this.renderPopup();\n        }\n        else if (this.allowCustomValue) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n        }\n    };\n    MultiSelect.prototype.updateDataList = function () {\n        if (this.mainList && this.ulElement && !(this.isFiltered || this.filterAction || this.targetElement().trim())) {\n            var isDynamicGroupItemUpdate = this.mainList.childElementCount < this.ulElement.childElementCount;\n            var isReactTemplateUpdate = ((this.ulElement.childElementCount > 0 && this.ulElement.children[0].childElementCount > 0) && (this.mainList.children[0].childElementCount < this.ulElement.children[0].childElementCount));\n            var isAngularTemplateUpdate = this.itemTemplate && this.ulElement.childElementCount > 0 && !(this.ulElement.childElementCount < this.mainList.childElementCount) && (this.ulElement.children[0].childElementCount > 0 || (this.fields.groupBy && this.ulElement.children[1] && this.ulElement.children[1].childElementCount > 0));\n            if (isDynamicGroupItemUpdate || isReactTemplateUpdate || isAngularTemplateUpdate) {\n                //EJ2-57748 - for this task, we prevent the ul element cloning ( this.mainList = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n                this.mainList = this.ulElement;\n            }\n        }\n    };\n    MultiSelect.prototype.isValidLI = function (li) {\n        return (li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) &&\n            li.classList.contains(dropDownBaseClasses.li));\n    };\n    MultiSelect.prototype.updateListSelection = function (li, e, length) {\n        var customVal = li.getAttribute('data-value');\n        var value = this.getFormattedValue(customVal);\n        if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n            (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n            value = customVal;\n        }\n        this.removeHover();\n        if (!this.value || this.value.indexOf(value) === -1) {\n            this.dispatchSelect(value, e, li, (li.getAttribute('aria-selected') === 'true'), length);\n        }\n        else {\n            this.removeValue(value, e, length);\n        }\n    };\n    MultiSelect.prototype.updateListSelectEventCallback = function (value, li, e) {\n        var _this = this;\n        var text = this.getTextByValue(value);\n        if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n            var temp_1 = li.cloneNode(true);\n            var fieldValue = this.fields.value ? this.fields.value : 'value';\n            if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n                value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n            }\n            var data_1 = this.getDataByValue(value);\n            var eventArgs = {\n                newData: data_1,\n                cancel: false\n            };\n            this.trigger('customValueSelection', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    append([temp_1], _this.mainList);\n                    _this.mainData.push(data_1);\n                    _this.remoteCustomValue = false;\n                    _this.addValue(value, text, e);\n                }\n            });\n        }\n        else {\n            this.remoteCustomValue = false;\n            this.addValue(value, text, e);\n        }\n    };\n    MultiSelect.prototype.removeListSelection = function () {\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        var selectedItems = this.list.querySelectorAll('.' + className);\n        var temp = selectedItems.length;\n        if (selectedItems && selectedItems.length) {\n            removeClass(selectedItems, className);\n            while (temp > 0) {\n                selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n                temp--;\n            }\n        }\n        if (!isNullOrUndefined(this.mainList)) {\n            var selectItems = this.mainList.querySelectorAll('.' + className);\n            var temp1 = selectItems.length;\n            if (selectItems && selectItems.length) {\n                removeClass(selectItems, className);\n                while (temp1 > 0) {\n                    selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n                    if (this.mode === 'CheckBox') {\n                        if (selectedItems && (selectedItems.length > (temp1 - 1))) {\n                            selectedItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n                            removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                        }\n                        selectItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n                        removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                    }\n                    temp1--;\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.removeHover = function () {\n        var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n        if (hoveredItem && hoveredItem.length) {\n            removeClass(hoveredItem, dropDownBaseClasses.hover);\n        }\n    };\n    MultiSelect.prototype.removeFocus = function () {\n        if (this.list && this.mainList) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n            var mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.focus);\n                removeClass(mainlist, dropDownBaseClasses.focus);\n            }\n        }\n    };\n    MultiSelect.prototype.addListHover = function (li) {\n        if (this.enabled && this.isValidLI(li)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n        else {\n            if ((li !== null && li.classList.contains('e-list-group-item')) && this.enableGroupCheckBox && this.mode === 'CheckBox'\n                && !isNullOrUndefined(this.fields.groupBy)) {\n                this.removeHover();\n                addClass([li], dropDownBaseClasses.hover);\n            }\n        }\n    };\n    MultiSelect.prototype.addListFocus = function (element) {\n        if (this.enabled && this.isValidLI(element)) {\n            this.removeFocus();\n            addClass([element], dropDownBaseClasses.focus);\n        }\n        else {\n            if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n                addClass([element], dropDownBaseClasses.focus);\n            }\n        }\n    };\n    MultiSelect.prototype.addListSelection = function (element, mainElement) {\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n            addClass([element], className);\n            this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n            element.setAttribute('aria-selected', 'true');\n            if (this.mode === 'CheckBox') {\n                var ariaCheck = element.firstElementChild.getAttribute('aria-checked');\n                if (ariaCheck === 'false' || isNullOrUndefined(ariaCheck)) {\n                    this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n                }\n            }\n            this.notify('activeList', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n            if (this.chipCollectionWrapper) {\n                this.removeChipSelection();\n            }\n            this.selectedElementID = element.id;\n        }\n    };\n    MultiSelect.prototype.updateDelimeter = function (delimChar, e) {\n        this.updateData(delimChar, e);\n    };\n    MultiSelect.prototype.onMouseClick = function (e) {\n        var _this = this;\n        this.keyCode = null;\n        this.scrollFocusStatus = false;\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        var headerLi = closest(target, '.' + dropDownBaseClasses.group);\n        if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n            target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild\n                : e.target;\n            if (target.classList.contains('e-check')) {\n                this.selectAllItem(false, e);\n                target.classList.remove('e-check');\n                target.classList.remove('e-stop');\n                closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n                target.setAttribute('aria-selected', 'false');\n            }\n            else {\n                this.selectAllItem(true, e);\n                target.classList.remove('e-stop');\n                target.classList.add('e-check');\n                closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n                target.setAttribute('aria-selected', 'true');\n            }\n            this.refreshSelection();\n            this.checkSelectAll();\n        }\n        else {\n            if (this.isValidLI(li)) {\n                var limit = this.value && this.value.length ? this.value.length : 0;\n                if (li.classList.contains('e-active')) {\n                    limit = limit - 1;\n                }\n                if (limit < this.maximumSelectionLength) {\n                    this.updateListSelection(li, e);\n                    this.checkPlaceholderSize();\n                    this.addListFocus(li);\n                    if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n                        if (this.mode !== 'CheckBox') {\n                            this.focusAtLastListItem(li.getAttribute('data-value'));\n                            this.refreshSelection();\n                        }\n                    }\n                    else {\n                        this.makeTextBoxEmpty();\n                    }\n                }\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    if (this.value && this.value.length > 50) {\n                        setTimeout(function () {\n                            _this.updateDelimeter(_this.delimiterChar, e);\n                        }, 0);\n                    }\n                    else {\n                        this.updateDelimeter(this.delimiterChar, e);\n                    }\n                    this.refreshInputHight();\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.checkSelectAll();\n                this.refreshPopup();\n                if (this.hideSelectedItem) {\n                    this.focusAtFirstListItem();\n                }\n                if (this.closePopupOnSelect) {\n                    this.hidePopup(e);\n                }\n                else {\n                    e.preventDefault();\n                }\n                this.makeTextBoxEmpty();\n                this.findGroupStart(target);\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n                }\n            }\n            else {\n                e.preventDefault();\n            }\n            this.refreshPlaceHolder();\n            this.deselectHeader();\n        }\n    };\n    MultiSelect.prototype.findGroupStart = function (target) {\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            var count = 0;\n            var liChecked = 0;\n            var liUnchecked = 0;\n            var groupValues = void 0;\n            if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n                while (!target.getElementsByClassName('e-frame').length) {\n                    target = target.parentElement;\n                }\n            }\n            if (target.classList.contains('e-frame')) {\n                target = target.parentElement.parentElement;\n            }\n            groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n            groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n            while (!target.classList.contains('e-list-group-item')) {\n                if (target.classList.contains('e-list-icon')) {\n                    target = target.parentElement;\n                }\n                target = target.previousElementSibling;\n                if (target == null) {\n                    break;\n                }\n            }\n            this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n        }\n    };\n    MultiSelect.prototype.findGroupAttrtibutes = function (listElement, checked, unChecked, count, position) {\n        while (!listElement.classList.contains('e-list-group-item')) {\n            if (listElement.classList.contains('e-list-icon')) {\n                listElement = listElement.parentElement;\n            }\n            if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') &&\n                listElement.classList.contains('e-list-item')) {\n                checked++;\n            }\n            else if (listElement.classList.contains('e-list-item')) {\n                unChecked++;\n            }\n            count++;\n            listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n            if (listElement == null) {\n                break;\n            }\n        }\n        return [checked, unChecked, count];\n    };\n    MultiSelect.prototype.updateCheckBox = function (groupHeader, checked, unChecked, count) {\n        if (groupHeader === null) {\n            return;\n        }\n        var checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n        if (count === checked) {\n            checkBoxElement.classList.remove('e-stop');\n            checkBoxElement.classList.add('e-check');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'true');\n        }\n        else if (count === unChecked) {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.remove('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n        else if (this.maximumSelectionLength === checked - 1) {\n            checkBoxElement.classList.remove('e-stop');\n            groupHeader.setAttribute('aria-selected', 'true');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            checkBoxElement.classList.add('e-check');\n        }\n        else {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.add('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n    };\n    MultiSelect.prototype.deselectHeader = function () {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        var collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n        if (limit < this.maximumSelectionLength) {\n            removeClass(collection, 'e-disable');\n        }\n        if (limit === this.maximumSelectionLength) {\n            addClass(collection, 'e-disable');\n        }\n    };\n    MultiSelect.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)\n            && this.enableGroupCheckBox) {\n            currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n        }\n        this.addListHover(currentLi);\n    };\n    MultiSelect.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    MultiSelect.prototype.onListMouseDown = function (e) {\n        e.preventDefault();\n        this.scrollFocusStatus = true;\n    };\n    MultiSelect.prototype.onDocumentClick = function (e) {\n        if (this.mode !== 'CheckBox') {\n            var target = e.target;\n            if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) &&\n                !this.overAllWrapper.contains(e.target)) {\n                this.scrollFocusStatus = false;\n            }\n            else {\n                this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.inputElement);\n            }\n        }\n    };\n    MultiSelect.prototype.wireListEvents = function () {\n        if (!isNullOrUndefined(this.list)) {\n            EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n            EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n            EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n            EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n            EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n        }\n    };\n    MultiSelect.prototype.unwireListEvents = function () {\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        if (this.list) {\n            EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n            EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n            EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n            EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n        }\n    };\n    MultiSelect.prototype.hideOverAllClear = function () {\n        if (!this.value || !this.value.length || this.inputElement.value === '') {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    MultiSelect.prototype.showOverAllClear = function () {\n        if (((this.value && this.value.length) || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n            this.overAllClear.style.display = '';\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    /**\n     * Sets the focus to widget for interaction.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.focusIn = function () {\n        if (document.activeElement !== this.inputElement && this.enabled) {\n            this.inputElement.focus();\n        }\n    };\n    /**\n     * Remove the focus from widget, if the widget is in focus state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.focusOut = function () {\n        if (document.activeElement === this.inputElement && this.enabled) {\n            this.inputElement.blur();\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            var filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n            if (this.overAllClear.style.display !== 'none' || filterClear) {\n                this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n            }\n            else {\n                this.spinnerElement = this.createElement('span', { className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1 });\n                this.componentWrapper.appendChild(this.spinnerElement);\n            }\n            createSpinner({ target: this.spinnerElement, width: Browser.isDevice ? '16px' : '14px' }, this.createElement);\n            addClass([this.spinnerElement], DISABLE_ICON);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], DISABLE_ICON);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    };\n    MultiSelect.prototype.updateWrapperText = function (wrapperType, wrapperData) {\n        if (this.valueTemplate || !this.enableHtmlSanitizer) {\n            wrapperType.innerHTML = wrapperData;\n        }\n        else {\n            wrapperType.innerText = SanitizeHtmlHelper.sanitize(wrapperData);\n        }\n    };\n    MultiSelect.prototype.updateDelimView = function () {\n        if (this.delimiterWrapper) {\n            this.hideDelimWrapper();\n        }\n        if (this.chipCollectionWrapper) {\n            this.chipCollectionWrapper.style.display = 'none';\n        }\n        this.viewWrapper.style.display = '';\n        this.viewWrapper.style.width = '';\n        this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        if (this.value && this.value.length) {\n            var data = '';\n            var temp = void 0;\n            var tempData = void 0;\n            var tempIndex = 1;\n            var wrapperleng = void 0;\n            var remaining = void 0;\n            var downIconWidth = 0;\n            var overAllContainer = void 0;\n            this.updateWrapperText(this.viewWrapper, data);\n            var l10nLocale = {\n                noRecordsTemplate: 'No records found',\n                actionFailureTemplate: 'Request failed',\n                overflowCountTemplate: '+${count} more..',\n                totalCountTemplate: '${count} selected'\n            };\n            var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            if (l10n.getConstant('actionFailureTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            if (l10n.getConstant('noRecordsTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            var remainContent = l10n.getConstant('overflowCountTemplate');\n            var totalContent = l10n.getConstant('totalCountTemplate');\n            var raminElement = this.createElement('span', {\n                className: REMAIN_WRAPPER$1\n            });\n            var remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n            raminElement.innerText = remainCompildTemp;\n            this.viewWrapper.appendChild(raminElement);\n            this.renderReactTemplates();\n            var remainSize = raminElement.offsetWidth;\n            remove(raminElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            }\n            this.checkClearIconWidth();\n            if (!isNullOrUndefined(this.value)) {\n                for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    data += (index === 0) ? '' : this.delimiterChar + ' ';\n                    temp = this.getOverflowVal(index);\n                    data += temp;\n                    temp = this.viewWrapper.innerHTML;\n                    this.updateWrapperText(this.viewWrapper, data);\n                    wrapperleng = this.viewWrapper.offsetWidth +\n                        parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                    overAllContainer = this.componentWrapper.offsetWidth -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n                    if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                        if (tempData !== undefined && tempData !== '') {\n                            temp = tempData;\n                            index = tempIndex + 1;\n                        }\n                        this.updateWrapperText(this.viewWrapper, temp);\n                        remaining = this.value.length - index;\n                        wrapperleng = this.viewWrapper.offsetWidth +\n                            parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) > overAllContainer) && wrapperleng !== 0\n                            && this.viewWrapper.innerHTML !== '') {\n                            var textArr = [];\n                            this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n                            remaining = this.value.length;\n                            wrapperleng = this.viewWrapper.offsetWidth +\n                                parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        }\n                        break;\n                    }\n                    else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                        tempData = data;\n                        tempIndex = index;\n                    }\n                    else if (index === 0) {\n                        tempData = '';\n                        tempIndex = -1;\n                    }\n                }\n            }\n            if (remaining > 0) {\n                var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n                this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n                this.updateRemainWidth(this.viewWrapper, totalWidth);\n                this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n            }\n        }\n        else {\n            this.viewWrapper.innerHTML = '';\n            this.viewWrapper.style.display = 'none';\n        }\n    };\n    MultiSelect.prototype.checkClearIconWidth = function () {\n        if (this.showClearButton) {\n            this.clearIconWidth = this.overAllClear.offsetWidth;\n        }\n    };\n    MultiSelect.prototype.updateRemainWidth = function (viewWrapper, totalWidth) {\n        if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < (viewWrapper.offsetWidth +\n            parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)\n            + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10))) {\n            viewWrapper.style.width = totalWidth + 'px';\n        }\n    };\n    MultiSelect.prototype.updateRemainTemplate = function (raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n            viewWrapper.removeChild(viewWrapper.firstChild);\n        }\n        raminElement.innerHTML = '';\n        var remainTemp = remainContent.replace('${count}', remaining.toString());\n        var totalTemp = totalContent.replace('${count}', remaining.toString());\n        raminElement.innerText = (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) ? remainTemp : totalTemp;\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n            viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        }\n        else {\n            viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n            this.updateRemainWidth(viewWrapper, totalWidth);\n        }\n        return raminElement;\n    };\n    MultiSelect.prototype.updateRemainingText = function (raminElement, downIconWidth, remaining, remainContent, totalContent) {\n        var overAllContainer = this.componentWrapper.offsetWidth -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n        var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n        if (((wrapperleng + downIconWidth) >= overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n            this.viewWrapper.firstChild.nodeType === 3) {\n            while (((wrapperleng + downIconWidth) > overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n                this.viewWrapper.firstChild.nodeType === 3) {\n                var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n                textArr.pop();\n                this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n                if (this.viewWrapper.firstChild.nodeValue === '') {\n                    this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n                }\n                remaining++;\n                wrapperleng = this.viewWrapper.offsetWidth;\n            }\n            var totalWidth = overAllContainer - downIconWidth;\n            this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n        }\n    };\n    MultiSelect.prototype.getOverflowVal = function (index) {\n        var temp;\n        if (this.mainData && this.mainData.length) {\n            if (this.mode === 'CheckBox') {\n                var newTemp = this.listData;\n                this.listData = this.mainData;\n                temp = this.getTextByValue(this.value[index]);\n                this.listData = newTemp;\n            }\n            else {\n                temp = this.getTextByValue(this.value[index]);\n            }\n        }\n        else {\n            temp = this.value[index];\n        }\n        return temp;\n    };\n    MultiSelect.prototype.unWireEvent = function () {\n        EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n        EventHandler.remove(window, 'resize', this.windowResize);\n        EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n        EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n        if (this.mode !== 'CheckBox') {\n            EventHandler.remove(this.inputElement, 'input', this.onInput);\n        }\n        EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n        EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n        EventHandler.remove(this.componentWrapper, 'mouseover', this.mouseIn);\n        EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n        EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n    };\n    MultiSelect.prototype.selectAllItem = function (state, event, list) {\n        var li;\n        li = this.list.querySelectorAll(state ?\n            'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n            'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        if (this.value && this.value.length && event && event.target\n            && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n            li = this.mainList.querySelectorAll(state ?\n                'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        }\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            var target = (event ? (this.groupTemplate ? closest(event.target, '.e-list-group-item') : event.target) : null);\n            target = (event && event.keyCode === 32) ? list : target;\n            target = (target && target.classList.contains('e-frame')) ? target.parentElement.parentElement : target;\n            if (target && target.classList.contains('e-list-group-item')) {\n                var listElement = target.nextElementSibling;\n                if (isNullOrUndefined(listElement)) {\n                    return;\n                }\n                while (listElement.classList.contains('e-list-item')) {\n                    if (state) {\n                        if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            var selectionLimit = this.value && this.value.length ? this.value.length : 0;\n                            if (listElement.classList.contains('e-active')) {\n                                selectionLimit -= 1;\n                            }\n                            if (selectionLimit < this.maximumSelectionLength) {\n                                this.updateListSelection(listElement, event);\n                            }\n                        }\n                    }\n                    else {\n                        if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            this.updateListSelection(listElement, event);\n                        }\n                    }\n                    listElement = listElement.nextElementSibling;\n                    if (listElement == null) {\n                        break;\n                    }\n                }\n                if (target.classList.contains('e-list-group-item')) {\n                    var focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n                    if (focusedElement) {\n                        focusedElement.classList.remove('e-item-focus');\n                    }\n                    if (state) {\n                        target.classList.add('e-active');\n                    }\n                    else {\n                        target.classList.remove('e-active');\n                    }\n                    target.classList.add('e-item-focus');\n                }\n                this.textboxValueUpdate();\n                this.checkPlaceholderSize();\n                if (!this.changeOnBlur && event) {\n                    this.updateValueState(event, this.value, this.tempValues);\n                }\n            }\n            else {\n                this.updateValue(event, li, state);\n            }\n        }\n        else {\n            this.updateValue(event, li, state);\n        }\n    };\n    MultiSelect.prototype.updateValue = function (event, li, state) {\n        var _this = this;\n        var length = li.length;\n        var beforeSelectArgs = {\n            event: event,\n            items: state ? li : [],\n            itemData: state ? this.listData : [],\n            isInteracted: event ? true : false,\n            isChecked: state,\n            preventSelectEvent: false\n        };\n        this.trigger('beforeSelectAll', beforeSelectArgs);\n        if (li && li.length) {\n            var index_1 = 0;\n            var count_1 = 0;\n            if (this.enableGroupCheckBox) {\n                count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n            }\n            else {\n                count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n            }\n            if (!beforeSelectArgs.preventSelectEvent) {\n                while (index_1 < length && index_1 <= 50 && index_1 < count_1) {\n                    this.updateListSelection(li[index_1], event, length - index_1);\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[index_1]);\n                    }\n                    index_1++;\n                }\n                if (length > 50) {\n                    setTimeout(function () {\n                        while (index_1 < length && index_1 < count_1) {\n                            _this.updateListSelection(li[index_1], event, length - index_1);\n                            if (_this.enableGroupCheckBox) {\n                                _this.findGroupStart(li[index_1]);\n                            }\n                            index_1++;\n                        }\n                        _this.updatedataValueItems(event);\n                        if (!_this.changeOnBlur) {\n                            _this.updateValueState(event, _this.value, _this.tempValues);\n                            _this.isSelectAll = _this.isSelectAll ? !_this.isSelectAll : _this.isSelectAll;\n                        }\n                        _this.updateHiddenElement();\n                    }, 0);\n                }\n            }\n            else {\n                for (var i = 0; i < li.length && i < count_1; i++) {\n                    this.removeHover();\n                    var customVal = li[i].getAttribute('data-value');\n                    var value = this.getFormattedValue(customVal);\n                    var mainElement = this.mainList ? this.mainList.querySelectorAll(state ?\n                        'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                        'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n                    if (state) {\n                        this.value = !this.value ? [] : this.value;\n                        if (this.value.indexOf(value) < 0) {\n                            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n                        }\n                        this.removeFocus();\n                        this.addListSelection(li[i], mainElement);\n                        this.updateChipStatus();\n                        this.checkMaxSelection();\n                    }\n                    else {\n                        this.removeAllItems(value, event, false, li[i], mainElement);\n                    }\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[i]);\n                    }\n                }\n                if (!state) {\n                    var limit = this.value && this.value.length ? this.value.length : 0;\n                    if (limit < this.maximumSelectionLength) {\n                        var collection = this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                }\n                var args = {\n                    event: event,\n                    items: state ? li : [],\n                    itemData: state ? this.listData : [],\n                    isInteracted: event ? true : false,\n                    isChecked: state\n                };\n                this.trigger('selectedAll', args);\n            }\n        }\n        this.updatedataValueItems(event);\n        this.checkPlaceholderSize();\n        if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n            if (!this.changeOnBlur) {\n                this.updateValueState(event, this.value, this.tempValues);\n                this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n            }\n            this.updateHiddenElement();\n        }\n    };\n    MultiSelect.prototype.updateHiddenElement = function () {\n        var _this = this;\n        var hiddenValue = '';\n        var wrapperText = '';\n        var data = '';\n        var text = [];\n        if (this.mode === 'CheckBox') {\n            this.value.map(function (value, index) {\n                hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n                if (_this.listData) {\n                    data = _this.getTextByValue(value);\n                }\n                else {\n                    data = value;\n                }\n                wrapperText += data + _this.delimiterChar + ' ';\n                text.push(data);\n            });\n            this.hiddenElement.innerHTML = hiddenValue;\n            this.updateWrapperText(this.delimiterWrapper, wrapperText);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n            this.setProperties({ text: text.toString() }, true);\n            this.refreshInputHight();\n            this.refreshPlaceHolder();\n        }\n    };\n    MultiSelect.prototype.updatedataValueItems = function (event) {\n        this.deselectHeader();\n        this.textboxValueUpdate(event);\n    };\n    MultiSelect.prototype.textboxValueUpdate = function (event) {\n        var isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent')\n            || closest(event.target, '.e-close-hooker'));\n        if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n            this.updateDelimView();\n        }\n        else {\n            this.searchWrapper.classList.remove(ZERO_SIZE);\n        }\n        if (this.mode === 'CheckBox') {\n            this.updateDelimView();\n            if (!(isRemoveAll || this.isSelectAll)) {\n                this.updateDelimeter(this.delimiterChar, event);\n            }\n            this.refreshInputHight();\n        }\n        else {\n            this.updateDelimeter(this.delimiterChar, event);\n        }\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.setZIndex = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateDataSource = function (prop) {\n        if (isNullOrUndefined(this.list)) {\n            this.renderPopup();\n        }\n        else {\n            this.resetList(this.dataSource);\n        }\n        if (this.value && this.value.length) {\n            this.setProperties({ 'value': this.value });\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.onLoadSelect = function () {\n        this.setDynValue = true;\n        this.renderPopup();\n    };\n    MultiSelect.prototype.selectAllItems = function (state, event) {\n        var _this = this;\n        if (isNullOrUndefined(this.list)) {\n            this.selectAllAction = function () {\n                if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n                    var args = {\n                        module: 'CheckBoxSelection',\n                        enable: _this.mode === 'CheckBox',\n                        value: state ? 'check' : 'uncheck'\n                    };\n                    _this.notify('checkSelectAll', args);\n                }\n                _this.selectAllItem(state, event);\n                _this.selectAllAction = null;\n            };\n            _super.prototype.render.call(this);\n        }\n        else {\n            this.selectAllAction = null;\n            if (this.mode === 'CheckBox' && this.showSelectAll) {\n                var args = {\n                    value: state ? 'check' : 'uncheck',\n                    enable: this.mode === 'CheckBox',\n                    module: 'CheckBoxSelection'\n                };\n                this.notify('checkSelectAll', args);\n            }\n            this.selectAllItem(state, event);\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    MultiSelect.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n     * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    MultiSelect.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))\n            || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            this.mainList = null;\n            this.mainData = null;\n            this.isFirstClick = false;\n            this.isDynamicDataChange = true;\n        }\n        if (this.getModuleName() === 'multiselect') {\n            this.filterAction = false;\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'query':\n                case 'dataSource':\n                    if (this.mode === 'CheckBox' && this.showSelectAll) {\n                        if (!isNullOrUndefined(this.popupObj)) {\n                            this.popupObj.destroy();\n                            this.popupObj = null;\n                        }\n                        this.renderPopup();\n                    }\n                    break;\n                case 'htmlAttributes':\n                    this.updateHTMLAttribute();\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'text':\n                    this.updateVal(this.value, this.value, 'text');\n                    break;\n                case 'value':\n                    this.updateVal(this.value, oldProp.value, 'value');\n                    this.addValidInputClass();\n                    if (!this.closePopupOnSelect && this.isPopupOpen()) {\n                        this.refreshPopup();\n                    }\n                    this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n                    break;\n                case 'width':\n                    this.setWidth(newProp.width);\n                    this.popupObj.setProperties({ width: this.calcPopupWidth() });\n                    break;\n                case 'placeholder':\n                    this.refreshPlaceHolder();\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        this.notify('filterBarPlaceholder', { filterBarPlaceholder: newProp.filterBarPlaceholder });\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode !== 'Box') {\n                        this.updateDelimView();\n                    }\n                    this.updateData(newProp.delimiterChar);\n                    break;\n                case 'cssClass':\n                    this.updateOldPropCssClass(oldProp.cssClass);\n                    this.updateCssClass();\n                    Input.calculateWidth(this.inputElement.parentElement.parentElement, this.overAllWrapper);\n                    break;\n                case 'enableRtl':\n                    this.enableRTL(newProp.enableRtl);\n                    _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n                    break;\n                case 'readonly':\n                    this.updateReadonly(newProp.readonly);\n                    this.hidePopup();\n                    break;\n                case 'enabled':\n                    this.hidePopup();\n                    this.enable(newProp.enabled);\n                    break;\n                case 'showSelectAll':\n                    if (this.popupObj) {\n                        this.popupObj.destroy();\n                        this.popupObj = null;\n                    }\n                    this.renderPopup();\n                    break;\n                case 'showDropDownIcon':\n                    this.dropDownIcon();\n                    break;\n                case 'floatLabelType':\n                    this.setFloatLabelType();\n                    this.addValidInputClass();\n                    Input.createSpanElement(this.overAllWrapper, this.createElement);\n                    Input.calculateWidth(this.inputElement.parentElement.parentElement, this.overAllWrapper);\n                    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n                        this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n                    }\n                    break;\n                case 'enableSelectionOrder':\n                    break;\n                case 'selectAllText':\n                    this.notify('selectAllText', false);\n                    break;\n                case 'popupHeight':\n                    if (this.popupObj) {\n                        var overAllHeight = parseInt(this.popupHeight, 10);\n                        if (this.popupHeight !== 'auto') {\n                            this.list.style.maxHeight = formatUnit(overAllHeight);\n                            this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n                        }\n                        else {\n                            this.list.style.maxHeight = formatUnit(this.popupHeight);\n                        }\n                    }\n                    break;\n                case 'headerTemplate':\n                case 'footerTemplate':\n                    this.reInitializePoup();\n                    break;\n                case 'allowFiltering':\n                    if (this.mode === 'CheckBox' && this.popupObj) {\n                        this.reInitializePoup();\n                    }\n                    this.updateSelectElementData(this.allowFiltering);\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        var msProps = this.getPropObject(prop, newProp, oldProp);\n                        _super.prototype.onPropertyChanged.call(this, msProps.newProperty, msProps.oldProperty);\n                    }\n                    break;\n            }\n        }\n    };\n    MultiSelect.prototype.reInitializePoup = function () {\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n        }\n        this.renderPopup();\n    };\n    MultiSelect.prototype.presentItemValue = function (ulElement) {\n        var valuecheck = [];\n        for (var i = 0; i < this.value.length; i++) {\n            var checkEle = this.findListElement(((this.allowFiltering && !isNullOrUndefined(this.mainList)) ? this.mainList : ulElement), 'li', 'data-value', this.value[i]);\n            if (!checkEle) {\n                valuecheck.push(this.value[i]);\n            }\n        }\n        return valuecheck;\n    };\n    \n    MultiSelect.prototype.addNonPresentItems = function (valuecheck, ulElement, list, event) {\n        var _this = this;\n        this.dataSource.executeQuery(this.getForQuery(valuecheck)).then(function (e) {\n            _this.addItem(e.result, list.length);\n            _this.updateActionList(ulElement, list, event);\n        });\n    };\n    \n    MultiSelect.prototype.updateVal = function (newProp, oldProp, prop) {\n        if (!this.list) {\n            this.onLoadSelect();\n        }\n        else if ((this.dataSource instanceof DataManager) && (!this.listData || !(this.mainList && this.mainData))) {\n            this.onLoadSelect();\n        }\n        else {\n            var valuecheck = [];\n            if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n                valuecheck = this.presentItemValue(this.ulElement);\n            }\n            if (prop == 'value' && valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value)\n                && this.listData != null) {\n                this.mainData = null;\n                this.setDynValue = true;\n                this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n            }\n            else {\n                if (prop === 'text') {\n                    this.initialTextUpdate();\n                    newProp = this.value;\n                }\n                if (isNullOrUndefined(this.value) || this.value.length === 0) {\n                    this.tempValues = oldProp;\n                }\n                // eslint-disable-next-line\n                if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus\n                    && this.isPopupOpen() && this.mainData !== this.listData) {\n                    var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                    this.onActionComplete(list, this.mainData);\n                }\n                this.initialValueUpdate();\n                if (this.mode !== 'Box' && !this.inputFocus) {\n                    this.updateDelimView();\n                }\n                if (!this.inputFocus) {\n                    this.refreshInputHight();\n                }\n                this.refreshPlaceHolder();\n                if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                    this.updateValueState(null, newProp, oldProp);\n                }\n                this.checkPlaceholderSize();\n            }\n        }\n        if (!this.changeOnBlur) {\n            this.updateValueState(null, newProp, oldProp);\n        }\n    };\n    /**\n     * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     */\n    MultiSelect.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Hides the popup, if the popup in a open state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.hidePopup = function (e) {\n        var _this = this;\n        var delay = 100;\n        if (this.isPopupOpen()) {\n            var animModel = {\n                name: 'FadeOut',\n                duration: 100,\n                delay: delay ? delay : 0\n            };\n            var eventArgs = { popup: this.popupObj, cancel: false, animation: animModel, event: e || null };\n            this.trigger('close', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    if (_this.fields.groupBy && _this.mode !== 'CheckBox' && _this.fixedHeaderElement) {\n                        remove(_this.fixedHeaderElement);\n                        _this.fixedHeaderElement = null;\n                    }\n                    _this.beforePopupOpen = false;\n                    _this.overAllWrapper.classList.remove(iconAnimation);\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                    attributes(_this.inputElement, { 'aria-expanded': 'false' });\n                    _this.inputElement.removeAttribute('aria-owns');\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                    if (_this.allowFiltering) {\n                        _this.notify('inputFocus', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox', value: 'clear' });\n                    }\n                    _this.popupObj.hide();\n                    removeClass([document.body, _this.popupObj.element], 'e-popup-full-page');\n                    EventHandler.remove(_this.list, 'keydown', _this.onKeyDown);\n                }\n            });\n        }\n    };\n    /**\n     * Shows the popup, if the popup in a closed state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.showPopup = function (e) {\n        var _this = this;\n        if (!this.enabled) {\n            return;\n        }\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                if (!_this.ulElement) {\n                    _this.beforePopupOpen = true;\n                    _super.prototype.render.call(_this, e);\n                    if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n                        _this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox' });\n                    }\n                    return;\n                }\n                if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n                    _this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox' });\n                }\n                var mainLiLength = _this.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n                var liLength = _this.ulElement.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n                if (mainLiLength > 0 && (mainLiLength === liLength) && (liLength === _this.mainData.length) && !(_this.targetElement() !== '' && _this.allowCustomValue)) {\n                    _this.beforePopupOpen = false;\n                    return;\n                }\n                _this.onPopupShown(e);\n            }\n        });\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     * parameter\n     * `true`   - Selects entire list items.\n     * `false`  - Un Selects entire list items.\n     *\n     * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n     * @returns {void}\n     */\n    MultiSelect.prototype.selectAll = function (state) {\n        this.isSelectAll = true;\n        this.selectAllItems(state);\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    MultiSelect.prototype.getModuleName = function () {\n        return 'multiselect';\n    };\n    /**\n     * Allows you to clear the selected values from the Multiselect component.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.clear = function () {\n        var _this = this;\n        this.selectAll(false);\n        if (this.value && this.value.length) {\n            setTimeout(function () {\n                _this.setProperties({ value: null }, true);\n            }, 0);\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    MultiSelect.prototype.render = function () {\n        this.setDynValue = this.initStatus = false;\n        this.isSelectAll = false;\n        this.searchWrapper = this.createElement('span', { className: SEARCHBOX_WRAPPER + ' ' + ((this.mode === 'Box') ? BOX_ELEMENT : '') });\n        this.viewWrapper = this.createElement('span', { className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER, styles: 'display:none;' });\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS$1, styles: 'display:none;'\n        });\n        this.componentWrapper = this.createElement('div', { className: ELEMENT_WRAPPER });\n        this.overAllWrapper = this.createElement('div', { className: OVER_ALL_WRAPPER });\n        if (this.mode === 'CheckBox') {\n            addClass([this.overAllWrapper], 'e-checkbox');\n        }\n        if (Browser.isDevice) {\n            this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n        }\n        this.setWidth(this.width);\n        this.overAllWrapper.appendChild(this.componentWrapper);\n        this.popupWrapper = this.createElement('div', { id: this.element.id + '_popup', className: POPUP_WRAPPER });\n        if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n            this.delimiterWrapper = this.createElement('span', { className: DELIMITER_WRAPPER, styles: 'display:none' });\n            this.componentWrapper.appendChild(this.delimiterWrapper);\n        }\n        else {\n            this.chipCollectionWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER$1,\n                styles: 'display:none'\n            });\n            if (this.mode === 'Default') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n            }\n            else if (this.mode === 'Box') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n            }\n            this.componentWrapper.appendChild(this.chipCollectionWrapper);\n        }\n        if (this.mode !== 'Box') {\n            this.componentWrapper.appendChild(this.viewWrapper);\n        }\n        this.componentWrapper.appendChild(this.searchWrapper);\n        if (this.showClearButton && !Browser.isDevice) {\n            this.componentWrapper.appendChild(this.overAllClear);\n        }\n        else {\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n        this.dropDownIcon();\n        this.inputElement = this.createElement('input', {\n            className: INPUT_ELEMENT,\n            attrs: {\n                spellcheck: 'false',\n                type: 'text',\n                autocomplete: 'off',\n                tabindex: '0'\n            }\n        });\n        if (this.mode === 'Default' || this.mode === 'Box') {\n            this.inputElement.setAttribute('aria-describedby', this.chipCollectionWrapper.id);\n        }\n        if (this.element.tagName !== this.getNgDirective()) {\n            this.element.style.display = 'none';\n        }\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.overAllWrapper);\n            this.searchWrapper.appendChild(this.inputElement);\n        }\n        else {\n            this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n            this.searchWrapper.appendChild(this.inputElement);\n            this.searchWrapper.appendChild(this.element);\n            this.element.removeAttribute('tabindex');\n        }\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n        else if (this.floatLabelType === 'Never') {\n            this.refreshPlaceHolder();\n        }\n        this.addValidInputClass();\n        this.element.style.opacity = '';\n        var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'class': HIDDEN_ELEMENT, 'tabindex': '-1', 'multiple': '' }\n        });\n        this.componentWrapper.appendChild(this.hiddenElement);\n        this.validationAttribute(this.element, this.hiddenElement);\n        if (this.mode !== 'CheckBox') {\n            this.hideOverAllClear();\n        }\n        this.wireEvent();\n        this.enable(this.enabled);\n        this.enableRTL(this.enableRtl);\n        this.checkInitialValue();\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        Input.createSpanElement(this.overAllWrapper, this.createElement);\n        Input.calculateWidth(this.inputElement.parentElement.parentElement, this.overAllWrapper);\n        if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n        this.renderComplete();\n    };\n    MultiSelect.prototype.checkInitialValue = function () {\n        var _this = this;\n        var isData = this.dataSource instanceof Array ? (this.dataSource.length > 0)\n            : !isNullOrUndefined(this.dataSource);\n        if (!(this.value && this.value.length) &&\n            isNullOrUndefined(this.text) &&\n            !isData &&\n            this.element.tagName === 'SELECT' &&\n            this.element.options.length > 0) {\n            var optionsElement = this.element.options;\n            var valueCol = [];\n            var textCol = '';\n            for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n                var opt = optionsElement[index];\n                if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n                    if (opt.getAttribute('value')) {\n                        valueCol.push(opt.getAttribute('value'));\n                    }\n                    else {\n                        textCol += (opt.text + this.delimiterChar);\n                    }\n                }\n            }\n            if (valueCol.length > 0) {\n                this.setProperties({ value: valueCol }, true);\n            }\n            else if (textCol !== '') {\n                this.setProperties({ text: textCol }, true);\n            }\n            if (valueCol.length > 0 || textCol !== '') {\n                this.refreshInputHight();\n                this.refreshPlaceHolder();\n            }\n        }\n        if ((this.value && this.value.length) || !isNullOrUndefined(this.text)) {\n            if (!this.list) {\n                _super.prototype.render.call(this);\n            }\n        }\n        if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.initialTextUpdate();\n        }\n        if (this.value && this.value.length) {\n            if (!(this.dataSource instanceof DataManager)) {\n                this.initialValueUpdate();\n                this.initialUpdate();\n            }\n            else {\n                this.setInitialValue = function () {\n                    _this.initStatus = false;\n                    _this.initialValueUpdate();\n                    _this.initialUpdate();\n                    _this.setInitialValue = null;\n                    _this.initStatus = true;\n                };\n            }\n            this.updateTempValue();\n        }\n        else {\n            this.initialUpdate();\n        }\n        this.initStatus = true;\n        this.checkAutoFocus();\n        if (!isNullOrUndefined(this.text)) {\n            this.element.setAttribute('data-initial-value', this.text);\n        }\n    };\n    MultiSelect.prototype.checkAutoFocus = function () {\n        if (this.element.hasAttribute('autofocus')) {\n            this.inputElement.focus();\n        }\n    };\n    MultiSelect.prototype.setFloatLabelType = function () {\n        removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n    };\n    MultiSelect.prototype.addValidInputClass = function () {\n        if ((!isNullOrUndefined(this.value) && this.value.length) || this.floatLabelType === 'Always') {\n            addClass([this.overAllWrapper], 'e-valid-input');\n        }\n        else {\n            removeClass([this.overAllWrapper], 'e-valid-input');\n        }\n    };\n    MultiSelect.prototype.dropDownIcon = function () {\n        if (this.showDropDownIcon) {\n            this.dropIcon = this.createElement('span', { className: dropdownIcon });\n            this.componentWrapper.appendChild(this.dropIcon);\n            addClass([this.componentWrapper], ['e-down-icon']);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.dropIcon.parentElement.removeChild(this.dropIcon);\n                removeClass([this.componentWrapper], ['e-down-icon']);\n            }\n        }\n    };\n    MultiSelect.prototype.initialUpdate = function () {\n        if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n            this.updateDelimView();\n        }\n        this.updateCssClass();\n        this.updateHTMLAttribute();\n        this.updateReadonly(this.readonly);\n        this.refreshInputHight();\n        this.checkPlaceholderSize();\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    MultiSelect.prototype.destroy = function () {\n        // eslint-disable-next-line\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n        }\n        this.notify(destroy, {});\n        this.unwireListEvents();\n        this.unWireEvent();\n        this.list = null;\n        this.popupObj = null;\n        this.mainList = null;\n        this.mainData = null;\n        this.filterParent = null;\n        this.ulElement = null;\n        this.mainListCollection = null;\n        _super.prototype.destroy.call(this);\n        var temp = ['readonly', 'aria-disabled', 'placeholder'];\n        var length = temp.length;\n        while (length > 0) {\n            this.inputElement.removeAttribute(temp[length - 1]);\n            length--;\n        }\n        this.element.removeAttribute('data-initial-value');\n        this.element.style.display = 'block';\n        if (this.overAllWrapper.parentElement) {\n            if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n                remove(this.overAllWrapper);\n            }\n            else {\n                this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n                remove(this.overAllWrapper);\n            }\n        }\n    };\n    __decorate$5([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], MultiSelect.prototype, \"fields\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enablePersistence\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"groupTemplate\", void 0);\n    __decorate$5([\n        Property('No records found')\n    ], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$5([\n        Property('Request failed')\n    ], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$5([\n        Property('None')\n    ], MultiSelect.prototype, \"sortOrder\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"enabled\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate$5([\n        Property([])\n    ], MultiSelect.prototype, \"dataSource\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"query\", void 0);\n    __decorate$5([\n        Property('StartsWith')\n    ], MultiSelect.prototype, \"filterType\", void 0);\n    __decorate$5([\n        Property(1000)\n    ], MultiSelect.prototype, \"zIndex\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"ignoreAccent\", void 0);\n    __decorate$5([\n        Property()\n    ], MultiSelect.prototype, \"locale\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"cssClass\", void 0);\n    __decorate$5([\n        Property('100%')\n    ], MultiSelect.prototype, \"width\", void 0);\n    __decorate$5([\n        Property('300px')\n    ], MultiSelect.prototype, \"popupHeight\", void 0);\n    __decorate$5([\n        Property('100%')\n    ], MultiSelect.prototype, \"popupWidth\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"placeholder\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$5([\n        Property({})\n    ], MultiSelect.prototype, \"htmlAttributes\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"valueTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"headerTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"footerTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"itemTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"allowFiltering\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"changeOnBlur\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"allowCustomValue\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"showClearButton\", void 0);\n    __decorate$5([\n        Property(1000)\n    ], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"readonly\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"text\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"value\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n    __decorate$5([\n        Property('Default')\n    ], MultiSelect.prototype, \"mode\", void 0);\n    __decorate$5([\n        Property(',')\n    ], MultiSelect.prototype, \"delimiterChar\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"ignoreCase\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n    __decorate$5([\n        Property('Never')\n    ], MultiSelect.prototype, \"floatLabelType\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"showSelectAll\", void 0);\n    __decorate$5([\n        Property('Select All')\n    ], MultiSelect.prototype, \"selectAllText\", void 0);\n    __decorate$5([\n        Property('Unselect All')\n    ], MultiSelect.prototype, \"unSelectAllText\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"openOnClick\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"change\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"removing\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"removed\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"selectedAll\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"beforeOpen\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"open\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"close\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"blur\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"focus\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"chipSelection\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"filtering\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"tagging\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"customValueSelection\", void 0);\n    MultiSelect = __decorate$5([\n        NotifyPropertyChanges\n    ], MultiSelect);\n    return MultiSelect;\n}(DropDownBase));\n\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME$1 = 'e-frame';\nvar CHECK$1 = 'e-check';\nvar CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\nvar CheckBoxSelection = /** @__PURE__ @class */ (function () {\n    function CheckBoxSelection(parent) {\n        this.activeLi = [];\n        this.activeEle = [];\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    CheckBoxSelection.prototype.getModuleName = function () {\n        return 'CheckBoxSelection';\n    };\n    CheckBoxSelection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('updatelist', this.listSelection, this);\n        this.parent.on('listoption', this.listOption, this);\n        this.parent.on('selectAll', this.setSelectAll, this);\n        this.parent.on('checkSelectAll', this.checkSelectAll, this);\n        this.parent.on('searchBox', this.setSearchBox, this);\n        this.parent.on('blur', this.onBlurHandler, this);\n        this.parent.on('targetElement', this.targetElement, this);\n        this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n        this.parent.on('inputFocus', this.getFocus, this);\n        this.parent.on('reOrder', this.setReorder, this);\n        this.parent.on('activeList', this.getActiveList, this);\n        this.parent.on('selectAllText', this.setLocale, this);\n        this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        this.parent.on('addItem', this.checboxCreate, this);\n        this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n    };\n    CheckBoxSelection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('updatelist', this.listSelection);\n        this.parent.off('listoption', this.listOption);\n        this.parent.off('selectAll', this.setSelectAll);\n        this.parent.off('checkSelectAll', this.checkSelectAll);\n        this.parent.off('searchBox', this.setSearchBox);\n        this.parent.off('blur', this.onBlurHandler);\n        this.parent.off('targetElement', this.targetElement);\n        this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n        this.parent.off('inputFocus', this.getFocus);\n        this.parent.off('reOrder', this.setReorder);\n        this.parent.off('activeList', this.getActiveList);\n        this.parent.off('selectAllText', this.setLocale);\n        this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n        this.parent.off('addItem', this.checboxCreate);\n        this.parent.off('popupFullScreen', this.setPopupFullScreen);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.listOption = function (args) {\n        var _this = this;\n        if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n            };\n        }\n        else {\n            var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n    };\n    CheckBoxSelection.prototype.setPlaceholder = function (props) {\n        Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n    };\n    CheckBoxSelection.prototype.checboxCreate = function (e) {\n        var item;\n        if (!isNullOrUndefined(e.item)) {\n            item = e.item;\n        }\n        else {\n            item = e;\n        }\n        if (this.parent.enableGroupCheckBox || (item.className !== 'e-list-group-item '\n            && item.className !== 'e-list-group-item')) {\n            var checkboxEle = createCheckBox(this.parent.createElement, true);\n            var icon = select('div.' + ICON, item);\n            item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n            select('.' + CHECKBOXFRAME$1, checkboxEle);\n            if (this.parent.enableGroupCheckBox) {\n                this.parent.popupWrapper.classList.add('e-multiselect-group');\n            }\n            return item;\n        }\n        else {\n            return item;\n        }\n    };\n    CheckBoxSelection.prototype.setSelectAll = function () {\n        if (this.parent.showSelectAll) {\n            if (isNullOrUndefined(this.checkAllParent)) {\n                this.checkAllParent = this.parent.createElement('div', {\n                    className: checkAllParent\n                });\n                this.selectAllSpan = this.parent.createElement('span', {\n                    className: 'e-all-text'\n                });\n                this.selectAllSpan.textContent = '';\n                this.checkAllParent.appendChild(this.selectAllSpan);\n                this.setLocale();\n                this.checboxCreate(this.checkAllParent);\n                if (this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        append([this.checkAllParent], this.parent.filterParent);\n                    }\n                    else {\n                        append([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                if (!this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n                    }\n                    else {\n                        prepend([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n            }\n            if (this.parent.list.classList.contains('e-nodata') || (this.parent.listData && this.parent.listData.length <= 1 &&\n                !(this.parent.isDynamicDataChange)) || (this.parent.isDynamicDataChange &&\n                this.parent.listData && this.parent.listData.length <= 1)) {\n                this.checkAllParent.style.display = 'none';\n            }\n            else {\n                this.checkAllParent.style.display = 'block';\n            }\n            this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        else if (!isNullOrUndefined(this.checkAllParent)) {\n            this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    };\n    CheckBoxSelection.prototype.destroy = function () {\n        this.removeEventListener();\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    };\n    CheckBoxSelection.prototype.listSelection = function (args) {\n        var target;\n        if (!isNullOrUndefined(args.e)) {\n            var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n            target = !isNullOrUndefined(args.e.target) ?\n                (args.e.target.classList.contains('e-frame')\n                    && (!this.parent.showSelectAll\n                        || (this.checkAllParent && !this.checkAllParent.contains(args.e.target)))) ?\n                    args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1]\n                : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n        }\n        else {\n            var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n            target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n        }\n        if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n            target = args.li.firstElementChild.childNodes[1];\n        }\n        if (!isNullOrUndefined(target)) {\n            this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        }\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            var selectAll$$1 = false;\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n        }\n    };\n    CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll$$1) {\n        this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n    };\n    CheckBoxSelection.prototype.clickHandler = function (e) {\n        var target;\n        if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.currentTarget;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        var selectAll$$1 = true;\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n        }\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll$$1) {\n        var ariaState;\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n            frameSpan.classList.remove(INDETERMINATE);\n            frameSpan.classList.add(CHECK$1);\n            ariaState = 'true';\n            if (selectAll$$1) {\n                this.parent.selectAllItems(true, e);\n                this.setLocale(true);\n            }\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n            ariaState = 'false';\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        else if (state === 'indeterminate' && !(frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1]);\n            frameSpan.classList.add(INDETERMINATE);\n            ariaState = 'false';\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n    };\n    CheckBoxSelection.prototype.setSearchBox = function (args) {\n        if (isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent = this.parent.createElement('span', {\n                className: filterParent\n            });\n            this.filterInput = this.parent.createElement('input', {\n                attrs: { type: 'text' },\n                className: filterInput\n            });\n            this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n                this.parent.mobFilter = false;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n                properties: { placeholder: this.parent.filterBarPlaceholder }\n            }, this.parent.createElement);\n            if (!isNullOrUndefined(this.parent.cssClass)) {\n                if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], this.parent.filterParent);\n            prepend([this.parent.filterParent], args.popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'role': 'combobox',\n                'autocomplete': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n            EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n            EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n            this.parent.searchBoxHeight = (this.filterInputObj.container.parentElement).getBoundingClientRect().height;\n            return this.filterInputObj;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n        this.parent.hidePopup();\n        removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.inputElement.focus();\n    };\n    CheckBoxSelection.prototype.clearText = function (e) {\n        this.parent.targetInputElement.value = '';\n        if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n            this.parent.search(null);\n        }\n        this.parent.refreshPopup();\n        this.parent.refreshListItems(null);\n        this.clearIconElement.style.visibility = 'hidden';\n        this.filterInput.focus();\n        this.setReorder(e);\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n        this.parent.popupObj.element.classList.add(device);\n        this.parent.popupObj.element.classList.add(mobileFilter);\n        this.parent.popupObj.position = { X: 0, Y: 0 };\n        this.parent.popupObj.dataBind();\n        this.setSearchBoxPosition();\n        this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n        this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n        this.clearIconElement.style.visibility = 'hidden';\n        EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n    };\n    CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        var selectAllHeight = 0;\n        if (this.checkAllParent) {\n            selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n        this.parent.list.style.maxHeight = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        this.parent.list.style.height = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    CheckBoxSelection.prototype.setPopupFullScreen = function () {\n        attributes(this.parent.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n        addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n    };\n    CheckBoxSelection.prototype.targetElement = function () {\n        if (!isNullOrUndefined(this.clearIconElement)) {\n            this.parent.targetInputElement = this.filterInput;\n            this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n        }\n        return this.parent.targetInputElement.value;\n    };\n    CheckBoxSelection.prototype.onBlurHandler = function (e) {\n        if (!this.parent.element.classList.contains('e-listbox')) {\n            var target = void 0;\n            if (this.parent.keyAction) {\n                return;\n            }\n            if (Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.target;\n            }\n            if (!Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.relatedTarget;\n            }\n            // eslint-disable-next-line max-len\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target)\n                && !Browser.isIE && this.filterInput) {\n                this.filterInput.focus();\n                return;\n            }\n            if (this.parent.scrollFocusStatus && this.filterInput) {\n                e.preventDefault();\n                this.filterInput.focus();\n                this.parent.scrollFocusStatus = false;\n                return;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element)\n                && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n                this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.overAllWrapper.classList.remove(FOCUS$1);\n                this.parent.trigger('blur');\n                this.parent.focused = true;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n                this.parent.hidePopup();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.onDocumentClick = function (e) {\n        if (this.parent.getLocaleName() !== 'listbox') {\n            var target = e.target;\n            if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n                if (!(this.filterInput && this.filterInput.value !== '')) {\n                    e.preventDefault();\n                }\n            }\n            if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) &&\n                !this.parent.overAllWrapper.contains(e.target)) {\n                if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n                    this.parent.inputFocus = false;\n                    this.parent.scrollFocusStatus = false;\n                    this.parent.hidePopup();\n                    this.parent.onBlurHandler(e, true);\n                    this.parent.focused = true;\n                }\n            }\n            else {\n                this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') &&\n                    (document.activeElement === this.filterInput);\n            }\n            if (!this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') &&\n                !this.parent.isPopupOpen()) {\n                if (Browser.isIE) {\n                    this.parent.onBlurHandler();\n                }\n                else {\n                    this.parent.onBlurHandler(e);\n                }\n            }\n            if (this.filterInput === target) {\n                this.filterInput.focus();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.getFocus = function (e) {\n        this.parent.overAllWrapper.classList.remove(FOCUS$1);\n        if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n            this.parent.keyAction = false;\n            return;\n        }\n        if (e.value === 'focus') {\n            this.filterInput.focus();\n            this.parent.removeFocus();\n            EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n        }\n        if (e.value === 'clear') {\n            this.filterInput.value = '';\n            this.clearIconElement.style.visibility = 'hidden';\n        }\n    };\n    CheckBoxSelection.prototype.checkSelectAll = function (e) {\n        if (e.value === 'check' && this.checkAllParent.getAttribute('aria-checked') !== 'true') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale(true);\n        }\n        if (e.value === 'uncheck') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n        if (e.value === 'indeterminate') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n    };\n    CheckBoxSelection.prototype.setLocale = function (unSelect) {\n        if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n            var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n            this.selectAllSpan.textContent = '';\n            var compiledString = compile(template);\n            var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            var l10nLocale = { selectAllText: 'Select All', unSelectAllText: 'Unselect All' };\n            var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n            if (l10n.getConstant('selectAllText') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n            }\n            this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n        }\n    };\n    CheckBoxSelection.prototype.getActiveList = function (args) {\n        if (args.li.classList.contains('e-active')) {\n            this.activeLi.push(args.li.cloneNode(true));\n        }\n        else {\n            this.activeLi.splice(args.index, 1);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.setReorder = function (args) {\n        if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n            var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n            var remLi = void 0;\n            var ulEle = this.parent.createElement('ul', {\n                className: 'e-list-parent e-ul e-reorder'\n            });\n            if (activeLiCount > 0) {\n                append(this.parent.ulElement.querySelectorAll('li.e-active'), ulEle);\n                remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n                addClass(remLi, 'e-reorder-hide');\n                prepend([ulEle], this.parent.list);\n            }\n            this.parent.focusAtFirstListItem();\n        }\n    };\n    return CheckBoxSelection;\n}());\n\n/**\n * export all modules from current location\n */\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n/**\n * Defines the Selection settings of List Box.\n */\nvar SelectionSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$6([\n        Property('Multiple')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate$6([\n        Property(false)\n    ], SelectionSettings.prototype, \"showCheckbox\", void 0);\n    __decorate$6([\n        Property(false)\n    ], SelectionSettings.prototype, \"showSelectAll\", void 0);\n    __decorate$6([\n        Property('Left')\n    ], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\n/**\n * Defines the toolbar settings of List Box.\n */\nvar ToolbarSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$6([\n        Property([])\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate$6([\n        Property('Right')\n    ], ToolbarSettings.prototype, \"position\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\nvar ListBox = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(ListBox, _super);\n    /**\n     * Constructor for creating the ListBox component.\n     *\n     * @param {ListBoxModel} options - Specifies ListBox model\n     * @param {string | HTMLElement} element - Specifies the element.\n     */\n    function ListBox(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isValidKey = false;\n        _this.isDataSourceUpdate = false;\n        _this.keyDownStatus = false;\n        return _this;\n    }\n    ListBox_1 = ListBox;\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}.\n     * @private\n     */\n    ListBox.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Build and render the component.\n     *\n     * @private\n     * @returns {void}\n     */\n    ListBox.prototype.render = function () {\n        this.inputString = '';\n        this.initLoad = true;\n        this.isCustomFiltering = false;\n        this.initialSelectedOptions = this.value;\n        _super.prototype.render.call(this);\n        this.renderComplete();\n    };\n    ListBox.prototype.initWrapper = function () {\n        var hiddenSelect = this.createElement('select', { className: 'e-hidden-select', attrs: { 'multiple': '' } });\n        hiddenSelect.style.visibility = 'hidden';\n        this.list.classList.add('e-listbox-wrapper');\n        if (this.itemTemplate) {\n            this.list.classList.add('e-list-template');\n        }\n        this.list.classList.add('e-wrapper');\n        this.list.classList.add('e-lib');\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.setAttribute('tabindex', '0');\n            if (this.initLoad) {\n                this.element.appendChild(this.list);\n            }\n        }\n        else {\n            if (this.initLoad) {\n                this.element.parentElement.insertBefore(this.list, this.element);\n            }\n            this.list.insertBefore(this.element, this.list.firstChild);\n            this.element.style.display = 'none';\n        }\n        this.list.insertBefore(hiddenSelect, this.list.firstChild);\n        if (this.list.getElementsByClassName('e-list-item')[0]) {\n            this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n        }\n        if (this.itemTemplate) {\n            this.renderReactTemplates();\n        }\n        removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n        this.validationAttribute(this.element, hiddenSelect);\n        this.list.setAttribute('role', 'listbox');\n        attributes(this.list, { 'role': 'listbox', 'aria-label': 'listbox', 'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false' });\n        this.updateSelectionSettings();\n    };\n    ListBox.prototype.updateSelectionSettings = function () {\n        if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n            var l10nSelect = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n            this.showSelectAll = true;\n            this.selectAllText = l10nSelect.getConstant('selectAllText');\n            this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n            this.popupWrapper = this.list;\n            this.checkBoxSelectionModule.checkAllParent = null;\n            this.notify('selectAll', {});\n        }\n    };\n    ListBox.prototype.initDraggable = function () {\n        var _this = this;\n        if (this.ulElement) {\n            this.ulElement.id = this.element.id + '_parent';\n        }\n        if (this.allowDragAndDrop) {\n            new Sortable(this.ulElement, {\n                scope: this.scope,\n                itemClass: 'e-list-item',\n                dragStart: this.triggerDragStart.bind(this),\n                drag: this.triggerDrag.bind(this),\n                beforeDrop: this.beforeDragEnd.bind(this),\n                drop: this.dragEnd.bind(this),\n                placeHolder: function () { return _this.createElement('span', { className: 'e-placeholder' }); },\n                helper: function (e) {\n                    var wrapper = _this.list.cloneNode();\n                    var ele = e.sender.cloneNode(true);\n                    wrapper.appendChild(ele);\n                    var refEle = _this.getItems()[0];\n                    wrapper.style.width = refEle.offsetWidth + 'px';\n                    wrapper.style.height = refEle.offsetHeight + 'px';\n                    if ((_this.value && _this.value.length) > 1 && _this.isSelected(ele)) {\n                        ele.appendChild(_this.createElement('span', {\n                            className: 'e-list-badge', innerHTML: _this.value.length + ''\n                        }));\n                    }\n                    wrapper.style.zIndex = getZindexPartial(_this.element) + '';\n                    return wrapper;\n                }\n            });\n        }\n    };\n    ListBox.prototype.updateActionCompleteData = function (li, item, index) {\n        this.jsonData.splice(index, 0, item);\n    };\n    ListBox.prototype.initToolbar = function () {\n        var pos = this.toolbarSettings.position;\n        var prevScope = this.element.getAttribute('data-value');\n        if (this.toolbarSettings.items.length) {\n            var toolElem = this.createElement('div', { className: 'e-listbox-tool', attrs: { 'role': 'toolbar' } });\n            var wrapper = this.createElement('div', {\n                className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n            });\n            this.list.parentElement.insertBefore(wrapper, this.list);\n            wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n            wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n            this.createButtons(toolElem);\n            if (!this.element.id) {\n                this.element.id = getUniqueID('e-' + this.getModuleName());\n            }\n            if (this.scope) {\n                document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n            }\n            else {\n                this.updateToolBarState();\n            }\n        }\n        var scope = this.element.getAttribute('data-value');\n        if (prevScope && scope && (prevScope !== scope)) {\n            this.tBListBox = getComponent(document.getElementById(prevScope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n        else if (scope) {\n            this.tBListBox = getComponent(document.getElementById(scope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n    };\n    ListBox.prototype.createButtons = function (toolElem) {\n        var _this = this;\n        var btn;\n        var ele;\n        var title;\n        var l10n = new L10n(this.getModuleName(), {\n            moveUp: 'Move Up', moveDown: 'Move Down', moveTo: 'Move To',\n            moveFrom: 'Move From', moveAllTo: 'Move All To', moveAllFrom: 'Move All From'\n        }, this.locale);\n        this.toolbarSettings.items.forEach(function (value) {\n            title = l10n.getConstant(value);\n            ele = _this.createElement('button', {\n                attrs: {\n                    'type': 'button',\n                    'data-value': value,\n                    'title': title,\n                    'aria-label': title\n                }\n            });\n            toolElem.appendChild(ele);\n            btn = new Button({ iconCss: 'e-icons e-' + value.toLowerCase() }, ele);\n            btn.createElement = _this.createElement;\n        });\n    };\n    ListBox.prototype.validationAttribute = function (input, hiddenSelect) {\n        _super.prototype.validationAttribute.call(this, input, hiddenSelect);\n        hiddenSelect.required = input.required;\n        input.required = false;\n    };\n    ListBox.prototype.setHeight = function () {\n        var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        ele.style.height = formatUnit(this.height);\n        if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n            addClass([this.list], 'e-filter-list');\n        }\n        else {\n            removeClass([this.list], 'e-filter-list');\n        }\n    };\n    ListBox.prototype.setCssClass = function () {\n        var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.cssClass) {\n            addClass([wrap], this.cssClass.split(' '));\n        }\n        if (this.enableRtl) {\n            addClass([this.list], 'e-rtl');\n        }\n    };\n    ListBox.prototype.setEnable = function () {\n        var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.enabled) {\n            removeClass([ele], cssClass.disabled);\n        }\n        else {\n            addClass([ele], cssClass.disabled);\n        }\n    };\n    ListBox.prototype.showSpinner = function () {\n        if (!this.spinner) {\n            this.spinner = this.createElement('div', { className: 'e-listbox-wrapper' });\n        }\n        this.spinner.style.height = formatUnit(this.height);\n        this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n        createSpinner({ target: this.spinner }, this.createElement);\n        showSpinner(this.spinner);\n    };\n    ListBox.prototype.hideSpinner = function () {\n        if (this.spinner.querySelector('.e-spinner-pane')) {\n            hideSpinner(this.spinner);\n        }\n        if (this.spinner.parentElement) {\n            detach(this.spinner);\n        }\n    };\n    ListBox.prototype.onInput = function () {\n        this.isDataSourceUpdate = false;\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        this.refreshClearIcon();\n    };\n    ListBox.prototype.clearText = function () {\n        this.filterInput.value = '';\n        this.refreshClearIcon();\n        var event = document.createEvent('KeyboardEvent');\n        this.isValidKey = true;\n        this.KeyUp(event);\n    };\n    ListBox.prototype.refreshClearIcon = function () {\n        if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n            var clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n    };\n    ListBox.prototype.onActionComplete = function (ulElement, list, e) {\n        var searchEle;\n        if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n            searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n        }\n        if (list.length === 0) {\n            var noRecElem = ulElement.childNodes[0];\n            if (noRecElem) {\n                ulElement.removeChild(noRecElem);\n            }\n        }\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n            this.list.insertBefore(searchEle, this.list.firstElementChild);\n            this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n            this.filterWireEvents(searchEle);\n        }\n        this.initWrapper();\n        this.setSelection();\n        this.initDraggable();\n        this.mainList = this.ulElement;\n        if (this.initLoad) {\n            this.jsonData = [];\n            extend(this.jsonData, list, []);\n            this.initToolbarAndStyles();\n            this.wireEvents();\n            if (this.showCheckbox) {\n                this.setCheckboxPosition();\n            }\n            if (this.allowFiltering) {\n                this.setFiltering();\n            }\n        }\n        else {\n            if (this.isDataSourceUpdate) {\n                this.jsonData = [];\n                extend(this.jsonData, list, []);\n                this.isDataSourceUpdate = false;\n            }\n            if (this.allowFiltering) {\n                var filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n                var txtLength = this.filterInput.value.length;\n                filterElem.selectionStart = txtLength;\n                filterElem.selectionEnd = txtLength;\n                filterElem.focus();\n            }\n        }\n        if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n            var scope = this.scope.replace('#', '');\n            var scopedLB = getComponent(document.getElementById(scope), this.getModuleName());\n            scopedLB.initToolbar();\n        }\n        this.initLoad = false;\n    };\n    ListBox.prototype.initToolbarAndStyles = function () {\n        this.initToolbar();\n        this.setCssClass();\n        this.setEnable();\n        this.setHeight();\n    };\n    ListBox.prototype.triggerDragStart = function (args) {\n        var _this = this;\n        var badge;\n        args = extend(this.getDragArgs(args), { dragSelected: true });\n        if (Browser.isIos) {\n            this.list.style.overflow = 'hidden';\n        }\n        this.trigger('dragStart', args, function (dragEventArgs) {\n            _this.allowDragAll = dragEventArgs.dragSelected;\n            if (!_this.allowDragAll) {\n                badge = _this.ulElement.getElementsByClassName('e-list-badge')[0];\n                if (badge) {\n                    detach(badge);\n                }\n            }\n        });\n    };\n    ListBox.prototype.triggerDrag = function (args) {\n        var scrollParent;\n        var boundRect;\n        var scrollMoved = 36;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var event = args.event;\n        var wrapper;\n        if (args.target && (args.target.classList.contains(\"e-listbox-wrapper\") || args.target.classList.contains(\"e-list-item\")\n            || args.target.classList.contains(\"e-filter-parent\") || args.target.classList.contains(\"e-input-group\"))) {\n            if (args.target.classList.contains(\"e-list-item\") || args.target.classList.contains(\"e-filter-parent\")\n                || args.target.classList.contains(\"e-input-group\")) {\n                wrapper = args.target.closest('.e-listbox-wrapper');\n            }\n            else {\n                wrapper = args.target;\n            }\n            if (this.allowFiltering) {\n                scrollParent = wrapper.querySelector('.e-list-parent');\n            }\n            else {\n                scrollParent = wrapper;\n            }\n            boundRect = scrollParent.getBoundingClientRect();\n            if ((boundRect.y + scrollParent.offsetHeight) - (event.pageY + scrollMoved) < 1) {\n                scrollParent.scrollTop = scrollParent.scrollTop + 10;\n            }\n            else if ((event.pageY - scrollMoved) - boundRect.y < 1) {\n                scrollParent.scrollTop = scrollParent.scrollTop - 10;\n            }\n        }\n        if (args.target === null) {\n            return;\n        }\n        this.trigger('drag', this.getDragArgs(args));\n        var listObj = this.getComponent(args.target);\n        if (listObj && listObj.listData.length === 0) {\n            var noRecElem = listObj.ulElement.childNodes[0];\n            if (noRecElem) {\n                listObj.ulElement.removeChild(noRecElem);\n            }\n        }\n    };\n    ListBox.prototype.beforeDragEnd = function (args) {\n        this.dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        if (this.value.indexOf(this.dragValue) > -1) {\n            args.items = this.getDataByValues(this.value);\n        }\n        else {\n            args.items = this.getDataByValues([this.dragValue]);\n        }\n        this.trigger('beforeDrop', args);\n    };\n    ListBox.prototype.dragEnd = function (args) {\n        var _this = this;\n        var listData;\n        var liColl;\n        var jsonData;\n        var droppedData;\n        var selectedOptions;\n        var sortedData;\n        var dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        var listObj = this.getComponent(args.droppedElement);\n        var getArgs = this.getDragArgs({ target: args.droppedElement }, true);\n        var sourceArgs = { previousData: this.dataSource };\n        var destArgs = { previousData: listObj.dataSource };\n        var dragArgs = extend({}, getArgs, { target: args.target, source: { previousData: this.dataSource }, previousIndex: args.previousIndex, currentIndex: args.currentIndex });\n        if (listObj !== this) {\n            var sourceArgs1 = extend(sourceArgs, { currentData: this.listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1, destination: destArgs });\n        }\n        if (Browser.isIos) {\n            this.list.style.overflow = '';\n        }\n        if (listObj === this) {\n            var ul_1 = this.ulElement;\n            listData = [].slice.call(this.listData);\n            liColl = [].slice.call(this.liCollections);\n            jsonData = [].slice.call(this.jsonData);\n            sortedData = [].slice.call(this.sortedData);\n            var toSortIdx_1 = args.currentIndex;\n            var toIdx_1 = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n            var rIdx = listData.indexOf(this.getDataByValue(dropValue));\n            var jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n            var sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n            listData.splice(toIdx_1, 0, listData.splice(rIdx, 1)[0]);\n            sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx, 1)[0]);\n            jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx, 1)[0]);\n            liColl.splice(toIdx_1, 0, liColl.splice(rIdx, 1)[0]);\n            if (this.allowDragAll) {\n                selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n                selectedOptions.forEach(function (value) {\n                    if (value !== dropValue) {\n                        var idx = listData.indexOf(_this.getDataByValue(value));\n                        var jsonIdx_1 = jsonData.indexOf(_this.getDataByValue(value));\n                        var sIdx_1 = sortedData.indexOf(_this.getDataByValue(value));\n                        if (idx > toIdx_1) {\n                            toIdx_1++;\n                        }\n                        jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx_1, 1)[0]);\n                        listData.splice(toIdx_1, 0, listData.splice(idx, 1)[0]);\n                        sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx_1, 1)[0]);\n                        liColl.splice(toIdx_1, 0, liColl.splice(idx, 1)[0]);\n                        ul_1.insertBefore(_this.getItems()[_this.getIndexByValue(value)], ul_1.getElementsByClassName('e-placeholder')[0]);\n                    }\n                });\n            }\n            this.listData = listData;\n            this.jsonData = jsonData;\n            this.sortedData = sortedData;\n            this.liCollections = liColl;\n        }\n        else {\n            var li_1;\n            var fLiColl_1 = [].slice.call(this.liCollections);\n            var currIdx_1 = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n            var ul_2 = listObj.ulElement;\n            listData = [].slice.call(listObj.listData);\n            liColl = [].slice.call(listObj.liCollections);\n            jsonData = [].slice.call(listObj.jsonData);\n            sortedData = [].slice.call(listObj.sortedData);\n            selectedOptions = (this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll)\n                ? this.value : [dropValue];\n            var fListData_1 = [].slice.call(this.listData);\n            var fSortData_1 = [].slice.call(this.sortedData);\n            selectedOptions.forEach(function (value, index) {\n                droppedData = _this.getDataByValue(value);\n                var srcIdx = _this.listData.indexOf(droppedData);\n                var jsonSrcIdx = _this.jsonData.indexOf(droppedData);\n                var sortIdx = _this.sortedData.indexOf(droppedData);\n                fListData_1.splice(srcIdx, 1);\n                _this.jsonData.splice(jsonSrcIdx, 1);\n                fSortData_1.splice(sortIdx, 1);\n                _this.listData = fListData_1;\n                _this.sortedData = fSortData_1;\n                var destIdx = value === dropValue ? args.currentIndex : currIdx_1;\n                listData.splice(destIdx, 0, droppedData);\n                jsonData.splice(destIdx, 0, droppedData);\n                sortedData.splice(destIdx, 0, droppedData);\n                liColl.splice(destIdx, 0, fLiColl_1.splice(srcIdx, 1)[0]);\n                if (!value) {\n                    var liCollElem_1 = _this.getItems();\n                    for (var i = 0; i < liCollElem_1.length; i++) {\n                        if (liCollElem_1[i].getAttribute('data-value') === null && liCollElem_1[i].classList.contains('e-list-item')) {\n                            li_1 = liCollElem_1[i];\n                            break;\n                        }\n                    }\n                }\n                else {\n                    li_1 = _this.getItems()[_this.getIndexByValue(value)];\n                }\n                if (!li_1) {\n                    li_1 = args.helper;\n                }\n                _this.removeSelected(_this, value === dropValue ? [args.droppedElement] : [li_1]);\n                ul_2.insertBefore(li_1, ul_2.getElementsByClassName('e-placeholder')[0]);\n                currIdx_1++;\n            });\n            if (this.fields.groupBy) {\n                var sourceElem = this.renderItems(this.listData, this.fields);\n                this.updateListItems(sourceElem, this.ulElement);\n                this.setSelection();\n            }\n            if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox\n                !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n                var sortable = getComponent(ul_2, 'sortable');\n                var sourceElem = listObj.renderItems(listData, listObj.fields);\n                listObj.updateListItems(sourceElem, ul_2);\n                this.setSelection();\n                if (sortable.placeHolderElement) {\n                    ul_2.appendChild(sortable.placeHolderElement);\n                }\n                ul_2.appendChild(args.helper);\n                listObj.setSelection();\n            }\n            this.liCollections = fLiColl_1;\n            listObj.liCollections = liColl;\n            listObj.jsonData = extend([], [], jsonData, false);\n            listObj.listData = extend([], [], listData, false);\n            listObj.sortedData = extend([], [], sortedData, false);\n            if (this.listData.length === 0) {\n                this.l10nUpdate();\n            }\n        }\n        if (this === listObj) {\n            var sourceArgs1 = extend(sourceArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1 });\n        }\n        else {\n            var dragArgs1 = extend(destArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { destination: dragArgs1 });\n        }\n        this.trigger('drop', dragArgs);\n        var liCollElem = dragArgs.elements;\n        if (liCollElem.length) {\n            for (var i = 0; i < liCollElem.length; i++) {\n                liCollElem[i].classList.remove('e-grabbed');\n            }\n        }\n    };\n    ListBox.prototype.updateListItems = function (sourceElem, destElem) {\n        var i = 0;\n        destElem.innerHTML = \"\";\n        while (i < sourceElem.childNodes.length) {\n            destElem.appendChild(sourceElem.childNodes[i]);\n        }\n    };\n    ListBox.prototype.removeSelected = function (listObj, elems) {\n        if (listObj.selectionSettings.showCheckbox) {\n            elems.forEach(function (ele) { ele.getElementsByClassName('e-frame')[0].classList.remove('e-check'); });\n        }\n        else {\n            removeClass(elems, cssClass.selected);\n        }\n    };\n    ListBox.prototype.getCurIdx = function (listObj, idx) {\n        if (listObj.fields.groupBy) {\n            idx -= [].slice.call(listObj.ulElement.children).slice(0, idx)\n                .filter(function (ele) { return ele.classList.contains(cssClass.group); }).length;\n        }\n        return idx;\n    };\n    ListBox.prototype.getComponent = function (li) {\n        var listObj;\n        var ele = (this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox')\n            : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox'));\n        if (ele) {\n            listObj = getComponent(ele, this.getModuleName());\n        }\n        return listObj;\n    };\n    ListBox.prototype.listOption = function (dataSource, fields) {\n        this.listCurrentOptions = _super.prototype.listOption.call(this, dataSource, fields);\n        this.listCurrentOptions = extend({}, this.listCurrentOptions, { itemCreated: this.triggerBeforeItemRender.bind(this) }, true);\n        this.notify('listoption', { module: 'CheckBoxSelection' });\n        return this.listCurrentOptions;\n    };\n    ListBox.prototype.triggerBeforeItemRender = function (e) {\n        e.item.setAttribute('tabindex', '-1');\n        this.trigger('beforeItemRender', { element: e.item, item: e.curData });\n    };\n    ListBox.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.selectionSettings.showCheckbox) {\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n     *\n     * @param {string[]} items - Text items that needs to be enabled/disabled.\n     * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    ListBox.prototype.enableItems = function (items, enable, isValue) {\n        var _this = this;\n        if (enable === void 0) { enable = true; }\n        var li;\n        items.forEach(function (item) {\n            var text = item;\n            li = _this.findListElement(_this.list, 'li', 'data-value', isValue ? text : _this.getValueByText(text));\n            if (!li) {\n                return;\n            }\n            if (enable) {\n                removeClass([li], cssClass.disabled);\n                li.removeAttribute('aria-disabled');\n            }\n            else {\n                addClass([li], cssClass.disabled);\n                li.setAttribute('aria-disabled', 'true');\n            }\n        });\n    };\n    /**\n     * Based on the state parameter, specified list item will be selected/deselected.\n     *\n     * @param {string[]} items - Array of text value of the item.\n     * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    ListBox.prototype.selectItems = function (items, state, isValue) {\n        if (state === void 0) { state = true; }\n        this.setSelection(items, state, !isValue);\n        this.updateSelectedOptions();\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     *\n     * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n     * @returns {void}\n     */\n    ListBox.prototype.selectAll = function (state) {\n        if (state === void 0) { state = true; }\n        this.selectAllItems(state);\n    };\n    /**\n     * Adds a new item to the list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.addItems = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.removeItems = function (items, itemIndex) {\n        this.removeItem(items, itemIndex);\n    };\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.removeItem = function (items, itemIndex) {\n        var liCollections = [];\n        var liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        if (items) {\n            items = (items instanceof Array ? items : [items]);\n            var fields = this.fields;\n            var dataValue = void 0;\n            var objValue = void 0;\n            var dupData = [];\n            var itemIdx = void 0;\n            extend(dupData, [], this.jsonData);\n            var removeIdxes = [];\n            var removeLiIdxes = [];\n            for (var j = 0; j < items.length; j++) {\n                if (items[j] instanceof Object) {\n                    dataValue = getValue(fields.value, items[j]);\n                }\n                else {\n                    dataValue = items[j].toString();\n                }\n                for (var i = 0, len = dupData.length; i < len; i++) {\n                    if (dupData[i] instanceof Object) {\n                        objValue = getValue(fields.value, dupData[i]);\n                    }\n                    else {\n                        objValue = dupData[i].toString();\n                    }\n                    if (objValue === dataValue) {\n                        itemIdx = this.getIndexByValue(dataValue);\n                        var idx = itemIdx === i ? itemIdx : i;\n                        liCollections.push(liElement[idx]);\n                        removeIdxes.push(idx);\n                        removeLiIdxes.push(idx);\n                    }\n                }\n            }\n            for (var k = removeIdxes.length - 1; k >= 0; k--) {\n                this.listData.splice(removeIdxes[k], 1);\n            }\n            for (var k = removeIdxes.length - 1; k >= 0; k--) {\n                this.jsonData.splice(removeIdxes[k], 1);\n            }\n            for (var k = removeLiIdxes.length - 1; k >= 0; k--) {\n                this.updateLiCollection(removeLiIdxes[k]);\n            }\n        }\n        else {\n            itemIndex = itemIndex ? itemIndex : 0;\n            liCollections.push(liElement[itemIndex]);\n            this.listData.splice(itemIndex, 1);\n            this.jsonData.splice(itemIndex, 1);\n            this.updateLiCollection(itemIndex);\n        }\n        for (var i = 0; i < liCollections.length; i++) {\n            this.ulElement.removeChild(liCollections[i]);\n        }\n        if (this.listData.length === 0) {\n            this.l10nUpdate();\n        }\n        this.value = null;\n        this.updateToolBarState();\n    };\n    /**\n     * Gets the array of data Object that matches the given array of values.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n     * @returns {object[]}.\n     */\n    ListBox.prototype.getDataByValues = function (value) {\n        var data = [];\n        for (var i = 0; i < value.length; i++) {\n            data.push(this.getDataByValue(value[i]));\n        }\n        return data;\n    };\n    /**\n     * Moves the given value(s) / selected value(s) upwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveUp = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(true, false, elem);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) downwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveDown = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(false, false, elem);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n     * @param {number} index - Specifies the index.\n     * @param {string} targetId - Specifies the target id.\n     * @returns {void}\n     */\n    ListBox.prototype.moveTo = function (value, index, targetId) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        var tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n        this.moveData(this, tlistbox, false, elem, index);\n    };\n    /**\n     * Moves all the values from one ListBox to the scoped ListBox.\n     *\n     * @param  { string } targetId - Specifies the scoped ListBox ID.\n     * @param  { string } index - Specifies the index to where the items moved.\n     * @returns {void}\n     */\n    ListBox.prototype.moveAllTo = function (targetId, index) {\n        if (this.listData.length > 0) {\n            var tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n            this.moveAllData(this, tlistbox, false, index);\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Gets the updated dataSource in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n     */\n    /* eslint-enable */\n    ListBox.prototype.getDataList = function () {\n        return this.jsonData;\n    };\n    /* eslint-disable */\n    /**\n     * Returns the sorted Data in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n     */\n    /* eslint-enable */\n    ListBox.prototype.getSortedList = function () {\n        var sortData;\n        var tempData;\n        sortData = tempData = this.sortedData;\n        if (this.fields.groupBy) {\n            sortData = [];\n            for (var i = 0; i < tempData.length; i++) {\n                if (tempData[i].isHeader) {\n                    continue;\n                }\n                sortData.push(tempData[i]);\n            }\n        }\n        return sortData;\n    };\n    ListBox.prototype.getElemByValue = function (value) {\n        var elem = [];\n        for (var i = 0; i < value.length; i++) {\n            elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n        }\n        return elem;\n    };\n    ListBox.prototype.updateLiCollection = function (index) {\n        var tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 1);\n        this.liCollections = tempLi;\n    };\n    ListBox.prototype.selectAllItems = function (state, event) {\n        var _this = this;\n        [].slice.call(this.getItems()).forEach(function (li) {\n            if (!li.classList.contains(cssClass.disabled)) {\n                if (_this.selectionSettings.showCheckbox) {\n                    var ele = li.getElementsByClassName('e-check')[0];\n                    if ((!ele && state) || (ele && !state)) {\n                        _this.notify('updatelist', { li: li, module: 'listbox' });\n                        if (_this.maximumSelectionLength >= _this.list.querySelectorAll('.e-list-item span.e-check').length) {\n                            _this.checkMaxSelection();\n                        }\n                    }\n                }\n                else {\n                    if (state) {\n                        li.classList.add(cssClass.selected);\n                    }\n                    else {\n                        li.classList.remove(cssClass.selected);\n                    }\n                }\n            }\n        });\n        this.updateSelectedOptions();\n        if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n            var liEle = this.list.getElementsByTagName('li');\n            var index = 0;\n            if (state) {\n                var _loop_1 = function () {\n                    var dataValue1 = this_1.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    if (!this_1.value.some(function (e) { return e === dataValue1; })) {\n                        this_1.value.push(this_1.getFormattedValue(liEle[index].getAttribute('data-value')));\n                    }\n                };\n                var this_1 = this;\n                for (index = 0; index < liEle.length; index++) {\n                    _loop_1();\n                }\n            }\n            else {\n                var _loop_2 = function () {\n                    var dataValue2 = this_2.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    this_2.value = this_2.value.filter(function (e) { return e !== dataValue2; });\n                };\n                var this_2 = this;\n                for (index = 0; index < liEle.length; index++) {\n                    _loop_2();\n                }\n            }\n            if (document.querySelectorAll('ul').length < 2) {\n                this.updateMainList();\n            }\n        }\n        this.triggerChange(this.getSelectedItems(), event);\n    };\n    ListBox.prototype.updateMainList = function () {\n        var mainList = this.mainList.querySelectorAll('.e-list-item');\n        var ulList = this.ulElement.querySelectorAll('.e-list-item');\n        var mainCount = mainList.length;\n        var ulEleCount = ulList.length;\n        if (this.selectionSettings.showCheckbox || (document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount)) {\n            var listindex = 0;\n            var valueindex = 0;\n            var count = 0;\n            for (listindex; listindex < mainCount;) {\n                if (this.value) {\n                    for (valueindex; valueindex < this.value.length; valueindex++) {\n                        if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n                            count++;\n                        }\n                    }\n                }\n                if (!count && this.selectionSettings.showCheckbox) {\n                    mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n                }\n                if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n                    this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n                    listindex = 0;\n                }\n                else {\n                    listindex++;\n                }\n                count = 0;\n                valueindex = 0;\n            }\n        }\n    };\n    ListBox.prototype.wireEvents = function () {\n        var form = closest(this.element, 'form');\n        var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.add(this.list, 'click', this.clickHandler, this);\n        EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n        EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n        this.wireToolbarEvent();\n        if (this.selectionSettings.showCheckbox) {\n            EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n        }\n        if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        }\n        if (form) {\n            EventHandler.add(form, 'reset', this.formResetHandler, this);\n        }\n    };\n    ListBox.prototype.wireToolbarEvent = function () {\n        if (this.toolbarSettings.items.length) {\n            EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n        }\n    };\n    ListBox.prototype.unwireEvents = function () {\n        var form = closest(this.element, 'form');\n        var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.remove(this.list, 'click', this.clickHandler);\n        EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n        EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n        if (this.allowFiltering && this.clearFilterIconElem) {\n            EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n        }\n        if (this.toolbarSettings.items.length) {\n            EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n        }\n        if (form) {\n            EventHandler.remove(form, 'reset', this.formResetHandler);\n        }\n    };\n    ListBox.prototype.clickHandler = function (e) {\n        this.selectHandler(e);\n    };\n    ListBox.prototype.checkSelectAll = function () {\n        var searchCount = 0;\n        var liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        for (var i = 0; i < liItems.length; i++) {\n            if (!liItems[i].classList.contains('e-disabled')) {\n                searchCount++;\n            }\n        }\n        var len = this.getSelectedItems().length;\n        if (this.showSelectAll && searchCount) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection',\n                value: (searchCount === len) ? 'check' : (len === 0) ? 'uncheck' : 'indeterminate' });\n        }\n    };\n    ListBox.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.allowFiltering) {\n            var filterType = this.inputString === '' ? 'contains' : this.filterType;\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (dataType === null) {\n                dataType = this.typeOfData(this.jsonData).typeof;\n            }\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query : this.query ? this.query : new Query();\n        }\n        return filterQuery;\n    };\n    ListBox.prototype.setFiltering = function () {\n        var filterInputObj;\n        if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n            this.filterParent = this.createElement('span', {\n                className: listBoxClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: listBoxClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: [listBoxClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            append([filterInputObj.container], this.filterParent);\n            prepend([this.filterParent], this.list);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-owns': this.element.id + '_options',\n                'role': 'listbox',\n                'aria-activedescendant': null,\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            if (this.height.toString().indexOf('%') < 0) {\n                addClass([this.list], 'e-filter-list');\n            }\n            this.inputString = this.filterInput.value;\n            this.filterWireEvents();\n            return filterInputObj;\n        }\n    };\n    ListBox.prototype.filterWireEvents = function (filterElem) {\n        if (filterElem) {\n            this.filterInput = filterElem.querySelector('.e-input-filter');\n        }\n        this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n        if (this.clearFilterIconElem) {\n            EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n            if (!filterElem) {\n                this.clearFilterIconElem.style.visibility = 'hidden';\n            }\n        }\n        EventHandler.add(this.filterInput, 'input', this.onInput, this);\n        EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n        EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n    };\n    ListBox.prototype.selectHandler = function (e, isKey) {\n        var isSelect = true;\n        var currSelIdx;\n        var li = closest(e.target, '.' + 'e-list-item');\n        var selectedLi = [li];\n        if (li && li.parentElement) {\n            currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            if (!this.selectionSettings.showCheckbox) {\n                if ((e.ctrlKey || Browser.isDevice) && this.isSelected(li)) {\n                    li.classList.remove(cssClass.selected);\n                    li.removeAttribute('aria-selected');\n                    isSelect = false;\n                }\n                else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || Browser.isDevice))) {\n                    this.getSelectedItems().forEach(function (ele) {\n                        ele.removeAttribute('aria-selected');\n                    });\n                    removeClass(this.getSelectedItems(), cssClass.selected);\n                }\n            }\n            else {\n                isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n            }\n            if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n                selectedLi = [].slice.call(li.parentElement.children)\n                    .slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1)\n                    .filter(function (ele) { return ele.classList.contains('e-list-item'); });\n            }\n            else {\n                this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            }\n            if (isSelect) {\n                if (!this.selectionSettings.showCheckbox) {\n                    addClass(selectedLi, cssClass.selected);\n                }\n                selectedLi.forEach(function (ele) {\n                    ele.setAttribute('aria-selected', 'true');\n                });\n                this.list.setAttribute('aria-activedescendant', li.id);\n            }\n            else {\n                selectedLi.forEach(function (ele) {\n                    ele.setAttribute('aria-selected', 'false');\n                });\n            }\n            if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) &&\n                (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) &&\n                !(this.maximumSelectionLength < (this.value && this.value.length))) {\n                this.notify('updatelist', { li: li, e: e, module: 'listbox' });\n            }\n            if (this.allowFiltering && !isKey) {\n                var liDataValue_1 = this.getFormattedValue(li.getAttribute('data-value'));\n                if (!isSelect) {\n                    this.value = this.value.filter(function (value1) {\n                        return value1 !== liDataValue_1;\n                    });\n                }\n                else {\n                    var values = [];\n                    extend(values, this.value);\n                    values.push(liDataValue_1);\n                    this.value = values;\n                }\n                if (document.querySelectorAll('ul').length < 2) {\n                    this.updateMainList();\n                }\n            }\n            this.updateSelectedOptions();\n            this.triggerChange(this.getSelectedItems(), e);\n            this.checkMaxSelection();\n        }\n    };\n    ListBox.prototype.triggerChange = function (selectedLis, event) {\n        this.trigger('change', { elements: selectedLis, items: this.getDataByElements(selectedLis), value: this.value, event: event });\n    };\n    ListBox.prototype.getDataByElems = function (elems) {\n        var data = [];\n        for (var i = 0, len = elems.length; i < len; i++) {\n            data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n        }\n        return data;\n    };\n    ListBox.prototype.getDataByElements = function (elems) {\n        var data = [];\n        var value;\n        var sIdx = 0;\n        if (!isNullOrUndefined(this.listData)) {\n            var type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    for (var i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && item === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    for (var i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            return data;\n        }\n        return null;\n    };\n    ListBox.prototype.checkMaxSelection = function () {\n        var limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n        if (this.selectionSettings.showCheckbox) {\n            var index = 0;\n            var liCollElem = this.list.getElementsByClassName('e-list-item');\n            for (index; index < liCollElem.length; index++) {\n                if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n                    if (limit === this.maximumSelectionLength) {\n                        liCollElem[index].classList.add('e-disable');\n                    }\n                    else if (liCollElem[index].classList.contains('e-disable')) {\n                        liCollElem[index].classList.remove('e-disable');\n                    }\n                }\n            }\n        }\n    };\n    ListBox.prototype.toolbarClickHandler = function (e) {\n        var btn = closest(e.target, 'button');\n        if (btn) {\n            this.toolbarAction = btn.getAttribute('data-value');\n            if (btn.disabled) {\n                return;\n            }\n            switch (this.toolbarAction) {\n                case 'moveUp':\n                    this.moveUpDown(true);\n                    break;\n                case 'moveDown':\n                    this.moveUpDown();\n                    break;\n                case 'moveTo':\n                    this.moveItemTo();\n                    break;\n                case 'moveFrom':\n                    this.moveItemFrom();\n                    break;\n                case 'moveAllTo':\n                    this.moveAllItemTo();\n                    break;\n                case 'moveAllFrom':\n                    this.moveAllItemFrom();\n                    break;\n                default:\n                    this.trigger('actionBegin', { cancel: false, items: this.getDataByElems(this.getSelectedItems()),\n                        eventName: this.toolbarAction });\n                    break;\n            }\n        }\n    };\n    ListBox.prototype.moveUpDown = function (isUp, isKey, value) {\n        var _this = this;\n        var elems = this.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        if (((isUp && this.isSelected(this.ulElement.firstElementChild))\n            || (!isUp && this.isSelected(this.ulElement.lastElementChild))) && !value) {\n            return;\n        }\n        var tempItems = this.getDataByElems(elems);\n        var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        this.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        (isUp ? elems : elems.reverse()).forEach(function (ele) {\n            var jsonToIdx = Array.prototype.indexOf.call(_this.ulElement.querySelectorAll('.e-list-item'), ele);\n            var idx = Array.prototype.indexOf.call(_this.ulElement.children, ele);\n            moveTo(_this.ulElement, _this.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n            _this.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n        });\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        elems[0].focus();\n        if (!isKey && this.toolbarSettings.items.length) {\n            this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n        }\n        this.updateToolBarState();\n    };\n    ListBox.prototype.moveItemTo = function () {\n        this.moveData(this, this.getScopedListBox());\n    };\n    ListBox.prototype.moveItemFrom = function () {\n        this.moveData(this.getScopedListBox(), this);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBox} fListBox - Specifies the from listbox.\n     * @param {ListBox} tListBox - Specifies the to listbox.\n     * @param {boolean} isKey - Specifies the key.\n     * @param {Element[]} value - Specifies the value.\n     * @param {number} index - Specifies the index.\n     * @returns {void}\n     * @private\n     */\n    ListBox.prototype.moveData = function (fListBox, tListBox, isKey, value, index) {\n        var idx = [];\n        var dataIdx = [];\n        var jsonIdx = [];\n        var sortIdx = [];\n        var listData = [].slice.call(fListBox.listData);\n        var tListData = [].slice.call(tListBox.listData);\n        var sortData = [].slice.call(fListBox.sortedData);\n        var tSortData = [].slice.call(tListBox.sortedData);\n        var fliCollections = [].slice.call(fListBox.liCollections);\n        var dataLiIdx = [];\n        var tliCollections = [].slice.call(tListBox.liCollections);\n        var tempItems = [];\n        var data = [];\n        var elems = fListBox.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        var isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        fListBox.value = [];\n        if (elems.length) {\n            this.removeSelected(fListBox, elems);\n            elems.forEach(function (ele) {\n                idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n                // To update lb view data\n                dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele));\n                // To update lb listdata data\n                dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0]));\n                // To update lb sorted data\n                sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0]));\n                // To update lb original data\n                jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n            });\n            if (this.sortOrder !== 'None') {\n                sortIdx.forEach(function (i) {\n                    tempItems.push(fListBox.sortedData[i]);\n                });\n            }\n            else {\n                jsonIdx.forEach(function (i) {\n                    tempItems.push(fListBox.jsonData[i]);\n                });\n            }\n            var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n            fListBox.trigger('actionBegin', localDataArgs);\n            if (localDataArgs.cancel) {\n                return;\n            }\n            var rLiCollection_1 = [];\n            dataLiIdx.sort(function (n1, n2) { return n1 - n2; }).reverse().forEach(function (i) {\n                rLiCollection_1.push(fliCollections.splice(i, 1)[0]);\n            });\n            fListBox.liCollections = fliCollections;\n            if (index) {\n                var toColl = tliCollections.splice(0, index);\n                tListBox.liCollections = toColl.concat(rLiCollection_1.reverse()).concat(tliCollections);\n            }\n            else {\n                tListBox.liCollections = tliCollections.concat(rLiCollection_1.reverse());\n            }\n            if (tListBox.listData.length === 0) {\n                var noRecElem = tListBox.ulElement.childNodes[0];\n                if (noRecElem) {\n                    tListBox.ulElement.removeChild(noRecElem);\n                }\n            }\n            dataIdx.sort(function (n1, n2) { return n2 - n1; }).forEach(function (i) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                listData.splice(i, 1)[0];\n            });\n            sortIdx.sort(function (n1, n2) { return n2 - n1; }).forEach(function (i) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                sortData.splice(i, 1)[0];\n            });\n            jsonIdx.slice().reverse().forEach(function (i) {\n                data.push(fListBox.jsonData.splice(i, 1)[0]);\n            });\n            if (isRefresh) {\n                if (fListBox.fields.groupBy) {\n                    var sourceElem = fListBox.renderItems(listData, fListBox.fields);\n                    fListBox.updateListItems(sourceElem, fListBox.ulElement);\n                }\n                else {\n                    elems.forEach(function (ele) { detach(ele); });\n                }\n            }\n            else {\n                moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n                tListBox.mainList = tListBox.ulElement;\n            }\n            fListBox.updateMainList();\n            var tJsonData = [].slice.call(tListBox.jsonData);\n            tSortData = [].slice.call(tListBox.sortedData);\n            this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n            if (isKey) {\n                this.list.focus();\n            }\n            fListBox.listData = listData;\n            fListBox.sortedData = sortData;\n            index = (index) ? index : tListData.length;\n            for (var i = tempItems.length - 1; i >= 0; i--) {\n                tListData.splice(index, 0, tempItems[i]);\n                tJsonData.splice(index, 0, tempItems[i]);\n                tSortData.splice(index, 0, tempItems[i]);\n            }\n            tListBox.listData = tListData;\n            tListBox.jsonData = tJsonData;\n            tListBox.sortedData = tSortData;\n            if (isRefresh) {\n                var sourceElem = tListBox.renderItems(tListData, tListBox.fields);\n                tListBox.updateListItems(sourceElem, tListBox.ulElement);\n                tListBox.setSelection();\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            fListBox.updateSelectedOptions();\n            if (fListBox.listData.length === 0) {\n                fListBox.l10nUpdate();\n            }\n        }\n        if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n            fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n        }\n    };\n    ListBox.prototype.selectNextList = function (elems, dataLiIdx, dataIdx, inst) {\n        var childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n        var ele;\n        var liIdx;\n        var validIdx = -1;\n        if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n            liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n            ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n            validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n            if (validIdx > -1) {\n                (inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected));\n            }\n        }\n    };\n    ListBox.prototype.moveAllItemTo = function () {\n        this.moveAllData(this, this.getScopedListBox());\n    };\n    ListBox.prototype.moveAllItemFrom = function () {\n        this.moveAllData(this.getScopedListBox(), this);\n    };\n    ListBox.prototype.moveAllData = function (fListBox, tListBox, isKey, index) {\n        var listData = [].slice.call(tListBox.listData);\n        var jsonData = [].slice.call(tListBox.jsonData);\n        var isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        this.removeSelected(fListBox, fListBox.getSelectedItems());\n        var tempItems = [].slice.call(fListBox.jsonData);\n        var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        fListBox.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        if (tListBox.listData.length === 0) {\n            var noRecElem = tListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                tListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        if (isRefresh) {\n            var noRecElem = fListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                fListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        moveTo(fListBox.ulElement, tListBox.ulElement, \n        // eslint-disable-next-line prefer-spread\n        Array.apply(null, { length: fListBox.ulElement.childElementCount }).map(Number.call, Number), index);\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        if (isKey) {\n            this.list.focus();\n        }\n        index = (index) ? index : listData.length;\n        for (var i = 0; i < fListBox.listData.length; i++) {\n            listData.splice(index + i, 0, fListBox.listData[i]);\n        }\n        for (var i = 0; i < fListBox.jsonData.length; i++) {\n            jsonData.splice(index + i, 0, fListBox.jsonData[i]);\n        }\n        var fliCollections = [].slice.call(fListBox.liCollections);\n        var tliCollections = [].slice.call(tListBox.liCollections);\n        fListBox.liCollections = [];\n        if (index) {\n            var toColl = tliCollections.splice(0, index);\n            tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n        }\n        else {\n            tListBox.liCollections = tliCollections.concat(fliCollections);\n        }\n        fListBox.value = [];\n        listData = listData\n            .filter(function (data) { return data.isHeader !== true; });\n        tListBox.listData = tListBox.jsonData = listData;\n        if (fListBox.listData.length == fListBox.jsonData.length) {\n            fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n        }\n        else if (this.allowFiltering) {\n            for (var i = 0; i < fListBox.listData.length; i++) {\n                for (var j = 0; j < fListBox.jsonData.length; j++) {\n                    if (fListBox.listData[i] === fListBox.jsonData[j]) {\n                        fListBox.jsonData.splice(j, 1);\n                    }\n                }\n            }\n            fListBox.listData = fListBox.sortedData = [];\n        }\n        if (isRefresh) {\n            var sourceElem = tListBox.renderItems(listData, tListBox.fields);\n            tListBox.updateListItems(sourceElem, tListBox.ulElement);\n            this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        }\n        else {\n            tListBox.sortedData = listData;\n        }\n        fListBox.updateSelectedOptions();\n        if (fListBox.listData.length === 0) {\n            fListBox.l10nUpdate();\n        }\n    };\n    ListBox.prototype.changeData = function (fromIdx, toIdx, jsonToIdx, ele) {\n        var listData = [].slice.call(this.listData);\n        var jsonData = [].slice.call(this.jsonData);\n        var sortData = [].slice.call(this.sortedData);\n        var jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n        var sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n        var liColl = [].slice.call(this.liCollections);\n        listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n        jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n        sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n        liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n        this.listData = listData;\n        this.jsonData = jsonData;\n        this.liCollections = liColl;\n        this.sortedData = sortData;\n    };\n    ListBox.prototype.getSelectedItems = function () {\n        var ele = [];\n        if (this.selectionSettings.showCheckbox) {\n            [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach(function (cbox) {\n                ele.push(closest(cbox, '.' + 'e-list-item'));\n            });\n        }\n        else {\n            ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n        }\n        return ele;\n    };\n    ListBox.prototype.getScopedListBox = function () {\n        var _this = this;\n        var listObj;\n        if (this.scope) {\n            [].slice.call(document.querySelectorAll(this.scope)).forEach(function (ele) {\n                if (getComponent(ele, _this.getModuleName())) {\n                    listObj = getComponent(ele, _this.getModuleName());\n                }\n            });\n        }\n        return listObj;\n    };\n    ListBox.prototype.getGrabbedItems = function () {\n        for (var i = 0; i < this.value.length; i++) {\n            var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n            for (var j = 0; j < liColl.length; j++) {\n                if (this.value[i] === liColl[j].textContent) {\n                    liColl[j].classList.add('e-grabbed');\n                }\n            }\n        }\n        var elems = Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll('.e-grabbed'));\n        return elems;\n    };\n    ListBox.prototype.getDragArgs = function (args, isDragEnd) {\n        var elems = this.getGrabbedItems();\n        if (elems.length) {\n            if (isDragEnd) {\n                elems.push(args.target);\n            }\n        }\n        else {\n            elems = [args.target];\n        }\n        return { elements: elems, items: this.getDataByElems(elems) };\n    };\n    ListBox.prototype.onKeyDown = function (e) {\n        this.keyDownHandler(e);\n        e.stopPropagation();\n    };\n    ListBox.prototype.keyDownHandler = function (e) {\n        if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && !this.allowFiltering) {\n            if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n                return;\n            }\n            e.preventDefault();\n            if (e.keyCode === 32 && this.ulElement.children.length) {\n                this.selectHandler({\n                    target: this.ulElement.getElementsByClassName('e-focused')[0],\n                    ctrlKey: e.ctrlKey, shiftKey: e.shiftKey\n                });\n            }\n            else if (e.keyCode === 65 && e.ctrlKey) {\n                this.selectAll();\n            }\n            else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n                this.moveUpDown(e.keyCode === 38 ? true : false, true);\n            }\n            else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n                var listObj = this.tBListBox || this.getScopedListBox();\n                if (e.keyCode === 39) {\n                    if (e.shiftKey) {\n                        this.moveAllData(this, listObj, true);\n                    }\n                    else {\n                        this.moveData(this, listObj, true);\n                    }\n                }\n                else {\n                    if (e.shiftKey) {\n                        this.moveAllData(listObj, this, true);\n                    }\n                    else {\n                        this.moveData(listObj, this, true);\n                    }\n                }\n            }\n            else if (e.keyCode !== 37 && e.keyCode !== 39 && e.code !== \"KeyA\") {\n                this.upDownKeyHandler(e);\n            }\n        }\n        else if (this.allowFiltering) {\n            if (e.keyCode === 40 || e.keyCode === 38) {\n                this.upDownKeyHandler(e);\n            }\n        }\n    };\n    ListBox.prototype.upDownKeyHandler = function (e) {\n        var ul = this.ulElement;\n        var defaultIdx = (e.keyCode === 40 || e.keyCode === 36) ? 0 : ul.childElementCount - 1;\n        var fliIdx = defaultIdx;\n        var fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n        if (fli) {\n            if (e.keyCode !== 35 && e.keyCode !== 36) {\n                fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n                if (e.keyCode === 40) {\n                    fliIdx++;\n                }\n                else {\n                    fliIdx--;\n                }\n                if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n                    return;\n                }\n            }\n            removeClass([fli], 'e-focused');\n        }\n        var cli = ul.children[fliIdx];\n        if (cli) {\n            fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n            if (fliIdx === -1) {\n                addClass([fli], 'e-focused');\n                return;\n            }\n            ul.children[fliIdx].focus();\n            ul.children[fliIdx].classList.add('e-focused');\n            if (!e.ctrlKey || !this.selectionSettings.showCheckbox && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n                this.selectHandler({ target: ul.children[fliIdx], ctrlKey: e.ctrlKey, shiftKey: e.shiftKey }, true);\n            }\n            if (this.selectionSettings.showCheckbox && e.ctrlKey && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n                var selectedidx = Array.prototype.indexOf.call(ul.children, fli);\n                var sidx = e.code === \"Home\" ? 0 : selectedidx;\n                var eidx = e.code === \"Home\" ? selectedidx : ul.children.length - 1;\n                for (var i = sidx; i <= eidx; i++) {\n                    var item = ul.children[i];\n                    this.notify('updatelist', { li: item, e: {\n                            target: this.ulElement.getElementsByClassName('e-focused')[0],\n                            ctrlKey: e.ctrlKey, shiftKey: e.shiftKey\n                        }, module: 'listbox' });\n                }\n            }\n        }\n    };\n    ListBox.prototype.KeyUp = function (e) {\n        var _this = this;\n        var char = String.fromCharCode(e.keyCode);\n        var isWordCharacter = char.match(/\\w/);\n        if (!isNullOrUndefined(isWordCharacter)) {\n            this.isValidKey = true;\n        }\n        this.isValidKey = (e.keyCode === 8) || (e.keyCode === 46) || this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                default:\n                    if (this.allowFiltering) {\n                        var eventArgsData_1 = {\n                            preventDefaultAction: false,\n                            text: this.targetElement(),\n                            updateData: function (dataSource, query, fields) {\n                                if (eventArgsData_1.cancel) {\n                                    return;\n                                }\n                                _this.isFiltered = true;\n                                _this.remoteFilterAction = true;\n                                _this.dataUpdater(dataSource, query, fields);\n                            },\n                            event: e,\n                            cancel: false\n                        };\n                        this.trigger('filtering', eventArgsData_1, function (args) {\n                            _this.isDataFetched = false;\n                            if (args.cancel || (_this.filterInput.value !== '' && _this.isFiltered)) {\n                                return;\n                            }\n                            if (!args.cancel && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                                _this.inputString = _this.filterInput.value;\n                                _this.filteringAction(_this.jsonData, new Query(), _this.fields);\n                            }\n                            if (!_this.isFiltered && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                                _this.dataUpdater(_this.jsonData, new Query(), _this.fields);\n                            }\n                        });\n                    }\n            }\n        }\n    };\n    /**\n     * To filter the data from given data source by using query.\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}.\n     */\n    ListBox.prototype.filter = function (dataSource, query, fields) {\n        this.isCustomFiltering = true;\n        this.filteringAction(dataSource, query, fields);\n    };\n    ListBox.prototype.filteringAction = function (dataSource, query, fields) {\n        this.resetList(dataSource, fields, query);\n    };\n    ListBox.prototype.targetElement = function () {\n        this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n        return this.targetInputElement.value;\n    };\n    ListBox.prototype.dataUpdater = function (dataSource, query, fields) {\n        this.isDataFetched = false;\n        var backCommand = true;\n        if (this.targetElement().trim() === '') {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (backCommand) {\n                this.remoteCustomValue = false;\n                this.onActionComplete(list, this.jsonData);\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.selectionSettings.showCheckbox, e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n        }\n    };\n    ListBox.prototype.focusOutHandler = function () {\n        var ele = this.list.getElementsByClassName('e-focused')[0];\n        if (ele) {\n            ele.classList.remove('e-focused');\n        }\n        if (this.allowFiltering) {\n            this.refreshClearIcon();\n        }\n    };\n    ListBox.prototype.getValidIndex = function (cli, index, keyCode) {\n        var cul = this.ulElement;\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            if (keyCode === 40 || keyCode === 36) {\n                index++;\n            }\n            else {\n                index--;\n            }\n        }\n        if (index < 0 || index === cul.childElementCount) {\n            return -1;\n        }\n        cli = cul.querySelectorAll('.e-list-item')[index];\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            index = this.getValidIndex(cli, index, keyCode);\n        }\n        return index;\n    };\n    ListBox.prototype.updateSelectedOptions = function () {\n        var _this = this;\n        var selectedOptions = [];\n        var values = [];\n        extend(values, this.value);\n        this.getSelectedItems().forEach(function (ele) {\n            if (!ele.classList.contains('e-grabbed')) {\n                selectedOptions.push(_this.getFormattedValue(ele.getAttribute('data-value')));\n            }\n        });\n        if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n            if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n                for (var i = 0; i < selectedOptions.length; i++) {\n                    if (values.indexOf(selectedOptions[i]) > -1) {\n                        continue;\n                    }\n                    else {\n                        values.push(selectedOptions[i]);\n                    }\n                }\n                this.setProperties({ value: values }, true);\n            }\n            else {\n                this.setProperties({ value: selectedOptions }, true);\n            }\n        }\n        this.updateSelectTag();\n        this.updateToolBarState();\n        if (this.tBListBox) {\n            this.tBListBox.updateToolBarState();\n        }\n    };\n    ListBox.prototype.clearSelection = function (values) {\n        var _this = this;\n        if (values === void 0) { values = this.value; }\n        if (this.selectionSettings.showCheckbox) {\n            var dvalue_1;\n            this.getSelectedItems().forEach(function (li) {\n                dvalue_1 = _this.getFormattedValue(li.getAttribute('data-value'));\n                if (values.indexOf(dvalue_1) < 0) {\n                    li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n                    li.getElementsByClassName('e-checkbox-wrapper')[0].removeAttribute('aria-checked');\n                    li.removeAttribute('aria-selected');\n                }\n            });\n        }\n    };\n    ListBox.prototype.setSelection = function (values, isSelect, isText) {\n        var _this = this;\n        if (values === void 0) { values = this.value; }\n        if (isSelect === void 0) { isSelect = true; }\n        if (isText === void 0) { isText = false; }\n        var li;\n        var liselect;\n        if (values) {\n            values.forEach(function (value) {\n                var text;\n                if (isText) {\n                    text = _this.getValueByText(value);\n                }\n                else {\n                    text = value;\n                }\n                li = _this.list.querySelector('[data-value=\"' + text + '\"]');\n                if (li) {\n                    if (_this.selectionSettings.showCheckbox) {\n                        liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n                    }\n                    else {\n                        liselect = li.classList.contains('e-selected');\n                    }\n                    if (!isSelect && liselect || isSelect && !liselect && li) {\n                        if (_this.selectionSettings.showCheckbox) {\n                            _this.notify('updatelist', { li: li, module: 'listbox' });\n                        }\n                        else {\n                            if (isSelect) {\n                                li.classList.add(cssClass.selected);\n                                li.setAttribute('aria-selected', 'true');\n                            }\n                            else {\n                                li.classList.remove(cssClass.selected);\n                                li.removeAttribute('aria-selected');\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        this.updateSelectTag();\n    };\n    ListBox.prototype.updateSelectTag = function () {\n        var ele = this.getSelectTag();\n        var innerHTML = '';\n        ele.innerHTML = '';\n        if (this.value) {\n            for (var i = 0, len = this.value.length; i < len; i++) {\n                innerHTML += '<option selected value=\"' + this.value[i] + '\"></option>';\n            }\n            ele.innerHTML += innerHTML;\n        }\n        this.checkSelectAll();\n    };\n    ListBox.prototype.checkDisabledState = function (inst) {\n        return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n    };\n    ListBox.prototype.updateToolBarState = function () {\n        var _this = this;\n        if (this.toolbarSettings.items.length) {\n            var listObj_1 = this.getScopedListBox();\n            var wrap_1 = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n            this.toolbarSettings.items.forEach(function (value) {\n                var btn = wrap_1.querySelector('[data-value=\"' + value + '\"]');\n                switch (value) {\n                    case 'moveAllTo':\n                        btn.disabled = _this.checkDisabledState(_this);\n                        break;\n                    case 'moveAllFrom':\n                        btn.disabled = _this.checkDisabledState(listObj_1);\n                        break;\n                    case 'moveFrom':\n                        btn.disabled = listObj_1.value && listObj_1.value.length ? false : true;\n                        break;\n                    case 'moveUp':\n                        btn.disabled = _this.value && _this.value.length\n                            && !_this.isSelected(_this.ulElement.children[0]) ? false : true;\n                        break;\n                    case 'moveDown':\n                        btn.disabled = _this.value && _this.value.length\n                            && !_this.isSelected(_this.ulElement.children[_this.ulElement.childElementCount - 1]) ? false : true;\n                        break;\n                    default:\n                        btn.disabled = _this.value && _this.value.length ? false : true;\n                        break;\n                }\n            });\n        }\n    };\n    ListBox.prototype.setCheckboxPosition = function () {\n        var listWrap = this.list;\n        if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n            listWrap.classList.remove('e-right');\n        }\n        if (this.selectionSettings.checkboxPosition === 'Right') {\n            listWrap.classList.add('e-right');\n        }\n    };\n    ListBox.prototype.showCheckbox = function (showCheckbox) {\n        var index = 0;\n        var liColl = this.list.lastElementChild.querySelectorAll('li');\n        var liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n        if (showCheckbox) {\n            this.ulElement = this.renderItems(this.listData, this.fields);\n            this.mainList = this.ulElement;\n            this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n            this.list.appendChild(this.ulElement);\n            if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                var l10nShow = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                this.showSelectAll = true;\n                this.selectAllText = l10nShow.getConstant('selectAllText');\n                this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n                this.popupWrapper = this.list;\n                this.checkBoxSelectionModule.checkAllParent = null;\n                this.notify('selectAll', {});\n                this.checkSelectAll();\n            }\n        }\n        else {\n            if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n            }\n            for (index; index < liCollLen; index++) {\n                if (liColl[index].classList.contains('e-list-item')) {\n                    liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n                }\n                if (liColl[index].hasAttribute('aria-selected')) {\n                    liColl[index].removeAttribute('aria-selected');\n                }\n            }\n            this.mainList = this.ulElement;\n        }\n        this.value = [];\n    };\n    ListBox.prototype.isSelected = function (ele) {\n        if (!isNullOrUndefined(ele)) {\n            return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n        }\n        else {\n            return false;\n        }\n    };\n    ListBox.prototype.getSelectTag = function () {\n        return this.list.getElementsByClassName('e-hidden-select')[0];\n    };\n    ListBox.prototype.getToolElem = function () {\n        return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n    };\n    ListBox.prototype.formResetHandler = function () {\n        this.value = this.initialSelectedOptions;\n    };\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - Module name\n     */\n    ListBox.prototype.getModuleName = function () {\n        return 'listbox';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    ListBox.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    ListBox.prototype.getLocaleName = function () {\n        return 'listbox';\n    };\n    ListBox.prototype.destroy = function () {\n        this.unwireEvents();\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.innerHTML = '';\n        }\n        else {\n            this.element.style.display = 'inline-block';\n            if (this.toolbarSettings.items.length) {\n                this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n                detach(this.list.nextElementSibling);\n            }\n            this.list.parentElement.insertBefore(this.element, this.list);\n        }\n        _super.prototype.destroy.call(this);\n        this.enableRtlElements = [];\n        this.liCollections = null;\n        this.list = null;\n        this.ulElement = null;\n        this.mainList = null;\n        this.spinner = null;\n        this.rippleFun = null;\n        if (this.itemTemplate) {\n            this.clearTemplate();\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBoxModel} newProp - Specifies the new properties.\n     * @param {ListBoxModel} oldProp - Specifies the old properties.\n     * @returns {void}\n     * @private\n     */\n    ListBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([wrap], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([wrap], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.list.classList.add('e-rtl');\n                    }\n                    else {\n                        this.list.classList.remove('e-rtl');\n                    }\n                    break;\n                case 'value':\n                    removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n                    this.clearSelection(this.value);\n                    this.setSelection();\n                    break;\n                case 'height':\n                    this.setHeight();\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'allowDragAndDrop':\n                    if (newProp.allowDragAndDrop) {\n                        this.initDraggable();\n                    }\n                    else {\n                        getComponent(this.ulElement, 'sortable').destroy();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this.allowFiltering) {\n                        this.setFiltering();\n                    }\n                    else {\n                        this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n                        this.filterParent = null;\n                        removeClass([this.list], 'e-filter-list');\n                    }\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        if (this.filterInput) {\n                            Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n                        }\n                    }\n                    break;\n                case 'scope':\n                    if (this.allowDragAndDrop) {\n                        getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n                    }\n                    if (this.toolbarSettings.items.length) {\n                        if (oldProp.scope) {\n                            getComponent(document.querySelector(oldProp.scope), this.getModuleName())\n                                .tBListBox = null;\n                        }\n                        if (newProp.scope) {\n                            getComponent(document.querySelector(newProp.scope), this.getModuleName())\n                                .tBListBox = this;\n                        }\n                    }\n                    break;\n                case 'toolbarSettings': {\n                    var ele = void 0;\n                    var pos = newProp.toolbarSettings.position;\n                    var toolElem = this.getToolElem();\n                    if (pos) {\n                        removeClass([wrap], ['e-right', 'e-left']);\n                        wrap.classList.add('e-' + pos.toLowerCase());\n                        if (pos === 'Left') {\n                            wrap.insertBefore(toolElem, this.list);\n                        }\n                        else {\n                            wrap.appendChild(toolElem);\n                        }\n                    }\n                    if (newProp.toolbarSettings.items) {\n                        if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                            ele = this.list.parentElement;\n                            ele.parentElement.insertBefore(this.list, ele);\n                            detach(ele);\n                        }\n                        this.initToolbarAndStyles();\n                        this.wireToolbarEvent();\n                    }\n                    break;\n                }\n                case 'selectionSettings': {\n                    var showSelectAll = newProp.selectionSettings.showSelectAll;\n                    var showCheckbox = newProp.selectionSettings.showCheckbox;\n                    if (!isNullOrUndefined(showSelectAll)) {\n                        this.showSelectAll = showSelectAll;\n                        if (this.showSelectAll) {\n                            var l10nSel = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                            this.checkBoxSelectionModule.checkAllParent = null;\n                            this.showSelectAll = true;\n                            this.selectAllText = l10nSel.getConstant('selectAllText');\n                            this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                            this.popupWrapper = this.list;\n                        }\n                        this.notify('selectAll', {});\n                        this.checkSelectAll();\n                    }\n                    if (!isNullOrUndefined(showCheckbox)) {\n                        this.showCheckbox(showCheckbox);\n                    }\n                    if (this.selectionSettings.showCheckbox) {\n                        this.setCheckboxPosition();\n                    }\n                    break;\n                }\n                case 'dataSource':\n                    this.isDataSourceUpdate = true;\n                    this.jsonData = [].slice.call(this.dataSource);\n                    break;\n            }\n        }\n    };\n    var ListBox_1;\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"cssClass\", void 0);\n    __decorate$6([\n        Property([])\n    ], ListBox.prototype, \"value\", void 0);\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"height\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"allowDragAndDrop\", void 0);\n    __decorate$6([\n        Property(1000)\n    ], ListBox.prototype, \"maximumSelectionLength\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"allowFiltering\", void 0);\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"scope\", void 0);\n    __decorate$6([\n        Property(true)\n    ], ListBox.prototype, \"ignoreCase\", void 0);\n    __decorate$6([\n        Property(null)\n    ], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"beforeItemRender\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"filtering\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"select\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"change\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"beforeDrop\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"dragStart\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"drag\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"drop\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"dataBound\", void 0);\n    __decorate$6([\n        Property(null)\n    ], ListBox.prototype, \"groupTemplate\", void 0);\n    __decorate$6([\n        Property('Request failed')\n    ], ListBox.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$6([\n        Property(1000)\n    ], ListBox.prototype, \"zIndex\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"ignoreAccent\", void 0);\n    __decorate$6([\n        Complex({}, ToolbarSettings)\n    ], ListBox.prototype, \"toolbarSettings\", void 0);\n    __decorate$6([\n        Complex({}, SelectionSettings)\n    ], ListBox.prototype, \"selectionSettings\", void 0);\n    ListBox = ListBox_1 = __decorate$6([\n        NotifyPropertyChanges\n    ], ListBox);\n    return ListBox;\n}(DropDownBase));\nvar listBoxClasses = {\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    clearIcon: 'e-clear-icon'\n};\n\n/**\n * export all modules from current location\n */\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\nvar Mention = /** @__PURE__ @class */ (function (_super) {\n    __extends$7(Mention, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {MentionModel} options - Specifies the MentionComponent model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function Mention(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n     * @param {MentionModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'minLength':\n                    this.minLength = newProp.minLength;\n                    break;\n                case 'suffixText':\n                    this.suffixText = newProp.suffixText;\n                    break;\n                case 'allowSpaces':\n                    this.allowSpaces = newProp.allowSpaces;\n                    break;\n                case 'mentionChar':\n                    this.mentionChar = newProp.mentionChar;\n                    break;\n                case 'showMentionChar':\n                    this.showMentionChar = newProp.showMentionChar;\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n            }\n        }\n    };\n    Mention.prototype.updateCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.setCssClass(newClass, [this.inputElement], oldClass);\n        if (this.popupObj) {\n            this.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    Mention.prototype.setCssClass = function (cssClass$$1, elements, oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(cssClass$$1) && cssClass$$1 !== '') {\n            addClass(elements, cssClass$$1.split(' '));\n        }\n    };\n    Mention.prototype.initializeData = function () {\n        this.isSelected = false;\n        this.isFiltered = false;\n        this.beforePopupOpen = false;\n        this.initRemoteRender = false;\n        this.isPopupOpen = false;\n        this.isCollided = false;\n        this.lineBreak = false;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.preRender = function () {\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.render = function () {\n        this.inputElement = !isNullOrUndefined(this.target) ? ((typeof this.target) === 'string') ?\n            document.querySelector(this.target) : this.target : this.element;\n        if (this.isContentEditable(this.inputElement)) {\n            this.inputElement.setAttribute('contenteditable', 'true');\n            addClass([this.inputElement], ['e-mention']);\n            if (isNullOrUndefined(this.target)) {\n                addClass([this.inputElement], ['e-editable-element']);\n            }\n        }\n        this.queryString = this.elementValue();\n        this.wireEvent();\n    };\n    Mention.prototype.wireEvent = function () {\n        EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n        this.bindCommonEvent();\n    };\n    Mention.prototype.unWireEvent = function () {\n        EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n        this.unBindCommonEvent();\n    };\n    Mention.prototype.bindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.inputElement, {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.hideSpinner = function () {\n        this.hideWaitingSpinner();\n    };\n    Mention.prototype.hideWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n        }\n        if (!isNullOrUndefined(this.spinnerTemplate)) {\n            detach(this.spinnerTemplateElement);\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.popupObj)) {\n            if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n                this.spinnerElement = this.popupObj.element;\n                createSpinner({\n                    target: this.spinnerElement,\n                    width: Browser.isDevice ? '16px' : '14px'\n                }, this.createElement);\n                showSpinner(this.spinnerElement);\n            }\n            if (!isNullOrUndefined(this.spinnerTemplate)) {\n                this.setSpinnerTemplate();\n                this.popupObj.element.appendChild(this.spinnerTemplateElement);\n            }\n        }\n    };\n    Mention.prototype.keyActionHandler = function (e) {\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        var isTabAction = e.action === 'tab' || e.action === 'close';\n        if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n            this.renderList();\n        }\n        if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n            isNavigation && this.liCollections.length === 0) || this.isRequested) {\n            return;\n        }\n        if (e.action === 'escape') {\n            e.preventDefault();\n        }\n        this.isSelected = e.action === 'escape' ? false : this.isSelected;\n        switch (e.action) {\n            case 'down':\n            case 'up':\n                this.updateUpDownAction(e);\n                break;\n            case 'tab':\n                if (this.isPopupOpen) {\n                    var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n                    if (li) {\n                        this.setSelection(li, e);\n                    }\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n                        this.setValue(e);\n                    }\n                }\n                break;\n            case 'escape':\n                if (this.isPopupOpen) {\n                    this.hidePopup(e);\n                }\n                break;\n        }\n    };\n    Mention.prototype.updateUpDownAction = function (e) {\n        var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n            if (!isNullOrUndefined(li)) {\n                var value = this.getFormattedValue(li.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n            }\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n            index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        if (this.isPopupOpen) {\n            e.preventDefault();\n        }\n    };\n    Mention.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    Mention.prototype.unBindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n    };\n    Mention.prototype.onKeyUp = function (e) {\n        var rangetextContent;\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n            rangetextContent = this.range.startContainer.textContent.split('');\n        }\n        var currentRange = this.getTextRange();\n        var lastWordRange = this.getLastLetter(currentRange);\n        var Regex = new RegExp(this.mentionChar, 'g');\n        var charRegex = new RegExp('[a-zA-Z]', 'g');\n        if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n            return;\n        }\n        if ((!currentRange || !lastWordRange) || e.code === 'Enter' || e.keyCode === 27 ||\n            (lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1) ||\n            (this.isContentEditable(this.inputElement) && this.range.startContainer &&\n                this.range.startContainer.previousElementSibling && this.range.startContainer.textContent.split('').length > 0 &&\n                (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 ||\n                    this.range.startContainer.nodeType === 1))) {\n            if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1\n                && !this.isMatchedText() && (currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ') &&\n                (this.list && this.list.querySelectorAll('ul').length > 0)) {\n                this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n                this.searchLists(e);\n            }\n            else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange)) {\n                this.hidePopup();\n                this.lineBreak = true;\n            }\n            return;\n        }\n        this.queryString = lastWordRange.replace(this.mentionChar, '');\n        if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) &&\n            this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n            this.searchLists(e);\n            if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n                if (!this.isContentEditable(this.inputElement)) {\n                    this.showPopup();\n                }\n                else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement) {\n                    this.showPopup();\n                }\n            }\n        }\n        else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj ||\n            (isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) ||\n                !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element)))) {\n            if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n                this.searchLists(e);\n            }\n            this.resetList(this.dataSource, this.fields);\n            if (isNullOrUndefined(this.list)) {\n                this.initValue();\n            }\n            if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n                this.showPopup();\n                if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n                    this.showWaitingSpinner();\n                }\n                this.lineBreak = false;\n            }\n        }\n        else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 &&\n            e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8) {\n            this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n            this.searchLists(e);\n        }\n        else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n            this.resetList(this.dataSource, this.fields);\n        }\n    };\n    Mention.prototype.isMatchedText = function () {\n        var isMatched = false;\n        for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n            if (this.getTextRange() &&\n                this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n                isMatched = true;\n            }\n        }\n        return isMatched;\n    };\n    Mention.prototype.getCurrentRange = function () {\n        this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n        return this.range;\n    };\n    Mention.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isDataFetched = false;\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.render.call(this);\n            this.unWireListEvents();\n            this.wireListEvents();\n        }\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.elementValue(),\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this.isFiltered = true;\n                _this.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n                _this.filterAction(_this.dataSource, null, _this.fields);\n            }\n        });\n    };\n    Mention.prototype.filterAction = function (dataSource, query, fields) {\n        this.beforePopupOpen = true;\n        if (this.queryString !== '' && (this.queryString.length >= this.minLength)) {\n            this.resetList(dataSource, fields, query);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.beforePopupOpen = false;\n        }\n        this.setDataIndex();\n        this.renderReactTemplates();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isActive) {\n            var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n            if (focusItem) {\n                focusItem.classList.add(dropDownBaseClasses.selected);\n                this.selectedLI = focusItem;\n                var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n                this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n            }\n        }\n    };\n    Mention.prototype.setDataIndex = function () {\n        for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n            this.liCollections[i].setAttribute('data-index', i.toString());\n        }\n    };\n    Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                }\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n        return fields;\n    };\n    Mention.prototype.elementValue = function () {\n        if (!this.isContentEditable(this.inputElement)) {\n            return this.inputElement.value.replace(this.mentionChar, '');\n        }\n        else {\n            return this.inputElement.textContent.replace(this.mentionChar, '');\n        }\n    };\n    Mention.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ?\n            this.elementValue() : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 25, checked the condition\n            if (this.suggestionCount !== 25) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    };\n    Mention.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    Mention.prototype.getTextRange = function () {\n        var text;\n        if (!this.isContentEditable(this.inputElement)) {\n            var component = this.inputElement;\n            if (!isNullOrUndefined(component)) {\n                var startPos = component.selectionStart;\n                if (component.value && startPos >= 0) {\n                    text = component.value.substring(0, startPos);\n                }\n            }\n        }\n        else {\n            var selectedElem = this.range.startContainer;\n            if (!isNullOrUndefined(selectedElem)) {\n                var workingNodeContent = selectedElem.textContent;\n                var selectStartOffset = this.range.startOffset;\n                if (workingNodeContent && selectStartOffset >= 0) {\n                    text = workingNodeContent.substring(0, selectStartOffset);\n                }\n            }\n        }\n        return text;\n    };\n    Mention.prototype.getLastLetter = function (text) {\n        if (isNullOrUndefined(text)) {\n            return '';\n        }\n        var textValue = text.replace(/\\u00A0/g, ' ');\n        var words = textValue.split(/\\s+/);\n        var wordCnt = words.length - 1;\n        return words[wordCnt].trim();\n    };\n    Mention.prototype.isContentEditable = function (element) {\n        return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showPopup = function () {\n        this.renderPopup();\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.hidePopup = function (e) {\n        this.removeSelection();\n        this.closePopup(0, e);\n    };\n    Mention.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('closed', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && _this.popupObj) {\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    Mention.prototype.renderPopup = function () {\n        var _this = this;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle_1 = isNullOrUndefined(_this.target) ? _this.createElement('div', {\n                    id: _this.inputElement.id + '_popup', className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n                }) : _this.element;\n                if (!isNullOrUndefined(_this.target)) {\n                    popupEle_1.id = _this.inputElement.id + '_popup';\n                    addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n                }\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n                    var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n                    if (!isNullOrUndefined(li)) {\n                        _this.selectedLI = li;\n                        var value = _this.getFormattedValue(li.getAttribute('data-value'));\n                        _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n                    }\n                }\n                append([_this.list], popupEle_1);\n                if ((!_this.popupObj || !document.body.contains(_this.popupObj.element)) || !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n                    document.body.appendChild(popupEle_1);\n                }\n                var coordinates_1;\n                popupEle_1.style.visibility = 'hidden';\n                if (_this.popupHeight !== 'auto') {\n                    _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n                    popupEle_1.style.maxHeight = formatUnit(_this.popupHeight);\n                }\n                else {\n                    popupEle_1.style.height = 'auto';\n                }\n                var offsetValue = 0;\n                var left = 0;\n                _this.initializePopup(popupEle_1, offsetValue, left);\n                _this.checkCollision(popupEle_1);\n                popupEle_1.style.visibility = 'visible';\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n                _this.trigger('opened', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        _this.renderReactTemplates();\n                        _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.inputElement : null);\n                        coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n                        if (!_this.isCollided) {\n                            popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n                        }\n                        else {\n                            popupEle_1.style.left = formatUnit(coordinates_1.left);\n                            _this.isCollided = false;\n                        }\n                        popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    Mention.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'mention'))) {\n            var collision = isCollide(popupEle);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n                this.isCollided = true;\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    Mention.prototype.getTriggerCharPosition = function () {\n        var mostRecentTriggerCharPos;\n        var currentRange = this.getTextRange();\n        if (currentRange !== undefined && currentRange !== null) {\n            mostRecentTriggerCharPos = 0;\n            var idx = currentRange.lastIndexOf(this.mentionChar);\n            if (idx >= mostRecentTriggerCharPos) {\n                mostRecentTriggerCharPos = idx;\n            }\n        }\n        return mostRecentTriggerCharPos;\n    };\n    Mention.prototype.initializePopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputElement, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'top', Y: 'left' }, actionOnScroll: 'hide',\n            zIndex: this.zIndex,\n            close: function () {\n                _this.destroyPopup();\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                _this.setDataIndex();\n            }\n        });\n    };\n    Mention.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    Mention.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.popupObj.destroy();\n        if (isNullOrUndefined(this.target)) {\n            detach(this.popupObj.element);\n        }\n        else {\n            this.popupObj.element.innerHTML = '';\n            this.popupObj.element.removeAttribute('style');\n            this.popupObj.element.removeAttribute('aria-disabled');\n        }\n    };\n    Mention.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n            this.hidePopup(e);\n        }\n    };\n    Mention.prototype.getCoordinates = function (element, position) {\n        var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n        var div;\n        var span;\n        var range;\n        var globalRange;\n        var coordinates;\n        var computed;\n        var rect;\n        if (!this.isContentEditable(this.inputElement)) {\n            div = this.createElement('div', { className: 'e-form-mirror-div' });\n            document.body.appendChild(div);\n            computed = getComputedStyle(element);\n            div.style.position = 'absolute';\n            div.style.visibility = 'hidden';\n            properties.forEach(function (prop) {\n                div.style[prop] = computed[prop];\n            });\n            div.textContent = element.value.substring(0, position);\n            if (this.inputElement.nodeName === 'INPUT') {\n                div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n            }\n            span = this.createElement('span');\n            span.textContent = element.value.substring(position) || '.';\n            div.appendChild(span);\n            rect = element.getBoundingClientRect();\n        }\n        else {\n            var selectedNodePosition = this.getTriggerCharPosition();\n            globalRange = this.range;\n            range = document.createRange();\n            range.setStart(globalRange.startContainer, selectedNodePosition);\n            range.setEnd(globalRange.startContainer, selectedNodePosition);\n            range.collapse(false);\n            rect = range.getBoundingClientRect();\n        }\n        var doc = document.documentElement;\n        var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n        if (!this.isContentEditable(this.inputElement)) {\n            coordinates = {\n                top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) +\n                    parseInt(computed.fontSize, 10) + 3 - element.scrollTop,\n                left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n            };\n            document.body.removeChild(div);\n        }\n        else {\n            coordinates = {\n                top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize),\n                left: rect.left + windowLeft\n            };\n        }\n        return coordinates;\n    };\n    \n    Mention.prototype.initValue = function () {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    Mention.prototype.updateValues = function () {\n        var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(li)) {\n            this.setSelection(li, null);\n        }\n    };\n    Mention.prototype.renderList = function () {\n        _super.prototype.render.call(this);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    Mention.prototype.wireListEvents = function () {\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.unWireListEvents = function () {\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    };\n    Mention.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.setSelection(li, e);\n        var delay = 100;\n        this.closePopup(delay, e);\n        this.inputElement.focus();\n    };\n    Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!preventSelect && !isNullOrUndefined(e)) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                }\n                else {\n                    _this.selectEventCallback(li, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    Mention.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    Mention.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n            this.setScrollPosition(e);\n        }\n        if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n            return;\n        }\n        if (isNullOrUndefined(e) || this.setValue(e)) {\n            return;\n        }\n    };\n    Mention.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    Mention.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    Mention.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop;\n            }\n        }\n    };\n    Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        if (selectLi) {\n            addClass([li], dropDownBaseClasses.selected);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    Mention.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.setValue = function (e) {\n        var dataItem = this.getItemData();\n        var textSuffix;\n        var value;\n        var endPos;\n        var range;\n        var globalRange;\n        var selection = this.inputElement.ownerDocument.getSelection();\n        var startPos = this.getTriggerCharPosition();\n        textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n        if (dataItem.value !== null) {\n            value = this.mentionVal(dataItem.text);\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            var myField = this.inputElement;\n            var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n            value += textSuffix;\n            endPos = startPos + this.mentionChar.length;\n            endPos += currentTriggerSnippet.length;\n            myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n            myField.selectionStart = startPos + value.length;\n            myField.selectionEnd = startPos + value.length;\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n            return true;\n        }\n        else {\n            endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n            if (this.range && (this.range.startContainer.textContent.trim() !== this.mentionChar)) {\n                endPos = this.range.endOffset;\n            }\n            globalRange = this.range;\n            range = document.createRange();\n            range.setStart(globalRange.startContainer, startPos);\n            range.setEnd(globalRange.startContainer, endPos);\n            range.deleteContents();\n            var element = this.createElement('div');\n            element.innerHTML = value;\n            var frag = document.createDocumentFragment();\n            var node = void 0;\n            var lastNode = void 0;\n            while (node = element.firstChild) {\n                lastNode = frag.appendChild(node);\n            }\n            range.insertNode(frag);\n            if (lastNode) {\n                range = range.cloneRange();\n                range.setStartAfter(lastNode);\n                range.collapse(true);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n            return true;\n        }\n    };\n    Mention.prototype.mentionVal = function (value) {\n        var showChar = this.showMentionChar ? this.mentionChar : '';\n        if (!isNullOrUndefined(this.displayTemplate)) {\n            value = this.setDisplayTemplate();\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n        }\n        else {\n            return showChar + value;\n        }\n    };\n    Mention.prototype.setDisplayTemplate = function () {\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['displayTemplate']);\n            if (this.displayTempElement) {\n                detach(this.displayTempElement);\n                this.displayTempElement = null;\n            }\n        }\n        if (!this.displayTempElement) {\n            this.displayTempElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.displayTempElement.innerHTML = '';\n        }\n        compiledString = compile(this.displayTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n        if (displayCompTemp && displayCompTemp.length > 0) {\n            for (var i = 0; i < displayCompTemp.length; i++) {\n                this.displayTempElement.appendChild(displayCompTemp[i]);\n            }\n        }\n        this.renderReactTemplates();\n        return this.displayTempElement.innerHTML;\n    };\n    Mention.prototype.setSpinnerTemplate = function () {\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['spinnerTemplate']);\n            if (this.spinnerTemplateElement) {\n                detach(this.spinnerTemplateElement);\n                this.spinnerTemplateElement = null;\n            }\n        }\n        if (!this.spinnerTemplateElement) {\n            this.spinnerTemplateElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.spinnerTemplateElement.innerHTML = '';\n        }\n        compiledString = compile(this.spinnerTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n        if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n            for (var i = 0; i < spinnerCompTemp.length; i++) {\n                this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n            }\n        }\n        this.renderReactTemplates();\n    };\n    Mention.prototype.onChangeEvent = function (eve) {\n        this.isSelected = false;\n        var items = this.detachMentionChanges(this.itemData);\n        var preItems;\n        if (typeof this.previousItemData === 'string' ||\n            typeof this.previousItemData === 'boolean' ||\n            typeof this.previousItemData === 'number') {\n            preItems = Object.defineProperties({}, {\n                value: {\n                    value: this.previousItemData,\n                    enumerable: true\n                },\n                text: {\n                    value: this.previousItemData,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            preItems = this.previousItemData;\n        }\n        var eventArgs = {\n            e: eve,\n            item: this.item,\n            itemData: items,\n            previousItem: this.previousSelectedLI,\n            previousItemData: preItems,\n            isInteracted: eve ? true : false,\n            value: this.item.innerHTML,\n            element: this.inputElement\n        };\n        this.trigger('change', eventArgs);\n    };\n    Mention.prototype.detachMentionChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    Mention.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    Mention.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    Mention.prototype.setHover = function (li) {\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    Mention.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    Mention.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    Mention.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.search = function (text, positionX, positionY) {\n        if ((this.ignoreCase && (text === this.elementValue() || text === this.elementValue().toLowerCase()))\n            || !this.ignoreCase && text === this.elementValue()) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            return;\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.renderList();\n            this.renderPopup();\n        }\n        else {\n            this.showPopup();\n        }\n        this.popupObj.element.style.left = formatUnit(positionX);\n        this.popupObj.element.style.top = formatUnit(positionY);\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    Mention.prototype.destroy = function () {\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    Mention.prototype.getLocaleName = function () {\n        return 'mention';\n    };\n    Mention.prototype.getNgDirective = function () {\n        return 'EJS-MENTION';\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    Mention.prototype.getModuleName = function () {\n        return 'mention';\n    };\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"cssClass\", void 0);\n    __decorate$7([\n        Property('@')\n    ], Mention.prototype, \"mentionChar\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"showMentionChar\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"allowSpaces\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"suffixText\", void 0);\n    __decorate$7([\n        Property(25)\n    ], Mention.prototype, \"suggestionCount\", void 0);\n    __decorate$7([\n        Property(0)\n    ], Mention.prototype, \"minLength\", void 0);\n    __decorate$7([\n        Property('None')\n    ], Mention.prototype, \"sortOrder\", void 0);\n    __decorate$7([\n        Property(true)\n    ], Mention.prototype, \"ignoreCase\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"highlight\", void 0);\n    __decorate$7([\n        Property()\n    ], Mention.prototype, \"locale\", void 0);\n    __decorate$7([\n        Property('auto')\n    ], Mention.prototype, \"popupWidth\", void 0);\n    __decorate$7([\n        Property('300px')\n    ], Mention.prototype, \"popupHeight\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"displayTemplate\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"itemTemplate\", void 0);\n    __decorate$7([\n        Property('No records found')\n    ], Mention.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"spinnerTemplate\", void 0);\n    __decorate$7([\n        Property()\n    ], Mention.prototype, \"target\", void 0);\n    __decorate$7([\n        Property([])\n    ], Mention.prototype, \"dataSource\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"query\", void 0);\n    __decorate$7([\n        Property('Contains')\n    ], Mention.prototype, \"filterType\", void 0);\n    __decorate$7([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], Mention.prototype, \"fields\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionBegin\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionComplete\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionFailure\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"change\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"beforeOpen\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"opened\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"closed\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"select\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"filtering\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"created\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"destroyed\", void 0);\n    Mention = __decorate$7([\n        NotifyPropertyChanges\n    ], Mention);\n    return Mention;\n}(DropDownBase));\n\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\nexport { incrementalSearch, Search, escapeCharRegExp, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox, Mention };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}