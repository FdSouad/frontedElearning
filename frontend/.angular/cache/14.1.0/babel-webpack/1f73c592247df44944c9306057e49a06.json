{"ast":null,"code":"import { Animation, Browser, ChildProperty, Collection, Complex, Component, Draggable, Droppable, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getElement, getInstance, getRandomId, getUniqueID, getValue, isBlazor, isNullOrUndefined, isRippleEnabled, isUndefined, isVisible, matches, merge, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { Popup, calculatePosition, createSpinner, fit, getScrollableParent, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Button, createCheckBox, rippleMouseHandler } from '@syncfusion/ej2-buttons';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Input } from '@syncfusion/ej2-inputs';\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst CLS_ROOT = 'e-hscroll';\nconst CLS_RTL = 'e-rtl';\nconst CLS_DISABLE = 'e-overlay';\nconst CLS_HSCROLLBAR = 'e-hscroll-bar';\nconst CLS_HSCROLLCON = 'e-hscroll-content';\nconst CLS_NAVARROW = 'e-nav-arrow';\nconst CLS_NAVRIGHTARROW = 'e-nav-right-arrow';\nconst CLS_NAVLEFTARROW = 'e-nav-left-arrow';\nconst CLS_HSCROLLNAV = 'e-scroll-nav';\nconst CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';\nconst CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';\nconst CLS_DEVICE = 'e-scroll-device';\nconst CLS_OVERLAY = 'e-scroll-overlay';\nconst CLS_RIGHTOVERLAY = 'e-scroll-right-overlay';\nconst CLS_LEFTOVERLAY = 'e-scroll-left-overlay';\nconst OVERLAY_MAXWID = 40;\n/**\n * HScroll module is introduces horizontal scroller when content exceeds the current viewing area.\n * It can be useful for the components like Toolbar, Tab which needs horizontal scrolling alone.\n * Hidden content can be view by touch moving or icon click.\n * ```html\n * <div id=\"scroll\"/>\n * <script>\n *   var scrollObj = new HScroll();\n *   scrollObj.appendTo(\"#scroll\");\n * </script>\n * ```\n */\n\nlet HScroll = class HScroll extends Component {\n  /**\n   * Initializes a new instance of the HScroll class.\n   *\n   * @param {HScrollModel} options  - Specifies HScroll model properties as options.\n   * @param {string | HTMLElement} element  - Specifies the element for which horizontal scrolling applies.\n   */\n  constructor(options, element) {\n    super(options, element);\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    this.browser = Browser.info.name;\n    this.browserCheck = this.browser === 'mozilla';\n    this.isDevice = Browser.isDevice;\n    this.customStep = true;\n    const element = this.element;\n    this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n    this.initialize();\n\n    if (element.id === '') {\n      element.id = getUniqueID('hscroll');\n      this.uniqueId = true;\n    }\n\n    element.style.display = 'block';\n\n    if (this.enableRtl) {\n      element.classList.add(CLS_RTL);\n    }\n  }\n  /**\n   * To Initialize the horizontal scroll  rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.touchModule = new Touch(this.element, {\n      scroll: this.touchHandler.bind(this),\n      swipe: this.swipeHandler.bind(this)\n    });\n    EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);\n\n    if (!this.isDevice) {\n      this.createNavIcon(this.element);\n    } else {\n      this.element.classList.add(CLS_DEVICE);\n      this.createOverlay(this.element);\n    }\n\n    this.setScrollState();\n  }\n\n  setScrollState() {\n    if (isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {\n      this.scrollStep = this.scrollEle.offsetWidth;\n      this.customStep = false;\n    } else {\n      this.customStep = true;\n    }\n  }\n\n  initialize() {\n    const scrollEle = this.createElement('div', {\n      className: CLS_HSCROLLCON\n    });\n    const scrollDiv = this.createElement('div', {\n      className: CLS_HSCROLLBAR\n    });\n    scrollDiv.setAttribute('tabindex', '-1');\n    const ele = this.element;\n    const innerEle = [].slice.call(ele.children);\n\n    for (const ele of innerEle) {\n      scrollEle.appendChild(ele);\n    }\n\n    scrollDiv.appendChild(scrollEle);\n    ele.appendChild(scrollDiv);\n    scrollDiv.style.overflowX = 'hidden';\n    this.scrollEle = scrollDiv;\n    this.scrollItems = scrollEle;\n  }\n\n  getPersistData() {\n    const keyEntity = ['scrollStep'];\n    return this.addOnPersist(keyEntity);\n  }\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - It returns the current module name.\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'hScroll';\n  }\n  /**\n   * Removes the control from the DOM and also removes all its related events.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    const ele = this.element;\n    ele.style.display = '';\n    ele.classList.remove(CLS_ROOT);\n    ele.classList.remove(CLS_DEVICE);\n    const nav = selectAll('.e-' + ele.id + '_nav.' + CLS_HSCROLLNAV, ele);\n    const overlay = selectAll('.' + CLS_OVERLAY, ele);\n    [].slice.call(overlay).forEach(ele => {\n      detach(ele);\n    });\n\n    for (const elem of [].slice.call(this.scrollItems.children)) {\n      ele.appendChild(elem);\n    }\n\n    if (this.uniqueId) {\n      this.element.removeAttribute('id');\n    }\n\n    detach(this.scrollEle);\n\n    if (nav.length > 0) {\n      detach(nav[0]);\n\n      if (!isNullOrUndefined(nav[1])) {\n        detach(nav[1]);\n      }\n    }\n\n    EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);\n    this.touchModule.destroy();\n    this.touchModule = null;\n    super.destroy();\n  }\n  /**\n   * Specifies the value to disable/enable the HScroll component.\n   * When set to `true` , the component will be disabled.\n   *\n   * @param  {boolean} value - Based on this Boolean value, HScroll will be enabled (false) or disabled (true).\n   * @returns {void}.\n   */\n\n\n  disable(value) {\n    const navEles = selectAll('.e-scroll-nav:not(.' + CLS_DISABLE + ')', this.element);\n\n    if (value) {\n      this.element.classList.add(CLS_DISABLE);\n    } else {\n      this.element.classList.remove(CLS_DISABLE);\n    }\n\n    [].slice.call(navEles).forEach(el => {\n      el.setAttribute('tabindex', !value ? '0' : '-1');\n    });\n  }\n\n  createOverlay(element) {\n    const id = element.id.concat('_nav');\n    const rightOverlayEle = this.createElement('div', {\n      className: CLS_OVERLAY + ' ' + CLS_RIGHTOVERLAY\n    });\n    const clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n    const rightEle = this.createElement('div', {\n      id: id.concat('_right'),\n      className: clsRight\n    });\n    const navItem = this.createElement('div', {\n      className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons'\n    });\n    rightEle.appendChild(navItem);\n    const leftEle = this.createElement('div', {\n      className: CLS_OVERLAY + ' ' + CLS_LEFTOVERLAY\n    });\n\n    if (this.ieCheck) {\n      rightEle.classList.add('e-ie-align');\n    }\n\n    element.appendChild(rightOverlayEle);\n    element.appendChild(rightEle);\n    element.insertBefore(leftEle, element.firstChild);\n    this.eventBinding([rightEle]);\n  }\n\n  createNavIcon(element) {\n    const id = element.id.concat('_nav');\n    const clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n    const rightAttributes = {\n      'role': 'button',\n      'id': id.concat('_right'),\n      'aria-label': 'Scroll right'\n    };\n    const nav = this.createElement('div', {\n      className: clsRight,\n      attrs: rightAttributes\n    });\n    nav.setAttribute('aria-disabled', 'false');\n    const navItem = this.createElement('div', {\n      className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons'\n    });\n    const clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);\n    const leftAttributes = {\n      'role': 'button',\n      'id': id.concat('_left'),\n      'aria-label': 'Scroll left'\n    };\n    const navEle = this.createElement('div', {\n      className: clsLeft + ' ' + CLS_DISABLE,\n      attrs: leftAttributes\n    });\n    navEle.setAttribute('aria-disabled', 'true');\n    const navLeftItem = this.createElement('div', {\n      className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons'\n    });\n    navEle.appendChild(navLeftItem);\n    nav.appendChild(navItem);\n    element.appendChild(nav);\n    element.insertBefore(navEle, element.firstChild);\n\n    if (this.ieCheck) {\n      nav.classList.add('e-ie-align');\n      navEle.classList.add('e-ie-align');\n    }\n\n    this.eventBinding([nav, navEle]);\n  }\n\n  onKeyPress(e) {\n    if (e.key === 'Enter') {\n      const timeoutFun = () => {\n        this.keyTimeout = true;\n        this.eleScrolling(10, e.target, true);\n      };\n\n      this.keyTimer = window.setTimeout(() => {\n        timeoutFun();\n      }, 100);\n    }\n  }\n\n  onKeyUp(e) {\n    if (e.key !== 'Enter') {\n      return;\n    }\n\n    if (this.keyTimeout) {\n      this.keyTimeout = false;\n    } else {\n      e.target.click();\n    }\n\n    clearTimeout(this.keyTimer);\n  }\n\n  eventBinding(ele) {\n    [].slice.call(ele).forEach(el => {\n      new Touch(el, {\n        tapHold: this.tabHoldHandler.bind(this),\n        tapHoldThreshold: 500\n      });\n      el.addEventListener('keydown', this.onKeyPress.bind(this));\n      el.addEventListener('keyup', this.onKeyUp.bind(this));\n      el.addEventListener('mouseup', this.repeatScroll.bind(this));\n      el.addEventListener('touchend', this.repeatScroll.bind(this));\n      el.addEventListener('contextmenu', e => {\n        e.preventDefault();\n      });\n      EventHandler.add(el, 'click', this.clickEventHandler, this);\n    });\n  }\n\n  repeatScroll() {\n    clearInterval(this.timeout);\n  }\n\n  tabHoldHandler(e) {\n    let trgt = e.originalEvent.target;\n    trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;\n    const scrollDis = 10;\n\n    const timeoutFun = () => {\n      this.eleScrolling(scrollDis, trgt, true);\n    };\n\n    this.timeout = window.setInterval(() => {\n      timeoutFun();\n    }, 50);\n  }\n\n  contains(ele, className) {\n    return ele.classList.contains(className);\n  }\n\n  eleScrolling(scrollDis, trgt, isContinuous) {\n    const rootEle = this.element;\n    let classList$$1 = trgt.classList;\n\n    if (classList$$1.contains(CLS_HSCROLLNAV)) {\n      classList$$1 = trgt.querySelector('.' + CLS_NAVARROW).classList;\n    }\n\n    if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {\n      scrollDis = -scrollDis;\n    }\n\n    if (!this.contains(rootEle, CLS_RTL) || this.browserCheck || this.ieCheck) {\n      if (classList$$1.contains(CLS_NAVRIGHTARROW)) {\n        this.frameScrollRequest(scrollDis, 'add', isContinuous);\n      } else {\n        this.frameScrollRequest(scrollDis, '', isContinuous);\n      }\n    } else {\n      if (classList$$1.contains(CLS_NAVLEFTARROW)) {\n        this.frameScrollRequest(scrollDis, 'add', isContinuous);\n      } else {\n        this.frameScrollRequest(scrollDis, '', isContinuous);\n      }\n    }\n  }\n\n  clickEventHandler(e) {\n    this.eleScrolling(this.scrollStep, e.target, false);\n  }\n\n  swipeHandler(e) {\n    const swipeEle = this.scrollEle;\n    let distance;\n\n    if (e.velocity <= 1) {\n      distance = e.distanceX / (e.velocity * 10);\n    } else {\n      distance = e.distanceX / e.velocity;\n    }\n\n    let start = 0.5;\n\n    const animate = () => {\n      const step = Math.sin(start);\n\n      if (step <= 0) {\n        window.cancelAnimationFrame(step);\n      } else {\n        if (e.swipeDirection === 'Left') {\n          swipeEle.scrollLeft += distance * step;\n        } else if (e.swipeDirection === 'Right') {\n          swipeEle.scrollLeft -= distance * step;\n        }\n\n        start -= 0.5;\n        window.requestAnimationFrame(animate);\n      }\n    };\n\n    animate();\n  }\n\n  scrollUpdating(scrollVal, action) {\n    if (action === 'add') {\n      this.scrollEle.scrollLeft += scrollVal;\n    } else {\n      this.scrollEle.scrollLeft -= scrollVal;\n    }\n  }\n\n  frameScrollRequest(scrollVal, action, isContinuous) {\n    const step = 10;\n\n    if (isContinuous) {\n      this.scrollUpdating(scrollVal, action);\n      return;\n    }\n\n    if (!this.customStep) {\n      [].slice.call(selectAll('.' + CLS_OVERLAY, this.element)).forEach(el => {\n        scrollVal -= el.offsetWidth;\n      });\n    }\n\n    const animate = () => {\n      let scrollValue;\n      let scrollStep;\n\n      if (this.contains(this.element, CLS_RTL) && this.browserCheck) {\n        scrollValue = -scrollVal;\n        scrollStep = -step;\n      } else {\n        scrollValue = scrollVal;\n        scrollStep = step;\n      }\n\n      if (scrollValue < step) {\n        window.cancelAnimationFrame(scrollStep);\n      } else {\n        this.scrollUpdating(scrollStep, action);\n        scrollVal -= scrollStep;\n        window.requestAnimationFrame(animate);\n      }\n    };\n\n    animate();\n  }\n\n  touchHandler(e) {\n    const ele = this.scrollEle;\n    let distance = e.distanceX;\n\n    if (this.ieCheck && this.contains(this.element, CLS_RTL)) {\n      distance = -distance;\n    }\n\n    if (e.scrollDirection === 'Left') {\n      ele.scrollLeft = ele.scrollLeft + distance;\n    } else if (e.scrollDirection === 'Right') {\n      ele.scrollLeft = ele.scrollLeft - distance;\n    }\n  }\n\n  arrowDisabling(addDisable, removeDisable) {\n    if (this.isDevice) {\n      const arrowEle = isNullOrUndefined(addDisable) ? removeDisable : addDisable;\n      const arrowIcon = arrowEle.querySelector('.' + CLS_NAVARROW);\n\n      if (isNullOrUndefined(addDisable)) {\n        classList(arrowIcon, [CLS_NAVRIGHTARROW], [CLS_NAVLEFTARROW]);\n      } else {\n        classList(arrowIcon, [CLS_NAVLEFTARROW], [CLS_NAVRIGHTARROW]);\n      }\n    } else if (addDisable && removeDisable) {\n      addDisable.classList.add(CLS_DISABLE);\n      addDisable.setAttribute('aria-disabled', 'true');\n      addDisable.removeAttribute('tabindex');\n      removeDisable.classList.remove(CLS_DISABLE);\n      removeDisable.setAttribute('aria-disabled', 'false');\n      removeDisable.setAttribute('tabindex', '0');\n    }\n\n    this.repeatScroll();\n  }\n\n  scrollHandler(e) {\n    const target = e.target;\n    const width = target.offsetWidth;\n    const rootEle = this.element;\n    const navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);\n    const navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);\n    let leftOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);\n    let rightOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);\n    let scrollLeft = target.scrollLeft;\n\n    if (scrollLeft <= 0) {\n      scrollLeft = -scrollLeft;\n    }\n\n    if (this.isDevice) {\n      if (this.enableRtl && !(this.browserCheck || this.ieCheck)) {\n        leftOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);\n        rightOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);\n      }\n\n      if (scrollLeft < OVERLAY_MAXWID) {\n        leftOverlay.style.width = scrollLeft + 'px';\n      } else {\n        leftOverlay.style.width = '40px';\n      }\n\n      if (target.scrollWidth - Math.ceil(width + scrollLeft) < OVERLAY_MAXWID) {\n        rightOverlay.style.width = target.scrollWidth - Math.ceil(width + scrollLeft) + 'px';\n      } else {\n        rightOverlay.style.width = '40px';\n      }\n    }\n\n    if (scrollLeft === 0) {\n      this.arrowDisabling(navLeftEle, navRightEle);\n    } else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {\n      this.arrowDisabling(navRightEle, navLeftEle);\n    } else {\n      const disEle = this.element.querySelector('.' + CLS_HSCROLLNAV + '.' + CLS_DISABLE);\n\n      if (disEle) {\n        disEle.classList.remove(CLS_DISABLE);\n        disEle.setAttribute('aria-disabled', 'false');\n        disEle.setAttribute('tabindex', '0');\n      }\n    }\n  }\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of property that changed.\n   *\n   * @param  {HScrollModel} newProp - It contains the new value of data.\n   * @param  {HScrollModel} oldProp - It contains the old value of data.\n   * @returns {void}\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'scrollStep':\n          this.setScrollState();\n          break;\n\n        case 'enableRtl':\n          newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);\n          break;\n      }\n    }\n  }\n\n};\n\n__decorate([Property(null)], HScroll.prototype, \"scrollStep\", void 0);\n\nHScroll = __decorate([NotifyPropertyChanges], HScroll);\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst CLS_ROOT$1 = 'e-vscroll';\nconst CLS_RTL$1 = 'e-rtl';\nconst CLS_DISABLE$1 = 'e-overlay';\nconst CLS_VSCROLLBAR = 'e-vscroll-bar';\nconst CLS_VSCROLLCON = 'e-vscroll-content';\nconst CLS_NAVARROW$1 = 'e-nav-arrow';\nconst CLS_NAVUPARROW = 'e-nav-up-arrow';\nconst CLS_NAVDOWNARROW = 'e-nav-down-arrow';\nconst CLS_VSCROLLNAV = 'e-scroll-nav';\nconst CLS_VSCROLLNAVUP = 'e-scroll-up-nav';\nconst CLS_VSCROLLNAVDOWN = 'e-scroll-down-nav';\nconst CLS_DEVICE$1 = 'e-scroll-device';\nconst CLS_OVERLAY$1 = 'e-scroll-overlay';\nconst CLS_UPOVERLAY = 'e-scroll-up-overlay';\nconst CLS_DOWNOVERLAY = 'e-scroll-down-overlay';\nconst OVERLAY_MAXWID$1 = 40;\n/**\n * VScroll module is introduces vertical scroller when content exceeds the current viewing area.\n * It can be useful for the components like Toolbar, Tab which needs vertical scrolling alone.\n * Hidden content can be view by touch moving or icon click.\n * ```html\n * <div id=\"scroll\"/>\n * <script>\n *   var scrollObj = new VScroll();\n *   scrollObj.appendTo(\"#scroll\");\n * </script>\n * ```\n */\n\nlet VScroll = class VScroll extends Component {\n  /**\n   * Initializes a new instance of the VScroll class.\n   *\n   * @param {VScrollModel} options  - Specifies VScroll model properties as options.\n   * @param {string | HTMLElement} element  - Specifies the element for which vertical scrolling applies.\n   */\n  constructor(options, element) {\n    super(options, element);\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    this.browser = Browser.info.name;\n    this.browserCheck = this.browser === 'mozilla';\n    this.isDevice = Browser.isDevice;\n    this.customStep = true;\n    const ele = this.element;\n    this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n    this.initialize();\n\n    if (ele.id === '') {\n      ele.id = getUniqueID('vscroll');\n      this.uniqueId = true;\n    }\n\n    ele.style.display = 'block';\n\n    if (this.enableRtl) {\n      ele.classList.add(CLS_RTL$1);\n    }\n  }\n  /**\n   * To Initialize the vertical scroll rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.touchModule = new Touch(this.element, {\n      scroll: this.touchHandler.bind(this),\n      swipe: this.swipeHandler.bind(this)\n    });\n    EventHandler.add(this.scrollEle, 'scroll', this.scrollEventHandler, this);\n\n    if (!this.isDevice) {\n      this.createNavIcon(this.element);\n    } else {\n      this.element.classList.add(CLS_DEVICE$1);\n      this.createOverlayElement(this.element);\n    }\n\n    this.setScrollState();\n    EventHandler.add(this.element, 'wheel', this.wheelEventHandler, this);\n  }\n\n  setScrollState() {\n    if (isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {\n      this.scrollStep = this.scrollEle.offsetHeight;\n      this.customStep = false;\n    } else {\n      this.customStep = true;\n    }\n  }\n\n  initialize() {\n    const scrollCnt = createElement('div', {\n      className: CLS_VSCROLLCON\n    });\n    const scrollBar = createElement('div', {\n      className: CLS_VSCROLLBAR\n    });\n    scrollBar.setAttribute('tabindex', '-1');\n    const ele = this.element;\n    const innerEle = [].slice.call(ele.children);\n\n    for (const ele of innerEle) {\n      scrollCnt.appendChild(ele);\n    }\n\n    scrollBar.appendChild(scrollCnt);\n    ele.appendChild(scrollBar);\n    scrollBar.style.overflow = 'hidden';\n    this.scrollEle = scrollBar;\n    this.scrollItems = scrollCnt;\n  }\n\n  getPersistData() {\n    const keyEntity = ['scrollStep'];\n    return this.addOnPersist(keyEntity);\n  }\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - It returns the current module name.\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'vScroll';\n  }\n  /**\n   * Removes the control from the DOM and also removes all its related events.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    const el = this.element;\n    el.style.display = '';\n    removeClass([this.element], [CLS_ROOT$1, CLS_DEVICE$1]);\n    const navs = selectAll('.e-' + el.id + '_nav.' + CLS_VSCROLLNAV, el);\n    const overlays = selectAll('.' + CLS_OVERLAY$1, el);\n    [].slice.call(overlays).forEach(ele => {\n      detach(ele);\n    });\n\n    for (const elem of [].slice.call(this.scrollItems.children)) {\n      el.appendChild(elem);\n    }\n\n    if (this.uniqueId) {\n      this.element.removeAttribute('id');\n    }\n\n    detach(this.scrollEle);\n\n    if (navs.length > 0) {\n      detach(navs[0]);\n\n      if (!isNullOrUndefined(navs[1])) {\n        detach(navs[1]);\n      }\n    }\n\n    EventHandler.remove(this.scrollEle, 'scroll', this.scrollEventHandler);\n    this.touchModule.destroy();\n    this.touchModule = null;\n    super.destroy();\n  }\n  /**\n   * Specifies the value to disable/enable the VScroll component.\n   * When set to `true` , the component will be disabled.\n   *\n   * @param  {boolean} value - Based on this Boolean value, VScroll will be enabled (false) or disabled (true).\n   * @returns {void}.\n   */\n\n\n  disable(value) {\n    const navEle = selectAll('.e-scroll-nav:not(.' + CLS_DISABLE$1 + ')', this.element);\n\n    if (value) {\n      this.element.classList.add(CLS_DISABLE$1);\n    } else {\n      this.element.classList.remove(CLS_DISABLE$1);\n    }\n\n    [].slice.call(navEle).forEach(el => {\n      el.setAttribute('tabindex', !value ? '0' : '-1');\n    });\n  }\n\n  createOverlayElement(element) {\n    const id = element.id.concat('_nav');\n    const downOverlayEle = createElement('div', {\n      className: CLS_OVERLAY$1 + ' ' + CLS_DOWNOVERLAY\n    });\n    const clsDown = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVDOWN);\n    const downEle = createElement('div', {\n      id: id.concat('down'),\n      className: clsDown\n    });\n    const navItem = createElement('div', {\n      className: CLS_NAVDOWNARROW + ' ' + CLS_NAVARROW$1 + ' e-icons'\n    });\n    downEle.appendChild(navItem);\n    const upEle = createElement('div', {\n      className: CLS_OVERLAY$1 + ' ' + CLS_UPOVERLAY\n    });\n\n    if (this.ieCheck) {\n      downEle.classList.add('e-ie-align');\n    }\n\n    element.appendChild(downOverlayEle);\n    element.appendChild(downEle);\n    element.insertBefore(upEle, element.firstChild);\n    this.eventBinding([downEle]);\n  }\n\n  createNavIcon(element) {\n    const id = element.id.concat('_nav');\n    const clsDown = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVDOWN);\n    const nav = createElement('div', {\n      id: id.concat('_down'),\n      className: clsDown\n    });\n    nav.setAttribute('aria-disabled', 'false');\n    const navItem = createElement('div', {\n      className: CLS_NAVDOWNARROW + ' ' + CLS_NAVARROW$1 + ' e-icons'\n    });\n    const clsUp = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVUP);\n    const navElement = createElement('div', {\n      id: id.concat('_up'),\n      className: clsUp + ' ' + CLS_DISABLE$1\n    });\n    navElement.setAttribute('aria-disabled', 'true');\n    const navUpItem = createElement('div', {\n      className: CLS_NAVUPARROW + ' ' + CLS_NAVARROW$1 + ' e-icons'\n    });\n    navElement.appendChild(navUpItem);\n    nav.appendChild(navItem);\n    nav.setAttribute('tabindex', '0');\n    element.appendChild(nav);\n    element.insertBefore(navElement, element.firstChild);\n\n    if (this.ieCheck) {\n      nav.classList.add('e-ie-align');\n      navElement.classList.add('e-ie-align');\n    }\n\n    this.eventBinding([nav, navElement]);\n  }\n\n  onKeyPress(ev) {\n    if (ev.key === 'Enter') {\n      const timeoutFun = () => {\n        this.keyTimeout = true;\n        this.eleScrolling(10, ev.target, true);\n      };\n\n      this.keyTimer = window.setTimeout(() => {\n        timeoutFun();\n      }, 100);\n    }\n  }\n\n  onKeyUp(ev) {\n    if (ev.key !== 'Enter') {\n      return;\n    }\n\n    if (this.keyTimeout) {\n      this.keyTimeout = false;\n    } else {\n      ev.target.click();\n    }\n\n    clearTimeout(this.keyTimer);\n  }\n\n  eventBinding(element) {\n    [].slice.call(element).forEach(ele => {\n      new Touch(ele, {\n        tapHold: this.tabHoldHandler.bind(this),\n        tapHoldThreshold: 500\n      });\n      ele.addEventListener('keydown', this.onKeyPress.bind(this));\n      ele.addEventListener('keyup', this.onKeyUp.bind(this));\n      ele.addEventListener('mouseup', this.repeatScroll.bind(this));\n      ele.addEventListener('touchend', this.repeatScroll.bind(this));\n      ele.addEventListener('contextmenu', e => {\n        e.preventDefault();\n      });\n      EventHandler.add(ele, 'click', this.clickEventHandler, this);\n    });\n  }\n\n  repeatScroll() {\n    clearInterval(this.timeout);\n  }\n\n  tabHoldHandler(ev) {\n    let trgt = ev.originalEvent.target;\n    trgt = this.contains(trgt, CLS_VSCROLLNAV) ? trgt.firstElementChild : trgt;\n    const scrollDistance = 10;\n\n    const timeoutFun = () => {\n      this.eleScrolling(scrollDistance, trgt, true);\n    };\n\n    this.timeout = window.setInterval(() => {\n      timeoutFun();\n    }, 50);\n  }\n\n  contains(element, className) {\n    return element.classList.contains(className);\n  }\n\n  eleScrolling(scrollDis, trgt, isContinuous) {\n    let classList$$1 = trgt.classList;\n\n    if (classList$$1.contains(CLS_VSCROLLNAV)) {\n      classList$$1 = trgt.querySelector('.' + CLS_NAVARROW$1).classList;\n    }\n\n    if (classList$$1.contains(CLS_NAVDOWNARROW)) {\n      this.frameScrollRequest(scrollDis, 'add', isContinuous);\n    } else if (classList$$1.contains(CLS_NAVUPARROW)) {\n      this.frameScrollRequest(scrollDis, '', isContinuous);\n    }\n  }\n\n  clickEventHandler(event) {\n    this.eleScrolling(this.scrollStep, event.target, false);\n  }\n\n  wheelEventHandler(e) {\n    e.preventDefault();\n    this.frameScrollRequest(this.scrollStep, e.deltaY > 0 ? 'add' : '', false);\n  }\n\n  swipeHandler(e) {\n    const swipeElement = this.scrollEle;\n    let distance;\n\n    if (e.velocity <= 1) {\n      distance = e.distanceY / (e.velocity * 10);\n    } else {\n      distance = e.distanceY / e.velocity;\n    }\n\n    let start = 0.5;\n\n    const animate = () => {\n      const step = Math.sin(start);\n\n      if (step <= 0) {\n        window.cancelAnimationFrame(step);\n      } else {\n        if (e.swipeDirection === 'Up') {\n          swipeElement.scrollTop += distance * step;\n        } else if (e.swipeDirection === 'Down') {\n          swipeElement.scrollTop -= distance * step;\n        }\n\n        start -= 0.02;\n        window.requestAnimationFrame(animate);\n      }\n    };\n\n    animate();\n  }\n\n  scrollUpdating(scrollVal, action) {\n    if (action === 'add') {\n      this.scrollEle.scrollTop += scrollVal;\n    } else {\n      this.scrollEle.scrollTop -= scrollVal;\n    }\n  }\n\n  frameScrollRequest(scrollValue, action, isContinuous) {\n    const step = 10;\n\n    if (isContinuous) {\n      this.scrollUpdating(scrollValue, action);\n      return;\n    }\n\n    if (!this.customStep) {\n      [].slice.call(selectAll('.' + CLS_OVERLAY$1, this.element)).forEach(el => {\n        scrollValue -= el.offsetHeight;\n      });\n    }\n\n    const animate = () => {\n      if (scrollValue < step) {\n        window.cancelAnimationFrame(step);\n      } else {\n        this.scrollUpdating(step, action);\n        scrollValue -= step;\n        window.requestAnimationFrame(animate);\n      }\n    };\n\n    animate();\n  }\n\n  touchHandler(e) {\n    const el = this.scrollEle;\n    const distance = e.distanceY;\n\n    if (e.scrollDirection === 'Up') {\n      el.scrollTop = el.scrollTop + distance;\n    } else if (e.scrollDirection === 'Down') {\n      el.scrollTop = el.scrollTop - distance;\n    }\n  }\n\n  arrowDisabling(addDisableCls, removeDisableCls) {\n    if (this.isDevice) {\n      const arrowEle = isNullOrUndefined(addDisableCls) ? removeDisableCls : addDisableCls;\n      const arrowIcon = arrowEle.querySelector('.' + CLS_NAVARROW$1);\n\n      if (isNullOrUndefined(addDisableCls)) {\n        classList(arrowIcon, [CLS_NAVDOWNARROW], [CLS_NAVUPARROW]);\n      } else {\n        classList(arrowIcon, [CLS_NAVUPARROW], [CLS_NAVDOWNARROW]);\n      }\n    } else {\n      addDisableCls.classList.add(CLS_DISABLE$1);\n      addDisableCls.setAttribute('aria-disabled', 'true');\n      addDisableCls.removeAttribute('tabindex');\n      removeDisableCls.classList.remove(CLS_DISABLE$1);\n      removeDisableCls.setAttribute('aria-disabled', 'false');\n      removeDisableCls.setAttribute('tabindex', '0');\n    }\n\n    this.repeatScroll();\n  }\n\n  scrollEventHandler(e) {\n    const target = e.target;\n    const height = target.offsetHeight;\n    const navUpEle = this.element.querySelector('.' + CLS_VSCROLLNAVUP);\n    const navDownEle = this.element.querySelector('.' + CLS_VSCROLLNAVDOWN);\n    const upOverlay = this.element.querySelector('.' + CLS_UPOVERLAY);\n    const downOverlay = this.element.querySelector('.' + CLS_DOWNOVERLAY);\n    let scrollTop = target.scrollTop;\n\n    if (scrollTop <= 0) {\n      scrollTop = -scrollTop;\n    }\n\n    if (this.isDevice) {\n      if (scrollTop < OVERLAY_MAXWID$1) {\n        upOverlay.style.height = scrollTop + 'px';\n      } else {\n        upOverlay.style.height = '40px';\n      }\n\n      if (target.scrollHeight - Math.ceil(height + scrollTop) < OVERLAY_MAXWID$1) {\n        downOverlay.style.height = target.scrollHeight - Math.ceil(height + scrollTop) + 'px';\n      } else {\n        downOverlay.style.height = '40px';\n      }\n    }\n\n    if (scrollTop === 0) {\n      this.arrowDisabling(navUpEle, navDownEle);\n    } else if (Math.ceil(height + scrollTop + .1) >= target.scrollHeight) {\n      this.arrowDisabling(navDownEle, navUpEle);\n    } else {\n      const disEle = this.element.querySelector('.' + CLS_VSCROLLNAV + '.' + CLS_DISABLE$1);\n\n      if (disEle) {\n        disEle.classList.remove(CLS_DISABLE$1);\n        disEle.setAttribute('aria-disabled', 'false');\n        disEle.setAttribute('tabindex', '0');\n      }\n    }\n  }\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of property that changed.\n   *\n   * @param  {VScrollModel} newProp - It contains the new value of data.\n   * @param  {VScrollModel} oldProp - It contains the old value of data.\n   * @returns {void}\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'scrollStep':\n          this.setScrollState();\n          break;\n\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            this.element.classList.add(CLS_RTL$1);\n          } else {\n            this.element.classList.remove(CLS_RTL$1);\n          }\n\n          break;\n      }\n    }\n  }\n\n};\n\n__decorate$1([Property(null)], VScroll.prototype, \"scrollStep\", void 0);\n\nVScroll = __decorate$1([NotifyPropertyChanges], VScroll);\n/**\n * Used to add scroll in menu.\n *\n * @param {createElementType} createElement - Specifies the create element model\n * @param {HTMLElement} container - Specifies the element container\n * @param {HTMLElement} content - Specifies the content element\n * @param {string} scrollType - Specifies the scroll type\n * @param {boolean} enableRtl - Specifies the enable RTL property\n * @param {boolean} offset - Specifies the offset value\n * @returns {HTMLElement} - Element\n * @hidden\n */\n\nfunction addScrolling(createElement$$1, container, content, scrollType, enableRtl, offset) {\n  let containerOffset;\n  let contentOffset;\n  const parentElem = container.parentElement;\n\n  if (scrollType === 'vscroll') {\n    containerOffset = offset || container.getBoundingClientRect().height;\n    contentOffset = content.getBoundingClientRect().height;\n  } else {\n    containerOffset = container.getBoundingClientRect().width;\n    contentOffset = content.getBoundingClientRect().width;\n  }\n\n  if (containerOffset < contentOffset) {\n    return createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset);\n  } else if (parentElem) {\n    const width = parentElem.getBoundingClientRect().width;\n\n    if (width < containerOffset && scrollType === 'hscroll') {\n      contentOffset = width;\n      container.style.maxWidth = width + 'px';\n      return createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset);\n    }\n\n    return content;\n  } else {\n    return content;\n  }\n}\n/**\n * Used to create scroll bar in menu.\n *\n * @param {createElementType} createElement - Specifies the create element model\n * @param {HTMLElement} container - Specifies the element container\n * @param {HTMLElement} content - Specifies the content element\n * @param {string} scrollType - Specifies the scroll type\n * @param {boolean} enableRtl - Specifies the enable RTL property\n * @param {boolean} offset - Specifies the offset value\n * @returns {HTMLElement} - Element\n * @hidden\n */\n\n\nfunction createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset) {\n  const scrollEle = createElement$$1('div', {\n    className: 'e-menu-' + scrollType\n  });\n  container.appendChild(scrollEle);\n  scrollEle.appendChild(content);\n\n  if (offset) {\n    scrollEle.style.overflow = 'hidden';\n    scrollEle.style.height = offset + 'px';\n  } else {\n    scrollEle.style.maxHeight = container.style.maxHeight;\n    container.style.overflow = 'hidden';\n  }\n\n  let scrollObj;\n\n  if (scrollType === 'vscroll') {\n    scrollObj = new VScroll({\n      enableRtl: enableRtl\n    }, scrollEle);\n    scrollObj.scrollStep = select('.e-' + scrollType + '-bar', container).offsetHeight / 2;\n  } else {\n    scrollObj = new HScroll({\n      enableRtl: enableRtl\n    }, scrollEle);\n    scrollObj.scrollStep = select('.e-' + scrollType + '-bar', container).offsetWidth;\n  }\n\n  return scrollEle;\n}\n/**\n * Used to destroy the scroll option.\n *\n * @param {VScroll | HScroll} scrollObj - Specifies the scroller object\n * @param {Element} element - Specifies the element\n * @param {HTMLElement} skipEle - Specifies the skip  element\n * @returns {void}\n * @hidden\n */\n\n\nfunction destroyScroll(scrollObj, element, skipEle) {\n  if (scrollObj) {\n    const menu = select('.e-menu-parent', element);\n\n    if (menu) {\n      if (!skipEle || skipEle === menu) {\n        scrollObj.destroy();\n        element.parentElement.appendChild(menu);\n        detach(element);\n      }\n    } else {\n      scrollObj.destroy();\n      detach(element);\n    }\n  }\n}\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst ENTER = 'enter';\nconst ESCAPE = 'escape';\nconst FOCUSED = 'e-focused';\nconst HEADER = 'e-menu-header';\nconst SELECTED = 'e-selected';\nconst SEPARATOR = 'e-separator';\nconst UPARROW = 'uparrow';\nconst DOWNARROW = 'downarrow';\nconst LEFTARROW = 'leftarrow';\nconst RIGHTARROW = 'rightarrow';\nconst HOME = 'home';\nconst END = 'end';\nconst TAB = 'tab';\nconst CARET = 'e-caret';\nconst ITEM = 'e-menu-item';\nconst DISABLED = 'e-disabled';\nconst HIDE = 'e-menu-hide';\nconst ICONS = 'e-icons';\nconst RTL = 'e-rtl';\nconst POPUP = 'e-menu-popup';\nconst TEMPLATE_PROPERTY = 'Template';\n/**\n * Configures the field options of the Menu.\n */\n\nclass FieldSettings extends ChildProperty {}\n\n__decorate$2([Property('id')], FieldSettings.prototype, \"itemId\", void 0);\n\n__decorate$2([Property('parentId')], FieldSettings.prototype, \"parentId\", void 0);\n\n__decorate$2([Property('text')], FieldSettings.prototype, \"text\", void 0);\n\n__decorate$2([Property('iconCss')], FieldSettings.prototype, \"iconCss\", void 0);\n\n__decorate$2([Property('url')], FieldSettings.prototype, \"url\", void 0);\n\n__decorate$2([Property('separator')], FieldSettings.prototype, \"separator\", void 0);\n\n__decorate$2([Property('items')], FieldSettings.prototype, \"children\", void 0);\n/**\n * Specifies menu items.\n */\n\n\nclass MenuItem extends ChildProperty {}\n\n__decorate$2([Property(null)], MenuItem.prototype, \"iconCss\", void 0);\n\n__decorate$2([Property('')], MenuItem.prototype, \"id\", void 0);\n\n__decorate$2([Property(false)], MenuItem.prototype, \"separator\", void 0);\n\n__decorate$2([Collection([], MenuItem)], MenuItem.prototype, \"items\", void 0);\n\n__decorate$2([Property('')], MenuItem.prototype, \"text\", void 0);\n\n__decorate$2([Property('')], MenuItem.prototype, \"url\", void 0);\n/**\n * Animation configuration settings.\n */\n\n\nclass MenuAnimationSettings extends ChildProperty {}\n\n__decorate$2([Property('SlideDown')], MenuAnimationSettings.prototype, \"effect\", void 0);\n\n__decorate$2([Property(400)], MenuAnimationSettings.prototype, \"duration\", void 0);\n\n__decorate$2([Property('ease')], MenuAnimationSettings.prototype, \"easing\", void 0);\n/**\n * Base class for Menu and ContextMenu components.\n *\n *  @private\n */\n\n\nlet MenuBase = class MenuBase extends Component {\n  /**\n   * Constructor for creating the widget.\n   *\n   * @private\n   * @param {MenuBaseModel} options - Specifies the menu base model\n   * @param {string | HTMLUListElement} element - Specifies the element\n   */\n  constructor(options, element) {\n    super(options, element);\n    this.navIdx = [];\n    this.animation = new Animation({});\n    this.isTapHold = false;\n    this.tempItem = [];\n    this.showSubMenuOn = 'Auto';\n  }\n  /**\n   * Initialized third party configuration settings.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    if (!this.isMenu) {\n      let ul;\n\n      if (this.element.tagName === 'EJS-CONTEXTMENU') {\n        ul = this.createElement('ul', {\n          id: getUniqueID(this.getModuleName()),\n          className: 'e-control e-lib e-' + this.getModuleName()\n        });\n        const ejInst = getValue('ej2_instances', this.element);\n        removeClass([this.element], ['e-control', 'e-lib', 'e-' + this.getModuleName()]);\n        this.clonedElement = this.element;\n        this.element = ul;\n        setValue('ej2_instances', ejInst, this.element);\n      } else {\n        ul = this.createElement('ul', {\n          id: getUniqueID(this.getModuleName())\n        });\n        append([].slice.call(this.element.cloneNode(true).children), ul);\n        const refEle = this.element.nextElementSibling;\n\n        if (refEle) {\n          this.element.parentElement.insertBefore(ul, refEle);\n        } else {\n          this.element.parentElement.appendChild(ul);\n        }\n\n        this.clonedElement = ul;\n      }\n\n      this.clonedElement.style.display = 'none';\n    }\n\n    if (this.element.tagName === 'EJS-MENU') {\n      let ele = this.element;\n      const ejInstance = getValue('ej2_instances', ele);\n      const ul = this.createElement('ul');\n      const wrapper = this.createElement('EJS-MENU', {\n        className: 'e-' + this.getModuleName() + '-wrapper'\n      });\n\n      for (let idx = 0, len = ele.attributes.length; idx < len; idx++) {\n        ul.setAttribute(ele.attributes[idx].nodeName, ele.attributes[idx].nodeValue);\n      }\n\n      ele.parentNode.insertBefore(wrapper, ele);\n      detach(ele);\n      ele = ul;\n      wrapper.appendChild(ele);\n      setValue('ej2_instances', ejInstance, ele);\n      this.clonedElement = wrapper;\n      this.element = ele;\n\n      if (!this.element.id) {\n        this.element.id = getUniqueID(this.getModuleName());\n      }\n    }\n  }\n  /**\n   * Initialize the control rendering.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.initialize();\n    this.renderItems();\n    this.wireEvents();\n    this.renderComplete();\n    const wrapper = this.getWrapper();\n\n    if (this.template && this.enableScrolling && (this.isReact || this.isAngular)) {\n      requestAnimationFrame(() => {\n        addScrolling(this.createElement, wrapper, this.element, 'hscroll', this.enableRtl);\n      });\n    }\n  }\n\n  initialize() {\n    let wrapper = this.getWrapper();\n\n    if (!wrapper) {\n      wrapper = this.createElement('div', {\n        className: 'e-' + this.getModuleName() + '-wrapper'\n      });\n\n      if (this.isMenu) {\n        this.element.parentElement.insertBefore(wrapper, this.element);\n      } else {\n        document.body.appendChild(wrapper);\n      }\n    }\n\n    if (this.cssClass) {\n      addClass([wrapper], this.cssClass.split(' '));\n    }\n\n    if (this.enableRtl) {\n      wrapper.classList.add(RTL);\n    }\n\n    wrapper.appendChild(this.element);\n\n    if (this.isMenu && this.hamburgerMode) {\n      if (!this.target) {\n        this.createHeaderContainer(wrapper);\n      }\n    }\n\n    this.defaultOption = this.showItemOnClick;\n  }\n\n  renderItems() {\n    if (!this.items.length) {\n      const items = ListBase.createJsonFromElement(this.element, {\n        fields: {\n          child: 'items'\n        }\n      });\n      this.setProperties({\n        items: items\n      }, true);\n\n      if (isBlazor() && !this.isMenu) {\n        this.element = this.removeChildElement(this.element);\n      } else {\n        this.element.innerHTML = '';\n      }\n    }\n\n    const ul = this.createItems(this.items);\n    append(Array.prototype.slice.call(ul.children), this.element);\n    this.element.classList.add('e-menu-parent');\n\n    if (this.isMenu) {\n      if (!this.hamburgerMode && this.element.classList.contains('e-vertical')) {\n        this.setBlankIconStyle(this.element);\n      }\n\n      if (this.enableScrolling) {\n        const wrapper = this.getWrapper();\n\n        if (this.element.classList.contains('e-vertical')) {\n          addScrolling(this.createElement, wrapper, this.element, 'vscroll', this.enableRtl);\n        } else {\n          addScrolling(this.createElement, wrapper, this.element, 'hscroll', this.enableRtl);\n        }\n      }\n    }\n  }\n\n  wireEvents() {\n    const wrapper = this.getWrapper();\n\n    if (this.target) {\n      let target;\n      const targetElems = selectAll(this.target);\n\n      for (let i = 0, len = targetElems.length; i < len; i++) {\n        target = targetElems[i];\n\n        if (this.isMenu) {\n          EventHandler.add(target, 'click', this.menuHeaderClickHandler, this);\n        } else {\n          if (Browser.isIos) {\n            new Touch(target, {\n              tapHold: this.touchHandler.bind(this)\n            });\n          } else {\n            EventHandler.add(target, 'contextmenu', this.cmenuHandler, this);\n          }\n        }\n      }\n\n      this.targetElement = target;\n\n      if (!this.isMenu) {\n        EventHandler.add(this.targetElement, 'scroll', this.scrollHandler, this);\n\n        for (const parent of getScrollableParent(this.targetElement)) {\n          EventHandler.add(parent, 'scroll', this.scrollHandler, this);\n        }\n      }\n    }\n\n    if (!Browser.isDevice) {\n      this.delegateMoverHandler = this.moverHandler.bind(this);\n      this.delegateMouseDownHandler = this.mouseDownHandler.bind(this);\n      EventHandler.add(this.isMenu ? document : wrapper, 'mouseover', this.delegateMoverHandler, this);\n      EventHandler.add(document, 'mousedown', this.delegateMouseDownHandler, this);\n    }\n\n    this.delegateClickHandler = this.clickHandler.bind(this);\n    EventHandler.add(document, 'click', this.delegateClickHandler, this);\n    this.wireKeyboardEvent(wrapper);\n    this.rippleFn = rippleEffect(wrapper, {\n      selector: '.' + ITEM\n    });\n  }\n\n  wireKeyboardEvent(element) {\n    const keyConfigs = {\n      downarrow: DOWNARROW,\n      uparrow: UPARROW,\n      enter: ENTER,\n      leftarrow: LEFTARROW,\n      rightarrow: RIGHTARROW,\n      escape: ESCAPE\n    };\n\n    if (this.isMenu) {\n      keyConfigs.home = HOME;\n      keyConfigs.end = END;\n      keyConfigs.tab = TAB;\n    }\n\n    new KeyboardEvents(element, {\n      keyAction: this.keyBoardHandler.bind(this),\n      keyConfigs: keyConfigs\n    });\n  }\n\n  mouseDownHandler(e) {\n    if (closest(e.target, '.e-' + this.getModuleName() + '-wrapper') !== this.getWrapper() && !closest(e.target, '.e-' + this.getModuleName() + '-popup')) {\n      this.closeMenu(this.isMenu ? null : this.navIdx.length, e);\n    }\n  }\n\n  keyBoardHandler(e) {\n    let actionName = '';\n    const trgt = e.target;\n    let actionNeeded = this.isMenu && !this.hamburgerMode && !this.element.classList.contains('e-vertical') && this.navIdx.length < 1;\n    e.preventDefault();\n\n    if (this.enableScrolling && e.keyCode === 13 && trgt.classList.contains('e-scroll-nav')) {\n      this.removeLIStateByClass([FOCUSED, SELECTED], [closest(trgt, '.e-' + this.getModuleName() + '-wrapper')]);\n    }\n\n    if (actionNeeded) {\n      switch (e.action) {\n        case RIGHTARROW:\n          actionName = RIGHTARROW;\n          e.action = DOWNARROW;\n          break;\n\n        case LEFTARROW:\n          actionName = LEFTARROW;\n          e.action = UPARROW;\n          break;\n\n        case DOWNARROW:\n          actionName = DOWNARROW;\n          e.action = RIGHTARROW;\n          break;\n\n        case UPARROW:\n          actionName = UPARROW;\n          e.action = '';\n          break;\n      }\n    } else if (this.enableRtl) {\n      switch (e.action) {\n        case LEFTARROW:\n          actionNeeded = true;\n          actionName = LEFTARROW;\n          e.action = RIGHTARROW;\n          break;\n\n        case RIGHTARROW:\n          actionNeeded = true;\n          actionName = RIGHTARROW;\n          e.action = LEFTARROW;\n          break;\n      }\n    }\n\n    switch (e.action) {\n      case DOWNARROW:\n      case UPARROW:\n      case END:\n      case HOME:\n      case TAB:\n        this.upDownKeyHandler(e);\n        break;\n\n      case RIGHTARROW:\n        this.rightEnterKeyHandler(e);\n        break;\n\n      case LEFTARROW:\n        this.leftEscKeyHandler(e);\n        break;\n\n      case ENTER:\n        if (this.hamburgerMode && trgt.tagName === 'SPAN' && trgt.classList.contains('e-menu-icon')) {\n          this.menuHeaderClickHandler(e);\n        } else {\n          this.rightEnterKeyHandler(e);\n        }\n\n        break;\n\n      case ESCAPE:\n        this.leftEscKeyHandler(e);\n        break;\n    }\n\n    if (actionNeeded) {\n      e.action = actionName;\n    }\n  }\n\n  upDownKeyHandler(e) {\n    const cul = this.getUlByNavIdx();\n    const defaultIdx = e.action === DOWNARROW || e.action === HOME || e.action === TAB ? 0 : cul.childElementCount - 1;\n    let fliIdx = defaultIdx;\n    const fli = this.getLIByClass(cul, FOCUSED);\n\n    if (fli) {\n      if (e.action !== END && e.action !== HOME) {\n        fliIdx = this.getIdx(cul, fli);\n      }\n\n      fli.classList.remove(FOCUSED);\n\n      if (e.action !== END && e.action !== HOME) {\n        if (e.action === DOWNARROW) {\n          fliIdx++;\n        } else {\n          fliIdx--;\n        }\n\n        if (fliIdx === (e.action === DOWNARROW ? cul.childElementCount : -1)) {\n          fliIdx = defaultIdx;\n        }\n      }\n    }\n\n    const cli = cul.children[fliIdx];\n    fliIdx = this.isValidLI(cli, fliIdx, e.action);\n    cul.children[fliIdx].classList.add(FOCUSED);\n    cul.children[fliIdx].focus();\n  }\n\n  isValidLI(cli, index, action) {\n    const cul = this.getUlByNavIdx();\n\n    if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {\n      if (action === DOWNARROW || action === RIGHTARROW) {\n        index++;\n      } else {\n        index--;\n      }\n    }\n\n    cli = cul.children[index];\n\n    if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {\n      index = this.isValidLI(cli, index, action);\n    }\n\n    return index;\n  }\n\n  getUlByNavIdx(navIdxLen = this.navIdx.length) {\n    if (this.isMenu) {\n      const popup = [this.getWrapper()].concat([].slice.call(selectAll('.' + POPUP)))[navIdxLen];\n      return isNullOrUndefined(popup) ? null : select('.e-menu-parent', popup);\n    } else {\n      return this.getWrapper().children[navIdxLen];\n    }\n  }\n\n  rightEnterKeyHandler(e) {\n    let eventArgs;\n    const cul = this.getUlByNavIdx();\n    const fli = this.getLIByClass(cul, FOCUSED);\n\n    if (fli) {\n      const fliIdx = this.getIdx(cul, fli);\n      const navIdx = this.navIdx.concat(fliIdx);\n      const item = this.getItem(navIdx);\n\n      if (item.items.length) {\n        this.navIdx.push(fliIdx);\n        this.keyType = 'right';\n        this.action = e.action;\n        this.openMenu(fli, item, -1, -1, e);\n      } else {\n        if (e.action === ENTER) {\n          if (this.isMenu && this.navIdx.length === 0) {\n            this.removeLIStateByClass([SELECTED], [this.getWrapper()]);\n          } else {\n            fli.classList.remove(FOCUSED);\n          }\n\n          fli.classList.add(SELECTED);\n          eventArgs = {\n            element: fli,\n            item: item,\n            event: e\n          };\n          this.trigger('select', eventArgs);\n          this.closeMenu(null, e);\n        }\n      }\n    }\n  }\n\n  leftEscKeyHandler(e) {\n    if (this.navIdx.length) {\n      this.keyType = 'left';\n      this.closeMenu(this.navIdx.length, e);\n    } else {\n      if (e.action === ESCAPE) {\n        this.closeMenu(null, e);\n      }\n    }\n  }\n\n  scrollHandler(e) {\n    this.closeMenu(null, e);\n  }\n\n  touchHandler(e) {\n    this.isTapHold = true;\n    this.cmenuHandler(e.originalEvent);\n  }\n\n  cmenuHandler(e) {\n    e.preventDefault();\n    this.isCMenu = true;\n    this.pageX = e.changedTouches ? e.changedTouches[0].pageX + 1 : e.pageX + 1;\n    this.pageY = e.changedTouches ? e.changedTouches[0].pageY + 1 : e.pageY + 1;\n    this.closeMenu(null, e);\n\n    if (this.isCMenu) {\n      if (this.canOpen(e.target)) {\n        this.openMenu(null, null, this.pageY, this.pageX, e);\n      }\n\n      this.isCMenu = false;\n    }\n  } // eslint:disable-next-line:max-func-body-length\n\n\n  closeMenu(ulIndex = 0, e = null, isIterated) {\n    if (this.isMenuVisible()) {\n      let sli;\n      let item;\n      const wrapper = this.getWrapper();\n      let beforeCloseArgs;\n      let items;\n      const popups = this.getPopups();\n      let isClose = false;\n      const cnt = this.isMenu ? popups.length + 1 : wrapper.childElementCount;\n      const ul = this.isMenu && cnt !== 1 ? select('.e-ul', popups[cnt - 2]) : selectAll('.e-menu-parent', wrapper)[cnt - 1];\n\n      if (this.isMenu && ul.classList.contains('e-menu')) {\n        sli = this.getLIByClass(ul, SELECTED);\n\n        if (sli) {\n          sli.classList.remove(SELECTED);\n        }\n\n        isClose = true;\n      }\n\n      if (!isClose) {\n        const liElem = e && e.target && this.getLI(e.target);\n\n        if (liElem) {\n          this.cli = liElem;\n        } else {\n          this.cli = ul.children[0];\n        }\n\n        item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n        items = item ? item.items : this.items;\n        beforeCloseArgs = {\n          element: ul,\n          parentItem: item,\n          items: items,\n          event: e,\n          cancel: false,\n          isFocused: true\n        };\n        this.trigger('beforeClose', beforeCloseArgs, observedCloseArgs => {\n          let popupEle;\n          let closeArgs;\n          let popupId = '';\n          let popupObj;\n          const isOpen = !observedCloseArgs.cancel;\n\n          if (isOpen || this.isCMenu) {\n            if (this.isMenu) {\n              popupEle = closest(ul, '.' + POPUP);\n\n              if (this.hamburgerMode) {\n                popupEle.parentElement.style.minHeight = '';\n                closest(ul, '.e-menu-item').setAttribute('aria-expanded', 'false');\n              }\n\n              this.unWireKeyboardEvent(popupEle);\n              destroyScroll(getInstance(popupEle.children[0], VScroll), popupEle.children[0]);\n              popupObj = getInstance(popupEle, Popup);\n              popupObj.hide();\n              popupId = popupEle.id;\n              popupObj.destroy();\n              detach(popupEle);\n            } else {\n              this.toggleAnimation(ul, false);\n            }\n\n            closeArgs = {\n              element: ul,\n              parentItem: item,\n              items: items\n            };\n            this.trigger('onClose', closeArgs);\n            this.navIdx.pop();\n          }\n\n          this.updateReactTemplate();\n          let trgtliId;\n          let closedLi;\n          let trgtLi;\n          const trgtpopUp = this.getWrapper() && this.getUlByNavIdx();\n\n          if (this.isCMenu) {\n            if (this.canOpen(e.target)) {\n              this.openMenu(null, null, this.pageY, this.pageX, e);\n            }\n\n            this.isCMenu = false;\n          }\n\n          if (this.isMenu && trgtpopUp && popupId.length) {\n            trgtliId = new RegExp('(.*)-ej2menu-' + this.element.id + '-popup').exec(popupId)[1];\n            closedLi = trgtpopUp.querySelector('[id=\"' + trgtliId + '\"]');\n            trgtLi = liElem && trgtpopUp.querySelector('[id=\"' + liElem.id + '\"]');\n          }\n\n          const submenus = liElem && liElem.querySelectorAll('.e-menu-item');\n\n          if (isOpen && this.hamburgerMode && ulIndex && !submenus.length) {\n            this.afterCloseMenu(e);\n          } else if (isOpen && !this.hamburgerMode && this.navIdx.length && closedLi && !trgtLi && this.keyType !== \"left\") {\n            let ele = e && e.target.classList.contains('e-vscroll') ? closest(e.target, '.e-menu-wrapper') : null;\n\n            if (ele) {\n              ele = ele.querySelector('.e-menu-item');\n\n              if (this.showItemOnClick || ele && this.getIndex(ele.id, true).length <= this.navIdx.length) {\n                this.closeMenu(this.navIdx[this.navIdx.length - 1], e, true);\n              }\n            } else {\n              this.closeMenu(this.navIdx[this.navIdx.length - 1], e);\n            }\n          } else if (isOpen && !isIterated && !ulIndex && (this.hamburgerMode && this.navIdx.length || this.navIdx.length === 1)) {\n            this.closeMenu(null, e);\n          } else if (isOpen && isNullOrUndefined(ulIndex) && this.navIdx.length) {\n            this.closeMenu(null, e);\n          } else if (isOpen && !this.isMenu && !ulIndex && this.navIdx.length === 0 && !this.isMenusClosed) {\n            this.isMenusClosed = true;\n            this.closeMenu(0, e);\n          } else if (isOpen && this.isMenu && e && e.target && this.navIdx.length !== 0 && closest(e.target, '.e-menu-parent.e-control')) {\n            this.closeMenu(0, e);\n          } else if (isOpen && !this.isMenu && selectAll('.e-menu-parent', wrapper)[ulIndex - 1] && e.which === 3) {\n            this.closeMenu(null, e);\n          } else {\n            if (isOpen && (this.keyType === 'right' || this.keyType === 'click')) {\n              this.afterCloseMenu(e);\n            } else {\n              const cul = this.getUlByNavIdx();\n              const sli = this.getLIByClass(cul, SELECTED);\n\n              if (sli) {\n                sli.setAttribute('aria-expanded', 'false');\n                sli.classList.remove(SELECTED);\n\n                if (observedCloseArgs.isFocused && liElem || this.keyType === \"left\") {\n                  sli.classList.add(FOCUSED);\n                  sli.focus();\n                }\n              }\n\n              if (!isOpen && this.hamburgerMode && liElem && liElem.getAttribute('aria-expanded') === 'false' && liElem.getAttribute('aria-haspopup') === 'true') {\n                if (closest(liElem, '.e-menu-parent.e-control')) {\n                  this.navIdx = [];\n                } else {\n                  this.navIdx.pop();\n                }\n\n                this.navIdx.push(this.cliIdx);\n                const item = this.getItem(this.navIdx);\n                liElem.setAttribute('aria-expanded', 'true');\n                this.openMenu(liElem, item, -1, -1, e);\n              }\n            }\n\n            if (this.navIdx.length < 1) {\n              if (this.showSubMenuOn === 'Hover' || this.showSubMenuOn === 'Click') {\n                this.showItemOnClick = this.defaultOption;\n                this.showSubMenuOn = 'Auto';\n              }\n            }\n          }\n\n          this.removeStateWrapper();\n        });\n      }\n    }\n  }\n\n  updateReactTemplate() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact && this.template && this.navIdx.length === 0) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const portals = this.portals.splice(0, this.items.length);\n      this.clearTemplate(['template']); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      this.portals = portals;\n      this.renderReactTemplates();\n    }\n  }\n\n  getMenuItemModel(item, level) {\n    if (isNullOrUndefined(item)) {\n      return null;\n    }\n\n    if (isNullOrUndefined(level)) {\n      level = 0;\n    }\n\n    const fields = this.getFields(level);\n    return {\n      text: item[fields.text],\n      id: item[fields.id],\n      items: item[fields.child],\n      separator: item[fields.separator],\n      iconCss: item[fields.iconCss],\n      url: item[fields.url]\n    };\n  }\n\n  getPopups() {\n    const popups = [];\n    [].slice.call(document.querySelectorAll('.' + POPUP)).forEach(elem => {\n      if (!isNullOrUndefined(elem.querySelector('.' + ITEM)) && this.getIndex(elem.querySelector('.' + ITEM).id, true).length) {\n        popups.push(elem);\n      }\n    });\n    return popups;\n  }\n\n  isMenuVisible() {\n    return this.navIdx.length > 0 || this.element.classList.contains('e-contextmenu') && isVisible(this.element).valueOf();\n  }\n\n  canOpen(target) {\n    let canOpen = true;\n\n    if (this.filter) {\n      canOpen = false;\n      const filter = this.filter.split(' ');\n\n      for (let i = 0, len = filter.length; i < len; i++) {\n        if (closest(target, '.' + filter[i])) {\n          canOpen = true;\n          break;\n        }\n      }\n    }\n\n    return canOpen;\n  }\n\n  openMenu(li, item, top = 0, left = 0, e = null, target = this.targetElement) {\n    const wrapper = this.getWrapper();\n    this.lItem = li;\n    const elemId = this.element.id !== '' ? this.element.id : 'menu';\n    this.isMenusClosed = false;\n\n    if (isNullOrUndefined(top)) {\n      top = -1;\n    }\n\n    if (isNullOrUndefined(left)) {\n      left = -1;\n    }\n\n    if (li) {\n      this.uList = this.createItems(item[this.getField('children', this.navIdx.length - 1)]);\n\n      if (!this.isMenu && Browser.isDevice) {\n        wrapper.lastChild.style.display = 'none';\n        const data = {\n          text: item[this.getField('text')].toString(),\n          iconCss: ICONS + ' e-previous'\n        };\n        const hdata = new MenuItem(this.items[0], 'items', data, true);\n        const hli = this.createItems([hdata]).children[0];\n        hli.classList.add(HEADER);\n        this.uList.insertBefore(hli, this.uList.children[0]);\n      }\n\n      if (this.isMenu) {\n        this.popupWrapper = this.createElement('div', {\n          className: 'e-' + this.getModuleName() + '-wrapper ' + POPUP,\n          id: li.id + '-ej2menu-' + elemId + '-popup'\n        });\n\n        if (this.hamburgerMode) {\n          top = li.offsetHeight;\n          li.appendChild(this.popupWrapper);\n        } else {\n          document.body.appendChild(this.popupWrapper);\n        }\n\n        this.isNestedOrVertical = this.element.classList.contains('e-vertical') || this.navIdx.length !== 1;\n        this.popupObj = this.generatePopup(this.popupWrapper, this.uList, li, this.isNestedOrVertical);\n\n        if (this.template) {\n          this.renderReactTemplates();\n        }\n\n        if (this.hamburgerMode) {\n          this.calculateIndentSize(this.uList, li);\n        } else {\n          if (this.cssClass) {\n            addClass([this.popupWrapper], this.cssClass.split(' '));\n          }\n\n          this.popupObj.hide();\n        }\n\n        if (!this.hamburgerMode && !this.showItemOnClick && this.hoverDelay) {\n          window.clearInterval(this.timer);\n          this.timer = window.setTimeout(() => {\n            this.triggerBeforeOpen(li, this.uList, item, e, 0, 0, 'menu');\n          }, this.hoverDelay);\n        } else {\n          this.triggerBeforeOpen(li, this.uList, item, e, 0, 0, 'menu');\n        }\n      } else {\n        this.uList.style.zIndex = this.element.style.zIndex;\n        wrapper.appendChild(this.uList);\n\n        if (!this.showItemOnClick && this.hoverDelay) {\n          window.clearInterval(this.timer);\n          this.timer = window.setTimeout(() => {\n            this.triggerBeforeOpen(li, this.uList, item, e, top, left, 'none');\n          }, this.hoverDelay);\n        } else {\n          this.triggerBeforeOpen(li, this.uList, item, e, top, left, 'none');\n        }\n      }\n    } else {\n      this.uList = this.element;\n      this.uList.style.zIndex = getZindexPartial(target ? target : this.element).toString();\n      this.triggerBeforeOpen(li, this.uList, item, e, top, left, 'none');\n    }\n  }\n\n  calculateIndentSize(ul, li) {\n    const liStyle = getComputedStyle(li);\n    let liIndent = parseInt(liStyle.textIndent, 10);\n\n    if (this.navIdx.length < 2 && !li.classList.contains('e-blankicon')) {\n      liIndent *= 2;\n    } else {\n      liIndent += liIndent / 4;\n    }\n\n    ul.style.textIndent = liIndent + 'px';\n    const blankIconElem = ul.querySelectorAll('.e-blankicon');\n\n    if (blankIconElem && blankIconElem.length) {\n      const menuIconElem = ul.querySelector('.e-menu-icon');\n      const menuIconElemStyle = getComputedStyle(menuIconElem);\n      const blankIconIndent = parseInt(menuIconElemStyle.marginRight, 10) + menuIconElem.offsetWidth + liIndent;\n\n      for (let i = 0; i < blankIconElem.length; i++) {\n        blankIconElem[i].style.textIndent = blankIconIndent + 'px';\n      }\n    }\n  }\n\n  generatePopup(popupWrapper, ul, li, isNestedOrVertical) {\n    const popupObj = new Popup(popupWrapper, {\n      actionOnScroll: this.hamburgerMode ? 'none' : 'reposition',\n      relateTo: li,\n      collision: this.hamburgerMode ? {\n        X: 'none',\n        Y: 'none'\n      } : {\n        X: isNestedOrVertical || this.enableRtl ? 'none' : 'flip',\n        Y: 'fit'\n      },\n      position: isNestedOrVertical && !this.hamburgerMode ? {\n        X: 'right',\n        Y: 'top'\n      } : {\n        X: 'left',\n        Y: 'bottom'\n      },\n      targetType: 'relative',\n      enableRtl: this.enableRtl,\n      content: ul,\n      open: () => {\n        const scrollEle = select('.e-menu-vscroll', popupObj.element);\n\n        if (scrollEle) {\n          scrollEle.style.height = 'inherit';\n          scrollEle.style.maxHeight = '';\n        }\n\n        const ul = select('.e-ul', popupObj.element);\n        popupObj.element.style.maxHeight = '';\n        ul.focus();\n        this.triggerOpen(ul);\n      }\n    });\n    return popupObj;\n  }\n\n  createHeaderContainer(wrapper) {\n    wrapper = wrapper || this.getWrapper();\n    const spanElem = this.createElement('span', {\n      className: 'e-' + this.getModuleName() + '-header'\n    });\n    const tempTitle = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(this.title) : this.title;\n    const spanTitle = this.createElement('span', {\n      className: 'e-' + this.getModuleName() + '-title',\n      innerHTML: tempTitle\n    });\n    const spanIcon = this.createElement('span', {\n      className: 'e-icons e-' + this.getModuleName() + '-icon',\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    spanElem.appendChild(spanTitle);\n    spanElem.appendChild(spanIcon);\n    wrapper.insertBefore(spanElem, this.element);\n  }\n\n  openHamburgerMenu(e) {\n    if (this.hamburgerMode) {\n      this.triggerBeforeOpen(null, this.element, null, e, 0, 0, 'hamburger');\n    }\n  }\n\n  closeHamburgerMenu(e) {\n    const beforeCloseArgs = {\n      element: this.element,\n      parentItem: null,\n      event: e,\n      items: this.items,\n      cancel: false\n    };\n    this.trigger('beforeClose', beforeCloseArgs, observedHamburgerCloseArgs => {\n      if (!observedHamburgerCloseArgs.cancel) {\n        this.closeMenu(null, e);\n        this.element.classList.add('e-hide-menu');\n        this.trigger('onClose', {\n          element: this.element,\n          parentItem: null,\n          items: this.items\n        });\n      }\n    });\n  }\n\n  callFit(element, x, y, top, left) {\n    return fit(element, null, {\n      X: x,\n      Y: y\n    }, {\n      top: top,\n      left: left\n    });\n  }\n\n  triggerBeforeOpen(li, ul, item, e, top, left, type) {\n    const items = li ? item[this.getField('children', this.navIdx.length - 1)] : this.items;\n    const eventArgs = {\n      element: ul,\n      items: items,\n      parentItem: item,\n      event: e,\n      cancel: false,\n      top: top,\n      left: left,\n      showSubMenuOn: 'Auto'\n    };\n    const menuType = type;\n    this.trigger('beforeOpen', eventArgs, observedOpenArgs => {\n      switch (menuType) {\n        case 'menu':\n          if (!this.hamburgerMode) {\n            if (observedOpenArgs.showSubMenuOn !== 'Auto') {\n              this.showItemOnClick = !this.defaultOption;\n              this.showSubMenuOn = observedOpenArgs.showSubMenuOn;\n            }\n\n            this.top = observedOpenArgs.top;\n            this.left = observedOpenArgs.left;\n          }\n\n          this.popupWrapper.style.display = 'block';\n\n          if (!this.hamburgerMode) {\n            this.popupWrapper.style.maxHeight = this.popupWrapper.getBoundingClientRect().height + 'px';\n\n            if (this.enableScrolling) {\n              addScrolling(this.createElement, this.popupWrapper, this.uList, 'vscroll', this.enableRtl);\n            }\n\n            this.checkScrollOffset(e);\n          }\n\n          if (!this.hamburgerMode && !this.left && !this.top) {\n            this.popupObj.refreshPosition(this.lItem, true);\n            this.left = parseInt(this.popupWrapper.style.left, 10);\n            this.top = parseInt(this.popupWrapper.style.top, 10);\n\n            if (this.enableRtl) {\n              this.left = this.isNestedOrVertical ? this.left - this.popupWrapper.offsetWidth - this.lItem.parentElement.offsetWidth + 2 : this.left - this.popupWrapper.offsetWidth + this.lItem.offsetWidth;\n            }\n\n            if (this.template && (this.isReact || this.isAngular)) {\n              requestAnimationFrame(() => {\n                this.collision();\n                this.popupWrapper.style.display = '';\n              });\n            } else {\n              this.collision();\n              this.popupWrapper.style.display = '';\n            }\n          } else {\n            this.popupObj.collision = {\n              X: 'none',\n              Y: 'none'\n            };\n            this.popupWrapper.style.display = '';\n          }\n\n          break;\n\n        case 'none':\n          this.top = observedOpenArgs.top;\n          this.left = observedOpenArgs.left;\n          break;\n\n        case 'hamburger':\n          if (!observedOpenArgs.cancel) {\n            this.element.classList.remove('e-hide-menu');\n            this.triggerOpen(this.element);\n          }\n\n          break;\n      }\n\n      if (menuType !== 'hamburger') {\n        if (observedOpenArgs.cancel) {\n          if (this.isMenu) {\n            this.popupObj.destroy();\n            detach(this.popupWrapper);\n          } else if (ul.className.indexOf('e-ul') > -1) {\n            detach(ul);\n          }\n\n          this.navIdx.pop();\n        } else {\n          if (this.isMenu) {\n            if (this.hamburgerMode) {\n              this.popupWrapper.style.top = this.top + 'px';\n              this.popupWrapper.style.left = 0 + 'px';\n              this.toggleAnimation(this.popupWrapper);\n            } else {\n              this.setBlankIconStyle(this.popupWrapper);\n              this.wireKeyboardEvent(this.popupWrapper);\n              rippleEffect(this.popupWrapper, {\n                selector: '.' + ITEM\n              });\n              this.popupWrapper.style.left = this.left + 'px';\n              this.popupWrapper.style.top = this.top + 'px';\n              const animationOptions = this.animationSettings.effect !== 'None' ? {\n                name: this.animationSettings.effect,\n                duration: this.animationSettings.duration,\n                timingFunction: this.animationSettings.easing\n              } : null;\n              this.popupObj.show(animationOptions, this.lItem);\n            }\n          } else {\n            this.setBlankIconStyle(this.uList);\n            this.setPosition(this.lItem, this.uList, this.top, this.left);\n            this.toggleAnimation(this.uList);\n          }\n        }\n      }\n\n      if (this.keyType === 'right') {\n        let cul = this.getUlByNavIdx();\n        li.classList.remove(FOCUSED);\n\n        if (this.isMenu && this.navIdx.length === 1) {\n          this.removeLIStateByClass([SELECTED], [this.getWrapper()]);\n        }\n\n        li.classList.add(SELECTED);\n\n        if (this.action === ENTER) {\n          const eventArgs = {\n            element: li,\n            item: item,\n            event: e\n          };\n          this.trigger('select', eventArgs);\n        }\n\n        li.focus();\n        cul = this.getUlByNavIdx();\n        const index = this.isValidLI(cul.children[0], 0, this.action);\n        cul.children[index].classList.add(FOCUSED);\n        cul.children[index].focus();\n      }\n    });\n  }\n\n  collision() {\n    let collide;\n    collide = isCollide(this.popupWrapper, null, this.left, this.top);\n\n    if ((this.isNestedOrVertical || this.enableRtl) && (collide.indexOf('right') > -1 || collide.indexOf('left') > -1)) {\n      this.popupObj.collision.X = 'none';\n      const offWidth = closest(this.lItem, '.e-' + this.getModuleName() + '-wrapper').offsetWidth;\n      this.left = this.enableRtl ? calculatePosition(this.lItem, this.isNestedOrVertical ? 'right' : 'left', 'top').left : this.left - this.popupWrapper.offsetWidth - offWidth + 2;\n    }\n\n    collide = isCollide(this.popupWrapper, null, this.left, this.top);\n\n    if (collide.indexOf('left') > -1 || collide.indexOf('right') > -1) {\n      this.left = this.callFit(this.popupWrapper, true, false, this.top, this.left).left;\n    }\n\n    this.popupWrapper.style.left = this.left + 'px';\n  }\n\n  setBlankIconStyle(menu) {\n    const blankIconList = [].slice.call(menu.getElementsByClassName('e-blankicon'));\n\n    if (!blankIconList.length) {\n      return;\n    }\n\n    const iconLi = menu.querySelector('.e-menu-item:not(.e-blankicon):not(.e-separator)');\n    const icon = iconLi.querySelector('.e-menu-icon');\n\n    if (!icon) {\n      return;\n    }\n\n    const cssProp = this.enableRtl ? {\n      padding: 'paddingRight',\n      margin: 'marginLeft'\n    } : {\n      padding: 'paddingLeft',\n      margin: 'marginRight'\n    };\n    const iconCssProps = getComputedStyle(icon);\n    let iconSize = parseInt(iconCssProps.fontSize, 10);\n\n    if (!!parseInt(iconCssProps.width, 10) && parseInt(iconCssProps.width, 10) > iconSize) {\n      iconSize = parseInt(iconCssProps.width, 10);\n    } // eslint:disable\n\n\n    const size = `${iconSize + parseInt( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    iconCssProps[cssProp.margin], 10) + parseInt(getComputedStyle(iconLi)[cssProp.padding], 10)}px`;\n    blankIconList.forEach(li => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      li.style[cssProp.padding] = size;\n    }); // eslint:enable\n  }\n\n  checkScrollOffset(e) {\n    const wrapper = this.getWrapper();\n\n    if (wrapper.children[0].classList.contains('e-menu-hscroll') && this.navIdx.length === 1) {\n      const trgt = isNullOrUndefined(e) ? this.element : closest(e.target, '.' + ITEM);\n      const offsetEle = select('.e-hscroll-bar', wrapper);\n\n      if (offsetEle.scrollLeft > trgt.offsetLeft) {\n        offsetEle.scrollLeft -= offsetEle.scrollLeft - trgt.offsetLeft;\n      }\n\n      const offsetLeft = offsetEle.scrollLeft + offsetEle.offsetWidth;\n      const offsetRight = trgt.offsetLeft + trgt.offsetWidth;\n\n      if (offsetLeft < offsetRight) {\n        offsetEle.scrollLeft += offsetRight - offsetLeft;\n      }\n    }\n  }\n\n  setPosition(li, ul, top, left) {\n    const px = 'px';\n    this.toggleVisiblity(ul);\n\n    if (ul === this.element || left > -1 && top > -1) {\n      let collide = isCollide(ul, null, left, top);\n\n      if (collide.indexOf('right') > -1) {\n        left = left - ul.offsetWidth;\n      }\n\n      if (collide.indexOf('bottom') > -1) {\n        const offset = this.callFit(ul, false, true, top, left);\n        top = offset.top - 20;\n\n        if (top < 0) {\n          const newTop = pageYOffset + document.documentElement.clientHeight - ul.getBoundingClientRect().height;\n\n          if (newTop > -1) {\n            top = newTop;\n          }\n        }\n      }\n\n      collide = isCollide(ul, null, left, top);\n\n      if (collide.indexOf('left') > -1) {\n        const offset = this.callFit(ul, true, false, top, left);\n        left = offset.left;\n      }\n    } else {\n      if (Browser.isDevice) {\n        top = Number(this.element.style.top.replace(px, ''));\n        left = Number(this.element.style.left.replace(px, ''));\n      } else {\n        const x = this.enableRtl ? 'left' : 'right';\n        let offset = calculatePosition(li, x, 'top');\n        top = offset.top;\n        left = offset.left;\n        const collide = isCollide(ul, null, this.enableRtl ? left - ul.offsetWidth : left, top);\n        const xCollision = collide.indexOf('left') > -1 || collide.indexOf('right') > -1;\n\n        if (xCollision) {\n          offset = calculatePosition(li, this.enableRtl ? 'right' : 'left', 'top');\n          left = offset.left;\n        }\n\n        if (this.enableRtl || xCollision) {\n          left = this.enableRtl && xCollision ? left : left - ul.offsetWidth;\n        }\n\n        if (collide.indexOf('bottom') > -1) {\n          offset = this.callFit(ul, false, true, top, left);\n          top = offset.top;\n        }\n      }\n    }\n\n    this.toggleVisiblity(ul, false);\n    ul.style.top = top + px;\n    ul.style.left = left + px;\n  }\n\n  toggleVisiblity(ul, isVisible$$1 = true) {\n    ul.style.visibility = isVisible$$1 ? 'hidden' : '';\n    ul.style.display = isVisible$$1 ? 'block' : 'none';\n  }\n\n  createItems(items) {\n    const level = this.navIdx ? this.navIdx.length : 0;\n    const fields = this.getFields(level);\n    const showIcon = this.hasField(items, this.getField('iconCss', level));\n    const listBaseOptions = {\n      showIcon: showIcon,\n      moduleName: 'menu',\n      fields: fields,\n      template: this.template,\n      itemNavigable: true,\n      itemCreating: args => {\n        if (!args.curData[args.fields[fields.id]]) {\n          args.curData[args.fields[fields.id]] = getUniqueID('menuitem');\n        }\n\n        args.curData.htmlAttributes = {\n          role: 'menuitem',\n          tabindex: '-1'\n        };\n\n        if (this.isMenu && !args.curData[this.getField('separator', level)]) {\n          args.curData.htmlAttributes['aria-label'] = args.curData[args.fields.text];\n        }\n\n        if (args.curData[args.fields[fields.iconCss]] === '') {\n          args.curData[args.fields[fields.iconCss]] = null;\n        }\n      },\n      itemCreated: args => {\n        if (args.curData[this.getField('separator', level)]) {\n          args.item.classList.add(SEPARATOR);\n          args.item.removeAttribute('role');\n        }\n\n        if (showIcon && !args.curData[args.fields.iconCss] && !args.curData[this.getField('separator', level)]) {\n          args.item.classList.add('e-blankicon');\n        }\n\n        if (args.curData[args.fields.child] && args.curData[args.fields.child].length) {\n          const span = this.createElement('span', {\n            className: ICONS + ' ' + CARET\n          });\n          args.item.appendChild(span);\n          args.item.setAttribute('aria-haspopup', 'true');\n          args.item.setAttribute('aria-expanded', 'false');\n\n          if (!this.isMenu) {\n            args.item.removeAttribute('role');\n          }\n\n          args.item.classList.add('e-menu-caret-icon');\n        }\n\n        if (this.isMenu && this.template) {\n          args.item.setAttribute('id', args.curData[args.fields.id].toString());\n          args.item.removeAttribute('data-uid');\n\n          if (args.item.classList.contains('e-level-1')) {\n            args.item.classList.remove('e-level-1');\n          }\n\n          if (args.item.classList.contains('e-has-child')) {\n            args.item.classList.remove('e-has-child');\n          }\n        }\n\n        const eventArgs = {\n          item: args.curData,\n          element: args.item\n        };\n        this.trigger('beforeItemRender', eventArgs);\n      }\n    };\n    this.setProperties({\n      'items': this.items\n    }, true);\n\n    if (this.isMenu) {\n      listBaseOptions.templateID = this.element.id + TEMPLATE_PROPERTY;\n    }\n\n    const ul = ListBase.createList(this.createElement, items, listBaseOptions, !this.template, this);\n    ul.setAttribute('tabindex', '0');\n\n    if (this.isMenu) {\n      ul.setAttribute('role', 'menu');\n    }\n\n    return ul;\n  }\n\n  moverHandler(e) {\n    const trgt = e.target;\n    this.liTrgt = trgt;\n    const cli = this.getLI(trgt);\n    const wrapper = cli ? closest(cli, '.e-' + this.getModuleName() + '-wrapper') : this.getWrapper();\n    const hdrWrapper = this.getWrapper();\n    const regex = new RegExp('-ej2menu-(.*)-popup');\n    let ulId;\n    let isDifferentElem = false;\n\n    if (!wrapper) {\n      return;\n    }\n\n    if (wrapper.id !== '') {\n      ulId = regex.exec(wrapper.id)[1];\n    } else {\n      ulId = wrapper.querySelector('ul').id;\n    }\n\n    if (ulId !== this.element.id) {\n      this.removeLIStateByClass([FOCUSED, SELECTED], [this.getWrapper()]);\n\n      if (this.navIdx.length) {\n        isDifferentElem = true;\n      } else {\n        return;\n      }\n    }\n\n    if (cli && closest(cli, '.e-' + this.getModuleName() + '-wrapper') && !isDifferentElem) {\n      this.removeLIStateByClass([FOCUSED], this.isMenu ? [wrapper].concat(this.getPopups()) : [wrapper]);\n      this.removeLIStateByClass([FOCUSED], this.isMenu ? [hdrWrapper].concat(this.getPopups()) : [hdrWrapper]);\n      cli.classList.add(FOCUSED);\n\n      if (!this.showItemOnClick) {\n        this.clickHandler(e);\n      }\n    } else if (this.isMenu && this.showItemOnClick && !isDifferentElem) {\n      this.removeLIStateByClass([FOCUSED], [wrapper].concat(this.getPopups()));\n    }\n\n    if (this.isMenu) {\n      if (!this.showItemOnClick && trgt.parentElement !== wrapper && !closest(trgt, '.e-' + this.getModuleName() + '-popup') && (!cli || cli && !this.getIndex(cli.id, true).length) && this.showSubMenuOn !== 'Hover') {\n        this.removeLIStateByClass([FOCUSED], [wrapper]);\n\n        if (this.navIdx.length) {\n          this.isClosed = true;\n          this.closeMenu(null, e);\n        }\n      } else if (isDifferentElem && !this.showItemOnClick) {\n        if (this.navIdx.length) {\n          this.isClosed = true;\n          this.closeMenu(null, e);\n        }\n      }\n\n      if (!this.isClosed) {\n        this.removeStateWrapper();\n      }\n\n      this.isClosed = false;\n    }\n  }\n\n  removeStateWrapper() {\n    if (this.liTrgt) {\n      const wrapper = closest(this.liTrgt, '.e-menu-vscroll');\n\n      if (this.liTrgt.tagName === 'DIV' && wrapper) {\n        this.removeLIStateByClass([FOCUSED, SELECTED], [wrapper]);\n      }\n    }\n  }\n\n  removeLIStateByClass(classList$$1, element) {\n    let li;\n\n    for (let i = 0; i < element.length; i++) {\n      classList$$1.forEach(className => {\n        li = select('.' + className, element[i]);\n\n        if (li) {\n          li.classList.remove(className);\n        }\n      });\n    }\n  }\n\n  getField(propName, level = 0) {\n    const fieldName = this.fields[propName];\n    return typeof fieldName === 'string' ? fieldName : !fieldName[level] ? fieldName[fieldName.length - 1].toString() : fieldName[level].toString();\n  }\n\n  getFields(level = 0) {\n    return {\n      id: this.getField('itemId', level),\n      iconCss: this.getField('iconCss', level),\n      text: this.getField('text', level),\n      url: this.getField('url', level),\n      child: this.getField('children', level),\n      separator: this.getField('separator', level)\n    };\n  }\n\n  hasField(items, field) {\n    for (let i = 0, len = items.length; i < len; i++) {\n      if (items[i][field]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  menuHeaderClickHandler(e) {\n    if (closest(e.target, '.e-menu-wrapper').querySelector('ul.e-menu-parent').id !== this.element.id) {\n      return;\n    }\n\n    if (this.element.className.indexOf('e-hide-menu') > -1) {\n      this.openHamburgerMenu(e);\n    } else {\n      this.closeHamburgerMenu(e);\n    }\n  }\n\n  clickHandler(e) {\n    if (this.isTapHold) {\n      this.isTapHold = false;\n    } else {\n      const wrapper = this.getWrapper();\n      const trgt = e.target;\n      const cli = this.cli = this.getLI(trgt);\n      const regex = new RegExp('-ej2menu-(.*)-popup');\n      const cliWrapper = cli ? closest(cli, '.e-' + this.getModuleName() + '-wrapper') : null;\n      const isInstLI = cli && cliWrapper && (this.isMenu ? this.getIndex(cli.id, true).length > 0 : wrapper.firstElementChild.id === cliWrapper.firstElementChild.id);\n\n      if (Browser.isDevice && this.isMenu) {\n        this.removeLIStateByClass([FOCUSED], [wrapper].concat(this.getPopups()));\n        this.mouseDownHandler(e);\n      }\n\n      if (cli && cliWrapper && this.isMenu) {\n        const cliWrapperId = cliWrapper.id ? regex.exec(cliWrapper.id)[1] : cliWrapper.querySelector('.e-menu-parent').id;\n\n        if (this.element.id !== cliWrapperId) {\n          return;\n        }\n      }\n\n      if (isInstLI && e.type === 'click' && !cli.classList.contains(HEADER)) {\n        this.setLISelected(cli);\n        const navIdx = this.getIndex(cli.id, true);\n        const item = this.getItem(navIdx);\n        const eventArgs = {\n          element: cli,\n          item: item,\n          event: e\n        };\n        this.trigger('select', eventArgs);\n      }\n\n      if (isInstLI && (e.type === 'mouseover' || Browser.isDevice || this.showItemOnClick)) {\n        let ul;\n\n        if (cli.classList.contains(HEADER)) {\n          ul = wrapper.children[this.navIdx.length - 1];\n          this.toggleAnimation(ul);\n          const sli = this.getLIByClass(ul, SELECTED);\n\n          if (sli) {\n            sli.classList.remove(SELECTED);\n          }\n\n          detach(cli.parentNode);\n          this.navIdx.pop();\n        } else {\n          if (!cli.classList.contains(SEPARATOR)) {\n            this.showSubMenu = true;\n            const cul = cli.parentNode;\n            this.cliIdx = this.getIdx(cul, cli);\n\n            if (this.isMenu || !Browser.isDevice) {\n              const culIdx = this.isMenu ? Array.prototype.indexOf.call([wrapper].concat(this.getPopups()), closest(cul, '.' + 'e-' + this.getModuleName() + '-wrapper')) : this.getIdx(wrapper, cul);\n\n              if (this.navIdx[culIdx] === this.cliIdx) {\n                this.showSubMenu = false;\n              }\n\n              if (culIdx !== this.navIdx.length && (e.type !== 'mouseover' || this.showSubMenu)) {\n                const sli = this.getLIByClass(cul, SELECTED);\n\n                if (sli) {\n                  sli.classList.remove(SELECTED);\n                }\n\n                this.isClosed = true;\n                this.keyType = 'click';\n\n                if (this.showItemOnClick) {\n                  this.setLISelected(cli);\n                }\n\n                this.closeMenu(culIdx + 1, e);\n\n                if (this.showItemOnClick) {\n                  this.setLISelected(cli);\n                }\n              }\n            }\n\n            if (!this.isClosed) {\n              this.afterCloseMenu(e);\n            }\n\n            this.isClosed = false;\n          }\n        }\n      } else {\n        if (this.isMenu && trgt.tagName === 'DIV' && this.navIdx.length && closest(trgt, '.e-menu-vscroll')) {\n          const popupEle = closest(trgt, '.' + POPUP);\n          const cIdx = Array.prototype.indexOf.call(this.getPopups(), popupEle) + 1;\n\n          if (cIdx < this.navIdx.length) {\n            this.closeMenu(cIdx + 1, e);\n\n            if (popupEle) {\n              this.removeLIStateByClass([FOCUSED, SELECTED], [popupEle]);\n            }\n          }\n        } else if (this.isMenu && this.hamburgerMode && trgt.tagName === 'SPAN' && trgt.classList.contains('e-menu-icon')) {\n          this.menuHeaderClickHandler(e);\n        } else {\n          if (trgt.tagName !== 'UL' || (this.isMenu ? trgt.parentElement.classList.contains('e-menu-wrapper') && !this.getIndex(trgt.querySelector('.' + ITEM).id, true).length : trgt.parentElement !== wrapper)) {\n            if (!cli) {\n              this.removeLIStateByClass([SELECTED], [wrapper]);\n            }\n\n            if (!cli || !cli.querySelector('.' + CARET)) {\n              this.closeMenu(null, e);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  afterCloseMenu(e) {\n    let isHeader;\n\n    if (this.showSubMenu) {\n      if (this.showItemOnClick && this.navIdx.length === 0) {\n        isHeader = closest(e.target, '.e-menu-parent.e-control');\n      } else {\n        isHeader = closest(this.element, '.e-menu-parent.e-control');\n      }\n\n      const idx = this.navIdx.concat(this.cliIdx);\n      const item = this.getItem(idx);\n\n      if (item && item[this.getField('children', idx.length - 1)] && item[this.getField('children', idx.length - 1)].length) {\n        if (e.type === 'mouseover' || Browser.isDevice && this.isMenu) {\n          this.setLISelected(this.cli);\n        }\n\n        if (!this.hamburgerMode && isHeader || this.hamburgerMode && this.cli.getAttribute('aria-expanded') === 'false') {\n          this.cli.setAttribute('aria-expanded', 'true');\n          this.navIdx.push(this.cliIdx);\n          this.openMenu(this.cli, item, null, null, e);\n        }\n      } else {\n        if (e.type !== 'mouseover') {\n          this.closeMenu(null, e);\n        }\n      }\n\n      if (!isHeader) {\n        const cul = this.getUlByNavIdx();\n        const sli = this.getLIByClass(cul, SELECTED);\n\n        if (sli) {\n          sli.setAttribute('aria-expanded', 'false');\n          sli.classList.remove(SELECTED);\n        }\n      }\n    }\n\n    this.keyType = '';\n  }\n\n  setLISelected(li) {\n    const sli = this.getLIByClass(li.parentElement, SELECTED);\n\n    if (sli) {\n      sli.classList.remove(SELECTED);\n    }\n\n    if (!this.isMenu) {\n      li.classList.remove(FOCUSED);\n    }\n\n    li.classList.add(SELECTED);\n  }\n\n  getLIByClass(ul, classname) {\n    for (let i = 0, len = ul.children.length; i < len; i++) {\n      if (ul.children[i].classList.contains(classname)) {\n        return ul.children[i];\n      }\n    }\n\n    return null;\n  }\n  /**\n   * This method is used to get the index of the menu item in the Menu based on the argument.\n   *\n   * @param {MenuItem | string} item - item be passed to get the index | id to be passed to get the item index.\n   * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  getItemIndex(item, isUniqueId) {\n    let idx;\n\n    if (typeof item === 'string') {\n      idx = item;\n    } else {\n      idx = item.id;\n    }\n\n    const isText = isUniqueId === false ? false : true;\n    const navIdx = this.getIndex(idx, isText);\n    return navIdx;\n  }\n  /**\n   * This method is used to set the menu item in the Menu based on the argument.\n   *\n   * @param {MenuItem} item - item need to be updated.\n   * @param {string} id - id / text to be passed to update the item.\n   * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  setItem(item, id, isUniqueId) {\n    let idx;\n\n    if (isUniqueId) {\n      idx = id ? id : item.id;\n    } else {\n      idx = id ? id : item.text;\n    }\n\n    const navIdx = this.getIndex(idx, isUniqueId);\n    const newItem = this.getItem(navIdx);\n    newItem.iconCss = item.iconCss || newItem.iconCss;\n    newItem.text = item.text || newItem.text;\n    newItem.url = item.url || newItem.url;\n    newItem.separator = item.separator || newItem.separator;\n  }\n\n  getItem(navIdx) {\n    navIdx = navIdx.slice();\n    const idx = navIdx.pop();\n    const items = this.getItems(navIdx);\n    return items[idx];\n  }\n\n  getItems(navIdx) {\n    let items = this.items;\n\n    for (let i = 0; i < navIdx.length; i++) {\n      items = items[navIdx[i]][this.getField('children', i)];\n    }\n\n    return items;\n  }\n\n  setItems(newItems, navIdx) {\n    const items = this.getItems(navIdx);\n    items.splice(0, items.length);\n\n    for (let i = 0; i < newItems.length; i++) {\n      items.splice(i, 0, newItems[i]);\n    }\n  }\n\n  getIdx(ul, li, skipHdr = true) {\n    let idx = Array.prototype.indexOf.call(ul.children, li);\n\n    if (skipHdr && ul.children[0].classList.contains(HEADER)) {\n      idx--;\n    }\n\n    return idx;\n  }\n\n  getLI(elem) {\n    if (elem.tagName === 'LI' && elem.classList.contains('e-menu-item')) {\n      return elem;\n    }\n\n    return closest(elem, 'li.e-menu-item');\n  }\n\n  updateItemsByNavIdx() {\n    let items = this.items;\n    let count = 0;\n\n    for (let index = 0; index < this.navIdx.length; index++) {\n      items = items[index].items;\n\n      if (!items) {\n        break;\n      }\n\n      count++;\n      const ul = this.getUlByNavIdx(count);\n\n      if (!ul) {\n        break;\n      }\n\n      this.updateItem(ul, items);\n    }\n  }\n\n  removeChildElement(elem) {\n    while (elem.firstElementChild) {\n      elem.removeChild(elem.firstElementChild);\n    }\n\n    return elem;\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @private\n   * @param {MenuBaseModel} newProp - Specifies the new properties\n   * @param {MenuBaseModel} oldProp - Specifies the old properties\n   * @returns {void}\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    const wrapper = this.getWrapper();\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([wrapper], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([wrapper], newProp.cssClass.split(' '));\n          }\n\n          break;\n\n        case 'enableRtl':\n          wrapper.classList.toggle(RTL);\n          break;\n\n        case 'showItemOnClick':\n          this.unWireEvents();\n          this.showItemOnClick = newProp.showItemOnClick;\n          this.wireEvents();\n          break;\n\n        case 'enableScrolling':\n          if (newProp.enableScrolling) {\n            let ul;\n\n            if (this.element.classList.contains('e-vertical')) {\n              addScrolling(this.createElement, wrapper, this.element, 'vscroll', this.enableRtl);\n            } else {\n              addScrolling(this.createElement, wrapper, this.element, 'hscroll', this.enableRtl);\n            }\n\n            this.getPopups().forEach(wrapper => {\n              ul = select('.e-ul', wrapper);\n              addScrolling(this.createElement, wrapper, ul, 'vscroll', this.enableRtl);\n            });\n          } else {\n            let ul = wrapper.children[0];\n\n            if (this.element.classList.contains('e-vertical')) {\n              destroyScroll(getInstance(ul, VScroll), ul);\n            } else {\n              destroyScroll(getInstance(ul, HScroll), ul);\n            }\n\n            wrapper.style.overflow = '';\n            wrapper.appendChild(this.element);\n            this.getPopups().forEach(wrapper => {\n              ul = wrapper.children[0];\n              destroyScroll(getInstance(ul, VScroll), ul);\n              wrapper.style.overflow = '';\n            });\n          }\n\n          break;\n\n        case 'items':\n          {\n            let idx;\n            let navIdx;\n            let item;\n\n            if (!Object.keys(oldProp.items).length) {\n              this.updateItem(this.element, this.items);\n\n              if (!this.hamburgerMode) {\n                for (let i = 1, count = wrapper.childElementCount; i < count; i++) {\n                  detach(wrapper.lastElementChild);\n                }\n              }\n\n              this.navIdx = [];\n            } else {\n              const keys = Object.keys(newProp.items);\n\n              for (let i = 0; i < keys.length; i++) {\n                navIdx = this.getChangedItemIndex(newProp, [], Number(keys[i]));\n\n                if (navIdx.length <= this.getWrapper().children.length) {\n                  idx = navIdx.pop();\n                  item = this.getItems(navIdx);\n                  this.insertAfter([item[idx]], item[idx].text);\n                  this.removeItem(item, navIdx, idx);\n                  this.setItems(item, navIdx);\n                }\n\n                navIdx.length = 0;\n              }\n            }\n\n            break;\n          }\n      }\n    }\n  }\n\n  updateItem(ul, items) {\n    if (isBlazor() && !this.isMenu) {\n      ul = this.removeChildElement(ul);\n    } else {\n      ul.innerHTML = '';\n    }\n\n    const lis = [].slice.call(this.createItems(items).children);\n    lis.forEach(li => {\n      ul.appendChild(li);\n    });\n  }\n\n  getChangedItemIndex(newProp, index, idx) {\n    index.push(idx);\n    const key = Object.keys(newProp.items[idx]).pop();\n\n    if (key === 'items') {\n      const item = newProp.items[idx];\n      const popStr = Object.keys(item.items).pop();\n\n      if (popStr) {\n        this.getChangedItemIndex(item, index, Number(popStr));\n      }\n    } else {\n      if (key === 'isParentArray' && index.length > 1) {\n        index.pop();\n      }\n    }\n\n    return index;\n  }\n\n  removeItem(item, navIdx, idx) {\n    item.splice(idx, 1);\n    const uls = this.getWrapper().children;\n\n    if (navIdx.length < uls.length) {\n      detach(uls[navIdx.length].children[idx]);\n    }\n  }\n  /**\n   * Used to unwire the bind events.\n   *\n   * @private\n   * @param {string} targetSelctor - Specifies the target selector\n   * @returns {void}\n   */\n\n\n  unWireEvents(targetSelctor = this.target) {\n    const wrapper = this.getWrapper();\n\n    if (targetSelctor) {\n      let target;\n      let touchModule;\n      const targetElems = selectAll(targetSelctor);\n\n      for (let i = 0, len = targetElems.length; i < len; i++) {\n        target = targetElems[i];\n\n        if (this.isMenu) {\n          EventHandler.remove(target, 'click', this.menuHeaderClickHandler);\n        } else {\n          if (Browser.isIos) {\n            touchModule = getInstance(target, Touch);\n\n            if (touchModule) {\n              touchModule.destroy();\n            }\n          } else {\n            EventHandler.remove(target, 'contextmenu', this.cmenuHandler);\n          }\n        }\n      }\n\n      if (!this.isMenu) {\n        EventHandler.remove(this.targetElement, 'scroll', this.scrollHandler);\n\n        for (const parent of getScrollableParent(this.targetElement)) {\n          EventHandler.remove(parent, 'scroll', this.scrollHandler);\n        }\n      }\n    }\n\n    if (!Browser.isDevice) {\n      EventHandler.remove(this.isMenu ? document : wrapper, 'mouseover', this.delegateMoverHandler);\n      EventHandler.remove(document, 'mousedown', this.delegateMouseDownHandler);\n    }\n\n    EventHandler.remove(document, 'click', this.delegateClickHandler);\n    this.unWireKeyboardEvent(wrapper);\n    this.rippleFn();\n  }\n\n  unWireKeyboardEvent(element) {\n    const keyboardModule = getInstance(element, KeyboardEvents);\n\n    if (keyboardModule) {\n      keyboardModule.destroy();\n    }\n  }\n\n  toggleAnimation(ul, isMenuOpen = true) {\n    let pUlHeight;\n    let pElement;\n\n    if (this.animationSettings.effect === 'None' || !isMenuOpen) {\n      this.end(ul, isMenuOpen);\n    } else {\n      this.animation.animate(ul, {\n        name: this.animationSettings.effect,\n        duration: this.animationSettings.duration,\n        timingFunction: this.animationSettings.easing,\n        begin: options => {\n          if (this.hamburgerMode) {\n            pElement = options.element.parentElement;\n            options.element.style.position = 'absolute';\n            pUlHeight = pElement.offsetHeight;\n            options.element.style.maxHeight = options.element.offsetHeight + 'px';\n            pElement.style.maxHeight = '';\n          } else {\n            options.element.style.display = 'block';\n            options.element.style.maxHeight = options.element.getBoundingClientRect().height + 'px';\n          }\n        },\n        progress: options => {\n          if (this.hamburgerMode) {\n            pElement.style.minHeight = pUlHeight + options.element.offsetHeight + 'px';\n          }\n        },\n        end: options => {\n          if (this.hamburgerMode) {\n            options.element.style.position = '';\n            options.element.style.maxHeight = '';\n            pElement.style.minHeight = '';\n            options.element.style.top = 0 + 'px';\n            options.element.children[0].focus();\n            this.triggerOpen(options.element.children[0]);\n          } else {\n            this.end(options.element, isMenuOpen);\n          }\n        }\n      });\n    }\n  }\n\n  triggerOpen(ul) {\n    const item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n    const eventArgs = {\n      element: ul,\n      parentItem: item,\n      items: item ? item.items : this.items\n    };\n    this.trigger('onOpen', eventArgs);\n  }\n\n  end(ul, isMenuOpen) {\n    if (isMenuOpen) {\n      ul.style.display = 'block';\n      ul.style.maxHeight = '';\n      this.triggerOpen(ul);\n\n      if (ul.querySelector('.' + FOCUSED)) {\n        ul.querySelector('.' + FOCUSED).focus();\n      } else {\n        const ele = this.getWrapper().children[this.getIdx(this.getWrapper(), ul) - 1];\n\n        if (ele) {\n          ele.querySelector('.' + SELECTED).focus();\n        } else {\n          this.element.focus();\n        }\n      }\n    } else {\n      if (ul === this.element) {\n        const fli = this.getLIByClass(this.element, FOCUSED);\n\n        if (fli) {\n          fli.classList.remove(FOCUSED);\n        }\n\n        const sli = this.getLIByClass(this.element, SELECTED);\n\n        if (sli) {\n          sli.classList.remove(SELECTED);\n        }\n\n        ul.style.display = 'none';\n      } else {\n        detach(ul);\n      }\n    }\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n\n\n  getPersistData() {\n    return '';\n  }\n  /**\n   * Get wrapper element.\n   *\n   * @returns {Element} - Wrapper element\n   * @private\n   */\n\n\n  getWrapper() {\n    return closest(this.element, '.e-' + this.getModuleName() + '-wrapper');\n  }\n\n  getIndex(data, isUniqueId, items = this.items, nIndex = [], isCallBack = false, level = 0) {\n    let item;\n    level = isCallBack ? level + 1 : 0;\n\n    for (let i = 0, len = items.length; i < len; i++) {\n      item = items[i];\n\n      if ((isUniqueId ? item[this.getField('itemId', level)] : item[this.getField('text', level)]) === data) {\n        nIndex.push(i);\n        break;\n      } else if (item[this.getField('children', level)] && item[this.getField('children', level)].length) {\n        nIndex = this.getIndex(data, isUniqueId, item[this.getField('children', level)], nIndex, true, level);\n\n        if (nIndex[nIndex.length - 1] === -1) {\n          if (i !== len - 1) {\n            nIndex.pop();\n          }\n        } else {\n          nIndex.unshift(i);\n          break;\n        }\n      } else {\n        if (i === len - 1) {\n          nIndex.push(-1);\n        }\n      }\n    }\n\n    return !isCallBack && nIndex[0] === -1 ? [] : nIndex;\n  }\n  /**\n   * This method is used to enable or disable the menu items in the Menu based on the items and enable argument.\n   *\n   * @param {string[]} items - Text items that needs to be enabled/disabled.\n   * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n   * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  enableItems(items, enable = true, isUniqueId) {\n    let ul;\n    let idx;\n    let navIdx;\n    const disabled = DISABLED;\n    let skipItem;\n\n    for (let i = 0; i < items.length; i++) {\n      navIdx = this.getIndex(items[i], isUniqueId);\n\n      if (this.navIdx.length) {\n        if (navIdx.length !== 1) {\n          skipItem = false;\n\n          for (let i = 0, len = navIdx.length - 1; i < len; i++) {\n            if (navIdx[i] !== this.navIdx[i]) {\n              skipItem = true;\n              break;\n            }\n          }\n\n          if (skipItem) {\n            continue;\n          }\n        }\n      } else {\n        if (navIdx.length !== 1) {\n          continue;\n        }\n      }\n\n      idx = navIdx.pop();\n      ul = this.getUlByNavIdx(navIdx.length);\n\n      if (ul) {\n        if (enable) {\n          if (this.isMenu) {\n            ul.children[idx].classList.remove(disabled);\n            ul.children[idx].removeAttribute('aria-disabled');\n          } else {\n            if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n              ul.children[idx + 1].classList.remove(disabled);\n            } else {\n              ul.children[idx].classList.remove(disabled);\n            }\n          }\n        } else {\n          if (this.isMenu) {\n            ul.children[idx].classList.add(disabled);\n            ul.children[idx].setAttribute('aria-disabled', 'true');\n          } else {\n            if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n              ul.children[idx + 1].classList.add(disabled);\n            } else {\n              ul.children[idx].classList.add(disabled);\n            }\n          }\n        }\n      }\n    }\n  }\n  /**\n   * This method is used to show the menu items in the Menu based on the items text.\n   *\n   * @param {string[]} items - Text items that needs to be shown.\n   * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  showItems(items, isUniqueId) {\n    this.showHideItems(items, false, isUniqueId);\n  }\n  /**\n   * This method is used to hide the menu items in the Menu based on the items text.\n   *\n   * @param {string[]} items - Text items that needs to be hidden.\n   * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  hideItems(items, isUniqueId) {\n    this.showHideItems(items, true, isUniqueId);\n  }\n\n  showHideItems(items, ishide, isUniqueId) {\n    let ul;\n    let index;\n    let navIdx;\n\n    for (let i = 0; i < items.length; i++) {\n      navIdx = this.getIndex(items[i], isUniqueId);\n      index = navIdx.pop();\n      ul = this.getUlByNavIdx(navIdx.length);\n\n      if (ul) {\n        if (ishide) {\n          if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n            ul.children[index + 1].classList.add(HIDE);\n          } else {\n            ul.children[index].classList.add(HIDE);\n          }\n        } else {\n          if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n            ul.children[index + 1].classList.remove(HIDE);\n          } else {\n            ul.children[index].classList.remove(HIDE);\n          }\n        }\n      }\n    }\n  }\n  /**\n   * It is used to remove the menu items from the Menu based on the items text.\n   *\n   * @param {string[]} items Text items that needs to be removed.\n   * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  removeItems(items, isUniqueId) {\n    let idx;\n    let navIdx;\n    let iitems;\n\n    for (let i = 0; i < items.length; i++) {\n      navIdx = this.getIndex(items[i], isUniqueId);\n      idx = navIdx.pop();\n      iitems = this.getItems(navIdx);\n      this.removeItem(iitems, navIdx, idx);\n    }\n  }\n  /**\n   * It is used to insert the menu items after the specified menu item text.\n   *\n   * @param {MenuItemModel[]} items - Items that needs to be inserted.\n   * @param {string} text - Text item after that the element to be inserted.\n   * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  insertAfter(items, text, isUniqueId) {\n    this.insertItems(items, text, isUniqueId);\n  }\n  /**\n   * It is used to insert the menu items before the specified menu item text.\n   *\n   * @param {MenuItemModel[]} items - Items that needs to be inserted.\n   * @param {string} text - Text item before that the element to be inserted.\n   * @param  {boolean} isUniqueId - Set `true` if it is a unique id.\n   * @returns {void}\n   */\n\n\n  insertBefore(items, text, isUniqueId) {\n    this.insertItems(items, text, isUniqueId, false);\n  }\n\n  insertItems(items, text, isUniqueId, isAfter = true) {\n    let li;\n    let idx;\n    let navIdx;\n    let iitems;\n    let menuitem;\n\n    for (let i = 0; i < items.length; i++) {\n      navIdx = this.getIndex(text, isUniqueId);\n      idx = navIdx.pop();\n      iitems = this.getItems(navIdx);\n      menuitem = new MenuItem(iitems[0], 'items', items[i], true);\n      iitems.splice(isAfter ? idx + 1 : idx, 0, menuitem);\n      const uls = this.isMenu ? [this.getWrapper()].concat(this.getPopups()) : [].slice.call(this.getWrapper().children);\n\n      if (navIdx.length < uls.length) {\n        idx = isAfter ? idx + 1 : idx;\n        li = this.createItems(iitems).children[idx];\n        const ul = this.isMenu ? select('.e-menu-parent', uls[navIdx.length]) : uls[navIdx.length];\n        ul.insertBefore(li, ul.children[idx]);\n      }\n    }\n  }\n\n  removeAttributes() {\n    ['top', 'left', 'display', 'z-index'].forEach(key => {\n      this.element.style.removeProperty(key);\n    });\n    ['role', 'tabindex', 'class', 'style'].forEach(key => {\n      if (key === 'class' && this.element.classList.contains('e-menu-parent')) {\n        this.element.classList.remove('e-menu-parent');\n      }\n\n      if (['class', 'style'].indexOf(key) === -1 || !this.element.getAttribute(key)) {\n        this.element.removeAttribute(key);\n      }\n\n      if (this.isMenu && key === 'class' && this.element.classList.contains('e-vertical')) {\n        this.element.classList.remove('e-vertical');\n      }\n    });\n  }\n  /**\n   * Destroys the widget.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    const wrapper = this.getWrapper();\n\n    if (wrapper) {\n      this.unWireEvents();\n\n      if (!this.isMenu) {\n        this.clonedElement.style.display = '';\n\n        if (this.clonedElement.tagName === 'EJS-CONTEXTMENU') {\n          addClass([this.clonedElement], ['e-control', 'e-lib', 'e-' + this.getModuleName()]);\n          this.element = this.clonedElement;\n        } else {\n          if (this.refreshing && this.clonedElement.childElementCount && this.clonedElement.children[0].tagName === 'LI') {\n            this.setProperties({\n              'items': []\n            }, true);\n          }\n\n          if (document.getElementById(this.clonedElement.id)) {\n            const refEle = this.clonedElement.nextElementSibling;\n\n            if (refEle && refEle !== wrapper) {\n              this.clonedElement.parentElement.insertBefore(this.element, refEle);\n            } else {\n              this.clonedElement.parentElement.appendChild(this.element);\n            }\n\n            if (isBlazor() && !this.isMenu) {\n              this.element = this.removeChildElement(this.element);\n            } else {\n              this.element.innerHTML = '';\n            }\n\n            append([].slice.call(this.clonedElement.children), this.element);\n            detach(this.clonedElement);\n            this.removeAttributes();\n          }\n        }\n\n        this.clonedElement = null;\n      } else {\n        this.closeMenu();\n\n        if (isBlazor() && !this.isMenu) {\n          this.element = this.removeChildElement(this.element);\n        } else {\n          this.element.innerHTML = '';\n        }\n\n        this.removeAttributes();\n        wrapper.parentNode.insertBefore(this.element, wrapper);\n        this.clonedElement = null;\n      }\n\n      if (this.isMenu && this.clonedElement) {\n        detach(this.element);\n        wrapper.style.display = '';\n        wrapper.classList.remove('e-' + this.getModuleName() + '-wrapper');\n        wrapper.removeAttribute('data-ripple');\n      } else {\n        detach(wrapper);\n      }\n\n      super.destroy();\n\n      if (this.template) {\n        this.clearTemplate(['template']);\n      }\n    }\n\n    this.rippleFn = null;\n  }\n\n};\n\n__decorate$2([Event()], MenuBase.prototype, \"beforeItemRender\", void 0);\n\n__decorate$2([Event()], MenuBase.prototype, \"beforeOpen\", void 0);\n\n__decorate$2([Event()], MenuBase.prototype, \"onOpen\", void 0);\n\n__decorate$2([Event()], MenuBase.prototype, \"beforeClose\", void 0);\n\n__decorate$2([Event()], MenuBase.prototype, \"onClose\", void 0);\n\n__decorate$2([Event()], MenuBase.prototype, \"select\", void 0);\n\n__decorate$2([Event()], MenuBase.prototype, \"created\", void 0);\n\n__decorate$2([Property('')], MenuBase.prototype, \"cssClass\", void 0);\n\n__decorate$2([Property(0)], MenuBase.prototype, \"hoverDelay\", void 0);\n\n__decorate$2([Property(false)], MenuBase.prototype, \"showItemOnClick\", void 0);\n\n__decorate$2([Property('')], MenuBase.prototype, \"target\", void 0);\n\n__decorate$2([Property('')], MenuBase.prototype, \"filter\", void 0);\n\n__decorate$2([Property(null)], MenuBase.prototype, \"template\", void 0);\n\n__decorate$2([Property(false)], MenuBase.prototype, \"enableScrolling\", void 0);\n\n__decorate$2([Property(false)], MenuBase.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$2([Complex({\n  itemId: 'id',\n  text: 'text',\n  parentId: 'parentId',\n  iconCss: 'iconCss',\n  url: 'url',\n  separator: 'separator',\n  children: 'items'\n}, FieldSettings)], MenuBase.prototype, \"fields\", void 0);\n\n__decorate$2([Collection([], MenuItem)], MenuBase.prototype, \"items\", void 0);\n\n__decorate$2([Complex({\n  duration: 400,\n  easing: 'ease',\n  effect: 'SlideDown'\n}, MenuAnimationSettings)], MenuBase.prototype, \"animationSettings\", void 0);\n\nMenuBase = __decorate$2([NotifyPropertyChanges], MenuBase);\n/**\n * Navigation Common modules\n */\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nconst CLS_VERTICAL = 'e-vertical';\nconst CLS_ITEMS = 'e-toolbar-items';\nconst CLS_ITEM = 'e-toolbar-item';\nconst CLS_RTL$2 = 'e-rtl';\nconst CLS_SEPARATOR = 'e-separator';\nconst CLS_POPUPICON = 'e-popup-up-icon';\nconst CLS_POPUPDOWN = 'e-popup-down-icon';\nconst CLS_POPUPOPEN = 'e-popup-open';\nconst CLS_TEMPLATE = 'e-template';\nconst CLS_DISABLE$2 = 'e-overlay';\nconst CLS_POPUPTEXT = 'e-toolbar-text';\nconst CLS_TBARTEXT = 'e-popup-text';\nconst CLS_TBAROVERFLOW = 'e-overflow-show';\nconst CLS_POPOVERFLOW = 'e-overflow-hide';\nconst CLS_TBARBTN = 'e-tbar-btn';\nconst CLS_TBARNAV = 'e-hor-nav';\nconst CLS_TBARSCRLNAV = 'e-scroll-nav';\nconst CLS_TBARRIGHT = 'e-toolbar-right';\nconst CLS_TBARLEFT = 'e-toolbar-left';\nconst CLS_TBARCENTER = 'e-toolbar-center';\nconst CLS_TBARPOS = 'e-tbar-pos';\nconst CLS_HSCROLLCNT = 'e-hscroll-content';\nconst CLS_VSCROLLCNT = 'e-vscroll-content';\nconst CLS_HSCROLLBAR$1 = 'e-hscroll-bar';\nconst CLS_POPUPNAV = 'e-hor-nav';\nconst CLS_POPUPCLASS = 'e-toolbar-pop';\nconst CLS_POPUP = 'e-toolbar-popup';\nconst CLS_TBARBTNTEXT = 'e-tbar-btn-text';\nconst CLS_TBARNAVACT = 'e-nav-active';\nconst CLS_TBARIGNORE = 'e-ignore';\nconst CLS_POPPRI = 'e-popup-alone';\nconst CLS_HIDDEN = 'e-hidden';\nconst CLS_MULTIROW = 'e-toolbar-multirow';\nconst CLS_MULTIROWPOS = 'e-multirow-pos';\nconst CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';\nconst CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';\nconst CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';\nconst CLS_EXTENDABLECLASS = 'e-toolbar-extended';\nconst CLS_EXTENDPOPUP = 'e-expended-nav';\nconst CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';\n/**\n * An item object that is used to configure Toolbar commands.\n */\n\nclass Item extends ChildProperty {}\n\n__decorate$3([Property('')], Item.prototype, \"id\", void 0);\n\n__decorate$3([Property('')], Item.prototype, \"text\", void 0);\n\n__decorate$3([Property('auto')], Item.prototype, \"width\", void 0);\n\n__decorate$3([Property('')], Item.prototype, \"cssClass\", void 0);\n\n__decorate$3([Property(false)], Item.prototype, \"showAlwaysInPopup\", void 0);\n\n__decorate$3([Property(false)], Item.prototype, \"disabled\", void 0);\n\n__decorate$3([Property('')], Item.prototype, \"prefixIcon\", void 0);\n\n__decorate$3([Property('')], Item.prototype, \"suffixIcon\", void 0);\n\n__decorate$3([Property(true)], Item.prototype, \"visible\", void 0);\n\n__decorate$3([Property('None')], Item.prototype, \"overflow\", void 0);\n\n__decorate$3([Property('')], Item.prototype, \"template\", void 0);\n\n__decorate$3([Property('Button')], Item.prototype, \"type\", void 0);\n\n__decorate$3([Property('Both')], Item.prototype, \"showTextOn\", void 0);\n\n__decorate$3([Property(null)], Item.prototype, \"htmlAttributes\", void 0);\n\n__decorate$3([Property('')], Item.prototype, \"tooltipText\", void 0);\n\n__decorate$3([Property('Left')], Item.prototype, \"align\", void 0);\n\n__decorate$3([Event()], Item.prototype, \"click\", void 0);\n/**\n * The Toolbar control contains a group of commands that are aligned horizontally.\n * ```html\n * <div id=\"toolbar\"/>\n * <script>\n *   var toolbarObj = new Toolbar();\n *   toolbarObj.appendTo(\"#toolbar\");\n * </script>\n * ```\n */\n\n\nlet Toolbar = class Toolbar extends Component {\n  /**\n   * Initializes a new instance of the Toolbar class.\n   *\n   * @param {ToolbarModel} options  - Specifies Toolbar model properties as options.\n   * @param { string | HTMLElement} element  - Specifies the element that is rendered as a Toolbar.\n   */\n  constructor(options, element) {\n    super(options, element);\n    this.resizeContext = this.resize.bind(this);\n    /**\n     * Contains the keyboard configuration of the Toolbar.\n     */\n\n    this.keyConfigs = {\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      moveDown: 'downarrow',\n      popupOpen: 'enter',\n      popupClose: 'escape',\n      tab: 'tab',\n      home: 'home',\n      end: 'end'\n    };\n  }\n  /**\n   * Removes the control from the DOM and also removes all its related events.\n   *\n   * @returns {void}.\n   */\n\n\n  destroy() {\n    if (this.isReact || this.isAngular) {\n      this.clearTemplate();\n    }\n\n    const btnItems = this.element.querySelectorAll('.e-control.e-btn');\n    [].slice.call(btnItems).forEach(el => {\n      if (!isNullOrUndefined(el) && !isNullOrUndefined(el.ej2_instances) && !isNullOrUndefined(el.ej2_instances[0]) && !el.ej2_instances[0].isDestroyed) {\n        el.ej2_instances[0].destroy();\n      }\n    });\n    this.unwireEvents();\n    this.tempId.forEach(ele => {\n      if (!isNullOrUndefined(this.element.querySelector(ele))) {\n        document.body.appendChild(this.element.querySelector(ele)).style.display = 'none';\n      }\n    });\n    this.destroyItems();\n\n    while (this.element.lastElementChild) {\n      this.element.removeChild(this.element.lastElementChild);\n    }\n\n    if (this.trgtEle) {\n      this.element.appendChild(this.ctrlTem);\n      this.trgtEle = null;\n      this.ctrlTem = null;\n    }\n\n    if (this.popObj) {\n      this.popObj.destroy();\n      detach(this.popObj.element);\n    }\n\n    if (this.activeEle) {\n      this.activeEle = null;\n    }\n\n    this.popObj = null;\n    this.tbarAlign = null;\n    this.tbarItemsCol = [];\n    this.remove(this.element, 'e-toolpop');\n\n    if (this.cssClass) {\n      removeClass([this.element], this.cssClass.split(' '));\n    }\n\n    this.element.removeAttribute('style');\n    ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(attrb => this.element.removeAttribute(attrb));\n    super.destroy();\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    const eventArgs = {\n      enableCollision: this.enableCollision,\n      scrollStep: this.scrollStep\n    };\n    this.trigger('beforeCreate', eventArgs);\n    this.enableCollision = eventArgs.enableCollision;\n    this.scrollStep = eventArgs.scrollStep;\n    this.scrollModule = null;\n    this.popObj = null;\n    this.tempId = [];\n    this.tbarItemsCol = this.items;\n    this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n    this.isExtendedOpen = false;\n    this.popupPriCount = 0;\n\n    if (this.enableRtl) {\n      this.add(this.element, CLS_RTL$2);\n    }\n  }\n\n  wireEvents() {\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n    window.addEventListener('resize', this.resizeContext);\n\n    if (this.allowKeyboard) {\n      this.wireKeyboardEvent();\n    }\n  }\n\n  wireKeyboardEvent() {\n    this.keyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs\n    });\n    EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n    this.element.setAttribute('tabIndex', '0');\n  }\n\n  unwireKeyboardEvent() {\n    if (this.keyModule) {\n      EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n      this.keyModule.destroy();\n      this.keyModule = null;\n    }\n  }\n\n  docKeyDown(e) {\n    if (e.target.tagName === 'INPUT') {\n      return;\n    }\n\n    const popCheck = !isNullOrUndefined(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== 'Extended';\n\n    if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && popCheck) {\n      this.popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    }\n\n    const keyCheck = e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36;\n\n    if (keyCheck) {\n      e.preventDefault();\n    }\n  }\n\n  unwireEvents() {\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n    this.destroyScroll();\n    this.unwireKeyboardEvent();\n    window.removeEventListener('resize', this.resizeContext);\n    EventHandler.remove(document, 'scroll', this.docEvent);\n    EventHandler.remove(document, 'click', this.docEvent);\n  }\n\n  clearProperty() {\n    this.tbarEle = [];\n    this.tbarAlgEle = {\n      lefts: [],\n      centers: [],\n      rights: []\n    };\n  }\n\n  docEvent(e) {\n    const popEle = closest(e.target, '.e-popup');\n\n    if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === 'Popup') {\n      this.popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    }\n  }\n\n  destroyScroll() {\n    if (this.scrollModule) {\n      if (this.tbarAlign) {\n        this.add(this.scrollModule.element, CLS_TBARPOS);\n      }\n\n      this.scrollModule.destroy();\n      this.scrollModule = null;\n    }\n  }\n\n  destroyItems() {\n    if (this.element) {\n      [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(el => {\n        detach(el);\n      });\n    }\n\n    if (this.tbarAlign) {\n      const tbarItems = this.element.querySelector('.' + CLS_ITEMS);\n      [].slice.call(tbarItems.children).forEach(el => {\n        detach(el);\n      });\n      this.tbarAlign = false;\n      this.remove(tbarItems, CLS_TBARPOS);\n    }\n\n    this.clearProperty();\n  }\n\n  destroyMode() {\n    if (this.scrollModule) {\n      this.remove(this.scrollModule.element, CLS_RTL$2);\n      this.destroyScroll();\n    }\n\n    this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n    this.remove(this.element, CLS_EXTEANDABLE_TOOLBAR);\n    const tempEle = this.element.querySelector('.e-toolbar-multirow');\n\n    if (tempEle) {\n      this.remove(tempEle, CLS_MULTIROW);\n    }\n\n    if (this.popObj) {\n      this.popupRefresh(this.popObj.element, true);\n    }\n  }\n\n  add(ele, val) {\n    ele.classList.add(val);\n  }\n\n  remove(ele, val) {\n    ele.classList.remove(val);\n  }\n\n  elementFocus(ele) {\n    const fChild = ele.firstElementChild;\n\n    if (fChild) {\n      fChild.focus();\n      this.activeEleSwitch(ele);\n    } else {\n      ele.focus();\n    }\n  }\n\n  clstElement(tbrNavChk, trgt) {\n    let clst;\n\n    if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {\n      clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n    } else if (this.element === trgt || tbrNavChk) {\n      clst = this.element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_DISABLE$2 + ' ):not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_HIDDEN + ' )');\n    } else {\n      clst = closest(trgt, '.' + CLS_ITEM);\n    }\n\n    return clst;\n  }\n\n  keyHandling(clst, e, trgt, navChk, scrollChk) {\n    const popObj = this.popObj;\n    const rootEle = this.element;\n    const popAnimate = {\n      name: 'FadeOut',\n      duration: 100\n    };\n    const value = e.action === 'moveUp' ? 'previous' : 'next';\n    let ele;\n    let nodes;\n\n    switch (e.action) {\n      case 'moveRight':\n        if (this.isVertical) {\n          return;\n        }\n\n        if (rootEle === trgt) {\n          this.elementFocus(clst);\n        } else if (!navChk) {\n          this.eleFocus(clst, 'next');\n        }\n\n        break;\n\n      case 'moveLeft':\n        if (this.isVertical) {\n          return;\n        }\n\n        if (!navChk) {\n          this.eleFocus(clst, 'previous');\n        }\n\n        break;\n\n      case 'home':\n      case 'end':\n        if (clst) {\n          let popupCheck = closest(clst, '.e-popup');\n          const extendedPopup = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n\n          if (this.overflowMode === 'Extended' && extendedPopup && extendedPopup.classList.contains('e-popup-open')) {\n            popupCheck = e.action === 'end' ? extendedPopup : null;\n          }\n\n          if (popupCheck) {\n            if (isVisible(this.popObj.element)) {\n              nodes = [].slice.call(popupCheck.children);\n\n              if (e.action === 'home') {\n                ele = nodes[0];\n              } else {\n                ele = nodes[nodes.length - 1];\n              }\n            }\n          } else {\n            nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ')');\n\n            if (e.action === 'home') {\n              ele = nodes[0];\n            } else {\n              ele = nodes[nodes.length - 1];\n            }\n          }\n\n          if (ele) {\n            this.elementFocus(ele);\n          }\n        }\n\n        break;\n\n      case 'moveUp':\n      case 'moveDown':\n        if (!this.isVertical) {\n          if (popObj && closest(trgt, '.e-popup')) {\n            const popEle = popObj.element;\n            const popFrstEle = popEle.firstElementChild;\n\n            if (value === 'previous' && popFrstEle === clst || value === 'next' && popEle.lastElementChild === clst) {\n              return;\n            } else {\n              this.eleFocus(clst, value);\n            }\n          } else if (e.action === 'moveDown' && popObj && isVisible(popObj.element)) {\n            this.elementFocus(clst);\n          }\n        } else {\n          if (e.action === 'moveUp') {\n            this.eleFocus(clst, 'previous');\n          } else {\n            this.eleFocus(clst, 'next');\n          }\n        }\n\n        break;\n\n      case 'tab':\n        if (!scrollChk && !navChk) {\n          const ele = clst.firstElementChild;\n\n          if (rootEle === trgt) {\n            if (this.activeEle) {\n              this.activeEle.focus();\n            } else {\n              this.activeEleRemove(ele);\n              ele.focus();\n            }\n\n            this.element.removeAttribute('tabindex');\n          }\n        }\n\n        break;\n\n      case 'popupClose':\n        if (popObj && this.overflowMode !== 'Extended') {\n          popObj.hide(popAnimate);\n        }\n\n        break;\n\n      case 'popupOpen':\n        if (!navChk) {\n          return;\n        }\n\n        if (popObj && !isVisible(popObj.element)) {\n          popObj.element.style.top = rootEle.offsetHeight + 'px';\n          popObj.show({\n            name: 'FadeIn',\n            duration: 100\n          });\n        } else {\n          popObj.hide(popAnimate);\n        }\n\n        break;\n    }\n  }\n\n  keyActionHandler(e) {\n    const trgt = e.target;\n\n    if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE$2)) {\n      return;\n    }\n\n    e.preventDefault();\n    const tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n    const tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n    const clst = this.clstElement(tbrNavChk, trgt);\n\n    if (clst || tbarScrollChk) {\n      this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n    }\n  }\n  /**\n   * Specifies the value to disable/enable the Toolbar component.\n   * When set to `true`, the component will be disabled.\n   *\n   * @param  {boolean} value - Based on this Boolean value, Toolbar will be enabled (false) or disabled (true).\n   * @returns {void}.\n   */\n\n\n  disable(value) {\n    const rootEle = this.element;\n\n    if (value) {\n      rootEle.classList.add(CLS_DISABLE$2);\n    } else {\n      rootEle.classList.remove(CLS_DISABLE$2);\n    }\n\n    rootEle.setAttribute('tabindex', !value ? '0' : '-1');\n\n    if (this.activeEle) {\n      this.activeEle.setAttribute('tabindex', !value ? '0' : '-1');\n    }\n\n    if (this.scrollModule) {\n      this.scrollModule.disable(value);\n    }\n\n    if (this.popObj) {\n      if (isVisible(this.popObj.element) && this.overflowMode !== 'Extended') {\n        this.popObj.hide();\n      }\n\n      rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');\n    }\n  }\n\n  eleContains(el) {\n    return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE$2) || el.getAttribute('disabled') || el.classList.contains(CLS_HIDDEN) || !isVisible(el);\n  }\n\n  eleFocus(closest$$1, pos) {\n    const sib = Object(closest$$1)[pos + 'ElementSibling'];\n\n    if (sib) {\n      const skipEle = this.eleContains(sib);\n\n      if (skipEle) {\n        this.eleFocus(sib, pos);\n        return;\n      }\n\n      this.elementFocus(sib);\n    } else if (this.tbarAlign) {\n      let elem = Object(closest$$1.parentElement)[pos + 'ElementSibling'];\n\n      if (!isNullOrUndefined(elem) && elem.children.length === 0) {\n        elem = Object(elem)[pos + 'ElementSibling'];\n      }\n\n      if (!isNullOrUndefined(elem) && elem.children.length > 0) {\n        if (pos === 'next') {\n          const el = elem.querySelector('.' + CLS_ITEM);\n\n          if (this.eleContains(el)) {\n            this.eleFocus(el, pos);\n          } else {\n            el.firstElementChild.focus();\n            this.activeEleSwitch(el);\n          }\n        } else {\n          const el = elem.lastElementChild;\n\n          if (this.eleContains(el)) {\n            this.eleFocus(el, pos);\n          } else {\n            this.elementFocus(el);\n          }\n        }\n      }\n    }\n  }\n\n  clickHandler(e) {\n    const trgt = e.target;\n    const ele = this.element;\n    const isPopupElement = !isNullOrUndefined(closest(trgt, '.' + CLS_POPUPCLASS));\n    let clsList = trgt.classList;\n    let popupNav = closest(trgt, '.' + CLS_TBARNAV);\n\n    if (!popupNav) {\n      popupNav = trgt;\n    }\n\n    if (!ele.children[0].classList.contains('e-hscroll') && !ele.children[0].classList.contains('e-vscroll') && clsList.contains(CLS_TBARNAV)) {\n      clsList = trgt.querySelector('.e-icons').classList;\n    }\n\n    if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n      this.popupClickHandler(ele, popupNav, CLS_RTL$2);\n    }\n\n    let itemObj;\n    const clst = closest(e.target, '.' + CLS_ITEM);\n\n    if ((isNullOrUndefined(clst) || clst.classList.contains(CLS_DISABLE$2)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n      return;\n    }\n\n    if (clst) {\n      const tempItem = this.items[this.tbarEle.indexOf(clst)];\n      itemObj = tempItem;\n    }\n\n    const eventArgs = {\n      originalEvent: e,\n      item: itemObj\n    };\n\n    if (itemObj && !isNullOrUndefined(itemObj.click)) {\n      this.trigger('items[' + this.tbarEle.indexOf(clst) + '].click', eventArgs);\n    }\n\n    if (!eventArgs.cancel) {\n      this.trigger('clicked', eventArgs, clickedArgs => {\n        if (!isNullOrUndefined(this.popObj) && isPopupElement && !clickedArgs.cancel && this.overflowMode === 'Popup' && clickedArgs.item && clickedArgs.item.type !== 'Input') {\n          this.popObj.hide({\n            name: 'FadeOut',\n            duration: 100\n          });\n        }\n      });\n    }\n  }\n\n  popupClickHandler(ele, popupNav, CLS_RTL) {\n    const popObj = this.popObj;\n\n    if (isVisible(popObj.element)) {\n      popupNav.classList.remove(CLS_TBARNAVACT);\n      popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    } else {\n      if (ele.classList.contains(CLS_RTL)) {\n        popObj.enableRtl = true;\n        popObj.position = {\n          X: 'left',\n          Y: 'top'\n        };\n      }\n\n      if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n        popObj.enableRtl = false;\n        popObj.position = {\n          X: 'right',\n          Y: 'top'\n        };\n      }\n\n      popObj.dataBind();\n      popObj.refreshPosition();\n      popObj.element.style.top = this.getElementOffsetY() + 'px';\n\n      if (this.overflowMode === 'Extended') {\n        popObj.element.style.minHeight = '0px';\n      }\n\n      popupNav.classList.add(CLS_TBARNAVACT);\n      popObj.show({\n        name: 'FadeIn',\n        duration: 100\n      });\n    }\n  }\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.initialize();\n    this.renderControl();\n    this.wireEvents();\n    this.renderComplete();\n  }\n\n  initialize() {\n    const width = formatUnit(this.width);\n    const height = formatUnit(this.height);\n\n    if (Browser.info.name !== 'msie' || this.height !== 'auto' || this.overflowMode === 'MultiRow') {\n      setStyleAttribute(this.element, {\n        'height': height\n      });\n    }\n\n    setStyleAttribute(this.element, {\n      'width': width\n    });\n    const ariaAttr = {\n      'role': 'toolbar',\n      'aria-disabled': 'false',\n      'aria-haspopup': 'false',\n      'aria-orientation': !this.isVertical ? 'horizontal' : 'vertical'\n    };\n    attributes(this.element, ariaAttr);\n\n    if (this.cssClass) {\n      addClass([this.element], this.cssClass.split(' '));\n    }\n  }\n\n  renderControl() {\n    const ele = this.element;\n    this.trgtEle = ele.children.length > 0 ? ele.querySelector('div') : null;\n    this.tbarAlgEle = {\n      lefts: [],\n      centers: [],\n      rights: []\n    };\n    this.renderItems();\n    this.renderLayout();\n  }\n\n  renderLayout() {\n    this.renderOverflowMode();\n\n    if (this.tbarAlign) {\n      this.itemPositioning();\n    }\n\n    if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {\n      this.popupRefresh(this.popObj.element, false);\n    }\n\n    this.separator();\n  }\n\n  itemsAlign(items, itemEleDom) {\n    let innerItem;\n    let innerPos;\n\n    if (!this.tbarEle) {\n      this.tbarEle = [];\n    }\n\n    for (let i = 0; i < items.length; i++) {\n      innerItem = this.renderSubComponent(items[i], i);\n\n      if (this.tbarEle.indexOf(innerItem) === -1) {\n        this.tbarEle.push(innerItem);\n      }\n\n      if (!this.tbarAlign) {\n        this.tbarItemAlign(items[i], itemEleDom, i);\n      }\n\n      innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n\n      if (innerPos) {\n        if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {\n          this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);\n        }\n\n        innerPos.appendChild(innerItem);\n      } else {\n        itemEleDom.appendChild(innerItem);\n      }\n    }\n\n    if (this.isReact) {\n      const portals = 'portals';\n      this.notify('render-react-toolbar-template', this[portals]);\n      this.renderReactTemplates();\n    }\n  }\n  /**\n   * @hidden\n   * @returns {void}\n   */\n\n\n  changeOrientation() {\n    const ele = this.element;\n\n    if (this.isVertical) {\n      ele.classList.remove(CLS_VERTICAL);\n      this.isVertical = false;\n\n      if (this.height === 'auto' || this.height === '100%') {\n        ele.style.height = this.height;\n      }\n\n      ele.setAttribute('aria-orientation', 'horizontal');\n    } else {\n      ele.classList.add(CLS_VERTICAL);\n      this.isVertical = true;\n      ele.setAttribute('aria-orientation', 'vertical');\n      setStyleAttribute(this.element, {\n        'height': formatUnit(this.height),\n        'width': formatUnit(this.width)\n      });\n    }\n\n    this.destroyMode();\n    this.refreshOverflow();\n  }\n\n  initScroll(element, innerItems) {\n    if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n      if (this.tbarAlign) {\n        this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n      }\n\n      if (this.isVertical) {\n        this.scrollModule = new VScroll({\n          scrollStep: this.scrollStep,\n          enableRtl: this.enableRtl\n        }, innerItems[0]);\n      } else {\n        this.scrollModule = new HScroll({\n          scrollStep: this.scrollStep,\n          enableRtl: this.enableRtl\n        }, innerItems[0]);\n      }\n\n      if (this.cssClass) {\n        addClass([innerItems[0]], this.cssClass.split(' '));\n      }\n\n      this.remove(this.scrollModule.element, CLS_TBARPOS);\n      setStyleAttribute(this.element, {\n        overflow: 'hidden'\n      });\n    }\n  }\n\n  itemWidthCal(items) {\n    let width = 0;\n    let style;\n    [].slice.call(selectAll('.' + CLS_ITEM, items)).forEach(el => {\n      if (isVisible(el)) {\n        style = window.getComputedStyle(el);\n        width += this.isVertical ? el.offsetHeight : el.offsetWidth;\n        width += parseFloat(this.isVertical ? style.marginTop : style.marginRight);\n        width += parseFloat(this.isVertical ? style.marginBottom : style.marginLeft);\n      }\n    });\n    return width;\n  }\n\n  getScrollCntEle(innerItem) {\n    const trgClass = this.isVertical ? '.e-vscroll-content' : '.e-hscroll-content';\n    return innerItem.querySelector(trgClass);\n  }\n\n  checkOverflow(element, innerItem) {\n    if (isNullOrUndefined(element) || isNullOrUndefined(innerItem) || !isVisible(element)) {\n      return false;\n    }\n\n    const eleWidth = this.isVertical ? element.offsetHeight : element.offsetWidth;\n    let itemWidth = this.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;\n\n    if (this.tbarAlign || this.scrollModule || eleWidth === itemWidth) {\n      itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);\n    }\n\n    const popNav = element.querySelector('.' + CLS_TBARNAV);\n    const scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n    let navEleWidth = 0;\n\n    if (popNav) {\n      navEleWidth = this.isVertical ? popNav.offsetHeight : popNav.offsetWidth;\n    } else if (scrollNav) {\n      navEleWidth = this.isVertical ? scrollNav.offsetHeight * 2 : scrollNav.offsetWidth * 2;\n    }\n\n    if (itemWidth > eleWidth - navEleWidth) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  /**\n   * Refresh the whole Toolbar component without re-rendering.\n   * - It is used to manually refresh the Toolbar overflow modes such as scrollable, popup, multi row, and extended.\n   * - It will refresh the Toolbar component after loading items dynamically.\n   *\n   * @returns {void}.\n   */\n\n\n  refreshOverflow() {\n    this.resize();\n  }\n\n  toolbarAlign(innerItems) {\n    if (this.tbarAlign) {\n      this.add(innerItems, CLS_TBARPOS);\n      this.itemPositioning();\n    }\n  }\n\n  renderOverflowMode() {\n    const ele = this.element;\n    const innerItems = ele.querySelector('.' + CLS_ITEMS);\n    const priorityCheck = this.popupPriCount > 0;\n\n    if (ele && ele.children.length > 0) {\n      this.offsetWid = ele.offsetWidth;\n      this.remove(this.element, 'e-toolpop');\n\n      if (Browser.info.name === 'msie' && this.height === 'auto') {\n        ele.style.height = '';\n      }\n\n      switch (this.overflowMode) {\n        case 'Scrollable':\n          if (isNullOrUndefined(this.scrollModule)) {\n            this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS)));\n          }\n\n          break;\n\n        case 'Popup':\n          this.add(this.element, 'e-toolpop');\n\n          if (this.tbarAlign) {\n            this.removePositioning();\n          }\n\n          if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n            this.setOverflowAttributes(ele);\n          }\n\n          this.toolbarAlign(innerItems);\n          break;\n\n        case 'MultiRow':\n          this.add(innerItems, CLS_MULTIROW);\n\n          if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {\n            this.removePositioning();\n            this.add(innerItems, CLS_MULTIROWPOS);\n          }\n\n          if (ele.style.overflow === 'hidden') {\n            ele.style.overflow = '';\n          }\n\n          if (Browser.info.name === 'msie' || ele.style.height !== 'auto') {\n            ele.style.height = 'auto';\n          }\n\n          break;\n\n        case 'Extended':\n          this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);\n\n          if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n            if (this.tbarAlign) {\n              this.removePositioning();\n            }\n\n            this.setOverflowAttributes(ele);\n          }\n\n          this.toolbarAlign(innerItems);\n      }\n    }\n  }\n\n  setOverflowAttributes(ele) {\n    this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n    this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n    this.element.querySelector('.' + CLS_TBARNAV).setAttribute('role', 'list');\n  }\n\n  separator() {\n    const element = this.element;\n    const eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));\n    const multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);\n    const extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);\n    const eleInlineItem = this.overflowMode === 'MultiRow' ? multiVar : extendVar;\n\n    if (eleInlineItem !== null) {\n      if (this.overflowMode === 'MultiRow') {\n        eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);\n      } else if (this.overflowMode === 'Extended') {\n        eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);\n      }\n    }\n\n    for (let i = 0; i <= eleItem.length - 1; i++) {\n      if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {\n        if (this.overflowMode === 'MultiRow') {\n          eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);\n        } else if (this.overflowMode === 'Extended') {\n          eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);\n        }\n      }\n    }\n  }\n\n  createPopupEle(ele, innerEle) {\n    let innerNav = ele.querySelector('.' + CLS_TBARNAV);\n    const vertical = this.isVertical;\n\n    if (!innerNav) {\n      this.createPopupIcon(ele);\n    }\n\n    innerNav = ele.querySelector('.' + CLS_TBARNAV);\n    const innerNavDom = vertical ? innerNav.offsetHeight : innerNav.offsetWidth;\n    const eleWidth = (vertical ? ele.offsetHeight : ele.offsetWidth) - innerNavDom;\n    this.element.classList.remove('e-rtl');\n    setStyleAttribute(this.element, {\n      direction: 'initial'\n    });\n    this.checkPriority(ele, innerEle, eleWidth, true);\n\n    if (this.enableRtl) {\n      this.element.classList.add('e-rtl');\n    }\n\n    this.element.style.removeProperty('direction');\n    this.createPopup();\n  }\n\n  pushingPoppedEle(tbarObj, popupPri, ele, eleHeight, sepHeight) {\n    const element = tbarObj.element;\n    const poppedEle = [].slice.call(selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n    let nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n    let nodeIndex = 0;\n    let nodePri = 0;\n    poppedEle.forEach((el, index) => {\n      nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n\n      if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n        if (tbarObj.tbResize && nodes.length > index) {\n          ele.insertBefore(el, nodes[index]);\n          ++nodePri;\n        } else {\n          ele.insertBefore(el, ele.children[nodes.length]);\n          ++nodePri;\n        }\n      } else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n        ele.insertBefore(el, ele.firstChild);\n        ++nodePri;\n      } else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n        ele.insertBefore(el, ele.firstChild);\n        ++nodePri;\n      } else if (el.classList.contains(CLS_POPOVERFLOW)) {\n        popupPri.push(el);\n      } else if (tbarObj.tbResize) {\n        ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n        ++nodeIndex;\n      } else {\n        ele.appendChild(el);\n      }\n\n      if (el.classList.contains(CLS_SEPARATOR)) {\n        setStyleAttribute(el, {\n          display: '',\n          height: sepHeight + 'px'\n        });\n      } else {\n        setStyleAttribute(el, {\n          display: '',\n          height: eleHeight + 'px'\n        });\n      }\n    });\n    popupPri.forEach(el => {\n      ele.appendChild(el);\n    });\n    const tbarEle = selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n\n    for (let i = tbarEle.length - 1; i >= 0; i--) {\n      const tbarElement = tbarEle[i];\n\n      if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== 'Extended') {\n        setStyleAttribute(tbarElement, {\n          display: 'none'\n        });\n      } else {\n        break;\n      }\n    }\n  }\n\n  createPopup() {\n    const element = this.element;\n    let sepHeight;\n    let sepItem;\n\n    if (this.overflowMode === 'Extended') {\n      sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ')');\n      sepHeight = element.style.height === 'auto' || element.style.height === '' ? null : sepItem.offsetHeight;\n    }\n\n    const eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_POPUP + ')');\n    const eleHeight = element.style.height === 'auto' || element.style.height === '' ? null : eleItem && eleItem.offsetHeight;\n    let ele;\n    const popupPri = [];\n\n    if (select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element)) {\n      ele = select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element);\n    } else {\n      const extendEle = this.createElement('div', {\n        id: element.id + '_popup',\n        className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS\n      });\n      const popupEle = this.createElement('div', {\n        id: element.id + '_popup',\n        className: CLS_POPUPCLASS\n      });\n      ele = this.overflowMode === 'Extended' ? extendEle : popupEle;\n    }\n\n    this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);\n    this.popupInit(element, ele);\n  }\n\n  getElementOffsetY() {\n    return this.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ? this.element.clientHeight : this.element.offsetHeight;\n  }\n\n  popupInit(element, ele) {\n    if (!this.popObj) {\n      element.appendChild(ele);\n\n      if (this.cssClass) {\n        addClass([ele], this.cssClass.split(' '));\n      }\n\n      setStyleAttribute(this.element, {\n        overflow: ''\n      });\n      const eleStyles = window.getComputedStyle(this.element);\n      const popup = new Popup(null, {\n        relateTo: this.element,\n        offsetY: this.isVertical ? 0 : this.getElementOffsetY(),\n        enableRtl: this.enableRtl,\n        open: this.popupOpen.bind(this),\n        close: this.popupClose.bind(this),\n        collision: {\n          Y: this.enableCollision ? 'flip' : 'none'\n        },\n        position: this.enableRtl ? {\n          X: 'left',\n          Y: 'top'\n        } : {\n          X: 'right',\n          Y: 'top'\n        }\n      });\n      popup.appendTo(ele);\n\n      if (this.overflowMode === 'Extended') {\n        popup.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;\n        popup.offsetX = 0;\n      }\n\n      EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n      EventHandler.add(document, 'click ', this.docEvent.bind(this));\n      popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n\n      if (this.isVertical) {\n        popup.element.style.visibility = 'hidden';\n      }\n\n      if (this.isExtendedOpen) {\n        const popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n        popupNav.classList.add(CLS_TBARNAVACT);\n        classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n        this.element.querySelector('.' + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);\n      } else {\n        popup.hide();\n      }\n\n      this.popObj = popup;\n      this.element.setAttribute('aria-haspopup', 'true');\n    } else {\n      const popupEle = this.popObj.element;\n      setStyleAttribute(popupEle, {\n        maxHeight: '',\n        display: 'block'\n      });\n      setStyleAttribute(popupEle, {\n        maxHeight: popupEle.offsetHeight + 'px',\n        display: ''\n      });\n    }\n  }\n\n  tbarPopupHandler(isOpen) {\n    if (this.overflowMode === 'Extended') {\n      if (isOpen) {\n        this.add(this.element, CLS_EXTENDEDPOPOPEN);\n      } else {\n        this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n      }\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  popupOpen(e) {\n    const popObj = this.popObj;\n\n    if (!this.isVertical) {\n      popObj.offsetY = this.getElementOffsetY();\n      popObj.dataBind();\n    }\n\n    const popupEle = this.popObj.element;\n    const toolEle = this.popObj.element.parentElement;\n    const popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n    setStyleAttribute(popObj.element, {\n      height: 'auto',\n      maxHeight: ''\n    });\n    popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n\n    if (this.overflowMode === 'Extended') {\n      popObj.element.style.minHeight = '';\n    }\n\n    const popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;\n    const popIcon = popupNav.firstElementChild;\n    popupNav.classList.add(CLS_TBARNAVACT);\n    classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n    this.tbarPopupHandler(true);\n    const scrollVal = isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;\n\n    if (!this.isVertical && window.innerHeight + scrollVal < popupElePos && this.element.offsetTop < popupEle.offsetHeight) {\n      let overflowHeight = popupEle.offsetHeight - (popupElePos - window.innerHeight - scrollVal + 5);\n      popObj.height = overflowHeight + 'px';\n\n      for (let i = 0; i <= popupEle.childElementCount; i++) {\n        const ele = popupEle.children[i];\n\n        if (ele.offsetTop + ele.offsetHeight > overflowHeight) {\n          overflowHeight = ele.offsetTop;\n          break;\n        }\n      }\n\n      setStyleAttribute(popObj.element, {\n        maxHeight: overflowHeight + 'px'\n      });\n    } else if (this.isVertical) {\n      const tbEleData = this.element.getBoundingClientRect();\n      setStyleAttribute(popObj.element, {\n        maxHeight: tbEleData.top + this.element.offsetHeight + 'px',\n        bottom: 0,\n        visibility: ''\n      });\n    }\n\n    if (popObj) {\n      const popupOffset = popupEle.getBoundingClientRect();\n\n      if (popupOffset.right > document.documentElement.clientWidth && popupOffset.width > toolEle.getBoundingClientRect().width) {\n        popObj.collision = {\n          Y: 'none'\n        };\n        popObj.dataBind();\n      }\n\n      popObj.refreshPosition();\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  popupClose(e) {\n    const element = this.element;\n    const popupNav = element.querySelector('.' + CLS_TBARNAV);\n    const popIcon = popupNav.firstElementChild;\n    popupNav.classList.remove(CLS_TBARNAVACT);\n    classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n    this.tbarPopupHandler(false);\n  }\n\n  checkPriority(ele, inEle, eleWidth, pre) {\n    const popPriority = this.popupPriCount > 0;\n    const len = inEle.length;\n    const eleWid = eleWidth;\n    let eleOffset;\n    let checkoffset;\n    let sepCheck = 0;\n    let itemCount = 0;\n    let itemPopCount = 0;\n\n    const checkClass = (ele, val) => {\n      let rVal = false;\n      val.forEach(cls => {\n        if (ele.classList.contains(cls)) {\n          rVal = true;\n        }\n      });\n      return rVal;\n    };\n\n    for (let i = len - 1; i >= 0; i--) {\n      let mrgn;\n      const compuStyle = window.getComputedStyle(inEle[i]);\n\n      if (this.isVertical) {\n        mrgn = parseFloat(compuStyle.marginTop);\n        mrgn += parseFloat(compuStyle.marginBottom);\n      } else {\n        mrgn = parseFloat(compuStyle.marginRight);\n        mrgn += parseFloat(compuStyle.marginLeft);\n      }\n\n      const fstEleCheck = inEle[i] === this.tbarEle[0];\n\n      if (fstEleCheck) {\n        this.tbarEleMrgn = mrgn;\n      }\n\n      eleOffset = this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth;\n      const eleWid = fstEleCheck ? eleOffset + mrgn : eleOffset;\n\n      if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {\n        inEle[i].classList.add(CLS_POPUP);\n\n        if (this.isVertical) {\n          setStyleAttribute(inEle[i], {\n            display: 'none',\n            minHeight: eleWid + 'px'\n          });\n        } else {\n          setStyleAttribute(inEle[i], {\n            display: 'none',\n            minWidth: eleWid + 'px'\n          });\n        }\n\n        itemPopCount++;\n      }\n\n      if (this.isVertical) {\n        checkoffset = inEle[i].offsetTop + inEle[i].offsetHeight + mrgn > eleWidth;\n      } else {\n        checkoffset = inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn > eleWidth;\n      }\n\n      if (checkoffset) {\n        if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n          if (this.overflowMode === 'Extended') {\n            if (itemCount === itemPopCount) {\n              const sepEle = inEle[i];\n\n              if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                inEle[i].classList.add(CLS_POPUP);\n                itemPopCount++;\n              }\n            }\n\n            itemCount++;\n          } else if (this.overflowMode === 'Popup') {\n            if (sepCheck > 0 && itemCount === itemPopCount) {\n              const sepEle = inEle[i + itemCount + (sepCheck - 1)];\n\n              if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                setStyleAttribute(sepEle, {\n                  display: 'none'\n                });\n              }\n            }\n\n            sepCheck++;\n            itemCount = 0;\n            itemPopCount = 0;\n          }\n        } else {\n          itemCount++;\n        }\n\n        if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n          eleWidth -= (this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;\n        } else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n          inEle[i].classList.add(CLS_POPUP);\n\n          if (this.isVertical) {\n            setStyleAttribute(inEle[i], {\n              display: 'none',\n              minHeight: eleWid + 'px'\n            });\n          } else {\n            setStyleAttribute(inEle[i], {\n              display: 'none',\n              minWidth: eleWid + 'px'\n            });\n          }\n\n          itemPopCount++;\n        } else {\n          eleWidth -= (this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;\n        }\n      }\n    }\n\n    if (pre) {\n      const popedEle = selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n      this.checkPriority(ele, popedEle, eleWid, false);\n    }\n  }\n\n  createPopupIcon(element) {\n    const id = element.id.concat('_nav');\n    let className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n    className = this.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;\n    const nav = this.createElement('div', {\n      id: id,\n      className: className\n    });\n\n    if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n      nav.classList.add('e-ie-align');\n    }\n\n    const navItem = this.createElement('div', {\n      className: CLS_POPUPDOWN + ' e-icons'\n    });\n    nav.appendChild(navItem);\n    nav.setAttribute('tabindex', '0');\n    nav.setAttribute('role', 'list');\n    element.appendChild(nav);\n  }\n\n  tbarPriRef(inEle, indx, sepPri, el, des, elWid, wid, ig) {\n    const ignoreCount = ig;\n    const popEle = this.popObj.element;\n    const query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n    const priEleCnt = selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n\n    const checkClass = (ele, val) => {\n      return ele.classList.contains(val);\n    };\n\n    if (selectAll(query, inEle).length === 0) {\n      const eleSep = inEle.children[indx - (indx - sepPri) - 1];\n      const ignoreCheck = !isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE);\n\n      if (!isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep) || ignoreCheck) {\n        const sepDisplay = 'none';\n        eleSep.style.display = 'inherit';\n        const eleSepWidth = eleSep.offsetWidth + parseFloat(window.getComputedStyle(eleSep).marginRight) * 2;\n        const prevSep = eleSep.previousElementSibling;\n\n        if (elWid + eleSepWidth < wid || des) {\n          inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);\n\n          if (!isNullOrUndefined(prevSep)) {\n            prevSep.style.display = '';\n          }\n        } else {\n          if (prevSep.classList.contains(CLS_SEPARATOR)) {\n            prevSep.style.display = sepDisplay;\n          }\n        }\n\n        eleSep.style.display = '';\n      } else {\n        inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);\n      }\n    } else {\n      inEle.insertBefore(el, inEle.children[indx + ignoreCount - priEleCnt]);\n    }\n  }\n\n  popupRefresh(popupEle, destroy) {\n    const ele = this.element;\n    const isVer = this.isVertical;\n    const innerEle = ele.querySelector('.' + CLS_ITEMS);\n    let popNav = ele.querySelector('.' + CLS_TBARNAV);\n\n    if (isNullOrUndefined(popNav)) {\n      return;\n    }\n\n    innerEle.removeAttribute('style');\n    popupEle.style.display = 'block';\n    let dimension;\n\n    if (isVer) {\n      dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);\n    } else {\n      dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n    }\n\n    let popupEleWidth = 0;\n    [].slice.call(popupEle.children).forEach(el => {\n      popupEleWidth += this.popupEleWidth(el);\n      setStyleAttribute(el, {\n        'position': ''\n      });\n    });\n\n    if (dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth) > popupEleWidth && this.popupPriCount === 0) {\n      destroy = true;\n    }\n\n    this.popupEleRefresh(dimension, popupEle, destroy);\n    popupEle.style.display = '';\n\n    if (popupEle.children.length === 0 && popNav && this.popObj) {\n      detach(popNav);\n      popNav = null;\n      this.popObj.destroy();\n      detach(this.popObj.element);\n      this.popObj = null;\n      ele.setAttribute('aria-haspopup', 'false');\n    }\n  }\n\n  ignoreEleFetch(index, innerEle) {\n    const ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n    const ignoreInx = [];\n    let count = 0;\n\n    if (ignoreEle.length > 0) {\n      ignoreEle.forEach(ele => {\n        ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n      });\n    } else {\n      return 0;\n    }\n\n    ignoreInx.forEach(val => {\n      if (val <= index) {\n        count++;\n      }\n    });\n    return count;\n  }\n\n  checkPopupRefresh(root, popEle) {\n    popEle.style.display = 'block';\n    const elWid = this.popupEleWidth(popEle.firstElementChild);\n    popEle.firstElementChild.style.removeProperty('Position');\n    const tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;\n    const tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;\n    popEle.style.removeProperty('display');\n\n    if (tbarWidth > elWid + tbarItemsWid) {\n      return true;\n    }\n\n    return false;\n  }\n\n  popupEleWidth(el) {\n    el.style.position = 'absolute';\n    let elWidth = this.isVertical ? el.offsetHeight : el.offsetWidth;\n    const btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n\n    if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n      const btn = el.children[0];\n\n      if (!isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n        btnText.style.display = 'none';\n      } else if (!isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n        btnText.style.display = 'block';\n      }\n\n      btn.style.minWidth = '0%';\n      elWidth = parseFloat(!this.isVertical ? el.style.minWidth : el.style.minHeight);\n      btn.style.minWidth = '';\n      btn.style.minHeight = '';\n\n      if (!isNullOrUndefined(btnText)) {\n        btnText.style.display = '';\n      }\n    }\n\n    return elWidth;\n  }\n\n  popupEleRefresh(width, popupEle, destroy) {\n    const popPriority = this.popupPriCount > 0;\n    let eleSplice = this.tbarEle;\n    let priEleCnt;\n    let index;\n    let innerEle = this.element.querySelector('.' + CLS_ITEMS);\n    let ignoreCount = 0;\n\n    for (const el of [].slice.call(popupEle.children)) {\n      if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {\n        continue;\n      }\n\n      let elWidth = this.popupEleWidth(el);\n\n      if (el === this.tbarEle[0]) {\n        elWidth += this.tbarEleMrgn;\n      }\n\n      el.style.position = '';\n\n      if (elWidth < width || destroy) {\n        setStyleAttribute(el, {\n          minWidth: '',\n          height: '',\n          minHeight: ''\n        });\n\n        if (!el.classList.contains(CLS_POPOVERFLOW)) {\n          el.classList.remove(CLS_POPUP);\n        }\n\n        index = this.tbarEle.indexOf(el);\n\n        if (this.tbarAlign) {\n          const pos = this.items[index].align;\n          index = this.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);\n          eleSplice = this.tbarAlgEle[(pos + 's').toLowerCase()];\n          innerEle = this.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());\n        }\n\n        let sepBeforePri = 0;\n\n        if (this.overflowMode !== 'Extended') {\n          eleSplice.slice(0, index).forEach(el => {\n            if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n              if (el.classList.contains(CLS_SEPARATOR)) {\n                el.style.display = '';\n                width -= el.offsetWidth;\n              }\n\n              sepBeforePri++;\n            }\n          });\n        }\n\n        ignoreCount = this.ignoreEleFetch(index, innerEle);\n\n        if (el.classList.contains(CLS_TBAROVERFLOW)) {\n          this.tbarPriRef(innerEle, index, sepBeforePri, el, destroy, elWidth, width, ignoreCount);\n          width -= el.offsetWidth;\n        } else if (index === 0) {\n          innerEle.insertBefore(el, innerEle.firstChild);\n          width -= el.offsetWidth;\n        } else {\n          priEleCnt = selectAll('.' + CLS_TBAROVERFLOW, this.popObj.element).length;\n          innerEle.insertBefore(el, innerEle.children[index + ignoreCount - priEleCnt]);\n          width -= el.offsetWidth;\n        }\n\n        el.style.height = '';\n      } else {\n        break;\n      }\n    }\n\n    const checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n\n    if (checkOverflow && !destroy) {\n      this.renderOverflowMode();\n    }\n  }\n\n  removePositioning() {\n    const item = this.element.querySelector('.' + CLS_ITEMS);\n\n    if (isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n      return;\n    }\n\n    this.remove(item, CLS_TBARPOS);\n    const innerItem = [].slice.call(item.childNodes);\n    innerItem[1].removeAttribute('style');\n    innerItem[2].removeAttribute('style');\n  }\n\n  refreshPositioning() {\n    const item = this.element.querySelector('.' + CLS_ITEMS);\n    this.add(item, CLS_TBARPOS);\n    this.itemPositioning();\n  }\n\n  itemPositioning() {\n    const item = this.element.querySelector('.' + CLS_ITEMS);\n    let margin;\n\n    if (isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n      return;\n    }\n\n    const popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n    let innerItem;\n\n    if (this.scrollModule) {\n      const trgClass = this.isVertical ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;\n      innerItem = [].slice.call(item.querySelector('.' + trgClass).children);\n    } else {\n      innerItem = [].slice.call(item.childNodes);\n    }\n\n    if (this.isVertical) {\n      margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;\n    } else {\n      margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n    }\n\n    let tbarWid = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth;\n\n    if (popupNav) {\n      tbarWid -= this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth;\n      const popWid = (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + 'px';\n      innerItem[2].removeAttribute('style');\n\n      if (this.isVertical) {\n        if (this.enableRtl) {\n          innerItem[2].style.top = popWid;\n        } else {\n          innerItem[2].style.bottom = popWid;\n        }\n      } else {\n        if (this.enableRtl) {\n          innerItem[2].style.left = popWid;\n        } else {\n          innerItem[2].style.right = popWid;\n        }\n      }\n    }\n\n    if (tbarWid <= margin) {\n      return;\n    }\n\n    const value = (tbarWid - margin - (!this.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;\n    innerItem[1].removeAttribute('style');\n    const mrgn = (!this.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value + 'px';\n\n    if (this.isVertical) {\n      if (this.enableRtl) {\n        innerItem[1].style.marginBottom = mrgn;\n      } else {\n        innerItem[1].style.marginTop = mrgn;\n      }\n    } else {\n      if (this.enableRtl) {\n        innerItem[1].style.marginRight = mrgn;\n      } else {\n        innerItem[1].style.marginLeft = mrgn;\n      }\n    }\n  }\n\n  tbarItemAlign(item, itemEle, pos) {\n    if (item.showAlwaysInPopup && item.overflow !== 'Show') {\n      return;\n    }\n\n    const alignDiv = [];\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARLEFT\n    }));\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARCENTER\n    }));\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARRIGHT\n    }));\n\n    if (pos === 0 && item.align !== 'Left') {\n      alignDiv.forEach(ele => {\n        itemEle.appendChild(ele);\n      });\n      this.tbarAlign = true;\n      this.add(itemEle, CLS_TBARPOS);\n    } else if (item.align !== 'Left') {\n      const alignEle = itemEle.childNodes;\n      const leftAlign = alignDiv[0];\n      [].slice.call(alignEle).forEach(el => {\n        this.tbarAlgEle.lefts.push(el);\n        leftAlign.appendChild(el);\n      });\n      itemEle.appendChild(leftAlign);\n      itemEle.appendChild(alignDiv[1]);\n      itemEle.appendChild(alignDiv[2]);\n      this.tbarAlign = true;\n      this.add(itemEle, CLS_TBARPOS);\n    }\n  }\n\n  ctrlTemplate() {\n    this.ctrlTem = this.trgtEle.cloneNode(true);\n    this.add(this.trgtEle, CLS_ITEMS);\n    this.tbarEle = [];\n    const innerEle = [].slice.call(this.trgtEle.children);\n    innerEle.forEach(ele => {\n      if (ele.tagName === 'DIV') {\n        this.tbarEle.push(ele);\n        ele.setAttribute('aria-disabled', 'false');\n        this.add(ele, CLS_ITEM);\n      }\n    });\n  }\n\n  renderItems() {\n    const ele = this.element;\n    const items = this.items;\n\n    if (this.trgtEle != null) {\n      this.ctrlTemplate();\n    } else if (ele && items.length > 0) {\n      let itemEleDom;\n\n      if (ele && ele.children.length > 0) {\n        itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n      }\n\n      if (!itemEleDom) {\n        itemEleDom = this.createElement('div', {\n          className: CLS_ITEMS\n        });\n      }\n\n      this.itemsAlign(items, itemEleDom);\n      ele.appendChild(itemEleDom);\n    }\n  }\n\n  setAttr(attr, element) {\n    const key = Object.keys(attr);\n    let keyVal;\n\n    for (let i = 0; i < key.length; i++) {\n      keyVal = key[i];\n\n      if (keyVal === 'class') {\n        this.add(element, attr[keyVal]);\n      } else {\n        element.setAttribute(keyVal, attr[keyVal]);\n      }\n    }\n  }\n  /**\n   * Enables or disables the specified Toolbar item.\n   *\n   * @param  {number|HTMLElement|NodeList} items - DOM element or an array of items to be enabled or disabled.\n   * @param  {boolean} isEnable  - Boolean value that determines whether the command should be enabled or disabled.\n   * By default, `isEnable` is set to true.\n   * @returns {void}.\n   */\n\n\n  enableItems(items, isEnable) {\n    const elements = items;\n    const len = elements.length;\n    let ele;\n\n    if (isNullOrUndefined(isEnable)) {\n      isEnable = true;\n    }\n\n    const enable = (isEnable, ele) => {\n      if (isEnable) {\n        ele.classList.remove(CLS_DISABLE$2);\n        ele.setAttribute('aria-disabled', 'false');\n      } else {\n        ele.classList.add(CLS_DISABLE$2);\n        ele.setAttribute('aria-disabled', 'true');\n      }\n    };\n\n    if (!isNullOrUndefined(len) && len >= 1) {\n      for (let a = 0, element = [].slice.call(elements); a < len; a++) {\n        const itemElement = element[a];\n\n        if (typeof itemElement === 'number') {\n          ele = this.getElementByIndex(itemElement);\n\n          if (isNullOrUndefined(ele)) {\n            return;\n          } else {\n            elements[a] = ele;\n          }\n        } else {\n          ele = itemElement;\n        }\n\n        enable(isEnable, ele);\n      }\n\n      if (isEnable) {\n        removeClass(elements, CLS_DISABLE$2);\n      } else {\n        addClass(elements, CLS_DISABLE$2);\n      }\n    } else {\n      if (typeof elements === 'number') {\n        ele = this.getElementByIndex(elements);\n\n        if (isNullOrUndefined(ele)) {\n          return;\n        }\n      } else {\n        ele = items;\n      }\n\n      enable(isEnable, ele);\n    }\n  }\n\n  getElementByIndex(index) {\n    if (this.tbarEle[index]) {\n      return this.tbarEle[index];\n    }\n\n    return null;\n  }\n  /**\n   * Adds new items to the Toolbar that accepts an array as Toolbar items.\n   *\n   * @param  {ItemModel[]} items - DOM element or an array of items to be added to the Toolbar.\n   * @param  {number} index - Number value that determines where the command is to be added. By default, index is 0.\n   * @returns {void}.\n   */\n\n\n  addItems(items, index) {\n    let innerItems;\n    this.extendedOpen();\n    const itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n\n    if (isNullOrUndefined(itemsDiv)) {\n      this.itemsRerender(items);\n      return;\n    }\n\n    let innerEle;\n    let itemAgn = 'Left';\n\n    if (isNullOrUndefined(index)) {\n      index = 0;\n    }\n\n    items.forEach(e => {\n      if (!isNullOrUndefined(e.align) && e.align !== 'Left' && itemAgn === 'Left') {\n        itemAgn = e.align;\n      }\n    });\n\n    for (const item of items) {\n      if (isNullOrUndefined(item.type)) {\n        item.type = 'Button';\n      }\n\n      innerItems = selectAll('.' + CLS_ITEM, this.element);\n      item.align = itemAgn;\n      innerEle = this.renderSubComponent(item, index);\n\n      if (this.tbarEle.length >= index && innerItems.length >= 0) {\n        if (isNullOrUndefined(this.scrollModule)) {\n          this.destroyMode();\n        }\n\n        const algIndex = item.align[0] === 'L' ? 0 : item.align[0] === 'C' ? 1 : 2;\n        let ele;\n\n        if (!this.tbarAlign && itemAgn !== 'Left') {\n          this.tbarItemAlign(item, itemsDiv, 1);\n          this.tbarAlign = true;\n          ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n          ele.appendChild(innerEle);\n          this.tbarAlgEle[(item.align + 's').toLowerCase()].push(innerEle);\n          this.refreshPositioning();\n        } else if (this.tbarAlign) {\n          ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n          ele.insertBefore(innerEle, ele.children[index]);\n          this.tbarAlgEle[(item.align + 's').toLowerCase()].splice(index, 0, innerEle);\n          this.refreshPositioning();\n        } else if (innerItems.length === 0) {\n          innerItems = selectAll('.' + CLS_ITEMS, this.element);\n          innerItems[0].appendChild(innerEle);\n        } else {\n          innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n        }\n\n        this.items.splice(index, 0, item);\n\n        if (item.template) {\n          this.tbarEle.splice(this.tbarEle.length - 1, 1);\n        }\n\n        this.tbarEle.splice(index, 0, innerEle);\n        index++;\n        this.offsetWid = itemsDiv.offsetWidth;\n      }\n    }\n\n    itemsDiv.style.width = '';\n    this.renderOverflowMode();\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n  /**\n   * Removes the items from the Toolbar. Acceptable arguments are index of item/HTMLElement/node list.\n   *\n   * @param  {number|HTMLElement|NodeList|HTMLElement[]} args\n   * Index or DOM element or an Array of item which is to be removed from the Toolbar.\n   * @returns {void}.\n   */\n\n\n  removeItems(args) {\n    const elements = args;\n    let index;\n    let innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n    if (typeof elements === 'number') {\n      index = parseInt(args.toString(), 10);\n      this.removeItemByIndex(index, innerItems);\n    } else {\n      if (elements && elements.length > 1) {\n        for (const ele of [].slice.call(elements)) {\n          index = this.tbarEle.indexOf(ele);\n          this.removeItemByIndex(index, innerItems);\n          innerItems = selectAll('.' + CLS_ITEM, this.element);\n        }\n      } else {\n        const ele = elements && elements.length && elements.length === 1 ? elements[0] : args;\n        index = innerItems.indexOf(ele);\n        this.removeItemByIndex(index, innerItems);\n      }\n    }\n\n    this.resize();\n  }\n\n  removeItemByIndex(index, innerItems) {\n    if (this.tbarEle[index] && innerItems[index]) {\n      const eleIdx = this.tbarEle.indexOf(innerItems[index]);\n\n      if (this.tbarAlign) {\n        const indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].indexOf(this.tbarEle[eleIdx]);\n        this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].splice(indexAgn, 1);\n      }\n\n      if (this.isReact) {\n        this.clearTemplate();\n      }\n\n      const btnItem = innerItems[index].querySelector('.e-control.e-btn');\n\n      if (!isNullOrUndefined(btnItem) && !isNullOrUndefined(btnItem.ej2_instances[0]) && !btnItem.ej2_instances[0].isDestroyed) {\n        btnItem.ej2_instances[0].destroy();\n      }\n\n      detach(innerItems[index]);\n      this.items.splice(eleIdx, 1);\n      this.tbarEle.splice(eleIdx, 1);\n    }\n  }\n\n  templateRender(templateProp, innerEle, item, index) {\n    const itemType = item.type;\n    const eleObj = templateProp;\n    let isComponent;\n\n    if (typeof templateProp === 'object') {\n      isComponent = typeof eleObj.appendTo === 'function';\n    }\n\n    if (typeof templateProp === 'string' || !isComponent) {\n      let templateFn;\n      let val = templateProp;\n      const regEx = new RegExp(/<(?=.*? .*?\\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\\/\\1>/i);\n      val = typeof templateProp === 'string' ? templateProp.trim() : templateProp;\n\n      try {\n        if (typeof templateProp === 'object' && !isNullOrUndefined(templateProp.tagName)) {\n          innerEle.appendChild(templateProp);\n        } else if (typeof templateProp === 'string' && regEx.test(val)) {\n          innerEle.innerHTML = val;\n        } else if (document.querySelectorAll(val).length) {\n          const ele = document.querySelector(val);\n          const tempStr = ele.outerHTML.trim();\n          innerEle.appendChild(ele);\n          ele.style.display = '';\n\n          if (!isNullOrUndefined(tempStr)) {\n            this.tempId.push(val);\n          }\n        } else {\n          templateFn = compile(val);\n        }\n      } catch (e) {\n        templateFn = compile(val);\n      }\n\n      let tempArray;\n\n      if (!isNullOrUndefined(templateFn)) {\n        const toolbarTemplateID = this.element.id + index + '_template';\n        tempArray = templateFn({}, this, 'template', toolbarTemplateID, this.isStringTemplate);\n      }\n\n      if (!isNullOrUndefined(tempArray) && tempArray.length > 0) {\n        [].slice.call(tempArray).forEach(ele => {\n          if (!isNullOrUndefined(ele.tagName)) {\n            ele.style.display = '';\n          }\n\n          innerEle.appendChild(ele);\n        });\n      }\n    } else if (itemType === 'Input') {\n      const ele = this.createElement('input');\n\n      if (item.id) {\n        ele.id = item.id;\n      } else {\n        ele.id = getUniqueID('tbr-ipt');\n      }\n\n      innerEle.appendChild(ele);\n      eleObj.appendTo(ele);\n    }\n\n    this.add(innerEle, CLS_TEMPLATE);\n    this.tbarEle.push(innerEle);\n  }\n\n  buttonRendering(item, innerEle) {\n    const dom = this.createElement('button', {\n      className: CLS_TBARBTN\n    });\n    dom.setAttribute('type', 'button');\n    const textStr = item.text;\n    let iconCss;\n    let iconPos;\n\n    if (item.id) {\n      dom.id = item.id;\n    } else {\n      dom.id = getUniqueID('e-tbr-btn');\n    }\n\n    const btnTxt = this.createElement('span', {\n      className: 'e-tbar-btn-text'\n    });\n\n    if (textStr) {\n      btnTxt.innerHTML = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(textStr) : textStr;\n      dom.appendChild(btnTxt);\n      dom.classList.add('e-tbtn-txt');\n    } else {\n      this.add(innerEle, 'e-tbtn-align');\n    }\n\n    if (item.prefixIcon || item.suffixIcon) {\n      if (item.prefixIcon && item.suffixIcon || item.prefixIcon) {\n        iconCss = item.prefixIcon + ' e-icons';\n        iconPos = 'Left';\n      } else {\n        iconCss = item.suffixIcon + ' e-icons';\n        iconPos = 'Right';\n      }\n    }\n\n    const btnObj = new Button({\n      iconCss: iconCss,\n      iconPosition: iconPos\n    });\n    btnObj.createElement = this.createElement;\n    btnObj.appendTo(dom);\n\n    if (item.width) {\n      setStyleAttribute(dom, {\n        'width': formatUnit(item.width)\n      });\n    }\n\n    return dom;\n  }\n\n  renderSubComponent(item, index) {\n    let dom;\n    const innerEle = this.createElement('div', {\n      className: CLS_ITEM\n    });\n    innerEle.setAttribute('aria-disabled', 'false');\n    const tempDom = this.createElement('div', {\n      innerHTML: this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.tooltipText) : item.tooltipText\n    });\n\n    if (!this.tbarEle) {\n      this.tbarEle = [];\n    }\n\n    if (item.htmlAttributes) {\n      this.setAttr(item.htmlAttributes, innerEle);\n    }\n\n    if (item.tooltipText) {\n      innerEle.setAttribute('title', tempDom.textContent);\n    }\n\n    if (item.cssClass) {\n      innerEle.className = innerEle.className + ' ' + item.cssClass;\n    }\n\n    if (item.template) {\n      this.templateRender(item.template, innerEle, item, index);\n    } else {\n      switch (item.type) {\n        case 'Button':\n          dom = this.buttonRendering(item, innerEle);\n          dom.setAttribute('tabindex', '-1');\n          dom.setAttribute('aria-label', item.text || item.tooltipText);\n          innerEle.appendChild(dom);\n          innerEle.addEventListener('click', this.itemClick.bind(this));\n          break;\n\n        case 'Separator':\n          this.add(innerEle, CLS_SEPARATOR);\n          break;\n      }\n    }\n\n    if (item.showTextOn) {\n      const sTxt = item.showTextOn;\n\n      if (sTxt === 'Toolbar') {\n        this.add(innerEle, CLS_POPUPTEXT);\n        this.add(innerEle, 'e-tbtn-align');\n      } else if (sTxt === 'Overflow') {\n        this.add(innerEle, CLS_TBARTEXT);\n      }\n    }\n\n    if (item.overflow) {\n      const overflow = item.overflow;\n\n      if (overflow === 'Show') {\n        this.add(innerEle, CLS_TBAROVERFLOW);\n      } else if (overflow === 'Hide') {\n        if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n          this.add(innerEle, CLS_POPOVERFLOW);\n        }\n      }\n    }\n\n    if (item.overflow !== 'Show' && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {\n      this.add(innerEle, CLS_POPPRI);\n      this.popupPriCount++;\n    }\n\n    if (item.disabled) {\n      this.add(innerEle, CLS_DISABLE$2);\n    }\n\n    if (item.visible === false) {\n      this.add(innerEle, CLS_HIDDEN);\n    }\n\n    return innerEle;\n  }\n\n  itemClick(e) {\n    this.activeEleSwitch(e.currentTarget);\n  }\n\n  activeEleSwitch(ele) {\n    this.activeEleRemove(ele.firstElementChild);\n    this.activeEle.focus();\n  }\n\n  activeEleRemove(curEle) {\n    if (!isNullOrUndefined(this.activeEle)) {\n      this.activeEle.setAttribute('tabindex', '-1');\n    }\n\n    this.activeEle = curEle;\n\n    if (isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n      curEle.removeAttribute('tabindex');\n    } else {\n      this.activeEle.setAttribute('tabindex', '0');\n    }\n  }\n\n  getPersistData() {\n    return this.addOnPersist([]);\n  }\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - Returns the module name as string.\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'toolbar';\n  }\n\n  itemsRerender(newProp) {\n    this.items = this.tbarItemsCol;\n\n    if (this.isReact || this.isAngular) {\n      this.clearTemplate();\n    }\n\n    this.destroyMode();\n    this.destroyItems();\n    this.items = newProp;\n    this.tbarItemsCol = this.items;\n    this.renderItems();\n    this.renderOverflowMode();\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  resize() {\n    const ele = this.element;\n    this.tbResize = true;\n\n    if (this.tbarAlign) {\n      this.itemPositioning();\n    }\n\n    if (this.popObj && this.overflowMode === 'Popup') {\n      this.popObj.hide();\n    }\n\n    const checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n\n    if (!checkOverflow) {\n      this.destroyScroll();\n      const multirowele = ele.querySelector('.' + CLS_ITEMS);\n\n      if (!isNullOrUndefined(multirowele)) {\n        this.remove(multirowele, CLS_MULTIROWPOS);\n\n        if (this.tbarAlign) {\n          this.add(multirowele, CLS_TBARPOS);\n        }\n      }\n    }\n\n    if (checkOverflow && this.scrollModule && this.offsetWid === ele.offsetWidth) {\n      return;\n    }\n\n    if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n      this.renderOverflowMode();\n    }\n\n    if (this.popObj) {\n      if (this.overflowMode === 'Extended') {\n        const eleStyles = window.getComputedStyle(this.element);\n        this.popObj.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;\n      }\n\n      if (this.tbarAlign) {\n        this.removePositioning();\n      }\n\n      this.popupRefresh(this.popObj.element, false);\n\n      if (this.tbarAlign) {\n        this.refreshPositioning();\n      }\n    }\n\n    if (this.element.querySelector('.' + CLS_HSCROLLBAR$1)) {\n      this.scrollStep = this.element.querySelector('.' + CLS_HSCROLLBAR$1).offsetWidth;\n    }\n\n    this.offsetWid = ele.offsetWidth;\n    this.tbResize = false;\n    this.separator();\n  }\n\n  extendedOpen() {\n    const sib = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n\n    if (this.overflowMode === 'Extended' && sib) {\n      this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);\n    }\n  }\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n   *\n   * @param  {ToolbarModel} newProp - It contains new value of the data.\n   * @param  {ToolbarModel} oldProp - It contains old value of the data.\n   * @returns {void}\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    const tEle = this.element;\n    const wid = tEle.offsetWidth;\n    this.extendedOpen();\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'items':\n          if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n            const changedProb = Object.keys(newProp.items);\n\n            for (let i = 0; i < changedProb.length; i++) {\n              const index = parseInt(Object.keys(newProp.items)[i], 10);\n              const property = Object.keys(newProp.items[index])[0];\n              const newProperty = Object(newProp.items[index])[property];\n\n              if (typeof newProperty !== 'function') {\n                if (this.tbarAlign || property === 'align') {\n                  this.refresh();\n                  this.trigger('created');\n                  break;\n                }\n\n                const popupPriCheck = property === 'showAlwaysInPopup' && !newProperty;\n                const booleanCheck = property === 'overflow' && this.popupPriCount !== 0;\n\n                if (popupPriCheck || this.items[index].showAlwaysInPopup && booleanCheck) {\n                  --this.popupPriCount;\n                }\n\n                if (isNullOrUndefined(this.scrollModule)) {\n                  this.destroyMode();\n                }\n\n                const itemCol = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, tEle));\n\n                if (this.isReact) {\n                  this.clearTemplate();\n                }\n\n                detach(itemCol[index]);\n                this.tbarEle.splice(index, 1);\n                this.addItems([this.items[index]], index);\n                this.items.splice(index, 1);\n\n                if (this.items[index].template) {\n                  this.tbarEle.splice(this.items.length, 1);\n                }\n              }\n            }\n          } else {\n            this.itemsRerender(newProp.items);\n          }\n\n          break;\n\n        case 'width':\n          setStyleAttribute(tEle, {\n            'width': formatUnit(newProp.width)\n          });\n          this.renderOverflowMode();\n\n          if (this.popObj && wid < tEle.offsetWidth) {\n            this.popupRefresh(this.popObj.element, false);\n          }\n\n          break;\n\n        case 'height':\n          setStyleAttribute(this.element, {\n            'height': formatUnit(newProp.height)\n          });\n          break;\n\n        case 'overflowMode':\n          this.destroyMode();\n          this.renderOverflowMode();\n\n          if (this.enableRtl) {\n            this.add(tEle, CLS_RTL$2);\n          }\n\n          this.refreshOverflow();\n          break;\n\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            this.add(tEle, CLS_RTL$2);\n          } else {\n            this.remove(tEle, CLS_RTL$2);\n          }\n\n          if (!isNullOrUndefined(this.scrollModule)) {\n            if (newProp.enableRtl) {\n              this.add(this.scrollModule.element, CLS_RTL$2);\n            } else {\n              this.remove(this.scrollModule.element, CLS_RTL$2);\n            }\n          }\n\n          if (!isNullOrUndefined(this.popObj)) {\n            if (newProp.enableRtl) {\n              this.add(this.popObj.element, CLS_RTL$2);\n            } else {\n              this.remove(this.popObj.element, CLS_RTL$2);\n            }\n          }\n\n          if (this.tbarAlign) {\n            this.itemPositioning();\n          }\n\n          break;\n\n        case 'scrollStep':\n          if (this.scrollModule) {\n            this.scrollModule.scrollStep = this.scrollStep;\n          }\n\n          break;\n\n        case 'enableCollision':\n          if (this.popObj) {\n            this.popObj.collision = {\n              Y: this.enableCollision ? 'flip' : 'none'\n            };\n          }\n\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.element], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([this.element], newProp.cssClass.split(' '));\n          }\n\n          break;\n\n        case 'allowKeyboard':\n          this.unwireKeyboardEvent();\n\n          if (newProp.allowKeyboard) {\n            this.wireKeyboardEvent();\n          }\n\n          break;\n      }\n    }\n  }\n  /**\n   * Shows or hides the Toolbar item that is in the specified index.\n   *\n   * @param  {number | HTMLElement} index - Index value of target item or DOM element  of items to be hidden or shown.\n   * @param  {boolean} value - Based on this Boolean value, item will be hide (true) or show (false). By default, value is false.\n   * @returns {void}.\n   */\n\n\n  hideItem(index, value) {\n    const isElement = typeof index === 'object' ? true : false;\n    let eleIndex = index;\n    let initIndex;\n    let ele;\n    const innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n    if (isElement) {\n      ele = index;\n    } else if (this.tbarEle[eleIndex]) {\n      const innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n      ele = innerItems[eleIndex];\n    }\n\n    if (ele) {\n      if (value) {\n        ele.classList.add(CLS_HIDDEN);\n      } else {\n        ele.classList.remove(CLS_HIDDEN);\n      }\n\n      if (value && isNullOrUndefined(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n        if (isNullOrUndefined(ele.firstElementChild.getAttribute('tabindex'))) {\n          ele.firstElementChild.setAttribute('tabindex', '-1');\n          const innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n          if (isElement) {\n            eleIndex = innerItems.indexOf(ele);\n          }\n\n          let nextEle = innerItems[++eleIndex];\n\n          while (nextEle) {\n            const skipEle = this.eleContains(nextEle);\n\n            if (!skipEle) {\n              nextEle.firstElementChild.removeAttribute('tabindex');\n              break;\n            }\n\n            nextEle = innerItems[++eleIndex];\n          }\n        }\n      } else if (isNullOrUndefined(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n        initIndex = 0;\n        let setFlag = false;\n        let removeFlag = false;\n        let initELe = innerItems[initIndex];\n\n        while (initELe) {\n          if (!initELe.classList.contains(CLS_SEPARATOR)) {\n            if (isNullOrUndefined(initELe.firstElementChild.getAttribute('tabindex'))) {\n              initELe.firstElementChild.setAttribute('tabindex', '-1');\n              setFlag = true;\n            } else {\n              if (setFlag && removeFlag) {\n                break;\n              }\n\n              const skipEle = this.eleContains(initELe);\n\n              if (!skipEle) {\n                initELe.firstElementChild.removeAttribute('tabindex');\n                removeFlag = true;\n              }\n\n              initELe = innerItems[++initIndex];\n            }\n          } else {\n            initELe = innerItems[++initIndex];\n          }\n        }\n      }\n\n      this.refreshOverflow();\n    }\n  }\n\n};\n\n__decorate$3([Collection([], Item)], Toolbar.prototype, \"items\", void 0);\n\n__decorate$3([Property('auto')], Toolbar.prototype, \"width\", void 0);\n\n__decorate$3([Property('auto')], Toolbar.prototype, \"height\", void 0);\n\n__decorate$3([Property('')], Toolbar.prototype, \"cssClass\", void 0);\n\n__decorate$3([Property('Scrollable')], Toolbar.prototype, \"overflowMode\", void 0);\n\n__decorate$3([Property()], Toolbar.prototype, \"scrollStep\", void 0);\n\n__decorate$3([Property(true)], Toolbar.prototype, \"enableCollision\", void 0);\n\n__decorate$3([Property(true)], Toolbar.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$3([Property(true)], Toolbar.prototype, \"allowKeyboard\", void 0);\n\n__decorate$3([Event()], Toolbar.prototype, \"clicked\", void 0);\n\n__decorate$3([Event()], Toolbar.prototype, \"created\", void 0);\n\n__decorate$3([Event()], Toolbar.prototype, \"destroyed\", void 0);\n\n__decorate$3([Event()], Toolbar.prototype, \"beforeCreate\", void 0);\n\nToolbar = __decorate$3([NotifyPropertyChanges], Toolbar);\n/**\n * Toolbar modules\n */\n\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nconst CLS_ACRDN_ROOT = 'e-acrdn-root';\nconst CLS_ROOT$2 = 'e-accordion';\nconst CLS_ITEM$1 = 'e-acrdn-item';\nconst CLS_ITEMFOCUS = 'e-item-focus';\nconst CLS_ITEMHIDE = 'e-hide';\nconst CLS_HEADER = 'e-acrdn-header';\nconst CLS_HEADERICN = 'e-acrdn-header-icon';\nconst CLS_HEADERCTN = 'e-acrdn-header-content';\nconst CLS_CONTENT = 'e-acrdn-panel';\nconst CLS_CTENT = 'e-acrdn-content';\nconst CLS_TOOGLEICN = 'e-toggle-icon';\nconst CLS_COLLAPSEICN = 'e-tgl-collapse-icon e-icons';\nconst CLS_EXPANDICN = 'e-expand-icon';\nconst CLS_RTL$3 = 'e-rtl';\nconst CLS_CTNHIDE = 'e-content-hide';\nconst CLS_SLCT = 'e-select';\nconst CLS_SLCTED = 'e-selected';\nconst CLS_ACTIVE = 'e-active';\nconst CLS_ANIMATE = 'e-animate';\nconst CLS_DISABLE$3 = 'e-overlay';\nconst CLS_TOGANIMATE = 'e-toggle-animation';\nconst CLS_NEST = 'e-nested';\nconst CLS_EXPANDSTATE = 'e-expand-state';\nconst CLS_CONTAINER = 'e-accordion-container';\n/**\n * Objects used for configuring the Accordion expanding item action properties.\n */\n\nclass AccordionActionSettings extends ChildProperty {}\n\n__decorate$4([Property('SlideDown')], AccordionActionSettings.prototype, \"effect\", void 0);\n\n__decorate$4([Property(400)], AccordionActionSettings.prototype, \"duration\", void 0);\n\n__decorate$4([Property('linear')], AccordionActionSettings.prototype, \"easing\", void 0);\n/**\n * Objects used for configuring the Accordion animation properties.\n */\n\n\nclass AccordionAnimationSettings extends ChildProperty {}\n\n__decorate$4([Complex({\n  effect: 'SlideUp',\n  duration: 400,\n  easing: 'linear'\n}, AccordionActionSettings)], AccordionAnimationSettings.prototype, \"collapse\", void 0);\n\n__decorate$4([Complex({\n  effect: 'SlideDown',\n  duration: 400,\n  easing: 'linear'\n}, AccordionActionSettings)], AccordionAnimationSettings.prototype, \"expand\", void 0);\n/**\n * An item object that is used to configure Accordion items.\n */\n\n\nclass AccordionItem extends ChildProperty {}\n\n__decorate$4([Property(null)], AccordionItem.prototype, \"content\", void 0);\n\n__decorate$4([Property(null)], AccordionItem.prototype, \"header\", void 0);\n\n__decorate$4([Property(null)], AccordionItem.prototype, \"cssClass\", void 0);\n\n__decorate$4([Property(null)], AccordionItem.prototype, \"iconCss\", void 0);\n\n__decorate$4([Property(false)], AccordionItem.prototype, \"expanded\", void 0);\n\n__decorate$4([Property(true)], AccordionItem.prototype, \"visible\", void 0);\n\n__decorate$4([Property(false)], AccordionItem.prototype, \"disabled\", void 0);\n\n__decorate$4([Property()], AccordionItem.prototype, \"id\", void 0);\n/**\n * The Accordion is a vertically collapsible content panel that displays one or more panels at a time within the available space.\n * ```html\n * <div id='accordion'/>\n * <script>\n *   var accordionObj = new Accordion();\n *   accordionObj.appendTo('#accordion');\n * </script>\n * ```\n */\n\n\nlet Accordion = class Accordion extends Component {\n  /**\n   * Initializes a new instance of the Accordion class.\n   *\n   * @param {AccordionModel} options  - Specifies Accordion model properties as options.\n   * @param {string | HTMLElement} element  - Specifies the element that is rendered as an Accordion.\n   */\n  constructor(options, element) {\n    super(options, element);\n    /**\n     * Contains the keyboard configuration of the Accordion.\n     */\n\n    this.keyConfigs = {\n      moveUp: 'uparrow',\n      moveDown: 'downarrow',\n      enter: 'enter',\n      space: 'space',\n      home: 'home',\n      end: 'end'\n    };\n  }\n  /**\n   * Removes the control from the DOM and also removes all its related events.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    if (this.isReact || this.isAngular || this.isVue) {\n      this.clearTemplate();\n    }\n\n    const ele = this.element;\n    super.destroy();\n    this.unwireEvents();\n    this.isDestroy = true;\n    this.restoreContent(null);\n    [].slice.call(ele.children).forEach(el => {\n      ele.removeChild(el);\n    });\n\n    if (this.trgtEle) {\n      this.trgtEle = null;\n\n      while (this.ctrlTem.firstElementChild) {\n        ele.appendChild(this.ctrlTem.firstElementChild);\n      }\n\n      this.ctrlTem = null;\n    }\n\n    ele.classList.remove(CLS_ACRDN_ROOT);\n    ele.removeAttribute('style');\n    ['aria-disabled', 'aria-multiselectable', 'role', 'data-ripple'].forEach(attrb => {\n      this.element.removeAttribute(attrb);\n    });\n\n    if (!this.isNested && isRippleEnabled) {\n      this.removeRippleEffect();\n    }\n  }\n\n  preRender() {\n    const nested = closest(this.element, '.' + CLS_CONTENT);\n    this.isNested = false;\n    this.templateEle = [];\n\n    if (!this.isDestroy) {\n      this.isDestroy = false;\n    }\n\n    if (nested && nested.firstElementChild && nested.firstElementChild.firstElementChild) {\n      if (nested.firstElementChild.firstElementChild.classList.contains(CLS_ROOT$2)) {\n        nested.classList.add(CLS_NEST);\n        this.isNested = true;\n      }\n    } else {\n      this.element.classList.add(CLS_ACRDN_ROOT);\n    }\n\n    if (this.enableRtl) {\n      this.add(this.element, CLS_RTL$3);\n    }\n  }\n\n  add(ele, val) {\n    ele.classList.add(val);\n  }\n\n  remove(ele, val) {\n    ele.classList.remove(val);\n  }\n  /**\n   * To initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.initializeHeaderTemplate();\n    this.initializeItemTemplate();\n    this.initialize();\n    this.renderControl();\n    this.wireEvents();\n    this.renderComplete();\n  }\n\n  initialize() {\n    const width = formatUnit(this.width);\n    const height = formatUnit(this.height);\n    setStyleAttribute(this.element, {\n      'width': width,\n      'height': height\n    });\n    const ariaAttr = {\n      'aria-disabled': 'false',\n      'role': 'presentation',\n      'aria-multiselectable': 'true'\n    };\n\n    if (isNullOrUndefined(this.initExpand)) {\n      this.initExpand = [];\n    }\n\n    if (this.expandedIndices.length > 0) {\n      this.initExpand = this.expandedIndices;\n    }\n\n    attributes(this.element, ariaAttr);\n\n    if (this.expandMode === 'Single') {\n      this.element.setAttribute('aria-multiselectable', 'false');\n    }\n  }\n\n  renderControl() {\n    this.trgtEle = this.element.children.length > 0 ? select('div', this.element) : null;\n    this.renderItems();\n    this.initItemExpand();\n  }\n\n  wireFocusEvents() {\n    const acrdItem = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM$1));\n\n    for (const item of acrdItem) {\n      const headerEle = item.querySelector('.' + CLS_HEADER);\n\n      if (item.childElementCount > 0 && headerEle) {\n        EventHandler.clearEvents(headerEle);\n        EventHandler.add(headerEle, 'focus', this.focusIn, this);\n        EventHandler.add(headerEle, 'blur', this.focusOut, this);\n      }\n    }\n  }\n\n  unwireEvents() {\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n\n    if (!isNullOrUndefined(this.keyModule)) {\n      this.keyModule.destroy();\n    }\n  }\n\n  wireEvents() {\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n\n    if (!this.isNested && !this.isDestroy) {\n      this.removeRippleEffect = rippleEffect(this.element, {\n        selector: '.' + CLS_HEADER\n      });\n    }\n\n    if (!this.isNested) {\n      this.keyModule = new KeyboardEvents(this.element, {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigs,\n        eventName: 'keydown'\n      });\n    }\n  }\n\n  templateParser(template) {\n    if (template) {\n      try {\n        if (document.querySelectorAll(template).length) {\n          return compile(document.querySelector(template).innerHTML.trim());\n        } else {\n          return compile(template);\n        }\n      } catch (error) {\n        return compile(template);\n      }\n    }\n\n    return undefined;\n  }\n\n  initializeHeaderTemplate() {\n    if (this.headerTemplate) {\n      this.headerTemplateFn = this.templateParser(this.headerTemplate);\n    }\n  }\n\n  initializeItemTemplate() {\n    if (this.itemTemplate) {\n      this.itemTemplateFn = this.templateParser(this.itemTemplate);\n    }\n  }\n\n  getHeaderTemplate() {\n    return this.headerTemplateFn;\n  }\n\n  getItemTemplate() {\n    return this.itemTemplateFn;\n  }\n\n  focusIn(e) {\n    e.target.parentElement.classList.add(CLS_ITEMFOCUS);\n  }\n\n  focusOut(e) {\n    e.target.parentElement.classList.remove(CLS_ITEMFOCUS);\n  }\n\n  ctrlTemplate() {\n    this.ctrlTem = this.element.cloneNode(true);\n    let innerEles;\n    const rootEle = select('.' + CLS_CONTAINER, this.element);\n\n    if (rootEle) {\n      innerEles = rootEle.children;\n    } else {\n      innerEles = this.element.children;\n    }\n\n    const items = [];\n    [].slice.call(innerEles).forEach(el => {\n      items.push({\n        header: el.childElementCount > 0 && el.children[0] ? el.children[0] : '',\n        content: el.childElementCount > 1 && el.children[1] ? el.children[1] : ''\n      });\n      el.parentNode.removeChild(el);\n    });\n\n    if (rootEle) {\n      this.element.removeChild(rootEle);\n    }\n\n    this.setProperties({\n      items: items\n    }, true);\n  }\n\n  toggleIconGenerate() {\n    const tglIcon = this.createElement('div', {\n      className: CLS_TOOGLEICN\n    });\n    const hdrColIcon = this.createElement('span', {\n      className: CLS_COLLAPSEICN\n    });\n    tglIcon.appendChild(hdrColIcon);\n    return tglIcon;\n  }\n\n  initItemExpand() {\n    const len = this.initExpand.length;\n\n    if (len === 0) {\n      return;\n    }\n\n    if (this.expandMode === 'Single') {\n      this.expandItem(true, this.initExpand[len - 1]);\n    } else {\n      for (let i = 0; i < len; i++) {\n        this.expandItem(true, this.initExpand[i]);\n      }\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  renderItems() {\n    const ele = this.element;\n    let innerItem;\n    let innerDataSourceItem;\n\n    if (!isNullOrUndefined(this.trgtEle)) {\n      this.ctrlTemplate();\n    }\n\n    if (this.dataSource.length > 0) {\n      this.dataSource.forEach((item, index) => {\n        innerDataSourceItem = this.renderInnerItem(item, index);\n        ele.appendChild(innerDataSourceItem);\n\n        if (innerDataSourceItem.childElementCount > 0) {\n          EventHandler.add(innerDataSourceItem.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n          EventHandler.add(innerDataSourceItem.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n        }\n      });\n    } else {\n      const items = this.items;\n\n      if (ele && items.length > 0) {\n        items.forEach((item, index) => {\n          innerItem = this.renderInnerItem(item, index);\n          ele.appendChild(innerItem);\n\n          if (innerItem.childElementCount > 0) {\n            EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n            EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n          }\n        });\n      }\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  clickHandler(e) {\n    const trgt = e.target;\n    const items = this.getItems();\n    const eventArgs = {};\n    let tglIcon;\n    const acrdEle = closest(trgt, '.' + CLS_ROOT$2);\n\n    if (acrdEle !== this.element) {\n      return;\n    }\n\n    trgt.classList.add('e-target');\n    const acrdnItem = closest(trgt, '.' + CLS_ITEM$1);\n    let acrdnHdr = closest(trgt, '.' + CLS_HEADER);\n    let acrdnCtn = closest(trgt, '.' + CLS_CONTENT);\n\n    if (acrdnItem && (isNullOrUndefined(acrdnHdr) || isNullOrUndefined(acrdnCtn))) {\n      acrdnHdr = acrdnItem.children[0];\n      acrdnCtn = acrdnItem.children[1];\n    }\n\n    if (acrdnHdr) {\n      tglIcon = select('.' + CLS_TOOGLEICN, acrdnHdr);\n    }\n\n    let acrdnCtnItem;\n\n    if (acrdnHdr) {\n      acrdnCtnItem = closest(acrdnHdr, '.' + CLS_ITEM$1);\n    } else if (acrdnCtn) {\n      acrdnCtnItem = closest(acrdnCtn, '.' + CLS_ITEM$1);\n    }\n\n    const index = this.getIndexByItem(acrdnItem);\n\n    if (acrdnCtnItem) {\n      eventArgs.item = items[this.getIndexByItem(acrdnCtnItem)];\n    }\n\n    eventArgs.originalEvent = e;\n    const ctnCheck = !isNullOrUndefined(tglIcon) && acrdnItem.childElementCount <= 1;\n\n    if (ctnCheck && (isNullOrUndefined(acrdnCtn) || !isNullOrUndefined(select('.' + CLS_HEADER + ' .' + CLS_TOOGLEICN, acrdnCtnItem)))) {\n      acrdnItem.appendChild(this.contentRendering(index));\n      this.ariaAttrUpdate(acrdnItem);\n      this.afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem);\n    } else {\n      this.afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem) {\n    const acrdActive = [];\n    this.trigger('clicked', eventArgs);\n    let cntclkCheck = acrdnCtn && !isNullOrUndefined(select('.e-target', acrdnCtn));\n    const inlineAcrdnSel = '.' + CLS_CONTENT + ' .' + CLS_ROOT$2;\n    const inlineEleAcrdn = acrdnCtn && !isNullOrUndefined(select('.' + CLS_ROOT$2, acrdnCtn)) && isNullOrUndefined(closest(trgt, inlineAcrdnSel));\n    const nestContCheck = acrdnCtn && isNullOrUndefined(select('.' + CLS_ROOT$2, acrdnCtn)) || !(closest(trgt, '.' + CLS_ROOT$2) === this.element);\n    cntclkCheck = cntclkCheck && (inlineEleAcrdn || nestContCheck);\n    trgt.classList.remove('e-target');\n\n    if (trgt.classList.contains(CLS_CONTENT) || trgt.classList.contains(CLS_CTENT) || cntclkCheck) {\n      return;\n    }\n\n    const acrdcontainer = this.element.querySelector('.' + CLS_CONTAINER);\n    const acrdnchild = acrdcontainer ? acrdcontainer.children : this.element.children;\n    [].slice.call(acrdnchild).forEach(el => {\n      if (el.classList.contains(CLS_ACTIVE)) {\n        acrdActive.push(el);\n      }\n    });\n    const acrdAniEle = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM$1 + ' [' + CLS_ANIMATE + ']'));\n\n    if (acrdAniEle.length > 0) {\n      for (const el of acrdAniEle) {\n        acrdActive.push(el.parentElement);\n      }\n    }\n\n    const sameContentCheck = acrdActive.indexOf(acrdnCtnItem) !== -1 && acrdnCtn.getAttribute('e-animate') === 'true';\n    let sameHeader = false;\n\n    if (!isNullOrUndefined(acrdnItem) && !isNullOrUndefined(acrdnHdr)) {\n      const acrdnCtn = select('.' + CLS_CONTENT, acrdnItem);\n      const acrdnRoot = closest(acrdnItem, '.' + CLS_ACRDN_ROOT);\n      const expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n\n      if (isNullOrUndefined(acrdnCtn)) {\n        return;\n      }\n\n      sameHeader = expandState === acrdnItem;\n\n      if (isVisible(acrdnCtn) && (!sameContentCheck || acrdnCtnItem.classList.contains(CLS_SLCTED))) {\n        this.collapse(acrdnCtn);\n      } else {\n        if (acrdActive.length > 0 && this.expandMode === 'Single' && !sameContentCheck) {\n          acrdActive.forEach(el => {\n            this.collapse(select('.' + CLS_CONTENT, el));\n            el.classList.remove(CLS_EXPANDSTATE);\n          });\n        }\n\n        this.expand(acrdnCtn);\n      }\n\n      if (!isNullOrUndefined(expandState) && !sameHeader) {\n        expandState.classList.remove(CLS_EXPANDSTATE);\n      }\n    }\n  }\n\n  eleMoveFocus(action, root, trgt) {\n    let clst;\n    let clstItem = closest(trgt, '.' + CLS_ITEM$1);\n\n    if (trgt === root) {\n      clst = (action === 'moveUp' ? trgt.lastElementChild : trgt).querySelector('.' + CLS_HEADER);\n    } else if (trgt.classList.contains(CLS_HEADER)) {\n      clstItem = action === 'moveUp' ? clstItem.previousElementSibling : clstItem.nextElementSibling;\n\n      if (clstItem) {\n        clst = select('.' + CLS_HEADER, clstItem);\n      }\n    }\n\n    if (clst) {\n      clst.focus();\n    }\n  }\n\n  keyActionHandler(e) {\n    const trgt = e.target;\n    const header = closest(e.target, CLS_HEADER);\n\n    if (isNullOrUndefined(header) && !trgt.classList.contains(CLS_ROOT$2) && !trgt.classList.contains(CLS_HEADER)) {\n      return;\n    }\n\n    let clst;\n    const root = this.element;\n    let content;\n\n    switch (e.action) {\n      case 'moveUp':\n        this.eleMoveFocus(e.action, root, trgt);\n        break;\n\n      case 'moveDown':\n        this.eleMoveFocus(e.action, root, trgt);\n        break;\n\n      case 'space':\n      case 'enter':\n        content = trgt.nextElementSibling;\n\n        if (!isNullOrUndefined(content) && content.classList.contains(CLS_CONTENT)) {\n          if (content.getAttribute('e-animate') !== 'true') {\n            trgt.click();\n          }\n        } else {\n          trgt.click();\n        }\n\n        e.preventDefault();\n        break;\n\n      case 'home':\n      case 'end':\n        clst = e.action === 'home' ? root.firstElementChild.children[0] : root.lastElementChild.children[0];\n        clst.focus();\n        e.preventDefault();\n        break;\n    }\n  }\n\n  headerEleGenerate() {\n    const header = this.createElement('div', {\n      className: CLS_HEADER,\n      id: getUniqueID('acrdn_header')\n    });\n    const items = this.getItems();\n    const ariaAttr = {\n      'tabindex': '0',\n      'role': 'heading',\n      'aria-label': 'collapsed',\n      'aria-disabled': 'false',\n      'aria-level': items.length.toString()\n    };\n    attributes(header, ariaAttr);\n    return header;\n  }\n\n  renderInnerItem(item, index) {\n    const innerEle = this.createElement('div', {\n      className: CLS_ITEM$1,\n      id: item.id || getUniqueID('acrdn_item'),\n      attrs: {\n        'aria-expanded': 'false',\n        'role': 'row'\n      }\n    });\n\n    if (this.headerTemplate) {\n      const ctnEle = this.headerEleGenerate();\n      const hdrEle = this.createElement('div', {\n        className: CLS_HEADERCTN\n      });\n      ctnEle.appendChild(hdrEle);\n      append(this.getHeaderTemplate()(item, this, 'headerTemplate', this.element.id + '_headerTemplate', false), hdrEle);\n      innerEle.appendChild(ctnEle);\n      ctnEle.appendChild(this.toggleIconGenerate());\n      this.add(innerEle, CLS_SLCT);\n      return innerEle;\n    }\n\n    if (item.header && this.angularnativeCondiCheck(item, 'header')) {\n      if (this.enableHtmlSanitizer && typeof item.header === 'string') {\n        item.header = SanitizeHtmlHelper.sanitize(item.header);\n      }\n\n      const ctnEle = this.headerEleGenerate();\n      const hdrEle = this.createElement('div', {\n        className: CLS_HEADERCTN\n      });\n      ctnEle.appendChild(hdrEle);\n      ctnEle.appendChild(this.fetchElement(hdrEle, item.header, index, true));\n      innerEle.appendChild(ctnEle);\n    }\n\n    let hdr = select('.' + CLS_HEADER, innerEle);\n\n    if (item.expanded && !isNullOrUndefined(index) && !this.enablePersistence) {\n      if (this.initExpand.indexOf(index) === -1) {\n        this.initExpand.push(index);\n      }\n    }\n\n    if (item.cssClass) {\n      addClass([innerEle], item.cssClass.split(' '));\n    }\n\n    if (item.disabled) {\n      addClass([innerEle], CLS_DISABLE$3);\n    }\n\n    if (item.visible === false) {\n      addClass([innerEle], CLS_ITEMHIDE);\n    }\n\n    if (item.iconCss) {\n      const hdrIcnEle = this.createElement('div', {\n        className: CLS_HEADERICN\n      });\n      const icon = this.createElement('span', {\n        className: item.iconCss + ' e-icons'\n      });\n      hdrIcnEle.appendChild(icon);\n\n      if (isNullOrUndefined(hdr)) {\n        hdr = this.headerEleGenerate();\n        hdr.appendChild(hdrIcnEle);\n        innerEle.appendChild(hdr);\n      } else {\n        hdr.insertBefore(hdrIcnEle, hdr.childNodes[0]);\n      }\n    }\n\n    if (item.content && this.angularnativeCondiCheck(item, 'content')) {\n      const hdrIcon = this.toggleIconGenerate();\n\n      if (isNullOrUndefined(hdr)) {\n        hdr = this.headerEleGenerate();\n        innerEle.appendChild(hdr);\n      }\n\n      hdr.appendChild(hdrIcon);\n      this.add(innerEle, CLS_SLCT);\n    }\n\n    return innerEle;\n  }\n\n  angularnativeCondiCheck(item, prop) {\n    const property = prop === 'content' ? item.content : item.header;\n    const content = property;\n\n    if (this.isAngular && !isNullOrUndefined(content.elementRef)) {\n      const data = content.elementRef.nativeElement.data;\n\n      if (isNullOrUndefined(data) || data === '' || data.indexOf('bindings=') === -1) {\n        return true;\n      }\n\n      const parseddata = JSON.parse(content.elementRef.nativeElement.data.replace('bindings=', ''));\n\n      if (!isNullOrUndefined(parseddata) && parseddata['ng-reflect-ng-if'] === 'false') {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      return true;\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  fetchElement(ele, value, index, isHeader) {\n    let templateFn;\n    let temString;\n\n    try {\n      if (document.querySelectorAll(value).length && value !== 'Button') {\n        const eleVal = document.querySelector(value);\n        temString = eleVal.outerHTML.trim();\n        ele.appendChild(eleVal);\n        eleVal.style.display = '';\n      } else {\n        templateFn = compile(value);\n      }\n    } catch (e) {\n      if (typeof value === 'string') {\n        ele.innerHTML = SanitizeHtmlHelper.sanitize(value);\n      } else if (!isNullOrUndefined(this.trgtEle) && value instanceof HTMLElement) {\n        ele.appendChild(value);\n        ele.firstElementChild.style.display = '';\n      } else {\n        templateFn = compile(value);\n      }\n    }\n\n    let tempArray;\n\n    if (!isNullOrUndefined(templateFn)) {\n      if (this.isReact) {\n        this.renderReactTemplates();\n      }\n\n      let templateProps;\n      let templateName;\n\n      if (ele.classList.contains(CLS_HEADERCTN)) {\n        templateProps = this.element.id + index + '_header';\n        templateName = 'header';\n      } else if (ele.classList.contains(CLS_CTENT)) {\n        templateProps = this.element.id + index + '_content';\n        templateName = 'content';\n      }\n\n      tempArray = templateFn({}, this, templateName, templateProps, this.isStringTemplate);\n    }\n\n    if (!isNullOrUndefined(tempArray) && tempArray.length > 0 && !(isNullOrUndefined(tempArray[0].tagName) && tempArray.length === 1)) {\n      [].slice.call(tempArray).forEach(el => {\n        if (!isNullOrUndefined(el.tagName)) {\n          el.style.display = '';\n        }\n\n        ele.appendChild(el);\n      });\n    } else if (ele.childElementCount === 0) {\n      ele.innerHTML = SanitizeHtmlHelper.sanitize(value);\n    }\n\n    if (!isNullOrUndefined(temString)) {\n      if (this.templateEle.indexOf(value) === -1) {\n        this.templateEle.push(value);\n      }\n    }\n\n    return ele;\n  }\n\n  ariaAttrUpdate(itemEle) {\n    const header = select('.' + CLS_HEADER, itemEle);\n    const content = select('.' + CLS_CONTENT, itemEle);\n    header.setAttribute('aria-controls', content.id);\n    content.setAttribute('aria-labelledby', header.id);\n    content.setAttribute('role', 'definition');\n  }\n\n  contentRendering(index) {\n    const itemcnt = this.createElement('div', {\n      className: CLS_CONTENT + ' ' + CLS_CTNHIDE,\n      id: getUniqueID('acrdn_panel')\n    });\n    attributes(itemcnt, {\n      'aria-hidden': 'true'\n    });\n    const ctn = this.createElement('div', {\n      className: CLS_CTENT\n    });\n\n    if (this.dataSource.length > 0) {\n      if (this.isReact) {\n        this.renderReactTemplates();\n      }\n\n      append(this.getItemTemplate()(this.dataSource[index], this, 'itemTemplate', this.element.id + '_itemTemplate', false), ctn);\n      itemcnt.appendChild(ctn);\n    } else {\n      if (this.enableHtmlSanitizer && typeof this.items[index].content) {\n        this.items[index].content = SanitizeHtmlHelper.sanitize(this.items[index].content);\n      }\n\n      itemcnt.appendChild(this.fetchElement(ctn, this.items[index].content, index, false));\n    }\n\n    return itemcnt;\n  }\n\n  expand(trgt) {\n    const items = this.getItems();\n    const trgtItemEle = closest(trgt, '.' + CLS_ITEM$1);\n\n    if (isNullOrUndefined(trgt) || isVisible(trgt) && trgt.getAttribute('e-animate') !== 'true' || trgtItemEle.classList.contains(CLS_DISABLE$3)) {\n      return;\n    }\n\n    const acrdnRoot = closest(trgtItemEle, '.' + CLS_ACRDN_ROOT);\n    const expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n    const animation = {\n      name: this.animation.expand.effect,\n      duration: this.animation.expand.duration,\n      timingFunction: this.animation.expand.easing\n    };\n    const icon = select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n    const eventArgs = {\n      element: trgtItemEle,\n      item: items[this.getIndexByItem(trgtItemEle)],\n      index: this.getIndexByItem(trgtItemEle),\n      content: trgtItemEle.querySelector('.' + CLS_CONTENT),\n      isExpanded: true\n    };\n    this.trigger('expanding', eventArgs, expandArgs => {\n      if (!expandArgs.cancel) {\n        icon.classList.add(CLS_TOGANIMATE);\n        this.expandedItemsPush(trgtItemEle);\n\n        if (!isNullOrUndefined(expandState)) {\n          expandState.classList.remove(CLS_EXPANDSTATE);\n        }\n\n        trgtItemEle.classList.add(CLS_EXPANDSTATE);\n\n        if (animation.name === 'None') {\n          this.expandProgress('begin', icon, trgt, trgtItemEle, expandArgs);\n          this.expandProgress('end', icon, trgt, trgtItemEle, expandArgs);\n        } else {\n          this.expandAnimation(animation.name, icon, trgt, trgtItemEle, animation, expandArgs);\n        }\n      }\n    });\n  }\n\n  expandAnimation(ef, icn, trgt, trgtItemEle, animate, args) {\n    let height;\n    this.lastActiveItemId = trgtItemEle.id;\n\n    if (ef === 'SlideDown') {\n      animate.begin = () => {\n        this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n        trgt.style.position = 'absolute';\n        height = trgtItemEle.offsetHeight;\n        trgt.style.maxHeight = trgt.offsetHeight + 'px';\n        trgtItemEle.style.maxHeight = '';\n      };\n\n      animate.progress = () => {\n        trgtItemEle.style.minHeight = height + trgt.offsetHeight + 'px';\n      };\n\n      animate.end = () => {\n        setStyleAttribute(trgt, {\n          'position': '',\n          'maxHeight': ''\n        });\n        trgtItemEle.style.minHeight = '';\n        this.expandProgress('end', icn, trgt, trgtItemEle, args);\n      };\n    } else {\n      animate.begin = () => {\n        this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n      };\n\n      animate.end = () => {\n        this.expandProgress('end', icn, trgt, trgtItemEle, args);\n      };\n    }\n\n    new Animation(animate).animate(trgt);\n  }\n\n  expandProgress(progress, icon, trgt, trgtItemEle, eventArgs) {\n    this.remove(trgt, CLS_CTNHIDE);\n    this.add(trgtItemEle, CLS_SLCTED);\n    this.add(icon, CLS_EXPANDICN);\n\n    if (progress === 'end') {\n      this.add(trgtItemEle, CLS_ACTIVE);\n      trgt.setAttribute('aria-hidden', 'false');\n      attributes(trgtItemEle, {\n        'aria-expanded': 'true'\n      });\n      attributes(trgt.previousElementSibling, {\n        'aria-label': 'expanded'\n      });\n      icon.classList.remove(CLS_TOGANIMATE);\n      this.trigger('expanded', eventArgs);\n    }\n  }\n\n  expandedItemsPush(item) {\n    const index = this.getIndexByItem(item);\n\n    if (this.expandedIndices.indexOf(index) === -1) {\n      const temp = [].slice.call(this.expandedIndices);\n      temp.push(index);\n      this.setProperties({\n        expandedIndices: temp\n      }, true);\n    }\n  }\n\n  getIndexByItem(item) {\n    const itemEle = this.getItemElements();\n    return [].slice.call(itemEle).indexOf(item);\n  }\n\n  getItemElements() {\n    const itemEle = [];\n    const itemCollection = this.element.children;\n    [].slice.call(itemCollection).forEach(el => {\n      if (el.classList.contains(CLS_ITEM$1)) {\n        itemEle.push(el);\n      }\n    });\n    return itemEle;\n  }\n\n  expandedItemsPop(item) {\n    const index = this.getIndexByItem(item);\n    const temp = [].slice.call(this.expandedIndices);\n    temp.splice(temp.indexOf(index), 1);\n    this.setProperties({\n      expandedIndices: temp\n    }, true);\n  }\n\n  collapse(trgt) {\n    const items = this.getItems();\n    const trgtItemEle = closest(trgt, '.' + CLS_ITEM$1);\n\n    if (isNullOrUndefined(trgt) || !isVisible(trgt) || trgtItemEle.classList.contains(CLS_DISABLE$3)) {\n      return;\n    }\n\n    const animation = {\n      name: this.animation.collapse.effect,\n      duration: this.animation.collapse.duration,\n      timingFunction: this.animation.collapse.easing\n    };\n    const icon = select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n    const eventArgs = {\n      element: trgtItemEle,\n      item: items[this.getIndexByItem(trgtItemEle)],\n      index: this.getIndexByItem(trgtItemEle),\n      content: trgtItemEle.querySelector('.' + CLS_CONTENT),\n      isExpanded: false\n    };\n    this.trigger('expanding', eventArgs, expandArgs => {\n      if (!expandArgs.cancel) {\n        this.expandedItemsPop(trgtItemEle);\n        trgtItemEle.classList.remove(CLS_EXPANDSTATE);\n        icon.classList.add(CLS_TOGANIMATE);\n\n        if (animation.name === 'None') {\n          this.collapseProgress('begin', icon, trgt, trgtItemEle, expandArgs);\n          this.collapseProgress('end', icon, trgt, trgtItemEle, expandArgs);\n        } else {\n          this.collapseAnimation(animation.name, trgt, trgtItemEle, icon, animation, expandArgs);\n        }\n      }\n    });\n  }\n\n  collapseAnimation(ef, trgt, trgtItEl, icn, animate, args) {\n    let height;\n    let trgtHeight;\n    let itemHeight;\n    let remain;\n    this.lastActiveItemId = trgtItEl.id;\n\n    if (ef === 'SlideUp') {\n      animate.begin = () => {\n        itemHeight = trgtItEl.offsetHeight;\n        trgtItEl.style.minHeight = itemHeight + 'px';\n        trgt.style.position = 'absolute';\n        height = trgtItEl.offsetHeight;\n        trgtHeight = trgt.offsetHeight;\n        trgt.style.maxHeight = trgtHeight + 'px';\n        this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n      };\n\n      animate.progress = () => {\n        remain = height - (trgtHeight - trgt.offsetHeight);\n\n        if (remain < itemHeight) {\n          trgtItEl.style.minHeight = remain + 'px';\n        }\n      };\n\n      animate.end = () => {\n        trgt.style.display = 'none';\n        this.collapseProgress('end', icn, trgt, trgtItEl, args);\n        trgtItEl.style.minHeight = '';\n        setStyleAttribute(trgt, {\n          'position': '',\n          'maxHeight': '',\n          'display': ''\n        });\n      };\n    } else {\n      animate.begin = () => {\n        this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n      };\n\n      animate.end = () => {\n        this.collapseProgress('end', icn, trgt, trgtItEl, args);\n      };\n    }\n\n    new Animation(animate).animate(trgt);\n  }\n\n  collapseProgress(progress, icon, trgt, trgtItemEle, eventArgs) {\n    this.remove(icon, CLS_EXPANDICN);\n    this.remove(trgtItemEle, CLS_SLCTED);\n\n    if (progress === 'end') {\n      this.add(trgt, CLS_CTNHIDE);\n      icon.classList.remove(CLS_TOGANIMATE);\n      this.remove(trgtItemEle, CLS_ACTIVE);\n      trgt.setAttribute('aria-hidden', 'true');\n      attributes(trgtItemEle, {\n        'aria-expanded': 'false'\n      });\n      attributes(trgt.previousElementSibling, {\n        'aria-label': 'collapsed'\n      });\n      this.trigger('expanded', eventArgs);\n    }\n  }\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - It returns the current module name.\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'accordion';\n  }\n\n  itemAttribUpdate() {\n    const items = this.getItems();\n    const itemEle = this.getItemElements();\n    const itemLen = items.length;\n    itemEle.forEach(ele => {\n      select('.' + CLS_HEADER, ele).setAttribute('aria-level', '' + itemLen);\n    });\n  }\n\n  getItems() {\n    let items;\n\n    if (this.itemTemplate && this.headerTemplate) {\n      items = this.dataSource;\n    } else {\n      items = this.items;\n    }\n\n    return items;\n  }\n  /**\n   * Adds new item to the Accordion with the specified index of the Accordion.\n   *\n   * @param  {AccordionItemModel | AccordionItemModel[] | Object | Object[]} item - Item array that is to be added to the Accordion.\n   * @param  {number} index - Number value that determines where the item should be added.\n   * By default, item is added at the last index if the index is not specified.\n   * @returns {void}\n   */\n\n\n  addItem(item, index) {\n    const ele = this.element;\n    const itemEle = this.getItemElements();\n    const items = this.getItems();\n\n    if (isNullOrUndefined(index)) {\n      index = items.length;\n    }\n\n    if (ele.childElementCount >= index) {\n      const addItems = item instanceof Array ? item : [item];\n      addItems.forEach((addItem, i) => {\n        const itemIndex = index + i;\n        items.splice(itemIndex, 0, addItem);\n        const innerItemEle = this.renderInnerItem(addItem, itemIndex);\n\n        if (ele.childElementCount === itemIndex) {\n          ele.appendChild(innerItemEle);\n        } else {\n          ele.insertBefore(innerItemEle, itemEle[itemIndex]);\n        }\n\n        EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n        EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n        this.itemAttribUpdate();\n        this.expandedIndices = [];\n        this.expandedItemRefresh(ele);\n\n        if (addItem && addItem.expanded) {\n          this.expandItem(true, itemIndex);\n        }\n      });\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  expandedItemRefresh(ele) {\n    const itemEle = this.getItemElements();\n    [].slice.call(itemEle).forEach(el => {\n      if (el.classList.contains(CLS_SLCTED)) {\n        this.expandedItemsPush(el);\n      }\n    });\n  }\n  /**\n   * Dynamically removes item from Accordion.\n   *\n   * @param  {number} index - Number value that determines which item should be removed.\n   * @returns {void}.\n   */\n\n\n  removeItem(index) {\n    if (this.isReact) {\n      this.clearTemplate(['headerTemplate', 'itemTemplate'], index);\n    }\n\n    const itemEle = this.getItemElements();\n    const ele = itemEle[index];\n    const items = this.getItems();\n\n    if (isNullOrUndefined(ele)) {\n      return;\n    }\n\n    this.restoreContent(index);\n    detach(ele);\n    items.splice(index, 1);\n    this.itemAttribUpdate();\n    this.expandedIndices = [];\n    this.expandedItemRefresh(this.element);\n  }\n  /**\n   * Sets focus to the specified index item header in Accordion.\n   *\n   * @param  {number} index - Number value that determines which item should be focused.\n   * @returns {void}.\n   */\n\n\n  select(index) {\n    const itemEle = this.getItemElements();\n    const ele = itemEle[index];\n\n    if (isNullOrUndefined(ele) || isNullOrUndefined(select('.' + CLS_HEADER, ele))) {\n      return;\n    }\n\n    ele.children[0].focus();\n  }\n  /**\n   * Shows or hides the specified item from Accordion.\n   *\n   * @param  {number} index - Number value that determines which item should be hidden/shown.\n   * @param  {boolean} isHidden - Boolean value that determines the action either hide (true) or show (false). Default value is false.\n   * If the `isHidden` value is false, the item is shown or else item it is hidden.\n   * @returns {void}.\n   */\n\n\n  hideItem(index, isHidden) {\n    const itemEle = this.getItemElements();\n    const ele = itemEle[index];\n\n    if (isNullOrUndefined(ele)) {\n      return;\n    }\n\n    if (isNullOrUndefined(isHidden)) {\n      isHidden = true;\n    }\n\n    if (isHidden) {\n      this.add(ele, CLS_ITEMHIDE);\n    } else {\n      this.remove(ele, CLS_ITEMHIDE);\n    }\n  }\n  /**\n   * Enables/Disables the specified Accordion item.\n   *\n   * @param  {number} index - Number value that determines which item should be enabled/disabled.\n   * @param  {boolean} isEnable - Boolean value that determines the action as enable (true) or disable (false).\n   * If the `isEnable` value is true, the item is enabled or else it is disabled.\n   * @returns {void}.\n   */\n\n\n  enableItem(index, isEnable) {\n    const itemEle = this.getItemElements();\n    const ele = itemEle[index];\n\n    if (isNullOrUndefined(ele)) {\n      return;\n    }\n\n    const eleHeader = ele.firstElementChild;\n\n    if (isEnable) {\n      this.remove(ele, CLS_DISABLE$3);\n      attributes(eleHeader, {\n        'tabindex': '0',\n        'aria-disabled': 'false'\n      });\n      eleHeader.focus();\n    } else {\n      if (ele.classList.contains(CLS_ACTIVE)) {\n        this.expandItem(false, index);\n        this.eleMoveFocus('movedown', this.element, eleHeader);\n      }\n\n      this.add(ele, CLS_DISABLE$3);\n      eleHeader.setAttribute('aria-disabled', 'true');\n      eleHeader.removeAttribute('tabindex');\n    }\n  }\n  /**\n   * Expands/Collapses the specified Accordion item.\n   *\n   * @param  {boolean} isExpand - Boolean value that determines the action as expand or collapse.\n   * @param  {number} index - Number value that determines which item should be expanded/collapsed.`index` is optional parameter.\n   * Without Specifying index, based on the `isExpand` value all Accordion item can be expanded or collapsed.\n   * @returns {void}.\n   */\n\n\n  expandItem(isExpand, index) {\n    const itemEle = this.getItemElements();\n\n    if (isNullOrUndefined(index)) {\n      if (this.expandMode === 'Single' && isExpand) {\n        const ele = itemEle[itemEle.length - 1];\n        this.itemExpand(isExpand, ele, this.getIndexByItem(ele));\n      } else {\n        const item = select('#' + this.lastActiveItemId, this.element);\n        [].slice.call(itemEle).forEach(el => {\n          this.itemExpand(isExpand, el, this.getIndexByItem(el));\n          el.classList.remove(CLS_EXPANDSTATE);\n        });\n        const expandedItem = select('.' + CLS_EXPANDSTATE, this.element);\n\n        if (expandedItem) {\n          expandedItem.classList.remove(CLS_EXPANDSTATE);\n        }\n\n        if (item) {\n          item.classList.add(CLS_EXPANDSTATE);\n        }\n      }\n    } else {\n      const ele = itemEle[index];\n\n      if (isNullOrUndefined(ele) || !ele.classList.contains(CLS_SLCT) || ele.classList.contains(CLS_ACTIVE) && isExpand) {\n        return;\n      } else {\n        if (this.expandMode === 'Single') {\n          this.expandItem(false);\n        }\n\n        this.itemExpand(isExpand, ele, index);\n      }\n    }\n  }\n\n  itemExpand(isExpand, ele, index) {\n    let ctn = ele.children[1];\n\n    if (ele.classList.contains(CLS_DISABLE$3)) {\n      return;\n    }\n\n    if (isNullOrUndefined(ctn) && isExpand) {\n      ctn = this.contentRendering(index);\n      ele.appendChild(ctn);\n      this.ariaAttrUpdate(ele);\n      this.expand(ctn);\n    } else if (!isNullOrUndefined(ctn)) {\n      if (isExpand) {\n        this.expand(ctn);\n      } else {\n        this.collapse(ctn);\n      }\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  destroyItems() {\n    this.restoreContent(null);\n\n    if (this.isReact || this.isAngular || this.isVue) {\n      this.clearTemplate();\n    }\n\n    [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM$1)).forEach(el => {\n      detach(el);\n    });\n  }\n\n  restoreContent(index) {\n    let ctnElePos;\n\n    if (isNullOrUndefined(index)) {\n      ctnElePos = this.element;\n    } else {\n      ctnElePos = this.element.querySelectorAll('.' + CLS_ITEM$1)[index];\n    }\n\n    this.templateEle.forEach(eleStr => {\n      if (!isNullOrUndefined(ctnElePos.querySelector(eleStr))) {\n        document.body.appendChild(ctnElePos.querySelector(eleStr)).style.display = 'none';\n      }\n    });\n  }\n\n  updateItem(item, index) {\n    if (!isNullOrUndefined(item)) {\n      const items = this.getItems();\n      const itemObj = items[index];\n      items.splice(index, 1);\n      this.restoreContent(index);\n      detach(item);\n      this.addItem(itemObj, index);\n    }\n  }\n\n  setTemplate(template, toElement, index) {\n    toElement.innerHTML = '';\n    this.templateCompile(toElement, template, index);\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  templateCompile(ele, cnt, index) {\n    const tempEle = this.createElement('div');\n    this.fetchElement(tempEle, cnt, index, false);\n\n    if (tempEle.childNodes.length !== 0) {\n      [].slice.call(tempEle.childNodes).forEach(childEle => {\n        ele.appendChild(childEle);\n      });\n    }\n  }\n\n  getPersistData() {\n    const keyEntity = ['expandedIndices'];\n    return this.addOnPersist(keyEntity);\n  }\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n   *\n   * @param  {AccordionModel} newProp - It contains the new value of data.\n   * @param  {AccordionModel} oldProp - It contains the old value of data.\n   * @returns {void}\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    const acrdn = this.element;\n    let isRefresh = false;\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'items':\n          if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n            const changedProp = Object.keys(newProp.items);\n\n            for (let j = 0; j < changedProp.length; j++) {\n              const index = parseInt(Object.keys(newProp.items)[j], 10);\n              const property = Object.keys(newProp.items[index])[0];\n              const item = selectAll('.' + CLS_ITEM$1, this.element)[index];\n              const oldVal = Object(oldProp.items[index])[property];\n              const newVal = Object(newProp.items[index])[property];\n              const temp = property;\n\n              if (temp === 'header' || temp === 'iconCss' || temp === 'expanded' || temp === 'content' && oldVal === '') {\n                this.updateItem(item, index);\n              }\n\n              if (property === 'cssClass' && !isNullOrUndefined(item)) {\n                item.classList.remove(oldVal);\n                item.classList.add(newVal);\n              }\n\n              if (property === 'visible' && !isNullOrUndefined(item)) {\n                if (Object(newProp.items[index])[property] === false) {\n                  item.classList.add(CLS_ITEMHIDE);\n                } else {\n                  item.classList.remove(CLS_ITEMHIDE);\n                }\n              }\n\n              if (property === 'disabled' && !isNullOrUndefined(item)) {\n                this.enableItem(index, !newVal);\n              }\n\n              if (property === 'content' && !isNullOrUndefined(item) && item.children.length === 2) {\n                if (typeof newVal === 'function') {\n                  const activeContent = item.querySelector('.' + CLS_CTENT);\n                  activeContent.innerHTML = '';\n                  this.setTemplate(newVal, activeContent, index);\n                } else {\n                  if (item.classList.contains(CLS_SLCTED)) {\n                    this.expandItem(false, index);\n                  }\n\n                  detach(item.querySelector('.' + CLS_CONTENT));\n                }\n              }\n            }\n          } else {\n            isRefresh = true;\n          }\n\n          break;\n\n        case 'dataSource':\n        case 'expandedIndices':\n          if (this.expandedIndices === null) {\n            this.expandedIndices = [];\n          }\n\n          isRefresh = true;\n          break;\n\n        case 'headerTemplate':\n          this.initializeHeaderTemplate();\n          isRefresh = true;\n          break;\n\n        case 'itemTemplate':\n          this.initializeItemTemplate();\n          isRefresh = true;\n          break;\n\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            this.add(acrdn, CLS_RTL$3);\n          } else {\n            this.remove(acrdn, CLS_RTL$3);\n          }\n\n          break;\n\n        case 'height':\n          setStyleAttribute(this.element, {\n            'height': formatUnit(newProp.height)\n          });\n          break;\n\n        case 'width':\n          setStyleAttribute(this.element, {\n            'width': formatUnit(newProp.width)\n          });\n          break;\n\n        case 'expandMode':\n          if (newProp.expandMode === 'Single') {\n            this.element.setAttribute('aria-multiselectable', 'false');\n\n            if (this.expandedIndices.length > 1) {\n              this.expandItem(false);\n            }\n          } else {\n            this.element.setAttribute('aria-multiselectable', 'true');\n          }\n\n          break;\n      }\n    }\n\n    if (isRefresh) {\n      this.initExpand = [];\n\n      if (this.expandedIndices.length > 0) {\n        this.initExpand = this.expandedIndices;\n      }\n\n      this.destroyItems();\n      this.renderItems();\n      this.initItemExpand();\n    }\n  }\n\n};\n\n__decorate$4([Collection([], AccordionItem)], Accordion.prototype, \"items\", void 0);\n\n__decorate$4([Property([])], Accordion.prototype, \"dataSource\", void 0);\n\n__decorate$4([Property()], Accordion.prototype, \"itemTemplate\", void 0);\n\n__decorate$4([Property()], Accordion.prototype, \"headerTemplate\", void 0);\n\n__decorate$4([Property('100%')], Accordion.prototype, \"width\", void 0);\n\n__decorate$4([Property('auto')], Accordion.prototype, \"height\", void 0);\n\n__decorate$4([Property([])], Accordion.prototype, \"expandedIndices\", void 0);\n\n__decorate$4([Property('Multiple')], Accordion.prototype, \"expandMode\", void 0);\n\n__decorate$4([Property(false)], Accordion.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$4([Complex({}, AccordionAnimationSettings)], Accordion.prototype, \"animation\", void 0);\n\n__decorate$4([Event()], Accordion.prototype, \"clicked\", void 0);\n\n__decorate$4([Event()], Accordion.prototype, \"expanding\", void 0);\n\n__decorate$4([Event()], Accordion.prototype, \"expanded\", void 0);\n\n__decorate$4([Event()], Accordion.prototype, \"created\", void 0);\n\n__decorate$4([Event()], Accordion.prototype, \"destroyed\", void 0);\n\nAccordion = __decorate$4([NotifyPropertyChanges], Accordion);\n/**\n * Accordion all modules\n */\n\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/triple-slash-reference */\n/// <reference path='../common/menu-base-model.d.ts'/>\n\n/**\n * The ContextMenu is a graphical user interface that appears on the user right click/touch hold operation.\n * ```html\n * <div id = 'target'></div>\n * <ul id = 'contextmenu'></ul>\n * ```\n * ```typescript\n * <script>\n * var contextMenuObj = new ContextMenu({items: [{ text: 'Cut' }, { text: 'Copy' },{ text: 'Paste' }], target: '#target'});\n * </script>\n * ```\n */\n\n\nlet ContextMenu = class ContextMenu extends MenuBase {\n  /**\n   * Constructor for creating the widget.\n   *\n   * @private\n   * @param {ContextMenuModel} options - Specifies the context menu model\n   * @param {string} element - Specifies the element\n   */\n  constructor(options, element) {\n    super(options, element);\n  }\n  /**\n   * For internal use only - prerender processing.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    this.isMenu = false;\n    this.element.id = this.element.id || getUniqueID('ej2-contextmenu');\n    super.preRender();\n  }\n\n  initialize() {\n    super.initialize();\n    attributes(this.element, {\n      'role': 'menubar',\n      'tabindex': '0'\n    });\n    this.element.style.zIndex = getZindexPartial(this.element).toString();\n  }\n  /**\n   * This method is used to open the ContextMenu in specified position.\n   *\n   * @param {number} top - To specify ContextMenu vertical positioning.\n   * @param {number} left - To specify ContextMenu horizontal positioning.\n   * @param {HTMLElement} target - To calculate z-index for ContextMenu based upon the specified target.\n   * @function open\n   * @returns {void}\n   */\n\n\n  open(top, left, target) {\n    super.openMenu(null, null, top, left, null, target);\n  }\n  /**\n   * Closes the ContextMenu if it is opened.\n   *\n   * @function close\n   * @returns {void}\n   */\n\n\n  close() {\n    super.closeMenu();\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @private\n   * @param {ContextMenuModel} newProp - Specifies new properties\n   * @param {ContextMenuModel} oldProp - Specifies old properties\n   * @returns {void}\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    super.onPropertyChanged(newProp, oldProp);\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'filter':\n          this.close();\n          this.filter = newProp.filter;\n          break;\n\n        case 'target':\n          this.unWireEvents(oldProp.target);\n          this.wireEvents();\n          break;\n      }\n    }\n  }\n  /**\n   * Get module name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'contextmenu';\n  }\n\n};\n\n__decorate$5([Property('')], ContextMenu.prototype, \"target\", void 0);\n\n__decorate$5([Property('')], ContextMenu.prototype, \"filter\", void 0);\n\n__decorate$5([Collection([], MenuItem)], ContextMenu.prototype, \"items\", void 0);\n\nContextMenu = __decorate$5([NotifyPropertyChanges], ContextMenu);\n/**\n * ContextMenu modules\n */\n\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/triple-slash-reference */\n/// <reference path='../common/menu-base-model.d.ts'/>\n\n\nconst VMENU = 'e-vertical';\nconst SCROLLABLE = 'e-scrollable';\nconst HAMBURGER = 'e-hamburger';\n/**\n * The Menu is a graphical user interface that serve as navigation headers for your application or site.\n * ```html\n * <ul id = 'menu'></ul>\n * ```\n * ```typescript\n * <script>\n * var menuObj = new Menu({ items: [{ text: 'Home' }, { text: 'Contact Us' },{ text: 'Login' }]});\n * menuObj.appendTo(\"#menu\");\n * </script>\n * ```\n */\n\nlet Menu = class Menu extends MenuBase {\n  /**\n   * Constructor for creating the component.\n   *\n   * @private\n   * @param {MenuModel} options - Specifies the menu model\n   * @param {string} element - Specifies the element\n   */\n  constructor(options, element) {\n    super(options, element);\n    this.tempItems = [];\n  }\n  /**\n   * Get module name.\n   *\n   * @private\n   * @returns {string} - Module Name\n   */\n\n\n  getModuleName() {\n    return 'menu';\n  }\n  /**\n   * For internal use only - prerender processing.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    this.isMenu = true;\n    this.element.id = this.element.id || getUniqueID('ej2-menu');\n\n    if (this.template) {\n      try {\n        if (document.querySelectorAll(this.template).length) {\n          this.template = document.querySelector(this.template).innerHTML.trim();\n          this.clearChanges();\n        }\n      } catch (e) {\n        /* action on catch */\n      }\n    } else {\n      this.updateMenuItems(this.items);\n    }\n\n    super.preRender();\n  }\n\n  initialize() {\n    super.initialize();\n    attributes(this.element, {\n      'role': 'menubar',\n      'tabindex': '0'\n    });\n\n    if (this.orientation === 'Vertical') {\n      this.element.classList.add(VMENU);\n\n      if (this.hamburgerMode && !this.target) {\n        this.element.previousElementSibling.classList.add(VMENU);\n      }\n\n      this.element.setAttribute('aria-orientation', 'vertical');\n    } else {\n      if (Browser.isDevice && !this.enableScrolling) {\n        this.element.parentElement.classList.add(SCROLLABLE);\n      }\n    }\n\n    if (this.hamburgerMode) {\n      this.element.parentElement.classList.add(HAMBURGER);\n\n      if (this.orientation === 'Horizontal') {\n        this.element.classList.add('e-hide-menu');\n      }\n    }\n  }\n\n  updateMenuItems(items) {\n    this.tempItems = items;\n    this.items = [];\n    this.tempItems.map(this.createMenuItems, this);\n    this.setProperties({\n      items: this.items\n    }, true);\n    this.tempItems = [];\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @private\n   * @param {MenuModel} newProp - Specifies the new properties.\n   * @param {MenuModel} oldProp - Specifies the old properties.\n   * @returns {void}\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'orientation':\n          if (newProp.orientation === 'Vertical') {\n            this.element.classList.add(VMENU);\n\n            if (this.hamburgerMode) {\n              if (!this.target) {\n                this.element.previousElementSibling.classList.add(VMENU);\n              }\n\n              this.element.classList.remove('e-hide-menu');\n            }\n\n            this.element.setAttribute('aria-orientation', 'vertical');\n          } else {\n            this.element.classList.remove(VMENU);\n\n            if (this.hamburgerMode) {\n              if (!this.target) {\n                this.element.previousElementSibling.classList.remove(VMENU);\n              }\n\n              this.element.classList.add('e-hide-menu');\n            }\n\n            this.element.removeAttribute('aria-orientation');\n          }\n\n          break;\n\n        case 'items':\n          if (!Object.keys(oldProp.items).length) {\n            this.updateMenuItems(newProp.items);\n          }\n\n          break;\n\n        case 'hamburgerMode':\n          if (!this.element.previousElementSibling) {\n            super.createHeaderContainer();\n          }\n\n          if (newProp.hamburgerMode) {\n            this.element.parentElement.classList.add(HAMBURGER);\n            [].slice.call(this.element.getElementsByClassName('e-blankicon')).forEach(li => {\n              li.style[this.enableRtl ? 'paddingRight' : 'paddingLeft'] = '';\n            });\n          } else {\n            this.element.parentElement.classList.remove(HAMBURGER);\n\n            if (this.orientation === 'Vertical') {\n              this.setBlankIconStyle(this.element);\n            }\n          }\n\n          if (this.orientation === 'Vertical') {\n            if (!this.target) {\n              this.element.previousElementSibling.classList.add(VMENU);\n            }\n\n            this.element.classList.remove('e-hide-menu');\n          } else {\n            if (this.target) {\n              this.element.previousElementSibling.classList.add(VMENU);\n            } else {\n              this.element.previousElementSibling.classList.remove(VMENU);\n            }\n\n            this.element.classList[newProp.hamburgerMode ? 'add' : 'remove']('e-hide-menu');\n          }\n\n          break;\n\n        case 'title':\n          if (this.hamburgerMode && this.element.previousElementSibling) {\n            newProp.title = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(newProp.title) : newProp.title;\n            this.element.previousElementSibling.querySelector('.e-menu-title').innerHTML = newProp.title;\n          }\n\n          break;\n\n        case 'target':\n          if (this.hamburgerMode) {\n            this.unWireEvents(oldProp.target);\n            this.wireEvents();\n\n            if (this.orientation === 'Horizontal') {\n              if (!newProp.target) {\n                if (!this.element.previousElementSibling) {\n                  super.createHeaderContainer();\n                }\n\n                this.element.previousElementSibling.classList.remove(VMENU);\n              } else {\n                this.element.previousElementSibling.classList.add(VMENU);\n              }\n\n              this.element.classList.add('e-hide-menu');\n            }\n          }\n\n          break;\n      }\n    }\n\n    super.onPropertyChanged(newProp, oldProp);\n  }\n\n  createMenuItems(item) {\n    let idx;\n    let i;\n    let items = this.items;\n    const pIdField = this.getField('parentId');\n\n    if (item[pIdField]) {\n      idx = this.getIndex(item[pIdField].toString(), true);\n\n      for (i = 0; i < idx.length; i++) {\n        if (!items[idx[i]].items) {\n          items[idx[i]].items = [];\n        }\n\n        items = items[idx[i]].items;\n      }\n\n      items.push(item);\n    } else {\n      this.items.push(item);\n    }\n  }\n  /**\n   * This method is used to open the Menu in hamburger mode.\n   *\n   * @function open\n   * @returns {void}\n   */\n\n\n  open() {\n    super.openHamburgerMenu();\n  }\n  /**\n   * Closes the Menu if it is opened in hamburger mode.\n   *\n   * @function close\n   * @returns {void}\n   */\n\n\n  close() {\n    super.closeHamburgerMenu();\n  }\n\n};\n\n__decorate$6([Property('Horizontal')], Menu.prototype, \"orientation\", void 0);\n\n__decorate$6([Property('')], Menu.prototype, \"target\", void 0);\n\n__decorate$6([Property(null)], Menu.prototype, \"template\", void 0);\n\n__decorate$6([Property(false)], Menu.prototype, \"enableScrolling\", void 0);\n\n__decorate$6([Property(false)], Menu.prototype, \"hamburgerMode\", void 0);\n\n__decorate$6([Property('Menu')], Menu.prototype, \"title\", void 0);\n\n__decorate$6([Property(false)], Menu.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$6([Complex({\n  itemId: 'id',\n  text: 'text',\n  parentId: 'parentId',\n  iconCss: 'iconCss',\n  url: 'url',\n  separator: 'separator',\n  children: 'items'\n}, FieldSettings)], Menu.prototype, \"fields\", void 0);\n\nMenu = __decorate$6([NotifyPropertyChanges], Menu);\n/**\n * Menu modules\n */\n\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst CLS_TAB = 'e-tab';\nconst CLS_HEADER$1 = 'e-tab-header';\nconst CLS_BLA_TEM = 'blazor-template';\nconst CLS_CONTENT$1 = 'e-content';\nconst CLS_NEST$1 = 'e-nested';\nconst CLS_ITEMS$1 = 'e-items';\nconst CLS_ITEM$2 = 'e-item';\nconst CLS_TEMPLATE$1 = 'e-template';\nconst CLS_RTL$4 = 'e-rtl';\nconst CLS_ACTIVE$1 = 'e-active';\nconst CLS_DISABLE$4 = 'e-disable';\nconst CLS_HIDDEN$1 = 'e-hidden';\nconst CLS_FOCUS = 'e-focused';\nconst CLS_ICONS = 'e-icons';\nconst CLS_ICON = 'e-icon';\nconst CLS_ICON_TAB = 'e-icon-tab';\nconst CLS_ICON_CLOSE = 'e-close-icon';\nconst CLS_CLOSE_SHOW = 'e-close-show';\nconst CLS_TEXT = 'e-tab-text';\nconst CLS_INDICATOR = 'e-indicator';\nconst CLS_WRAP = 'e-tab-wrap';\nconst CLS_TEXT_WRAP = 'e-text-wrap';\nconst CLS_TAB_ICON = 'e-tab-icon';\nconst CLS_TB_ITEMS = 'e-toolbar-items';\nconst CLS_TB_ITEM = 'e-toolbar-item';\nconst CLS_TB_POP = 'e-toolbar-pop';\nconst CLS_TB_POPUP = 'e-toolbar-popup';\nconst CLS_HOR_NAV = 'e-hor-nav';\nconst CLS_POPUP_OPEN = 'e-popup-open';\nconst CLS_POPUP_CLOSE = 'e-popup-close';\nconst CLS_PROGRESS = 'e-progress';\nconst CLS_IGNORE = 'e-ignore';\nconst CLS_OVERLAY$2 = 'e-overlay';\nconst CLS_HSCRCNT = 'e-hscroll-content';\nconst CLS_VSCRCNT = 'e-vscroll-content';\nconst CLS_VTAB = 'e-vertical-tab';\nconst CLS_VERTICAL$1 = 'e-vertical';\nconst CLS_VLEFT = 'e-vertical-left';\nconst CLS_VRIGHT = 'e-vertical-right';\nconst CLS_HBOTTOM = 'e-horizontal-bottom';\nconst CLS_FILL = 'e-fill-mode';\nconst TABITEMPREFIX = 'tabitem_';\nconst CLS_REORDER_ACTIVE_ITEM = 'e-reorder-active-item';\n/**\n * Objects used for configuring the Tab selecting item action properties.\n */\n\nclass TabActionSettings extends ChildProperty {}\n\n__decorate$7([Property('SlideLeftIn')], TabActionSettings.prototype, \"effect\", void 0);\n\n__decorate$7([Property(600)], TabActionSettings.prototype, \"duration\", void 0);\n\n__decorate$7([Property('ease')], TabActionSettings.prototype, \"easing\", void 0);\n/**\n * Objects used for configuring the Tab animation properties.\n */\n\n\nclass TabAnimationSettings extends ChildProperty {}\n\n__decorate$7([Complex({\n  effect: 'SlideLeftIn',\n  duration: 600,\n  easing: 'ease'\n}, TabActionSettings)], TabAnimationSettings.prototype, \"previous\", void 0);\n\n__decorate$7([Complex({\n  effect: 'SlideRightIn',\n  duration: 600,\n  easing: 'ease'\n}, TabActionSettings)], TabAnimationSettings.prototype, \"next\", void 0);\n/**\n * Objects used for configuring the Tab item header properties.\n */\n\n\nclass Header extends ChildProperty {}\n\n__decorate$7([Property('')], Header.prototype, \"text\", void 0);\n\n__decorate$7([Property('')], Header.prototype, \"iconCss\", void 0);\n\n__decorate$7([Property('left')], Header.prototype, \"iconPosition\", void 0);\n/**\n * An array of object that is used to configure the Tab.\n */\n\n\nclass TabItem extends ChildProperty {}\n\n__decorate$7([Complex({}, Header)], TabItem.prototype, \"header\", void 0);\n\n__decorate$7([Property(null)], TabItem.prototype, \"headerTemplate\", void 0);\n\n__decorate$7([Property('')], TabItem.prototype, \"content\", void 0);\n\n__decorate$7([Property('')], TabItem.prototype, \"cssClass\", void 0);\n\n__decorate$7([Property(false)], TabItem.prototype, \"disabled\", void 0);\n\n__decorate$7([Property(true)], TabItem.prototype, \"visible\", void 0);\n\n__decorate$7([Property()], TabItem.prototype, \"id\", void 0);\n/**\n * Tab is a content panel to show multiple contents in a single space, one at a time.\n * Each Tab item has an associated content, that will be displayed based on the active Tab header item.\n * ```html\n * <div id=\"tab\"></div>\n * <script>\n *   var tabObj = new Tab();\n *   tab.appendTo(\"#tab\");\n * </script>\n * ```\n */\n\n\nlet Tab = class Tab extends Component {\n  /**\n   * Initializes a new instance of the Tab class.\n   *\n   * @param {TabModel} options  - Specifies Tab model properties as options.\n   * @param {string | HTMLElement} element  - Specifies the element that is rendered as a Tab.\n   */\n  constructor(options, element) {\n    super(options, element);\n    this.show = {};\n    this.hide = {};\n    this.maxHeight = 0;\n    this.title = 'Close';\n    this.isInteracted = false;\n    this.lastIndex = 0;\n    this.isAdd = false;\n    this.isIconAlone = false;\n    this.draggableItems = [];\n    this.resizeContext = this.refreshActiveTabBorder.bind(this);\n    /**\n     * Contains the keyboard configuration of the Tab.\n     */\n\n    this.keyConfigs = {\n      tab: 'tab',\n      home: 'home',\n      end: 'end',\n      enter: 'enter',\n      space: 'space',\n      delete: 'delete',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      moveDown: 'downarrow'\n    };\n  }\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers, attributes and classes.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    if (this.isReact || this.isAngular) {\n      this.clearTemplate();\n    }\n\n    if (!isNullOrUndefined(this.tbObj)) {\n      this.tbObj.destroy();\n      this.tbObj = null;\n    }\n\n    this.unWireEvents();\n    ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation', 'aria-owns'].forEach(val => {\n      this.element.removeAttribute(val);\n    });\n    this.expTemplateContent();\n\n    if (!this.isTemplate) {\n      while (this.element.firstElementChild) {\n        remove(this.element.firstElementChild);\n      }\n    } else {\n      const cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT$1, this.element);\n      this.element.classList.remove(CLS_TEMPLATE$1);\n\n      if (!isNullOrUndefined(cntEle)) {\n        cntEle.innerHTML = this.cnt;\n      }\n    }\n\n    if (this.btnCls) {\n      this.btnCls = null;\n    }\n\n    this.hdrEle = null;\n    this.cntEle = null;\n    this.tbItems = null;\n    this.tbItem = null;\n    this.tbPop = null;\n    this.prevItem = null;\n    this.popEle = null;\n    this.bdrLine = null;\n    this.content = null;\n    this.dragItem = null;\n    this.cloneElement = null;\n    this.draggingItems = [];\n\n    if (this.draggableItems && this.draggableItems.length > 0) {\n      for (let i = 0; i < this.draggableItems.length; i++) {\n        this.draggableItems[i].destroy();\n        this.draggableItems[i] = null;\n      }\n\n      this.draggableItems = [];\n    }\n\n    super.destroy();\n    this.trigger('destroyed');\n  }\n  /**\n   * Refresh the tab component\n   *\n   * @returns {void}\n   */\n\n\n  refresh() {\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    super.refresh();\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n  /**\n   * Initialize component\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    const nested = closest(this.element, '.' + CLS_CONTENT$1);\n    this.prevIndex = 0;\n    this.isNested = false;\n    this.isPopup = false;\n    this.initRender = true;\n    this.isSwipeed = false;\n    this.itemIndexArray = [];\n    this.templateEle = [];\n\n    if (this.allowDragAndDrop) {\n      this.dragArea = !isNullOrUndefined(this.dragArea) ? this.dragArea : '#' + this.element.id + ' ' + ('.' + CLS_HEADER$1);\n    }\n\n    if (!isNullOrUndefined(nested)) {\n      nested.parentElement.classList.add(CLS_NEST$1);\n      this.isNested = true;\n    }\n\n    const name = Browser.info.name;\n    const css = name === 'msie' ? 'e-ie' : name === 'edge' ? 'e-edge' : name === 'safari' ? 'e-safari' : '';\n    setStyleAttribute(this.element, {\n      'width': formatUnit(this.width),\n      'height': formatUnit(this.height)\n    });\n    this.setCssClass(this.element, this.cssClass, true);\n    attributes(this.element, {\n      role: 'tablist',\n      'aria-disabled': 'false',\n      'aria-activedescendant': '',\n      'aria-owns': this.element.id + '_' + 'tab_header_items'\n    });\n    this.setCssClass(this.element, css, true);\n    this.updatePopAnimationConfig();\n  }\n  /**\n   * Initialize the component rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.btnCls = this.createElement('span', {\n      className: CLS_ICONS + ' ' + CLS_ICON_CLOSE,\n      attrs: {\n        title: this.title\n      }\n    });\n    this.tabId = this.element.id.length > 0 ? '-' + this.element.id : getRandomId();\n    this.renderContainer();\n    this.wireEvents();\n    this.initRender = false;\n  }\n\n  renderContainer() {\n    const ele = this.element;\n    this.items.forEach((item, index) => {\n      if (isNullOrUndefined(item.id) && !isNullOrUndefined(item.setProperties)) {\n        item.setProperties({\n          id: TABITEMPREFIX + index.toString()\n        }, true);\n      }\n    });\n\n    if (this.items.length > 0 && ele.children.length === 0) {\n      ele.appendChild(this.createElement('div', {\n        className: CLS_CONTENT$1\n      }));\n      this.setOrientation(this.headerPlacement, this.createElement('div', {\n        className: CLS_HEADER$1\n      }));\n      this.isTemplate = false;\n    } else if (this.element.children.length > 0) {\n      this.isTemplate = true;\n      ele.classList.add(CLS_TEMPLATE$1);\n      const header = ele.querySelector('.' + CLS_HEADER$1);\n\n      if (header && this.headerPlacement === 'Bottom') {\n        this.setOrientation(this.headerPlacement, header);\n      }\n    }\n\n    if (!isNullOrUndefined(select('.' + CLS_HEADER$1, this.element)) && !isNullOrUndefined(select('.' + CLS_CONTENT$1, this.element))) {\n      this.renderHeader();\n      this.tbItems = select('.' + CLS_HEADER$1 + ' .' + CLS_TB_ITEMS, this.element);\n\n      if (!isNullOrUndefined(this.tbItems)) {\n        rippleEffect(this.tbItems, {\n          selector: '.e-tab-wrap'\n        });\n      }\n\n      this.renderContent();\n\n      if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n        this.tbItems = select('.' + CLS_HEADER$1 + ' .' + CLS_TB_ITEMS, this.element);\n        this.bdrLine = this.createElement('div', {\n          className: CLS_INDICATOR + ' ' + CLS_HIDDEN$1 + ' ' + CLS_IGNORE\n        });\n        const scrCnt = select('.' + this.scrCntClass, this.tbItems);\n\n        if (!isNullOrUndefined(scrCnt)) {\n          scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n        } else {\n          this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n        }\n\n        this.setContentHeight(true);\n        this.select(this.selectedItem);\n      }\n\n      if (!isNullOrUndefined(this.tbItem)) {\n        for (let i = 0; i < this.items.length; i++) {\n          if (this.items[i]) {\n            const tabID = this.items[i].id;\n            this.tbItem[i].setAttribute('data-id', tabID);\n          }\n        }\n      }\n\n      this.setRTL(this.enableRtl);\n    }\n  }\n\n  renderHeader() {\n    const hdrPlace = this.headerPlacement;\n    let tabItems = [];\n    this.hdrEle = this.getTabHeader();\n    this.addVerticalClass();\n\n    if (!this.isTemplate) {\n      tabItems = this.parseObject(this.items, 0);\n    } else {\n      if (this.element.children.length > 1 && this.element.children[1].classList.contains(CLS_HEADER$1)) {\n        this.setProperties({\n          headerPlacement: 'Bottom'\n        }, true);\n      }\n\n      const count = this.hdrEle.children.length;\n      const hdrItems = [];\n\n      for (let i = 0; i < count; i++) {\n        hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n      }\n\n      if (count > 0) {\n        while (this.hdrEle.firstElementChild) {\n          detach(this.hdrEle.firstElementChild);\n        }\n\n        const tabItems = this.createElement('div', {\n          className: CLS_ITEMS$1\n        });\n        this.hdrEle.appendChild(tabItems);\n        hdrItems.forEach((item, index) => {\n          this.lastIndex = index;\n          const attr = {\n            className: CLS_ITEM$2,\n            id: CLS_ITEM$2 + this.tabId + '_' + index,\n            attrs: {\n              role: 'tab',\n              'aria-controls': CLS_CONTENT$1 + this.tabId + '_' + index,\n              'aria-selected': 'false'\n            }\n          };\n          const txt = this.createElement('span', {\n            className: CLS_TEXT,\n            innerHTML: item,\n            attrs: {\n              'role': 'presentation'\n            }\n          }).outerHTML;\n          const cont = this.createElement('div', {\n            className: CLS_TEXT_WRAP,\n            innerHTML: txt + this.btnCls.outerHTML\n          }).outerHTML;\n          const wrap = this.createElement('div', {\n            className: CLS_WRAP,\n            innerHTML: cont,\n            attrs: {\n              tabIndex: '-1'\n            }\n          });\n          tabItems.appendChild(this.createElement('div', attr));\n          selectAll('.' + CLS_ITEM$2, tabItems)[index].appendChild(wrap);\n        });\n      }\n    }\n\n    this.tbObj = new Toolbar({\n      width: hdrPlace === 'Left' || hdrPlace === 'Right' ? 'auto' : '100%',\n      height: hdrPlace === 'Left' || hdrPlace === 'Right' ? '100%' : 'auto',\n      overflowMode: this.overflowMode,\n      items: tabItems.length !== 0 ? tabItems : [],\n      clicked: this.clickHandler.bind(this),\n      scrollStep: this.scrollStep,\n      enableHtmlSanitizer: this.enableHtmlSanitizer,\n      cssClass: this.cssClass\n    });\n    this.tbObj.isStringTemplate = true;\n    this.tbObj.createElement = this.createElement;\n    this.tbObj.appendTo(this.hdrEle);\n    attributes(this.hdrEle, {\n      'aria-label': 'tab-header'\n    });\n    this.updateOrientationAttribute();\n    this.setCloseButton(this.showCloseButton);\n    const toolbarHeader = this.tbObj.element.querySelector('.' + CLS_TB_ITEMS);\n\n    if (!isNullOrUndefined(toolbarHeader)) {\n      if (isNullOrUndefined(toolbarHeader.id) || toolbarHeader.id === '') {\n        toolbarHeader.id = this.element.id + '_' + 'tab_header_items';\n      }\n\n      this.element.setAttribute('aria-owns', toolbarHeader.id);\n    }\n  }\n\n  renderContent() {\n    this.cntEle = select('.' + CLS_CONTENT$1, this.element);\n    const hdrItem = selectAll('.' + CLS_TB_ITEM, this.element);\n\n    if (this.isTemplate) {\n      this.cnt = this.cntEle.children.length > 0 ? this.cntEle.innerHTML : '';\n      const contents = this.cntEle.children;\n\n      for (let i = 0; i < hdrItem.length; i++) {\n        if (contents.length - 1 >= i) {\n          addClass([contents.item(i)], CLS_ITEM$2);\n          attributes(contents.item(i), {\n            'role': 'tabpanel',\n            'aria-labelledby': CLS_ITEM$2 + this.tabId + '_' + i\n          });\n          contents.item(i).id = CLS_CONTENT$1 + this.tabId + '_' + i;\n        }\n      }\n    }\n  }\n\n  reRenderItems() {\n    this.renderContainer();\n\n    if (!isNullOrUndefined(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n  }\n\n  parseObject(items, index) {\n    const tbItems = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element);\n    let maxId = this.lastIndex;\n\n    if (!this.isReplace && tbItems.length > 0) {\n      const idList = [];\n      tbItems.forEach(item => {\n        idList.push(parseInt(item.id.slice(item.id.indexOf('_') + 1), 10));\n      });\n      maxId = Math.max(...idList);\n    }\n\n    const tItems = [];\n    let txtWrapEle;\n    const spliceArray = [];\n    items.forEach((item, i) => {\n      const pos = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconPosition) ? '' : item.header.iconPosition;\n      const css = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconCss) ? '' : item.header.iconCss;\n\n      if (isNullOrUndefined(item.headerTemplate) && (isNullOrUndefined(item.header) || isNullOrUndefined(item.header.text) || item.header.text.length === 0 && css === '')) {\n        spliceArray.push(i);\n        return;\n      }\n\n      let txt = item.headerTemplate || item.header.text;\n\n      if (typeof txt === 'string' && this.enableHtmlSanitizer) {\n        txt = SanitizeHtmlHelper.sanitize(txt);\n      }\n\n      let itemIndex;\n\n      if (this.isReplace && !isNullOrUndefined(this.tbId) && this.tbId !== '') {\n        const num = this.tbId.indexOf('_');\n        itemIndex = parseInt(this.tbId.substring(num + 1), 10);\n        this.tbId = '';\n      } else {\n        itemIndex = index + i;\n      }\n\n      this.lastIndex = tbItems.length === 0 ? i : this.isReplace ? itemIndex : maxId + 1 + i;\n      const disabled = item.disabled ? ' ' + CLS_DISABLE$4 + ' ' + CLS_OVERLAY$2 : '';\n      const hidden = item.visible === false ? ' ' + CLS_HIDDEN$1 : '';\n      txtWrapEle = this.createElement('div', {\n        className: CLS_TEXT,\n        attrs: {\n          'role': 'presentation'\n        }\n      });\n      const tHtml = txt instanceof Object ? txt.outerHTML : txt;\n      const txtEmpty = !isNullOrUndefined(tHtml) && tHtml !== '';\n\n      if (!isNullOrUndefined(txt.tagName)) {\n        txtWrapEle.appendChild(txt);\n      } else {\n        this.headerTextCompile(txtWrapEle, txt, i);\n      }\n\n      let tEle;\n      const icon = this.createElement('span', {\n        className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n      });\n      const tCont = this.createElement('div', {\n        className: CLS_TEXT_WRAP\n      });\n      tCont.appendChild(txtWrapEle);\n\n      if (txt !== '' && txt !== undefined && css !== '') {\n        if (pos === 'left' || pos === 'top') {\n          tCont.insertBefore(icon, tCont.firstElementChild);\n        } else {\n          tCont.appendChild(icon);\n        }\n\n        tEle = txtWrapEle;\n        this.isIconAlone = false;\n      } else {\n        tEle = css === '' ? txtWrapEle : icon;\n\n        if (tEle === icon) {\n          detach(txtWrapEle);\n          tCont.appendChild(icon);\n          this.isIconAlone = true;\n        }\n      }\n\n      const wrapAttrs = item.disabled ? {} : {\n        tabIndex: '-1'\n      };\n      tCont.appendChild(this.btnCls.cloneNode(true));\n      const wrap = this.createElement('div', {\n        className: CLS_WRAP,\n        attrs: wrapAttrs\n      });\n      wrap.appendChild(tCont);\n\n      if (this.itemIndexArray === []) {\n        this.itemIndexArray.push(CLS_ITEM$2 + this.tabId + '_' + this.lastIndex);\n      } else {\n        this.itemIndexArray.splice(index + i, 0, CLS_ITEM$2 + this.tabId + '_' + this.lastIndex);\n      }\n\n      const attrObj = {\n        id: CLS_ITEM$2 + this.tabId + '_' + this.lastIndex,\n        role: 'tab',\n        'aria-selected': 'false'\n      };\n      const tItem = {\n        htmlAttributes: attrObj,\n        template: wrap\n      };\n      tItem.cssClass = (item.cssClass !== undefined ? item.cssClass : ' ') + ' ' + disabled + ' ' + hidden + ' ' + (css !== '' ? 'e-i' + pos : '') + ' ' + (!txtEmpty ? CLS_ICON : '');\n\n      if (pos === 'top' || pos === 'bottom') {\n        this.element.classList.add('e-vertical-icon');\n      }\n\n      tItems.push(tItem);\n      i++;\n    });\n\n    if (!this.isAdd) {\n      spliceArray.forEach(spliceItemIndex => {\n        this.items.splice(spliceItemIndex, 1);\n      });\n    }\n\n    if (this.isIconAlone) {\n      this.element.classList.add(CLS_ICON_TAB);\n    } else {\n      this.element.classList.remove(CLS_ICON_TAB);\n    }\n\n    return tItems;\n  }\n\n  removeActiveClass() {\n    const tabHeader = this.getTabHeader();\n\n    if (tabHeader) {\n      const tabItems = selectAll('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1, tabHeader);\n      [].slice.call(tabItems).forEach(node => node.classList.remove(CLS_ACTIVE$1));\n    }\n  }\n\n  checkPopupOverflow(ele) {\n    this.tbPop = select('.' + CLS_TB_POP, this.element);\n    const popIcon = select('.e-hor-nav', this.element);\n    const tbrItems = select('.' + CLS_TB_ITEMS, this.element);\n    const lastChild = tbrItems.lastChild;\n    let isOverflow = false;\n\n    if (!this.isVertical() && (this.enableRtl && popIcon.offsetLeft + popIcon.offsetWidth > tbrItems.offsetLeft || !this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {\n      isOverflow = true;\n    } else if (this.isVertical() && popIcon.offsetTop < lastChild.offsetTop + lastChild.offsetHeight) {\n      isOverflow = true;\n    }\n\n    if (isOverflow) {\n      ele.classList.add(CLS_TB_POPUP);\n      this.tbPop.insertBefore(ele, selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n    }\n\n    return true;\n  }\n\n  popupHandler(target) {\n    const ripEle = target.querySelector('.e-ripple-element');\n\n    if (!isNullOrUndefined(ripEle)) {\n      ripEle.outerHTML = '';\n      target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n    }\n\n    this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n    const lastChild = this.tbItem[this.tbItem.length - 1];\n\n    if (this.tbItem.length !== 0) {\n      target.classList.remove(CLS_TB_POPUP);\n      target.removeAttribute('style');\n      this.tbItems.appendChild(target);\n      this.actEleId = target.id;\n\n      if (this.checkPopupOverflow(lastChild)) {\n        const prevEle = this.tbItems.lastChild.previousElementSibling;\n        this.checkPopupOverflow(prevEle);\n      }\n\n      this.isPopup = true;\n    }\n\n    return selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n  }\n\n  updateOrientationAttribute() {\n    attributes(this.element, {\n      'aria-orientation': this.isVertical() ? 'vertical' : 'horizontal'\n    });\n  }\n\n  setCloseButton(val) {\n    const trg = select('.' + CLS_HEADER$1, this.element);\n\n    if (val === true) {\n      trg.classList.add(CLS_CLOSE_SHOW);\n    } else {\n      trg.classList.remove(CLS_CLOSE_SHOW);\n    }\n\n    this.tbObj.refreshOverflow();\n    this.refreshActiveTabBorder();\n  }\n\n  prevCtnAnimation(prev, current) {\n    let animation;\n    const checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL$4);\n\n    if (this.isPopup || prev <= current) {\n      if (this.animation.previous.effect === 'SlideLeftIn') {\n        animation = {\n          name: 'SlideLeftOut',\n          duration: this.animation.previous.duration,\n          timingFunction: this.animation.previous.easing\n        };\n      } else {\n        animation = null;\n      }\n    } else {\n      if (this.animation.next.effect === 'SlideRightIn') {\n        animation = {\n          name: 'SlideRightOut',\n          duration: this.animation.next.duration,\n          timingFunction: this.animation.next.easing\n        };\n      } else {\n        animation = null;\n      }\n    }\n\n    return animation;\n  }\n\n  triggerPrevAnimation(oldCnt, prevIndex) {\n    const animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n\n    if (!isNullOrUndefined(animateObj)) {\n      animateObj.begin = () => {\n        setStyleAttribute(oldCnt, {\n          'position': 'absolute'\n        });\n        oldCnt.classList.add(CLS_PROGRESS);\n        oldCnt.classList.add('e-view');\n      };\n\n      animateObj.end = () => {\n        oldCnt.style.display = 'none';\n        oldCnt.classList.remove(CLS_ACTIVE$1);\n        oldCnt.classList.remove(CLS_PROGRESS);\n        oldCnt.classList.remove('e-view');\n        setStyleAttribute(oldCnt, {\n          'display': '',\n          'position': ''\n        });\n\n        if (oldCnt.childNodes.length === 0 && !this.isTemplate) {\n          detach(oldCnt);\n        }\n      };\n\n      new Animation(animateObj).animate(oldCnt);\n    } else {\n      oldCnt.classList.remove(CLS_ACTIVE$1);\n    }\n  }\n\n  triggerAnimation(id, value) {\n    const prevIndex = this.prevIndex;\n    let oldCnt;\n    const itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT$1).children);\n    itemCollection.forEach(item => {\n      if (item.id === this.prevActiveEle) {\n        oldCnt = item;\n      }\n    });\n    const prevEle = this.tbItem[prevIndex];\n    const newCnt = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n    if (isNullOrUndefined(oldCnt) && !isNullOrUndefined(prevEle)) {\n      const idNo = this.extIndex(prevEle.id);\n      oldCnt = this.getTrgContent(this.cntEle, idNo);\n    }\n\n    if (!isNullOrUndefined(newCnt)) {\n      this.prevActiveEle = newCnt.id;\n    }\n\n    if (this.initRender || value === false || this.animation === {} || isNullOrUndefined(this.animation)) {\n      if (oldCnt && oldCnt !== newCnt) {\n        oldCnt.classList.remove(CLS_ACTIVE$1);\n      }\n\n      return;\n    }\n\n    const cnt = select('.' + CLS_CONTENT$1, this.element);\n    let animateObj;\n\n    if (this.prevIndex > this.selectedItem && !this.isPopup) {\n      const openEff = this.animation.previous.effect;\n      animateObj = {\n        name: openEff === 'None' ? '' : openEff !== 'SlideLeftIn' ? openEff : 'SlideLeftIn',\n        duration: this.animation.previous.duration,\n        timingFunction: this.animation.previous.easing\n      };\n    } else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n      const clsEff = this.animation.next.effect;\n      animateObj = {\n        name: clsEff === 'None' ? '' : clsEff !== 'SlideRightIn' ? clsEff : 'SlideRightIn',\n        duration: this.animation.next.duration,\n        timingFunction: this.animation.next.easing\n      };\n    }\n\n    animateObj.progress = () => {\n      cnt.classList.add(CLS_PROGRESS);\n      this.setActiveBorder();\n    };\n\n    animateObj.end = () => {\n      cnt.classList.remove(CLS_PROGRESS);\n      newCnt.classList.add(CLS_ACTIVE$1);\n    };\n\n    if (!this.initRender && !isNullOrUndefined(oldCnt)) {\n      this.triggerPrevAnimation(oldCnt, prevIndex);\n    }\n\n    this.isPopup = false;\n\n    if (animateObj.name === '') {\n      newCnt.classList.add(CLS_ACTIVE$1);\n    } else {\n      new Animation(animateObj).animate(newCnt);\n    }\n  }\n\n  keyPressed(trg) {\n    const trgParent = closest(trg, '.' + CLS_HEADER$1 + ' .' + CLS_TB_ITEM);\n    const trgIndex = this.getEleIndex(trgParent);\n\n    if (!isNullOrUndefined(this.popEle) && trg.classList.contains('e-hor-nav')) {\n      this.popEle.classList.contains(CLS_POPUP_OPEN) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n    } else if (trg.classList.contains('e-scroll-nav')) {\n      trg.click();\n    } else {\n      if (!isNullOrUndefined(trgParent) && trgParent.classList.contains(CLS_ACTIVE$1) === false) {\n        this.selectTab(trgIndex, null, true);\n\n        if (!isNullOrUndefined(this.popEle)) {\n          this.popObj.hide(this.hide);\n        }\n      }\n    }\n  }\n\n  getTabHeader() {\n    if (isNullOrUndefined(this.element)) {\n      return undefined;\n    }\n\n    const headers = [].slice.call(this.element.children).filter(e => e.classList.contains(CLS_HEADER$1));\n\n    if (headers.length > 0) {\n      return headers[0];\n    } else {\n      const wrap = [].slice.call(this.element.children).filter(e => !e.classList.contains(CLS_BLA_TEM))[0];\n\n      if (!wrap) {\n        return undefined;\n      }\n\n      return [].slice.call(wrap.children).filter(e => e.classList.contains(CLS_HEADER$1))[0];\n    }\n  }\n\n  getEleIndex(item) {\n    return Array.prototype.indexOf.call(selectAll('.' + CLS_TB_ITEM, this.getTabHeader()), item);\n  }\n\n  extIndex(id) {\n    return id.replace(CLS_ITEM$2 + this.tabId + '_', '');\n  }\n\n  expTemplateContent() {\n    this.templateEle.forEach(eleStr => {\n      if (!isNullOrUndefined(this.element.querySelector(eleStr))) {\n        document.body.appendChild(this.element.querySelector(eleStr)).style.display = 'none';\n      }\n    });\n  }\n\n  templateCompile(ele, cnt, index) {\n    const tempEle = this.createElement('div');\n    this.compileElement(tempEle, cnt, 'content', index);\n\n    if (tempEle.childNodes.length !== 0) {\n      ele.appendChild(tempEle);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  compileElement(ele, val, prop, index) {\n    let templateFn;\n\n    if (typeof val === 'string') {\n      val = val.trim();\n\n      if (this.isVue) {\n        templateFn = compile(SanitizeHtmlHelper.sanitize(val));\n      } else {\n        ele.innerHTML = SanitizeHtmlHelper.sanitize(val);\n      }\n    } else {\n      templateFn = compile(val);\n    }\n\n    let templateFUN;\n\n    if (!isNullOrUndefined(templateFn)) {\n      templateFUN = templateFn({}, this, prop);\n    }\n\n    if (!isNullOrUndefined(templateFn) && templateFUN.length > 0) {\n      [].slice.call(templateFUN).forEach(el => {\n        ele.appendChild(el);\n      });\n    }\n  }\n\n  headerTextCompile(element, text, index) {\n    this.compileElement(element, text, 'headerTemplate', index);\n  }\n\n  getContent(ele, cnt, callType, index) {\n    let eleStr;\n    cnt = isNullOrUndefined(cnt) ? \"\" : cnt;\n\n    if (typeof cnt === 'string' || isNullOrUndefined(cnt.innerHTML)) {\n      if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n        cnt = SanitizeHtmlHelper.sanitize(cnt);\n      }\n\n      if (cnt[0] === '.' || cnt[0] === '#') {\n        if (document.querySelectorAll(cnt).length) {\n          const eleVal = document.querySelector(cnt);\n          eleStr = eleVal.outerHTML.trim();\n\n          if (callType === 'clone') {\n            ele.appendChild(eleVal.cloneNode(true));\n          } else {\n            ele.appendChild(eleVal);\n            eleVal.style.display = '';\n          }\n        } else {\n          this.templateCompile(ele, cnt, index);\n        }\n      } else {\n        this.templateCompile(ele, cnt, index);\n      }\n    } else {\n      ele.appendChild(cnt);\n    }\n\n    if (!isNullOrUndefined(eleStr)) {\n      if (this.templateEle.indexOf(cnt.toString()) === -1) {\n        this.templateEle.push(cnt.toString());\n      }\n    }\n  }\n\n  getTrgContent(cntEle, no) {\n    let ele;\n\n    if (this.element.classList.contains(CLS_NEST$1)) {\n      ele = select('.' + CLS_NEST$1 + '> .' + CLS_CONTENT$1 + ' > #' + CLS_CONTENT$1 + this.tabId + '_' + no, this.element);\n    } else {\n      ele = this.findEle(cntEle.children, CLS_CONTENT$1 + this.tabId + '_' + no);\n    }\n\n    return ele;\n  }\n\n  findEle(items, key) {\n    let ele;\n\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].id === key) {\n        ele = items[i];\n        break;\n      }\n    }\n\n    return ele;\n  }\n\n  isVertical() {\n    const isVertical = this.headerPlacement === 'Left' || this.headerPlacement === 'Right' ? true : false;\n    this.scrCntClass = isVertical ? CLS_VSCRCNT : CLS_HSCRCNT;\n    return isVertical;\n  }\n\n  addVerticalClass() {\n    if (this.isVertical()) {\n      const tbPos = this.headerPlacement === 'Left' ? CLS_VLEFT : CLS_VRIGHT;\n      addClass([this.hdrEle], [CLS_VERTICAL$1, tbPos]);\n\n      if (!this.element.classList.contains(CLS_NEST$1)) {\n        addClass([this.element], [CLS_VTAB, tbPos]);\n      } else {\n        addClass([this.hdrEle], [CLS_VTAB, tbPos]);\n      }\n    }\n\n    if (this.headerPlacement === 'Bottom') {\n      addClass([this.hdrEle], [CLS_HBOTTOM]);\n    }\n  }\n\n  updatePopAnimationConfig() {\n    this.show = {\n      name: this.isVertical() ? 'FadeIn' : 'SlideDown',\n      duration: 100\n    };\n    this.hide = {\n      name: this.isVertical() ? 'FadeOut' : 'SlideUp',\n      duration: 100\n    };\n  }\n\n  changeOrientation(place) {\n    this.setOrientation(place, this.hdrEle);\n    const activeTab = this.hdrEle.querySelector('.' + CLS_ACTIVE$1);\n    const isVertical = this.hdrEle.classList.contains(CLS_VERTICAL$1) ? true : false;\n    removeClass([this.element], [CLS_VTAB]);\n    removeClass([this.hdrEle], [CLS_VERTICAL$1, CLS_VLEFT, CLS_VRIGHT]);\n\n    if (isVertical !== this.isVertical()) {\n      this.changeToolbarOrientation();\n\n      if (!isNullOrUndefined(activeTab) && activeTab.classList.contains(CLS_TB_POPUP)) {\n        this.popupHandler(activeTab);\n      }\n    }\n\n    this.addVerticalClass();\n    this.updateOrientationAttribute();\n    this.setActiveBorder();\n    this.focusItem();\n  }\n\n  focusItem() {\n    const curActItem = select(' #' + CLS_ITEM$2 + this.tabId + '_' + this.selectedItem, this.hdrEle);\n\n    if (!isNullOrUndefined(curActItem)) {\n      curActItem.firstElementChild.focus();\n    }\n  }\n\n  changeToolbarOrientation() {\n    this.tbObj.setProperties({\n      height: this.isVertical() ? '100%' : 'auto',\n      width: this.isVertical() ? 'auto' : '100%'\n    }, true);\n    this.tbObj.changeOrientation();\n    this.updatePopAnimationConfig();\n  }\n\n  setOrientation(place, ele) {\n    const headerPos = Array.prototype.indexOf.call(this.element.children, ele);\n    const contentPos = Array.prototype.indexOf.call(this.element.children, this.element.querySelector('.' + CLS_CONTENT$1));\n\n    if (place === 'Bottom' && contentPos > headerPos) {\n      this.element.appendChild(ele);\n    } else {\n      removeClass([ele], [CLS_HBOTTOM]);\n      this.element.insertBefore(ele, select('.' + CLS_CONTENT$1, this.element));\n    }\n  }\n\n  setCssClass(ele, cls, val) {\n    if (cls === '') {\n      return;\n    }\n\n    const list = cls.split(' ');\n\n    for (let i = 0; i < list.length; i++) {\n      if (val) {\n        ele.classList.add(list[i]);\n      } else {\n        ele.classList.remove(list[i]);\n      }\n    }\n  }\n\n  setContentHeight(val) {\n    if (this.element.classList.contains(CLS_FILL)) {\n      removeClass([this.element], [CLS_FILL]);\n    }\n\n    if (isNullOrUndefined(this.cntEle)) {\n      return;\n    }\n\n    const hdrEle = this.getTabHeader();\n\n    if (this.heightAdjustMode === 'None') {\n      if (this.height === 'auto') {\n        return;\n      } else {\n        if (!this.isVertical()) {\n          setStyleAttribute(this.cntEle, {\n            'height': this.element.offsetHeight - hdrEle.offsetHeight + 'px'\n          });\n        }\n      }\n    } else if (this.heightAdjustMode === 'Fill') {\n      addClass([this.element], [CLS_FILL]);\n      setStyleAttribute(this.element, {\n        'height': '100%'\n      });\n      setStyleAttribute(this.cntEle, {\n        'height': this.element.offsetHeight - hdrEle.offsetHeight + 'px'\n      });\n    } else if (this.heightAdjustMode === 'Auto') {\n      if (this.isTemplate === true) {\n        const cnt = selectAll('.' + CLS_CONTENT$1 + ' > .' + CLS_ITEM$2, this.element);\n\n        for (let i = 0; i < cnt.length; i++) {\n          cnt[i].setAttribute('style', 'display:block; visibility: visible');\n          this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n          cnt[i].style.removeProperty('display');\n          cnt[i].style.removeProperty('visibility');\n        }\n      } else {\n        this.cntEle = select('.' + CLS_CONTENT$1, this.element);\n\n        if (val === true) {\n          this.cntEle.appendChild(this.createElement('div', {\n            id: CLS_CONTENT$1 + this.tabId + '_' + 0,\n            className: CLS_ITEM$2 + ' ' + CLS_ACTIVE$1,\n            attrs: {\n              'role': 'tabpanel',\n              'aria-labelledby': CLS_ITEM$2 + this.tabId + '_' + 0\n            }\n          }));\n        }\n\n        const ele = this.cntEle.children.item(0);\n\n        for (let i = 0; i < this.items.length; i++) {\n          this.getContent(ele, this.items[i].content, 'clone', i);\n          this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n\n          while (ele.firstChild) {\n            ele.removeChild(ele.firstChild);\n          }\n        }\n\n        if (this.isReact) {\n          this.clearTemplate(['content']);\n        }\n\n        this.templateEle = [];\n        this.getContent(ele, this.items[0].content, 'render', 0);\n\n        if (this.prevIndex !== this.selectedItem) {\n          ele.classList.remove(CLS_ACTIVE$1);\n        }\n      }\n\n      setStyleAttribute(this.cntEle, {\n        'height': this.maxHeight + 'px'\n      });\n    } else {\n      setStyleAttribute(this.cntEle, {\n        'height': 'auto'\n      });\n    }\n  }\n\n  getHeight(ele) {\n    const cs = window.getComputedStyle(ele);\n    return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) + parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n  }\n\n  setActiveBorder() {\n    const trgHdrEle = this.getTabHeader();\n    const trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1, trgHdrEle);\n\n    if (isNullOrUndefined(trg)) {\n      return;\n    }\n\n    if (!this.reorderActiveTab) {\n      if (trg.classList.contains(CLS_TB_POPUP) && !this.bdrLine.classList.contains(CLS_HIDDEN$1)) {\n        this.bdrLine.classList.add(CLS_HIDDEN$1);\n      }\n\n      if (trgHdrEle && !trgHdrEle.classList.contains(CLS_REORDER_ACTIVE_ITEM)) {\n        trgHdrEle.classList.add(CLS_REORDER_ACTIVE_ITEM);\n      }\n    } else if (trgHdrEle) {\n      trgHdrEle.classList.remove(CLS_REORDER_ACTIVE_ITEM);\n    }\n\n    const root = closest(trg, '.' + CLS_TAB);\n\n    if (this.element !== root) {\n      return;\n    }\n\n    this.tbItems = select('.' + CLS_TB_ITEMS, trgHdrEle);\n    const bar = select('.' + CLS_INDICATOR, trgHdrEle);\n    const scrollCnt = select('.' + CLS_TB_ITEMS + ' .' + this.scrCntClass, trgHdrEle);\n\n    if (this.isVertical()) {\n      setStyleAttribute(bar, {\n        'left': '',\n        'right': ''\n      });\n      const tbHeight = isNullOrUndefined(scrollCnt) ? this.tbItems.offsetHeight : scrollCnt.offsetHeight;\n\n      if (tbHeight !== 0) {\n        setStyleAttribute(bar, {\n          'top': trg.offsetTop + 'px',\n          'height': trg.offsetHeight + 'px'\n        });\n      } else {\n        setStyleAttribute(bar, {\n          'top': 0,\n          'height': 0\n        });\n      }\n    } else {\n      if (this.overflowMode === 'MultiRow') {\n        let bar = select('.' + CLS_INDICATOR, this.element);\n        setStyleAttribute(bar, {\n          'top': trg.offsetHeight + trg.offsetTop + 'px',\n          'height': ''\n        });\n      } else {\n        setStyleAttribute(bar, {\n          'top': '',\n          'height': ''\n        });\n      }\n\n      let tbWidth = isNullOrUndefined(scrollCnt) ? this.tbItems.offsetWidth : scrollCnt.offsetWidth;\n\n      if (tbWidth !== 0) {\n        setStyleAttribute(bar, {\n          'left': trg.offsetLeft + 'px',\n          'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px'\n        });\n      } else {\n        setStyleAttribute(bar, {\n          'left': 'auto',\n          'right': 'auto'\n        });\n      }\n    }\n\n    if (!isNullOrUndefined(this.bdrLine) && !trg.classList.contains(CLS_TB_POPUP)) {\n      this.bdrLine.classList.remove(CLS_HIDDEN$1);\n    }\n  }\n\n  setActive(value, skipDataBind = false, isInteracted = false) {\n    this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n    const trg = this.tbItem[value];\n\n    if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\n      return;\n    }\n\n    if (value >= 0 && !skipDataBind) {\n      this.allowServerDataBinding = false;\n      this.setProperties({\n        selectedItem: value\n      }, true);\n      this.allowServerDataBinding = true;\n\n      if (!this.initRender) {\n        this.serverDataBind();\n      }\n    }\n\n    if (trg.classList.contains(CLS_ACTIVE$1)) {\n      this.setActiveBorder();\n      return;\n    }\n\n    if (!this.isTemplate) {\n      const prev = this.tbItem[this.prevIndex];\n\n      if (!isNullOrUndefined(prev)) {\n        prev.removeAttribute('aria-controls');\n      }\n\n      attributes(trg, {\n        'aria-controls': CLS_CONTENT$1 + this.tabId + '_' + value\n      });\n    }\n\n    const id = trg.id;\n    this.removeActiveClass();\n    trg.classList.add(CLS_ACTIVE$1);\n    this.tbItem[this.prevIndex].setAttribute('aria-selected', 'false');\n    trg.setAttribute('aria-selected', 'true');\n    const no = Number(this.extIndex(id));\n\n    if (isNullOrUndefined(this.prevActiveEle)) {\n      this.prevActiveEle = CLS_CONTENT$1 + this.tabId + '_' + no;\n    }\n\n    attributes(this.element, {\n      'aria-activedescendant': id\n    });\n\n    if (this.isTemplate) {\n      if (select('.' + CLS_CONTENT$1, this.element).children.length > 0) {\n        const trg = this.findEle(select('.' + CLS_CONTENT$1, this.element).children, CLS_CONTENT$1 + this.tabId + '_' + no);\n\n        if (!isNullOrUndefined(trg)) {\n          trg.classList.add(CLS_ACTIVE$1);\n        }\n\n        this.triggerAnimation(id, this.enableAnimation);\n      }\n    } else {\n      this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT$1, this.element);\n      const item = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n      if (isNullOrUndefined(item)) {\n        this.cntEle.appendChild(this.createElement('div', {\n          id: CLS_CONTENT$1 + this.tabId + '_' + this.extIndex(id),\n          className: CLS_ITEM$2 + ' ' + CLS_ACTIVE$1,\n          attrs: {\n            role: 'tabpanel',\n            'aria-labelledby': CLS_ITEM$2 + this.tabId + '_' + this.extIndex(id)\n          }\n        }));\n        const eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));\n        const itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, id);\n        this.getContent(eleTrg, this.items[itemIndex].content, 'render', itemIndex);\n      } else {\n        item.classList.add(CLS_ACTIVE$1);\n      }\n\n      this.triggerAnimation(id, this.enableAnimation);\n    }\n\n    this.setActiveBorder();\n    this.refreshItemVisibility(trg);\n\n    if (!this.initRender && !skipDataBind) {\n      trg.firstElementChild.focus();\n      const eventArg = {\n        previousItem: this.prevItem,\n        previousIndex: this.prevIndex,\n        selectedItem: trg,\n        selectedIndex: value,\n        selectedContent: select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.selectingID, this.content),\n        isSwiped: this.isSwipeed,\n        isInteracted: isInteracted\n      };\n      this.trigger('selected', eventArg);\n    }\n  }\n\n  setItems(items) {\n    this.isReplace = true;\n    this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n    this.tbObj.items = this.parseObject(items, 0);\n    this.tbObj.dataBind();\n    this.isReplace = false;\n  }\n\n  setRTL(value) {\n    this.tbObj.enableRtl = value;\n    this.tbObj.dataBind();\n    this.setCssClass(this.element, CLS_RTL$4, value);\n    this.refreshActiveBorder();\n  }\n\n  refreshActiveBorder() {\n    if (!isNullOrUndefined(this.bdrLine)) {\n      this.bdrLine.classList.add(CLS_HIDDEN$1);\n    }\n\n    this.setActiveBorder();\n  }\n\n  showPopup(config) {\n    const tbPop = select('.e-popup.e-toolbar-pop', this.hdrEle);\n\n    if (tbPop.classList.contains('e-popup-close')) {\n      const tbPopObj = tbPop && tbPop.ej2_instances[0];\n      tbPopObj.position.X = this.headerPlacement === 'Left' ? 'left' : 'right';\n      tbPopObj.dataBind();\n      tbPopObj.show(config);\n    }\n  }\n\n  bindDraggable() {\n    if (this.allowDragAndDrop) {\n      const tabHeader = this.element.querySelector('.' + CLS_HEADER$1);\n\n      if (tabHeader) {\n        const items = tabHeader.querySelectorAll('.' + CLS_TB_ITEM);\n        items.forEach(element => {\n          this.initializeDrag(element);\n        });\n      }\n    }\n  }\n\n  wireEvents() {\n    this.bindDraggable();\n    window.addEventListener('resize', this.resizeContext);\n    EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n    EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n\n    if (!isNullOrUndefined(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n\n    this.keyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyHandler.bind(this),\n      keyConfigs: this.keyConfigs\n    });\n    this.tabKeyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyHandler.bind(this),\n      keyConfigs: {\n        openPopup: 'shift+f10',\n        tab: 'tab',\n        shiftTab: 'shift+tab'\n      },\n      eventName: 'keydown'\n    });\n  }\n\n  unWireEvents() {\n    if (!isNullOrUndefined(this.keyModule)) {\n      this.keyModule.destroy();\n    }\n\n    if (!isNullOrUndefined(this.tabKeyModule)) {\n      this.tabKeyModule.destroy();\n    }\n\n    if (!isNullOrUndefined(this.cntEle) && !isNullOrUndefined(this.touchModule)) {\n      this.touchModule.destroy();\n      this.touchModule = null;\n    }\n\n    window.removeEventListener('resize', this.resizeContext);\n    EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n    EventHandler.remove(this.element, 'keydown', this.spaceKeyDown);\n    this.element.classList.remove(CLS_RTL$4);\n    this.element.classList.remove(CLS_FOCUS);\n  }\n\n  clickHandler(args) {\n    this.element.classList.remove(CLS_FOCUS);\n    const trg = args.originalEvent.target;\n    const trgParent = closest(trg, '.' + CLS_TB_ITEM);\n    const trgIndex = this.getEleIndex(trgParent);\n\n    if (trg.classList.contains(CLS_ICON_CLOSE)) {\n      this.removeTab(trgIndex);\n    } else if (this.isVertical() && closest(trg, '.' + CLS_HOR_NAV)) {\n      this.showPopup(this.show);\n    } else {\n      this.isPopup = false;\n\n      if (!isNullOrUndefined(trgParent) && (trgIndex !== this.selectedItem || trgIndex !== this.prevIndex)) {\n        this.selectTab(trgIndex, args.originalEvent, true);\n      }\n    }\n  }\n\n  swipeHandler(e) {\n    if (e.velocity < 3 && isNullOrUndefined(e.originalEvent.changedTouches)) {\n      return;\n    }\n\n    if (this.isNested) {\n      this.element.setAttribute('data-swipe', 'true');\n    }\n\n    const nestedTab = this.element.querySelector('[data-swipe=\"true\"]');\n\n    if (nestedTab) {\n      nestedTab.removeAttribute('data-swipe');\n      return;\n    }\n\n    this.isSwipeed = true;\n\n    if (e.swipeDirection === 'Right' && this.selectedItem !== 0) {\n      for (let k = this.selectedItem - 1; k >= 0; k--) {\n        if (!this.tbItem[k].classList.contains(CLS_HIDDEN$1)) {\n          this.selectTab(k, null, true);\n          break;\n        }\n      }\n    } else if (e.swipeDirection === 'Left' && this.selectedItem !== selectAll('.' + CLS_TB_ITEM, this.element).length - 1) {\n      for (let i = this.selectedItem + 1; i < this.tbItem.length; i++) {\n        if (!this.tbItem[i].classList.contains(CLS_HIDDEN$1)) {\n          this.selectTab(i, null, true);\n          break;\n        }\n      }\n    }\n\n    this.isSwipeed = false;\n  }\n\n  spaceKeyDown(e) {\n    if (e.keyCode === 32 && e.which === 32 || e.keyCode === 35 && e.which === 35) {\n      const clstHead = closest(e.target, '.' + CLS_HEADER$1);\n\n      if (!isNullOrUndefined(clstHead)) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  keyHandler(e) {\n    if (this.element.classList.contains(CLS_DISABLE$4)) {\n      return;\n    }\n\n    this.element.classList.add(CLS_FOCUS);\n    const trg = e.target;\n    const tabHeader = this.getTabHeader();\n    const actEle = select('.' + CLS_ACTIVE$1, tabHeader);\n    this.popEle = select('.' + CLS_TB_POP, tabHeader);\n\n    if (!isNullOrUndefined(this.popEle)) {\n      this.popObj = this.popEle.ej2_instances[0];\n    }\n\n    const item = closest(document.activeElement, '.' + CLS_TB_ITEM);\n    const trgParent = closest(trg, '.' + CLS_TB_ITEM);\n\n    switch (e.action) {\n      case 'space':\n      case 'enter':\n        if (trg.parentElement.classList.contains(CLS_DISABLE$4)) {\n          return;\n        }\n\n        if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n          this.showPopup(this.show);\n          break;\n        }\n\n        this.keyPressed(trg);\n        break;\n\n      case 'tab':\n      case 'shiftTab':\n        if (trg.classList.contains(CLS_WRAP) && closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE$1) === false) {\n          trg.setAttribute('tabindex', '-1');\n        }\n\n        if (this.popObj && isVisible(this.popObj.element)) {\n          this.popObj.hide(this.hide);\n        }\n\n        actEle.children.item(0).setAttribute('tabindex', '0');\n        break;\n\n      case 'moveLeft':\n      case 'moveRight':\n        if (!isNullOrUndefined(item)) {\n          this.refreshItemVisibility(item);\n        }\n\n        break;\n\n      case 'openPopup':\n        e.preventDefault();\n\n        if (!isNullOrUndefined(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n          this.popObj.show(this.show);\n        }\n\n        break;\n\n      case 'delete':\n        if (this.showCloseButton === true && !isNullOrUndefined(trgParent)) {\n          const nxtSib = trgParent.nextSibling;\n\n          if (!isNullOrUndefined(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n            nxtSib.firstElementChild.focus();\n          }\n\n          this.removeTab(this.getEleIndex(trgParent));\n        }\n\n        this.setActiveBorder();\n        break;\n    }\n  }\n  /**\n   * Refresh the active tab border\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  refreshActiveTabBorder() {\n    const activeEle = select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE$1, this.element);\n\n    if (!isNullOrUndefined(activeEle) && this.reorderActiveTab) {\n      this.select(this.getEleIndex(activeEle));\n    }\n\n    this.refreshActiveBorder();\n  }\n\n  refreshItemVisibility(target) {\n    const scrCnt = select('.' + this.scrCntClass, this.tbItems);\n\n    if (!this.isVertical() && !isNullOrUndefined(scrCnt)) {\n      const scrBar = select('.e-hscroll-bar', this.tbItems);\n      const scrStart = scrBar.scrollLeft;\n      const scrEnd = scrStart + scrBar.offsetWidth;\n      const eleStart = target.offsetLeft;\n      const eleWidth = target.offsetWidth;\n      const eleEnd = target.offsetLeft + target.offsetWidth;\n\n      if (scrStart < eleStart && scrEnd < eleEnd) {\n        const eleViewRange = scrEnd - eleStart;\n        scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n      } else {\n        if (scrStart > eleStart && scrEnd > eleEnd) {\n          const eleViewRange = eleEnd - scrStart;\n          scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n        }\n      }\n    } else {\n      return;\n    }\n  }\n\n  hoverHandler(e) {\n    const trg = e.target;\n\n    if (!isNullOrUndefined(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\n      trg.setAttribute('title', new L10n('tab', {\n        closeButtonTitle: this.title\n      }, this.locale).getConstant('closeButtonTitle'));\n    }\n  }\n\n  evalOnPropertyChangeItems(newProp, oldProp) {\n    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n      const changedProp = Object.keys(newProp.items);\n\n      for (let i = 0; i < changedProp.length; i++) {\n        const index = parseInt(Object.keys(newProp.items)[i], 10);\n        const properties = Object.keys(newProp.items[index]);\n\n        for (let j = 0; j < properties.length; j++) {\n          const oldVal = Object(oldProp.items[index])[properties[j]];\n          const newVal = Object(newProp.items[index])[properties[j]];\n          const hdr = this.element.querySelectorAll('.' + CLS_TB_ITEM)[index];\n          let itemIndex;\n\n          if (hdr && !isNullOrUndefined(hdr.id) && hdr.id !== '') {\n            const num = hdr.id.lastIndexOf('_');\n            itemIndex = parseInt(hdr.id.substring(num + 1), 10);\n          } else {\n            itemIndex = index;\n          }\n\n          const hdrItem = select('.' + CLS_TB_ITEMS + ' #' + CLS_ITEM$2 + this.tabId + '_' + itemIndex, this.element);\n          const cntItem = select('.' + CLS_CONTENT$1 + ' #' + CLS_CONTENT$1 + this.tabId + '_' + itemIndex, this.element);\n\n          if (properties[j] === 'header' || properties[j] === 'headerTemplate') {\n            const icon = isNullOrUndefined(this.items[index].header) || isNullOrUndefined(this.items[index].header.iconCss) ? '' : this.items[index].header.iconCss;\n            const textVal = this.items[index].headerTemplate || this.items[index].header.text;\n\n            if (textVal === '' && icon === '') {\n              this.removeTab(index);\n            } else {\n              this.tbId = hdr.id;\n              const arr = [];\n              arr.push(this.items[index]);\n              this.items.splice(index, 1);\n              this.itemIndexArray.splice(index, 1);\n              this.tbObj.items.splice(index, 1);\n              const isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN$1);\n              detach(hdrItem);\n              this.isReplace = true;\n              this.addTab(arr, index);\n\n              if (isHiddenEle) {\n                this.hideTab(index);\n              }\n\n              this.isReplace = false;\n            }\n          }\n\n          if (properties[j] === 'content' && !isNullOrUndefined(cntItem)) {\n            const strVal = typeof newVal === 'string' || isNullOrUndefined(newVal.innerHTML);\n\n            if (strVal && (newVal[0] === '.' || newVal[0] === '#') && newVal.length) {\n              const eleVal = document.querySelector(newVal);\n              cntItem.appendChild(eleVal);\n              eleVal.style.display = '';\n            } else if (newVal === '' && oldVal[0] === '#') {\n              document.body.appendChild(this.element.querySelector(oldVal)).style.display = 'none';\n              cntItem.innerHTML = newVal;\n            } else if (this.isReact) {\n              cntItem.innerHTML = '';\n              this.templateCompile(cntItem, newVal, index);\n            } else if (typeof newVal !== 'function') {\n              cntItem.innerHTML = newVal;\n            }\n          }\n\n          if (properties[j] === 'cssClass') {\n            if (!isNullOrUndefined(hdrItem)) {\n              hdrItem.classList.remove(oldVal);\n              hdrItem.classList.add(newVal);\n            }\n\n            if (!isNullOrUndefined(cntItem)) {\n              cntItem.classList.remove(oldVal);\n              cntItem.classList.add(newVal);\n            }\n          }\n\n          if (properties[j] === 'disabled') {\n            this.enableTab(index, newVal === true ? false : true);\n          }\n\n          if (properties[j] === 'visible') {\n            this.hideTab(index, newVal === true ? false : true);\n          }\n        }\n      }\n    } else {\n      this.lastIndex = 0;\n\n      if (isNullOrUndefined(this.tbObj)) {\n        this.reRenderItems();\n      } else {\n        if (this.isReact || this.isAngular) {\n          this.clearTemplate();\n        }\n\n        this.setItems(newProp.items);\n\n        if (this.templateEle.length > 0) {\n          this.expTemplateContent();\n        }\n\n        this.templateEle = [];\n        const selectElement = select('.' + CLS_TAB + ' > .' + CLS_CONTENT$1, this.element);\n\n        while (selectElement.firstElementChild) {\n          detach(selectElement.firstElementChild);\n        }\n\n        this.select(this.selectedItem);\n        this.draggableItems = [];\n        this.bindDraggable();\n      }\n    }\n  }\n\n  initializeDrag(target) {\n    let dragObj = new Draggable(target, {\n      dragArea: this.dragArea,\n      dragTarget: '.' + CLS_TB_ITEM,\n      clone: true,\n      helper: this.helper.bind(this),\n      dragStart: this.itemDragStart.bind(this),\n      drag: e => {\n        let dragIndex = this.getEleIndex(this.dragItem);\n        let dropIndex;\n        let dropItem;\n        let dragArgs = {\n          draggedItem: this.dragItem,\n          event: e.event,\n          target: e.target,\n          droppedItem: e.target.closest('.' + CLS_TB_ITEM),\n          clonedElement: this.cloneElement,\n          index: dragIndex\n        };\n\n        if (!isNullOrUndefined(e.target.closest('.' + CLS_TAB)) && !e.target.closest('.' + CLS_TAB).isEqualNode(this.element) && this.dragArea !== '.' + CLS_HEADER$1) {\n          this.trigger('dragging', dragArgs);\n        } else {\n          if (!e.target.closest(this.dragArea) && this.overflowMode !== 'Popup') {\n            document.body.style.cursor = 'not-allowed';\n            addClass([this.cloneElement], CLS_HIDDEN$1);\n\n            if (this.dragItem.classList.contains(CLS_HIDDEN$1)) {\n              removeClass([this.dragItem], CLS_HIDDEN$1);\n            }\n\n            this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n          } else {\n            document.body.style.cursor = '';\n            this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n\n            if (this.cloneElement.classList.contains(CLS_HIDDEN$1)) {\n              removeClass([this.cloneElement], CLS_HIDDEN$1);\n            }\n          }\n\n          if (this.overflowMode === 'Scrollable' && !isNullOrUndefined(this.element.querySelector('.e-hscroll'))) {\n            let scrollRightNavEle = this.element.querySelector('.e-scroll-right-nav');\n            let scrollLeftNavEle = this.element.querySelector('.e-scroll-left-nav');\n            let hscrollBar = this.element.querySelector('.e-hscroll-bar');\n\n            if (!isNullOrUndefined(scrollRightNavEle) && Math.abs(scrollRightNavEle.offsetWidth / 2 + scrollRightNavEle.offsetLeft) > this.cloneElement.offsetLeft + this.cloneElement.offsetWidth) {\n              hscrollBar.scrollLeft -= 10;\n            }\n\n            if (!isNullOrUndefined(scrollLeftNavEle) && Math.abs(scrollLeftNavEle.offsetLeft + scrollLeftNavEle.offsetWidth - this.cloneElement.offsetLeft) > scrollLeftNavEle.offsetWidth / 2) {\n              hscrollBar.scrollLeft += 10;\n            }\n          }\n\n          this.cloneElement.style.pointerEvents = 'none';\n          dropItem = closest(e.target, '.' + CLS_TB_ITEM + '.e-draggable');\n          let scrollContentWidth = 0;\n\n          if (this.overflowMode === 'Scrollable' && !isNullOrUndefined(this.element.querySelector('.e-hscroll'))) {\n            scrollContentWidth = this.element.querySelector('.e-hscroll-content').offsetWidth;\n          }\n\n          if (dropItem != null && !dropItem.isSameNode(this.dragItem) && dropItem.closest('.' + CLS_TAB).isSameNode(this.dragItem.closest('.' + CLS_TAB))) {\n            dropIndex = this.getEleIndex(dropItem);\n\n            if (dropIndex < dragIndex && Math.abs(dropItem.offsetLeft + dropItem.offsetWidth - this.cloneElement.offsetLeft) > dropItem.offsetWidth / 2) {\n              this.dragAction(dropItem, dragIndex, dropIndex);\n            }\n\n            if (dropIndex > dragIndex && Math.abs(dropItem.offsetWidth / 2) + dropItem.offsetLeft - scrollContentWidth < this.cloneElement.offsetLeft + this.cloneElement.offsetWidth) {\n              this.dragAction(dropItem, dragIndex, dropIndex);\n            }\n          }\n\n          this.droppedIndex = this.getEleIndex(this.dragItem);\n          this.trigger('dragging', dragArgs);\n        }\n      },\n      dragStop: this.itemDragStop.bind(this)\n    });\n    this.draggableItems.push(dragObj);\n  }\n\n  helper(e) {\n    this.cloneElement = this.createElement('div');\n\n    if (e.element) {\n      this.cloneElement = e.element.cloneNode(true);\n      addClass([this.cloneElement], 'e-tab-clone-element');\n\n      if (this.element.querySelector('.' + CLS_HEADER$1).classList.contains(CLS_CLOSE_SHOW)) {\n        addClass([this.cloneElement], CLS_CLOSE_SHOW);\n      }\n\n      removeClass([this.cloneElement.querySelector('.' + CLS_WRAP)], 'e-ripple');\n\n      if (!isNullOrUndefined(this.cloneElement.querySelector('.e-ripple-element'))) {\n        remove(this.cloneElement.querySelector('.e-ripple-element'));\n      }\n\n      document.body.appendChild(this.cloneElement);\n    }\n\n    return this.cloneElement;\n  }\n\n  itemDragStart(e) {\n    this.draggingItems = this.items.map(x => x);\n    this.dragItem = e.element;\n    let dragArgs = {\n      draggedItem: e.element,\n      event: e.event,\n      target: e.target,\n      droppedItem: null,\n      index: this.getEleIndex(this.dragItem),\n      clonedElement: this.cloneElement,\n      cancel: false\n    };\n    this.trigger('onDragStart', dragArgs, tabitemDragArgs => {\n      if (tabitemDragArgs.cancel) {\n        detach(this.cloneElement);\n      } else {\n        this.removeActiveClass();\n        addClass([this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN$1);\n        this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n      }\n    });\n  }\n\n  dragAction(dropItem, dragsIndex, dropIndex) {\n    if (this.items.length > 0) {\n      let item = this.draggingItems[dragsIndex];\n      this.draggingItems.splice(dragsIndex, 1);\n      this.draggingItems.splice(dropIndex, 0, item);\n    }\n\n    if (this.overflowMode === 'MultiRow') {\n      dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\n    }\n\n    if (dragsIndex > dropIndex) {\n      if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {\n        if (this.overflowMode === 'Extended') {\n          if (dropItem.isSameNode(dropItem.parentElement.lastChild)) {\n            let popupContainer = this.dragItem.parentNode;\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n            popupContainer.insertBefore(dropItem.parentElement.lastChild, popupContainer.childNodes[0]);\n          } else {\n            this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n          }\n        } else {\n          let lastEle = dropItem.parentElement.lastChild;\n\n          if (dropItem.isSameNode(lastEle)) {\n            let popupContainer = this.dragItem.parentNode;\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n            popupContainer.insertBefore(lastEle, popupContainer.childNodes[0]);\n          } else {\n            this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n          }\n        }\n      } else {\n        this.dragItem.parentNode.insertBefore(this.dragItem, dropItem);\n      }\n    }\n\n    if (dragsIndex < dropIndex) {\n      if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {\n        if (this.overflowMode === 'Extended') {\n          this.dragItem.parentElement.appendChild(dropItem.parentElement.firstElementChild);\n          dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextSibling);\n        } else {\n          this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n          dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n        }\n      } else {\n        this.dragItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\n      }\n    }\n  }\n\n  itemDragStop(e) {\n    detach(this.cloneElement);\n    this.cloneElement = null;\n    this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n    document.body.style.cursor = '';\n    let dragStopArgs = {\n      draggedItem: this.dragItem,\n      event: e.event,\n      target: e.target,\n      droppedItem: this.tbItem[this.droppedIndex],\n      clonedElement: null,\n      index: this.droppedIndex,\n      cancel: false\n    };\n    this.trigger('dragged', dragStopArgs, tabItemDropArgs => {\n      if (tabItemDropArgs.cancel) {\n        this.refresh();\n      } else {\n        if (this.items.length > 0 && this.draggingItems.length > 0) {\n          this.items = this.draggingItems;\n          this.selectedItem = this.droppedIndex;\n          this.refresh();\n        } else {\n          this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = '';\n          removeClass([this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN$1);\n          this.selectTab(this.droppedIndex, null, true);\n        }\n      }\n    });\n    this.dragItem = null;\n  }\n  /**\n   * Enables or disables the specified Tab item. On passing value as `false`, the item will be disabled.\n   *\n   * @param {number} index - Index value of target Tab item.\n   * @param {boolean} value - Boolean value that determines whether the command should be enabled or disabled.\n   * By default, isEnable is true.\n   * @returns {void}.\n   */\n\n\n  enableTab(index, value) {\n    const tbItems = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNullOrUndefined(tbItems)) {\n      return;\n    }\n\n    if (value === true) {\n      tbItems.classList.remove(CLS_DISABLE$4, CLS_OVERLAY$2);\n      tbItems.firstElementChild.setAttribute('tabindex', '-1');\n    } else {\n      tbItems.classList.add(CLS_DISABLE$4, CLS_OVERLAY$2);\n      tbItems.firstElementChild.removeAttribute('tabindex');\n\n      if (tbItems.classList.contains(CLS_ACTIVE$1)) {\n        this.select(index + 1);\n      }\n    }\n\n    if (!isNullOrUndefined(this.items[index])) {\n      this.items[index].disabled = !value;\n      this.dataBind();\n    }\n\n    tbItems.setAttribute('aria-disabled', value === true ? 'false' : 'true');\n  }\n  /**\n   * Adds new items to the Tab that accepts an array as Tab items.\n   *\n   * @param {TabItemModel[]} items - An array of item that is added to the Tab.\n   * @param {number} index - Number value that determines where the items to be added. By default, index is 0.\n   * @returns {void}.\n   */\n\n\n  addTab(items, index) {\n    const addArgs = {\n      addedItems: items,\n      cancel: false\n    };\n\n    if (!this.isReplace) {\n      this.trigger('adding', addArgs, tabAddingArgs => {\n        if (!tabAddingArgs.cancel) {\n          this.addingTabContent(items, index);\n        }\n      });\n    } else {\n      this.addingTabContent(items, index);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n  addingTabContent(items, index) {\n    let lastEleIndex = 0;\n    this.hdrEle = select('.' + CLS_HEADER$1, this.element);\n\n    if (isNullOrUndefined(this.hdrEle)) {\n      this.items = items;\n      this.reRenderItems();\n      this.bindDraggable();\n    } else {\n      const itemsCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\n\n      if (itemsCount !== 0) {\n        lastEleIndex = this.lastIndex + 1;\n      }\n\n      if (isNullOrUndefined(index)) {\n        index = itemsCount - 1;\n      }\n\n      if (itemsCount < index || index < 0 || isNaN(index)) {\n        return;\n      }\n\n      if (itemsCount === 0 && !isNullOrUndefined(this.hdrEle)) {\n        this.hdrEle.style.display = '';\n      }\n\n      if (!isNullOrUndefined(this.bdrLine)) {\n        this.bdrLine.classList.add(CLS_HIDDEN$1);\n      }\n\n      this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n      this.isAdd = true;\n      const tabItems = this.parseObject(items, index);\n      this.isAdd = false;\n      let i = 0;\n      let textValue;\n      items.forEach((item, place) => {\n        textValue = item.headerTemplate || item.header.text;\n\n        if (!(isNullOrUndefined(item.headerTemplate || item.header) || isNullOrUndefined(textValue) || textValue.length === 0 && !isNullOrUndefined(item.header) && isNullOrUndefined(item.header.iconCss))) {\n          if (tabItems[place]) {\n            if (isNullOrUndefined(item.id)) {\n              item.id = TABITEMPREFIX + (lastEleIndex + place).toString();\n            }\n\n            tabItems[place].htmlAttributes['data-id'] = item.id;\n          }\n\n          this.items.splice(index + i, 0, item);\n          i++;\n        }\n\n        if (this.isTemplate && !isNullOrUndefined(item.header) && !isNullOrUndefined(item.header.text)) {\n          const no = lastEleIndex + place;\n          const ele = this.createElement('div', {\n            id: CLS_CONTENT$1 + this.tabId + '_' + no,\n            className: CLS_ITEM$2,\n            attrs: {\n              role: 'tabpanel',\n              'aria-labelledby': CLS_ITEM$2 + '_' + no\n            }\n          });\n          this.cntEle.insertBefore(ele, this.cntEle.children[index + place]);\n          const eleTrg = this.getTrgContent(this.cntEle, no.toString());\n          this.getContent(eleTrg, item.content, 'render', index);\n        }\n      });\n      this.tbObj.addItems(tabItems, index);\n\n      if (!this.isReplace) {\n        this.trigger('added', {\n          addedItems: items\n        });\n      }\n\n      if (this.selectedItem === index) {\n        this.select(index);\n      } else {\n        this.setActiveBorder();\n        this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n      }\n\n      this.bindDraggable();\n    }\n  }\n  /**\n   * Removes the items in the Tab from the specified index.\n   *\n   * @param {number} index - Index of target item that is going to be removed.\n   * @returns {void}.\n   */\n\n\n  removeTab(index) {\n    const trg = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNullOrUndefined(trg)) {\n      return;\n    }\n\n    const removeArgs = {\n      removedItem: trg,\n      removedIndex: index,\n      cancel: false\n    };\n    this.trigger('removing', removeArgs, tabRemovingArgs => {\n      if (!tabRemovingArgs.cancel) {\n        this.tbObj.removeItems(index);\n\n        if (this.allowDragAndDrop && index !== Array.prototype.indexOf.call(this.itemIndexArray, trg.id)) {\n          index = Array.prototype.indexOf.call(this.itemIndexArray, trg.id);\n        }\n\n        const targetEleIndex = this.itemIndexArray.indexOf(trg.id);\n        this.items.splice(targetEleIndex, 1);\n        this.itemIndexArray.splice(targetEleIndex, 1);\n        this.refreshActiveBorder();\n        const cntTrg = select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.extIndex(trg.id), select('.' + CLS_CONTENT$1, this.element));\n\n        if (!isNullOrUndefined(cntTrg)) {\n          detach(cntTrg);\n        }\n\n        this.trigger('removed', tabRemovingArgs);\n\n        if (this.draggableItems && this.draggableItems.length > 0) {\n          this.draggableItems[index].destroy();\n          this.draggableItems[index] = null;\n          this.draggableItems.splice(index, 1);\n        }\n\n        if (trg.classList.contains(CLS_ACTIVE$1)) {\n          index = index > selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element).length - 1 ? index - 1 : index;\n          this.enableAnimation = false;\n          this.selectedItem = index;\n          this.select(index);\n        } else if (index !== this.selectedItem) {\n          if (index < this.selectedItem) {\n            index = this.itemIndexArray.indexOf(this.tbItem[this.selectedItem].id);\n            this.setProperties({\n              selectedItem: index > -1 ? index : this.selectedItem\n            }, true);\n            this.prevIndex = this.selectedItem;\n          }\n\n          this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n        }\n\n        if (selectAll('.' + CLS_TB_ITEM, this.element).length === 0) {\n          this.hdrEle.style.display = 'none';\n        }\n\n        this.enableAnimation = true;\n      }\n    });\n  }\n  /**\n   * Shows or hides the Tab that is in the specified index.\n   *\n   * @param {number} index - Index value of target item.\n   * @param {boolean} value - Based on this Boolean value, item will be hide (false) or show (true). By default, value is true.\n   * @returns {void}.\n   */\n\n\n  hideTab(index, value) {\n    let items;\n    const item = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNullOrUndefined(item)) {\n      return;\n    }\n\n    if (isNullOrUndefined(value)) {\n      value = true;\n    }\n\n    this.bdrLine.classList.add(CLS_HIDDEN$1);\n\n    if (value === true) {\n      item.classList.add(CLS_HIDDEN$1);\n      items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN$1 + ')', this.tbItems);\n\n      if (items.length !== 0 && item.classList.contains(CLS_ACTIVE$1)) {\n        if (index !== 0) {\n          for (let i = index - 1; i >= 0; i--) {\n            if (!this.tbItem[i].classList.contains(CLS_HIDDEN$1)) {\n              this.select(i);\n              break;\n            } else if (i === 0) {\n              for (let k = index + 1; k < this.tbItem.length; k++) {\n                if (!this.tbItem[k].classList.contains(CLS_HIDDEN$1)) {\n                  this.select(k);\n                  break;\n                }\n              }\n            }\n          }\n        } else {\n          for (let k = index + 1; k < this.tbItem.length; k++) {\n            if (!this.tbItem[k].classList.contains(CLS_HIDDEN$1)) {\n              this.select(k);\n              break;\n            }\n          }\n        }\n      } else if (items.length === 0) {\n        this.element.classList.add(CLS_HIDDEN$1);\n      }\n    } else {\n      this.element.classList.remove(CLS_HIDDEN$1);\n      items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN$1 + ')', this.tbItems);\n      item.classList.remove(CLS_HIDDEN$1);\n\n      if (items.length === 0) {\n        this.select(index);\n      }\n    }\n\n    this.setActiveBorder();\n    item.setAttribute('aria-hidden', '' + value);\n\n    if (this.overflowMode === 'Popup' && this.tbObj) {\n      this.tbObj.refreshOverflow();\n    }\n  }\n\n  selectTab(args, event = null, isInteracted = false) {\n    this.isInteracted = isInteracted;\n    this.select(args, event);\n  }\n  /**\n   * Specifies the index or HTMLElement to select an item from the Tab.\n   *\n   * @param {number | HTMLElement} args - Index or DOM element is used for selecting an item from the Tab.\n   * @param {Event} event - An event which takes place in DOM.\n   * @returns {void}\n   */\n\n\n  select(args, event) {\n    const tabHeader = this.getTabHeader();\n    this.tbItems = select('.' + CLS_TB_ITEMS, tabHeader);\n    this.tbItem = selectAll('.' + CLS_TB_ITEM, tabHeader);\n    this.content = select('.' + CLS_CONTENT$1, this.element);\n    this.prevItem = this.tbItem[this.prevIndex];\n\n    if (isNullOrUndefined(this.selectedItem) || this.selectedItem < 0 || this.tbItem.length <= this.selectedItem || isNaN(this.selectedItem)) {\n      this.selectedItem = 0;\n    } else {\n      this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id);\n    }\n\n    const trg = this.tbItem[args];\n\n    if (isNullOrUndefined(trg)) {\n      this.selectedID = '0';\n    } else {\n      this.selectingID = this.extIndex(trg.id);\n    }\n\n    if (!isNullOrUndefined(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE$4)) {\n      this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n    }\n\n    const eventArg = {\n      event: event,\n      previousItem: this.prevItem,\n      previousIndex: this.prevIndex,\n      selectedItem: this.tbItem[this.selectedItem],\n      selectedIndex: this.selectedItem,\n      selectedContent: !isNullOrUndefined(this.content) ? select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.selectedID, this.content) : null,\n      selectingItem: trg,\n      selectingIndex: args,\n      selectingContent: !isNullOrUndefined(this.content) ? select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.selectingID, this.content) : null,\n      isSwiped: this.isSwipeed,\n      isInteracted: this.isInteracted,\n      cancel: false\n    };\n\n    if (!this.initRender) {\n      this.trigger('selecting', eventArg, selectArgs => {\n        if (!selectArgs.cancel) {\n          this.selectingContent(args, this.isInteracted);\n        }\n      });\n    } else {\n      this.selectingContent(args, this.isInteracted);\n    }\n\n    this.isInteracted = false;\n  }\n\n  selectingContent(args, isInteracted) {\n    if (typeof args === 'number') {\n      if (!isNullOrUndefined(this.tbItem[args]) && (this.tbItem[args].classList.contains(CLS_DISABLE$4) || this.tbItem[args].classList.contains(CLS_HIDDEN$1))) {\n        for (let i = args + 1; i < this.items.length; i++) {\n          if (this.items[i].disabled === false && this.items[i].visible === true) {\n            args = i;\n            break;\n          } else {\n            args = 0;\n          }\n        }\n      }\n\n      if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n        this.prevIndex = this.selectedItem;\n        this.prevItem = this.tbItem[this.prevIndex];\n\n        if (this.tbItem[args].classList.contains(CLS_TB_POPUP) && this.reorderActiveTab) {\n          this.setActive(this.popupHandler(this.tbItem[args]), null, isInteracted);\n\n          if (!isNullOrUndefined(this.items) && this.items.length > 0 && this.allowDragAndDrop) {\n            this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n            let item = this.items[args];\n            this.items.splice(args, 1);\n            this.items.splice(this.tbItem.length - 1, 0, item);\n            let itemId = this.itemIndexArray[args];\n            this.itemIndexArray.splice(args, 1);\n            this.itemIndexArray.splice(this.tbItem.length - 1, 0, itemId);\n          }\n        } else {\n          this.setActive(args, null, isInteracted);\n        }\n      } else {\n        this.setActive(0, null, isInteracted);\n      }\n    } else if (args instanceof HTMLElement) {\n      this.setActive(this.getEleIndex(args), null, isInteracted);\n    }\n  }\n  /**\n   * Gets the item index from the Tab.\n   *\n   * @param  {string} tabItemId - Item ID is used for getting index from the Tab.\n   * @returns {number} - It returns item index.\n   */\n\n\n  getItemIndex(tabItemId) {\n    let tabIndex;\n\n    for (let i = 0; i < this.tbItem.length; i++) {\n      const value = this.tbItem[i].getAttribute('data-id');\n\n      if (tabItemId === value) {\n        tabIndex = i;\n        break;\n      }\n    }\n\n    return tabIndex;\n  }\n  /**\n   * Specifies the value to disable/enable the Tab component.\n   * When set to `true`, the component will be disabled.\n   *\n   * @param  {boolean} value - Based on this Boolean value, Tab will be enabled (false) or disabled (true).\n   * @returns {void}.\n   */\n\n\n  disable(value) {\n    this.setCssClass(this.element, CLS_DISABLE$4, value);\n    this.element.setAttribute('aria-disabled', '' + value);\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - It returns the persisted state.\n   */\n\n\n  getPersistData() {\n    return this.addOnPersist(['selectedItem', 'actEleId']);\n  }\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - It returns the current module name.\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'tab';\n  }\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n   *\n   * @param  {TabModel} newProp - It contains the new value of data.\n   * @param  {TabModel} oldProp - It contains the old value of data.\n   * @returns {void}\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'width':\n          setStyleAttribute(this.element, {\n            width: formatUnit(newProp.width)\n          });\n          break;\n\n        case 'height':\n          setStyleAttribute(this.element, {\n            height: formatUnit(newProp.height)\n          });\n          this.setContentHeight(false);\n          break;\n\n        case 'cssClass':\n          const headerEle = this.element.querySelector('.' + CLS_HEADER$1);\n\n          if (oldProp.cssClass !== '' && !isNullOrUndefined(oldProp.cssClass)) {\n            this.setCssClass(this.element, oldProp.cssClass, false);\n            this.setCssClass(this.element, newProp.cssClass, true);\n\n            if (!isNullOrUndefined(headerEle)) {\n              this.setCssClass(headerEle, oldProp.cssClass, false);\n              this.setCssClass(headerEle, newProp.cssClass, true);\n            }\n          } else {\n            this.setCssClass(this.element, newProp.cssClass, true);\n\n            if (!isNullOrUndefined(headerEle)) {\n              this.setCssClass(headerEle, newProp.cssClass, true);\n            }\n          }\n\n          break;\n\n        case 'items':\n          this.evalOnPropertyChangeItems(newProp, oldProp);\n          break;\n\n        case 'showCloseButton':\n          this.setCloseButton(newProp.showCloseButton);\n          break;\n\n        case 'reorderActiveTab':\n          this.refreshActiveTabBorder();\n          break;\n\n        case 'selectedItem':\n          this.selectedItem = oldProp.selectedItem;\n          this.select(newProp.selectedItem);\n          break;\n\n        case 'headerPlacement':\n          this.changeOrientation(newProp.headerPlacement);\n          break;\n\n        case 'enableRtl':\n          this.setRTL(newProp.enableRtl);\n          break;\n\n        case 'overflowMode':\n          this.tbObj.overflowMode = newProp.overflowMode;\n          this.tbObj.dataBind();\n          this.refreshActiveTabBorder();\n          break;\n\n        case 'heightAdjustMode':\n          this.setContentHeight(false);\n          this.select(this.selectedItem);\n          break;\n\n        case 'scrollStep':\n          if (this.tbObj) {\n            this.tbObj.scrollStep = this.scrollStep;\n          }\n\n          break;\n\n        case 'allowDragAndDrop':\n          this.bindDraggable();\n          break;\n\n        case 'dragArea':\n          if (this.allowDragAndDrop) {\n            this.draggableItems.forEach(item => {\n              item.dragArea = this.dragArea;\n            });\n            this.refresh();\n          }\n\n          break;\n      }\n    }\n  }\n\n  refreshActiveTab() {\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    if (!this.isTemplate) {\n      if (this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1)) {\n        detach(this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1).children[0]);\n        detach(this.element.querySelector('.' + CLS_CONTENT$1).querySelector('.' + CLS_ACTIVE$1).children[0]);\n        const item = this.items[this.selectedItem];\n        const pos = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconPosition) ? '' : item.header.iconPosition;\n        const css = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconCss) ? '' : item.header.iconCss;\n        const text = item.headerTemplate || item.header.text;\n        const txtWrap = this.createElement('div', {\n          className: CLS_TEXT,\n          attrs: {\n            'role': 'presentation'\n          }\n        });\n\n        if (!isNullOrUndefined(text.tagName)) {\n          txtWrap.appendChild(text);\n        } else {\n          this.headerTextCompile(txtWrap, text, this.selectedItem);\n        }\n\n        let tEle;\n        const icon = this.createElement('span', {\n          className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n        });\n        const tConts = this.createElement('div', {\n          className: CLS_TEXT_WRAP\n        });\n        tConts.appendChild(txtWrap);\n\n        if (text !== '' && text !== undefined && css !== '') {\n          if (pos === 'left' || pos === 'top') {\n            tConts.insertBefore(icon, tConts.firstElementChild);\n          } else {\n            tConts.appendChild(icon);\n          }\n\n          tEle = txtWrap;\n          this.isIconAlone = false;\n        } else {\n          tEle = css === '' ? txtWrap : icon;\n\n          if (tEle === icon) {\n            detach(txtWrap);\n            tConts.appendChild(icon);\n            this.isIconAlone = true;\n          }\n        }\n\n        const wrapAtt = item.disabled ? {} : {\n          tabIndex: '-1'\n        };\n        tConts.appendChild(this.btnCls.cloneNode(true));\n        const wraper = this.createElement('div', {\n          className: CLS_WRAP,\n          attrs: wrapAtt\n        });\n        wraper.appendChild(tConts);\n\n        if (pos === 'top' || pos === 'bottom') {\n          this.element.classList.add('e-vertical-icon');\n        }\n\n        this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1).appendChild(wraper);\n        const crElem = this.createElement('div');\n        let cnt = item.content;\n        let eleStr;\n\n        if (typeof cnt === 'string' || isNullOrUndefined(cnt.innerHTML)) {\n          if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n            cnt = SanitizeHtmlHelper.sanitize(cnt);\n          }\n\n          if (cnt[0] === '.' || cnt[0] === '#') {\n            if (document.querySelectorAll(cnt).length) {\n              const eleVal = document.querySelector(cnt);\n              eleStr = eleVal.outerHTML.trim();\n              crElem.appendChild(eleVal);\n              eleVal.style.display = '';\n            } else {\n              this.compileElement(crElem, cnt, 'content', this.selectedItem);\n            }\n          } else {\n            this.compileElement(crElem, cnt, 'content', this.selectedItem);\n          }\n        } else {\n          crElem.appendChild(cnt);\n        }\n\n        if (!isNullOrUndefined(eleStr)) {\n          if (this.templateEle.indexOf(cnt.toString()) === -1) {\n            this.templateEle.push(cnt.toString());\n          }\n        }\n\n        this.element.querySelector('.' + CLS_ITEM$2 + '.' + CLS_ACTIVE$1).appendChild(crElem);\n      }\n    } else {\n      const tabItems = this.element.querySelector('.' + CLS_TB_ITEMS);\n      const element = this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1);\n      const id = element.id;\n      const num = id.indexOf('_');\n      const index = parseInt(id.substring(num + 1), 10);\n      const header = element.innerText;\n      const detachContent = this.element.querySelector('.' + CLS_CONTENT$1).querySelector('.' + CLS_ACTIVE$1).children[0];\n      const mainContents = detachContent.innerHTML;\n      detach(element);\n      detach(detachContent);\n      const attr = {\n        className: CLS_TB_ITEM + ' ' + CLS_TEMPLATE$1 + ' ' + CLS_ACTIVE$1,\n        id: CLS_ITEM$2 + this.tabId + '_' + index,\n        attrs: {\n          role: 'tab',\n          'aria-controls': CLS_CONTENT$1 + this.tabId + '_' + index,\n          'aria-disabled': 'false',\n          'aria-selected': 'true'\n        }\n      };\n      const txtString = this.createElement('span', {\n        className: CLS_TEXT,\n        innerHTML: header,\n        attrs: {\n          'role': 'presentation'\n        }\n      }).outerHTML;\n      const conte = this.createElement('div', {\n        className: CLS_TEXT_WRAP,\n        innerHTML: txtString + this.btnCls.outerHTML\n      }).outerHTML;\n      const wrap = this.createElement('div', {\n        className: CLS_WRAP,\n        innerHTML: conte,\n        attrs: {\n          tabIndex: '-1'\n        }\n      });\n      tabItems.insertBefore(this.createElement('div', attr), tabItems.children[index + 1]);\n      this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1).appendChild(wrap);\n      const crElem = this.createElement('div', {\n        innerHTML: mainContents\n      });\n      this.element.querySelector('.' + CLS_CONTENT$1).querySelector('.' + CLS_ACTIVE$1).appendChild(crElem);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n\n};\n\n__decorate$7([Collection([], TabItem)], Tab.prototype, \"items\", void 0);\n\n__decorate$7([Property('100%')], Tab.prototype, \"width\", void 0);\n\n__decorate$7([Property('auto')], Tab.prototype, \"height\", void 0);\n\n__decorate$7([Property('')], Tab.prototype, \"cssClass\", void 0);\n\n__decorate$7([Property(0)], Tab.prototype, \"selectedItem\", void 0);\n\n__decorate$7([Property('Top')], Tab.prototype, \"headerPlacement\", void 0);\n\n__decorate$7([Property('Content')], Tab.prototype, \"heightAdjustMode\", void 0);\n\n__decorate$7([Property('Scrollable')], Tab.prototype, \"overflowMode\", void 0);\n\n__decorate$7([Property('Dynamic')], Tab.prototype, \"loadOn\", void 0);\n\n__decorate$7([Property(false)], Tab.prototype, \"enablePersistence\", void 0);\n\n__decorate$7([Property(false)], Tab.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$7([Property(false)], Tab.prototype, \"showCloseButton\", void 0);\n\n__decorate$7([Property(true)], Tab.prototype, \"reorderActiveTab\", void 0);\n\n__decorate$7([Property()], Tab.prototype, \"scrollStep\", void 0);\n\n__decorate$7([Property()], Tab.prototype, \"dragArea\", void 0);\n\n__decorate$7([Property(false)], Tab.prototype, \"allowDragAndDrop\", void 0);\n\n__decorate$7([Complex({}, TabAnimationSettings)], Tab.prototype, \"animation\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"created\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"adding\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"added\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"selecting\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"selected\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"removing\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"removed\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"onDragStart\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"dragging\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"dragged\", void 0);\n\n__decorate$7([Event()], Tab.prototype, \"destroyed\", void 0);\n\nTab = __decorate$7([NotifyPropertyChanges], Tab);\n/**\n * Tab modules\n */\n\nvar __decorate$8 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar TreeView_1;\nconst ROOT = 'e-treeview';\nconst CONTROL = 'e-control';\nconst COLLAPSIBLE = 'e-icon-collapsible';\nconst EXPANDABLE = 'e-icon-expandable';\nconst LISTITEM = 'e-list-item';\nconst LISTTEXT = 'e-list-text';\nconst LISTWRAP = 'e-text-wrap';\nconst IELISTWRAP = 'e-ie-wrap';\nconst PARENTITEM = 'e-list-parent';\nconst HOVER = 'e-hover';\nconst ACTIVE = 'e-active';\nconst LOAD = 'e-icons-spinner';\nconst PROCESS = 'e-process';\nconst ICON = 'e-icons';\nconst TEXTWRAP = 'e-text-content';\nconst INPUT = 'e-input';\nconst INPUTGROUP = 'e-input-group';\nconst TREEINPUT = 'e-tree-input';\nconst EDITING = 'e-editing';\nconst RTL$1 = 'e-rtl';\nconst INTERACTION = 'e-interaction';\nconst DRAGITEM = 'e-drag-item';\nconst DROPPABLE = 'e-droppable';\nconst DRAGGING = 'e-dragging';\nconst SIBLING = 'e-sibling';\nconst DROPIN = 'e-drop-in';\nconst DROPNEXT = 'e-drop-next';\nconst DROPOUT = 'e-drop-out';\nconst NODROP = 'e-no-drop';\nconst FULLROWWRAP = 'e-fullrow-wrap';\nconst FULLROW = 'e-fullrow';\nconst SELECTED$1 = 'e-selected';\nconst EXPANDED = 'e-expanded';\nconst NODECOLLAPSED = 'e-node-collapsed';\nconst DISABLE = 'e-disable';\nconst DROPCOUNT = 'e-drop-count';\nconst CHECK = 'e-check';\nconst INDETERMINATE = 'e-stop';\nconst CHECKBOXWRAP = 'e-checkbox-wrapper';\nconst CHECKBOXFRAME = 'e-frame';\nconst CHECKBOXRIPPLE = 'e-ripple-container';\nconst RIPPLE = 'e-ripple';\nconst RIPPLEELMENT = 'e-ripple-element';\nconst FOCUS = 'e-node-focus';\nconst IMAGE = 'e-list-img';\nconst BIGGER = 'e-bigger';\nconst SMALL = 'e-small';\nconst CHILD = 'e-has-child';\nconst ITEM_ANIMATION_ACTIVE = 'e-animation-active';\nconst DISABLED$1 = 'e-disabled';\nconst treeAriaAttr = {\n  treeRole: 'tree',\n  itemRole: 'treeitem',\n  listRole: 'group',\n  itemText: '',\n  wrapperRole: ''\n};\n/**\n * Configures the fields to bind to the properties of node in the TreeView component.\n */\n\nclass FieldsSettings extends ChildProperty {}\n\n__decorate$8([Property('child')], FieldsSettings.prototype, \"child\", void 0);\n\n__decorate$8([Property([])], FieldsSettings.prototype, \"dataSource\", void 0);\n\n__decorate$8([Property('expanded')], FieldsSettings.prototype, \"expanded\", void 0);\n\n__decorate$8([Property('hasChildren')], FieldsSettings.prototype, \"hasChildren\", void 0);\n\n__decorate$8([Property('htmlAttributes')], FieldsSettings.prototype, \"htmlAttributes\", void 0);\n\n__decorate$8([Property('iconCss')], FieldsSettings.prototype, \"iconCss\", void 0);\n\n__decorate$8([Property('id')], FieldsSettings.prototype, \"id\", void 0);\n\n__decorate$8([Property('imageUrl')], FieldsSettings.prototype, \"imageUrl\", void 0);\n\n__decorate$8([Property('isChecked')], FieldsSettings.prototype, \"isChecked\", void 0);\n\n__decorate$8([Property('parentID')], FieldsSettings.prototype, \"parentID\", void 0);\n\n__decorate$8([Property(null)], FieldsSettings.prototype, \"query\", void 0);\n\n__decorate$8([Property('selected')], FieldsSettings.prototype, \"selected\", void 0);\n\n__decorate$8([Property(null)], FieldsSettings.prototype, \"tableName\", void 0);\n\n__decorate$8([Property('text')], FieldsSettings.prototype, \"text\", void 0);\n\n__decorate$8([Property('tooltip')], FieldsSettings.prototype, \"tooltip\", void 0);\n\n__decorate$8([Property('navigateUrl')], FieldsSettings.prototype, \"navigateUrl\", void 0);\n/**\n * Configures animation settings for the TreeView component.\n */\n\n\nclass ActionSettings extends ChildProperty {}\n\n__decorate$8([Property('SlideDown')], ActionSettings.prototype, \"effect\", void 0);\n\n__decorate$8([Property(400)], ActionSettings.prototype, \"duration\", void 0);\n\n__decorate$8([Property('linear')], ActionSettings.prototype, \"easing\", void 0);\n/**\n * Configures the animation settings for expanding and collapsing nodes in TreeView.\n */\n\n\nclass NodeAnimationSettings extends ChildProperty {}\n\n__decorate$8([Complex({\n  effect: 'SlideUp',\n  duration: 400,\n  easing: 'linear'\n}, ActionSettings)], NodeAnimationSettings.prototype, \"collapse\", void 0);\n\n__decorate$8([Complex({\n  effect: 'SlideDown',\n  duration: 400,\n  easing: 'linear'\n}, ActionSettings)], NodeAnimationSettings.prototype, \"expand\", void 0);\n/**\n * The TreeView component is used to represent hierarchical data in a tree like structure with advanced\n * functions to perform edit, drag and drop, selection with check-box, and more.\n * ```html\n *  <div id=\"tree\"></div>\n * ```\n * ```typescript\n *  let treeObj: TreeView = new TreeView();\n *  treeObj.appendTo('#tree');\n * ```\n */\n\n\nlet TreeView = TreeView_1 = class TreeView extends Component {\n  constructor(options, element) {\n    super(options, element);\n    this.isRefreshed = false;\n    this.preventExpand = false;\n    this.checkedElement = [];\n    this.disableNode = []; // eslint-disable-next-line\n\n    this.validArr = [];\n    this.validNodes = [];\n    this.expandChildren = [];\n    this.isFieldChange = false;\n    this.changeDataSource = false;\n    this.hasTemplate = false;\n    this.isFirstRender = false;\n    this.mouseDownStatus = false;\n  }\n  /**\n   * Get component name.\n   *\n   * @returns {string} - returns module name.\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'treeview';\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @returns {void}\n   */\n\n\n  preRender() {\n    this.checkActionNodes = [];\n    this.parentNodeCheck = [];\n    this.dragStartAction = false;\n    this.isAnimate = false;\n    this.keyConfigs = {\n      escape: 'escape',\n      end: 'end',\n      enter: 'enter',\n      f2: 'f2',\n      home: 'home',\n      moveDown: 'downarrow',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      ctrlDown: 'ctrl+downarrow',\n      ctrlUp: 'ctrl+uparrow',\n      ctrlEnter: 'ctrl+enter',\n      ctrlHome: 'ctrl+home',\n      ctrlEnd: 'ctrl+end',\n      ctrlA: 'ctrl+A',\n      shiftDown: 'shift+downarrow',\n      shiftUp: 'shift+uparrow',\n      shiftEnter: 'shift+enter',\n      shiftHome: 'shift+home',\n      shiftEnd: 'shift+end',\n      csDown: 'ctrl+shift+downarrow',\n      csUp: 'ctrl+shift+uparrow',\n      csEnter: 'ctrl+shift+enter',\n      csHome: 'ctrl+shift+home',\n      csEnd: 'ctrl+shift+end',\n      space: 'space'\n    };\n    this.listBaseOption = {\n      expandCollapse: true,\n      showIcon: true,\n      expandIconClass: EXPANDABLE,\n      ariaAttributes: treeAriaAttr,\n      expandIconPosition: 'Left',\n      itemCreated: e => {\n        this.beforeNodeCreate(e);\n      },\n      enableHtmlSanitizer: this.enableHtmlSanitizer,\n      itemNavigable: this.fullRowNavigable\n    };\n    this.updateListProp(this.fields);\n    this.aniObj = new Animation({});\n    this.treeList = [];\n    this.isLoaded = false;\n    this.isInitalExpand = false;\n    this.expandChildren = [];\n    this.index = 0;\n    this.setTouchClass();\n\n    if (isNullOrUndefined(this.selectedNodes)) {\n      this.setProperties({\n        selectedNodes: []\n      }, true);\n    }\n\n    if (isNullOrUndefined(this.checkedNodes)) {\n      this.setProperties({\n        checkedNodes: []\n      }, true);\n    }\n\n    if (isNullOrUndefined(this.expandedNodes)) {\n      this.setProperties({\n        expandedNodes: []\n      }, true);\n    } else {\n      this.isInitalExpand = true;\n    }\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - returns the persisted data\n   * @hidden\n   */\n\n\n  getPersistData() {\n    const keyEntity = ['selectedNodes', 'checkedNodes', 'expandedNodes'];\n    return this.addOnPersist(keyEntity);\n  }\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.initialRender = true;\n    this.initialize();\n    this.setDataBinding(false);\n    this.setDisabledMode();\n    this.setExpandOnType();\n\n    if (!this.disabled) {\n      this.setRipple();\n    }\n\n    this.wireEditingEvents(this.allowEditing);\n    this.setDragAndDrop(this.allowDragAndDrop);\n\n    if (!this.disabled) {\n      this.wireEvents();\n    }\n\n    this.initialRender = false;\n    this.renderComplete();\n  }\n\n  initialize() {\n    this.element.setAttribute('role', 'tree');\n    this.element.setAttribute('tabindex', '0');\n    this.element.setAttribute('aria-activedescendant', this.element.id + '_active');\n    this.setCssClass(null, this.cssClass);\n    this.setEnableRtl();\n    this.setFullRow(this.fullRowSelect);\n    this.setTextWrap();\n    this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n  }\n\n  setDisabledMode() {\n    if (this.disabled) {\n      this.element.classList.add(DISABLED$1);\n    } else {\n      this.element.classList.remove(DISABLED$1);\n    }\n  }\n\n  setEnableRtl() {\n    (this.enableRtl ? addClass : removeClass)([this.element], RTL$1);\n  }\n\n  setRipple() {\n    const tempStr = '.' + FULLROW + ',.' + TEXTWRAP;\n    const rippleModel = {\n      selector: tempStr,\n      ignore: '.' + TEXTWRAP + ' > .' + ICON + ',.' + INPUTGROUP + ',.' + INPUT + ', .' + CHECKBOXWRAP\n    };\n    this.rippleFn = rippleEffect(this.element, rippleModel);\n    const iconModel = {\n      selector: '.' + TEXTWRAP + ' > .' + ICON,\n      isCenterRipple: true\n    };\n    this.rippleIconFn = rippleEffect(this.element, iconModel);\n  }\n\n  setFullRow(isEnabled) {\n    (isEnabled ? addClass : removeClass)([this.element], FULLROWWRAP);\n  }\n\n  setMultiSelect(isEnabled) {\n    const firstUl = select('.' + PARENTITEM, this.element);\n\n    if (isEnabled) {\n      firstUl.setAttribute('aria-multiselectable', 'true');\n    } else {\n      firstUl.removeAttribute('aria-multiselectable');\n    }\n  } // eslint-disable-next-line\n\n\n  templateComplier(template) {\n    if (template) {\n      this.hasTemplate = true; // eslint-disable-next-line\n\n      this.element.classList.add(INTERACTION);\n\n      try {\n        if (document.querySelectorAll(template).length) {\n          return compile(document.querySelector(template).innerHTML.trim());\n        } else {\n          return compile(template);\n        }\n      } catch (e) {\n        return compile(template);\n      }\n    }\n\n    this.element.classList.remove(INTERACTION);\n    return undefined;\n  }\n\n  setDataBinding(changeDataSource) {\n    this.treeList.push('false');\n\n    if (this.fields.dataSource instanceof DataManager) {\n      /* eslint-disable */\n      this.isOffline = this.fields.dataSource.dataSource.offline;\n\n      if (this.fields.dataSource.ready) {\n        this.fields.dataSource.ready.then(e => {\n          /* eslint-disable */\n          this.isOffline = this.fields.dataSource.dataSource.offline;\n\n          if (this.fields.dataSource instanceof DataManager && this.isOffline) {\n            this.treeList.pop();\n            this.treeData = e.result;\n            this.isNumberTypeId = this.getType();\n            this.setRootData();\n            this.renderItems(true);\n\n            if (this.treeList.length === 0 && !this.isLoaded) {\n              this.finalize();\n            }\n          }\n        }).catch(e => {\n          this.trigger('actionFailure', {\n            error: e\n          });\n        });\n      } else {\n        this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(e => {\n          this.treeList.pop();\n          this.treeData = e.result;\n          this.isNumberTypeId = this.getType();\n          this.setRootData();\n\n          if (changeDataSource) {\n            this.changeDataSource = true;\n          }\n\n          this.renderItems(true);\n          this.changeDataSource = false;\n\n          if (this.treeList.length === 0 && !this.isLoaded) {\n            this.finalize();\n          }\n        }).catch(e => {\n          this.trigger('actionFailure', {\n            error: e\n          });\n        });\n      }\n    } else {\n      this.treeList.pop();\n\n      if (isNullOrUndefined(this.fields.dataSource)) {\n        this.rootData = this.treeData = [];\n      } else {\n        this.treeData = JSON.parse(JSON.stringify(this.fields.dataSource));\n        this.setRootData();\n      }\n\n      this.isNumberTypeId = this.getType();\n      this.renderItems(false);\n    }\n\n    if (this.treeList.length === 0 && !this.isLoaded) {\n      this.finalize();\n    }\n  }\n\n  getQuery(mapper, value = null) {\n    let columns = [];\n    let query;\n\n    if (!mapper.query) {\n      query = new Query();\n      let prop = this.getActualProperties(mapper);\n\n      for (let col of Object.keys(prop)) {\n        if (col !== 'dataSource' && col !== 'tableName' && col !== 'child' && !!mapper[col] && col !== 'url' && columns.indexOf(mapper[col]) === -1) {\n          columns.push(mapper[col]);\n        }\n      }\n\n      query.select(columns);\n\n      if (prop.hasOwnProperty('tableName')) {\n        query.from(mapper.tableName);\n      }\n    } else {\n      query = mapper.query.clone();\n    }\n\n    ListBase.addSorting(this.sortOrder, mapper.text, query);\n\n    if (!isNullOrUndefined(value) && !isNullOrUndefined(mapper.parentID)) {\n      query.where(mapper.parentID, 'equal', this.isNumberTypeId ? parseFloat(value) : value);\n    }\n\n    return query;\n  }\n\n  getType() {\n    return this.treeData[0] ? typeof getValue(this.fields.id, this.treeData[0]) === 'number' ? true : false : false;\n  }\n\n  setRootData() {\n    this.dataType = this.getDataType(this.treeData, this.fields);\n\n    if (this.dataType === 1) {\n      this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n      let rootItems = this.getChildNodes(this.treeData, undefined, true);\n\n      if (isNullOrUndefined(rootItems)) {\n        this.rootData = [];\n      } else {\n        this.rootData = rootItems;\n      }\n    } else {\n      this.rootData = this.treeData;\n    }\n  }\n\n  renderItems(isSorted) {\n    /* eslint-disable */\n    this.listBaseOption.ariaAttributes.level = 1;\n    let sortedData = this.getSortedData(this.rootData);\n    this.ulElement = ListBase.createList(this.createElement, isSorted ? this.rootData : sortedData, this.listBaseOption);\n    this.element.appendChild(this.ulElement);\n    let rootNodes = this.ulElement.querySelectorAll('.e-list-item');\n\n    if (this.loadOnDemand === false) {\n      let i = 0;\n\n      while (i < rootNodes.length) {\n        this.renderChildNodes(rootNodes[i], true, null, true);\n        i++;\n      }\n    }\n\n    let parentEle = selectAll('.' + PARENTITEM, this.element);\n\n    if (parentEle.length === 1 && rootNodes && rootNodes.length !== 0 || this.loadOnDemand) {\n      this.finalizeNode(this.element);\n    }\n\n    this.parentNodeCheck = [];\n    this.parentCheckData = [];\n    this.updateCheckedStateFromDS();\n\n    if (this.autoCheck && this.showCheckBox && !this.isLoaded) {\n      this.updateParentCheckState();\n    }\n  }\n  /**\n   * Update the checkedNodes from datasource at initial rendering\n   */\n\n\n  updateCheckedStateFromDS(id) {\n    this.validNodes = [];\n\n    if (this.treeData && this.showCheckBox) {\n      if (this.dataType === 1) {\n        let mapper = this.fields;\n        let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.isChecked, 'equal', true, false));\n\n        for (let i = 0; i < resultData.length; i++) {\n          let resultId = resultData[i][this.fields.id] ? resultData[i][this.fields.id].toString() : null;\n          let resultPId = resultData[i][this.fields.parentID] ? resultData[i][this.fields.parentID].toString() : null;\n\n          if (this.checkedNodes.indexOf(resultId) === -1 && !this.isLoaded) {\n            this.checkedNodes.push(resultId);\n          }\n\n          if (resultData[i][this.fields.hasChildren]) {\n            let id = resultData[i][this.fields.id];\n            let childData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.parentID, 'equal', id, false));\n\n            for (let child = 0; child < childData.length; child++) {\n              let childId = childData[child][this.fields.id] ? childData[child][this.fields.id].toString() : null;\n\n              if (this.checkedNodes.indexOf(childId) === -1 && this.autoCheck) {\n                this.checkedNodes.push(childId);\n              }\n            }\n          }\n        }\n\n        for (let i = 0; i < this.checkedNodes.length; i++) {\n          let mapper = this.fields;\n          let checkState = new DataManager(this.treeData).executeLocal(new Query().where(mapper.id, 'equal', this.checkedNodes[i], true));\n\n          if (checkState[0] && this.autoCheck) {\n            this.getCheckedNodeDetails(mapper, checkState);\n            this.checkIndeterminateState(checkState[0]);\n          }\n\n          if (checkState.length > 0) {\n            let checkedId = checkState[0][this.fields.id] ? checkState[0][this.fields.id].toString() : null;\n\n            if (this.checkedNodes.indexOf(checkedId) > -1 && this.validNodes.indexOf(checkedId) === -1) {\n              this.validNodes.push(checkedId);\n            }\n          }\n\n          let checkedData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.parentID, 'equal', this.checkedNodes[i], true));\n\n          for (let index = 0; index < checkedData.length; index++) {\n            let checkedId = checkedData[index][this.fields.id] ? checkedData[index][this.fields.id].toString() : null;\n\n            if (this.checkedNodes.indexOf(checkedId) === -1 && this.autoCheck) {\n              this.checkedNodes.push(checkedId);\n            }\n\n            if (this.checkedNodes.indexOf(checkedId) > -1 && this.validNodes.indexOf(checkedId) === -1) {\n              this.validNodes.push(checkedId);\n            }\n          }\n        }\n      } else if (this.dataType === 2 || this.fields.dataSource instanceof DataManager && this.isOffline) {\n        for (let index = 0; index < this.treeData.length; index++) {\n          let fieldId = this.treeData[index][this.fields.id] ? this.treeData[index][this.fields.id].toString() : '';\n\n          if (this.treeData[index][this.fields.isChecked] && !this.isLoaded && this.checkedNodes.indexOf(fieldId) === -1) {\n            this.checkedNodes.push(fieldId);\n          }\n\n          if (this.checkedNodes.indexOf(fieldId) > -1 && this.validNodes.indexOf(fieldId) === -1) {\n            this.validNodes.push(fieldId);\n          }\n\n          let childItems = getValue(this.fields.child.toString(), this.treeData[index]);\n\n          if (childItems) {\n            this.updateChildCheckState(childItems, this.treeData[index]);\n          }\n        }\n\n        this.validNodes = this.enablePersistence ? this.checkedNodes : this.validNodes;\n      }\n\n      this.setProperties({\n        checkedNodes: this.validNodes\n      }, true);\n    }\n  }\n  /**\n   * To check whether the list data has sub child and to change the parent check state accordingly\n   */\n\n\n  getCheckedNodeDetails(mapper, checkNodes) {\n    let id = checkNodes[0][this.fields.parentID] ? checkNodes[0][this.fields.parentID].toString() : null;\n    let count = 0;\n    let element = this.element.querySelector('[data-uid=\"' + checkNodes[0][this.fields.id] + '\"]');\n    let parentEle = this.element.querySelector('[data-uid=\"' + checkNodes[0][this.fields.parentID] + '\"]');\n\n    if (!element && !parentEle) {\n      let len = this.parentNodeCheck.length;\n\n      if (this.parentNodeCheck.indexOf(id) === -1) {\n        this.parentNodeCheck.push(id);\n      }\n\n      let childNodes = this.getChildNodes(this.treeData, id);\n\n      for (let i = 0; i < childNodes.length; i++) {\n        let childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;\n\n        if (this.checkedNodes.indexOf(childId) !== -1) {\n          count++;\n        }\n\n        if (count === childNodes.length && this.checkedNodes.indexOf(id) === -1) {\n          this.checkedNodes.push(id);\n        }\n      }\n\n      let preElement = new DataManager(this.treeData).executeLocal(new Query().where(mapper.id, 'equal', id, true));\n      this.getCheckedNodeDetails(mapper, preElement);\n    } else if (parentEle) {\n      let check = select('.' + CHECK, parentEle);\n\n      if (!check) {\n        this.changeState(parentEle, 'indeterminate', null, true, true);\n      }\n    }\n  }\n  /**\n   * Update the checkedNodes and parent state when all the child Nodes are in checkedstate at initial rendering\n   */\n\n\n  updateParentCheckState() {\n    let indeterminate = selectAll('.' + INDETERMINATE, this.element);\n    let childCheckedElement;\n\n    for (let i = 0; i < indeterminate.length; i++) {\n      let node = closest(indeterminate[i], '.' + LISTITEM);\n      let nodeId = node.getAttribute('data-uid').toString();\n\n      if (this.dataType === 1) {\n        childCheckedElement = new DataManager(this.treeData).executeLocal(new Query().where(this.fields.parentID, 'equal', nodeId, true));\n      } else {\n        childCheckedElement = this.getChildNodes(this.treeData, nodeId);\n      }\n\n      let count = 0;\n\n      if (childCheckedElement) {\n        for (let j = 0; j < childCheckedElement.length; j++) {\n          let childId = childCheckedElement[j][this.fields.id].toString();\n\n          if (this.checkedNodes.indexOf(childId) !== -1) {\n            count++;\n          }\n        }\n\n        if (count === childCheckedElement.length) {\n          let nodeCheck = node.getAttribute('data-uid');\n\n          if (this.checkedNodes.indexOf(nodeCheck) === -1) {\n            this.checkedNodes.push(nodeCheck);\n          }\n\n          this.changeState(node, 'check', null, true, true);\n        } else if (count === 0 && this.checkedNodes.length === 0) {\n          this.changeState(node, 'uncheck', null, true, true);\n        }\n      }\n    }\n  }\n  /**\n   * Change the parent to indeterminate state whenever the child is in checked state which is not rendered in DOM\n   */\n\n\n  checkIndeterminateState(data) {\n    let element;\n\n    if (this.dataType === 1) {\n      element = this.element.querySelector('[data-uid=\"' + data[this.fields.parentID] + '\"]');\n    } else {\n      element = this.element.querySelector('[data-uid=\"' + data[this.fields.id] + '\"]');\n    }\n\n    if (element) {\n      let ariaChecked = element.querySelector('.' + CHECKBOXWRAP).getAttribute('aria-checked');\n\n      if (ariaChecked !== 'true') {\n        this.changeState(element, 'indeterminate', null, true, true);\n      }\n    } else if (this.dataType === 2) {\n      let len = this.parentNodeCheck.length;\n\n      if (this.parentNodeCheck.indexOf(data[this.fields.id].toString()) === -1) {\n        this.parentNodeCheck.push(data[this.fields.id].toString());\n      }\n    }\n  }\n  /**\n   * Update the checkedNodes for child and subchild from datasource (hierarchical datasource) at initial rendering\n   */\n\n\n  updateChildCheckState(childItems, treeData) {\n    let count = 0;\n    let checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : '';\n\n    for (let index = 0; index < childItems.length; index++) {\n      let checkedChild = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : '';\n\n      if (childItems[index][this.fields.isChecked] && !this.isLoaded && this.checkedNodes.indexOf(checkedChild) === -1) {\n        this.checkedNodes.push(checkedChild);\n      }\n\n      if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1 && this.autoCheck) {\n        this.checkedNodes.push(checkedChild);\n      }\n\n      if (this.checkedNodes.indexOf(checkedChild) !== -1 && this.autoCheck) {\n        count++;\n      }\n\n      if (this.checkedNodes.indexOf(checkedChild) > -1 && this.validNodes.indexOf(checkedChild) === -1) {\n        this.validNodes.push(checkedChild);\n      }\n\n      let subChildItems = getValue(this.fields.child.toString(), childItems[index]);\n\n      if (subChildItems && subChildItems.length) {\n        if (this.parentCheckData.indexOf(treeData) === -1) this.parentCheckData.push(treeData);\n        this.updateChildCheckState(subChildItems, childItems[index]);\n      }\n\n      if (count === childItems.length && this.autoCheck && this.checkedNodes.indexOf(checkedParent) === -1) {\n        this.checkedNodes.push(checkedParent);\n      }\n    }\n\n    if (count !== 0 && this.autoCheck) {\n      this.checkIndeterminateState(treeData);\n\n      for (let len = 0; len < this.parentCheckData.length; len++) {\n        if (treeData !== this.parentCheckData[len] && this.parentCheckData[len]) {\n          this.checkIndeterminateState(this.parentCheckData[len]);\n        }\n      }\n    }\n  }\n\n  beforeNodeCreate(e) {\n    if (this.showCheckBox) {\n      let checkboxEle = createCheckBox(this.createElement, true, {\n        cssClass: this.touchClass\n      });\n      checkboxEle.setAttribute('role', 'checkbox');\n      let icon = select('div.' + ICON, e.item);\n      let id = e.item.getAttribute('data-uid');\n      e.item.childNodes[0].insertBefore(checkboxEle, e.item.childNodes[0].childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n      let checkValue = getValue(e.fields.isChecked, e.curData);\n\n      if (this.checkedNodes.indexOf(id) > -1) {\n        select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n        checkboxEle.setAttribute('aria-checked', 'true');\n        this.addCheck(e.item);\n      } else if (!isNullOrUndefined(checkValue) && checkValue.toString() === 'true') {\n        select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n        checkboxEle.setAttribute('aria-checked', 'true');\n        this.addCheck(e.item);\n      } else {\n        checkboxEle.setAttribute('aria-checked', 'false');\n      }\n\n      let frame = select('.' + CHECKBOXFRAME, checkboxEle);\n      EventHandler.add(frame, 'mousedown', this.frameMouseHandler, this);\n      EventHandler.add(frame, 'mouseup', this.frameMouseHandler, this);\n    }\n\n    if (this.fullRowSelect) {\n      this.createFullRow(e.item);\n    }\n\n    if (this.allowMultiSelection && !e.item.classList.contains(SELECTED$1)) {\n      e.item.setAttribute('aria-selected', 'false');\n    }\n\n    let fields = e.fields;\n    this.addActionClass(e, fields.selected, SELECTED$1);\n    this.addActionClass(e, fields.expanded, EXPANDED);\n\n    if (!isNullOrUndefined(this.nodeTemplateFn)) {\n      let textEle = e.item.querySelector('.' + LISTTEXT);\n      let dataId = e.item.getAttribute('data-uid');\n      textEle.innerHTML = '';\n      this.renderNodeTemplate(e.curData, textEle, dataId);\n    }\n\n    let eventArgs = {\n      node: e.item,\n      nodeData: e.curData,\n      text: e.text\n    };\n\n    if (!this.isRefreshed) {\n      this.trigger('drawNode', eventArgs);\n    }\n  }\n\n  frameMouseHandler(e) {\n    let rippleSpan = select('.' + CHECKBOXRIPPLE, e.target.parentElement);\n    rippleMouseHandler(e, rippleSpan);\n  }\n\n  addActionClass(e, action, cssClass) {\n    let data = e.curData;\n    let actionValue = getValue(action, data);\n\n    if (!isNullOrUndefined(actionValue) && actionValue.toString() !== 'false') {\n      e.item.classList.add(cssClass);\n    }\n  }\n\n  getDataType(ds, mapper) {\n    if (this.fields.dataSource instanceof DataManager) {\n      for (let i = 0; i < ds.length; i++) {\n        if (this.isOffline) {\n          if (typeof mapper.child === 'string' && isNullOrUndefined(getValue(mapper.child, ds[i])) && !isNullOrUndefined(getValue(mapper.parentID, ds[i]))) {\n            return 1;\n          }\n        } else if (typeof mapper.child === 'string' && isNullOrUndefined(getValue(mapper.child, ds[i]))) {\n          return 1;\n        }\n      }\n\n      return 2;\n    }\n\n    for (let i = 0, len = ds.length; i < len; i++) {\n      if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, ds[i]))) {\n        return 2;\n      }\n\n      if (!isNullOrUndefined(getValue(mapper.parentID, ds[i])) || !isNullOrUndefined(getValue(mapper.hasChildren, ds[i]))) {\n        return 1;\n      }\n    }\n\n    return 1;\n  }\n\n  getGroupedData(dataSource, groupBy) {\n    let cusQuery = new Query().group(groupBy);\n    let ds = ListBase.getDataSource(dataSource, cusQuery);\n    let grpItem = [];\n\n    for (let j = 0; j < ds.length; j++) {\n      let itemObj = ds[j].items;\n      grpItem.push(itemObj);\n    }\n\n    return grpItem;\n  }\n\n  getSortedData(list) {\n    if (list && this.sortOrder !== 'None') {\n      list = ListBase.getDataSource(list, ListBase.addSorting(this.sortOrder, this.fields.text));\n    }\n\n    return list;\n  }\n\n  finalizeNode(element) {\n    let iNodes = selectAll('.' + IMAGE, element);\n\n    for (let k = 0; k < iNodes.length; k++) {\n      iNodes[k].setAttribute('alt', IMAGE);\n    }\n\n    if (this.isLoaded) {\n      let sNodes = selectAll('.' + SELECTED$1, element);\n\n      for (let i = 0; i < sNodes.length; i++) {\n        this.selectNode(sNodes[i], null);\n        break;\n      }\n\n      removeClass(sNodes, SELECTED$1);\n    }\n\n    let cNodes = selectAll('.' + LISTITEM + ':not(.' + EXPANDED + ')', element);\n\n    for (let j = 0; j < cNodes.length; j++) {\n      let icon = select('div.' + ICON, cNodes[j]);\n\n      if (icon && icon.classList.contains(EXPANDABLE)) {\n        this.disableExpandAttr(cNodes[j]);\n      }\n    }\n\n    let eNodes = selectAll('.' + EXPANDED, element);\n\n    if (!this.isInitalExpand) {\n      for (let i = 0; i < eNodes.length; i++) {\n        this.renderChildNodes(eNodes[i]);\n      }\n    }\n\n    removeClass(eNodes, EXPANDED);\n    this.updateList();\n\n    if (this.isLoaded) {\n      this.updateCheckedProp();\n    }\n  }\n\n  updateCheckedProp() {\n    if (this.showCheckBox) {\n      let nodes = [].concat([], this.checkedNodes);\n      this.setProperties({\n        checkedNodes: nodes\n      }, true);\n    }\n  }\n\n  ensureIndeterminate() {\n    if (this.autoCheck) {\n      let liElement = selectAll('li', this.element);\n      let ulElement;\n\n      for (let i = 0; i < liElement.length; i++) {\n        if (liElement[i].classList.contains(LISTITEM)) {\n          ulElement = select('.' + PARENTITEM, liElement[i]);\n\n          if (ulElement) {\n            this.ensureParentCheckState(liElement[i]);\n          } else {\n            this.ensureChildCheckState(liElement[i]);\n          }\n        }\n      }\n    } else {\n      let indeterminate = selectAll('.' + INDETERMINATE, this.element);\n\n      for (let i = 0; i < indeterminate.length; i++) {\n        indeterminate[i].classList.remove(INDETERMINATE);\n      }\n    }\n  }\n\n  ensureParentCheckState(element) {\n    if (!isNullOrUndefined(element)) {\n      if (element.classList.contains(ROOT)) {\n        return;\n      }\n\n      let ulElement = element;\n\n      if (element.classList.contains(LISTITEM)) {\n        ulElement = select('.' + PARENTITEM, element);\n      }\n\n      let checkedNodes = selectAll('.' + CHECK, ulElement);\n      let indeterminateNodes = selectAll('.' + INDETERMINATE, ulElement);\n      let nodes = selectAll('.' + LISTITEM, ulElement);\n      let checkBoxEle = element.getElementsByClassName(CHECKBOXWRAP)[0];\n\n      if (nodes.length === checkedNodes.length) {\n        this.changeState(checkBoxEle, 'check', null, true, true);\n      } else if (checkedNodes.length > 0 || indeterminateNodes.length > 0) {\n        this.changeState(checkBoxEle, 'indeterminate', null, true, true);\n      } else if (checkedNodes.length === 0) {\n        this.changeState(checkBoxEle, 'uncheck', null, true, true);\n      }\n\n      let parentUL = closest(element, '.' + PARENTITEM);\n\n      if (!isNullOrUndefined(parentUL)) {\n        let currentParent = closest(parentUL, '.' + LISTITEM);\n        this.ensureParentCheckState(currentParent);\n      }\n    }\n  }\n\n  ensureChildCheckState(element, e) {\n    if (!isNullOrUndefined(element)) {\n      let childElement = select('.' + PARENTITEM, element);\n      let checkBoxes;\n\n      if (!isNullOrUndefined(childElement)) {\n        checkBoxes = selectAll('.' + CHECKBOXWRAP, childElement);\n        let isChecked = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n        let parentCheck = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(INDETERMINATE);\n        let childCheck = childElement.querySelectorAll('li');\n        let expandState = childElement.parentElement.getAttribute('aria-expanded');\n        let checkedState;\n\n        for (let index = 0; index < checkBoxes.length; index++) {\n          let childId = childCheck[index].getAttribute('data-uid');\n\n          if (!isNullOrUndefined(this.currentLoadData) && !isNullOrUndefined(getValue(this.fields.isChecked, this.currentLoadData[index]))) {\n            checkedState = getValue(this.fields.isChecked, this.currentLoadData[index]) ? 'check' : 'uncheck';\n\n            if (this.ele !== -1) {\n              checkedState = isChecked ? 'check' : 'uncheck';\n            }\n\n            if (checkedState === 'uncheck' && !isUndefined(this.parentNodeCheck) && this.autoCheck && this.parentNodeCheck.indexOf(childId) !== -1) {\n              this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);\n              checkedState = 'indeterminate';\n            }\n          } else {\n            let isNodeChecked = checkBoxes[index].getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n\n            if (isChecked) {\n              checkedState = 'check';\n            } else if (isNodeChecked && !this.isLoaded) {\n              checkedState = 'check';\n            } else if (this.checkedNodes.indexOf(childId) !== -1 && this.isLoaded && (parentCheck || isChecked)) {\n              checkedState = 'check';\n            } else if (childCheck[index].classList.contains(CHILD) && !isUndefined(this.parentNodeCheck) && this.autoCheck && (isChecked || parentCheck) && this.parentNodeCheck.indexOf(childId) !== -1) {\n              checkedState = 'indeterminate';\n              this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);\n            } else if (this.dataType === 1 && !isUndefined(this.parentNodeCheck) && this.autoCheck && (isChecked || parentCheck) && this.parentNodeCheck.indexOf(childId) !== -1) {\n              checkedState = 'indeterminate';\n              this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);\n            } else {\n              checkedState = 'uncheck';\n            }\n          }\n\n          this.changeState(checkBoxes[index], checkedState, e, true, true);\n        }\n      }\n\n      if (this.autoCheck && this.isLoaded) {\n        this.updateParentCheckState();\n      }\n    }\n  }\n\n  doCheckBoxAction(nodes, doCheck) {\n    let li = selectAll('.' + LISTITEM, this.element);\n\n    if (!isNullOrUndefined(nodes)) {\n      for (let len = nodes.length; len >= 0; len--) {\n        let liEle;\n\n        if (nodes.length === 1) {\n          liEle = this.getElement(nodes[len - 1]);\n        } else {\n          liEle = this.getElement(nodes[len]);\n        }\n\n        if (isNullOrUndefined(liEle)) {\n          let node;\n          node = nodes[len - nodes.length] ? nodes[len - nodes.length].toString() : nodes[len] ? nodes[len].toString() : null;\n\n          if (node !== '' && doCheck && node) {\n            this.setValidCheckedNode(node);\n            this.dynamicCheckState(node, doCheck);\n          } else if (this.checkedNodes.indexOf(node) !== -1 && node !== '' && !doCheck) {\n            this.checkedNodes.splice(this.checkedNodes.indexOf(node), 1);\n            let childItems = this.getChildNodes(this.treeData, node);\n\n            if (childItems) {\n              for (let i = 0; i < childItems.length; i++) {\n                let id = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;\n\n                if (this.checkedNodes.indexOf(id) !== -1) {\n                  this.checkedNodes.splice(this.checkedNodes.indexOf(id), 1);\n                  let ele = this.element.querySelector('[data-uid=\"' + id + '\"]');\n\n                  if (ele) {\n                    this.changeState(ele, 'uncheck', null);\n                  }\n                }\n              }\n\n              if (this.parentNodeCheck.indexOf(node) !== -1) {\n                this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(node), 1);\n              }\n            }\n\n            if (node) {\n              this.dynamicCheckState(node, doCheck);\n            }\n\n            this.updateField(this.treeData, this.fields, node, 'isChecked', null);\n          }\n\n          continue;\n        }\n\n        let checkBox = select('.' + PARENTITEM + ' .' + CHECKBOXWRAP, liEle);\n        this.validateCheckNode(checkBox, !doCheck, liEle, null);\n      }\n    } else {\n      let checkBoxes = selectAll('.' + CHECKBOXWRAP, this.element);\n\n      if (this.loadOnDemand) {\n        for (let index = 0; index < checkBoxes.length; index++) {\n          this.updateFieldChecked(checkBoxes[index], doCheck);\n          this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck', null, null, null, doCheck);\n        }\n      } else {\n        for (let index = 0; index < checkBoxes.length; index++) {\n          this.updateFieldChecked(checkBoxes[index], doCheck);\n          this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck');\n        }\n      }\n    }\n\n    if (nodes) {\n      for (let j = 0; j < nodes.length; j++) {\n        let node = nodes[j] ? nodes[j].toString() : '';\n\n        if (!doCheck) {\n          this.updateField(this.treeData, this.fields, node, 'isChecked', null);\n        }\n      }\n    }\n\n    if (this.autoCheck) {\n      this.updateParentCheckState();\n    }\n  }\n\n  updateFieldChecked(checkbox, doCheck) {\n    let currLi = closest(checkbox, '.' + LISTITEM);\n    let id = currLi.getAttribute('data-uid');\n    let nodeDetails = this.getNodeData(currLi);\n\n    if (nodeDetails.isChecked === 'true' && !doCheck) {\n      this.updateField(this.treeData, this.fields, id, 'isChecked', null);\n    }\n  }\n  /**\n   * Changes the parent and child  check state while changing the checkedNodes via setmodel\n   */\n\n\n  dynamicCheckState(node, doCheck) {\n    if (this.dataType === 1) {\n      let count = 0;\n      let resultId = new DataManager(this.treeData).executeLocal(new Query().where(this.fields.id, 'equal', node, true));\n\n      if (resultId[0]) {\n        let id = resultId[0][this.fields.id] ? resultId[0][this.fields.id].toString() : null;\n        let parent = resultId[0][this.fields.parentID] ? resultId[0][this.fields.parentID].toString() : null;\n        let parentElement = this.element.querySelector('[data-uid=\"' + parent + '\"]');\n        let indeterminate = parentElement ? select('.' + INDETERMINATE, parentElement) : null;\n        let check = parentElement ? select('.' + CHECK, parentElement) : null;\n        let element = this.element.querySelector('[data-uid=\"' + id + '\"]');\n        let childNodes = this.getChildNodes(this.treeData, parent);\n\n        if (childNodes) {\n          for (let i = 0; i < childNodes.length; i++) {\n            let childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;\n\n            if (this.checkedNodes.indexOf(childId) !== -1) {\n              count++;\n            }\n          }\n        }\n\n        if (this.checkedNodes.indexOf(node) !== -1 && parentElement && id === node && this.autoCheck) {\n          this.changeState(parentElement, 'indeterminate', null);\n        } else if (this.checkedNodes.indexOf(node) === -1 && element && id === node && !doCheck) {\n          this.changeState(element, 'uncheck', null);\n        } else if (this.checkedNodes.indexOf(node) !== -1 && element && id === node && doCheck) {\n          this.changeState(element, 'check', null);\n        } else if (this.checkedNodes.indexOf(node) === -1 && !element && parentElement && id === node && this.autoCheck && count !== 0) {\n          this.changeState(parentElement, 'indeterminate', null);\n        } else if (this.checkedNodes.indexOf(node) === -1 && !element && parentElement && id === node && this.autoCheck && count === 0) {\n          this.changeState(parentElement, 'uncheck', null);\n        } else if (!element && !parentElement && id === node && this.autoCheck) {\n          this.updateIndeterminate(node, doCheck);\n        }\n      }\n    } else if (this.dataType === 2 || this.fields.dataSource instanceof DataManager && this.isOffline) {\n      let id;\n      let parentElement;\n      let check;\n\n      for (let i = 0; i < this.treeData.length; i++) {\n        id = this.treeData[i][this.fields.id] ? this.treeData[i][this.fields.id].toString() : '';\n        parentElement = this.element.querySelector('[data-uid=\"' + id + '\"]');\n        check = parentElement ? select('.' + CHECK, parentElement) : null;\n\n        if (this.checkedNodes.indexOf(id) === -1 && parentElement && check && !doCheck) {\n          this.changeState(parentElement, 'uncheck', null);\n        }\n\n        let subChild = getValue(this.fields.child.toString(), this.treeData[i]);\n\n        if (subChild) {\n          this.updateChildIndeterminate(subChild, id, node, doCheck, id);\n        }\n      }\n    }\n  }\n  /**\n   * updates the parent and child  check state while changing the checkedNodes via setmodel for listData\n   */\n\n\n  updateIndeterminate(node, doCheck) {\n    let indeterminateData = this.getTreeData(node);\n    let count = 0;\n    let parent;\n\n    if (this.dataType === 1) {\n      parent = indeterminateData[0][this.fields.parentID] ? indeterminateData[0][this.fields.parentID].toString() : null;\n    }\n\n    let childNodes = this.getChildNodes(this.treeData, parent);\n\n    if (childNodes) {\n      for (let i = 0; i < childNodes.length; i++) {\n        let childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;\n\n        if (this.checkedNodes.indexOf(childId) !== -1) {\n          count++;\n        }\n      }\n    }\n\n    let parentElement = this.element.querySelector('[data-uid=\"' + parent + '\"]');\n\n    if (parentElement && doCheck) {\n      this.changeState(parentElement, 'indeterminate', null);\n    } else if (!doCheck && parentElement && this.parentNodeCheck.indexOf(parent) === -1 && count !== 0) {\n      this.changeState(parentElement, 'indeterminate', null);\n    } else if (!doCheck && parentElement && this.parentNodeCheck.indexOf(parent) === -1 && count === 0) {\n      this.changeState(parentElement, 'uncheck', null);\n    } else if (!parentElement) {\n      if (!doCheck && this.checkedNodes.indexOf(parent) === -1 && this.parentNodeCheck.indexOf(parent) !== -1) {\n        this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(parent), 1);\n      } else if (doCheck && this.checkedNodes.indexOf(parent) === -1 && this.parentNodeCheck.indexOf(parent) === -1) {\n        this.parentNodeCheck.push(parent);\n      } else if (!doCheck && this.checkedNodes.indexOf(parent) !== -1 && this.parentNodeCheck.indexOf(parent) === -1 && count !== 0) {\n        this.parentNodeCheck.push(parent);\n      }\n\n      this.updateIndeterminate(parent, doCheck);\n\n      if (this.checkedNodes.indexOf(parent) !== -1 && !doCheck) {\n        this.checkedNodes.splice(this.checkedNodes.indexOf(parent), 1);\n      }\n    }\n  }\n  /**\n   * updates the parent and child  check state while changing the checkedNodes via setmodel for hierarchical data\n   */\n\n\n  updateChildIndeterminate(subChild, parent, node, doCheck, child) {\n    let count = 0;\n\n    for (let j = 0; j < subChild.length; j++) {\n      let subId = subChild[j][this.fields.id] ? subChild[j][this.fields.id].toString() : '';\n\n      if (this.checkedNodes.indexOf(subId) !== -1) {\n        count++;\n      }\n\n      let parentElement = this.element.querySelector('[data-uid=\"' + parent + '\"]');\n      let indeterminate = parentElement ? select('.' + INDETERMINATE, parentElement) : null;\n      let check = parentElement ? select('.' + CHECK, parentElement) : null;\n      let element = this.element.querySelector('[data-uid=\"' + subId + '\"]');\n      let childElementCheck = element ? select('.' + CHECK, element) : null;\n\n      if (this.checkedNodes.indexOf(node) !== -1 && parentElement && subId === node && this.autoCheck) {\n        this.changeState(parentElement, 'indeterminate', null);\n      } else if (this.checkedNodes.indexOf(node) === -1 && parentElement && !element && subId === node && !doCheck) {\n        if (this.autoCheck) {\n          this.changeState(parentElement, 'uncheck', null);\n        } else {\n          if (count !== 0) {\n            this.changeState(parentElement, 'indeterminate', null);\n          } else {\n            this.changeState(parentElement, 'uncheck', null);\n          }\n        }\n      } else if (this.checkedNodes.indexOf(node) === -1 && element && subId === node && !doCheck) {\n        this.changeState(element, 'uncheck', null);\n      } else if (this.checkedNodes.indexOf(node) === -1 && indeterminate && subId === node && this.autoCheck && count === 0 && !doCheck) {\n        indeterminate.classList.remove(INDETERMINATE);\n      } else if (this.checkedNodes.indexOf(node) === -1 && !element && check && subId === node && count === 0) {\n        this.changeState(parentElement, 'uncheck', null);\n      } else if (this.checkedNodes.indexOf(subId) === -1 && element && childElementCheck && count === 0) {\n        this.changeState(element, 'uncheck', null);\n      } else if (!element && !parentElement && subId === node || this.parentNodeCheck.indexOf(parent) !== -1 && this.autoCheck) {\n        let childElement = this.element.querySelector('[data-uid=\"' + child + '\"]');\n\n        if (doCheck && count !== 0) {\n          this.changeState(childElement, 'indeterminate', null);\n        } else if (doCheck && count === subChild.length && this.checkedNodes.indexOf(parent) === -1) {\n          this.checkedNodes.push(parent);\n        } else if (!doCheck && count === 0 && this.parentNodeCheck.indexOf(parent) !== -1) {\n          this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(parent));\n        }\n\n        if (this.parentNodeCheck.indexOf(parent) === -1) {\n          this.parentNodeCheck.push(parent);\n        }\n      }\n\n      let innerChild = getValue(this.fields.child.toString(), subChild[j]);\n\n      if (innerChild) {\n        this.updateChildIndeterminate(innerChild, subId, node, doCheck, child);\n      }\n    }\n  }\n\n  changeState(wrapper, state, e, isPrevent, isAdd, doCheck) {\n    let eventArgs;\n    let currLi = closest(wrapper, '.' + LISTITEM);\n\n    if (wrapper === currLi) {\n      wrapper = select('.' + CHECKBOXWRAP, currLi);\n    }\n\n    if (!isPrevent) {\n      this.checkActionNodes = [];\n      eventArgs = this.getCheckEvent(currLi, state, e);\n      this.trigger('nodeChecking', eventArgs, observedArgs => {\n        if (!observedArgs.cancel) {\n          this.nodeCheckAction(wrapper, state, currLi, observedArgs, e, isPrevent, isAdd, doCheck);\n        }\n      });\n    } else {\n      this.nodeCheckAction(wrapper, state, currLi, eventArgs, e, isPrevent, isAdd, doCheck);\n    }\n  }\n\n  nodeCheckAction(wrapper, state, currLi, eventArgs, e, isPrevent, isAdd, doCheck) {\n    let ariaState;\n    let frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\n    if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.remove(INDETERMINATE);\n      frameSpan.classList.add(CHECK);\n      this.addCheck(currLi);\n      ariaState = 'true';\n    } else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n      removeClass([frameSpan], [CHECK, INDETERMINATE]);\n      this.removeCheck(currLi);\n      ariaState = 'false';\n    } else if (state === 'indeterminate' && this.autoCheck) {\n      frameSpan.classList.remove(CHECK);\n      frameSpan.classList.add(INDETERMINATE);\n      this.removeCheck(currLi);\n      ariaState = 'mixed';\n    }\n\n    ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n\n    if (!isNullOrUndefined(ariaState)) {\n      wrapper.setAttribute('aria-checked', ariaState);\n    }\n\n    if (isAdd) {\n      let data = [].concat([], this.checkActionNodes);\n      eventArgs = this.getCheckEvent(currLi, state, e);\n\n      if (isUndefined(isPrevent)) {\n        eventArgs.data = data;\n      }\n    }\n\n    if (doCheck !== undefined) {\n      this.ensureStateChange(currLi, doCheck);\n    }\n\n    if (!isPrevent) {\n      if (!isNullOrUndefined(ariaState)) {\n        wrapper.setAttribute('aria-checked', ariaState);\n        eventArgs.data[0].checked = ariaState;\n        this.trigger('nodeChecked', eventArgs);\n        this.checkActionNodes = [];\n      }\n    }\n  }\n\n  addCheck(liEle) {\n    let id = liEle.getAttribute('data-uid');\n\n    if (!isNullOrUndefined(id) && this.checkedNodes.indexOf(id) === -1) {\n      this.checkedNodes.push(id);\n    }\n  }\n\n  removeCheck(liEle) {\n    let index = this.checkedNodes.indexOf(liEle.getAttribute('data-uid'));\n\n    if (index > -1) {\n      this.checkedNodes.splice(index, 1);\n    }\n  }\n\n  getCheckEvent(currLi, action, e) {\n    this.checkActionNodes.push(this.getNodeData(currLi));\n    let nodeData = this.checkActionNodes;\n    return {\n      action: action,\n      cancel: false,\n      isInteracted: isNullOrUndefined(e) ? false : true,\n      node: currLi,\n      data: nodeData\n    };\n  }\n\n  finalize() {\n    let firstUl = select('.' + PARENTITEM, this.element);\n\n    if (!isNullOrUndefined(firstUl)) {\n      firstUl.setAttribute('role', treeAriaAttr.treeRole);\n      this.setMultiSelect(this.allowMultiSelection);\n      let firstNode = select('.' + LISTITEM, this.element);\n\n      if (firstNode) {\n        addClass([firstNode], FOCUS);\n        this.updateIdAttr(null, firstNode);\n      }\n\n      if (this.allowTextWrap) {\n        this.updateWrap();\n      }\n\n      this.renderReactTemplates();\n      this.hasPid = this.rootData[0] ? this.rootData[0].hasOwnProperty(this.fields.parentID) : false;\n      this.doExpandAction();\n    }\n  }\n\n  setTextWrap() {\n    (this.allowTextWrap ? addClass : removeClass)([this.element], LISTWRAP);\n\n    if (Browser.isIE) {\n      (this.allowTextWrap ? addClass : removeClass)([this.element], IELISTWRAP);\n    }\n  }\n\n  updateWrap(ulEle) {\n    if (!this.fullRowSelect) {\n      return;\n    }\n\n    const liEle = ulEle ? selectAll('.' + LISTITEM, ulEle) : this.liList;\n    const length = liEle.length;\n\n    for (let i = 0; i < length; i++) {\n      this.calculateWrap(liEle[i]);\n    }\n  }\n\n  calculateWrap(liEle) {\n    const element = select('.' + FULLROW, liEle);\n\n    if (element && element.nextElementSibling) {\n      element.style.height = this.allowTextWrap ? element.nextElementSibling.offsetHeight + 'px' : '';\n    }\n  }\n\n  doExpandAction() {\n    let eUids = this.expandedNodes;\n\n    if (this.isInitalExpand && eUids.length > 0) {\n      this.setProperties({\n        expandedNodes: []\n      }, true);\n      /* eslint-disable */\n\n      if (this.fields.dataSource instanceof DataManager) {\n        this.expandGivenNodes(eUids);\n      } else {\n        for (let i = 0; i < eUids.length; i++) {\n          let eNode = select('[data-uid=\"' + eUids[i] + '\"]', this.element);\n\n          if (!isNullOrUndefined(eNode)) {\n            let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, eNode));\n\n            if (!isNullOrUndefined(icon)) {\n              this.expandAction(eNode, icon, null);\n            }\n          } else {\n            if (eUids[i] && this.expandChildren.indexOf(eUids[i]) === -1) {\n              this.expandChildren.push(eUids[i].toString());\n            }\n\n            continue;\n          }\n        }\n\n        this.afterFinalized();\n      }\n    } else {\n      this.afterFinalized();\n    }\n  }\n\n  expandGivenNodes(arr) {\n    let proxy = this;\n    this.expandCallback(arr[this.index], () => {\n      proxy.index++;\n\n      if (proxy.index < arr.length) {\n        proxy.expandGivenNodes(arr);\n      } else {\n        proxy.afterFinalized();\n      }\n    });\n  }\n\n  expandCallback(eUid, callback) {\n    let eNode = select('[data-uid=\"' + eUid + '\"]', this.element);\n\n    if (!isNullOrUndefined(eNode)) {\n      let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, eNode));\n\n      if (!isNullOrUndefined(icon)) {\n        this.expandAction(eNode, icon, null, false, callback);\n      } else {\n        callback();\n      }\n    } else {\n      callback();\n    }\n  }\n\n  afterFinalized() {\n    this.doSelectionAction();\n    this.updateCheckedProp();\n    this.isAnimate = true;\n    this.isInitalExpand = false;\n\n    if (!this.isLoaded || this.isFieldChange) {\n      let eventArgs = {\n        data: this.treeData\n      };\n      this.trigger('dataBound', eventArgs);\n    }\n\n    this.isLoaded = true;\n  }\n\n  doSelectionAction() {\n    let sNodes = selectAll('.' + SELECTED$1, this.element);\n    let sUids = this.selectedNodes;\n\n    if (sUids.length > 0) {\n      this.setProperties({\n        selectedNodes: []\n      }, true);\n\n      for (let i = 0; i < sUids.length; i++) {\n        let sNode = select('[data-uid=\"' + sUids[i] + '\"]', this.element);\n\n        if (sNode && !sNode.classList.contains('e-active')) {\n          this.selectNode(sNode, null, true);\n        } else {\n          this.selectedNodes.push(sUids[i]);\n        }\n\n        if (!this.allowMultiSelection) {\n          break;\n        }\n      }\n    } else {\n      this.selectGivenNodes(sNodes);\n    }\n\n    removeClass(sNodes, SELECTED$1);\n  }\n\n  selectGivenNodes(sNodes) {\n    for (let i = 0; i < sNodes.length; i++) {\n      if (!sNodes[i].classList.contains('e-disable')) {\n        this.selectNode(sNodes[i], null, true);\n      }\n\n      if (!this.allowMultiSelection) {\n        break;\n      }\n    }\n  }\n\n  clickHandler(event) {\n    let target = event.originalEvent.target;\n    EventHandler.remove(this.element, 'contextmenu', this.preventContextMenu);\n\n    if (!target || this.dragStartAction) {\n      return;\n    } else {\n      let classList$$1 = target.classList;\n      let li = closest(target, '.' + LISTITEM);\n\n      if (!li) {\n        return;\n      } else if (event.originalEvent.which !== 3) {\n        let rippleElement = select('.' + RIPPLEELMENT, li);\n        let rippleIcons = select('.' + ICON, li);\n        this.removeHover();\n        this.setFocusElement(li);\n\n        if (this.showCheckBox && !li.classList.contains('e-disable')) {\n          let checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n\n          if (!isNullOrUndefined(checkWrapper)) {\n            let checkElement = select('.' + CHECKBOXFRAME, checkWrapper);\n            this.validateCheckNode(checkWrapper, checkElement.classList.contains(CHECK), li, event.originalEvent);\n            this.triggerClickEvent(event.originalEvent, li);\n            return;\n          }\n        }\n\n        if (classList$$1.contains(EXPANDABLE)) {\n          this.expandAction(li, target, event);\n        } else if (classList$$1.contains(COLLAPSIBLE)) {\n          this.collapseNode(li, target, event);\n        } else if (rippleElement && rippleIcons) {\n          if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(EXPANDABLE)) {\n            this.expandAction(li, rippleIcons, event);\n          } else if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(COLLAPSIBLE)) {\n            this.collapseNode(li, rippleIcons, event);\n          } else if (!classList$$1.contains(PARENTITEM) && !classList$$1.contains(LISTITEM)) {\n            this.toggleSelect(li, event.originalEvent, false);\n          }\n        } else {\n          if (!classList$$1.contains(PARENTITEM) && !classList$$1.contains(LISTITEM)) {\n            this.toggleSelect(li, event.originalEvent, false);\n          }\n        }\n      }\n\n      this.triggerClickEvent(event.originalEvent, li);\n    }\n  }\n\n  nodeCheckedEvent(wrapper, isCheck, e) {\n    let currLi = closest(wrapper, '.' + LISTITEM);\n    let eventArgs = this.getCheckEvent(wrapper, isCheck ? 'uncheck' : 'check', e);\n    eventArgs.data = eventArgs.data.splice(0, eventArgs.data.length - 1);\n    this.trigger('nodeChecked', eventArgs);\n  }\n\n  triggerClickEvent(e, li) {\n    let eventArgs = {\n      event: e,\n      node: li\n    };\n    this.trigger('nodeClicked', eventArgs);\n  }\n\n  expandNode(currLi, icon, loaded) {\n    this.renderReactTemplates();\n\n    if (icon.classList.contains(LOAD)) {\n      this.hideSpinner(icon);\n    }\n\n    if (!this.initialRender) {\n      icon.classList.add('interaction');\n    }\n\n    if (loaded !== true || loaded === true && currLi.classList.contains('e-expanded')) {\n      if (this.preventExpand !== true) {\n        removeClass([icon], EXPANDABLE);\n        addClass([icon], COLLAPSIBLE);\n        let start = 0;\n        let end = 0;\n        let proxy = this;\n        let ul = select('.' + PARENTITEM, currLi);\n        let liEle = currLi;\n        this.setHeight(liEle, ul);\n        let activeElement = select('.' + LISTITEM + '.' + ACTIVE, currLi);\n\n        if (this.isAnimate && !this.isRefreshed) {\n          this.aniObj.animate(ul, {\n            name: this.animation.expand.effect,\n            duration: this.animation.expand.duration,\n            timingFunction: this.animation.expand.easing,\n            begin: args => {\n              liEle.style.overflow = 'hidden';\n\n              if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n                activeElement.classList.add(ITEM_ANIMATION_ACTIVE);\n              }\n\n              start = liEle.offsetHeight;\n              end = select('.' + TEXTWRAP, currLi).offsetHeight;\n            },\n            progress: args => {\n              args.element.style.display = 'block';\n              proxy.animateHeight(args, start, end);\n            },\n            end: args => {\n              args.element.style.display = 'block';\n\n              if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n                activeElement.classList.remove(ITEM_ANIMATION_ACTIVE);\n              }\n\n              this.expandedNode(liEle, ul, icon);\n            }\n          });\n        } else {\n          this.expandedNode(liEle, ul, icon);\n        }\n      }\n    } else {\n      let ul = select('.' + PARENTITEM, currLi);\n      ul.style.display = 'none';\n\n      if (this.fields.dataSource instanceof DataManager === true) {\n        this.preventExpand = false;\n      }\n    }\n\n    if (this.initialRender) {\n      icon.classList.add('interaction');\n    }\n  }\n\n  expandedNode(currLi, ul, icon) {\n    ul.style.display = 'block';\n    currLi.style.display = 'block';\n    currLi.style.overflow = '';\n    currLi.style.height = '';\n    removeClass([icon], PROCESS);\n    this.addExpand(currLi);\n\n    if (this.allowTextWrap && this.isLoaded && this.isFirstRender) {\n      this.updateWrap(currLi);\n      this.isFirstRender = false;\n    }\n\n    if (this.isLoaded && this.expandArgs && !this.isRefreshed) {\n      this.expandArgs = this.getExpandEvent(currLi, null);\n      this.trigger('nodeExpanded', this.expandArgs);\n    }\n  }\n\n  addExpand(liEle) {\n    liEle.setAttribute('aria-expanded', 'true');\n    removeClass([liEle], NODECOLLAPSED);\n    let id = liEle.getAttribute('data-uid');\n\n    if (!isNullOrUndefined(id) && this.expandedNodes.indexOf(id) === -1) {\n      this.expandedNodes.push(id);\n    }\n  }\n\n  collapseNode(currLi, icon, e) {\n    if (icon.classList.contains(PROCESS)) {\n      return;\n    } else {\n      addClass([icon], PROCESS);\n    }\n\n    let colArgs;\n\n    if (this.isLoaded) {\n      colArgs = this.getExpandEvent(currLi, e);\n      this.trigger('nodeCollapsing', colArgs, observedArgs => {\n        if (observedArgs.cancel) {\n          removeClass([icon], PROCESS);\n        } else {\n          this.nodeCollapseAction(currLi, icon, observedArgs);\n        }\n      });\n    } else {\n      this.nodeCollapseAction(currLi, icon, colArgs);\n    }\n  }\n\n  nodeCollapseAction(currLi, icon, colArgs) {\n    removeClass([icon], COLLAPSIBLE);\n    addClass([icon], EXPANDABLE);\n    let start = 0;\n    let end = 0;\n    let proxy = this;\n    let ul = select('.' + PARENTITEM, currLi);\n    let liEle = currLi;\n    let activeElement = select('.' + LISTITEM + '.' + ACTIVE, currLi);\n\n    if (this.isAnimate) {\n      this.aniObj.animate(ul, {\n        name: this.animation.collapse.effect,\n        duration: this.animation.collapse.duration,\n        timingFunction: this.animation.collapse.easing,\n        begin: args => {\n          liEle.style.overflow = 'hidden';\n\n          if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n            activeElement.classList.add(ITEM_ANIMATION_ACTIVE);\n          }\n\n          start = select('.' + TEXTWRAP, currLi).offsetHeight;\n          end = liEle.offsetHeight;\n        },\n        progress: args => {\n          proxy.animateHeight(args, start, end);\n        },\n        end: args => {\n          args.element.style.display = 'none';\n\n          if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n            activeElement.classList.remove(ITEM_ANIMATION_ACTIVE);\n          }\n\n          this.collapsedNode(liEle, ul, icon, colArgs);\n        }\n      });\n    } else {\n      this.collapsedNode(liEle, ul, icon, colArgs);\n    }\n  }\n\n  collapsedNode(liEle, ul, icon, colArgs) {\n    ul.style.display = 'none';\n    liEle.style.overflow = '';\n    liEle.style.height = '';\n    removeClass([icon], PROCESS);\n    this.removeExpand(liEle);\n\n    if (this.isLoaded) {\n      colArgs = this.getExpandEvent(liEle, null);\n      this.trigger('nodeCollapsed', colArgs);\n    }\n  }\n\n  removeExpand(liEle, toRemove) {\n    if (toRemove) {\n      liEle.removeAttribute('aria-expanded');\n    } else {\n      this.disableExpandAttr(liEle);\n    }\n\n    let index = this.expandedNodes.indexOf(liEle.getAttribute('data-uid'));\n\n    if (index > -1) {\n      this.expandedNodes.splice(index, 1);\n    }\n  }\n\n  disableExpandAttr(liEle) {\n    liEle.setAttribute('aria-expanded', 'false');\n    addClass([liEle], NODECOLLAPSED);\n  }\n\n  setHeight(currLi, ul) {\n    ul.style.display = 'block';\n    ul.style.visibility = 'hidden';\n    currLi.style.height = currLi.offsetHeight + 'px';\n    ul.style.display = 'none';\n    ul.style.visibility = '';\n  }\n\n  animateHeight(args, start, end) {\n    let remaining = (args.duration - args.timeStamp) / args.duration;\n    let currentHeight = (end - start) * remaining + start;\n    args.element.parentElement.style.height = currentHeight + 'px';\n  }\n\n  renderChildNodes(parentLi, expandChild, callback, loaded) {\n    let eicon = select('div.' + ICON, parentLi);\n\n    if (isNullOrUndefined(eicon)) {\n      return;\n    }\n\n    this.showSpinner(eicon);\n    let childItems;\n    /* eslint-disable */\n\n    if (this.fields.dataSource instanceof DataManager) {\n      let level = this.parents(parentLi, '.' + PARENTITEM).length;\n      let mapper = this.getChildFields(this.fields, level, 1);\n\n      if (isNullOrUndefined(mapper) || isNullOrUndefined(mapper.dataSource)) {\n        detach(eicon);\n        this.removeExpand(parentLi, true);\n        return;\n      }\n\n      this.treeList.push('false');\n\n      if (this.fields.dataSource instanceof DataManager && this.isOffline) {\n        this.treeList.pop();\n        childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n        this.loadChild(childItems, mapper, eicon, parentLi, expandChild, callback, loaded);\n      } else {\n        mapper.dataSource.executeQuery(this.getQuery(mapper, parentLi.getAttribute('data-uid'))).then(e => {\n          this.treeList.pop();\n          childItems = e.result;\n\n          if (this.dataType === 1) {\n            this.dataType = 2;\n          }\n\n          this.loadChild(childItems, mapper, eicon, parentLi, expandChild, callback, loaded);\n        }).catch(e => {\n          this.trigger('actionFailure', {\n            error: e\n          });\n        });\n      }\n    } else {\n      childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n      this.currentLoadData = this.getSortedData(childItems);\n\n      if (isNullOrUndefined(childItems) || childItems.length === 0) {\n        detach(eicon);\n        this.removeExpand(parentLi, true);\n        return;\n      } else {\n        this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n        parentLi.appendChild(ListBase.createList(this.createElement, this.currentLoadData, this.listBaseOption));\n        this.expandNode(parentLi, eicon, loaded);\n        this.setSelectionForChildNodes(childItems);\n        this.ensureCheckNode(parentLi);\n        this.finalizeNode(parentLi);\n        this.disableTreeNodes(childItems);\n        this.renderSubChild(parentLi, expandChild, loaded);\n      }\n    }\n  }\n\n  loadChild(childItems, mapper, eicon, parentLi, expandChild, callback, loaded) {\n    this.currentLoadData = childItems;\n\n    if (isNullOrUndefined(childItems) || childItems.length === 0) {\n      detach(eicon);\n      this.removeExpand(parentLi, true);\n    } else {\n      this.updateListProp(mapper);\n\n      if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n        let id = parentLi.getAttribute('data-uid');\n        let nodeData = this.getNodeObject(id);\n        setValue('child', childItems, nodeData);\n      }\n\n      this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n      parentLi.appendChild(ListBase.createList(this.createElement, childItems, this.listBaseOption));\n      this.expandNode(parentLi, eicon, loaded);\n      this.setSelectionForChildNodes(childItems);\n      this.ensureCheckNode(parentLi);\n      this.finalizeNode(parentLi);\n      this.disableTreeNodes(childItems);\n      this.renderSubChild(parentLi, expandChild, loaded);\n    }\n\n    if (callback) {\n      callback();\n    }\n\n    if (this.treeList.length === 0 && !this.isLoaded) {\n      this.finalize();\n    }\n  }\n\n  disableTreeNodes(childItems) {\n    let i = 0;\n\n    while (i < childItems.length) {\n      let id = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;\n\n      if (this.disableNode !== undefined && this.disableNode.indexOf(id) !== -1) {\n        this.doDisableAction([id]);\n      }\n\n      i++;\n    }\n  }\n  /**\n   * Sets the child Item in selectedState while rendering the child node\n   */\n\n\n  setSelectionForChildNodes(nodes) {\n    let i;\n\n    for (i = 0; i < nodes.length; i++) {\n      let id = nodes[i][this.fields.id] ? nodes[i][this.fields.id].toString() : null;\n\n      if (this.selectedNodes !== undefined && this.selectedNodes.indexOf(id) !== -1) {\n        this.doSelectionAction();\n      }\n    }\n  }\n\n  ensureCheckNode(element) {\n    if (this.showCheckBox) {\n      this.ele = this.checkedElement ? this.checkedElement.indexOf(element.getAttribute('data-uid')) : null;\n\n      if (this.autoCheck) {\n        this.ensureChildCheckState(element);\n        this.ensureParentCheckState(element);\n      }\n    }\n\n    this.currentLoadData = null;\n  }\n\n  getFields(mapper, nodeLevel, dataLevel) {\n    if (nodeLevel === dataLevel) {\n      return mapper;\n    } else {\n      return this.getFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n    }\n  }\n\n  getChildFields(mapper, nodeLevel, dataLevel) {\n    if (nodeLevel === dataLevel) {\n      return this.getChildMapper(mapper);\n    } else {\n      return this.getChildFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n    }\n  }\n\n  getChildMapper(mapper) {\n    return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n  }\n\n  getChildNodes(obj, parentId, isRoot = false) {\n    let childNodes;\n\n    if (isNullOrUndefined(obj)) {\n      return childNodes;\n    } else if (this.dataType === 1) {\n      return this.getChildGroup(this.groupedData, parentId, isRoot);\n    } else {\n      if (typeof this.fields.child === 'string') {\n        for (let i = 0, objlen = obj.length; i < objlen; i++) {\n          let dataId = getValue(this.fields.id, obj[i]);\n\n          if (dataId && dataId.toString() === parentId) {\n            return getValue(this.fields.child, obj[i]);\n          } else if (!isNullOrUndefined(getValue(this.fields.child, obj[i]))) {\n            childNodes = this.getChildNodes(getValue(this.fields.child, obj[i]), parentId);\n\n            if (childNodes !== undefined) {\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    return childNodes;\n  }\n\n  getChildGroup(data, parentId, isRoot) {\n    let childNodes;\n\n    if (isNullOrUndefined(data)) {\n      return childNodes;\n    }\n\n    for (let i = 0, objlen = data.length; i < objlen; i++) {\n      if (!isNullOrUndefined(data[i][0]) && !isNullOrUndefined(getValue(this.fields.parentID, data[i][0]))) {\n        if (getValue(this.fields.parentID, data[i][0]).toString() === parentId) {\n          return data[i];\n        }\n      } else if (isRoot) {\n        return data[i];\n      } else {\n        return [];\n      }\n    }\n\n    return childNodes;\n  }\n\n  renderSubChild(element, expandChild, loaded) {\n    if (expandChild) {\n      let cIcons = selectAll('.' + EXPANDABLE, element);\n\n      for (let i = 0, len = cIcons.length; i < len; i++) {\n        let icon = cIcons[i];\n\n        if (element.querySelector('.e-icons') !== cIcons[i]) {\n          let curLi = closest(icon, '.' + LISTITEM);\n          this.expandArgs = this.getExpandEvent(curLi, null);\n\n          if (loaded !== true) {\n            this.trigger('nodeExpanding', this.expandArgs);\n          }\n\n          this.renderChildNodes(curLi, expandChild, null, loaded);\n        }\n      }\n    }\n  }\n\n  toggleSelect(li, e, multiSelect) {\n    if (!li.classList.contains('e-disable')) {\n      if (this.allowMultiSelection && (e && e.ctrlKey || multiSelect) && this.isActive(li)) {\n        this.unselectNode(li, e);\n      } else {\n        this.selectNode(li, e, multiSelect);\n      }\n    }\n  }\n\n  isActive(li) {\n    return li.classList.contains(ACTIVE) ? true : false;\n  }\n\n  selectNode(li, e, multiSelect) {\n    if (isNullOrUndefined(li) || !this.allowMultiSelection && this.isActive(li) && !isNullOrUndefined(e)) {\n      this.setFocusElement(li);\n      return;\n    }\n\n    let eventArgs;\n\n    if (this.isLoaded) {\n      eventArgs = this.getSelectEvent(li, 'select', e);\n      this.trigger('nodeSelecting', eventArgs, observedArgs => {\n        if (!observedArgs.cancel) {\n          this.nodeSelectAction(li, e, observedArgs, multiSelect);\n        }\n      });\n    } else {\n      this.nodeSelectAction(li, e, eventArgs, multiSelect);\n    }\n  }\n\n  nodeSelectAction(li, e, eventArgs, multiSelect) {\n    if (!this.allowMultiSelection || !multiSelect && (!e || e && !e.ctrlKey)) {\n      this.removeSelectAll();\n    }\n\n    if (this.allowMultiSelection && e && e.shiftKey) {\n      if (!this.startNode) {\n        this.startNode = li;\n      }\n\n      let startIndex = this.liList.indexOf(this.startNode);\n      let endIndex = this.liList.indexOf(li);\n\n      if (startIndex > endIndex) {\n        let temp = startIndex;\n        startIndex = endIndex;\n        endIndex = temp;\n      }\n\n      for (let i = startIndex; i <= endIndex; i++) {\n        let currNode = this.liList[i];\n\n        if (isVisible(currNode) && !currNode.classList.contains('e-disable')) {\n          this.addSelect(currNode);\n        }\n      }\n    } else {\n      this.startNode = li;\n      this.addSelect(li);\n    }\n\n    this.setFocusElement(li);\n\n    if (this.isLoaded) {\n      eventArgs.nodeData = this.getNodeData(li);\n      this.trigger('nodeSelected', eventArgs);\n    }\n  }\n\n  unselectNode(li, e) {\n    let eventArgs;\n\n    if (this.isLoaded) {\n      eventArgs = this.getSelectEvent(li, 'un-select', e);\n      this.trigger('nodeSelecting', eventArgs, observedArgs => {\n        if (!observedArgs.cancel) {\n          this.nodeUnselectAction(li, observedArgs);\n        }\n      });\n    } else {\n      this.nodeUnselectAction(li, eventArgs);\n    }\n  }\n\n  nodeUnselectAction(li, eventArgs) {\n    this.removeSelect(li);\n    this.setFocusElement(li);\n\n    if (this.isLoaded) {\n      eventArgs.nodeData = this.getNodeData(li);\n      this.trigger('nodeSelected', eventArgs);\n    }\n  }\n\n  setFocusElement(li) {\n    if (!isNullOrUndefined(li)) {\n      let focusedNode = this.getFocusedNode();\n\n      if (focusedNode) {\n        removeClass([focusedNode], FOCUS);\n      }\n\n      addClass([li], FOCUS);\n      this.updateIdAttr(focusedNode, li);\n    }\n  }\n\n  addSelect(liEle) {\n    liEle.setAttribute('aria-selected', 'true');\n    addClass([liEle], ACTIVE);\n    let id = liEle.getAttribute('data-uid');\n\n    if (!isNullOrUndefined(id) && this.selectedNodes.indexOf(id) === -1) {\n      this.selectedNodes.push(id);\n    }\n  }\n\n  removeSelect(liEle) {\n    if (this.allowMultiSelection) {\n      liEle.setAttribute('aria-selected', 'false');\n    } else {\n      liEle.removeAttribute('aria-selected');\n    }\n\n    removeClass([liEle], ACTIVE);\n    let index = this.selectedNodes.indexOf(liEle.getAttribute('data-uid'));\n\n    if (index > -1) {\n      this.selectedNodes.splice(index, 1);\n    }\n  }\n\n  removeSelectAll() {\n    let selectedLI = this.element.querySelectorAll('.' + ACTIVE);\n\n    for (let ele of selectedLI) {\n      if (this.allowMultiSelection) {\n        ele.setAttribute('aria-selected', 'false');\n      } else {\n        ele.removeAttribute('aria-selected');\n      }\n    }\n\n    removeClass(selectedLI, ACTIVE);\n    this.setProperties({\n      selectedNodes: []\n    }, true);\n  }\n\n  getSelectEvent(currLi, action, e) {\n    let nodeData = this.getNodeData(currLi);\n    return {\n      action: action,\n      cancel: false,\n      isInteracted: isNullOrUndefined(e) ? false : true,\n      node: currLi,\n      nodeData: nodeData\n    };\n  }\n\n  setExpandOnType() {\n    this.expandOnType = this.expandOn === 'Auto' ? Browser.isDevice ? 'Click' : 'DblClick' : this.expandOn;\n  }\n\n  expandHandler(e) {\n    let target = e.originalEvent.target;\n\n    if (!target || target.classList.contains(INPUT) || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) || target.classList.contains(ICON) || this.showCheckBox && closest(target, '.' + CHECKBOXWRAP)) {\n      return;\n    } else {\n      this.expandCollapseAction(closest(target, '.' + LISTITEM), e);\n    }\n  }\n\n  expandCollapseAction(currLi, e) {\n    let icon = select('div.' + ICON, currLi);\n\n    if (!icon || icon.classList.contains(PROCESS)) {\n      return;\n    } else {\n      let classList$$1 = icon.classList;\n\n      if (classList$$1.contains(EXPANDABLE)) {\n        this.expandAction(currLi, icon, e);\n      } else if (classList$$1.contains(COLLAPSIBLE)) {\n        this.collapseNode(currLi, icon, e);\n      }\n    }\n  }\n\n  expandAction(currLi, icon, e, expandChild, callback) {\n    if (icon.classList.contains(PROCESS)) {\n      return;\n    } else {\n      addClass([icon], PROCESS);\n    }\n\n    if (this.isLoaded && !this.isRefreshed) {\n      this.expandArgs = this.getExpandEvent(currLi, e);\n      this.trigger('nodeExpanding', this.expandArgs, observedArgs => {\n        if (observedArgs.cancel) {\n          removeClass([icon], PROCESS);\n        } else {\n          this.nodeExpandAction(currLi, icon, expandChild, callback);\n        }\n      });\n    } else {\n      this.nodeExpandAction(currLi, icon, expandChild, callback);\n    }\n  }\n\n  nodeExpandAction(currLi, icon, expandChild, callback) {\n    let ul = select('.' + PARENTITEM, currLi);\n\n    if (ul && ul.nodeName === 'UL') {\n      this.expandNode(currLi, icon);\n    } else {\n      this.isFirstRender = true;\n      this.renderChildNodes(currLi, expandChild, callback);\n      let liEles = selectAll('.' + LISTITEM, currLi);\n\n      for (let i = 0; i < liEles.length; i++) {\n        let id = this.getId(liEles[i]);\n\n        if (this.expandChildren.indexOf(id) !== -1 && this.expandChildren !== undefined) {\n          let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, liEles[i]));\n\n          if (!isNullOrUndefined(icon)) {\n            this.expandAction(liEles[i], icon, null);\n          }\n\n          this.expandChildren.splice(this.expandChildren.indexOf(id), 1);\n        }\n      }\n    }\n  }\n\n  keyActionHandler(e) {\n    let target = e.target;\n    let focusedNode = this.getFocusedNode();\n\n    if (target && target.classList.contains(INPUT)) {\n      let inpEle = target;\n\n      if (e.action === 'enter') {\n        inpEle.blur();\n        this.element.focus();\n        addClass([focusedNode], HOVER);\n      } else if (e.action === 'escape') {\n        inpEle.value = this.oldText;\n        inpEle.blur();\n        this.element.focus();\n        addClass([focusedNode], HOVER);\n      }\n\n      return;\n    }\n\n    e.preventDefault();\n    let eventArgs = {\n      cancel: false,\n      event: e,\n      node: focusedNode\n    };\n    this.trigger('keyPress', eventArgs, observedArgs => {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'space':\n            if (this.showCheckBox) {\n              this.checkNode(e);\n            }\n\n            break;\n\n          case 'moveRight':\n            this.openNode(this.enableRtl ? false : true, e);\n            break;\n\n          case 'moveLeft':\n            this.openNode(this.enableRtl ? true : false, e);\n            break;\n\n          case 'shiftDown':\n            this.shiftKeySelect(true, e);\n            break;\n\n          case 'moveDown':\n          case 'ctrlDown':\n          case 'csDown':\n            this.navigateNode(true);\n            break;\n\n          case 'shiftUp':\n            this.shiftKeySelect(false, e);\n            break;\n\n          case 'moveUp':\n          case 'ctrlUp':\n          case 'csUp':\n            this.navigateNode(false);\n            break;\n\n          case 'home':\n          case 'shiftHome':\n          case 'ctrlHome':\n          case 'csHome':\n            this.navigateRootNode(true);\n            break;\n\n          case 'end':\n          case 'shiftEnd':\n          case 'ctrlEnd':\n          case 'csEnd':\n            this.navigateRootNode(false);\n            break;\n\n          case 'enter':\n          case 'ctrlEnter':\n          case 'shiftEnter':\n          case 'csEnter':\n            this.toggleSelect(focusedNode, e);\n            break;\n\n          case 'f2':\n            if (this.allowEditing && !focusedNode.classList.contains('e-disable')) {\n              this.createTextbox(focusedNode, e);\n            }\n\n            break;\n\n          case 'ctrlA':\n            if (this.allowMultiSelection) {\n              let sNodes = selectAll('.' + LISTITEM + ':not(.' + ACTIVE + ')', this.element);\n              this.selectGivenNodes(sNodes);\n            }\n\n            break;\n        }\n      }\n    });\n  }\n\n  navigateToFocus(isUp) {\n    let focusNode = this.getFocusedNode().querySelector('.' + TEXTWRAP);\n    let pos = focusNode.getBoundingClientRect();\n    let parent = this.getScrollParent(this.element);\n\n    if (!isNullOrUndefined(parent)) {\n      let parentPos = parent.getBoundingClientRect();\n\n      if (pos.bottom > parentPos.bottom) {\n        parent.scrollTop += pos.bottom - parentPos.bottom;\n      } else if (pos.top < parentPos.top) {\n        parent.scrollTop -= parentPos.top - pos.top;\n      }\n    }\n\n    let isVisible$$1 = this.isVisibleInViewport(focusNode);\n\n    if (!isVisible$$1) {\n      focusNode.scrollIntoView(isUp);\n    }\n  }\n\n  isVisibleInViewport(txtWrap) {\n    let pos = txtWrap.getBoundingClientRect();\n    return pos.top >= 0 && pos.left >= 0 && pos.bottom <= (window.innerHeight || document.documentElement.clientHeight) && pos.right <= (window.innerWidth || document.documentElement.clientWidth);\n  }\n\n  getScrollParent(node) {\n    if (isNullOrUndefined(node)) {\n      return null;\n    }\n\n    return node.scrollHeight > node.clientHeight ? node : this.getScrollParent(node.parentElement);\n  }\n\n  shiftKeySelect(isTowards, e) {\n    if (this.allowMultiSelection) {\n      let focusedNode = this.getFocusedNode();\n      let nextNode = isTowards ? this.getNextNode(focusedNode) : this.getPrevNode(focusedNode);\n      this.removeHover();\n      this.setFocusElement(nextNode);\n      this.toggleSelect(nextNode, e, false);\n      this.navigateToFocus(!isTowards);\n    } else {\n      this.navigateNode(isTowards);\n    }\n  }\n\n  checkNode(e) {\n    let focusedNode = this.getFocusedNode();\n    let checkWrap = select('.' + CHECKBOXWRAP, focusedNode);\n    let isChecked = select(' .' + CHECKBOXFRAME, checkWrap).classList.contains(CHECK);\n\n    if (!focusedNode.classList.contains('e-disable')) {\n      if (focusedNode.getElementsByClassName(\"e-checkbox-disabled\").length == 0) {\n        this.validateCheckNode(checkWrap, isChecked, focusedNode, e);\n      }\n    }\n  }\n\n  validateCheckNode(checkWrap, isCheck, li, e) {\n    let currLi = closest(checkWrap, '.' + LISTITEM);\n    this.checkActionNodes = [];\n    let ariaState = !isCheck ? 'true' : 'false';\n\n    if (!isNullOrUndefined(ariaState)) {\n      checkWrap.setAttribute('aria-checked', ariaState);\n    }\n\n    let eventArgs = this.getCheckEvent(currLi, isCheck ? 'uncheck' : 'check', e);\n    this.trigger('nodeChecking', eventArgs, observedArgs => {\n      if (!observedArgs.cancel) {\n        this.nodeCheckingAction(checkWrap, isCheck, li, observedArgs, e);\n      }\n    });\n  }\n\n  nodeCheckingAction(checkWrap, isCheck, li, eventArgs, e) {\n    if (this.checkedElement.indexOf(li.getAttribute('data-uid')) === -1) {\n      this.checkedElement.push(li.getAttribute('data-uid'));\n\n      if (this.autoCheck) {\n        let child = this.getChildNodes(this.treeData, li.getAttribute('data-uid'));\n        child !== null ? this.allCheckNode(child, this.checkedElement, null, null, false) : child = null;\n      }\n    }\n\n    this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true);\n\n    if (this.autoCheck) {\n      this.ensureChildCheckState(li);\n      this.ensureParentCheckState(closest(closest(li, '.' + PARENTITEM), '.' + LISTITEM));\n      let doCheck;\n\n      if (eventArgs.action === 'check') {\n        doCheck = true;\n      } else if (eventArgs.action === 'uncheck') {\n        doCheck = false;\n      }\n\n      this.ensureStateChange(li, doCheck);\n    }\n\n    this.nodeCheckedEvent(checkWrap, isCheck, e);\n  }\n  /**\n   * Update checkedNodes when UI interaction happens before the child node renders in DOM\n   */\n\n\n  ensureStateChange(li, doCheck) {\n    let childElement = select('.' + PARENTITEM, li);\n    let parentIndex = li.getAttribute('data-uid');\n    let mapper = this.fields;\n\n    if (this.dataType === 1 && this.autoCheck) {\n      let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.parentID, 'equal', parentIndex, true));\n\n      for (let i = 0; i < resultData.length; i++) {\n        let resultId = resultData[i][this.fields.id] ? resultData[i][this.fields.id].toString() : null;\n        let isCheck = resultData[i][this.fields.isChecked] ? resultData[i][this.fields.isChecked].toString() : null;\n\n        if (this.checkedNodes.indexOf(parentIndex) !== -1 && this.checkedNodes.indexOf(resultId) === -1) {\n          this.checkedNodes.push(resultId);\n          let childItems = this.getChildNodes(this.treeData, resultId);\n          this.getChildItems(childItems, doCheck);\n\n          if (this.parentNodeCheck.indexOf(resultId) !== -1) {\n            this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(resultId), 1);\n          }\n        } else if (this.checkedNodes.indexOf(parentIndex) === -1 && childElement === null && this.checkedNodes.indexOf(resultId) !== -1) {\n          this.checkedNodes.splice(this.checkedNodes.indexOf(resultId), 1);\n\n          if (isCheck === 'true') {\n            this.updateField(this.treeData, this.fields, resultId, 'isChecked', null);\n          }\n\n          if (this.checkedNodes.indexOf(parentIndex) === -1 && childElement === null || this.parentNodeCheck.indexOf(resultId) !== -1) {\n            let childNodes = this.getChildNodes(this.treeData, resultId);\n            this.getChildItems(childNodes, doCheck);\n\n            if (this.parentNodeCheck.indexOf(resultId) !== -1) {\n              this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(resultId), 1);\n            }\n          }\n        } else {\n          let childItems = this.getChildNodes(this.treeData, resultId);\n          this.getChildItems(childItems, doCheck);\n        }\n      }\n    } else if (this.dataType === 1 && !this.autoCheck) {\n      if (!doCheck) {\n        let checkedData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.isChecked, 'equal', true, false));\n\n        for (let i = 0; i < checkedData.length; i++) {\n          let id = checkedData[i][this.fields.id] ? checkedData[i][this.fields.id].toString() : null;\n\n          if (this.checkedNodes.indexOf(id) !== -1) {\n            this.checkedNodes.splice(this.checkedNodes.indexOf(id), 1);\n          }\n\n          this.updateField(this.treeData, this.fields, id, 'isChecked', null);\n        }\n\n        this.checkedNodes = [];\n      } else {\n        for (let i = 0; i < this.treeData.length; i++) {\n          let checkedId = this.treeData[i][this.fields.id] ? this.treeData[i][this.fields.id].toString() : null;\n\n          if (this.checkedNodes.indexOf(checkedId) === -1) {\n            this.checkedNodes.push(checkedId);\n          }\n        }\n      }\n    } else {\n      let childItems = this.getChildNodes(this.treeData, parentIndex);\n\n      if (childItems) {\n        this.childStateChange(childItems, parentIndex, childElement, doCheck);\n      }\n    }\n  }\n\n  getChildItems(childItems, doCheck) {\n    for (let i = 0; i < childItems.length; i++) {\n      let childId = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;\n      let childIsCheck = childItems[i][this.fields.isChecked] ? childItems[i][this.fields.isChecked].toString() : null;\n\n      if (this.checkedNodes.indexOf(childId) !== -1 && !doCheck) {\n        this.checkedNodes.splice(this.checkedNodes.indexOf(childId), 1);\n      }\n\n      if (this.checkedNodes.indexOf(childId) === -1 && doCheck) {\n        this.checkedNodes.push(childId);\n      }\n\n      if (childIsCheck === 'true' && !doCheck) {\n        this.updateField(this.treeData, this.fields, childId, 'isChecked', null);\n      }\n\n      let subChildItems = this.getChildNodes(this.treeData, childId);\n\n      if (subChildItems.length > 0) {\n        this.getChildItems(subChildItems, doCheck);\n      }\n    }\n  }\n  /**\n   * Update checkedNodes when UI interaction happens before the child node renders in DOM for hierarchical DS\n   */\n\n\n  childStateChange(childItems, parent, childElement, doCheck) {\n    for (let i = 0; i < childItems.length; i++) {\n      let checkedChild = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : '';\n      let isCheck = childItems[i][this.fields.isChecked] ? childItems[i][this.fields.isChecked].toString() : null;\n\n      if (this.autoCheck) {\n        if (this.checkedNodes.indexOf(parent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1) {\n          this.checkedNodes.push(checkedChild);\n\n          if (this.parentNodeCheck.indexOf(checkedChild) !== -1) {\n            this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(checkedChild), 1);\n          }\n        } else if (this.checkedNodes.indexOf(parent) === -1 && this.checkedNodes.indexOf(checkedChild) !== -1 && !doCheck) {\n          this.checkedNodes.splice(this.checkedNodes.indexOf(checkedChild), 1);\n\n          if (isCheck === 'true') {\n            this.updateField(this.treeData, this.fields, checkedChild, 'isChecked', null);\n          }\n        }\n      } else if (!this.autoCheck) {\n        if (!doCheck) {\n          if (this.checkedNodes.indexOf(checkedChild) !== -1) {\n            this.checkedNodes.splice(this.checkedNodes.indexOf(checkedChild), 1);\n          }\n\n          this.updateField(this.treeData, this.fields, checkedChild, 'isChecked', null);\n          this.checkedNodes = [];\n        } else {\n          if (this.checkedNodes.indexOf(checkedChild) === -1) {\n            this.checkedNodes.push(checkedChild);\n          }\n        }\n      }\n\n      let subChild = this.getChildNodes([childItems[i]], checkedChild);\n\n      if (subChild) {\n        this.childStateChange(subChild, parent, childElement, doCheck);\n      }\n    }\n  } //This method can be used to get all child nodes of a parent by passing the children of a parent along with 'validateCheck' set to false\n\n\n  allCheckNode(child, newCheck, checked, childCheck, validateCheck) {\n    if (child) {\n      for (let length = 0; length < child.length; length++) {\n        let childId = getValue(this.fields.id, child[length]);\n        let check = this.element.querySelector('[data-uid=\"' + childId + '\"]'); //Validates isChecked case while no UI interaction has been performed on the node or it's parent\n\n        if (validateCheck !== false && this.checkedElement.indexOf(childId.toString()) === -1) {\n          if (check === null && !isNullOrUndefined(child[length][this.fields.isChecked]) && newCheck.indexOf(childId.toString()) === -1 || childCheck === 0 || checked === 2) {\n            child[length][this.fields.isChecked] !== false || checked === 2 ? newCheck.push(childId.toString()) : childCheck = null;\n            childCheck = child[length][this.fields.isChecked] !== false || checked === 2 ? 0 : null;\n          }\n        } //Pushes child checked node done thro' UI interaction\n\n\n        if (newCheck.indexOf(childId.toString()) === -1 && isNullOrUndefined(checked)) {\n          newCheck.push(childId.toString());\n        }\n\n        let hierChildId = getValue(this.fields.child.toString(), child[length]); //Gets if any next level children are available for child nodes\n\n        if (getValue(this.fields.hasChildren, child[length]) === true || hierChildId) {\n          let id = getValue(this.fields.id, child[length]);\n          let childId;\n\n          if (this.dataType === 1) {\n            childId = this.getChildNodes(this.treeData, id.toString());\n          } else {\n            childId = hierChildId;\n          }\n\n          if (childId) {\n            isNullOrUndefined(validateCheck) ? this.allCheckNode(childId, newCheck, checked, childCheck) : this.allCheckNode(childId, newCheck, checked, childCheck, validateCheck);\n            childCheck = null;\n          }\n        }\n\n        childCheck = null;\n      }\n    }\n  }\n\n  openNode(toBeOpened, e) {\n    let focusedNode = this.getFocusedNode();\n    let icon = select('div.' + ICON, focusedNode);\n\n    if (toBeOpened) {\n      if (!icon) {\n        return;\n      } else if (icon.classList.contains(EXPANDABLE)) {\n        this.expandAction(focusedNode, icon, e);\n      } else {\n        this.focusNextNode(focusedNode, true);\n      }\n    } else {\n      if (icon && icon.classList.contains(COLLAPSIBLE)) {\n        this.collapseNode(focusedNode, icon, e);\n      } else {\n        let parentLi = closest(closest(focusedNode, '.' + PARENTITEM), '.' + LISTITEM);\n\n        if (!parentLi) {\n          return;\n        } else {\n          if (!parentLi.classList.contains('e-disable')) {\n            this.setFocus(focusedNode, parentLi);\n            this.navigateToFocus(true);\n          }\n        }\n      }\n    }\n  }\n\n  navigateNode(isTowards) {\n    let focusedNode = this.getFocusedNode();\n    this.focusNextNode(focusedNode, isTowards);\n  }\n\n  navigateRootNode(isBackwards) {\n    let focusedNode = this.getFocusedNode();\n    let rootNode = isBackwards ? this.getRootNode() : this.getEndNode();\n\n    if (!rootNode.classList.contains('e-disable')) {\n      this.setFocus(focusedNode, rootNode);\n      this.navigateToFocus(isBackwards);\n    }\n  }\n\n  getFocusedNode() {\n    let selectedItem;\n    let fNode = select('.' + LISTITEM + '.' + FOCUS, this.element);\n\n    if (isNullOrUndefined(fNode)) {\n      selectedItem = select('.' + LISTITEM, this.element);\n    }\n\n    return isNullOrUndefined(fNode) ? isNullOrUndefined(selectedItem) ? this.element.firstElementChild : selectedItem : fNode;\n  }\n\n  focusNextNode(li, isTowards) {\n    let nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);\n    this.setFocus(li, nextNode);\n    this.navigateToFocus(!isTowards);\n\n    if (nextNode.classList.contains('e-disable')) {\n      let lastChild = nextNode.lastChild;\n\n      if (nextNode.previousSibling == null && nextNode.classList.contains('e-level-1')) {\n        this.focusNextNode(nextNode, true);\n      } else if (nextNode.nextSibling == null && nextNode.classList.contains('e-node-collapsed')) {\n        this.focusNextNode(nextNode, false);\n      } else if (nextNode.nextSibling == null && lastChild.classList.contains(TEXTWRAP)) {\n        this.focusNextNode(nextNode, false);\n      } else {\n        this.focusNextNode(nextNode, isTowards);\n      }\n    }\n  }\n\n  getNextNode(li) {\n    let index = this.liList.indexOf(li);\n    let nextNode;\n\n    do {\n      index++;\n      nextNode = this.liList[index];\n\n      if (isNullOrUndefined(nextNode)) {\n        return li;\n      }\n    } while (!isVisible(nextNode));\n\n    return nextNode;\n  }\n\n  getPrevNode(li) {\n    let index = this.liList.indexOf(li);\n    let prevNode;\n\n    do {\n      index--;\n      prevNode = this.liList[index];\n\n      if (isNullOrUndefined(prevNode)) {\n        return li;\n      }\n    } while (!isVisible(prevNode));\n\n    return prevNode;\n  }\n\n  getRootNode() {\n    let index = 0;\n    let rootNode;\n\n    do {\n      rootNode = this.liList[index];\n      index++;\n    } while (!isVisible(rootNode));\n\n    return rootNode;\n  }\n\n  getEndNode() {\n    let index = this.liList.length - 1;\n    let endNode;\n\n    do {\n      endNode = this.liList[index];\n      index--;\n    } while (!isVisible(endNode));\n\n    return endNode;\n  }\n\n  setFocus(preNode, nextNode) {\n    removeClass([preNode], [HOVER, FOCUS]);\n\n    if (!nextNode.classList.contains('e-disable')) {\n      addClass([nextNode], [HOVER, FOCUS]);\n      this.updateIdAttr(preNode, nextNode);\n    }\n  }\n\n  updateIdAttr(preNode, nextNode) {\n    this.element.removeAttribute('aria-activedescendant');\n\n    if (preNode) {\n      preNode.removeAttribute('id');\n    }\n\n    nextNode.setAttribute('id', this.element.id + '_active');\n    this.element.setAttribute('aria-activedescendant', this.element.id + '_active');\n  }\n\n  focusIn() {\n    if (!this.mouseDownStatus) {\n      addClass([this.getFocusedNode()], HOVER);\n    }\n\n    this.mouseDownStatus = false;\n  }\n\n  focusOut() {\n    removeClass([this.getFocusedNode()], HOVER);\n  }\n\n  onMouseOver(e) {\n    let target = e.target;\n    let classList$$1 = target.classList;\n    let currentLi = closest(target, '.' + LISTITEM);\n\n    if (!currentLi || classList$$1.contains(PARENTITEM) || classList$$1.contains(LISTITEM)) {\n      this.removeHover();\n      return;\n    } else {\n      if (currentLi && !currentLi.classList.contains('e-disable')) {\n        this.setHover(currentLi);\n      }\n    }\n  }\n\n  setHover(li) {\n    if (!li.classList.contains(HOVER)) {\n      this.removeHover();\n      addClass([li], HOVER);\n    }\n  }\n\n  onMouseLeave(e) {\n    this.removeHover();\n  }\n\n  removeHover() {\n    let hoveredNode = selectAll('.' + HOVER, this.element);\n\n    if (hoveredNode && hoveredNode.length) {\n      removeClass(hoveredNode, HOVER);\n    }\n  }\n\n  getNodeData(currLi, fromDS) {\n    if (!isNullOrUndefined(currLi) && currLi.classList.contains(LISTITEM) && !isNullOrUndefined(closest(currLi, '.' + CONTROL)) && closest(currLi, '.' + CONTROL).classList.contains(ROOT)) {\n      let id = currLi.getAttribute('data-uid');\n      let text = this.getText(currLi, fromDS);\n      let pNode = closest(currLi.parentNode, '.' + LISTITEM);\n      let pid = pNode ? pNode.getAttribute('data-uid') : null;\n      let selected = currLi.classList.contains(ACTIVE);\n      let expanded = currLi.getAttribute('aria-expanded') === 'true' ? true : false;\n      let hasChildren = currLi.getAttribute('aria-expanded') !== null ? true : (select('.' + EXPANDABLE, currLi) || select('.' + COLLAPSIBLE, currLi)) != null ? true : false;\n      let checked = null;\n\n      if (this.showCheckBox) {\n        checked = select('.' + CHECKBOXWRAP, currLi).getAttribute('aria-checked');\n      }\n\n      return {\n        id: id,\n        text: text,\n        parentID: pid,\n        selected: selected,\n        expanded: expanded,\n        isChecked: checked,\n        hasChildren: hasChildren\n      };\n    }\n\n    return {\n      id: '',\n      text: '',\n      parentID: '',\n      selected: false,\n      expanded: false,\n      isChecked: '',\n      hasChildren: false\n    };\n  }\n\n  getText(currLi, fromDS) {\n    if (fromDS) {\n      let nodeData = this.getNodeObject(currLi.getAttribute('data-uid'));\n      let level = parseFloat(currLi.getAttribute('aria-level'));\n      let nodeFields = this.getFields(this.fields, level, 1);\n      return getValue(nodeFields.text, nodeData);\n    }\n\n    return select('.' + LISTTEXT, currLi).textContent;\n  }\n\n  getExpandEvent(currLi, e) {\n    let nodeData = this.getNodeData(currLi);\n    return {\n      cancel: false,\n      isInteracted: isNullOrUndefined(e) ? false : true,\n      node: currLi,\n      nodeData: nodeData,\n      event: e\n    };\n  }\n\n  renderNodeTemplate(data, textEle, dataId) {\n    let tempArr = this.nodeTemplateFn(data, this, 'nodeTemplate' + dataId, this.element.id + 'nodeTemplate', this.isStringTemplate, undefined, textEle, this.root);\n\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, textEle);\n    }\n  }\n\n  destroyTemplate(liEle) {\n    this.clearTemplate(['nodeTemplate' + liEle.getAttribute('data-uid')]);\n  }\n\n  reRenderNodes() {\n    this.updateListProp(this.fields);\n\n    if (Browser.isIE) {\n      this.ulElement = this.element.querySelector('.e-list-parent.e-ul');\n      this.ulElement.parentElement.removeChild(this.ulElement);\n    } else {\n      this.element.innerHTML = '';\n    }\n\n    if (!isNullOrUndefined(this.nodeTemplateFn)) {\n      this.clearTemplate();\n    }\n\n    this.setTouchClass();\n    this.setProperties({\n      selectedNodes: [],\n      checkedNodes: [],\n      expandedNodes: []\n    }, true);\n    this.checkedElement = [];\n    this.isLoaded = false;\n    this.setDataBinding(true);\n  }\n\n  setCssClass(oldClass, newClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass([this.element], oldClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(newClass) && newClass !== '') {\n      addClass([this.element], newClass.split(' '));\n    }\n  }\n\n  editingHandler(e) {\n    let target = e.target;\n\n    if (!target || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) || target.classList.contains(ICON) || target.classList.contains(INPUT) || target.classList.contains(INPUTGROUP)) {\n      return;\n    } else {\n      let liEle = closest(target, '.' + LISTITEM);\n      this.createTextbox(liEle, e);\n    }\n  }\n\n  createTextbox(liEle, e) {\n    let oldInpEle = select('.' + TREEINPUT, this.element);\n\n    if (oldInpEle) {\n      oldInpEle.blur();\n    }\n\n    let textEle = select('.' + LISTTEXT, liEle);\n    this.updateOldText(liEle);\n    let innerEle = this.createElement('input', {\n      className: TREEINPUT,\n      attrs: {\n        value: this.oldText\n      }\n    });\n    let eventArgs = this.getEditEvent(liEle, null, innerEle.outerHTML);\n    this.trigger('nodeEditing', eventArgs, observedArgs => {\n      if (!observedArgs.cancel) {\n        let inpWidth = textEle.offsetWidth + 5;\n        let style = 'width:' + inpWidth + 'px';\n        addClass([liEle], EDITING);\n\n        if (!isNullOrUndefined(this.nodeTemplateFn)) {\n          this.destroyTemplate(liEle);\n        }\n\n        textEle.innerHTML = eventArgs.innerHtml;\n        let inpEle = select('.' + TREEINPUT, textEle);\n        this.inputObj = Input.createInput({\n          element: inpEle,\n          properties: {\n            enableRtl: this.enableRtl\n          }\n        }, this.createElement);\n        this.inputObj.container.setAttribute('style', style);\n        inpEle.focus();\n        let inputEle = inpEle;\n        inputEle.setSelectionRange(0, inputEle.value.length);\n        this.wireInputEvents(inpEle);\n      }\n    });\n  }\n\n  updateOldText(liEle) {\n    let id = liEle.getAttribute('data-uid');\n    this.editData = this.getNodeObject(id);\n    let level = parseFloat(liEle.getAttribute('aria-level'));\n    this.editFields = this.getFields(this.fields, level, 1);\n    this.oldText = getValue(this.editFields.text, this.editData);\n  }\n\n  inputFocusOut(e) {\n    if (!select('.' + TREEINPUT, this.element)) {\n      return;\n    }\n\n    let target = e.target;\n    let newText = target.value;\n    let txtEle = closest(target, '.' + LISTTEXT);\n    let liEle = closest(target, '.' + LISTITEM);\n    detach(this.inputObj.container);\n\n    if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n      this.crudOperation('update', null, liEle, newText, null, null, true);\n    } else {\n      this.appendNewText(liEle, txtEle, newText, true);\n    }\n  }\n\n  appendNewText(liEle, txtEle, newText, isInput) {\n    let eventArgs = this.getEditEvent(liEle, newText, null);\n    this.trigger('nodeEdited', eventArgs, observedArgs => {\n      newText = observedArgs.cancel ? observedArgs.oldText : observedArgs.newText;\n      this.updateText(liEle, txtEle, newText, isInput);\n\n      if (observedArgs.oldText !== newText) {\n        this.triggerEvent();\n      }\n    });\n  }\n\n  updateText(liEle, txtEle, newText, isInput) {\n    let newData = setValue(this.editFields.text, newText, this.editData);\n\n    if (!isNullOrUndefined(this.nodeTemplateFn)) {\n      txtEle.innerText = '';\n      let dataId = liEle.getAttribute('data-uid');\n      this.renderNodeTemplate(newData, txtEle, dataId);\n      this.renderReactTemplates();\n    } else {\n      txtEle.innerText = newText;\n    }\n\n    if (isInput) {\n      removeClass([liEle], EDITING);\n      txtEle.focus();\n    }\n\n    if (this.allowTextWrap) {\n      this.calculateWrap(liEle);\n    }\n  }\n\n  getElement(ele) {\n    if (isNullOrUndefined(ele)) {\n      return null;\n    } else if (typeof ele === 'string') {\n      return this.element.querySelector('[data-uid=\"' + ele + '\"]');\n    } else if (typeof ele === 'object') {\n      return getElement(ele);\n    } else {\n      return null;\n    }\n  }\n\n  getId(ele) {\n    if (isNullOrUndefined(ele)) {\n      return null;\n    } else if (typeof ele === 'string') {\n      return ele;\n    } else if (typeof ele === 'object') {\n      return getElement(ele).getAttribute('data-uid');\n    } else {\n      return null;\n    }\n  }\n\n  getEditEvent(liEle, newText, inpEle) {\n    let data = this.getNodeData(liEle);\n    return {\n      cancel: false,\n      newText: newText,\n      node: liEle,\n      nodeData: data,\n      oldText: this.oldText,\n      innerHtml: inpEle\n    };\n  }\n\n  getNodeObject(id) {\n    let childNodes;\n\n    if (isNullOrUndefined(id)) {\n      return childNodes;\n    } else if (this.dataType === 1) {\n      for (let i = 0, objlen = this.treeData.length; i < objlen; i++) {\n        let dataId = getValue(this.fields.id, this.treeData[i]);\n\n        if (!isNullOrUndefined(this.treeData[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n          return this.treeData[i];\n        }\n      }\n    } else {\n      return this.getChildNodeObject(this.treeData, this.fields, id);\n    }\n\n    return childNodes;\n  }\n\n  getChildNodeObject(obj, mapper, id) {\n    let newList;\n\n    if (isNullOrUndefined(obj)) {\n      return newList;\n    }\n\n    for (let i = 0, objlen = obj.length; i < objlen; i++) {\n      let dataId = getValue(mapper.id, obj[i]);\n\n      if (obj[i] && dataId && dataId.toString() === id) {\n        return obj[i];\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        let childData = getValue(mapper.child, obj[i]);\n        newList = this.getChildNodeObject(childData, this.getChildMapper(mapper), id);\n\n        if (newList !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        let child = 'child';\n        newList = this.getChildNodeObject(getValue(child, obj[i]), this.getChildMapper(mapper), id);\n\n        if (newList !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return newList;\n  }\n\n  setDragAndDrop(toBind) {\n    if (toBind && !this.disabled) {\n      this.initializeDrag();\n    } else {\n      this.destroyDrag();\n    }\n  }\n\n  initializeDrag() {\n    let virtualEle;\n    let proxy = this;\n    this.dragObj = new Draggable(this.element, {\n      enableTailMode: true,\n      enableAutoScroll: true,\n      dragArea: this.dragArea,\n      dragTarget: '.' + TEXTWRAP,\n      helper: e => {\n        this.dragTarget = e.sender.target;\n        let dragRoot = closest(this.dragTarget, '.' + ROOT);\n        let dragWrap = closest(this.dragTarget, '.' + TEXTWRAP);\n        this.dragLi = closest(this.dragTarget, '.' + LISTITEM);\n\n        if (this.fullRowSelect && !dragWrap && this.dragTarget.classList.contains(FULLROW)) {\n          dragWrap = this.dragTarget.nextElementSibling;\n        }\n\n        if (!this.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap || this.dragTarget.classList.contains(ROOT) || this.dragTarget.classList.contains(PARENTITEM) || this.dragTarget.classList.contains(LISTITEM) || this.dragLi.classList.contains('e-disable')) {\n          return false;\n        }\n\n        let cloneEle = dragWrap.cloneNode(true);\n\n        if (isNullOrUndefined(select('div.' + ICON, cloneEle))) {\n          let icon = proxy.createElement('div', {\n            className: ICON + ' ' + EXPANDABLE\n          });\n          cloneEle.insertBefore(icon, cloneEle.children[0]);\n        }\n\n        let cssClass = DRAGITEM + ' ' + ROOT + ' ' + this.cssClass + ' ' + (this.enableRtl ? RTL$1 : '');\n        virtualEle = proxy.createElement('div', {\n          className: cssClass\n        });\n        virtualEle.appendChild(cloneEle);\n        let nLen = this.selectedNodes.length;\n\n        if (nLen > 1 && this.allowMultiSelection && this.dragLi.classList.contains(ACTIVE)) {\n          let cNode = proxy.createElement('span', {\n            className: DROPCOUNT,\n            innerHTML: '' + nLen\n          });\n          virtualEle.appendChild(cNode);\n        }\n\n        document.body.appendChild(virtualEle);\n        document.body.style.cursor = '';\n        this.dragData = this.getNodeData(this.dragLi);\n        return virtualEle;\n      },\n      dragStart: e => {\n        addClass([this.element], DRAGGING);\n        let listItem = closest(e.target, '.e-list-item');\n        let level;\n\n        if (listItem) {\n          level = parseInt(listItem.getAttribute('aria-level'), 10);\n        }\n\n        let eventArgs = this.getDragEvent(e.event, this, null, e.target, null, virtualEle, level);\n\n        if (eventArgs.draggedNode.classList.contains(EDITING)) {\n          this.dragObj.intDestroy(e.event);\n          this.dragCancelAction(virtualEle);\n        } else {\n          this.trigger('nodeDragStart', eventArgs, observedArgs => {\n            if (observedArgs.cancel) {\n              this.dragObj.intDestroy(e.event);\n              this.dragCancelAction(virtualEle);\n            } else {\n              this.dragStartAction = true;\n            }\n          });\n        }\n      },\n      drag: e => {\n        this.dragObj.setProperties({\n          cursorAt: {\n            top: !isNullOrUndefined(e.event.targetTouches) || Browser.isDevice ? 60 : -20\n          }\n        });\n        this.dragAction(e, virtualEle);\n      },\n      dragStop: e => {\n        removeClass([this.element], DRAGGING);\n        this.removeVirtualEle();\n        let dropTarget = e.target;\n        let preventTargetExpand = false;\n        let dropRoot = closest(dropTarget, '.' + DROPPABLE);\n\n        if (!dropTarget || !dropRoot) {\n          detach(e.helper);\n          document.body.style.cursor = '';\n        }\n\n        let listItem = closest(dropTarget, '.e-list-item');\n        let level;\n\n        if (listItem) {\n          level = parseInt(listItem.getAttribute('aria-level'), 10);\n        }\n\n        let eventArgs = this.getDragEvent(e.event, this, dropTarget, dropTarget, null, e.helper, level);\n        eventArgs.preventTargetExpand = preventTargetExpand;\n        this.trigger('nodeDragStop', eventArgs, observedArgs => {\n          this.dragParent = observedArgs.draggedParentNode;\n          this.preventExpand = observedArgs.preventTargetExpand;\n\n          if (observedArgs.cancel) {\n            if (e.helper.parentNode) {\n              detach(e.helper);\n            }\n\n            document.body.style.cursor = '';\n          }\n\n          this.dragStartAction = false;\n        });\n      }\n    });\n    this.dropObj = new Droppable(this.element, {\n      out: e => {\n        if (!isNullOrUndefined(e) && !e.target.classList.contains(SIBLING)) {\n          document.body.style.cursor = 'not-allowed';\n        }\n      },\n      over: e => {\n        document.body.style.cursor = '';\n      },\n      drop: e => {\n        this.dropAction(e);\n      }\n    });\n  }\n\n  dragCancelAction(virtualEle) {\n    detach(virtualEle);\n    removeClass([this.element], DRAGGING);\n    this.dragStartAction = false;\n  }\n\n  dragAction(e, virtualEle) {\n    let dropRoot = closest(e.target, '.' + DROPPABLE);\n    let dropWrap = closest(e.target, '.' + TEXTWRAP);\n    let icon = select('div.' + ICON, virtualEle);\n    removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);\n    this.removeVirtualEle();\n    document.body.style.cursor = '';\n    let classList$$1 = e.target.classList;\n\n    if (this.fullRowSelect && !dropWrap && !isNullOrUndefined(classList$$1) && classList$$1.contains(FULLROW)) {\n      dropWrap = e.target.nextElementSibling;\n    }\n\n    if (dropRoot) {\n      let dropLi = closest(e.target, '.' + LISTITEM);\n      let checkWrapper = closest(e.target, '.' + CHECKBOXWRAP);\n      let collapse = closest(e.target, '.' + COLLAPSIBLE);\n      let expand = closest(e.target, '.' + EXPANDABLE);\n\n      if (!dropRoot.classList.contains(ROOT) || dropWrap && !dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)) {\n        if (this.hasTemplate && dropLi) {\n          let templateTarget = select(this.fullRowSelect ? '.' + FULLROW : '.' + TEXTWRAP, dropLi);\n\n          if (e && !expand && !collapse && e.event.offsetY < 7 && !checkWrapper || expand && e.event.offsetY < 5 || collapse && e.event.offsetX < 3) {\n            let index = this.fullRowSelect ? 1 : 0;\n            this.appendIndicator(dropLi, icon, index);\n          } else if (e && !expand && !collapse && !checkWrapper && templateTarget && e.event.offsetY > templateTarget.offsetHeight - 10 || expand && e.event.offsetY > 19 || collapse && e.event.offsetX > 19) {\n            let index = this.fullRowSelect ? 2 : 1;\n            this.appendIndicator(dropLi, icon, index);\n          } else {\n            addClass([icon], DROPIN);\n          }\n        } else {\n          if (dropLi && e && !expand && !collapse && e.event.offsetY < 7 && !checkWrapper || expand && e.event.offsetY < 5 || collapse && e.event.offsetX < 3) {\n            let index = this.fullRowSelect ? 1 : 0;\n            this.appendIndicator(dropLi, icon, index);\n          } else if (dropLi && e && !expand && !collapse && e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 10 && !checkWrapper || expand && e.event.offsetY > 19 || collapse && e.event.offsetX > 19) {\n            let index = this.fullRowSelect ? 2 : 1;\n            this.appendIndicator(dropLi, icon, index);\n          } else {\n            addClass([icon], DROPIN);\n          }\n        }\n      } else if (e.target.nodeName === 'LI' && !dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)) {\n        addClass([icon], DROPNEXT);\n        this.renderVirtualEle(e);\n      } else if (e.target.classList.contains(SIBLING)) {\n        addClass([icon], DROPNEXT);\n      } else {\n        addClass([icon], DROPOUT);\n      }\n    } else {\n      addClass([icon], NODROP);\n      document.body.style.cursor = 'not-allowed';\n    }\n\n    let listItem = closest(e.target, '.e-list-item');\n    let level;\n\n    if (listItem) {\n      level = parseInt(listItem.getAttribute('aria-level'), 10);\n    }\n\n    let eventArgs = this.getDragEvent(e.event, this, e.target, e.target, null, virtualEle, level);\n\n    if (eventArgs.dropIndicator) {\n      removeClass([icon], eventArgs.dropIndicator);\n    }\n\n    this.trigger('nodeDragging', eventArgs);\n\n    if (eventArgs.dropIndicator) {\n      addClass([icon], eventArgs.dropIndicator);\n    }\n  }\n\n  appendIndicator(dropLi, icon, index) {\n    addClass([icon], DROPNEXT);\n    let virEle = this.createElement('div', {\n      className: SIBLING\n    });\n    dropLi.insertBefore(virEle, dropLi.children[index]);\n  }\n  /* eslint-disable */\n\n\n  dropAction(e) {\n    let offsetY = e.event.offsetY;\n    let dropTarget = e.target;\n    let dragObj;\n    let level;\n    let drop = false;\n    let dragInstance;\n    dragInstance = e.dragData.draggable;\n\n    for (let i = 0; i < dragInstance.ej2_instances.length; i++) {\n      if (dragInstance.ej2_instances[i] instanceof TreeView_1) {\n        dragObj = dragInstance.ej2_instances[i];\n        break;\n      }\n    }\n\n    if (dragObj && dragObj.dragTarget) {\n      let dragTarget = dragObj.dragTarget;\n      let dragLi = closest(dragTarget, '.' + LISTITEM);\n      let dropLi = closest(dropTarget, '.' + LISTITEM);\n\n      if (dropLi == null && dropTarget.classList.contains(ROOT)) {\n        dropLi = dropTarget.firstElementChild;\n      }\n\n      detach(e.droppedElement);\n      document.body.style.cursor = '';\n\n      if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n        if (this.fields.dataSource instanceof DataManager === false) {\n          this.preventExpand = false;\n        }\n\n        return;\n      }\n\n      if (dragObj.allowMultiSelection && dragLi.classList.contains(ACTIVE)) {\n        let sNodes = selectAll('.' + ACTIVE, dragObj.element);\n\n        if (e.target.offsetHeight <= 33 && offsetY > e.target.offsetHeight - 10 && offsetY > 6) {\n          for (let i = sNodes.length - 1; i >= 0; i--) {\n            if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n              continue;\n            }\n\n            this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);\n          }\n        } else {\n          for (let i = 0; i < sNodes.length; i++) {\n            if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n              continue;\n            }\n\n            this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);\n          }\n        }\n      } else {\n        this.appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY);\n      }\n\n      level = parseInt(dragLi.getAttribute('aria-level'), 10);\n      drop = true;\n    }\n\n    if (this.fields.dataSource instanceof DataManager === false) {\n      this.preventExpand = false;\n    }\n\n    this.trigger('nodeDropped', this.getDragEvent(e.event, dragObj, dropTarget, e.target, e.dragData.draggedElement, null, level, drop));\n\n    if (dragObj.element.id !== this.element.id) {\n      dragObj.triggerEvent();\n    }\n\n    this.triggerEvent();\n  }\n\n  appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY) {\n    let checkWrapper = closest(dropTarget, '.' + CHECKBOXWRAP);\n    let collapse = closest(e.target, '.' + COLLAPSIBLE);\n    let expand = closest(e.target, '.' + EXPANDABLE);\n\n    if (!dragLi.classList.contains('e-disable') && !checkWrapper && (expand && e.event.offsetY < 5 || collapse && e.event.offsetX < 3 || expand && e.event.offsetY > 19 || collapse && e.event.offsetX > 19 || !expand && !collapse)) {\n      if (dropTarget.nodeName === 'LI') {\n        this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n      } else if (dropTarget.firstElementChild && dropTarget.classList.contains(ROOT)) {\n        if (dropTarget.firstElementChild.nodeName === 'UL') {\n          this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n        }\n      } else if (dropTarget.classList.contains('e-icon-collapsible') || dropTarget.classList.contains('e-icon-expandable')) {\n        this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n      } else {\n        this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY);\n      }\n    } else {\n      this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY, true);\n    }\n  }\n\n  dropAsSiblingNode(dragLi, dropLi, e, dragObj) {\n    let dropUl = closest(dropLi, '.' + PARENTITEM);\n    let dragParentUl = closest(dragLi, '.' + PARENTITEM);\n    let dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n    let pre;\n\n    if (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 2) {\n      pre = false;\n    } else if (e.event.offsetY < 2) {\n      pre = true;\n    } else if (e.target.classList.contains('e-icon-expandable') || e.target.classList.contains('e-icon-collapsible')) {\n      if (e.event.offsetY < 5 || e.event.offsetX < 3) {\n        pre = true;\n      } else if (e.event.offsetY > 15 || e.event.offsetX > 17) {\n        pre = false;\n      }\n    }\n\n    if (e.target.classList.contains('e-icon-expandable') || e.target.classList.contains('e-icon-collapsible')) {\n      let target = e.target.closest('li');\n      dropUl.insertBefore(dragLi, pre ? target : target.nextElementSibling);\n    } else {\n      dropUl.insertBefore(dragLi, pre ? e.target : e.target.nextElementSibling);\n    }\n\n    this.moveData(dragLi, dropLi, dropUl, pre, dragObj);\n    this.updateElement(dragParentUl, dragParentLi);\n    this.updateAriaLevel(dragLi);\n\n    if (dragObj.element.id === this.element.id) {\n      this.updateList();\n    } else {\n      dragObj.updateInstance();\n      this.updateInstance();\n    }\n  }\n\n  dropAsChildNode(dragLi, dropLi, dragObj, index, e, pos, isCheck) {\n    let dragParentUl = closest(dragLi, '.' + PARENTITEM);\n    let dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n    let dropParentUl = closest(dropLi, '.' + PARENTITEM);\n    let templateTarget;\n\n    if (e && e.target) {\n      templateTarget = select(this.fullRowSelect ? '.' + FULLROW : '.' + TEXTWRAP, dropLi);\n    }\n\n    if (e && pos < 7 && !isCheck) {\n      dropParentUl.insertBefore(dragLi, dropLi);\n      this.moveData(dragLi, dropLi, dropParentUl, true, dragObj);\n    } else if (e && e.target.offsetHeight > 0 && pos > e.target.offsetHeight - 10 && !isCheck && !this.hasTemplate) {\n      dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n      this.moveData(dragLi, dropLi, dropParentUl, false, dragObj);\n    } else if (this.hasTemplate && templateTarget && pos > templateTarget.offsetHeight - 10 && !isCheck) {\n      dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n      this.moveData(dragLi, dropLi, dropParentUl, false, dragObj);\n    } else {\n      let dropUl = this.expandParent(dropLi);\n      let childLi = dropUl.childNodes[index];\n      dropUl.insertBefore(dragLi, childLi);\n      this.moveData(dragLi, childLi, dropUl, true, dragObj);\n    }\n\n    this.updateElement(dragParentUl, dragParentLi);\n    this.updateAriaLevel(dragLi);\n\n    if (dragObj.element.id === this.element.id) {\n      this.updateList();\n    } else {\n      dragObj.updateInstance();\n      this.updateInstance();\n    }\n  }\n\n  moveData(dragLi, dropLi, dropUl, pre, dragObj) {\n    let dropParentLi = closest(dropUl, '.' + LISTITEM);\n    let id = this.getId(dragLi);\n    let removedData = dragObj.updateChildField(dragObj.treeData, dragObj.fields, id, null, null, true);\n    let refId = this.getId(dropLi);\n    let index = this.getDataPos(this.treeData, this.fields, refId);\n    let parentId = this.getId(dropParentLi);\n\n    if (this.dataType === 1) {\n      this.updateField(this.treeData, this.fields, parentId, 'hasChildren', true);\n      let pos = isNullOrUndefined(index) ? this.treeData.length : pre ? index : index + 1;\n\n      if (isNullOrUndefined(parentId) && !this.hasPid) {\n        delete removedData[0][this.fields.parentID];\n      } else {\n        let currPid = this.isNumberTypeId ? parseFloat(parentId) : parentId;\n        setValue(this.fields.parentID, currPid, removedData[0]);\n      }\n\n      this.treeData.splice(pos, 0, removedData[0]);\n\n      if (dragObj.element.id !== this.element.id) {\n        let childData = dragObj.removeChildNodes(id);\n        pos++;\n\n        for (let i = 0, len = childData.length; i < len; i++) {\n          this.treeData.splice(pos, 0, childData[i]);\n          pos++;\n        }\n\n        dragObj.groupedData = dragObj.getGroupedData(dragObj.treeData, dragObj.fields.parentID);\n      }\n\n      this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n    } else {\n      this.addChildData(this.treeData, this.fields, parentId, removedData, pre ? index : index + 1);\n    }\n  }\n\n  expandParent(dropLi) {\n    let dropIcon = select('div.' + ICON, dropLi);\n\n    if (dropIcon && dropIcon.classList.contains(EXPANDABLE) && this.preventExpand !== true) {\n      this.expandAction(dropLi, dropIcon, null);\n    }\n\n    let dropUl = select('.' + PARENTITEM, dropLi);\n\n    if (this.preventExpand === true && !dropUl && dropIcon) {\n      this.renderChildNodes(dropLi);\n    }\n\n    dropUl = select('.' + PARENTITEM, dropLi);\n\n    if (!isNullOrUndefined(dropUl) && this.preventExpand === true) {\n      dropUl.style.display = 'none';\n    }\n\n    if (!isNullOrUndefined(dropUl) && this.preventExpand === false) {\n      dropUl.style.display = 'block';\n    }\n\n    if (isNullOrUndefined(dropUl) && this.preventExpand === true) {\n      if (isNullOrUndefined(dropIcon)) {\n        ListBase.generateIcon(this.createElement, dropLi, EXPANDABLE, this.listBaseOption);\n      }\n\n      let icon = select('div.' + ICON, dropLi);\n\n      if (icon) {\n        icon.classList.add('e-icon-expandable');\n      }\n\n      dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);\n      dropLi.appendChild(dropUl);\n\n      if (icon) {\n        removeClass([icon], COLLAPSIBLE);\n      } else {\n        ListBase.generateIcon(this.createElement, dropLi, EXPANDABLE, this.listBaseOption);\n      }\n\n      dropLi.setAttribute('aria-expanded', 'false');\n      dropUl.style.display = 'none';\n    }\n\n    if (isNullOrUndefined(dropUl)) {\n      this.trigger('nodeExpanding', this.getExpandEvent(dropLi, null));\n\n      if (isNullOrUndefined(dropIcon)) {\n        ListBase.generateIcon(this.createElement, dropLi, COLLAPSIBLE, this.listBaseOption);\n      }\n\n      let icon = select('div.' + ICON, dropLi);\n\n      if (icon) {\n        removeClass([icon], EXPANDABLE);\n      } else {\n        ListBase.generateIcon(this.createElement, dropLi, COLLAPSIBLE, this.listBaseOption);\n        icon = select('div.' + ICON, dropLi);\n        removeClass([icon], EXPANDABLE);\n      }\n\n      dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);\n      dropLi.appendChild(dropUl);\n      this.addExpand(dropLi);\n      this.trigger('nodeExpanded', this.getExpandEvent(dropLi, null));\n    }\n\n    return dropUl;\n  }\n\n  updateElement(dragParentUl, dragParentLi) {\n    if (dragParentLi && dragParentUl.childElementCount === 0) {\n      let dragIcon = select('div.' + ICON, dragParentLi);\n      detach(dragParentUl);\n      detach(dragIcon);\n      let parentId = this.getId(dragParentLi);\n      this.updateField(this.treeData, this.fields, parentId, 'hasChildren', false);\n      this.removeExpand(dragParentLi, true);\n    }\n  }\n\n  updateAriaLevel(dragLi) {\n    let level = this.parents(dragLi, '.' + PARENTITEM).length;\n    dragLi.setAttribute('aria-level', '' + level);\n    this.updateChildAriaLevel(select('.' + PARENTITEM, dragLi), level + 1);\n  }\n\n  updateChildAriaLevel(element, level) {\n    if (!isNullOrUndefined(element)) {\n      let cNodes = element.childNodes;\n\n      for (let i = 0, len = cNodes.length; i < len; i++) {\n        let liEle = cNodes[i];\n        liEle.setAttribute('aria-level', '' + level);\n        this.updateChildAriaLevel(select('.' + PARENTITEM, liEle), level + 1);\n      }\n    }\n  }\n\n  renderVirtualEle(e) {\n    let pre;\n\n    if (e.event.offsetY > e.target.offsetHeight - 2) {\n      pre = false;\n    } else if (e.event.offsetY < 2) {\n      pre = true;\n    }\n\n    let virEle = this.createElement('div', {\n      className: SIBLING\n    });\n    let index = this.fullRowSelect ? pre ? 1 : 2 : pre ? 0 : 1;\n    e.target.insertBefore(virEle, e.target.children[index]);\n  }\n\n  removeVirtualEle() {\n    let sibEle = select('.' + SIBLING);\n\n    if (sibEle) {\n      detach(sibEle);\n    }\n  }\n\n  destroyDrag() {\n    if (this.dragObj && this.dropObj) {\n      this.dragObj.destroy();\n      this.dropObj.destroy();\n    }\n  }\n\n  getDragEvent(event, obj, dropTarget, target, dragNode, cloneEle, level, drop) {\n    let dropLi = dropTarget ? closest(dropTarget, '.' + LISTITEM) : null;\n    let dropData = dropLi ? this.getNodeData(dropLi) : null;\n    let draggedNode = obj ? obj.dragLi : dragNode;\n    let draggedNodeData = obj ? obj.dragData : null;\n    let newParent = dropTarget ? this.parents(dropTarget, '.' + LISTITEM) : null;\n    let dragLiParent = obj.dragLi.parentElement;\n    let dragParent = obj.dragLi ? closest(dragLiParent, '.' + LISTITEM) : null;\n    let targetParent = null;\n    let indexValue = null;\n    let iconCss = [DROPNEXT, DROPIN, DROPOUT, NODROP];\n    let iconClass = null;\n    let node = drop === true ? draggedNode : dropLi;\n    let index = node ? closest(node, '.e-list-parent') : null;\n    let i = 0;\n    let position = null;\n    dragParent = obj.dragLi && dragParent === null ? closest(dragLiParent, '.' + ROOT) : dragParent;\n    dragParent = drop === true ? this.dragParent : dragParent;\n\n    if (cloneEle) {\n      while (i < 4) {\n        if (select('.' + ICON, cloneEle).classList.contains(iconCss[i])) {\n          iconClass = iconCss[i];\n          break;\n        }\n\n        i++;\n      }\n    }\n\n    if (index) {\n      let dropTar = 0;\n\n      for (i = 0; i < index.childElementCount; i++) {\n        dropTar = drop !== true && index.children[i] === draggedNode && dropLi !== draggedNode ? ++dropTar : dropTar;\n\n        if (drop !== true && index.children[i].classList.contains('e-hover')) {\n          indexValue = event.offsetY >= 23 ? i + 1 : i;\n          break;\n        } else if (index.children[i] === node) {\n          indexValue = event.offsetY >= 23 ? i : i;\n          break;\n        }\n      }\n\n      indexValue = dropTar !== 0 ? --indexValue : indexValue;\n      position = iconClass == \"e-drop-in\" ? \"Inside\" : event.offsetY < 7 ? \"Before\" : \"After\";\n    }\n\n    if (dropTarget) {\n      if (newParent.length === 0) {\n        targetParent = null;\n      } else if (dropTarget.classList.contains(LISTITEM)) {\n        targetParent = newParent[0];\n      } else {\n        targetParent = newParent[1];\n      }\n    }\n\n    if (dropLi === draggedNode) {\n      targetParent = dropLi;\n    }\n\n    if (dropTarget && target.offsetHeight <= 33 && event.offsetY < target.offsetHeight - 10 && event.offsetY > 6) {\n      targetParent = dropLi;\n\n      if (drop !== true) {\n        level = ++level;\n        let parent = targetParent ? select('.e-list-parent', targetParent) : null;\n        indexValue = parent ? parent.children.length : 0;\n\n        if (!(this.fields.dataSource instanceof DataManager) && parent === null && targetParent) {\n          let parent = targetParent.hasAttribute('data-uid') ? this.getChildNodes(this.fields.dataSource, targetParent.getAttribute('data-uid').toString()) : null;\n          indexValue = parent ? parent.length : 0;\n        }\n      }\n    }\n\n    return {\n      cancel: false,\n      clonedNode: cloneEle,\n      event: event,\n      draggedNode: draggedNode,\n      draggedNodeData: draggedNodeData,\n      droppedNode: dropLi,\n      droppedNodeData: dropData,\n      dropIndex: indexValue,\n      dropLevel: level,\n      draggedParentNode: dragParent,\n      dropTarget: targetParent,\n      dropIndicator: iconClass,\n      target: target,\n      position: position\n    };\n  }\n\n  addFullRow(toAdd) {\n    let len = this.liList.length;\n\n    if (toAdd) {\n      for (let i = 0; i < len; i++) {\n        this.createFullRow(this.liList[i]);\n      }\n    } else {\n      for (let i = 0; i < len; i++) {\n        let rowDiv = select('.' + FULLROW, this.liList[i]);\n        detach(rowDiv);\n      }\n    }\n  }\n\n  createFullRow(item) {\n    let rowDiv = this.createElement('div', {\n      className: FULLROW\n    });\n    item.insertBefore(rowDiv, item.childNodes[0]);\n  }\n\n  addMultiSelect(toAdd) {\n    if (toAdd) {\n      let liEles = selectAll('.' + LISTITEM + ':not([aria-selected=\"true\"])', this.element);\n\n      for (let ele of liEles) {\n        ele.setAttribute('aria-selected', 'false');\n      }\n    } else {\n      let liEles = selectAll('.' + LISTITEM + '[aria-selected=\"false\"]', this.element);\n\n      for (let ele of liEles) {\n        ele.removeAttribute('aria-selected');\n      }\n    }\n  }\n\n  collapseByLevel(element, level, excludeHiddenNodes) {\n    if (level > 0 && !isNullOrUndefined(element)) {\n      let cNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\n      for (let i = 0, len = cNodes.length; i < len; i++) {\n        let liEle = cNodes[i];\n        let icon = select('.' + COLLAPSIBLE, select('.' + TEXTWRAP, liEle));\n\n        if (!isNullOrUndefined(icon)) {\n          this.collapseNode(liEle, icon, null);\n        }\n\n        this.collapseByLevel(select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n      }\n    }\n  }\n\n  collapseAllNodes(excludeHiddenNodes) {\n    let cIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll('.' + COLLAPSIBLE, this.element));\n\n    for (let i = 0, len = cIcons.length; i < len; i++) {\n      let icon = cIcons[i];\n      let liEle = closest(icon, '.' + LISTITEM);\n      this.collapseNode(liEle, icon, null);\n    }\n  }\n\n  expandByLevel(element, level, excludeHiddenNodes) {\n    if (level > 0 && !isNullOrUndefined(element)) {\n      let eNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n\n      for (let i = 0, len = eNodes.length; i < len; i++) {\n        let liEle = eNodes[i];\n        let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, liEle));\n\n        if (!isNullOrUndefined(icon)) {\n          this.expandAction(liEle, icon, null);\n        }\n\n        this.expandByLevel(select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n      }\n    }\n  }\n\n  expandAllNodes(excludeHiddenNodes) {\n    let eIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll('.' + EXPANDABLE, this.element));\n\n    for (let i = 0, len = eIcons.length; i < len; i++) {\n      let icon = eIcons[i];\n      let liEle = closest(icon, '.' + LISTITEM);\n      this.expandAction(liEle, icon, null, true);\n    }\n  }\n\n  getVisibleNodes(excludeHiddenNodes, nodes) {\n    let vNodes = Array.prototype.slice.call(nodes);\n\n    if (excludeHiddenNodes) {\n      for (let i = 0; i < vNodes.length; i++) {\n        if (!isVisible(vNodes[i])) {\n          vNodes.splice(i, 1);\n          i--;\n        }\n      }\n    }\n\n    return vNodes;\n  }\n\n  removeNode(node) {\n    let dragParentUl = closest(node, '.' + PARENTITEM);\n    let dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n\n    if (!isNullOrUndefined(this.nodeTemplateFn)) {\n      this.destroyTemplate(node);\n    }\n\n    detach(node);\n    this.updateElement(dragParentUl, dragParentLi);\n    this.removeData(node);\n  }\n\n  updateInstance() {\n    this.updateList();\n    this.updateSelectedNodes();\n    this.updateExpandedNodes();\n  }\n\n  updateList() {\n    this.liList = Array.prototype.slice.call(selectAll('.' + LISTITEM, this.element));\n  }\n\n  updateSelectedNodes() {\n    this.setProperties({\n      selectedNodes: []\n    }, true);\n    let sNodes = selectAll('.' + ACTIVE, this.element);\n    this.selectGivenNodes(sNodes);\n  }\n\n  updateExpandedNodes() {\n    this.setProperties({\n      expandedNodes: []\n    }, true);\n    let eNodes = selectAll('[aria-expanded=\"true\"]', this.element);\n\n    for (let i = 0, len = eNodes.length; i < len; i++) {\n      this.addExpand(eNodes[i]);\n    }\n  }\n\n  removeData(node) {\n    if (this.dataType === 1) {\n      let dm = new DataManager(this.treeData);\n      let id = this.getId(node);\n      let data = {};\n      let newId = this.isNumberTypeId ? parseFloat(id) : id;\n      data[this.fields.id] = newId;\n      dm.remove(this.fields.id, data);\n      this.removeChildNodes(id);\n    } else {\n      let id = this.getId(node);\n      this.updateChildField(this.treeData, this.fields, id, null, null, true);\n    }\n  }\n\n  removeChildNodes(parentId) {\n    let cNodes = this.getChildGroup(this.groupedData, parentId, false);\n    let childData = [];\n\n    if (cNodes) {\n      for (let i = 0, len = cNodes.length; i < len; i++) {\n        let dm = new DataManager(this.treeData);\n        let id = getValue(this.fields.id, cNodes[i]).toString();\n        let data = {};\n        let currId = this.isNumberTypeId ? parseFloat(id) : id;\n        data[this.fields.id] = currId;\n        let nodeData = dm.remove(this.fields.id, data);\n        childData.push(nodeData[0]);\n        this.removeChildNodes(id);\n      }\n    }\n\n    return childData;\n  }\n\n  doGivenAction(nodes, selector, toExpand) {\n    for (let i = 0, len = nodes.length; i < len; i++) {\n      let liEle = this.getElement(nodes[i]);\n\n      if (isNullOrUndefined(liEle)) {\n        continue;\n      }\n\n      let icon = select('.' + selector, select('.' + TEXTWRAP, liEle));\n\n      if (!isNullOrUndefined(icon)) {\n        toExpand ? this.expandAction(liEle, icon, null) : this.collapseNode(liEle, icon, null);\n      }\n    }\n  }\n\n  addGivenNodes(nodes, dropLi, index, isRemote, dropEle) {\n    if (nodes.length === 0) {\n      return;\n    }\n\n    let sNodes = this.getSortedData(nodes);\n    let level = dropLi ? parseFloat(dropLi.getAttribute('aria-level')) + 1 : 1;\n\n    if (isRemote) {\n      this.updateMapper(level);\n    }\n\n    let li = ListBase.createListItemFromJson(this.createElement, sNodes, this.listBaseOption, level);\n    let dropUl;\n\n    if (!dropEle) {\n      dropUl = dropLi ? this.expandParent(dropLi) : select('.' + PARENTITEM, this.element);\n    } else {\n      dropUl = dropEle;\n    }\n\n    let refNode = dropUl.childNodes[index];\n\n    if (refNode || this.sortOrder === 'None') {\n      for (let i = 0; i < li.length; i++) {\n        dropUl.insertBefore(li[i], refNode);\n      }\n    }\n\n    if (!refNode && (this.sortOrder === 'Ascending' || this.sortOrder === 'Descending')) {\n      let cNodes = dropUl.childNodes;\n\n      for (let i = 0; i < li.length; i++) {\n        for (let j = 0; j < cNodes.length; j++) {\n          let returnValue = this.sortOrder === 'Ascending' ? cNodes[j].textContent.toUpperCase() > li[i].innerText.toUpperCase() : cNodes[j].textContent.toUpperCase() < li[i].innerText.toUpperCase();\n\n          if (returnValue) {\n            dropUl.insertBefore(li[i], cNodes[j]);\n            break;\n          }\n\n          dropUl.insertBefore(li[i], cNodes[cNodes.length]);\n        }\n      }\n    }\n\n    let id = this.getId(dropLi);\n\n    if (this.dataType === 1) {\n      this.updateField(this.treeData, this.fields, id, 'hasChildren', true);\n      let refId = this.getId(refNode);\n      let pos = isNullOrUndefined(refId) ? this.treeData.length : this.getDataPos(this.treeData, this.fields, refId);\n\n      for (let j = 0; j < nodes.length; j++) {\n        if (!isNullOrUndefined(id)) {\n          let currId = this.isNumberTypeId ? parseFloat(id) : id;\n          setValue(this.fields.parentID, currId, nodes[j]);\n        }\n\n        this.treeData.splice(pos, 0, nodes[j]);\n        pos++;\n      }\n    } else {\n      this.addChildData(this.treeData, this.fields, id, nodes, index);\n    }\n\n    this.finalizeNode(dropUl);\n  }\n\n  updateMapper(level) {\n    let mapper = level === 1 ? this.fields : this.getChildFields(this.fields, level - 1, 1);\n    this.updateListProp(mapper);\n  }\n\n  updateListProp(mapper) {\n    let prop = this.getActualProperties(mapper);\n    this.listBaseOption.fields = prop;\n    this.listBaseOption.fields.url = prop.hasOwnProperty('navigateUrl') ? prop.navigateUrl : 'navigateUrl';\n  }\n\n  getDataPos(obj, mapper, id) {\n    let pos = null;\n\n    for (let i = 0, objlen = obj.length; i < objlen; i++) {\n      let nodeId = getValue(mapper.id, obj[i]);\n\n      if (obj[i] && nodeId && nodeId.toString() === id) {\n        return i;\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        let data = getValue(mapper.child, obj[i]);\n        pos = this.getDataPos(data, this.getChildMapper(mapper), id);\n\n        if (pos !== null) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        let items = getValue('child', obj[i]);\n        pos = this.getDataPos(items, this.getChildMapper(mapper), id);\n\n        if (pos !== null) {\n          break;\n        }\n      }\n    }\n\n    return pos;\n  }\n\n  addChildData(obj, mapper, id, data, index) {\n    let updated;\n\n    if (isNullOrUndefined(id)) {\n      index = isNullOrUndefined(index) ? obj.length : index;\n\n      for (let k = 0, len = data.length; k < len; k++) {\n        obj.splice(index, 0, data[k]);\n        index++;\n      }\n\n      return updated;\n    }\n\n    for (let i = 0, objlen = obj.length; i < objlen; i++) {\n      let nodeId = getValue(mapper.id, obj[i]);\n\n      if (obj[i] && nodeId && nodeId.toString() === id) {\n        if (typeof mapper.child === 'string' && obj[i].hasOwnProperty(mapper.child) && obj[i][mapper.child] !== null || this.fields.dataSource instanceof DataManager && obj[i].hasOwnProperty('child')) {\n          let key = typeof mapper.child === 'string' ? mapper.child : 'child';\n          let childData = getValue(key, obj[i]);\n\n          if (isNullOrUndefined(childData)) {\n            childData = [];\n          }\n\n          index = isNullOrUndefined(index) ? childData.length : index;\n\n          for (let k = 0, len = data.length; k < len; k++) {\n            childData.splice(index, 0, data[k]);\n            index++;\n          }\n        } else {\n          let key = typeof mapper.child === 'string' ? mapper.child : 'child';\n          obj[i][key] = data;\n        }\n\n        return true;\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        let childObj = getValue(mapper.child, obj[i]);\n        updated = this.addChildData(childObj, this.getChildMapper(mapper), id, data, index);\n\n        if (updated !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        let childData = getValue('child', obj[i]);\n        updated = this.addChildData(childData, this.getChildMapper(mapper), id, data, index);\n\n        if (updated !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return updated;\n  }\n\n  doDisableAction(nodes) {\n    let validNodes = this.nodeType(nodes);\n    let validID = this.checkValidId(validNodes);\n    this.validArr = [];\n\n    for (let i = 0, len = validID.length; i < len; i++) {\n      let id = validID[i][this.fields.id].toString();\n\n      if (id && this.disableNode.indexOf(id) === -1) {\n        this.disableNode.push(id);\n      }\n\n      let liEle = this.getElement(id);\n\n      if (liEle) {\n        liEle.setAttribute('aria-disabled', 'true');\n        addClass([liEle], DISABLE);\n      }\n    }\n  }\n\n  doEnableAction(nodes) {\n    let strNodes = this.nodeType(nodes);\n\n    for (let i = 0, len = strNodes.length; i < len; i++) {\n      let liEle = this.getElement(strNodes[i]);\n      let id = strNodes[i];\n\n      if (id && this.disableNode.indexOf(id) !== -1) {\n        this.disableNode.splice(this.disableNode.indexOf(id), 1);\n      }\n\n      if (liEle) {\n        liEle.removeAttribute('aria-disabled');\n        removeClass([liEle], DISABLE);\n      }\n    }\n  }\n\n  nodeType(nodes) {\n    let validID = [];\n\n    for (let i = 0, len = nodes.length; i < len; i++) {\n      let id;\n\n      if (typeof nodes[i] == \"string\") {\n        id = nodes[i] ? nodes[i].toString() : null;\n      } else if (typeof nodes[i] === \"object\") {\n        id = nodes[i] ? nodes[i].getAttribute(\"data-uid\").toString() : null;\n      }\n\n      if (validID.indexOf(id) == -1) {\n        validID.push(id);\n      }\n    }\n\n    return validID;\n  }\n\n  checkValidId(node) {\n    if (this.dataType === 1) {\n      this.validArr = this.treeData.filter(data => {\n        return node.indexOf(data[this.fields.id] ? data[this.fields.id].toString() : null) !== -1;\n      });\n    } else if (this.dataType === 2) {\n      for (let k = 0; k < this.treeData.length; k++) {\n        let id = this.treeData[k][this.fields.id] ? this.treeData[k][this.fields.id].toString() : null;\n\n        if (node.indexOf(id) !== -1) {\n          this.validArr.push(this.treeData[k]);\n        }\n\n        let childItems = getValue(this.fields.child.toString(), this.treeData[k]);\n\n        if (childItems) {\n          this.filterNestedChild(childItems, node);\n        }\n      }\n    }\n\n    return this.validArr;\n  }\n\n  filterNestedChild(treeData, nodes) {\n    for (let k = 0; k < treeData.length; k++) {\n      let id = treeData[k][this.fields.id] ? treeData[k][this.fields.id].toString() : null;\n\n      if (nodes.indexOf(id) !== -1) {\n        this.validArr.push(treeData[k]);\n      }\n\n      let childItems = getValue(this.fields.child.toString(), treeData[k]);\n\n      if (childItems) {\n        this.filterNestedChild(childItems, nodes);\n      }\n    }\n  }\n\n  setTouchClass() {\n    let ele = closest(this.element, '.' + BIGGER);\n    this.touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n  }\n\n  updatePersistProp() {\n    this.removeField(this.treeData, this.fields, ['selected', 'expanded']);\n    let sleNodes = this.selectedNodes;\n\n    for (let l = 0, slelen = sleNodes.length; l < slelen; l++) {\n      this.updateField(this.treeData, this.fields, sleNodes[l], 'selected', true);\n    }\n\n    let enodes = this.expandedNodes;\n\n    for (let k = 0, nodelen = enodes.length; k < nodelen; k++) {\n      this.updateField(this.treeData, this.fields, enodes[k], 'expanded', true);\n    }\n\n    if (this.showCheckBox) {\n      this.removeField(this.treeData, this.fields, ['isChecked']);\n      let cnodes = this.checkedNodes;\n\n      for (let m = 0, nodelen = cnodes.length; m < nodelen; m++) {\n        this.updateField(this.treeData, this.fields, cnodes[m], 'isChecked', true);\n      }\n    }\n  }\n\n  removeField(obj, mapper, names) {\n    if (isNullOrUndefined(obj) || isNullOrUndefined(mapper)) {\n      return;\n    }\n\n    for (let i = 0, objlen = obj.length; i < objlen; i++) {\n      for (let j = 0; j < names.length; j++) {\n        let field = this.getMapperProp(mapper, names[j]);\n\n        if (!isNullOrUndefined(obj[i][field])) {\n          delete obj[i][field];\n        }\n      }\n\n      if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        this.removeField(getValue(mapper.child, obj[i]), this.getChildMapper(mapper), names);\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        this.removeField(getValue('child', obj[i]), this.getChildMapper(mapper), names);\n      }\n    }\n  }\n\n  getMapperProp(mapper, fieldName) {\n    switch (fieldName) {\n      case 'selected':\n        return !isNullOrUndefined(mapper.selected) ? mapper.selected : 'selected';\n\n      case 'expanded':\n        return !isNullOrUndefined(mapper.expanded) ? mapper.expanded : 'expanded';\n\n      case 'isChecked':\n        return !isNullOrUndefined(mapper.isChecked) ? mapper.isChecked : 'isChecked';\n\n      case 'hasChildren':\n        return !isNullOrUndefined(mapper.hasChildren) ? mapper.hasChildren : 'hasChildren';\n\n      default:\n        return fieldName;\n    }\n  }\n\n  updateField(obj, mapper, id, key, value) {\n    if (isNullOrUndefined(id)) {\n      return;\n    } else if (this.dataType === 1) {\n      let newId = this.isNumberTypeId ? parseFloat(id) : id;\n      let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.id, 'equal', newId, false));\n      setValue(this.getMapperProp(mapper, key), value, resultData[0]);\n    } else {\n      this.updateChildField(obj, mapper, id, key, value);\n    }\n  }\n\n  updateChildField(obj, mapper, id, key, value, remove$$1) {\n    let removedData;\n\n    if (isNullOrUndefined(obj)) {\n      return removedData;\n    }\n\n    for (let i = 0, objlen = obj.length; i < objlen; i++) {\n      let nodeId = getValue(mapper.id, obj[i]);\n\n      if (obj[i] && nodeId && nodeId.toString() === id) {\n        if (remove$$1) {\n          removedData = obj.splice(i, 1);\n        } else {\n          setValue(this.getMapperProp(mapper, key), value, obj[i]);\n          removedData = [];\n        }\n\n        return removedData;\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        let childData = getValue(mapper.child, obj[i]);\n        removedData = this.updateChildField(childData, this.getChildMapper(mapper), id, key, value, remove$$1);\n\n        if (removedData !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        let childItems = getValue('child', obj[i]);\n        removedData = this.updateChildField(childItems, this.getChildMapper(mapper), id, key, value, remove$$1);\n\n        if (removedData !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return removedData;\n  }\n\n  triggerEvent() {\n    this.renderReactTemplates();\n    let eventArgs = {\n      data: this.treeData\n    };\n    this.trigger('dataSourceChanged', eventArgs);\n  }\n\n  wireInputEvents(inpEle) {\n    EventHandler.add(inpEle, 'blur', this.inputFocusOut, this);\n  }\n\n  wireEditingEvents(toBind) {\n    if (toBind && !this.disabled) {\n      let proxy = this;\n      this.touchEditObj = new Touch(this.element, {\n        tap: e => {\n          if (this.isDoubleTapped(e) && e.tapCount === 2) {\n            e.originalEvent.preventDefault();\n            proxy.editingHandler(e.originalEvent);\n          }\n        }\n      });\n    } else {\n      if (this.touchEditObj) {\n        this.touchEditObj.destroy();\n      }\n    }\n  }\n\n  wireClickEvent(toBind) {\n    if (toBind) {\n      let proxy = this;\n      this.touchClickObj = new Touch(this.element, {\n        tap: e => {\n          proxy.clickHandler(e);\n        }\n      });\n    } else {\n      if (this.touchClickObj) {\n        this.touchClickObj.destroy();\n      }\n    }\n  }\n\n  wireExpandOnEvent(toBind) {\n    if (toBind) {\n      let proxy = this;\n      this.touchExpandObj = new Touch(this.element, {\n        tap: e => {\n          if ((this.expandOnType === 'Click' || this.expandOnType === 'DblClick' && this.isDoubleTapped(e) && e.tapCount === 2) && e.originalEvent.which !== 3) {\n            proxy.expandHandler(e);\n          }\n        }\n      });\n    } else {\n      if (this.touchExpandObj) {\n        this.touchExpandObj.destroy();\n      }\n    }\n  }\n\n  mouseDownHandler(e) {\n    this.mouseDownStatus = true;\n\n    if (e.shiftKey || e.ctrlKey) {\n      e.preventDefault();\n    }\n\n    if (e.ctrlKey && this.allowMultiSelection) {\n      EventHandler.add(this.element, 'contextmenu', this.preventContextMenu, this);\n    }\n  }\n\n  preventContextMenu(e) {\n    e.preventDefault();\n  }\n\n  wireEvents() {\n    EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n    this.wireClickEvent(true);\n\n    if (this.expandOnType !== 'None') {\n      this.wireExpandOnEvent(true);\n    }\n\n    EventHandler.add(this.element, 'focus', this.focusIn, this);\n    EventHandler.add(this.element, 'blur', this.focusOut, this);\n    EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.element, 'mouseout', this.onMouseLeave, this);\n    this.keyboardModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  }\n\n  unWireEvents() {\n    EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n    this.wireClickEvent(false);\n    this.wireExpandOnEvent(false);\n    EventHandler.remove(this.element, 'focus', this.focusIn);\n    EventHandler.remove(this.element, 'blur', this.focusOut);\n    EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.element, 'mouseout', this.onMouseLeave);\n\n    if (!this.disabled) {\n      this.keyboardModule.destroy();\n    }\n  }\n\n  parents(element, selector) {\n    let matched = [];\n    let el = element.parentNode;\n\n    while (!isNullOrUndefined(el)) {\n      if (matches(el, selector)) {\n        matched.push(el);\n      }\n\n      el = el.parentNode;\n    }\n\n    return matched;\n  }\n\n  isDoubleTapped(e) {\n    let target = e.originalEvent.target;\n    let secondTap;\n\n    if (target && e.tapCount) {\n      if (e.tapCount === 1) {\n        this.firstTap = closest(target, '.' + LISTITEM);\n      } else if (e.tapCount === 2) {\n        secondTap = closest(target, '.' + LISTITEM);\n      }\n    }\n\n    return this.firstTap === secondTap;\n  }\n\n  isDescendant(parent, child) {\n    let node = child.parentNode;\n\n    while (!isNullOrUndefined(node)) {\n      if (node === parent) {\n        return true;\n      }\n\n      node = node.parentNode;\n    }\n\n    return false;\n  }\n\n  showSpinner(element) {\n    addClass([element], LOAD);\n    createSpinner({\n      target: element,\n      width: Browser.isDevice ? 16 : 14\n    }, this.createElement);\n    showSpinner(element);\n  }\n\n  hideSpinner(element) {\n    hideSpinner(element);\n    element.innerHTML = '';\n    removeClass([element], LOAD);\n  }\n\n  setCheckedNodes(nodes) {\n    nodes = JSON.parse(JSON.stringify(nodes));\n    this.uncheckAll(this.checkedNodes);\n    this.setIndeterminate(nodes);\n\n    if (nodes.length > 0) {\n      this.checkAll(nodes);\n    }\n  }\n  /**\n   * Checks whether the checkedNodes entered are valid and sets the valid checkedNodes while changing via setmodel\n   */\n\n\n  setValidCheckedNode(node) {\n    if (this.dataType === 1) {\n      let mapper = this.fields;\n      let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.id, 'equal', node, true));\n\n      if (resultData[0]) {\n        this.setChildCheckState(resultData, node, resultData[0]);\n\n        if (this.autoCheck) {\n          let parent = resultData[0][this.fields.parentID] ? resultData[0][this.fields.parentID].toString() : null;\n          let childNodes = this.getChildNodes(this.treeData, parent);\n          let count = 0;\n\n          for (let len = 0; len < childNodes.length; len++) {\n            let childId = childNodes[len][this.fields.id].toString();\n\n            if (this.checkedNodes.indexOf(childId) !== -1) {\n              count++;\n            }\n          }\n\n          if (count === childNodes.length && this.checkedNodes.indexOf(parent) === -1 && parent) {\n            this.checkedNodes.push(parent);\n          }\n        }\n      }\n    } else if (this.dataType === 2) {\n      for (let a = 0; a < this.treeData.length; a++) {\n        let index = this.treeData[a][this.fields.id] ? this.treeData[a][this.fields.id].toString() : '';\n\n        if (index === node && this.checkedNodes.indexOf(node) === -1) {\n          this.checkedNodes.push(node);\n          break;\n        }\n\n        let childItems = getValue(this.fields.child.toString(), this.treeData[a]);\n\n        if (childItems) {\n          this.setChildCheckState(childItems, node, this.treeData[a]);\n        }\n      }\n    }\n  }\n  /**\n   * Checks whether the checkedNodes entered are valid and sets the valid checkedNodes while changing via setmodel(for hierarchical DS)\n   */\n\n\n  setChildCheckState(childItems, node, treeData) {\n    let checkedParent;\n    let count = 0;\n\n    if (this.dataType === 1) {\n      if (treeData) {\n        checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : null;\n      }\n\n      for (let index = 0; index < childItems.length; index++) {\n        let checkNode = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : null;\n\n        if (treeData && checkedParent && this.autoCheck) {\n          if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkNode) === -1) {\n            this.checkedNodes.push(checkNode);\n          }\n        }\n\n        if (checkNode === node && this.checkedNodes.indexOf(node) === -1) {\n          this.checkedNodes.push(node);\n        }\n\n        let subChildItems = this.getChildNodes(this.treeData, checkNode);\n\n        if (subChildItems) {\n          this.setChildCheckState(subChildItems, node, treeData);\n        }\n      }\n    } else {\n      if (treeData) {\n        checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : '';\n      }\n\n      for (let index = 0; index < childItems.length; index++) {\n        let checkedChild = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : '';\n\n        if (treeData && checkedParent && this.autoCheck) {\n          if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1) {\n            this.checkedNodes.push(checkedChild);\n          }\n        }\n\n        if (checkedChild === node && this.checkedNodes.indexOf(node) === -1) {\n          this.checkedNodes.push(node);\n        }\n\n        let subChildItems = getValue(this.fields.child.toString(), childItems[index]);\n\n        if (subChildItems) {\n          this.setChildCheckState(subChildItems, node, childItems[index]);\n        }\n\n        if (this.checkedNodes.indexOf(checkedChild) !== -1 && this.autoCheck) {\n          count++;\n        }\n\n        if (count === childItems.length && this.checkedNodes.indexOf(checkedParent) === -1 && this.autoCheck) {\n          this.checkedNodes.push(checkedParent);\n        }\n      }\n    }\n  }\n\n  setIndeterminate(nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      this.setValidCheckedNode(nodes[i]);\n    }\n  }\n\n  updatePosition(id, newData, isRefreshChild, childValue) {\n    if (this.dataType === 1) {\n      let pos = this.getDataPos(this.treeData, this.fields, id);\n      this.treeData.splice(pos, 1, newData);\n\n      if (isRefreshChild) {\n        this.removeChildNodes(id);\n\n        for (let j = 0; j < childValue.length; j++) {\n          this.treeData.splice(pos, 0, childValue[j]);\n          pos++;\n        }\n      }\n\n      this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n    } else {\n      this.updateChildPosition(this.treeData, this.fields, id, [newData], undefined);\n    }\n  }\n\n  updateChildPosition(treeData, mapper, currID, newData, index) {\n    let found;\n\n    for (let i = 0, objlen = treeData.length; i < objlen; i++) {\n      let nodeId = getValue(mapper.id, treeData[i]);\n\n      if (treeData[i] && nodeId && nodeId.toString() === currID) {\n        treeData[i] = newData[0];\n        return true;\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, treeData[i]))) {\n        let childObj = getValue(mapper.child, treeData[i]);\n        found = this.updateChildPosition(childObj, this.getChildMapper(mapper), currID, newData, index);\n\n        if (found !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', treeData[i]))) {\n        let childData = getValue('child', treeData[i]);\n        found = this.updateChildPosition(childData, this.getChildMapper(mapper), currID, newData, index);\n\n        if (found !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  dynamicState() {\n    this.setDragAndDrop(this.allowDragAndDrop);\n    this.wireEditingEvents(this.allowEditing);\n\n    if (!this.disabled) {\n      this.wireEvents();\n      this.setRipple();\n    } else {\n      this.unWireEvents();\n      this.rippleFn();\n      this.rippleIconFn();\n    }\n  }\n\n  crudOperation(operation, nodes, target, newText, newNode, index, prevent) {\n    let data = this.fields.dataSource;\n    let matchedArr = [];\n    let query = this.getQuery(this.fields);\n    let key = this.fields.id;\n    let crud;\n    let changes = {\n      addedRecords: [],\n      deletedRecords: [],\n      changedRecords: []\n    };\n    let nodesID = [];\n\n    if (nodes) {\n      nodesID = this.nodeType(nodes);\n    } else if (target) {\n      if (typeof target == \"string\") {\n        nodesID[0] = target.toString();\n      } else if (typeof target === \"object\") {\n        nodesID[0] = target.getAttribute(\"data-uid\").toString();\n      }\n    }\n\n    for (let i = 0, len = nodesID.length; i < len; i++) {\n      let liEle = this.getElement(nodesID[i]);\n\n      if (isNullOrUndefined(liEle)) {\n        continue;\n      }\n\n      let removedData = this.getNodeObject(nodesID[i]);\n      matchedArr.push(removedData);\n    }\n\n    switch (operation) {\n      case 'delete':\n        if (nodes.length == 1) {\n          crud = data.remove(key, matchedArr[0], query.fromTable, query);\n        } else {\n          changes.deletedRecords = matchedArr;\n          crud = data.saveChanges(changes, key, query.fromTable, query);\n        }\n\n        crud.then(e => this.deleteSuccess(nodesID)).catch(e => this.dmFailure(e));\n        break;\n\n      case 'update':\n        matchedArr[0][this.fields.text] = newText;\n        crud = data.update(key, matchedArr[0], query.fromTable, query);\n        crud.then(e => this.editSucess(target, newText, prevent)).catch(e => this.dmFailure(e, target, prevent));\n        break;\n\n      case 'insert':\n        if (newNode.length == 1) {\n          crud = data.insert(newNode[0], query.fromTable, query);\n        } else {\n          let arr = [];\n\n          for (let i = 0, len = newNode.length; i < len; i++) {\n            arr.push(newNode[i]);\n          }\n\n          changes.addedRecords = arr;\n          crud = data.saveChanges(changes, key, query.fromTable, query);\n        }\n\n        crud.then(e => {\n          let dropLi = this.getElement(target);\n          this.addSuccess(newNode, dropLi, index);\n          this.preventExpand = false;\n        }).catch(e => this.dmFailure(e));\n        break;\n    }\n  }\n\n  deleteSuccess(nodes) {\n    for (let i = 0, len = nodes.length; i < len; i++) {\n      let liEle = this.getElement(nodes[i]);\n\n      if (isNullOrUndefined(liEle)) {\n        continue;\n      }\n\n      this.removeNode(liEle);\n    }\n\n    this.updateInstance();\n\n    if (this.dataType === 1) {\n      this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n    }\n\n    this.triggerEvent();\n  }\n\n  editSucess(target, newText, prevent) {\n    let liEle = this.getElement(target);\n    let txtEle = select('.' + LISTTEXT, liEle);\n    this.appendNewText(liEle, txtEle, newText, prevent);\n  }\n\n  addSuccess(nodes, dropLi, index) {\n    let dropUl;\n    let icon = dropLi ? dropLi.querySelector('.' + ICON) : null;\n    let proxy = this;\n\n    if (dropLi && icon && icon.classList.contains(EXPANDABLE) && dropLi.querySelector('.' + PARENTITEM) === null) {\n      proxy.renderChildNodes(dropLi, null, () => {\n        dropUl = dropLi.querySelector('.' + PARENTITEM);\n        proxy.addGivenNodes(nodes, dropLi, index, true, dropUl);\n        proxy.triggerEvent();\n      });\n    } else {\n      this.addGivenNodes(nodes, dropLi, index, true);\n      this.triggerEvent();\n    }\n  }\n\n  dmFailure(e, target, prevent) {\n    if (target) {\n      this.updatePreviousText(target, prevent);\n    }\n\n    this.trigger('actionFailure', {\n      error: e\n    });\n  }\n\n  updatePreviousText(target, prevent) {\n    let liEle = this.getElement(target);\n    let txtEle = select('.' + LISTTEXT, liEle);\n    this.updateText(liEle, txtEle, this.oldText, prevent);\n  }\n  /**\n   * Called internally if any of the property value changed.\n   * @param  {TreeView} newProp\n   * @param  {TreeView} oldProp\n   * @returns void\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    for (let prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'allowDragAndDrop':\n          this.setDragAndDrop(this.allowDragAndDrop);\n          break;\n\n        case 'dragArea':\n          if (this.allowDragAndDrop) {\n            this.dragObj.dragArea = this.dragArea;\n          }\n\n          break;\n\n        case 'allowEditing':\n          this.wireEditingEvents(this.allowEditing);\n          break;\n\n        case 'allowMultiSelection':\n          if (this.selectedNodes.length > 1) {\n            let sNode = this.getElement(this.selectedNodes[0]);\n            this.isLoaded = false;\n            this.removeSelectAll();\n            this.selectNode(sNode, null);\n            this.isLoaded = true;\n          }\n\n          this.setMultiSelect(this.allowMultiSelection);\n          this.addMultiSelect(this.allowMultiSelection);\n          break;\n\n        case 'allowTextWrap':\n          this.setTextWrap();\n          this.updateWrap();\n          break;\n\n        case 'checkedNodes':\n          if (this.showCheckBox) {\n            this.checkedNodes = oldProp.checkedNodes;\n            this.setCheckedNodes(newProp.checkedNodes);\n          }\n\n          break;\n\n        case 'autoCheck':\n          if (this.showCheckBox) {\n            this.autoCheck = newProp.autoCheck;\n            this.ensureIndeterminate();\n          }\n\n          break;\n\n        case 'cssClass':\n          this.setCssClass(oldProp.cssClass, newProp.cssClass);\n          break;\n\n        case 'enableRtl':\n          this.setEnableRtl();\n          break;\n\n        case 'expandedNodes':\n          this.isAnimate = false;\n          this.setProperties({\n            expandedNodes: []\n          }, true);\n          this.collapseAll();\n          this.isInitalExpand = true;\n          this.setProperties({\n            expandedNodes: isNullOrUndefined(newProp.expandedNodes) ? [] : newProp.expandedNodes\n          }, true);\n          this.doExpandAction();\n          this.isInitalExpand = false;\n          this.isAnimate = true;\n          break;\n\n        case 'expandOn':\n          this.wireExpandOnEvent(false);\n          this.setExpandOnType();\n\n          if (this.expandOnType !== 'None' && !this.disabled) {\n            this.wireExpandOnEvent(true);\n          }\n\n          break;\n\n        case 'disabled':\n          this.setDisabledMode();\n          this.dynamicState();\n          break;\n\n        case 'fields':\n          this.isAnimate = false;\n          this.isFieldChange = true;\n          this.initialRender = true;\n          this.reRenderNodes();\n          this.initialRender = false;\n          this.isAnimate = true;\n          this.isFieldChange = false;\n          break;\n\n        case 'fullRowSelect':\n          this.setFullRow(this.fullRowSelect);\n          this.addFullRow(this.fullRowSelect);\n\n          if (this.allowTextWrap) {\n            this.setTextWrap();\n            this.updateWrap();\n          }\n\n          break;\n\n        case 'loadOnDemand':\n          if (this.loadOnDemand === false && !this.onLoaded) {\n            let nodes = this.element.querySelectorAll('li');\n            let i = 0;\n\n            while (i < nodes.length) {\n              if (nodes[i].getAttribute('aria-expanded') !== 'true') {\n                this.renderChildNodes(nodes[i], true, null, true);\n              }\n\n              i++;\n            }\n\n            this.onLoaded = true;\n          }\n\n          break;\n\n        case 'nodeTemplate':\n          this.hasTemplate = false;\n          this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n          this.reRenderNodes();\n          break;\n\n        case 'selectedNodes':\n          this.removeSelectAll();\n          this.setProperties({\n            selectedNodes: newProp.selectedNodes\n          }, true);\n          this.doSelectionAction();\n          break;\n\n        case 'showCheckBox':\n          this.reRenderNodes();\n          break;\n\n        case 'sortOrder':\n          this.reRenderNodes();\n          break;\n\n        case 'fullRowNavigable':\n          this.setProperties({\n            fullRowNavigable: newProp.fullRowNavigable\n          }, true);\n          this.listBaseOption.itemNavigable = newProp.fullRowNavigable;\n          this.reRenderNodes();\n          break;\n      }\n    }\n  }\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n   */\n\n\n  destroy() {\n    this.clearTemplate();\n    this.element.removeAttribute('aria-activedescendant');\n    this.element.removeAttribute('tabindex');\n    this.unWireEvents();\n    this.wireEditingEvents(false);\n\n    if (!this.disabled) {\n      this.rippleFn();\n      this.rippleIconFn();\n    }\n\n    this.setCssClass(this.cssClass, null);\n    this.setDragAndDrop(false);\n    this.setFullRow(false);\n\n    if (this.ulElement && this.ulElement.parentElement) {\n      this.ulElement.parentElement.removeChild(this.ulElement);\n    }\n\n    super.destroy();\n  }\n  /**\n   * Adds the collection of TreeView nodes based on target and index position. If target node is not specified,\n   * then the nodes are added as children of the given parentID or in the root level of TreeView.\n   * @param  { { [key: string]: Object }[] } nodes - Specifies the array of JSON data that has to be added.\n   * @param  { string | Element } target - Specifies ID of TreeView node/TreeView node as target element.\n   * @param  { number } index - Specifies the index to place the newly added nodes in the target element.\n   * @param { boolean } preventTargetExpand - If set to true, the target parent node will be prevented from auto expanding.\n   */\n\n\n  addNodes(nodes, target, index, preventTargetExpand) {\n    if (isNullOrUndefined(nodes)) {\n      return;\n    }\n\n    nodes = JSON.parse(JSON.stringify(nodes));\n    let dropLi = this.getElement(target);\n    this.preventExpand = preventTargetExpand;\n\n    if (this.fields.dataSource instanceof DataManager) {\n      if (!this.isOffline) {\n        this.crudOperation('insert', null, target, null, nodes, index, this.preventExpand);\n      } else {\n        this.addSuccess(nodes, dropLi, index);\n      }\n    } else if (this.dataType === 2) {\n      this.addGivenNodes(nodes, dropLi, index);\n    } else {\n      if (dropLi) {\n        this.addGivenNodes(nodes, dropLi, index);\n      } else {\n        nodes = this.getSortedData(nodes);\n\n        for (let i = 0; i < nodes.length; i++) {\n          let pid = getValue(this.fields.parentID, nodes[i]);\n          dropLi = pid ? this.getElement(pid.toString()) : pid;\n          this.addGivenNodes([nodes[i]], dropLi, index);\n        }\n      }\n\n      this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n    }\n\n    this.updateCheckedStateFromDS();\n\n    if (this.showCheckBox && dropLi) {\n      this.ensureParentCheckState(dropLi);\n    }\n\n    if (this.fields.dataSource instanceof DataManager === false) {\n      this.preventExpand = false;\n      this.triggerEvent();\n    }\n  }\n  /**\n   * Instead of clicking on the TreeView node for editing, we can enable it by using\n   * `beginEdit` property. On passing the node ID or element through this property, the edit textBox\n   * will be created for the particular node thus allowing us to edit it.\n   * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n   */\n\n\n  beginEdit(node) {\n    let ele = this.getElement(node);\n\n    if (isNullOrUndefined(ele) || this.disabled) {\n      return;\n    }\n\n    this.createTextbox(ele, null);\n  }\n  /**\n   * Checks all the unchecked nodes. You can also check specific nodes by passing array of unchecked nodes\n   * as argument to this method.\n   * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n   */\n\n\n  checkAll(nodes) {\n    if (this.showCheckBox) {\n      this.doCheckBoxAction(nodes, true);\n    }\n  }\n  /**\n   * Collapses all the expanded TreeView nodes. You can collapse specific nodes by passing array of nodes as argument to this method.\n   * You can also collapse all the nodes excluding the hidden nodes by setting **excludeHiddenNodes** to true. If you want to collapse\n   * a specific level of nodes, set **level** as argument to collapseAll method.\n   * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/ array of TreeView node.\n   * @param  {number} level - TreeView nodes will collapse up to the given level.\n   * @param  {boolean} excludeHiddenNodes - Whether or not to exclude hidden nodes of TreeView when collapsing all nodes.\n   */\n\n\n  collapseAll(nodes, level, excludeHiddenNodes) {\n    if (!isNullOrUndefined(nodes)) {\n      this.doGivenAction(nodes, COLLAPSIBLE, false);\n    } else {\n      if (level > 0) {\n        this.collapseByLevel(select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n      } else {\n        this.collapseAllNodes(excludeHiddenNodes);\n      }\n    }\n  }\n  /**\n   * Disables the collection of nodes by passing the ID of nodes or node elements in the array.\n   * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n   */\n\n\n  disableNodes(nodes) {\n    if (!isNullOrUndefined(nodes)) {\n      this.doDisableAction(nodes);\n    }\n  }\n  /**\n   * Enables the collection of disabled nodes by passing the ID of nodes or node elements in the array.\n   * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n   */\n\n\n  enableNodes(nodes) {\n    if (!isNullOrUndefined(nodes)) {\n      this.doEnableAction(nodes);\n    }\n  }\n  /**\n   * Ensures visibility of the TreeView node by using node ID or node element.\n   * When many TreeView nodes are present and we need to find a particular node, `ensureVisible` property\n   * helps bring the node to visibility by expanding the TreeView and scrolling to the specific node.\n   * @param  {string | Element} node - Specifies ID of TreeView node/TreeView nodes.\n   */\n\n\n  ensureVisible(node) {\n    let liEle = this.getElement(node);\n\n    if (isNullOrUndefined(liEle)) {\n      return;\n    }\n\n    let parents = this.parents(liEle, '.' + LISTITEM);\n    this.expandAll(parents);\n    setTimeout(() => {\n      liEle.scrollIntoView(true);\n    }, 450);\n  }\n  /**\n   * Expands all the collapsed TreeView nodes. You can expand the specific nodes by passing the array of collapsed nodes\n   * as argument to this method. You can also expand all the collapsed nodes by excluding the hidden nodes by setting\n   * **excludeHiddenNodes** to true to this method. To expand a specific level of nodes, set **level** as argument to expandAll method.\n   * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n   * @param  {number} level - TreeView nodes will expand up to the given level.\n   * @param  {boolean} excludeHiddenNodes - Whether or not to exclude hidden nodes when expanding all nodes.\n   */\n\n\n  expandAll(nodes, level, excludeHiddenNodes) {\n    if (!isNullOrUndefined(nodes)) {\n      this.doGivenAction(nodes, EXPANDABLE, true);\n    } else {\n      if (level > 0) {\n        this.expandByLevel(select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n      } else {\n        this.expandAllNodes(excludeHiddenNodes);\n      }\n    }\n  }\n  /**\n   * Gets all the checked nodes including child, whether it is loaded or not.\n   */\n\n\n  getAllCheckedNodes() {\n    let checkNodes = this.checkedNodes;\n    return checkNodes;\n  }\n  /**\n  * Gets all the disabled nodes including child, whether it is loaded or not.\n  */\n\n\n  getDisabledNodes() {\n    let disabledNodes = this.disableNode;\n    return disabledNodes;\n  }\n  /**\n   * Get the node's data such as id, text, parentID, selected, isChecked, and expanded by passing the node element or it's ID.\n   * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n   */\n\n\n  getNode(node) {\n    let ele = this.getElement(node);\n    return this.getNodeData(ele, true);\n  }\n  /**\n   * To get the updated data source of TreeView after performing some operation like drag and drop, node editing,\n   * node selecting/unSelecting, node expanding/collapsing, node checking/unChecking, adding and removing node.\n   * * If you pass the ID of TreeView node as arguments for this method then it will return the updated data source\n   * of the corresponding node otherwise it will return the entire updated data source of TreeView.\n   * * The updated data source also contains custom attributes if you specified in data source.\n   * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n   * @isGenericType true\n   */\n\n\n  getTreeData(node) {\n    let id = this.getId(node);\n    this.updatePersistProp();\n\n    if (isNullOrUndefined(id)) {\n      return this.treeData;\n    } else {\n      let data = this.getNodeObject(id);\n      return isNullOrUndefined(data) ? [] : [data];\n    }\n  }\n  /**\n   * Moves the collection of nodes within the same TreeView based on target or its index position.\n   * @param  {string[] | Element[]} sourceNodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n   * @param  {string | Element} target - Specifies ID of TreeView node/TreeView node as target element.\n   * @param  {number} index - Specifies the index to place the moved nodes in the target element.\n   * @param { boolean } preventTargetExpand - If set to true, the target parent node will be prevented from auto expanding.\n   */\n\n\n  moveNodes(sourceNodes, target, index, preventTargetExpand) {\n    let dropLi = this.getElement(target);\n\n    if (isNullOrUndefined(dropLi)) {\n      return;\n    }\n\n    for (let i = 0; i < sourceNodes.length; i++) {\n      let dragLi = this.getElement(sourceNodes[i]);\n\n      if (isNullOrUndefined(dragLi) || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n        continue;\n      }\n\n      this.preventExpand = preventTargetExpand;\n      this.dropAsChildNode(dragLi, dropLi, this, index);\n    }\n\n    if (this.fields.dataSource instanceof DataManager === false) {\n      this.preventExpand = false;\n    }\n\n    this.triggerEvent();\n  }\n  /**\n   * Refreshes a particular node of the TreeView.\n   * @param  {string | Element} target - Specifies the ID of TreeView node or TreeView node as target element.\n   * @param  {{ [key: string]: Object }[]} newData - Specifies the new data of TreeView node.\n   */\n\n\n  refreshNode(target, newData) {\n    if (isNullOrUndefined(target) || isNullOrUndefined(newData)) {\n      return;\n    }\n\n    let id;\n    let isRefreshChild = false;\n\n    if (this.dataType == 1 && newData.length > 1) {\n      isRefreshChild = true;\n    } else if (this.dataType == 2 && newData.length === 1) {\n      let updatedChildValue = getValue(this.fields.child.toString(), newData[0]);\n\n      if (!isNullOrUndefined(updatedChildValue)) {\n        isRefreshChild = true;\n      }\n    }\n\n    let liEle = this.getElement(target);\n    id = liEle ? liEle.getAttribute('data-uid') : target ? target.toString() : null;\n    this.refreshData = this.getNodeObject(id);\n    newData = JSON.parse(JSON.stringify(newData));\n    /* eslint-disable */\n\n    let newNodeData;\n    let parentData;\n\n    if (this.dataType == 1 && isRefreshChild) {\n      for (let k = 0; k < newData.length; k++) {\n        if (isNullOrUndefined(newData[k][this.fields.parentID])) {\n          parentData = newData[k];\n          newData.splice(k, 1);\n          break;\n        }\n      }\n\n      newNodeData = extend({}, this.refreshData, parentData);\n    } else {\n      newNodeData = extend({}, this.refreshData, newData[0]);\n    }\n\n    if (isNullOrUndefined(liEle)) {\n      this.updatePosition(id, newNodeData, isRefreshChild, newData);\n      return;\n    }\n\n    this.isRefreshed = true;\n    let level = parseFloat(liEle.getAttribute('aria-level'));\n    let newliEle = ListBase.createListItemFromJson(this.createElement, [newNodeData], this.listBaseOption, level);\n    let ul = select('.' + PARENTITEM, liEle);\n    let childItems = getValue(this.fields.child.toString(), newNodeData);\n\n    if (isRefreshChild && ul || isRefreshChild && !isNullOrUndefined(childItems)) {\n      let parentEle = liEle.parentElement;\n      let index = Array.prototype.indexOf.call(parentEle.childNodes, liEle);\n      remove(liEle);\n      parentEle.insertBefore(newliEle[0], parentEle.childNodes[index]);\n      this.updatePosition(id, newNodeData, isRefreshChild, newData);\n\n      if (isRefreshChild && ul) {\n        this.expandAll([id]);\n      }\n    } else {\n      let txtEle = select('.' + TEXTWRAP, liEle);\n      let newTextEle = select('.' + TEXTWRAP, newliEle[0]);\n      let icon = select('div.' + ICON, txtEle);\n      let newIcon = select('div.' + ICON, newTextEle);\n\n      if (icon && newIcon) {\n        if (newIcon.classList.contains(EXPANDABLE) && icon.classList.contains(COLLAPSIBLE)) {\n          removeClass([newIcon], EXPANDABLE);\n          addClass([newIcon], COLLAPSIBLE);\n        } else if (newIcon.classList.contains(COLLAPSIBLE) && icon.classList.contains(EXPANDABLE)) {\n          removeClass([newIcon], COLLAPSIBLE);\n          addClass([newIcon], EXPANDABLE);\n        } else if (icon.classList.contains('interaction')) {\n          addClass([newIcon], 'interaction');\n        }\n      }\n\n      remove(txtEle);\n      let fullEle = select('.' + FULLROW, liEle);\n      fullEle.parentNode.insertBefore(newTextEle, fullEle.nextSibling);\n      this.updatePosition(id, newNodeData, isRefreshChild, newData);\n    }\n\n    liEle = this.getElement(target);\n\n    if (newNodeData[this.fields.tooltip]) {\n      liEle.setAttribute(\"title\", newNodeData[this.fields.tooltip]);\n    }\n\n    if (newNodeData.hasOwnProperty(this.fields.htmlAttributes) && newNodeData[this.fields.htmlAttributes]) {\n      let attr = {};\n      merge(attr, newNodeData[this.fields.htmlAttributes]);\n\n      if (attr.class) {\n        addClass([liEle], attr.class.split(' '));\n        delete attr.class;\n      } else {\n        attributes(liEle, attr);\n      }\n    }\n\n    if (this.selectedNodes.indexOf(id) !== -1) {\n      liEle.setAttribute('aria-selected', 'true');\n      addClass([liEle], ACTIVE);\n    }\n\n    this.isRefreshed = false;\n    this.triggerEvent();\n  }\n  /**\n   * Removes the collection of TreeView nodes by passing the array of node details as argument to this method.\n   * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n   */\n\n\n  removeNodes(nodes) {\n    if (!isNullOrUndefined(nodes)) {\n      if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n        this.crudOperation('delete', nodes);\n      } else {\n        this.deleteSuccess(nodes);\n      }\n    }\n  }\n  /**\n   * Replaces the text of the TreeView node with the given text.\n   * @param  {string | Element} target - Specifies ID of TreeView node/TreeView node as target element.\n   * @param  {string} newText - Specifies the new text of TreeView node.\n   */\n\n\n  updateNode(target, newText) {\n    if (isNullOrUndefined(target) || isNullOrUndefined(newText) || !this.allowEditing) {\n      return;\n    }\n\n    let liEle = this.getElement(target);\n\n    if (isNullOrUndefined(liEle)) {\n      return;\n    }\n\n    let txtEle = select('.' + LISTTEXT, liEle);\n    this.updateOldText(liEle);\n    let eventArgs = this.getEditEvent(liEle, null, null);\n    this.trigger('nodeEditing', eventArgs, observedArgs => {\n      if (!observedArgs.cancel) {\n        if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n          this.crudOperation('update', null, target, newText, null, null, false);\n        } else {\n          this.appendNewText(liEle, txtEle, newText, false);\n        }\n      }\n    });\n  }\n  /**\n   * Unchecks all the checked nodes. You can also uncheck the specific nodes by passing array of checked nodes\n   * as argument to this method.\n   * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n   */\n\n\n  uncheckAll(nodes) {\n    if (this.showCheckBox) {\n      this.doCheckBoxAction(nodes, false);\n    }\n  }\n\n};\n\n__decorate$8([Property(false)], TreeView.prototype, \"allowDragAndDrop\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"allowEditing\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"allowMultiSelection\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"allowTextWrap\", void 0);\n\n__decorate$8([Complex({}, NodeAnimationSettings)], TreeView.prototype, \"animation\", void 0);\n\n__decorate$8([Property()], TreeView.prototype, \"checkedNodes\", void 0);\n\n__decorate$8([Property('')], TreeView.prototype, \"cssClass\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"disabled\", void 0);\n\n__decorate$8([Property(null)], TreeView.prototype, \"dragArea\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"enablePersistence\", void 0);\n\n__decorate$8([Property()], TreeView.prototype, \"expandedNodes\", void 0);\n\n__decorate$8([Property('Auto')], TreeView.prototype, \"expandOn\", void 0);\n\n__decorate$8([Complex({}, FieldsSettings)], TreeView.prototype, \"fields\", void 0);\n\n__decorate$8([Property(true)], TreeView.prototype, \"fullRowSelect\", void 0);\n\n__decorate$8([Property(true)], TreeView.prototype, \"loadOnDemand\", void 0);\n\n__decorate$8([Property()], TreeView.prototype, \"locale\", void 0);\n\n__decorate$8([Property()], TreeView.prototype, \"nodeTemplate\", void 0);\n\n__decorate$8([Property()], TreeView.prototype, \"selectedNodes\", void 0);\n\n__decorate$8([Property('None')], TreeView.prototype, \"sortOrder\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"showCheckBox\", void 0);\n\n__decorate$8([Property(true)], TreeView.prototype, \"autoCheck\", void 0);\n\n__decorate$8([Property(false)], TreeView.prototype, \"fullRowNavigable\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"actionFailure\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"created\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"dataBound\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"dataSourceChanged\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"drawNode\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"destroyed\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"keyPress\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeChecked\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeChecking\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeClicked\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeCollapsed\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeCollapsing\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeDragging\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeDragStart\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeDragStop\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeDropped\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeEdited\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeEditing\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeExpanded\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeExpanding\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeSelected\", void 0);\n\n__decorate$8([Event()], TreeView.prototype, \"nodeSelecting\", void 0);\n\nTreeView = TreeView_1 = __decorate$8([NotifyPropertyChanges], TreeView);\n/**\n * TreeView modules\n */\n\nvar __decorate$9 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst CONTROL$1 = 'e-control';\nconst ROOT$1 = 'e-sidebar';\nconst DOCKER = 'e-dock';\nconst CLOSE = 'e-close';\nconst OPEN = 'e-open';\nconst TRASITION = 'e-transition';\nconst DEFAULTBACKDROP = 'e-sidebar-overlay';\nconst CONTEXTBACKDROP = 'e-backdrop';\nconst RTL$2 = 'e-rtl';\nconst RIGHT = 'e-right';\nconst LEFT = 'e-left';\nconst OVER = 'e-over';\nconst PUSH = 'e-push';\nconst SLIDE = 'e-slide';\nconst VISIBILITY = 'e-visibility';\nconst DISPLAY = 'e-sidebar-display';\nconst MAINCONTENTANIMATION = 'e-content-animation';\nconst DISABLEANIMATION = 'e-disable-animation';\nconst CONTEXT = 'e-sidebar-context';\nconst SIDEBARABSOLUTE = 'e-sidebar-absolute';\n/**\n * Sidebar is an expandable or collapsible\n * component that typically act as a side container to place the primary or secondary content alongside of the main content.\n * ```html\n * <aside id=\"sidebar\">\n * </aside>\n * ```\n * ```typescript\n * <script>\n *   let sidebarObject: Sidebar = new Sidebar();\n *   sidebarObject.appendTo(\"#sidebar\");\n * </script>\n * ```\n */\n\nlet Sidebar = class Sidebar extends Component {\n  /* eslint-enable */\n  constructor(options, element) {\n    super(options, element);\n  }\n\n  preRender() {\n    this.setWidth();\n  }\n\n  render() {\n    this.initialize();\n    this.wireEvents();\n    this.renderComplete();\n  }\n\n  initialize() {\n    this.setTarget();\n    this.addClass();\n    this.setZindex();\n\n    if (this.enableDock) {\n      this.setDock();\n    }\n\n    if (this.isOpen) {\n      this.show();\n      this.firstRender = true;\n    } else {\n      this.setMediaQuery();\n    }\n\n    this.checkType(true);\n    this.setType(this.type);\n    this.setCloseOnDocumentClick();\n    this.setEnableRTL();\n\n    if (Browser.isDevice) {\n      this.windowWidth = window.innerWidth;\n    }\n  }\n\n  setEnableRTL() {\n    (this.enableRtl ? addClass : removeClass)([this.element], RTL$2);\n  }\n\n  setTarget() {\n    this.targetEle = this.element.nextElementSibling;\n    this.sidebarEleCopy = this.element.cloneNode(true);\n\n    if (typeof this.target === 'string') {\n      this.setProperties({\n        target: document.querySelector(this.target)\n      }, true);\n    }\n\n    if (this.target) {\n      this.target.insertBefore(this.element, this.target.children[0]);\n      addClass([this.element], SIDEBARABSOLUTE);\n      addClass([this.target], CONTEXT);\n      this.targetEle = this.getTargetElement();\n    }\n  }\n\n  getTargetElement() {\n    let siblingElement = this.element.nextElementSibling;\n\n    while (!isNullOrUndefined(siblingElement)) {\n      if (!siblingElement.classList.contains(ROOT$1)) {\n        break;\n      }\n\n      siblingElement = siblingElement.nextElementSibling;\n    }\n\n    return siblingElement;\n  }\n\n  setCloseOnDocumentClick() {\n    if (this.closeOnDocumentClick) {\n      EventHandler.add(document, 'mousedown touchstart', this.documentclickHandler, this);\n    } else {\n      EventHandler.remove(document, 'mousedown touchstart', this.documentclickHandler);\n    }\n  }\n\n  setWidth() {\n    if (this.enableDock && this.position === 'Left') {\n      setStyleAttribute(this.element, {\n        'width': this.setDimension(this.dockSize)\n      });\n    } else if (this.enableDock && this.position === 'Right') {\n      setStyleAttribute(this.element, {\n        'width': this.setDimension(this.dockSize)\n      });\n    } else if (!this.enableDock) {\n      setStyleAttribute(this.element, {\n        'width': this.setDimension(this.width)\n      });\n    }\n  }\n\n  setDimension(width) {\n    if (typeof width === 'number') {\n      width = formatUnit(width);\n    } else if (typeof width === 'string') {\n      width = width.match(/px|%|em/) ? width : formatUnit(width);\n    } else {\n      width = '100%';\n    }\n\n    return width;\n  }\n\n  setZindex() {\n    setStyleAttribute(this.element, {\n      'z-index': '' + this.zIndex\n    });\n  }\n\n  addClass() {\n    if (this.element.tagName === \"EJS-SIDEBAR\") {\n      addClass([this.element], DISPLAY);\n    }\n\n    const classELement = document.querySelector('.e-main-content');\n\n    if (!isNullOrUndefined(classELement || this.targetEle)) {\n      addClass([classELement || this.targetEle], [MAINCONTENTANIMATION]);\n    }\n\n    this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n\n    if (!this.enableDock && this.type !== 'Auto') {\n      addClass([this.element], [VISIBILITY]);\n    }\n\n    removeClass([this.element], [OPEN, CLOSE, RIGHT, LEFT, SLIDE, PUSH, OVER]);\n    this.element.classList.add(ROOT$1);\n    addClass([this.element], this.position === 'Right' ? RIGHT : LEFT);\n\n    if (this.enableDock) {\n      addClass([this.element], DOCKER);\n    }\n\n    this.element.setAttribute('tabindex', this.tabIndex);\n\n    if (this.type === 'Auto' && !Browser.isDevice) {\n      this.show();\n    } else if (!this.isOpen) {\n      addClass([this.element], CLOSE);\n    }\n  }\n\n  checkType(val) {\n    if (!(this.type === 'Push' || this.type === 'Over' || this.type === 'Slide')) {\n      this.type = 'Auto';\n    } else {\n      if (!this.element.classList.contains(CLOSE) && !val) {\n        this.hide();\n      }\n    }\n  }\n\n  transitionEnd(e) {\n    this.setDock();\n\n    if (!isNullOrUndefined(e) && !this.firstRender) {\n      this.triggerChange();\n    }\n\n    this.firstRender = false;\n    EventHandler.remove(this.element, 'transitionend', this.transitionEnd);\n  }\n\n  destroyBackDrop() {\n    const sibling = document.querySelector('.e-main-content') || this.targetEle;\n\n    if (this.target && this.showBackdrop && sibling) {\n      removeClass([sibling], CONTEXTBACKDROP);\n    } else if (this.showBackdrop && this.modal) {\n      this.modal.style.display = 'none';\n      this.modal.outerHTML = '';\n      this.modal = null;\n    }\n  }\n  /* eslint-disable */\n\n  /**\n   * Hide the Sidebar component, if it is in an open state.\n   *\n   * @returns {void}\n   *\n   */\n\n\n  hide(e) {\n    const closeArguments = {\n      model: this,\n      element: this.element,\n      cancel: false,\n      isInteracted: !isNullOrUndefined(e),\n      event: e || null\n    };\n    this.trigger('close', closeArguments, observedcloseArgs => {\n      if (!observedcloseArgs.cancel) {\n        if (this.element.classList.contains(CLOSE)) {\n          return;\n        }\n\n        if (this.element.classList.contains(OPEN) && !this.animate) {\n          this.triggerChange();\n        }\n\n        addClass([this.element], CLOSE);\n        removeClass([this.element], OPEN);\n        setStyleAttribute(this.element, {\n          'width': formatUnit(this.enableDock ? this.dockSize : this.width)\n        });\n        this.setType(this.type);\n        const sibling = document.querySelector('.e-main-content') || this.targetEle;\n\n        if (!this.enableDock && sibling) {\n          sibling.style.transform = 'translateX(' + 0 + 'px)';\n          sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = '0px';\n        }\n\n        this.destroyBackDrop();\n        this.setAnimation();\n\n        if (this.type === 'Slide') {\n          document.body.classList.remove('e-sidebar-overflow');\n        }\n\n        this.setProperties({\n          isOpen: false\n        }, true);\n\n        if (this.enableDock) {\n          setTimeout(() => this.setTimeOut(), 50);\n        }\n\n        EventHandler.add(this.element, 'transitionend', this.transitionEnd, this);\n      }\n    });\n  }\n\n  setTimeOut() {\n    const sibling = document.querySelector('.e-main-content') || this.targetEle;\n    const elementWidth = this.element.getBoundingClientRect().width;\n\n    if (this.element.classList.contains(OPEN) && sibling && !(this.type === 'Over' && this.enableDock)) {\n      if (this.position === 'Left') {\n        sibling.style.marginLeft = this.setDimension(this.width === 'auto' ? elementWidth : this.width);\n      } else {\n        sibling.style.marginRight = this.setDimension(this.width === 'auto' ? elementWidth : this.width);\n      }\n    } else if (this.element.classList.contains(CLOSE) && sibling) {\n      if (this.position === 'Left') {\n        sibling.style.marginLeft = this.setDimension(this.dockSize === 'auto' ? elementWidth : this.dockSize);\n      } else {\n        sibling.style.marginRight = this.setDimension(this.dockSize === 'auto' ? elementWidth : this.dockSize);\n      }\n    }\n  }\n  /* eslint-disable */\n\n  /**\n   * Shows the Sidebar component, if it is in closed state.\n   *\n   * @returns {void}\n   */\n\n\n  show(e) {\n    const openArguments = {\n      model: this,\n      element: this.element,\n      cancel: false,\n      isInteracted: !isNullOrUndefined(e),\n      event: e || null\n    };\n    this.trigger('open', openArguments, observedopenArgs => {\n      if (!observedopenArgs.cancel) {\n        removeClass([this.element], VISIBILITY);\n\n        if (this.element.classList.contains(OPEN)) {\n          return;\n        }\n\n        if (this.element.classList.contains(CLOSE) && !this.animate) {\n          this.triggerChange();\n        }\n\n        addClass([this.element], [OPEN, TRASITION]);\n        setStyleAttribute(this.element, {\n          'transform': ''\n        });\n        removeClass([this.element], CLOSE);\n        setStyleAttribute(this.element, {\n          'width': formatUnit(this.width)\n        });\n        this.setType(this.type);\n        this.createBackDrop();\n        this.setAnimation();\n\n        if (this.type === 'Slide') {\n          document.body.classList.add('e-sidebar-overflow');\n        }\n\n        this.setProperties({\n          isOpen: true\n        }, true);\n        EventHandler.add(this.element, 'transitionend', this.transitionEnd, this);\n      }\n    });\n  }\n\n  setAnimation() {\n    if (this.animate) {\n      removeClass([this.element], DISABLEANIMATION);\n    } else {\n      addClass([this.element], DISABLEANIMATION);\n    }\n  }\n\n  triggerChange() {\n    const changeArguments = {\n      name: 'change',\n      element: this.element\n    };\n    this.trigger('change', changeArguments);\n  }\n\n  setDock() {\n    if (this.enableDock && this.position === 'Left' && !this.getState()) {\n      setStyleAttribute(this.element, {\n        'transform': 'translateX(' + -100 + '%) translateX(' + this.setDimension(this.dockSize) + ')'\n      });\n    } else if (this.enableDock && this.position === 'Right' && !this.getState()) {\n      setStyleAttribute(this.element, {\n        'transform': 'translateX(' + 100 + '%) translateX(' + '-' + this.setDimension(this.dockSize) + ')'\n      });\n    }\n\n    if (this.element.classList.contains(CLOSE) && this.enableDock) {\n      setStyleAttribute(this.element, {\n        'width': this.setDimension(this.dockSize)\n      });\n    }\n  }\n\n  createBackDrop() {\n    if (this.target && this.showBackdrop && this.getState()) {\n      const sibling = document.querySelector('.e-main-content') || this.targetEle;\n      addClass([sibling], CONTEXTBACKDROP);\n    } else if (this.showBackdrop && !this.modal && this.getState()) {\n      this.modal = this.createElement('div');\n      this.modal.className = DEFAULTBACKDROP;\n      this.modal.style.display = 'block';\n      document.body.appendChild(this.modal);\n    }\n  }\n\n  getPersistData() {\n    return this.addOnPersist(['type', 'position', 'isOpen']);\n  }\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - returns module name.\n   * @private\n   *\n   */\n\n\n  getModuleName() {\n    return 'sidebar';\n  }\n  /**\n   * Shows or hides the Sidebar based on the current state.\n   *\n   * @returns {void}\n   */\n\n\n  toggle() {\n    if (this.element.classList.contains(OPEN)) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  getState() {\n    return this.element.classList.contains(OPEN) ? true : false;\n  }\n\n  setMediaQuery() {\n    if (this.mediaQuery) {\n      let media = false;\n\n      if (typeof this.mediaQuery === 'string') {\n        media = window.matchMedia(this.mediaQuery).matches;\n      } else {\n        media = this.mediaQuery.matches;\n      }\n\n      if (media && this.windowWidth !== window.innerWidth) {\n        this.show();\n      } else if (this.getState() && this.windowWidth !== window.innerWidth) {\n        this.hide();\n      }\n    }\n  }\n\n  resize() {\n    if (this.type === 'Auto') {\n      if (Browser.isDevice) {\n        addClass([this.element], OVER);\n      } else {\n        addClass([this.element], PUSH);\n      }\n    }\n\n    this.setMediaQuery();\n\n    if (Browser.isDevice) {\n      this.windowWidth = window.innerWidth;\n    }\n  }\n\n  documentclickHandler(e) {\n    if (closest(e.target, '.' + CONTROL$1 + '' + '.' + ROOT$1)) {\n      return;\n    }\n\n    this.hide(e);\n  }\n\n  enableGestureHandler(args) {\n    if (!this.isOpen && this.position === 'Left' && args.swipeDirection === 'Right' && args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5) {\n      this.show();\n    } else if (this.isOpen && this.position === 'Left' && args.swipeDirection === 'Left') {\n      this.hide();\n    } else if (this.isOpen && this.position === 'Right' && args.swipeDirection === 'Right') {\n      this.hide();\n    } else if (!this.isOpen && this.position === 'Right' && args.swipeDirection === 'Left' && window.innerWidth - args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5) {\n      this.show();\n    }\n  }\n\n  setEnableGestures() {\n    if (this.enableGestures) {\n      this.mainContentEle = new Touch(document.body, {\n        swipe: this.enableGestureHandler.bind(this)\n      });\n      this.sidebarEle = new Touch(this.element, {\n        swipe: this.enableGestureHandler.bind(this)\n      });\n    } else {\n      if (this.mainContentEle && this.sidebarEle) {\n        this.mainContentEle.destroy();\n        this.sidebarEle.destroy();\n      }\n    }\n  }\n\n  wireEvents() {\n    this.setEnableGestures();\n    EventHandler.add(window, 'resize', this.resize, this);\n  }\n\n  unWireEvents() {\n    EventHandler.remove(window, 'resize', this.resize);\n    EventHandler.remove(document, 'mousedown touchstart', this.documentclickHandler);\n\n    if (this.mainContentEle) {\n      this.mainContentEle.destroy();\n    }\n\n    if (this.sidebarEle) {\n      this.sidebarEle.destroy();\n    }\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {SidebarModel} newProp - specifies newProp value.\n   * @param {SidebarModel} oldProp - specifies oldProp value.\n   * @returns {void}\n   * @private\n   *\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    const sibling = document.querySelector('.e-main-content') || this.targetEle;\n    const isRendered = this.isServerRendered;\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'isOpen':\n          if (this.isOpen) {\n            this.show();\n          } else {\n            this.hide();\n          }\n\n          break;\n\n        case 'width':\n          this.setWidth();\n\n          if (!this.getState()) {\n            this.setDock();\n          }\n\n          break;\n\n        case 'animate':\n          this.setAnimation();\n          break;\n\n        case 'type':\n          this.checkType(false);\n          removeClass([this.element], [VISIBILITY]);\n          this.addClass();\n          addClass([this.element], this.type === 'Auto' ? Browser.isDevice ? ['e-over'] : ['e-push'] : ['e-' + this.type.toLowerCase()]);\n          break;\n\n        case 'position':\n          this.element.style.transform = '';\n          this.setDock();\n\n          if (sibling) {\n            sibling.style[this.position === 'Left' ? 'marginRight' : 'marginLeft'] = '0px';\n          }\n\n          if (this.position === 'Right') {\n            removeClass([this.element], LEFT);\n            addClass([this.element], RIGHT);\n          } else {\n            removeClass([this.element], RIGHT);\n            addClass([this.element], LEFT);\n          }\n\n          this.setType(this.type);\n          break;\n\n        case 'showBackdrop':\n          if (this.showBackdrop) {\n            this.createBackDrop();\n          } else {\n            if (this.modal) {\n              this.modal.style.display = 'none';\n              this.modal.outerHTML = '';\n              this.modal = null;\n            }\n          }\n\n          break;\n\n        case 'target':\n          if (typeof this.target === 'string') {\n            this.setProperties({\n              target: document.querySelector(this.target)\n            }, true);\n          }\n\n          if (isNullOrUndefined(this.target)) {\n            removeClass([this.element], SIDEBARABSOLUTE);\n            removeClass([oldProp.target], CONTEXT);\n            setStyleAttribute(sibling, {\n              'margin-left': 0,\n              'margin-right': 0\n            });\n            document.body.insertAdjacentElement('afterbegin', this.element);\n          }\n\n          this.isServerRendered = false;\n          super.refresh();\n          this.isServerRendered = isRendered;\n          break;\n\n        case 'closeOnDocumentClick':\n          this.setCloseOnDocumentClick();\n          break;\n\n        case 'enableDock':\n          if (!this.getState()) {\n            this.setDock();\n          }\n\n          break;\n\n        case 'zIndex':\n          this.setZindex();\n          break;\n\n        case 'mediaQuery':\n          this.setMediaQuery();\n          break;\n\n        case 'enableGestures':\n          this.setEnableGestures();\n          break;\n\n        case 'enableRtl':\n          this.setEnableRTL();\n          break;\n      }\n    }\n  }\n\n  setType(type) {\n    const elementWidth = this.element.getBoundingClientRect().width;\n    this.setZindex();\n    const sibling = document.querySelector('.e-main-content') || this.targetEle;\n\n    if (sibling) {\n      sibling.style.transform = 'translateX(' + 0 + 'px)';\n\n      if (!Browser.isDevice && this.type !== 'Auto' && !(this.type === 'Over' && this.enableDock)) {\n        sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = '0px';\n      }\n    }\n\n    const margin = this.position === 'Left' ? elementWidth + 'px' : elementWidth + 'px';\n    const eleWidth = this.position === 'Left' ? elementWidth : -elementWidth;\n    removeClass([this.element], [PUSH, OVER, SLIDE]);\n\n    switch (type) {\n      case 'Push':\n        addClass([this.element], [PUSH]);\n\n        if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n          sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = margin;\n        }\n\n        break;\n\n      case 'Slide':\n        addClass([this.element], [SLIDE]);\n\n        if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n          sibling.style.transform = 'translateX(' + eleWidth + 'px)';\n        }\n\n        break;\n\n      case 'Over':\n        addClass([this.element], [OVER]);\n\n        if (this.enableDock && (this.element.classList.contains(CLOSE) || this.isOpen)) {\n          if (sibling) {\n            sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = this.setDimension(this.dockSize);\n          }\n        }\n\n        break;\n\n      case 'Auto':\n        addClass([this.element], [TRASITION]);\n\n        if (Browser.isDevice) {\n          if (sibling && this.enableDock && !this.getState()) {\n            sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = margin;\n            addClass([this.element], PUSH);\n          } else {\n            addClass([this.element], OVER);\n          }\n        } else {\n          addClass([this.element], PUSH);\n\n          if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n            sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = margin;\n          }\n        }\n\n        this.createBackDrop();\n    }\n  }\n  /**\n   * Removes the control from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @returns {void}\n   *\n   */\n\n\n  destroy() {\n    super.destroy();\n\n    if (this.target) {\n      removeClass([this.target], CONTEXT);\n    }\n\n    this.destroyBackDrop();\n\n    if (this.element) {\n      removeClass([this.element], [OPEN, CLOSE, PUSH, SLIDE, OVER, LEFT, RIGHT, TRASITION]);\n      removeClass([this.element], SIDEBARABSOLUTE);\n      this.element.style.width = '';\n      this.element.style.zIndex = '';\n      this.element.style.transform = '';\n\n      if (!isNullOrUndefined(this.sidebarEleCopy.getAttribute('tabindex'))) {\n        this.element.setAttribute('tabindex', this.tabIndex);\n      } else {\n        this.element.removeAttribute('tabindex');\n      }\n    }\n\n    this.windowWidth = null;\n    const sibling = document.querySelector('.e-main-content') || this.targetEle;\n\n    if (!isNullOrUndefined(sibling)) {\n      sibling.style.margin = '';\n      sibling.style.transform = '';\n    }\n\n    this.unWireEvents();\n  }\n\n};\n\n__decorate$9([Property('auto')], Sidebar.prototype, \"dockSize\", void 0);\n\n__decorate$9([Property(null)], Sidebar.prototype, \"mediaQuery\", void 0);\n\n__decorate$9([Property(false)], Sidebar.prototype, \"enableDock\", void 0);\n\n__decorate$9([Property('en-US')], Sidebar.prototype, \"locale\", void 0);\n\n__decorate$9([Property(false)], Sidebar.prototype, \"enablePersistence\", void 0);\n\n__decorate$9([Property(true)], Sidebar.prototype, \"enableGestures\", void 0);\n\n__decorate$9([Property(false)], Sidebar.prototype, \"isOpen\", void 0);\n\n__decorate$9([Property(false)], Sidebar.prototype, \"enableRtl\", void 0);\n\n__decorate$9([Property(true)], Sidebar.prototype, \"animate\", void 0);\n\n__decorate$9([Property('auto')], Sidebar.prototype, \"height\", void 0);\n\n__decorate$9([Property(false)], Sidebar.prototype, \"closeOnDocumentClick\", void 0);\n\n__decorate$9([Property('Left')], Sidebar.prototype, \"position\", void 0);\n\n__decorate$9([Property(null)], Sidebar.prototype, \"target\", void 0);\n\n__decorate$9([Property(false)], Sidebar.prototype, \"showBackdrop\", void 0);\n\n__decorate$9([Property('Auto')], Sidebar.prototype, \"type\", void 0);\n\n__decorate$9([Property('auto')], Sidebar.prototype, \"width\", void 0);\n\n__decorate$9([Property(1000)], Sidebar.prototype, \"zIndex\", void 0);\n\n__decorate$9([Event()], Sidebar.prototype, \"created\", void 0);\n\n__decorate$9([Event()], Sidebar.prototype, \"close\", void 0);\n\n__decorate$9([Event()], Sidebar.prototype, \"open\", void 0);\n\n__decorate$9([Event()], Sidebar.prototype, \"change\", void 0);\n\n__decorate$9([Event()], Sidebar.prototype, \"destroyed\", void 0);\n\nSidebar = __decorate$9([NotifyPropertyChanges], Sidebar);\n/**\n * Sidebar modules\n */\n\nvar __decorate$10 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst ICONRIGHT = 'e-icon-right';\nconst ITEMTEXTCLASS = 'e-breadcrumb-text';\nconst ICONCLASS = 'e-breadcrumb-icon';\nconst MENUCLASS = 'e-breadcrumb-menu';\nconst ITEMCLASS = 'e-breadcrumb-item';\nconst POPUPCLASS = 'e-breadcrumb-popup';\nconst WRAPMODECLASS = 'e-breadcrumb-wrap-mode';\nconst SCROLLMODECLASS = 'e-breadcrumb-scroll-mode';\nconst TABINDEX = 'tabindex';\nconst DISABLEDCLASS = 'e-disabled';\nconst ARIADISABLED = 'aria-disabled';\nconst DOT = '.';\n\nclass BreadcrumbItem extends ChildProperty {}\n\n__decorate$10([Property('')], BreadcrumbItem.prototype, \"text\", void 0);\n\n__decorate$10([Property('')], BreadcrumbItem.prototype, \"url\", void 0);\n\n__decorate$10([Property(null)], BreadcrumbItem.prototype, \"iconCss\", void 0);\n\n__decorate$10([Property(false)], BreadcrumbItem.prototype, \"disabled\", void 0);\n/**\n * Breadcrumb is a graphical user interface that helps to identify or highlight the current location within a hierarchical structure of websites.\n * The aim is to make the user aware of their current position in a hierarchy of website links.\n * ```html\n * <nav id='breadcrumb'></nav>\n * ```\n * ```typescript\n * <script>\n * var breadcrumbObj = new Breadcrumb({ items: [{ text: 'Home', url: '/' }, { text: 'Index', url: './index.html }]});\n * breadcrumbObj.appendTo(\"#breadcrumb\");\n * </script>\n * ```\n */\n\n\nlet Breadcrumb = class Breadcrumb extends Component {\n  /**\n   * Constructor for creating the widget.\n   *\n   * @private\n   * @param {BreadcrumbModel} options - Specifies the Breadcrumb model.\n   * @param {string | HTMLElement} element - Specifies the element.\n   */\n  constructor(options, element) {\n    super(options, element);\n  }\n  /**\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {// pre render code\n  }\n  /**\n   * Initialize the control rendering.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  render() {\n    this.initialize();\n    this.renderItems(this.items);\n    this.wireEvents();\n  }\n\n  initialize() {\n    this._maxItems = this.maxItems;\n    this.element.setAttribute('aria-label', 'breadcrumb');\n\n    if (this.cssClass) {\n      addClass([this.element], this.cssClass.split(' '));\n    }\n\n    if (this.enableRtl) {\n      this.element.classList.add('e-rtl');\n    }\n\n    if (this.disabled) {\n      this.element.classList.add(DISABLEDCLASS);\n      this.element.setAttribute(ARIADISABLED, 'true');\n    }\n\n    if (this.overflowMode === 'Wrap') {\n      this.element.classList.add(WRAPMODECLASS);\n    } else if (this.overflowMode === 'Scroll') {\n      this.element.classList.add(SCROLLMODECLASS);\n    }\n\n    this.initItems();\n    this.initPvtProps();\n  }\n\n  initPvtProps() {\n    if (this.overflowMode === 'Hidden' && this._maxItems > 0) {\n      this.endIndex = this.getEndIndex();\n      this.startIndex = this.endIndex + 1 - (this._maxItems - 1);\n    }\n\n    if (this.overflowMode === 'Menu') {\n      if (this._maxItems >= 0) {\n        this.startIndex = this._maxItems > 1 ? 1 : 0;\n        this.endIndex = this.getEndIndex();\n        this.popupUl = this.createElement('ul', {\n          attrs: {\n            TABINDEX: '0',\n            'role': 'menu'\n          }\n        });\n      } else {\n        this.startIndex = this.endIndex = null;\n      }\n    }\n  }\n\n  getEndIndex() {\n    let endIndex;\n\n    if (this.activeItem) {\n      this.items.forEach((item, idx) => {\n        if (item.url === this.activeItem || item.text === this.activeItem) {\n          endIndex = idx;\n        }\n      });\n    } else {\n      endIndex = this.items.length - 1;\n    }\n\n    return endIndex;\n  }\n\n  initItems() {\n    if (!this.items.length) {\n      let baseUri;\n      let uri;\n      const items = [];\n\n      if (this.url) {\n        const url = new URL(this.url, window.location.origin);\n        baseUri = url.origin + '/';\n        uri = url.href.split(baseUri)[1].split('/');\n      } else {\n        baseUri = window.location.origin + '/';\n        uri = window.location.href.split(baseUri)[1].split('/');\n      }\n\n      items.push({\n        iconCss: 'e-icons e-home',\n        url: baseUri\n      });\n\n      for (let i = 0; i < uri.length; i++) {\n        if (uri[i]) {\n          items.push({\n            text: uri[i],\n            url: baseUri + uri[i]\n          });\n          baseUri += uri[i] + '/';\n        }\n      }\n\n      this.setProperties({\n        items: items\n      }, true);\n    }\n  }\n\n  renderItems(items) {\n    let item;\n    let isSingleLevel;\n    const isIconRight = this.element.classList.contains(ICONRIGHT);\n    const itemsLength = items.length;\n\n    if (itemsLength) {\n      let isActiveItem;\n      let isLastItem;\n      let isLastItemInPopup;\n      let j = 0;\n      let wrapDiv;\n      const len = itemsLength * 2 - 1;\n      let isItemCancelled = false;\n      const ol = this.createElement('ol', {\n        className: this.overflowMode === 'Wrap' ? 'e-breadcrumb-wrapped-ol' : ''\n      });\n      const firstOl = this.createElement('ol', {\n        className: this.overflowMode === 'Wrap' ? 'e-breadcrumb-first-ol' : ''\n      });\n      const showIcon = this.hasField(items, 'iconCss');\n      const isCollasped = this.overflowMode === 'Collapsed' && this._maxItems > 0 && itemsLength > this._maxItems && !this.isExpanded;\n      const isDefaultOverflowMode = this.overflowMode === 'Hidden' && this._maxItems > 0;\n\n      if (this.overflowMode === 'Menu' && this.popupUl) {\n        this.popupUl.innerHTML = '';\n      }\n\n      const listBaseOptions = {\n        moduleName: this.getModuleName(),\n        showIcon: showIcon,\n        itemNavigable: true,\n        itemCreated: args => {\n          const isLastItem = args.curData.isLastItem;\n\n          if (isLastItem && args.item.children.length && !this.itemTemplate) {\n            delete args.curData.isLastItem;\n\n            if (!isLastItemInPopup && !this.enableActiveItemNavigation) {\n              args.item.innerHTML = this.createElement('span', {\n                className: ITEMTEXTCLASS,\n                innerHTML: args.item.children[0].innerHTML\n              }).outerHTML;\n            }\n          }\n\n          if (args.curData.iconCss && !args.curData.text && !this.itemTemplate) {\n            args.item.classList.add('e-icon-item');\n          }\n\n          if (isDefaultOverflowMode) {\n            args.item.setAttribute('item-index', j.toString());\n          }\n\n          const eventArgs = {\n            item: extend({}, args.curData.properties ? args.curData.properties : args.curData),\n            element: args.item,\n            cancel: false\n          };\n          this.trigger('beforeItemRender', eventArgs);\n          isItemCancelled = eventArgs.cancel;\n          const containsRightIcon = isIconRight || eventArgs.element.classList.contains(ICONRIGHT);\n\n          if (containsRightIcon && args.curData.iconCss && !this.itemTemplate) {\n            args.item.querySelector('.e-anchor-wrap').appendChild(args.item.querySelector(DOT + ICONCLASS));\n          }\n\n          if (eventArgs.item.disabled) {\n            args.item.setAttribute(ARIADISABLED, 'true');\n            args.item.classList.add(DISABLEDCLASS);\n          }\n\n          if ((eventArgs.item.disabled || this.disabled) && args.item.children.length && !this.itemTemplate) {\n            args.item.children[0].setAttribute(TABINDEX, '-1');\n          }\n\n          if (args.curData.isEmptyUrl) {\n            args.item.children[0].removeAttribute('href');\n\n            if ((!isLastItem || isLastItem && this.enableActiveItemNavigation) && !(eventArgs.item.disabled || this.disabled)) {\n              args.item.children[0].setAttribute(TABINDEX, '0');\n              EventHandler.add(args.item.children[0], 'keydown', this.keyDownHandler, this);\n            }\n          }\n\n          if (isLastItem) {\n            args.item.setAttribute('data-active-item', '');\n          }\n\n          if (!this.itemTemplate) {\n            this.beforeItemRenderChanges(args.curData, eventArgs.item, args.item, containsRightIcon);\n          }\n        }\n      };\n\n      for (let i = 0; i < len; i % 2 && j++, i++) {\n        isActiveItem = this.activeItem && (this.activeItem === items[j].url || this.activeItem === items[j].text);\n\n        if (isCollasped && i > 1 && i < len - 2) {\n          continue;\n        } else if (isDefaultOverflowMode && (j < this.startIndex || j > this.endIndex) && (i % 2 ? j !== this.startIndex - 1 : true) && j !== 0) {\n          continue;\n        }\n\n        if (i % 2) {\n          // separator item\n          wrapDiv = this.createElement('div', {\n            className: 'e-breadcrumb-item-wrapper'\n          });\n          listBaseOptions.template = this.separatorTemplate ? this.separatorTemplate : '/';\n          listBaseOptions.itemClass = 'e-breadcrumb-separator';\n          isSingleLevel = false;\n          item = [{\n            previousItem: items[j],\n            nextItem: items[j + 1]\n          }];\n        } else {\n          // list item\n          listBaseOptions.itemClass = '';\n\n          if (this.itemTemplate) {\n            listBaseOptions.template = this.itemTemplate;\n            isSingleLevel = false;\n          } else {\n            isSingleLevel = true;\n          }\n\n          item = [extend({}, items[j].properties ? items[j].properties : items[j])];\n\n          if (!item[0].url && !this.itemTemplate) {\n            item = [extend({}, item[0], {\n              isEmptyUrl: true,\n              url: '#'\n            })];\n          }\n\n          isLastItem = (isDefaultOverflowMode || this.overflowMode === 'Menu') && j === this.endIndex;\n\n          if ((i === len - 1 || isLastItem) && !this.itemTemplate || isActiveItem) {\n            item[0].isLastItem = true;\n          }\n        }\n\n        let parent = ol;\n        const lastPopupItemIdx = this.startIndex + this.endIndex - this._maxItems;\n\n        if (this.overflowMode === 'Menu' && (j >= this.startIndex && j <= lastPopupItemIdx && (i % 2 ? !(j === lastPopupItemIdx) : true) && this.endIndex >= this._maxItems && this._maxItems > 0 || this._maxItems === 0)) {\n          if (i % 2) {\n            continue;\n          } else {\n            parent = this.popupUl;\n\n            if (isLastItem) {\n              isLastItemInPopup = true;\n            }\n          }\n        } else if (this.overflowMode === 'Wrap') {\n          if (i === 0) {\n            parent = firstOl;\n          } else {\n            parent = wrapDiv;\n          }\n        }\n\n        const li = ListBase.createList(this.createElement, item, listBaseOptions, isSingleLevel, this).childNodes;\n\n        if (!isItemCancelled) {\n          append(li, parent);\n        } else if (isDefaultOverflowMode || isCollasped || this.overflowMode === 'Menu' || this.overflowMode === 'Wrap') {\n          items.splice(j, 1);\n          this.initPvtProps();\n          return this.reRenderItems();\n        } else if (i === len - 1 || isLastItem) {\n          remove(parent.lastElementChild);\n        }\n\n        if (this.overflowMode === 'Wrap' && i !== 0 && i % 2 === 0) {\n          ol.appendChild(wrapDiv);\n        }\n\n        if (isCollasped && i === 1) {\n          const li = this.createElement('li', {\n            className: 'e-icons e-breadcrumb-collapsed',\n            attrs: {\n              TABINDEX: '0'\n            }\n          });\n          EventHandler.add(li, 'keyup', this.expandHandler, this);\n          ol.appendChild(li);\n        }\n\n        if (this.overflowMode === 'Menu' && this.startIndex === i && this.endIndex >= this._maxItems && this._maxItems >= 0) {\n          const menu = this.getMenuElement();\n          EventHandler.add(menu, 'keyup', this.keyDownHandler, this);\n          ol.appendChild(menu);\n        }\n\n        if (isActiveItem || isLastItem) {\n          break;\n        }\n\n        if (isItemCancelled) {\n          i++;\n        }\n      }\n\n      if (this.isReact) {\n        this.renderReactTemplates();\n      }\n\n      if (this.overflowMode === 'Wrap') {\n        this.element.appendChild(firstOl);\n      }\n\n      this.element.appendChild(ol);\n      this.calculateMaxItems();\n    }\n  }\n\n  calculateMaxItems() {\n    if (this.overflowMode === 'Hidden' || this.overflowMode === 'Collapsed' || this.overflowMode === 'Menu') {\n      let maxItems;\n      const width = this.element.offsetWidth;\n      const liElems = [].slice.call(this.element.children[0].children).reverse();\n      let liWidth = this.overflowMode === 'Menu' ? 0 : liElems[liElems.length - 1].offsetWidth + (liElems[liElems.length - 2] ? liElems[liElems.length - 2].offsetWidth : 0);\n\n      if (this.overflowMode === 'Menu') {\n        const menuEle = this.getMenuElement();\n        this.element.appendChild(menuEle);\n        liWidth += menuEle.offsetWidth;\n        remove(menuEle);\n      }\n\n      for (let i = 0; i < liElems.length - 2; i++) {\n        if (liWidth > width) {\n          maxItems = Math.ceil((i - 1) / 2) + (this.overflowMode === 'Menu' && i <= 2 ? 0 : 1);\n\n          if ((this.maxItems > maxItems && !(this.maxItems > -1 && maxItems == -1) || this.maxItems == -1) && this._maxItems != maxItems) {\n            this._maxItems = maxItems;\n            this.initPvtProps();\n            return this.reRenderItems();\n          } else {\n            break;\n          }\n        } else {\n          if (this.overflowMode === 'Menu' && i === 2) {\n            liWidth += liElems[liElems.length - 1].offsetWidth + liElems[liElems.length - 2].offsetWidth;\n\n            if (liWidth > width) {\n              this._maxItems = 1;\n              this.initPvtProps();\n              return this.reRenderItems();\n            }\n          }\n\n          if (!(this.overflowMode === 'Menu' && liElems[i].classList.contains(MENUCLASS))) {\n            liWidth += liElems[i].offsetWidth;\n          }\n        }\n      }\n    } else if ((this.overflowMode === 'Wrap' || this.overflowMode === 'Scroll') && this._maxItems > 0) {\n      let width = 0;\n      const liElems = this.element.querySelectorAll(DOT + ITEMCLASS);\n\n      if (liElems.length > this._maxItems + this._maxItems - 1) {\n        for (let i = this.overflowMode === 'Wrap' ? 1 : 0; i < this._maxItems + this._maxItems - 1; i++) {\n          width += liElems[i].offsetWidth;\n        }\n\n        width = width + 5 + parseInt(getComputedStyle(this.element.children[0]).paddingLeft, 10) * 2;\n\n        if (this.overflowMode === 'Wrap') {\n          this.element.querySelector('.e-breadcrumb-wrapped-ol').style.width = width + 'px';\n        } else {\n          this.element.style.width = width + 'px';\n        }\n      }\n    }\n  }\n\n  hasField(items, field) {\n    for (let i = 0, len = items.length; i < len; i++) {\n      if (items[i][field]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getMenuElement() {\n    return this.createElement('li', {\n      className: 'e-icons e-breadcrumb-menu',\n      attrs: {\n        TABINDEX: '0'\n      }\n    });\n  }\n\n  beforeItemRenderChanges(prevItem, currItem, elem, isRightIcon) {\n    const wrapElem = elem.querySelector('.e-anchor-wrap');\n\n    if (currItem.text !== prevItem.text) {\n      wrapElem.childNodes.forEach(child => {\n        if (child.nodeType === Node.TEXT_NODE) {\n          child.textContent = currItem.text;\n        }\n      });\n    }\n\n    if (currItem.iconCss !== prevItem.iconCss && wrapElem) {\n      // wrapElem - for checking it is item not a separator\n      const iconElem = elem.querySelector(DOT + ICONCLASS);\n\n      if (iconElem) {\n        if (currItem.iconCss) {\n          removeClass([iconElem], prevItem.iconCss.split(' '));\n          addClass([iconElem], currItem.iconCss.split(' '));\n        } else {\n          remove(iconElem);\n        }\n      } else if (currItem.iconCss) {\n        const iconElem = this.createElement('span', {\n          className: ICONCLASS + ' ' + currItem.iconCss\n        });\n\n        if (isRightIcon) {\n          append([iconElem], wrapElem);\n        } else {\n          wrapElem.insertBefore(iconElem, wrapElem.childNodes[0]);\n        }\n      }\n    }\n\n    if (currItem.url !== prevItem.url && this.enableNavigation) {\n      const anchor = elem.querySelector('a.' + ITEMTEXTCLASS);\n\n      if (anchor) {\n        if (currItem.url) {\n          anchor.setAttribute('href', currItem.url);\n        } else {\n          anchor.removeAttribute('href');\n        }\n      }\n    }\n  }\n\n  reRenderItems() {\n    this.element.innerHTML = '';\n    this.renderItems(this.items);\n  }\n\n  clickHandler(e) {\n    const li = closest(e.target, DOT + ITEMCLASS + ':not(.e-breadcrumb-separator)');\n\n    if (!this.enableNavigation) {\n      e.preventDefault();\n    }\n\n    if (li && (closest(e.target, DOT + ITEMTEXTCLASS) || this.itemTemplate)) {\n      let idx;\n\n      if (this.overflowMode === 'Wrap') {\n        idx = [].slice.call(this.element.querySelectorAll(DOT + ITEMCLASS)).indexOf(li);\n      } else {\n        idx = [].slice.call(li.parentElement.children).indexOf(li);\n      }\n\n      if (this.overflowMode === 'Menu') {\n        if (closest(e.target, DOT + POPUPCLASS)) {\n          idx += this.startIndex;\n          this.endIndex = idx;\n\n          if (e.type === 'keydown') {\n            this.documentClickHandler(e);\n          }\n        } else if (this.element.querySelector(DOT + MENUCLASS)) {\n          if (idx > [].slice.call(this.element.children[0].children).indexOf(this.element.querySelector(DOT + MENUCLASS))) {\n            idx += this.popupUl.childElementCount * 2 - 2;\n            idx = Math.floor(idx / 2);\n            this.endIndex = idx;\n          } else {\n            this.startIndex = this.endIndex = idx;\n          }\n        } else {\n          idx = Math.floor(idx / 2);\n          this.startIndex = this.endIndex = idx;\n        }\n      } else {\n        idx = Math.floor(idx / 2);\n      }\n\n      if (this.overflowMode === 'Hidden' && this._maxItems > 0 && this.endIndex !== 0) {\n        idx = parseInt(li.getAttribute('item-index'), 10);\n\n        if (this.startIndex > 1) {\n          this.startIndex -= this.endIndex - idx;\n        }\n\n        this.endIndex = idx;\n      }\n\n      this.trigger('itemClick', {\n        element: li,\n        item: this.items[idx],\n        event: e\n      });\n      this.activeItem = this.items[idx].url || this.items[idx].text;\n      this.dataBind();\n    }\n\n    if (e.target.classList.contains('e-breadcrumb-collapsed')) {\n      this.isExpanded = true;\n      this.reRenderItems();\n    }\n\n    if (e.target.classList.contains(MENUCLASS)) {\n      this.renderPopup();\n    }\n  }\n\n  renderPopup() {\n    const wrapper = this.createElement('div', {\n      className: POPUPCLASS + ' ' + this.cssClass + (this.enableRtl ? ' e-rtl' : '')\n    });\n    document.body.appendChild(wrapper);\n    this.popupObj = new Popup(wrapper, {\n      content: this.popupUl,\n      relateTo: this.element.querySelector(DOT + MENUCLASS),\n      enableRtl: this.enableRtl,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      collision: {\n        X: 'fit',\n        Y: 'flip'\n      },\n      open: () => {\n        this.popupUl.focus();\n      }\n    });\n    this.popupWireEvents();\n    this.popupObj.show();\n  }\n\n  documentClickHandler(e) {\n    if (this.overflowMode === 'Menu' && this.popupObj && this.popupObj.element.classList.contains('e-popup-open') && !closest(e.target, DOT + MENUCLASS)) {\n      this.popupObj.hide();\n      this.popupObj.destroy();\n      detach(this.popupObj.element);\n    }\n  }\n\n  resize() {\n    this._maxItems = this.maxItems;\n    this.initPvtProps();\n    this.reRenderItems();\n  }\n\n  expandHandler(e) {\n    if (e.key === 'Enter') {\n      this.isExpanded = true;\n      this.reRenderItems();\n    }\n  }\n\n  keyDownHandler(e) {\n    if (e.key === 'Enter') {\n      this.clickHandler(e);\n    }\n  }\n\n  popupKeyDownHandler(e) {\n    if (e.key === 'Escape') {\n      this.documentClickHandler(e);\n    }\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @private\n   * @param {BreadcrumbModel} newProp - Specifies the new properties.\n   * @param {BreadcrumbModel} oldProp - Specifies the old properties.\n   * @returns {void}\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'items':\n        case 'enableActiveItemNavigation':\n          this.reRenderItems();\n          break;\n\n        case 'activeItem':\n          this._maxItems = this.maxItems;\n          this.initPvtProps();\n          this.reRenderItems();\n          break;\n\n        case 'overflowMode':\n        case 'maxItems':\n          this._maxItems = this.maxItems;\n          this.initPvtProps();\n          this.reRenderItems();\n\n          if (oldProp.overflowMode === 'Wrap') {\n            this.element.classList.remove(WRAPMODECLASS);\n          } else if (newProp.overflowMode === 'Wrap') {\n            this.element.classList.add(WRAPMODECLASS);\n          }\n\n          if (oldProp.overflowMode === 'Scroll') {\n            this.element.classList.remove(SCROLLMODECLASS);\n          } else if (newProp.overflowMode === 'Scroll') {\n            this.element.classList.add(SCROLLMODECLASS);\n          }\n\n          break;\n\n        case 'url':\n          this.initItems();\n          this.reRenderItems();\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.element], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([this.element], newProp.cssClass.split(' '));\n          }\n\n          if (oldProp.cssClass && oldProp.cssClass.indexOf(ICONRIGHT) > -1 && !(newProp.cssClass && newProp.cssClass.indexOf(ICONRIGHT) > -1) || !(oldProp.cssClass && oldProp.cssClass.indexOf(ICONRIGHT) > -1) && newProp.cssClass && newProp.cssClass.indexOf(ICONRIGHT) > -1) {\n            this.reRenderItems();\n          }\n\n          break;\n\n        case 'enableRtl':\n          this.element.classList.toggle('e-rtl');\n          break;\n\n        case 'disabled':\n          this.element.classList.toggle(DISABLEDCLASS);\n          this.element.setAttribute(ARIADISABLED, newProp.disabled + '');\n          break;\n      }\n    }\n  }\n\n  wireEvents() {\n    this.delegateClickHanlder = this.documentClickHandler.bind(this);\n    EventHandler.add(document, 'click', this.delegateClickHanlder, this);\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n    window.addEventListener('resize', this.resize.bind(this));\n  }\n\n  popupWireEvents() {\n    EventHandler.add(this.popupObj.element, 'click', this.clickHandler, this);\n    EventHandler.add(this.popupObj.element, 'keydown', this.popupKeyDownHandler, this);\n  }\n\n  unWireEvents() {\n    EventHandler.remove(document, 'click', this.delegateClickHanlder);\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n    window.removeEventListener('resize', this.resize.bind(this));\n\n    if (this.popupObj) {\n      EventHandler.remove(this.popupObj.element, 'click', this.clickHandler);\n      EventHandler.remove(this.popupObj.element, 'keydown', this.popupKeyDownHandler);\n    }\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n\n\n  getPersistData() {\n    return this.addOnPersist(['activeItem']);\n  }\n  /**\n   * Get module name.\n   *\n   * @private\n   * @returns {string} - Module Name\n   */\n\n\n  getModuleName() {\n    return 'breadcrumb';\n  }\n  /**\n   * Destroys the widget.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    let classes = [];\n    let attributes$$1 = ['aria-label'];\n\n    if (this.cssClass) {\n      classes.concat(this.cssClass.split(' '));\n    }\n\n    if (this.enableRtl) {\n      classes.push('e-rtl');\n    }\n\n    if (this.disabled) {\n      classes.push(DISABLEDCLASS);\n      attributes$$1.push(ARIADISABLED);\n    }\n\n    if (this.overflowMode === 'Wrap') {\n      classes.push(WRAPMODECLASS);\n    } else if (this.overflowMode === 'Scroll') {\n      classes.push(SCROLLMODECLASS);\n    }\n\n    this.unWireEvents();\n    this.element.innerHTML = '';\n    removeClass([this.element], classes);\n    attributes$$1.forEach(attribute => {\n      this.element.removeAttribute(attribute);\n    });\n    super.destroy();\n  }\n\n};\n\n__decorate$10([Property('')], Breadcrumb.prototype, \"url\", void 0);\n\n__decorate$10([Collection([], BreadcrumbItem)], Breadcrumb.prototype, \"items\", void 0);\n\n__decorate$10([Property('')], Breadcrumb.prototype, \"activeItem\", void 0);\n\n__decorate$10([Property(-1)], Breadcrumb.prototype, \"maxItems\", void 0);\n\n__decorate$10([Property('Menu')], Breadcrumb.prototype, \"overflowMode\", void 0);\n\n__decorate$10([Property('')], Breadcrumb.prototype, \"cssClass\", void 0);\n\n__decorate$10([Property(null)], Breadcrumb.prototype, \"itemTemplate\", void 0);\n\n__decorate$10([Property('/')], Breadcrumb.prototype, \"separatorTemplate\", void 0);\n\n__decorate$10([Property(true)], Breadcrumb.prototype, \"enableNavigation\", void 0);\n\n__decorate$10([Property(false)], Breadcrumb.prototype, \"enableActiveItemNavigation\", void 0);\n\n__decorate$10([Property(false)], Breadcrumb.prototype, \"disabled\", void 0);\n\n__decorate$10([Property('')], Breadcrumb.prototype, \"locale\", void 0);\n\n__decorate$10([Event()], Breadcrumb.prototype, \"beforeItemRender\", void 0);\n\n__decorate$10([Event()], Breadcrumb.prototype, \"itemClick\", void 0);\n\n__decorate$10([Event()], Breadcrumb.prototype, \"created\", void 0);\n\nBreadcrumb = __decorate$10([NotifyPropertyChanges], Breadcrumb);\n/**\n * Breadcrumb modules\n */\n\nvar __decorate$11 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n// Constant variables\n\n\nconst CLS_CAROUSEL = 'e-carousel';\nconst CLS_ACTIVE$2 = 'e-active';\nconst CLS_RTL$5 = 'e-rtl';\nconst CLS_ITEMS$2 = 'e-carousel-items';\nconst CLS_ITEM$3 = 'e-carousel-item';\nconst CLS_PREVIOUS = 'e-previous';\nconst CLS_NEXT = 'e-next';\nconst CLS_PREV_ICON = 'e-previous-icon';\nconst CLS_NEXT_ICON = 'e-next-icon';\nconst CLS_NAVIGATORS = 'e-carousel-navigators';\nconst CLS_INDICATORS = 'e-carousel-indicators';\nconst CLS_INDICATOR_BARS = 'e-indicator-bars';\nconst CLS_INDICATOR_BAR = 'e-indicator-bar';\nconst CLS_INDICATOR$1 = 'e-indicator';\nconst CLS_ICON$1 = 'e-icons';\nconst CLS_PLAY_PAUSE = 'e-play-pause';\nconst CLS_PLAY_ICON = 'e-play-icon';\nconst CLS_PAUSE_ICON = 'e-pause-icon';\nconst CLS_PREV_BUTTON = 'e-previous-button';\nconst CLS_NEXT_BUTTON = 'e-next-button';\nconst CLS_PLAY_BUTTON = 'e-play-button';\nconst CLS_FLAT = 'e-flat';\nconst CLS_ROUND = 'e-round';\nconst CLS_HOVER_ARROWS = 'e-hover-arrows';\nconst CLS_HOVER = 'e-carousel-hover';\nconst CLS_TEMPLATE$2 = 'e-template';\nconst CLS_SLIDE_ANIMATION = 'e-carousel-slide-animation';\nconst CLS_FADE_ANIMATION = 'e-carousel-fade-animation';\nconst CLS_CUSTOM_ANIMATION = 'e-carousel-custom-animation';\nconst CLS_ANIMATION_NONE = 'e-carousel-animation-none';\nconst CLS_PREV_SLIDE = 'e-prev';\nconst CLS_NEXT_SLIDE = 'e-next';\nconst CLS_TRANSITION_START = 'e-transition-start';\nconst CLS_TRANSITION_END = 'e-transition-end';\n/** Specifies the carousel individual item. */\n\nclass CarouselItem extends ChildProperty {}\n\n__decorate$11([Property()], CarouselItem.prototype, \"cssClass\", void 0);\n\n__decorate$11([Property()], CarouselItem.prototype, \"interval\", void 0);\n\n__decorate$11([Property()], CarouselItem.prototype, \"template\", void 0);\n\n__decorate$11([Property()], CarouselItem.prototype, \"htmlAttributes\", void 0);\n\nlet Carousel = class Carousel extends Component {\n  /**\n   * Constructor for creating the Carousel widget\n   *\n   * @param {CarouselModel} options Accepts the carousel model properties to initiate the rendering\n   * @param {string | HTMLElement} element Accepts the DOM element reference\n   */\n  constructor(options, element) {\n    super(options, element);\n  }\n\n  getModuleName() {\n    return CLS_CAROUSEL.replace('e-', '');\n  }\n\n  getPersistData() {\n    return this.addOnPersist(['selectedIndex']);\n  }\n\n  preRender() {\n    this.keyConfigs = {\n      home: 'home',\n      end: 'end',\n      space: 'space',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      moveDown: 'downarrow'\n    };\n    const defaultLocale = {\n      nextSlide: 'Next slide',\n      of: 'of',\n      pauseSlideTransition: 'Pause slide transition',\n      playSlideTransition: 'Play slide transition',\n      previousSlide: 'Previous slide',\n      slide: 'Slide',\n      slideShow: 'Slide show'\n    };\n    this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale);\n  }\n\n  render() {\n    this.initialize();\n    this.renderSlides();\n    this.renderNavigators();\n    this.renderPlayButton();\n    this.renderIndicators();\n    this.applyAnimation();\n    this.wireEvents();\n  }\n\n  onPropertyChanged(newProp, oldProp) {\n    let target;\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'animationEffect':\n          this.applyAnimation();\n          break;\n\n        case 'cssClass':\n          classList(this.element, [newProp.cssClass], [oldProp.cssClass]);\n          break;\n\n        case 'selectedIndex':\n          this.setActiveSlide(this.selectedIndex, oldProp.selectedIndex > this.selectedIndex ? 'Previous' : 'Next');\n          this.autoSlide();\n          break;\n\n        case 'htmlAttributes':\n          if (!isNullOrUndefined(this.htmlAttributes)) {\n            this.setHtmlAttributes(this.htmlAttributes, this.element);\n          }\n\n          break;\n\n        case 'enableTouchSwipe':\n          if (!this.enableTouchSwipe && this.touchModule) {\n            this.touchModule.destroy();\n          }\n\n          if (this.element.querySelector(`.${CLS_ITEMS$2}`)) {\n            this.renderTouchActions();\n          }\n\n          break;\n\n        case 'loop':\n          if (this.loop && isNullOrUndefined(this.autoSlideInterval)) {\n            this.applySlideInterval();\n          }\n\n          this.handleNavigatorsActions(this.selectedIndex);\n          break;\n\n        case 'enableRtl':\n          if (this.enableRtl) {\n            addClass([this.element], CLS_RTL$5);\n          } else {\n            removeClass([this.element], CLS_RTL$5);\n          }\n\n          break;\n\n        case 'buttonsVisibility':\n          target = this.element.querySelector(`.${CLS_NAVIGATORS}`);\n\n          if (target) {\n            switch (this.buttonsVisibility) {\n              case 'Hidden':\n                this.resetTemplates(['previousButtonTemplate', 'nextButtonTemplate']);\n                remove(target);\n                break;\n\n              case 'VisibleOnHover':\n                addClass([].slice.call(target.childNodes), CLS_HOVER_ARROWS);\n                break;\n\n              case 'Visible':\n                removeClass([].slice.call(target.childNodes), CLS_HOVER_ARROWS);\n                break;\n            }\n          } else {\n            this.renderNavigators();\n            this.renderPlayButton();\n          }\n\n          break;\n\n        case 'width':\n          setStyleAttribute(this.element, {\n            'width': formatUnit(this.width)\n          });\n          break;\n\n        case 'height':\n          setStyleAttribute(this.element, {\n            'height': formatUnit(this.height)\n          });\n          break;\n\n        case 'autoPlay':\n          if (this.showPlayButton && isNullOrUndefined(this.playButtonTemplate)) {\n            this.playButtonClickHandler(null, true);\n          }\n\n          this.autoSlide();\n          break;\n\n        case 'interval':\n          this.autoSlide();\n          break;\n\n        case 'showIndicators':\n          target = this.element.querySelector(`.${CLS_INDICATORS}`);\n\n          if (!this.showIndicators && target) {\n            this.resetTemplates(['indicatorsTemplate']);\n            remove(target);\n          }\n\n          this.renderIndicators();\n          break;\n\n        case 'showPlayButton':\n          target = this.element.querySelector(`.${CLS_PLAY_PAUSE}`);\n\n          if (!this.showPlayButton && target) {\n            remove(target);\n            this.resetTemplates(['playButtonTemplate']);\n          }\n\n          this.renderPlayButton();\n          break;\n\n        case 'items':\n        case 'dataSource':\n          target = this.element.querySelector(`.${CLS_ITEMS$2}`);\n\n          if (target) {\n            this.resetTemplates(['itemTemplate']);\n            remove(target);\n          }\n\n          this.renderSlides();\n          break;\n      }\n    }\n  }\n\n  initialize() {\n    const carouselClasses = [];\n\n    if (this.cssClass) {\n      carouselClasses.push(this.cssClass);\n    }\n\n    if (this.enableRtl) {\n      carouselClasses.push(CLS_RTL$5);\n    }\n\n    addClass([this.element], carouselClasses);\n    setStyleAttribute(this.element, {\n      'width': formatUnit(this.width),\n      'height': formatUnit(this.height)\n    });\n    attributes(this.element, {\n      'tabindex': '0',\n      'aria-roledescription': 'carousel',\n      'aria-label': this.localeObj.getConstant('slideShow')\n    });\n\n    if (!isNullOrUndefined(this.htmlAttributes)) {\n      this.setHtmlAttributes(this.htmlAttributes, this.element);\n    }\n  }\n\n  renderSlides() {\n    const itemsContainer = this.createElement('div', {\n      className: CLS_ITEMS$2,\n      attrs: {\n        'aria-live': this.autoPlay ? 'off' : 'polite'\n      }\n    });\n    this.element.appendChild(itemsContainer);\n\n    if (this.items.length > 0) {\n      this.slideItems = this.items;\n      this.items.forEach((item, index) => {\n        this.renderSlide(item, item.template, index, itemsContainer);\n      });\n    } else if (this.dataSource.length > 0) {\n      this.slideItems = this.dataSource;\n      this.dataSource.forEach((item, index) => {\n        this.renderSlide(item, this.itemTemplate, index, itemsContainer);\n      });\n    }\n\n    this.renderTemplates();\n    this.autoSlide();\n    this.renderTouchActions();\n    this.renderKeyboardActions();\n  }\n\n  renderSlide(item, itemTemplate, index, container) {\n    const itemEle = this.createElement('div', {\n      id: getUniqueID('carousel_item'),\n      className: `${CLS_ITEM$3} ${item.cssClass ? item.cssClass : ''} ${this.selectedIndex === index ? CLS_ACTIVE$2 : ''}`,\n      attrs: {\n        'aria-hidden': this.selectedIndex === index ? 'false' : 'true',\n        'data-index': index.toString(),\n        'aria-role': 'group',\n        'aria-roledescription': 'slide'\n      }\n    });\n\n    if (!isNullOrUndefined(item.htmlAttributes)) {\n      this.setHtmlAttributes(item.htmlAttributes, itemEle);\n    }\n\n    const templateId = this.element.id + '_template';\n    const template = this.templateParser(itemTemplate)(item, this, 'itemTemplate', templateId, false);\n    append(template, itemEle);\n    container.appendChild(itemEle);\n  }\n\n  renderNavigators() {\n    if (this.buttonsVisibility === 'Hidden') {\n      return;\n    }\n\n    const navigators = this.createElement('div', {\n      className: CLS_NAVIGATORS\n    });\n    const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n    itemsContainer.insertAdjacentElement('afterend', navigators);\n    this.renderNavigatorButton('Previous');\n    this.renderNavigatorButton('Next');\n    this.renderTemplates();\n  }\n\n  renderNavigatorButton(direction) {\n    const buttonContainer = this.createElement('div', {\n      className: (direction === 'Previous' ? CLS_PREVIOUS : CLS_NEXT) + ' ' + (this.buttonsVisibility === 'VisibleOnHover' ? CLS_HOVER_ARROWS : ''),\n      attrs: {\n        'aria-label': this.localeObj.getConstant(direction === 'Previous' ? 'previousSlide' : 'nextSlide')\n      }\n    });\n\n    if (direction === 'Previous' && this.previousButtonTemplate) {\n      addClass([buttonContainer], CLS_TEMPLATE$2);\n      const templateId = this.element.id + '_previousButtonTemplate';\n      const template = this.templateParser(this.previousButtonTemplate)({\n        type: 'Previous'\n      }, this, 'previousButtonTemplate', templateId, false);\n      append(template, buttonContainer);\n    } else if (direction === 'Next' && this.nextButtonTemplate) {\n      addClass([buttonContainer], CLS_TEMPLATE$2);\n      const templateId = this.element.id + '_nextButtonTemplate';\n      const template = this.templateParser(this.nextButtonTemplate)({\n        type: 'Next'\n      }, this, 'nextButtonTemplate', templateId, false);\n      append(template, buttonContainer);\n    } else {\n      const button = this.createElement('button');\n      const buttonObj = new Button({\n        cssClass: CLS_FLAT + ' ' + CLS_ROUND + ' ' + (direction === 'Previous' ? CLS_PREV_BUTTON : CLS_NEXT_BUTTON),\n        iconCss: CLS_ICON$1 + ' ' + (direction === 'Previous' ? CLS_PREV_ICON : CLS_NEXT_ICON),\n        enableRtl: this.enableRtl,\n        disabled: !this.loop && this.selectedIndex === (direction === 'Previous' ? 0 : this.slideItems.length - 1)\n      });\n      buttonObj.appendTo(button);\n      buttonContainer.appendChild(button);\n    }\n\n    this.element.querySelector('.' + CLS_NAVIGATORS).appendChild(buttonContainer);\n    EventHandler.add(buttonContainer, 'click', this.navigatorClickHandler, this);\n  }\n\n  renderPlayButton() {\n    if (this.buttonsVisibility === 'Hidden' || !this.showPlayButton) {\n      return;\n    }\n\n    const playPauseWrap = this.createElement('div', {\n      className: CLS_PLAY_PAUSE + ' ' + (this.buttonsVisibility === 'VisibleOnHover' ? CLS_HOVER_ARROWS : '')\n    });\n\n    if (this.playButtonTemplate) {\n      addClass([playPauseWrap], CLS_TEMPLATE$2);\n      const templateId = this.element.id + '_playButtonTemplate';\n      const template = this.templateParser(this.playButtonTemplate)({}, this, 'playButtonTemplate', templateId, false);\n      append(template, playPauseWrap);\n    } else {\n      const playButton = this.createElement('button', {\n        attrs: {\n          'aria-label': this.localeObj.getConstant(this.autoPlay ? 'pauseSlideTransition' : 'playSlideTransition')\n        }\n      });\n      const isLastSlide = this.selectedIndex === this.slideItems.length - 1 && !this.loop;\n      const buttonObj = new Button({\n        cssClass: CLS_FLAT + ' ' + CLS_ROUND + ' ' + CLS_PLAY_BUTTON,\n        iconCss: CLS_ICON$1 + ' ' + (this.autoPlay && !isLastSlide ? CLS_PAUSE_ICON : CLS_PLAY_ICON),\n        isToggle: true,\n        enableRtl: this.enableRtl\n      });\n\n      if (isLastSlide) {\n        this.setProperties({\n          autoPlay: false\n        }, true);\n        playButton.setAttribute('aria-label', this.localeObj.getConstant('playSlideTransition'));\n        const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n        itemsContainer.setAttribute('aria-live', 'polite');\n      }\n\n      buttonObj.appendTo(playButton);\n      playPauseWrap.appendChild(playButton);\n    }\n\n    const navigators = this.element.querySelector(`.${CLS_NAVIGATORS}`);\n    navigators.insertBefore(playPauseWrap, navigators.lastElementChild);\n    this.renderTemplates();\n    EventHandler.add(playPauseWrap, 'click', this.playButtonClickHandler, this);\n  }\n\n  renderIndicators() {\n    if (!this.showIndicators) {\n      return;\n    }\n\n    const indicatorWrap = this.createElement('div', {\n      className: CLS_INDICATORS\n    });\n    const indicatorBars = this.createElement('div', {\n      className: CLS_INDICATOR_BARS\n    });\n    indicatorWrap.appendChild(indicatorBars);\n\n    if (this.slideItems) {\n      this.slideItems.forEach((item, index) => {\n        const indicatorBar = this.createElement('div', {\n          className: CLS_INDICATOR_BAR + ' ' + (this.selectedIndex === index ? CLS_ACTIVE$2 : ''),\n          attrs: {\n            'data-index': index.toString(),\n            'aria-current': this.selectedIndex === index ? 'true' : 'false'\n          }\n        });\n\n        if (this.indicatorsTemplate) {\n          addClass([indicatorBar], CLS_TEMPLATE$2);\n          const templateId = this.element.id + '_indicatorsTemplate';\n          const template = this.templateParser(this.indicatorsTemplate)({\n            index: index,\n            selectedIndex: this.selectedIndex\n          }, this, 'indicatorsTemplate', templateId, false);\n          append(template, indicatorBar);\n        } else {\n          const indicator = this.createElement('button', {\n            className: CLS_INDICATOR$1\n          });\n          indicatorBar.appendChild(indicator);\n          indicator.appendChild(this.createElement('div', {\n            attrs: {\n              'aria-label': this.localeObj.getConstant('slide') + ' ' + (index + 1) + ' ' + this.localeObj.getConstant('of') + ' ' + this.slideItems.length\n            }\n          }));\n          const buttonObj = new Button({\n            cssClass: 'e-flat e-small'\n          });\n          buttonObj.appendTo(indicator);\n        }\n\n        indicatorBars.appendChild(indicatorBar);\n        EventHandler.add(indicatorBar, 'click', this.indicatorClickHandler, this);\n      });\n    }\n\n    this.element.appendChild(indicatorWrap);\n  }\n\n  renderKeyboardActions() {\n    this.keyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyHandler.bind(this),\n      keyConfigs: this.keyConfigs\n    });\n  }\n\n  renderTouchActions() {\n    if (!this.enableTouchSwipe) {\n      return;\n    }\n\n    this.touchModule = new Touch(this.element, {\n      swipe: this.swipeHandler.bind(this)\n    });\n  }\n\n  applyAnimation() {\n    removeClass([this.element], [CLS_CUSTOM_ANIMATION, CLS_FADE_ANIMATION, CLS_SLIDE_ANIMATION, CLS_ANIMATION_NONE]);\n\n    switch (this.animationEffect) {\n      case 'Slide':\n        addClass([this.element], CLS_SLIDE_ANIMATION);\n        break;\n\n      case 'Fade':\n        addClass([this.element], CLS_FADE_ANIMATION);\n        break;\n\n      case 'None':\n        addClass([this.element], CLS_ANIMATION_NONE);\n        break;\n\n      case 'Custom':\n        addClass([this.element], CLS_CUSTOM_ANIMATION);\n        break;\n    }\n  }\n\n  autoSlide() {\n    this.resetSlideInterval();\n    this.applySlideInterval();\n  }\n\n  autoSlideChange() {\n    const activeSlide = this.element.querySelector(`.${CLS_ACTIVE$2}`);\n\n    if (isNullOrUndefined(activeSlide)) {\n      return;\n    }\n\n    const activeIndex = parseInt(activeSlide.dataset.index, 10);\n\n    if (!this.loop && activeIndex === this.slideItems.length - 1) {\n      this.resetSlideInterval();\n    } else {\n      const index = (activeIndex + 1) % this.slideItems.length;\n\n      if (!this.element.classList.contains(CLS_HOVER)) {\n        this.setActiveSlide(index, 'Next');\n      }\n\n      this.autoSlide();\n    }\n  }\n\n  applySlideInterval() {\n    if (!this.autoPlay || this.element.classList.contains(CLS_HOVER)) {\n      return;\n    }\n\n    let itemInterval = this.interval;\n\n    if (this.items.length > 0 && !isNullOrUndefined(this.items[this.selectedIndex].interval)) {\n      itemInterval = this.items[this.selectedIndex].interval;\n    }\n\n    this.autoSlideInterval = setInterval(() => this.autoSlideChange(), itemInterval);\n  }\n\n  resetSlideInterval() {\n    clearInterval(this.autoSlideInterval);\n    this.autoSlideInterval = null;\n  }\n\n  getSlideIndex(direction) {\n    let currentIndex = this.selectedIndex;\n\n    if (direction === 'Previous') {\n      currentIndex--;\n\n      if (currentIndex < 0) {\n        currentIndex = this.slideItems.length - 1;\n      }\n    } else {\n      currentIndex++;\n\n      if (currentIndex === this.slideItems.length) {\n        currentIndex = 0;\n      }\n    }\n\n    return currentIndex;\n  }\n\n  setActiveSlide(currentIndex, direction, isSwiped = false) {\n    if (this.element.querySelectorAll(`.${CLS_ITEM$3}.${CLS_PREV_SLIDE},.${CLS_ITEM$3}.${CLS_NEXT_SLIDE}`).length > 0) {\n      return;\n    }\n\n    const allSlides = [].slice.call(this.element.querySelectorAll(`.${CLS_ITEM$3}`));\n    const activeSlide = this.element.querySelector(`.${CLS_ITEM$3}.${CLS_ACTIVE$2}`);\n\n    if (isNullOrUndefined(activeSlide) && this.showIndicators) {\n      const activeIndicator = this.element.querySelector(`.${CLS_INDICATOR_BAR}.${CLS_ACTIVE$2}`);\n      const activeIndex = parseInt(activeIndicator.dataset.index, 10);\n      addClass([allSlides[activeIndex]], CLS_ACTIVE$2);\n      return;\n    } else if (isNullOrUndefined(activeSlide)) {\n      addClass([allSlides[currentIndex]], CLS_ACTIVE$2);\n      return;\n    }\n\n    const activeIndex = parseInt(activeSlide.dataset.index, 10);\n    const currentSlide = allSlides[currentIndex];\n    const eventArgs = {\n      currentIndex: activeIndex,\n      nextIndex: currentIndex,\n      currentSlide: activeSlide,\n      nextSlide: currentSlide,\n      slideDirection: direction,\n      isSwiped: isSwiped,\n      cancel: false\n    };\n    this.trigger('slideChanging', eventArgs, args => {\n      if (args.cancel) {\n        return;\n      }\n\n      this.setProperties({\n        selectedIndex: currentIndex\n      }, true);\n      attributes(args.currentSlide, {\n        'aria-hidden': 'true'\n      });\n      attributes(args.nextSlide, {\n        'aria-hidden': 'false'\n      });\n      const slideIndicators = [].slice.call(this.element.querySelectorAll(`.${CLS_INDICATOR_BAR}`));\n\n      if (slideIndicators.length > 0) {\n        attributes(slideIndicators[activeIndex], {\n          'aria-current': 'false'\n        });\n        attributes(slideIndicators[currentIndex], {\n          'aria-current': 'true'\n        });\n        removeClass(slideIndicators, CLS_ACTIVE$2);\n        addClass([slideIndicators[currentIndex]], CLS_ACTIVE$2);\n      }\n\n      this.slideChangedEventArgs = {\n        currentIndex: args.nextIndex,\n        previousIndex: args.currentIndex,\n        currentSlide: args.nextSlide,\n        previousSlide: args.currentSlide,\n        slideDirection: direction,\n        isSwiped: isSwiped\n      };\n      let slideHeight;\n\n      if (this.animationEffect === 'Slide') {\n        if (direction === 'Previous') {\n          addClass([args.nextSlide], CLS_PREV_SLIDE);\n          slideHeight = args.nextSlide.offsetHeight;\n          addClass([args.currentSlide, args.nextSlide], CLS_TRANSITION_END);\n        } else {\n          addClass([args.nextSlide], CLS_NEXT_SLIDE); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n          slideHeight = args.nextSlide.offsetHeight;\n          addClass([args.currentSlide, args.nextSlide], CLS_TRANSITION_START);\n        }\n      } else if (this.animationEffect === 'Fade') {\n        removeClass([args.currentSlide], CLS_ACTIVE$2);\n        addClass([args.nextSlide], CLS_ACTIVE$2);\n      } else if (this.animationEffect === 'Custom') {\n        if (direction === 'Previous') {\n          addClass([args.nextSlide], CLS_NEXT_SLIDE);\n          addClass([args.currentSlide], CLS_PREV_SLIDE);\n        } else {\n          addClass([args.currentSlide], CLS_PREV_SLIDE);\n          addClass([args.nextSlide], CLS_NEXT_SLIDE);\n        }\n      } else {\n        this.onTransitionEnd();\n      }\n\n      this.handleNavigatorsActions(currentIndex);\n    });\n  }\n\n  onTransitionEnd() {\n    if (this.slideChangedEventArgs) {\n      addClass([this.slideChangedEventArgs.currentSlide], CLS_ACTIVE$2);\n      removeClass([this.slideChangedEventArgs.previousSlide], CLS_ACTIVE$2);\n      this.trigger('slideChanged', this.slideChangedEventArgs, () => {\n        removeClass(this.element.querySelectorAll(`.${CLS_ITEM$3}`), [CLS_PREV_SLIDE, CLS_NEXT_SLIDE, CLS_TRANSITION_START, CLS_TRANSITION_END]);\n        this.slideChangedEventArgs = null;\n      });\n    }\n  }\n\n  setHtmlAttributes(attribute, element) {\n    const keys = Object.keys(attribute);\n\n    for (const key of keys) {\n      if (key === 'class') {\n        addClass([element], attribute[key]);\n      } else {\n        element.setAttribute(key, attribute[key]);\n      }\n    }\n  }\n\n  templateParser(template) {\n    if (template) {\n      try {\n        if (document.querySelectorAll(template).length) {\n          return compile(document.querySelector(template).innerHTML.trim());\n        } else {\n          return compile(template);\n        }\n      } catch (error) {\n        return compile(template);\n      }\n    }\n\n    return undefined;\n  }\n\n  getNavigatorState(target, isPrevious) {\n    const button = target.querySelector(`.${isPrevious ? CLS_PREV_BUTTON : CLS_NEXT_BUTTON}`);\n\n    if (button) {\n      const buttonObj = getInstance(button, Button);\n      return buttonObj.disabled;\n    }\n\n    return false;\n  }\n\n  navigatorClickHandler(e) {\n    const target = e.currentTarget;\n    const isDisabled = this.getNavigatorState(target, target.classList.contains(CLS_PREVIOUS));\n\n    if (isDisabled) {\n      return;\n    }\n\n    const direction = target.classList.contains(CLS_PREVIOUS) ? 'Previous' : 'Next';\n    this.setActiveSlide(this.getSlideIndex(direction), direction);\n    this.autoSlide();\n  }\n\n  indicatorClickHandler(e) {\n    const target = closest(e.target, `.${CLS_INDICATOR_BAR}`);\n    const index = parseInt(target.dataset.index, 10);\n\n    if (this.selectedIndex !== index) {\n      this.setActiveSlide(index, this.selectedIndex > index ? 'Previous' : 'Next');\n      this.autoSlide();\n    }\n  }\n\n  playButtonClickHandler(e, isPropertyChange = false) {\n    const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n\n    if (playButton) {\n      const buttonObj = getInstance(playButton, Button);\n\n      if (!isPropertyChange) {\n        this.setProperties({\n          autoPlay: !this.autoPlay\n        }, true);\n      }\n\n      playButton.setAttribute('aria-label', this.localeObj.getConstant(this.autoPlay ? 'pauseSlideTransition' : 'playSlideTransition'));\n      buttonObj.iconCss = CLS_ICON$1 + ' ' + (this.autoPlay ? CLS_PAUSE_ICON : CLS_PLAY_ICON);\n      buttonObj.dataBind();\n      const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n      itemsContainer.setAttribute('aria-live', this.autoPlay ? 'off' : 'polite');\n\n      if (this.autoPlay && !this.loop && this.selectedIndex === this.slideItems.length - 1) {\n        this.setActiveSlide(0, 'Next');\n      }\n\n      this.autoSlide();\n    }\n  }\n\n  keyHandler(e) {\n    let direction;\n    let slideIndex;\n    let isSlideTransition = false;\n    const target = e.target;\n    e.preventDefault();\n\n    switch (e.action) {\n      case 'space':\n        if (this.showIndicators && target.classList.contains(CLS_INDICATOR$1)) {\n          target.click();\n        } else if (target.classList.contains(CLS_CAROUSEL) || target.classList.contains(CLS_PLAY_BUTTON)) {\n          this.playButtonClickHandler(e);\n        } else if (target.classList.contains(CLS_NEXT_BUTTON)) {\n          this.next();\n        } else if (target.classList.contains(CLS_PREV_BUTTON)) {\n          this.prev();\n        }\n\n        break;\n\n      case 'end':\n        slideIndex = this.slideItems.length - 1;\n        direction = 'Next';\n        isSlideTransition = true;\n        break;\n\n      case 'home':\n        slideIndex = 0;\n        direction = 'Previous';\n        isSlideTransition = true;\n        break;\n\n      case 'moveUp':\n      case 'moveLeft':\n      case 'moveDown':\n      case 'moveRight':\n        if (this.showIndicators && isNullOrUndefined(this.indicatorsTemplate)) {\n          this.element.focus();\n        }\n\n        direction = e.action === 'moveUp' || e.action === 'moveLeft' ? 'Previous' : 'Next';\n        slideIndex = this.getSlideIndex(direction);\n        isSlideTransition = !this.isSuspendSlideTransition(slideIndex, direction);\n        break;\n    }\n\n    if (isSlideTransition) {\n      this.setActiveSlide(slideIndex, direction);\n      this.autoSlide();\n      isSlideTransition = false;\n    }\n  }\n\n  swipeHandler(e) {\n    if (this.element.classList.contains(CLS_HOVER)) {\n      return;\n    }\n\n    const direction = e.swipeDirection === 'Right' ? 'Previous' : 'Next';\n    const slideIndex = this.getSlideIndex(direction);\n\n    if (!this.isSuspendSlideTransition(slideIndex, direction)) {\n      this.setActiveSlide(slideIndex, direction, true);\n      this.autoSlide();\n    }\n  }\n\n  isSuspendSlideTransition(index, direction) {\n    return !this.loop && (direction === 'Next' && index === 0 || direction === 'Previous' && index === this.slideItems.length - 1);\n  }\n\n  handleNavigatorsActions(index) {\n    if (this.buttonsVisibility === 'Hidden') {\n      return;\n    }\n\n    if (this.showPlayButton) {\n      const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n      const isLastSlide = this.selectedIndex === this.slideItems.length - 1 && !this.loop;\n      let isButtonUpdate = isNullOrUndefined(this.playButtonTemplate) && playButton && isLastSlide;\n\n      if (isNullOrUndefined(this.playButtonTemplate) && playButton && !isLastSlide) {\n        isButtonUpdate = !playButton.classList.contains(CLS_ACTIVE$2);\n      }\n\n      if (isButtonUpdate) {\n        this.setProperties({\n          autoPlay: !isLastSlide\n        }, true);\n        playButton.setAttribute('aria-label', this.localeObj.getConstant(this.autoPlay ? 'pauseSlideTransition' : 'playSlideTransition'));\n        const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n        itemsContainer.setAttribute('aria-live', this.autoPlay ? 'off' : 'polite');\n        const buttonObj = getInstance(playButton, Button);\n        buttonObj.iconCss = CLS_ICON$1 + ' ' + (this.autoPlay ? CLS_PAUSE_ICON : CLS_PLAY_ICON);\n        buttonObj.dataBind();\n      }\n    }\n\n    const prevButton = this.element.querySelector(`.${CLS_PREV_BUTTON}`);\n\n    if (prevButton && isNullOrUndefined(this.previousButtonTemplate)) {\n      const buttonObj = getInstance(prevButton, Button);\n      buttonObj.disabled = !this.loop && index === 0;\n      buttonObj.dataBind();\n    }\n\n    const nextButton = this.element.querySelector(`.${CLS_NEXT_BUTTON}`);\n\n    if (nextButton && isNullOrUndefined(this.nextButtonTemplate)) {\n      const buttonObj = getInstance(nextButton, Button);\n      buttonObj.disabled = !this.loop && index === this.slideItems.length - 1;\n      buttonObj.dataBind();\n    }\n  }\n\n  onHoverActions(e) {\n    const navigator = this.element.querySelector(`.${CLS_NAVIGATORS}`);\n\n    switch (e.type) {\n      case 'mouseenter':\n        if (this.buttonsVisibility === 'VisibleOnHover' && navigator) {\n          removeClass([].slice.call(navigator.childNodes), CLS_HOVER_ARROWS);\n        }\n\n        if (this.pauseOnHover) {\n          addClass([this.element], CLS_HOVER);\n        }\n\n        break;\n\n      case 'mouseleave':\n        if (this.buttonsVisibility === 'VisibleOnHover' && navigator) {\n          addClass([].slice.call(navigator.childNodes), CLS_HOVER_ARROWS);\n        }\n\n        removeClass([this.element], CLS_HOVER);\n        break;\n    }\n\n    this.autoSlide();\n  }\n\n  onFocusActions(e) {\n    switch (e.type) {\n      case 'focusin':\n        addClass([this.element], CLS_HOVER);\n        break;\n\n      case 'focusout':\n        removeClass([this.element], CLS_HOVER);\n        break;\n    }\n\n    this.autoSlide();\n  }\n\n  destroyButtons() {\n    const buttonCollections = [].slice.call(this.element.querySelectorAll('.e-control.e-btn'));\n\n    for (const button of buttonCollections) {\n      const instance = getInstance(button, Button);\n\n      if (instance) {\n        instance.destroy();\n      }\n    }\n  }\n\n  wireEvents() {\n    EventHandler.add(this.element, 'focusin focusout', this.onFocusActions, this);\n    EventHandler.add(this.element, 'mouseenter mouseleave', this.onHoverActions, this);\n    EventHandler.add(this.element.firstElementChild, 'animationend', this.onTransitionEnd, this);\n    EventHandler.add(this.element.firstElementChild, 'transitionend', this.onTransitionEnd, this);\n  }\n\n  unWireEvents() {\n    const indicators = [].slice.call(this.element.querySelectorAll(`.${CLS_INDICATOR_BAR}`));\n    indicators.forEach(indicator => {\n      EventHandler.remove(indicator, 'click', this.indicatorClickHandler);\n    });\n    const navigators = [].slice.call(this.element.querySelectorAll(`.${CLS_PREVIOUS},.${CLS_NEXT}`));\n    navigators.forEach(navigator => {\n      EventHandler.remove(navigator, 'click', this.navigatorClickHandler);\n    });\n    const playIcon = this.element.querySelector(`.${CLS_PLAY_PAUSE}`);\n\n    if (playIcon) {\n      EventHandler.remove(playIcon, 'click', this.playButtonClickHandler);\n    }\n\n    EventHandler.remove(this.element.firstElementChild, 'animationend', this.onTransitionEnd);\n    EventHandler.remove(this.element.firstElementChild, 'transitionend', this.onTransitionEnd);\n    EventHandler.clearEvents(this.element);\n  }\n  /**\n   * Method to transit from the current slide to the previous slide.\n   *\n   * @returns {void}\n   */\n\n\n  prev() {\n    if (!this.loop && this.selectedIndex === 0) {\n      return;\n    }\n\n    const index = this.selectedIndex === 0 ? this.slideItems.length - 1 : this.selectedIndex - 1;\n    this.setActiveSlide(index, 'Previous');\n    this.autoSlide();\n  }\n  /**\n   * Method to transit from the current slide to the next slide.\n   *\n   * @returns {void}\n   */\n\n\n  next() {\n    if (!this.loop && this.selectedIndex === this.slideItems.length - 1) {\n      return;\n    }\n\n    const index = this.selectedIndex === this.slideItems.length - 1 ? 0 : this.selectedIndex + 1;\n    this.setActiveSlide(index, 'Next');\n    this.autoSlide();\n  }\n  /**\n   * Method to play the slides programmatically.\n   *\n   * @returns {void}\n   */\n\n\n  play() {\n    const playIcon = this.element.querySelector(`.${CLS_PLAY_ICON}`);\n\n    if (this.showPlayButton && playIcon) {\n      classList(playIcon, [CLS_PAUSE_ICON], [CLS_PLAY_ICON]);\n      const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n      playButton.setAttribute('aria-label', this.localeObj.getConstant('pauseSlideTransition'));\n    }\n\n    this.setProperties({\n      autoPlay: true\n    }, true);\n    const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n    itemsContainer.setAttribute('aria-live', 'off');\n    this.applySlideInterval();\n  }\n  /**\n   * Method to pause the slides programmatically.\n   *\n   * @returns {void}\n   */\n\n\n  pause() {\n    const pauseIcon = this.element.querySelector(`.${CLS_PAUSE_ICON}`);\n\n    if (this.showPlayButton && pauseIcon) {\n      const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n      playButton.setAttribute('aria-label', this.localeObj.getConstant('playSlideTransition'));\n      classList(pauseIcon, [CLS_PLAY_ICON], [CLS_PAUSE_ICON]);\n    }\n\n    this.setProperties({\n      autoPlay: false\n    }, true);\n    const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n    itemsContainer.setAttribute('aria-live', 'off');\n    this.resetSlideInterval();\n  }\n  /**\n   * Method to render react and angular templates\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  renderTemplates() {\n    if (this.isAngular || this.isReact) {\n      this.renderReactTemplates();\n    }\n  }\n  /**\n   * Method to reset react and angular templates\n   *\n   * @param {string[]} templates Accepts the template ID\n   * @returns {void}\n   * @private\n   */\n\n\n  resetTemplates(templates) {\n    if (this.isAngular || this.isReact) {\n      this.clearTemplate(templates);\n    }\n  }\n  /**\n   * Method for destroy the carousel component.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    this.resetTemplates();\n\n    if (this.touchModule) {\n      this.touchModule.destroy();\n      this.touchModule = null;\n    }\n\n    this.keyModule.destroy();\n    this.keyModule = null;\n    this.resetSlideInterval();\n    this.destroyButtons();\n    this.unWireEvents();\n    [].slice.call(this.element.children).forEach(ele => {\n      this.element.removeChild(ele);\n    });\n    removeClass([this.element], [CLS_CAROUSEL, this.cssClass, CLS_RTL$5]);\n    ['tabindex', 'role', 'style'].forEach(attr => {\n      this.element.removeAttribute(attr);\n    });\n    super.destroy();\n  }\n\n};\n\n__decorate$11([Collection([], CarouselItem)], Carousel.prototype, \"items\", void 0);\n\n__decorate$11([Property('Slide')], Carousel.prototype, \"animationEffect\", void 0);\n\n__decorate$11([Property()], Carousel.prototype, \"previousButtonTemplate\", void 0);\n\n__decorate$11([Property()], Carousel.prototype, \"nextButtonTemplate\", void 0);\n\n__decorate$11([Property()], Carousel.prototype, \"indicatorsTemplate\", void 0);\n\n__decorate$11([Property()], Carousel.prototype, \"playButtonTemplate\", void 0);\n\n__decorate$11([Property()], Carousel.prototype, \"cssClass\", void 0);\n\n__decorate$11([Property([])], Carousel.prototype, \"dataSource\", void 0);\n\n__decorate$11([Property()], Carousel.prototype, \"itemTemplate\", void 0);\n\n__decorate$11([Property(0)], Carousel.prototype, \"selectedIndex\", void 0);\n\n__decorate$11([Property('100%')], Carousel.prototype, \"width\", void 0);\n\n__decorate$11([Property('100%')], Carousel.prototype, \"height\", void 0);\n\n__decorate$11([Property(5000)], Carousel.prototype, \"interval\", void 0);\n\n__decorate$11([Property(true)], Carousel.prototype, \"autoPlay\", void 0);\n\n__decorate$11([Property(true)], Carousel.prototype, \"pauseOnHover\", void 0);\n\n__decorate$11([Property(true)], Carousel.prototype, \"loop\", void 0);\n\n__decorate$11([Property(false)], Carousel.prototype, \"showPlayButton\", void 0);\n\n__decorate$11([Property(true)], Carousel.prototype, \"enableTouchSwipe\", void 0);\n\n__decorate$11([Property(true)], Carousel.prototype, \"showIndicators\", void 0);\n\n__decorate$11([Property('Visible')], Carousel.prototype, \"buttonsVisibility\", void 0);\n\n__decorate$11([Property()], Carousel.prototype, \"htmlAttributes\", void 0);\n\n__decorate$11([Event()], Carousel.prototype, \"slideChanging\", void 0);\n\n__decorate$11([Event()], Carousel.prototype, \"slideChanged\", void 0);\n\nCarousel = __decorate$11([NotifyPropertyChanges], Carousel);\n/** Carousel export modules */\n\n/**\n * Navigation all modules\n */\n\nexport { MenuAnimationSettings, MenuItem, HScroll, VScroll, addScrolling, destroyScroll, Item, Toolbar, AccordionActionSettings, AccordionAnimationSettings, AccordionItem, Accordion, ContextMenu, Menu, TabActionSettings, TabAnimationSettings, Header, TabItem, Tab, FieldsSettings, ActionSettings, NodeAnimationSettings, TreeView, Sidebar, BreadcrumbItem, Breadcrumb, CarouselItem, Carousel };","map":{"version":3,"names":["Animation","Browser","ChildProperty","Collection","Complex","Component","Draggable","Droppable","Event","EventHandler","KeyboardEvents","L10n","NotifyPropertyChanges","Property","SanitizeHtmlHelper","Touch","addClass","append","attributes","classList","closest","compile","createElement","detach","extend","formatUnit","getElement","getInstance","getRandomId","getUniqueID","getValue","isBlazor","isNullOrUndefined","isRippleEnabled","isUndefined","isVisible","matches","merge","remove","removeClass","rippleEffect","select","selectAll","setStyleAttribute","setValue","ListBase","Popup","calculatePosition","createSpinner","fit","getScrollableParent","getZindexPartial","hideSpinner","isCollide","showSpinner","Button","createCheckBox","rippleMouseHandler","DataManager","Query","Input","__decorate","undefined","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","CLS_ROOT","CLS_RTL","CLS_DISABLE","CLS_HSCROLLBAR","CLS_HSCROLLCON","CLS_NAVARROW","CLS_NAVRIGHTARROW","CLS_NAVLEFTARROW","CLS_HSCROLLNAV","CLS_HSCROLLNAVRIGHT","CLS_HSCROLLNAVLEFT","CLS_DEVICE","CLS_OVERLAY","CLS_RIGHTOVERLAY","CLS_LEFTOVERLAY","OVERLAY_MAXWID","HScroll","constructor","options","element","preRender","browser","info","name","browserCheck","isDevice","customStep","ieCheck","initialize","id","uniqueId","style","display","enableRtl","add","render","touchModule","scroll","touchHandler","bind","swipe","swipeHandler","scrollEle","scrollHandler","createNavIcon","createOverlay","setScrollState","scrollStep","offsetWidth","className","scrollDiv","setAttribute","ele","innerEle","slice","call","children","appendChild","overflowX","scrollItems","getPersistData","keyEntity","addOnPersist","getModuleName","destroy","nav","overlay","forEach","elem","removeAttribute","disable","value","navEles","el","concat","rightOverlayEle","clsRight","rightEle","navItem","leftEle","insertBefore","firstChild","eventBinding","rightAttributes","attrs","clsLeft","leftAttributes","navEle","navLeftItem","onKeyPress","e","timeoutFun","keyTimeout","eleScrolling","keyTimer","window","setTimeout","onKeyUp","click","clearTimeout","tapHold","tabHoldHandler","tapHoldThreshold","addEventListener","repeatScroll","preventDefault","clickEventHandler","clearInterval","timeout","trgt","originalEvent","contains","firstElementChild","scrollDis","setInterval","isContinuous","rootEle","classList$$1","querySelector","frameScrollRequest","swipeEle","distance","velocity","distanceX","start","animate","step","Math","sin","cancelAnimationFrame","swipeDirection","scrollLeft","requestAnimationFrame","scrollUpdating","scrollVal","action","scrollValue","scrollDirection","arrowDisabling","addDisable","removeDisable","arrowEle","arrowIcon","width","navLeftEle","navRightEle","leftOverlay","rightOverlay","scrollWidth","ceil","disEle","onPropertyChanged","newProp","oldProp","prop","keys","prototype","__decorate$1","CLS_ROOT$1","CLS_RTL$1","CLS_DISABLE$1","CLS_VSCROLLBAR","CLS_VSCROLLCON","CLS_NAVARROW$1","CLS_NAVUPARROW","CLS_NAVDOWNARROW","CLS_VSCROLLNAV","CLS_VSCROLLNAVUP","CLS_VSCROLLNAVDOWN","CLS_DEVICE$1","CLS_OVERLAY$1","CLS_UPOVERLAY","CLS_DOWNOVERLAY","OVERLAY_MAXWID$1","VScroll","scrollEventHandler","createOverlayElement","wheelEventHandler","offsetHeight","scrollCnt","scrollBar","overflow","navs","overlays","downOverlayEle","clsDown","downEle","upEle","clsUp","navElement","navUpItem","ev","scrollDistance","event","deltaY","swipeElement","distanceY","scrollTop","addDisableCls","removeDisableCls","height","navUpEle","navDownEle","upOverlay","downOverlay","scrollHeight","addScrolling","createElement$$1","container","content","scrollType","offset","containerOffset","contentOffset","parentElem","parentElement","getBoundingClientRect","createScrollbar","maxWidth","maxHeight","scrollObj","destroyScroll","skipEle","menu","__decorate$2","ENTER","ESCAPE","FOCUSED","HEADER","SELECTED","SEPARATOR","UPARROW","DOWNARROW","LEFTARROW","RIGHTARROW","HOME","END","TAB","CARET","ITEM","DISABLED","HIDE","ICONS","RTL","POPUP","TEMPLATE_PROPERTY","FieldSettings","MenuItem","MenuAnimationSettings","MenuBase","navIdx","animation","isTapHold","tempItem","showSubMenuOn","isMenu","ul","tagName","ejInst","clonedElement","cloneNode","refEle","nextElementSibling","ejInstance","wrapper","idx","len","nodeName","nodeValue","parentNode","renderItems","wireEvents","renderComplete","getWrapper","template","enableScrolling","isReact","isAngular","document","body","cssClass","split","hamburgerMode","createHeaderContainer","defaultOption","showItemOnClick","items","createJsonFromElement","fields","child","setProperties","removeChildElement","innerHTML","createItems","Array","setBlankIconStyle","targetElems","menuHeaderClickHandler","isIos","cmenuHandler","targetElement","parent","delegateMoverHandler","moverHandler","delegateMouseDownHandler","mouseDownHandler","delegateClickHandler","clickHandler","wireKeyboardEvent","rippleFn","selector","keyConfigs","downarrow","uparrow","enter","leftarrow","rightarrow","escape","home","end","tab","keyAction","keyBoardHandler","closeMenu","actionName","actionNeeded","keyCode","removeLIStateByClass","upDownKeyHandler","rightEnterKeyHandler","leftEscKeyHandler","cul","getUlByNavIdx","defaultIdx","childElementCount","fliIdx","fli","getLIByClass","getIdx","cli","isValidLI","focus","index","navIdxLen","popup","eventArgs","item","getItem","push","keyType","openMenu","trigger","isCMenu","pageX","changedTouches","pageY","canOpen","ulIndex","isIterated","isMenuVisible","sli","beforeCloseArgs","popups","getPopups","isClose","cnt","liElem","getLI","parentItem","cancel","isFocused","observedCloseArgs","popupEle","closeArgs","popupId","popupObj","isOpen","minHeight","unWireKeyboardEvent","hide","toggleAnimation","pop","updateReactTemplate","trgtliId","closedLi","trgtLi","trgtpopUp","RegExp","exec","submenus","querySelectorAll","afterCloseMenu","getIndex","isMenusClosed","which","getAttribute","cliIdx","removeStateWrapper","portals","splice","clearTemplate","renderReactTemplates","getMenuItemModel","level","getFields","text","separator","iconCss","url","valueOf","filter","li","top","left","lItem","elemId","uList","getField","lastChild","data","toString","hdata","hli","popupWrapper","isNestedOrVertical","generatePopup","calculateIndentSize","hoverDelay","timer","triggerBeforeOpen","zIndex","liStyle","getComputedStyle","liIndent","parseInt","textIndent","blankIconElem","menuIconElem","menuIconElemStyle","blankIconIndent","marginRight","actionOnScroll","relateTo","collision","X","Y","position","targetType","open","triggerOpen","spanElem","tempTitle","enableHtmlSanitizer","sanitize","title","spanTitle","spanIcon","openHamburgerMenu","closeHamburgerMenu","observedHamburgerCloseArgs","callFit","x","y","type","menuType","observedOpenArgs","checkScrollOffset","refreshPosition","indexOf","animationOptions","animationSettings","effect","duration","timingFunction","easing","show","setPosition","collide","offWidth","blankIconList","getElementsByClassName","iconLi","icon","cssProp","padding","margin","iconCssProps","iconSize","fontSize","size","offsetEle","offsetLeft","offsetRight","px","toggleVisiblity","newTop","pageYOffset","documentElement","clientHeight","Number","replace","xCollision","isVisible$$1","visibility","showIcon","hasField","listBaseOptions","moduleName","itemNavigable","itemCreating","args","curData","htmlAttributes","role","tabindex","itemCreated","span","templateID","createList","liTrgt","hdrWrapper","regex","ulId","isDifferentElem","isClosed","propName","fieldName","field","cliWrapper","isInstLI","cliWrapperId","setLISelected","showSubMenu","culIdx","cIdx","isHeader","classname","getItemIndex","isUniqueId","isText","setItem","newItem","getItems","setItems","newItems","skipHdr","updateItemsByNavIdx","count","updateItem","removeChild","toggle","unWireEvents","lastElementChild","getChangedItemIndex","insertAfter","removeItem","lis","popStr","uls","targetSelctor","keyboardModule","isMenuOpen","pUlHeight","pElement","begin","progress","nIndex","isCallBack","unshift","enableItems","enable","disabled","skipItem","showItems","showHideItems","hideItems","ishide","removeItems","iitems","insertItems","isAfter","menuitem","removeAttributes","removeProperty","refreshing","getElementById","itemId","parentId","__decorate$3","CLS_VERTICAL","CLS_ITEMS","CLS_ITEM","CLS_RTL$2","CLS_SEPARATOR","CLS_POPUPICON","CLS_POPUPDOWN","CLS_POPUPOPEN","CLS_TEMPLATE","CLS_DISABLE$2","CLS_POPUPTEXT","CLS_TBARTEXT","CLS_TBAROVERFLOW","CLS_POPOVERFLOW","CLS_TBARBTN","CLS_TBARNAV","CLS_TBARSCRLNAV","CLS_TBARRIGHT","CLS_TBARLEFT","CLS_TBARCENTER","CLS_TBARPOS","CLS_HSCROLLCNT","CLS_VSCROLLCNT","CLS_HSCROLLBAR$1","CLS_POPUPNAV","CLS_POPUPCLASS","CLS_POPUP","CLS_TBARBTNTEXT","CLS_TBARNAVACT","CLS_TBARIGNORE","CLS_POPPRI","CLS_HIDDEN","CLS_MULTIROW","CLS_MULTIROWPOS","CLS_MULTIROW_SEPARATOR","CLS_EXTENDABLE_SEPARATOR","CLS_EXTEANDABLE_TOOLBAR","CLS_EXTENDABLECLASS","CLS_EXTENDPOPUP","CLS_EXTENDEDPOPOPEN","Item","Toolbar","resizeContext","resize","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","btnItems","ej2_instances","isDestroyed","unwireEvents","tempId","destroyItems","trgtEle","ctrlTem","popObj","activeEle","tbarAlign","tbarItemsCol","attrb","enableCollision","scrollModule","isVertical","isExtendedOpen","popupPriCount","allowKeyboard","keyModule","keyActionHandler","docKeyDown","unwireKeyboardEvent","popCheck","overflowMode","keyCheck","removeEventListener","docEvent","clearProperty","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","tbarItems","destroyMode","tempEle","popupRefresh","val","elementFocus","fChild","activeEleSwitch","clstElement","tbrNavChk","clst","keyHandling","navChk","scrollChk","popAnimate","nodes","eleFocus","popupCheck","extendedPopup","popFrstEle","activeEleRemove","tbarScrollChk","eleContains","closest$$1","pos","sib","isPopupElement","clsList","popupNav","popupClickHandler","itemObj","clickedArgs","offsetX","dataBind","getElementOffsetY","renderControl","ariaAttr","renderLayout","renderOverflowMode","itemPositioning","checkPopupRefresh","itemsAlign","itemEleDom","innerItem","innerPos","renderSubComponent","tbarItemAlign","align","toLowerCase","showAlwaysInPopup","notify","changeOrientation","refreshOverflow","initScroll","innerItems","checkOverflow","itemWidthCal","parseFloat","marginTop","marginBottom","marginLeft","getScrollCntEle","trgClass","eleWidth","itemWidth","popNav","scrollNav","navEleWidth","toolbarAlign","priorityCheck","offsetWid","removePositioning","setOverflowAttributes","createPopupEle","eleItem","multiVar","extendVar","eleInlineItem","innerNav","vertical","createPopupIcon","innerNavDom","direction","checkPriority","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","sepHeight","poppedEle","nodeIndex","nodePri","tbResize","childNodes","tbarElement","sepItem","extendEle","popupInit","getPropertyValue","eleStyles","offsetY","close","appendTo","borderRightWidth","tbarPopupHandler","toolEle","popupElePos","offsetTop","popIcon","scrollY","innerHeight","overflowHeight","tbEleData","bottom","popupOffset","right","clientWidth","inEle","pre","popPriority","eleWid","eleOffset","checkoffset","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","compuStyle","fstEleCheck","tbarEleMrgn","minWidth","sepEle","popedEle","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","query","priEleCnt","eleSep","ignoreCheck","sepDisplay","eleSepWidth","prevSep","previousElementSibling","isVer","dimension","popupEleWidth","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","root","tbarWidth","tbarItemsWid","elWidth","btnText","btn","eleSplice","sepBeforePri","refreshPositioning","tbarWid","popWid","itemEle","alignDiv","alignEle","leftAlign","ctrlTemplate","setAttr","attr","keyVal","isEnable","elements","a","itemElement","getElementByIndex","addItems","extendedOpen","itemsDiv","itemsRerender","itemAgn","algIndex","removeItemByIndex","eleIdx","indexAgn","btnItem","templateRender","templateProp","itemType","eleObj","isComponent","templateFn","regEx","trim","test","tempStr","outerHTML","tempArray","toolbarTemplateID","isStringTemplate","buttonRendering","dom","textStr","iconPos","btnTxt","prefixIcon","suffixIcon","btnObj","iconPosition","tempDom","tooltipText","textContent","itemClick","showTextOn","sTxt","visible","currentTarget","curEle","multirowele","tEle","changedProb","property","newProperty","refresh","popupPriCheck","booleanCheck","itemCol","hideItem","isElement","eleIndex","initIndex","nextEle","setFlag","removeFlag","initELe","__decorate$4","CLS_ACRDN_ROOT","CLS_ROOT$2","CLS_ITEM$1","CLS_ITEMFOCUS","CLS_ITEMHIDE","CLS_HEADER","CLS_HEADERICN","CLS_HEADERCTN","CLS_CONTENT","CLS_CTENT","CLS_TOOGLEICN","CLS_COLLAPSEICN","CLS_EXPANDICN","CLS_RTL$3","CLS_CTNHIDE","CLS_SLCT","CLS_SLCTED","CLS_ACTIVE","CLS_ANIMATE","CLS_DISABLE$3","CLS_TOGANIMATE","CLS_NEST","CLS_EXPANDSTATE","CLS_CONTAINER","AccordionActionSettings","AccordionAnimationSettings","AccordionItem","Accordion","space","isVue","isDestroy","restoreContent","isNested","removeRippleEffect","nested","templateEle","initializeHeaderTemplate","initializeItemTemplate","initExpand","expandedIndices","expandMode","initItemExpand","wireFocusEvents","acrdItem","headerEle","clearEvents","focusIn","focusOut","eventName","templateParser","error","headerTemplate","headerTemplateFn","itemTemplate","itemTemplateFn","getHeaderTemplate","getItemTemplate","innerEles","header","toggleIconGenerate","tglIcon","hdrColIcon","expandItem","innerDataSourceItem","dataSource","renderInnerItem","acrdEle","acrdnItem","acrdnHdr","acrdnCtn","acrdnCtnItem","getIndexByItem","ctnCheck","contentRendering","ariaAttrUpdate","afterContentRender","acrdActive","cntclkCheck","inlineAcrdnSel","inlineEleAcrdn","nestContCheck","acrdcontainer","acrdnchild","acrdAniEle","sameContentCheck","sameHeader","acrdnRoot","expandState","collapse","expand","eleMoveFocus","clstItem","headerEleGenerate","ctnEle","hdrEle","angularnativeCondiCheck","fetchElement","hdr","expanded","enablePersistence","hdrIcnEle","hdrIcon","elementRef","nativeElement","parseddata","JSON","parse","temString","eleVal","HTMLElement","templateProps","templateName","itemcnt","ctn","trgtItemEle","isExpanded","expandArgs","expandedItemsPush","expandProgress","expandAnimation","ef","icn","lastActiveItemId","temp","getItemElements","itemCollection","expandedItemsPop","collapseProgress","collapseAnimation","trgtItEl","trgtHeight","itemHeight","remain","itemAttribUpdate","itemLen","addItem","itemIndex","innerItemEle","expandedItemRefresh","isHidden","enableItem","eleHeader","isExpand","itemExpand","expandedItem","ctnElePos","eleStr","setTemplate","toElement","templateCompile","childEle","acrdn","isRefresh","changedProp","j","oldVal","newVal","activeContent","__decorate$5","ContextMenu","__decorate$6","VMENU","SCROLLABLE","HAMBURGER","Menu","tempItems","clearChanges","updateMenuItems","orientation","map","createMenuItems","pIdField","__decorate$7","CLS_TAB","CLS_HEADER$1","CLS_BLA_TEM","CLS_CONTENT$1","CLS_NEST$1","CLS_ITEMS$1","CLS_ITEM$2","CLS_TEMPLATE$1","CLS_RTL$4","CLS_ACTIVE$1","CLS_DISABLE$4","CLS_HIDDEN$1","CLS_FOCUS","CLS_ICONS","CLS_ICON","CLS_ICON_TAB","CLS_ICON_CLOSE","CLS_CLOSE_SHOW","CLS_TEXT","CLS_INDICATOR","CLS_WRAP","CLS_TEXT_WRAP","CLS_TAB_ICON","CLS_TB_ITEMS","CLS_TB_ITEM","CLS_TB_POP","CLS_TB_POPUP","CLS_HOR_NAV","CLS_POPUP_OPEN","CLS_POPUP_CLOSE","CLS_PROGRESS","CLS_IGNORE","CLS_OVERLAY$2","CLS_HSCRCNT","CLS_VSCRCNT","CLS_VTAB","CLS_VERTICAL$1","CLS_VLEFT","CLS_VRIGHT","CLS_HBOTTOM","CLS_FILL","TABITEMPREFIX","CLS_REORDER_ACTIVE_ITEM","TabActionSettings","TabAnimationSettings","Header","TabItem","Tab","isInteracted","lastIndex","isAdd","isIconAlone","draggableItems","refreshActiveTabBorder","delete","tbObj","expTemplateContent","isTemplate","cntEle","btnCls","tbItems","tbItem","tbPop","prevItem","bdrLine","dragItem","cloneElement","draggingItems","prevIndex","isPopup","initRender","isSwipeed","itemIndexArray","allowDragAndDrop","dragArea","css","setCssClass","updatePopAnimationConfig","tabId","renderContainer","setOrientation","headerPlacement","renderHeader","renderContent","scrCnt","scrCntClass","setContentHeight","selectedItem","tabID","setRTL","hdrPlace","tabItems","getTabHeader","addVerticalClass","parseObject","hdrItems","txt","cont","wrap","tabIndex","clicked","updateOrientationAttribute","setCloseButton","showCloseButton","toolbarHeader","hdrItem","contents","reRenderItems","maxId","isReplace","idList","max","tItems","txtWrapEle","spliceArray","tbId","num","substring","hidden","tHtml","txtEmpty","headerTextCompile","tCont","wrapAttrs","attrObj","tItem","spliceItemIndex","removeActiveClass","tabHeader","node","checkPopupOverflow","tbrItems","isOverflow","popupHandler","ripEle","actEleId","prevEle","trg","prevCtnAnimation","prev","current","checkRTL","previous","next","triggerPrevAnimation","oldCnt","animateObj","triggerAnimation","prevActiveEle","newCnt","getTrgContent","extIndex","idNo","openEff","clsEff","setActiveBorder","keyPressed","trgParent","trgIndex","getEleIndex","selectTab","headers","compileElement","templateFUN","getContent","callType","no","findEle","tbPos","place","activeTab","changeToolbarOrientation","focusItem","curActItem","headerPos","contentPos","list","heightAdjustMode","getHeight","cs","trgHdrEle","reorderActiveTab","bar","tbHeight","tbWidth","setActive","skipDataBind","isNaN","allowServerDataBinding","serverDataBind","enableAnimation","eleTrg","refreshItemVisibility","eventArg","previousItem","previousIndex","selectedIndex","selectedContent","selectingID","isSwiped","refreshActiveBorder","showPopup","config","tbPopObj","bindDraggable","initializeDrag","hoverHandler","spaceKeyDown","keyHandler","tabKeyModule","openPopup","shiftTab","removeTab","nestedTab","k","clstHead","actEle","activeElement","nxtSib","nextSibling","scrBar","scrStart","scrEnd","eleStart","eleEnd","eleViewRange","closeButtonTitle","locale","getConstant","evalOnPropertyChangeItems","properties","lastIndexOf","cntItem","textVal","arr","isHiddenEle","addTab","hideTab","strVal","enableTab","selectElement","dragObj","dragTarget","clone","helper","dragStart","itemDragStart","drag","dragIndex","dropIndex","dropItem","dragArgs","draggedItem","droppedItem","isEqualNode","cursor","scrollRightNavEle","scrollLeftNavEle","hscrollBar","abs","pointerEvents","scrollContentWidth","isSameNode","dragAction","droppedIndex","dragStop","itemDragStop","tabitemDragArgs","dragsIndex","popupContainer","lastEle","dragStopArgs","tabItemDropArgs","addArgs","addedItems","tabAddingArgs","addingTabContent","lastEleIndex","itemsCount","textValue","removeArgs","removedItem","removedIndex","tabRemovingArgs","targetEleIndex","cntTrg","selectedID","selectingItem","selectingIndex","selectingContent","selectArgs","tabItemId","refreshActiveTab","txtWrap","tConts","wrapAtt","wraper","crElem","innerText","detachContent","mainContents","txtString","conte","__decorate$8","TreeView_1","ROOT","CONTROL","COLLAPSIBLE","EXPANDABLE","LISTITEM","LISTTEXT","LISTWRAP","IELISTWRAP","PARENTITEM","HOVER","ACTIVE","LOAD","PROCESS","ICON","TEXTWRAP","INPUT","INPUTGROUP","TREEINPUT","EDITING","RTL$1","INTERACTION","DRAGITEM","DROPPABLE","DRAGGING","SIBLING","DROPIN","DROPNEXT","DROPOUT","NODROP","FULLROWWRAP","FULLROW","SELECTED$1","EXPANDED","NODECOLLAPSED","DISABLE","DROPCOUNT","CHECK","INDETERMINATE","CHECKBOXWRAP","CHECKBOXFRAME","CHECKBOXRIPPLE","RIPPLE","RIPPLEELMENT","FOCUS","IMAGE","BIGGER","SMALL","CHILD","ITEM_ANIMATION_ACTIVE","DISABLED$1","treeAriaAttr","treeRole","itemRole","listRole","itemText","wrapperRole","FieldsSettings","ActionSettings","NodeAnimationSettings","TreeView","isRefreshed","preventExpand","checkedElement","disableNode","validArr","validNodes","expandChildren","isFieldChange","changeDataSource","hasTemplate","isFirstRender","mouseDownStatus","checkActionNodes","parentNodeCheck","dragStartAction","isAnimate","f2","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","ctrlA","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","listBaseOption","expandCollapse","expandIconClass","ariaAttributes","expandIconPosition","beforeNodeCreate","fullRowNavigable","updateListProp","aniObj","treeList","isLoaded","isInitalExpand","setTouchClass","selectedNodes","checkedNodes","expandedNodes","initialRender","setDataBinding","setDisabledMode","setExpandOnType","setRipple","wireEditingEvents","allowEditing","setDragAndDrop","setEnableRtl","setFullRow","fullRowSelect","setTextWrap","nodeTemplateFn","templateComplier","nodeTemplate","rippleModel","ignore","iconModel","isCenterRipple","rippleIconFn","isEnabled","setMultiSelect","firstUl","isOffline","offline","ready","then","treeData","result","isNumberTypeId","getType","setRootData","finalize","catch","executeQuery","getQuery","rootData","stringify","mapper","columns","getActualProperties","col","hasOwnProperty","from","tableName","addSorting","sortOrder","parentID","where","dataType","getDataType","groupedData","getGroupedData","rootItems","getChildNodes","isSorted","sortedData","getSortedData","ulElement","rootNodes","loadOnDemand","renderChildNodes","parentEle","finalizeNode","parentCheckData","updateCheckedStateFromDS","autoCheck","showCheckBox","updateParentCheckState","resultData","executeLocal","isChecked","resultId","resultPId","hasChildren","childData","childId","checkState","getCheckedNodeDetails","checkIndeterminateState","checkedId","checkedData","fieldId","childItems","updateChildCheckState","checkNodes","preElement","check","changeState","indeterminate","childCheckedElement","nodeId","nodeCheck","ariaChecked","checkedParent","checkedChild","subChildItems","checkboxEle","touchClass","checkValue","addCheck","frame","frameMouseHandler","createFullRow","allowMultiSelection","addActionClass","selected","textEle","dataId","renderNodeTemplate","nodeData","rippleSpan","actionValue","ds","groupBy","cusQuery","group","getDataSource","grpItem","iNodes","sNodes","selectNode","cNodes","disableExpandAttr","eNodes","updateList","updateCheckedProp","ensureIndeterminate","liElement","ensureParentCheckState","ensureChildCheckState","indeterminateNodes","checkBoxEle","parentUL","currentParent","childElement","checkBoxes","parentCheck","childCheck","checkedState","currentLoadData","isNodeChecked","doCheckBoxAction","doCheck","liEle","setValidCheckedNode","dynamicCheckState","updateField","checkBox","validateCheckNode","updateFieldChecked","checkbox","currLi","nodeDetails","getNodeData","updateIndeterminate","subChild","updateChildIndeterminate","indeterminateData","getTreeData","subId","childElementCheck","innerChild","state","isPrevent","getCheckEvent","observedArgs","nodeCheckAction","ariaState","frameSpan","removeCheck","ensureStateChange","checked","firstNode","updateIdAttr","allowTextWrap","updateWrap","hasPid","doExpandAction","isIE","ulEle","liList","calculateWrap","eUids","expandGivenNodes","eNode","expandAction","afterFinalized","proxy","expandCallback","eUid","callback","doSelectionAction","sUids","sNode","selectGivenNodes","preventContextMenu","rippleElement","rippleIcons","removeHover","setFocusElement","checkWrapper","checkElement","triggerClickEvent","collapseNode","toggleSelect","nodeCheckedEvent","isCheck","expandNode","loaded","setHeight","animateHeight","expandedNode","addExpand","getExpandEvent","colArgs","nodeCollapseAction","collapsedNode","removeExpand","toRemove","remaining","timeStamp","currentHeight","parentLi","expandChild","eicon","parents","getChildFields","loadChild","setSelectionForChildNodes","ensureCheckNode","disableTreeNodes","renderSubChild","getNodeObject","doDisableAction","nodeLevel","dataLevel","getChildMapper","obj","isRoot","getChildGroup","objlen","cIcons","curLi","multiSelect","ctrlKey","isActive","unselectNode","getSelectEvent","nodeSelectAction","removeSelectAll","shiftKey","startNode","startIndex","endIndex","currNode","addSelect","nodeUnselectAction","removeSelect","focusedNode","getFocusedNode","selectedLI","expandOnType","expandOn","expandHandler","expandCollapseAction","nodeExpandAction","liEles","getId","inpEle","blur","oldText","checkNode","openNode","shiftKeySelect","navigateNode","navigateRootNode","createTextbox","navigateToFocus","isUp","focusNode","getScrollParent","parentPos","isVisibleInViewport","scrollIntoView","innerWidth","isTowards","nextNode","getNextNode","getPrevNode","checkWrap","nodeCheckingAction","allCheckNode","parentIndex","getChildItems","childStateChange","childIsCheck","newCheck","validateCheck","hierChildId","toBeOpened","focusNextNode","setFocus","isBackwards","rootNode","getRootNode","getEndNode","fNode","previousSibling","prevNode","endNode","preNode","onMouseOver","currentLi","setHover","onMouseLeave","hoveredNode","fromDS","getText","pNode","pid","nodeFields","tempArr","destroyTemplate","reRenderNodes","oldClass","newClass","editingHandler","oldInpEle","updateOldText","getEditEvent","inpWidth","innerHtml","inputObj","createInput","inputEle","setSelectionRange","wireInputEvents","editData","editFields","inputFocusOut","newText","txtEle","crudOperation","appendNewText","isInput","updateText","triggerEvent","newData","getChildNodeObject","newList","toBind","destroyDrag","virtualEle","enableTailMode","enableAutoScroll","sender","dragRoot","dragWrap","dragLi","cloneEle","nLen","cNode","dragData","listItem","getDragEvent","draggedNode","intDestroy","dragCancelAction","cursorAt","targetTouches","removeVirtualEle","dropTarget","preventTargetExpand","dropRoot","dragParent","draggedParentNode","dropObj","out","over","drop","dropAction","dropWrap","dropLi","isDescendant","templateTarget","appendIndicator","renderVirtualEle","dropIndicator","virEle","dragInstance","draggable","droppedElement","appendNode","draggedElement","dropAsSiblingNode","dropAsChildNode","dropUl","dragParentUl","dragParentLi","moveData","updateElement","updateAriaLevel","updateInstance","dropParentUl","expandParent","childLi","dropParentLi","removedData","updateChildField","refId","getDataPos","currPid","removeChildNodes","addChildData","dropIcon","generateIcon","generateUL","dragIcon","updateChildAriaLevel","sibEle","dragNode","dropData","draggedNodeData","newParent","dragLiParent","targetParent","indexValue","iconClass","dropTar","hasAttribute","clonedNode","droppedNode","droppedNodeData","dropLevel","addFullRow","toAdd","rowDiv","addMultiSelect","collapseByLevel","excludeHiddenNodes","getVisibleNodes","collapseAllNodes","expandByLevel","expandAllNodes","eIcons","vNodes","removeNode","removeData","updateSelectedNodes","updateExpandedNodes","dm","newId","currId","doGivenAction","toExpand","addGivenNodes","isRemote","dropEle","updateMapper","createListItemFromJson","refNode","returnValue","toUpperCase","navigateUrl","updated","childObj","nodeType","validID","checkValidId","doEnableAction","strNodes","filterNestedChild","updatePersistProp","removeField","sleNodes","l","slelen","enodes","nodelen","cnodes","m","names","getMapperProp","remove$$1","touchEditObj","tap","isDoubleTapped","tapCount","wireClickEvent","touchClickObj","wireExpandOnEvent","touchExpandObj","matched","secondTap","firstTap","setCheckedNodes","uncheckAll","setIndeterminate","checkAll","setChildCheckState","updatePosition","isRefreshChild","childValue","updateChildPosition","currID","found","dynamicState","operation","newNode","prevent","matchedArr","crud","changes","addedRecords","deletedRecords","changedRecords","nodesID","fromTable","saveChanges","deleteSuccess","dmFailure","update","editSucess","insert","addSuccess","updatePreviousText","collapseAll","onLoaded","addNodes","beginEdit","disableNodes","enableNodes","ensureVisible","expandAll","getAllCheckedNodes","getDisabledNodes","disabledNodes","getNode","moveNodes","sourceNodes","refreshNode","updatedChildValue","refreshData","newNodeData","parentData","newliEle","newTextEle","newIcon","fullEle","tooltip","class","removeNodes","updateNode","__decorate$9","CONTROL$1","ROOT$1","DOCKER","CLOSE","OPEN","TRASITION","DEFAULTBACKDROP","CONTEXTBACKDROP","RTL$2","RIGHT","LEFT","OVER","PUSH","SLIDE","VISIBILITY","DISPLAY","MAINCONTENTANIMATION","DISABLEANIMATION","CONTEXT","SIDEBARABSOLUTE","Sidebar","setWidth","setTarget","setZindex","enableDock","setDock","firstRender","setMediaQuery","checkType","setType","setCloseOnDocumentClick","setEnableRTL","windowWidth","targetEle","sidebarEleCopy","getTargetElement","siblingElement","closeOnDocumentClick","documentclickHandler","setDimension","dockSize","match","classELement","transitionEnd","triggerChange","destroyBackDrop","sibling","showBackdrop","modal","closeArguments","model","observedcloseArgs","transform","setAnimation","setTimeOut","elementWidth","openArguments","observedopenArgs","createBackDrop","changeArguments","getState","mediaQuery","media","matchMedia","enableGestureHandler","startX","setEnableGestures","enableGestures","mainContentEle","sidebarEle","isRendered","isServerRendered","insertAdjacentElement","__decorate$10","ICONRIGHT","ITEMTEXTCLASS","ICONCLASS","MENUCLASS","ITEMCLASS","POPUPCLASS","WRAPMODECLASS","SCROLLMODECLASS","TABINDEX","DISABLEDCLASS","ARIADISABLED","DOT","BreadcrumbItem","Breadcrumb","_maxItems","maxItems","initItems","initPvtProps","getEndIndex","popupUl","activeItem","baseUri","uri","URL","location","origin","href","isSingleLevel","isIconRight","itemsLength","isActiveItem","isLastItem","isLastItemInPopup","wrapDiv","isItemCancelled","ol","firstOl","isCollasped","isDefaultOverflowMode","enableActiveItemNavigation","containsRightIcon","isEmptyUrl","keyDownHandler","beforeItemRenderChanges","separatorTemplate","itemClass","nextItem","lastPopupItemIdx","getMenuElement","calculateMaxItems","liElems","reverse","liWidth","menuEle","paddingLeft","currItem","isRightIcon","wrapElem","Node","TEXT_NODE","iconElem","enableNavigation","anchor","documentClickHandler","floor","renderPopup","popupWireEvents","popupKeyDownHandler","delegateClickHanlder","classes","attributes$$1","attribute","__decorate$11","CLS_CAROUSEL","CLS_ACTIVE$2","CLS_RTL$5","CLS_ITEMS$2","CLS_ITEM$3","CLS_PREVIOUS","CLS_NEXT","CLS_PREV_ICON","CLS_NEXT_ICON","CLS_NAVIGATORS","CLS_INDICATORS","CLS_INDICATOR_BARS","CLS_INDICATOR_BAR","CLS_INDICATOR$1","CLS_ICON$1","CLS_PLAY_PAUSE","CLS_PLAY_ICON","CLS_PAUSE_ICON","CLS_PREV_BUTTON","CLS_NEXT_BUTTON","CLS_PLAY_BUTTON","CLS_FLAT","CLS_ROUND","CLS_HOVER_ARROWS","CLS_HOVER","CLS_TEMPLATE$2","CLS_SLIDE_ANIMATION","CLS_FADE_ANIMATION","CLS_CUSTOM_ANIMATION","CLS_ANIMATION_NONE","CLS_PREV_SLIDE","CLS_NEXT_SLIDE","CLS_TRANSITION_START","CLS_TRANSITION_END","CarouselItem","Carousel","defaultLocale","nextSlide","of","pauseSlideTransition","playSlideTransition","previousSlide","slide","slideShow","localeObj","renderSlides","renderNavigators","renderPlayButton","renderIndicators","applyAnimation","setActiveSlide","autoSlide","setHtmlAttributes","enableTouchSwipe","renderTouchActions","loop","autoSlideInterval","applySlideInterval","handleNavigatorsActions","buttonsVisibility","resetTemplates","showPlayButton","playButtonTemplate","playButtonClickHandler","showIndicators","carouselClasses","itemsContainer","autoPlay","slideItems","renderSlide","renderTemplates","renderKeyboardActions","templateId","navigators","renderNavigatorButton","buttonContainer","previousButtonTemplate","nextButtonTemplate","button","buttonObj","navigatorClickHandler","playPauseWrap","playButton","isLastSlide","isToggle","indicatorWrap","indicatorBars","indicatorBar","indicatorsTemplate","indicator","indicatorClickHandler","animationEffect","resetSlideInterval","autoSlideChange","activeSlide","activeIndex","dataset","itemInterval","interval","getSlideIndex","currentIndex","allSlides","activeIndicator","currentSlide","nextIndex","slideDirection","slideIndicators","slideChangedEventArgs","slideHeight","onTransitionEnd","getNavigatorState","isPrevious","isDisabled","isPropertyChange","slideIndex","isSlideTransition","isSuspendSlideTransition","isButtonUpdate","prevButton","nextButton","onHoverActions","navigator","pauseOnHover","onFocusActions","destroyButtons","buttonCollections","instance","indicators","playIcon","play","pause","pauseIcon","templates"],"sources":["D:/StageCap2022/e-learningProject__frontend/frontend/node_modules/@syncfusion/ej2-navigations/dist/es6/ej2-navigations.es2015.js"],"sourcesContent":["import { Animation, Browser, ChildProperty, Collection, Complex, Component, Draggable, Droppable, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getElement, getInstance, getRandomId, getUniqueID, getValue, isBlazor, isNullOrUndefined, isRippleEnabled, isUndefined, isVisible, matches, merge, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { Popup, calculatePosition, createSpinner, fit, getScrollableParent, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Button, createCheckBox, rippleMouseHandler } from '@syncfusion/ej2-buttons';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Input } from '@syncfusion/ej2-inputs';\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst CLS_ROOT = 'e-hscroll';\nconst CLS_RTL = 'e-rtl';\nconst CLS_DISABLE = 'e-overlay';\nconst CLS_HSCROLLBAR = 'e-hscroll-bar';\nconst CLS_HSCROLLCON = 'e-hscroll-content';\nconst CLS_NAVARROW = 'e-nav-arrow';\nconst CLS_NAVRIGHTARROW = 'e-nav-right-arrow';\nconst CLS_NAVLEFTARROW = 'e-nav-left-arrow';\nconst CLS_HSCROLLNAV = 'e-scroll-nav';\nconst CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';\nconst CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';\nconst CLS_DEVICE = 'e-scroll-device';\nconst CLS_OVERLAY = 'e-scroll-overlay';\nconst CLS_RIGHTOVERLAY = 'e-scroll-right-overlay';\nconst CLS_LEFTOVERLAY = 'e-scroll-left-overlay';\nconst OVERLAY_MAXWID = 40;\n/**\n * HScroll module is introduces horizontal scroller when content exceeds the current viewing area.\n * It can be useful for the components like Toolbar, Tab which needs horizontal scrolling alone.\n * Hidden content can be view by touch moving or icon click.\n * ```html\n * <div id=\"scroll\"/>\n * <script>\n *   var scrollObj = new HScroll();\n *   scrollObj.appendTo(\"#scroll\");\n * </script>\n * ```\n */\nlet HScroll = class HScroll extends Component {\n    /**\n     * Initializes a new instance of the HScroll class.\n     *\n     * @param {HScrollModel} options  - Specifies HScroll model properties as options.\n     * @param {string | HTMLElement} element  - Specifies the element for which horizontal scrolling applies.\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        this.browser = Browser.info.name;\n        this.browserCheck = this.browser === 'mozilla';\n        this.isDevice = Browser.isDevice;\n        this.customStep = true;\n        const element = this.element;\n        this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n        this.initialize();\n        if (element.id === '') {\n            element.id = getUniqueID('hscroll');\n            this.uniqueId = true;\n        }\n        element.style.display = 'block';\n        if (this.enableRtl) {\n            element.classList.add(CLS_RTL);\n        }\n    }\n    /**\n     * To Initialize the horizontal scroll  rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.touchModule = new Touch(this.element, { scroll: this.touchHandler.bind(this), swipe: this.swipeHandler.bind(this) });\n        EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);\n        if (!this.isDevice) {\n            this.createNavIcon(this.element);\n        }\n        else {\n            this.element.classList.add(CLS_DEVICE);\n            this.createOverlay(this.element);\n        }\n        this.setScrollState();\n    }\n    setScrollState() {\n        if (isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {\n            this.scrollStep = this.scrollEle.offsetWidth;\n            this.customStep = false;\n        }\n        else {\n            this.customStep = true;\n        }\n    }\n    initialize() {\n        const scrollEle = this.createElement('div', { className: CLS_HSCROLLCON });\n        const scrollDiv = this.createElement('div', { className: CLS_HSCROLLBAR });\n        scrollDiv.setAttribute('tabindex', '-1');\n        const ele = this.element;\n        const innerEle = [].slice.call(ele.children);\n        for (const ele of innerEle) {\n            scrollEle.appendChild(ele);\n        }\n        scrollDiv.appendChild(scrollEle);\n        ele.appendChild(scrollDiv);\n        scrollDiv.style.overflowX = 'hidden';\n        this.scrollEle = scrollDiv;\n        this.scrollItems = scrollEle;\n    }\n    getPersistData() {\n        const keyEntity = ['scrollStep'];\n        return this.addOnPersist(keyEntity);\n    }\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    getModuleName() {\n        return 'hScroll';\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        const ele = this.element;\n        ele.style.display = '';\n        ele.classList.remove(CLS_ROOT);\n        ele.classList.remove(CLS_DEVICE);\n        const nav = selectAll('.e-' + ele.id + '_nav.' + CLS_HSCROLLNAV, ele);\n        const overlay = selectAll('.' + CLS_OVERLAY, ele);\n        [].slice.call(overlay).forEach((ele) => {\n            detach(ele);\n        });\n        for (const elem of [].slice.call(this.scrollItems.children)) {\n            ele.appendChild(elem);\n        }\n        if (this.uniqueId) {\n            this.element.removeAttribute('id');\n        }\n        detach(this.scrollEle);\n        if (nav.length > 0) {\n            detach(nav[0]);\n            if (!isNullOrUndefined(nav[1])) {\n                detach(nav[1]);\n            }\n        }\n        EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);\n        this.touchModule.destroy();\n        this.touchModule = null;\n        super.destroy();\n    }\n    /**\n     * Specifies the value to disable/enable the HScroll component.\n     * When set to `true` , the component will be disabled.\n     *\n     * @param  {boolean} value - Based on this Boolean value, HScroll will be enabled (false) or disabled (true).\n     * @returns {void}.\n     */\n    disable(value) {\n        const navEles = selectAll('.e-scroll-nav:not(.' + CLS_DISABLE + ')', this.element);\n        if (value) {\n            this.element.classList.add(CLS_DISABLE);\n        }\n        else {\n            this.element.classList.remove(CLS_DISABLE);\n        }\n        [].slice.call(navEles).forEach((el) => {\n            el.setAttribute('tabindex', !value ? '0' : '-1');\n        });\n    }\n    createOverlay(element) {\n        const id = element.id.concat('_nav');\n        const rightOverlayEle = this.createElement('div', { className: CLS_OVERLAY + ' ' + CLS_RIGHTOVERLAY });\n        const clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n        const rightEle = this.createElement('div', { id: id.concat('_right'), className: clsRight });\n        const navItem = this.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n        rightEle.appendChild(navItem);\n        const leftEle = this.createElement('div', { className: CLS_OVERLAY + ' ' + CLS_LEFTOVERLAY });\n        if (this.ieCheck) {\n            rightEle.classList.add('e-ie-align');\n        }\n        element.appendChild(rightOverlayEle);\n        element.appendChild(rightEle);\n        element.insertBefore(leftEle, element.firstChild);\n        this.eventBinding([rightEle]);\n    }\n    createNavIcon(element) {\n        const id = element.id.concat('_nav');\n        const clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);\n        const rightAttributes = { 'role': 'button', 'id': id.concat('_right'), 'aria-label': 'Scroll right' };\n        const nav = this.createElement('div', { className: clsRight, attrs: rightAttributes });\n        nav.setAttribute('aria-disabled', 'false');\n        const navItem = this.createElement('div', { className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n        const clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);\n        const leftAttributes = { 'role': 'button', 'id': id.concat('_left'), 'aria-label': 'Scroll left' };\n        const navEle = this.createElement('div', { className: clsLeft + ' ' + CLS_DISABLE, attrs: leftAttributes });\n        navEle.setAttribute('aria-disabled', 'true');\n        const navLeftItem = this.createElement('div', { className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons' });\n        navEle.appendChild(navLeftItem);\n        nav.appendChild(navItem);\n        element.appendChild(nav);\n        element.insertBefore(navEle, element.firstChild);\n        if (this.ieCheck) {\n            nav.classList.add('e-ie-align');\n            navEle.classList.add('e-ie-align');\n        }\n        this.eventBinding([nav, navEle]);\n    }\n    onKeyPress(e) {\n        if (e.key === 'Enter') {\n            const timeoutFun = () => {\n                this.keyTimeout = true;\n                this.eleScrolling(10, e.target, true);\n            };\n            this.keyTimer = window.setTimeout(() => {\n                timeoutFun();\n            }, 100);\n        }\n    }\n    onKeyUp(e) {\n        if (e.key !== 'Enter') {\n            return;\n        }\n        if (this.keyTimeout) {\n            this.keyTimeout = false;\n        }\n        else {\n            e.target.click();\n        }\n        clearTimeout(this.keyTimer);\n    }\n    eventBinding(ele) {\n        [].slice.call(ele).forEach((el) => {\n            new Touch(el, { tapHold: this.tabHoldHandler.bind(this), tapHoldThreshold: 500 });\n            el.addEventListener('keydown', this.onKeyPress.bind(this));\n            el.addEventListener('keyup', this.onKeyUp.bind(this));\n            el.addEventListener('mouseup', this.repeatScroll.bind(this));\n            el.addEventListener('touchend', this.repeatScroll.bind(this));\n            el.addEventListener('contextmenu', (e) => {\n                e.preventDefault();\n            });\n            EventHandler.add(el, 'click', this.clickEventHandler, this);\n        });\n    }\n    repeatScroll() {\n        clearInterval(this.timeout);\n    }\n    tabHoldHandler(e) {\n        let trgt = e.originalEvent.target;\n        trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;\n        const scrollDis = 10;\n        const timeoutFun = () => {\n            this.eleScrolling(scrollDis, trgt, true);\n        };\n        this.timeout = window.setInterval(() => {\n            timeoutFun();\n        }, 50);\n    }\n    contains(ele, className) {\n        return ele.classList.contains(className);\n    }\n    eleScrolling(scrollDis, trgt, isContinuous) {\n        const rootEle = this.element;\n        let classList$$1 = trgt.classList;\n        if (classList$$1.contains(CLS_HSCROLLNAV)) {\n            classList$$1 = trgt.querySelector('.' + CLS_NAVARROW).classList;\n        }\n        if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {\n            scrollDis = -scrollDis;\n        }\n        if ((!this.contains(rootEle, CLS_RTL) || this.browserCheck) || this.ieCheck) {\n            if (classList$$1.contains(CLS_NAVRIGHTARROW)) {\n                this.frameScrollRequest(scrollDis, 'add', isContinuous);\n            }\n            else {\n                this.frameScrollRequest(scrollDis, '', isContinuous);\n            }\n        }\n        else {\n            if (classList$$1.contains(CLS_NAVLEFTARROW)) {\n                this.frameScrollRequest(scrollDis, 'add', isContinuous);\n            }\n            else {\n                this.frameScrollRequest(scrollDis, '', isContinuous);\n            }\n        }\n    }\n    clickEventHandler(e) {\n        this.eleScrolling(this.scrollStep, e.target, false);\n    }\n    swipeHandler(e) {\n        const swipeEle = this.scrollEle;\n        let distance;\n        if (e.velocity <= 1) {\n            distance = e.distanceX / (e.velocity * 10);\n        }\n        else {\n            distance = e.distanceX / e.velocity;\n        }\n        let start = 0.5;\n        const animate = () => {\n            const step = Math.sin(start);\n            if (step <= 0) {\n                window.cancelAnimationFrame(step);\n            }\n            else {\n                if (e.swipeDirection === 'Left') {\n                    swipeEle.scrollLeft += distance * step;\n                }\n                else if (e.swipeDirection === 'Right') {\n                    swipeEle.scrollLeft -= distance * step;\n                }\n                start -= 0.5;\n                window.requestAnimationFrame(animate);\n            }\n        };\n        animate();\n    }\n    scrollUpdating(scrollVal, action) {\n        if (action === 'add') {\n            this.scrollEle.scrollLeft += scrollVal;\n        }\n        else {\n            this.scrollEle.scrollLeft -= scrollVal;\n        }\n    }\n    frameScrollRequest(scrollVal, action, isContinuous) {\n        const step = 10;\n        if (isContinuous) {\n            this.scrollUpdating(scrollVal, action);\n            return;\n        }\n        if (!this.customStep) {\n            [].slice.call(selectAll('.' + CLS_OVERLAY, this.element)).forEach((el) => {\n                scrollVal -= el.offsetWidth;\n            });\n        }\n        const animate = () => {\n            let scrollValue;\n            let scrollStep;\n            if (this.contains(this.element, CLS_RTL) && this.browserCheck) {\n                scrollValue = -scrollVal;\n                scrollStep = -step;\n            }\n            else {\n                scrollValue = scrollVal;\n                scrollStep = step;\n            }\n            if (scrollValue < step) {\n                window.cancelAnimationFrame(scrollStep);\n            }\n            else {\n                this.scrollUpdating(scrollStep, action);\n                scrollVal -= scrollStep;\n                window.requestAnimationFrame(animate);\n            }\n        };\n        animate();\n    }\n    touchHandler(e) {\n        const ele = this.scrollEle;\n        let distance = e.distanceX;\n        if ((this.ieCheck) && this.contains(this.element, CLS_RTL)) {\n            distance = -distance;\n        }\n        if (e.scrollDirection === 'Left') {\n            ele.scrollLeft = ele.scrollLeft + distance;\n        }\n        else if (e.scrollDirection === 'Right') {\n            ele.scrollLeft = ele.scrollLeft - distance;\n        }\n    }\n    arrowDisabling(addDisable, removeDisable) {\n        if (this.isDevice) {\n            const arrowEle = isNullOrUndefined(addDisable) ? removeDisable : addDisable;\n            const arrowIcon = arrowEle.querySelector('.' + CLS_NAVARROW);\n            if (isNullOrUndefined(addDisable)) {\n                classList(arrowIcon, [CLS_NAVRIGHTARROW], [CLS_NAVLEFTARROW]);\n            }\n            else {\n                classList(arrowIcon, [CLS_NAVLEFTARROW], [CLS_NAVRIGHTARROW]);\n            }\n        }\n        else if (addDisable && removeDisable) {\n            addDisable.classList.add(CLS_DISABLE);\n            addDisable.setAttribute('aria-disabled', 'true');\n            addDisable.removeAttribute('tabindex');\n            removeDisable.classList.remove(CLS_DISABLE);\n            removeDisable.setAttribute('aria-disabled', 'false');\n            removeDisable.setAttribute('tabindex', '0');\n        }\n        this.repeatScroll();\n    }\n    scrollHandler(e) {\n        const target = e.target;\n        const width = target.offsetWidth;\n        const rootEle = this.element;\n        const navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);\n        const navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);\n        let leftOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);\n        let rightOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);\n        let scrollLeft = target.scrollLeft;\n        if (scrollLeft <= 0) {\n            scrollLeft = -scrollLeft;\n        }\n        if (this.isDevice) {\n            if (this.enableRtl && !(this.browserCheck || this.ieCheck)) {\n                leftOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);\n                rightOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);\n            }\n            if (scrollLeft < OVERLAY_MAXWID) {\n                leftOverlay.style.width = scrollLeft + 'px';\n            }\n            else {\n                leftOverlay.style.width = '40px';\n            }\n            if ((target.scrollWidth - Math.ceil(width + scrollLeft)) < OVERLAY_MAXWID) {\n                rightOverlay.style.width = (target.scrollWidth - Math.ceil(width + scrollLeft)) + 'px';\n            }\n            else {\n                rightOverlay.style.width = '40px';\n            }\n        }\n        if (scrollLeft === 0) {\n            this.arrowDisabling(navLeftEle, navRightEle);\n        }\n        else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {\n            this.arrowDisabling(navRightEle, navLeftEle);\n        }\n        else {\n            const disEle = this.element.querySelector('.' + CLS_HSCROLLNAV + '.' + CLS_DISABLE);\n            if (disEle) {\n                disEle.classList.remove(CLS_DISABLE);\n                disEle.setAttribute('aria-disabled', 'false');\n                disEle.setAttribute('tabindex', '0');\n            }\n        }\n    }\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of property that changed.\n     *\n     * @param  {HScrollModel} newProp - It contains the new value of data.\n     * @param  {HScrollModel} oldProp - It contains the old value of data.\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'scrollStep':\n                    this.setScrollState();\n                    break;\n                case 'enableRtl':\n                    newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);\n                    break;\n            }\n        }\n    }\n};\n__decorate([\n    Property(null)\n], HScroll.prototype, \"scrollStep\", void 0);\nHScroll = __decorate([\n    NotifyPropertyChanges\n], HScroll);\n\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst CLS_ROOT$1 = 'e-vscroll';\nconst CLS_RTL$1 = 'e-rtl';\nconst CLS_DISABLE$1 = 'e-overlay';\nconst CLS_VSCROLLBAR = 'e-vscroll-bar';\nconst CLS_VSCROLLCON = 'e-vscroll-content';\nconst CLS_NAVARROW$1 = 'e-nav-arrow';\nconst CLS_NAVUPARROW = 'e-nav-up-arrow';\nconst CLS_NAVDOWNARROW = 'e-nav-down-arrow';\nconst CLS_VSCROLLNAV = 'e-scroll-nav';\nconst CLS_VSCROLLNAVUP = 'e-scroll-up-nav';\nconst CLS_VSCROLLNAVDOWN = 'e-scroll-down-nav';\nconst CLS_DEVICE$1 = 'e-scroll-device';\nconst CLS_OVERLAY$1 = 'e-scroll-overlay';\nconst CLS_UPOVERLAY = 'e-scroll-up-overlay';\nconst CLS_DOWNOVERLAY = 'e-scroll-down-overlay';\nconst OVERLAY_MAXWID$1 = 40;\n/**\n * VScroll module is introduces vertical scroller when content exceeds the current viewing area.\n * It can be useful for the components like Toolbar, Tab which needs vertical scrolling alone.\n * Hidden content can be view by touch moving or icon click.\n * ```html\n * <div id=\"scroll\"/>\n * <script>\n *   var scrollObj = new VScroll();\n *   scrollObj.appendTo(\"#scroll\");\n * </script>\n * ```\n */\nlet VScroll = class VScroll extends Component {\n    /**\n     * Initializes a new instance of the VScroll class.\n     *\n     * @param {VScrollModel} options  - Specifies VScroll model properties as options.\n     * @param {string | HTMLElement} element  - Specifies the element for which vertical scrolling applies.\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        this.browser = Browser.info.name;\n        this.browserCheck = this.browser === 'mozilla';\n        this.isDevice = Browser.isDevice;\n        this.customStep = true;\n        const ele = this.element;\n        this.ieCheck = this.browser === 'edge' || this.browser === 'msie';\n        this.initialize();\n        if (ele.id === '') {\n            ele.id = getUniqueID('vscroll');\n            this.uniqueId = true;\n        }\n        ele.style.display = 'block';\n        if (this.enableRtl) {\n            ele.classList.add(CLS_RTL$1);\n        }\n    }\n    /**\n     * To Initialize the vertical scroll rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.touchModule = new Touch(this.element, { scroll: this.touchHandler.bind(this), swipe: this.swipeHandler.bind(this) });\n        EventHandler.add(this.scrollEle, 'scroll', this.scrollEventHandler, this);\n        if (!this.isDevice) {\n            this.createNavIcon(this.element);\n        }\n        else {\n            this.element.classList.add(CLS_DEVICE$1);\n            this.createOverlayElement(this.element);\n        }\n        this.setScrollState();\n        EventHandler.add(this.element, 'wheel', this.wheelEventHandler, this);\n    }\n    setScrollState() {\n        if (isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {\n            this.scrollStep = this.scrollEle.offsetHeight;\n            this.customStep = false;\n        }\n        else {\n            this.customStep = true;\n        }\n    }\n    initialize() {\n        const scrollCnt = createElement('div', { className: CLS_VSCROLLCON });\n        const scrollBar = createElement('div', { className: CLS_VSCROLLBAR });\n        scrollBar.setAttribute('tabindex', '-1');\n        const ele = this.element;\n        const innerEle = [].slice.call(ele.children);\n        for (const ele of innerEle) {\n            scrollCnt.appendChild(ele);\n        }\n        scrollBar.appendChild(scrollCnt);\n        ele.appendChild(scrollBar);\n        scrollBar.style.overflow = 'hidden';\n        this.scrollEle = scrollBar;\n        this.scrollItems = scrollCnt;\n    }\n    getPersistData() {\n        const keyEntity = ['scrollStep'];\n        return this.addOnPersist(keyEntity);\n    }\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    getModuleName() {\n        return 'vScroll';\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        const el = this.element;\n        el.style.display = '';\n        removeClass([this.element], [CLS_ROOT$1, CLS_DEVICE$1]);\n        const navs = selectAll('.e-' + el.id + '_nav.' + CLS_VSCROLLNAV, el);\n        const overlays = selectAll('.' + CLS_OVERLAY$1, el);\n        [].slice.call(overlays).forEach((ele) => {\n            detach(ele);\n        });\n        for (const elem of [].slice.call(this.scrollItems.children)) {\n            el.appendChild(elem);\n        }\n        if (this.uniqueId) {\n            this.element.removeAttribute('id');\n        }\n        detach(this.scrollEle);\n        if (navs.length > 0) {\n            detach(navs[0]);\n            if (!isNullOrUndefined(navs[1])) {\n                detach(navs[1]);\n            }\n        }\n        EventHandler.remove(this.scrollEle, 'scroll', this.scrollEventHandler);\n        this.touchModule.destroy();\n        this.touchModule = null;\n        super.destroy();\n    }\n    /**\n     * Specifies the value to disable/enable the VScroll component.\n     * When set to `true` , the component will be disabled.\n     *\n     * @param  {boolean} value - Based on this Boolean value, VScroll will be enabled (false) or disabled (true).\n     * @returns {void}.\n     */\n    disable(value) {\n        const navEle = selectAll('.e-scroll-nav:not(.' + CLS_DISABLE$1 + ')', this.element);\n        if (value) {\n            this.element.classList.add(CLS_DISABLE$1);\n        }\n        else {\n            this.element.classList.remove(CLS_DISABLE$1);\n        }\n        [].slice.call(navEle).forEach((el) => {\n            el.setAttribute('tabindex', !value ? '0' : '-1');\n        });\n    }\n    createOverlayElement(element) {\n        const id = element.id.concat('_nav');\n        const downOverlayEle = createElement('div', { className: CLS_OVERLAY$1 + ' ' + CLS_DOWNOVERLAY });\n        const clsDown = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVDOWN);\n        const downEle = createElement('div', { id: id.concat('down'), className: clsDown });\n        const navItem = createElement('div', { className: CLS_NAVDOWNARROW + ' ' + CLS_NAVARROW$1 + ' e-icons' });\n        downEle.appendChild(navItem);\n        const upEle = createElement('div', { className: CLS_OVERLAY$1 + ' ' + CLS_UPOVERLAY });\n        if (this.ieCheck) {\n            downEle.classList.add('e-ie-align');\n        }\n        element.appendChild(downOverlayEle);\n        element.appendChild(downEle);\n        element.insertBefore(upEle, element.firstChild);\n        this.eventBinding([downEle]);\n    }\n    createNavIcon(element) {\n        const id = element.id.concat('_nav');\n        const clsDown = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVDOWN);\n        const nav = createElement('div', { id: id.concat('_down'), className: clsDown });\n        nav.setAttribute('aria-disabled', 'false');\n        const navItem = createElement('div', { className: CLS_NAVDOWNARROW + ' ' + CLS_NAVARROW$1 + ' e-icons' });\n        const clsUp = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVUP);\n        const navElement = createElement('div', { id: id.concat('_up'), className: clsUp + ' ' + CLS_DISABLE$1 });\n        navElement.setAttribute('aria-disabled', 'true');\n        const navUpItem = createElement('div', { className: CLS_NAVUPARROW + ' ' + CLS_NAVARROW$1 + ' e-icons' });\n        navElement.appendChild(navUpItem);\n        nav.appendChild(navItem);\n        nav.setAttribute('tabindex', '0');\n        element.appendChild(nav);\n        element.insertBefore(navElement, element.firstChild);\n        if (this.ieCheck) {\n            nav.classList.add('e-ie-align');\n            navElement.classList.add('e-ie-align');\n        }\n        this.eventBinding([nav, navElement]);\n    }\n    onKeyPress(ev) {\n        if (ev.key === 'Enter') {\n            const timeoutFun = () => {\n                this.keyTimeout = true;\n                this.eleScrolling(10, ev.target, true);\n            };\n            this.keyTimer = window.setTimeout(() => {\n                timeoutFun();\n            }, 100);\n        }\n    }\n    onKeyUp(ev) {\n        if (ev.key !== 'Enter') {\n            return;\n        }\n        if (this.keyTimeout) {\n            this.keyTimeout = false;\n        }\n        else {\n            ev.target.click();\n        }\n        clearTimeout(this.keyTimer);\n    }\n    eventBinding(element) {\n        [].slice.call(element).forEach((ele) => {\n            new Touch(ele, { tapHold: this.tabHoldHandler.bind(this), tapHoldThreshold: 500 });\n            ele.addEventListener('keydown', this.onKeyPress.bind(this));\n            ele.addEventListener('keyup', this.onKeyUp.bind(this));\n            ele.addEventListener('mouseup', this.repeatScroll.bind(this));\n            ele.addEventListener('touchend', this.repeatScroll.bind(this));\n            ele.addEventListener('contextmenu', (e) => {\n                e.preventDefault();\n            });\n            EventHandler.add(ele, 'click', this.clickEventHandler, this);\n        });\n    }\n    repeatScroll() {\n        clearInterval(this.timeout);\n    }\n    tabHoldHandler(ev) {\n        let trgt = ev.originalEvent.target;\n        trgt = this.contains(trgt, CLS_VSCROLLNAV) ? trgt.firstElementChild : trgt;\n        const scrollDistance = 10;\n        const timeoutFun = () => {\n            this.eleScrolling(scrollDistance, trgt, true);\n        };\n        this.timeout = window.setInterval(() => {\n            timeoutFun();\n        }, 50);\n    }\n    contains(element, className) {\n        return element.classList.contains(className);\n    }\n    eleScrolling(scrollDis, trgt, isContinuous) {\n        let classList$$1 = trgt.classList;\n        if (classList$$1.contains(CLS_VSCROLLNAV)) {\n            classList$$1 = trgt.querySelector('.' + CLS_NAVARROW$1).classList;\n        }\n        if (classList$$1.contains(CLS_NAVDOWNARROW)) {\n            this.frameScrollRequest(scrollDis, 'add', isContinuous);\n        }\n        else if (classList$$1.contains(CLS_NAVUPARROW)) {\n            this.frameScrollRequest(scrollDis, '', isContinuous);\n        }\n    }\n    clickEventHandler(event) {\n        this.eleScrolling(this.scrollStep, event.target, false);\n    }\n    wheelEventHandler(e) {\n        e.preventDefault();\n        this.frameScrollRequest(this.scrollStep, (e.deltaY > 0 ? 'add' : ''), false);\n    }\n    swipeHandler(e) {\n        const swipeElement = this.scrollEle;\n        let distance;\n        if (e.velocity <= 1) {\n            distance = e.distanceY / (e.velocity * 10);\n        }\n        else {\n            distance = e.distanceY / e.velocity;\n        }\n        let start = 0.5;\n        const animate = () => {\n            const step = Math.sin(start);\n            if (step <= 0) {\n                window.cancelAnimationFrame(step);\n            }\n            else {\n                if (e.swipeDirection === 'Up') {\n                    swipeElement.scrollTop += distance * step;\n                }\n                else if (e.swipeDirection === 'Down') {\n                    swipeElement.scrollTop -= distance * step;\n                }\n                start -= 0.02;\n                window.requestAnimationFrame(animate);\n            }\n        };\n        animate();\n    }\n    scrollUpdating(scrollVal, action) {\n        if (action === 'add') {\n            this.scrollEle.scrollTop += scrollVal;\n        }\n        else {\n            this.scrollEle.scrollTop -= scrollVal;\n        }\n    }\n    frameScrollRequest(scrollValue, action, isContinuous) {\n        const step = 10;\n        if (isContinuous) {\n            this.scrollUpdating(scrollValue, action);\n            return;\n        }\n        if (!this.customStep) {\n            [].slice.call(selectAll('.' + CLS_OVERLAY$1, this.element)).forEach((el) => {\n                scrollValue -= el.offsetHeight;\n            });\n        }\n        const animate = () => {\n            if (scrollValue < step) {\n                window.cancelAnimationFrame(step);\n            }\n            else {\n                this.scrollUpdating(step, action);\n                scrollValue -= step;\n                window.requestAnimationFrame(animate);\n            }\n        };\n        animate();\n    }\n    touchHandler(e) {\n        const el = this.scrollEle;\n        const distance = e.distanceY;\n        if (e.scrollDirection === 'Up') {\n            el.scrollTop = el.scrollTop + distance;\n        }\n        else if (e.scrollDirection === 'Down') {\n            el.scrollTop = el.scrollTop - distance;\n        }\n    }\n    arrowDisabling(addDisableCls, removeDisableCls) {\n        if (this.isDevice) {\n            const arrowEle = isNullOrUndefined(addDisableCls) ? removeDisableCls : addDisableCls;\n            const arrowIcon = arrowEle.querySelector('.' + CLS_NAVARROW$1);\n            if (isNullOrUndefined(addDisableCls)) {\n                classList(arrowIcon, [CLS_NAVDOWNARROW], [CLS_NAVUPARROW]);\n            }\n            else {\n                classList(arrowIcon, [CLS_NAVUPARROW], [CLS_NAVDOWNARROW]);\n            }\n        }\n        else {\n            addDisableCls.classList.add(CLS_DISABLE$1);\n            addDisableCls.setAttribute('aria-disabled', 'true');\n            addDisableCls.removeAttribute('tabindex');\n            removeDisableCls.classList.remove(CLS_DISABLE$1);\n            removeDisableCls.setAttribute('aria-disabled', 'false');\n            removeDisableCls.setAttribute('tabindex', '0');\n        }\n        this.repeatScroll();\n    }\n    scrollEventHandler(e) {\n        const target = e.target;\n        const height = target.offsetHeight;\n        const navUpEle = this.element.querySelector('.' + CLS_VSCROLLNAVUP);\n        const navDownEle = this.element.querySelector('.' + CLS_VSCROLLNAVDOWN);\n        const upOverlay = this.element.querySelector('.' + CLS_UPOVERLAY);\n        const downOverlay = this.element.querySelector('.' + CLS_DOWNOVERLAY);\n        let scrollTop = target.scrollTop;\n        if (scrollTop <= 0) {\n            scrollTop = -scrollTop;\n        }\n        if (this.isDevice) {\n            if (scrollTop < OVERLAY_MAXWID$1) {\n                upOverlay.style.height = scrollTop + 'px';\n            }\n            else {\n                upOverlay.style.height = '40px';\n            }\n            if ((target.scrollHeight - Math.ceil(height + scrollTop)) < OVERLAY_MAXWID$1) {\n                downOverlay.style.height = (target.scrollHeight - Math.ceil(height + scrollTop)) + 'px';\n            }\n            else {\n                downOverlay.style.height = '40px';\n            }\n        }\n        if (scrollTop === 0) {\n            this.arrowDisabling(navUpEle, navDownEle);\n        }\n        else if (Math.ceil(height + scrollTop + .1) >= target.scrollHeight) {\n            this.arrowDisabling(navDownEle, navUpEle);\n        }\n        else {\n            const disEle = this.element.querySelector('.' + CLS_VSCROLLNAV + '.' + CLS_DISABLE$1);\n            if (disEle) {\n                disEle.classList.remove(CLS_DISABLE$1);\n                disEle.setAttribute('aria-disabled', 'false');\n                disEle.setAttribute('tabindex', '0');\n            }\n        }\n    }\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of property that changed.\n     *\n     * @param  {VScrollModel} newProp - It contains the new value of data.\n     * @param  {VScrollModel} oldProp - It contains the old value of data.\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'scrollStep':\n                    this.setScrollState();\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.element.classList.add(CLS_RTL$1);\n                    }\n                    else {\n                        this.element.classList.remove(CLS_RTL$1);\n                    }\n                    break;\n            }\n        }\n    }\n};\n__decorate$1([\n    Property(null)\n], VScroll.prototype, \"scrollStep\", void 0);\nVScroll = __decorate$1([\n    NotifyPropertyChanges\n], VScroll);\n\n/**\n * Used to add scroll in menu.\n *\n * @param {createElementType} createElement - Specifies the create element model\n * @param {HTMLElement} container - Specifies the element container\n * @param {HTMLElement} content - Specifies the content element\n * @param {string} scrollType - Specifies the scroll type\n * @param {boolean} enableRtl - Specifies the enable RTL property\n * @param {boolean} offset - Specifies the offset value\n * @returns {HTMLElement} - Element\n * @hidden\n */\nfunction addScrolling(createElement$$1, container, content, scrollType, enableRtl, offset) {\n    let containerOffset;\n    let contentOffset;\n    const parentElem = container.parentElement;\n    if (scrollType === 'vscroll') {\n        containerOffset = offset || container.getBoundingClientRect().height;\n        contentOffset = content.getBoundingClientRect().height;\n    }\n    else {\n        containerOffset = container.getBoundingClientRect().width;\n        contentOffset = content.getBoundingClientRect().width;\n    }\n    if (containerOffset < contentOffset) {\n        return createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset);\n    }\n    else if (parentElem) {\n        const width = parentElem.getBoundingClientRect().width;\n        if (width < containerOffset && scrollType === 'hscroll') {\n            contentOffset = width;\n            container.style.maxWidth = width + 'px';\n            return createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset);\n        }\n        return content;\n    }\n    else {\n        return content;\n    }\n}\n/**\n * Used to create scroll bar in menu.\n *\n * @param {createElementType} createElement - Specifies the create element model\n * @param {HTMLElement} container - Specifies the element container\n * @param {HTMLElement} content - Specifies the content element\n * @param {string} scrollType - Specifies the scroll type\n * @param {boolean} enableRtl - Specifies the enable RTL property\n * @param {boolean} offset - Specifies the offset value\n * @returns {HTMLElement} - Element\n * @hidden\n */\nfunction createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset) {\n    const scrollEle = createElement$$1('div', { className: 'e-menu-' + scrollType });\n    container.appendChild(scrollEle);\n    scrollEle.appendChild(content);\n    if (offset) {\n        scrollEle.style.overflow = 'hidden';\n        scrollEle.style.height = offset + 'px';\n    }\n    else {\n        scrollEle.style.maxHeight = container.style.maxHeight;\n        container.style.overflow = 'hidden';\n    }\n    let scrollObj;\n    if (scrollType === 'vscroll') {\n        scrollObj = new VScroll({ enableRtl: enableRtl }, scrollEle);\n        scrollObj.scrollStep = select('.e-' + scrollType + '-bar', container).offsetHeight / 2;\n    }\n    else {\n        scrollObj = new HScroll({ enableRtl: enableRtl }, scrollEle);\n        scrollObj.scrollStep = select('.e-' + scrollType + '-bar', container).offsetWidth;\n    }\n    return scrollEle;\n}\n/**\n * Used to destroy the scroll option.\n *\n * @param {VScroll | HScroll} scrollObj - Specifies the scroller object\n * @param {Element} element - Specifies the element\n * @param {HTMLElement} skipEle - Specifies the skip  element\n * @returns {void}\n * @hidden\n */\nfunction destroyScroll(scrollObj, element, skipEle) {\n    if (scrollObj) {\n        const menu = select('.e-menu-parent', element);\n        if (menu) {\n            if (!skipEle || skipEle === menu) {\n                scrollObj.destroy();\n                element.parentElement.appendChild(menu);\n                detach(element);\n            }\n        }\n        else {\n            scrollObj.destroy();\n            detach(element);\n        }\n    }\n}\n\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst ENTER = 'enter';\nconst ESCAPE = 'escape';\nconst FOCUSED = 'e-focused';\nconst HEADER = 'e-menu-header';\nconst SELECTED = 'e-selected';\nconst SEPARATOR = 'e-separator';\nconst UPARROW = 'uparrow';\nconst DOWNARROW = 'downarrow';\nconst LEFTARROW = 'leftarrow';\nconst RIGHTARROW = 'rightarrow';\nconst HOME = 'home';\nconst END = 'end';\nconst TAB = 'tab';\nconst CARET = 'e-caret';\nconst ITEM = 'e-menu-item';\nconst DISABLED = 'e-disabled';\nconst HIDE = 'e-menu-hide';\nconst ICONS = 'e-icons';\nconst RTL = 'e-rtl';\nconst POPUP = 'e-menu-popup';\nconst TEMPLATE_PROPERTY = 'Template';\n/**\n * Configures the field options of the Menu.\n */\nclass FieldSettings extends ChildProperty {\n}\n__decorate$2([\n    Property('id')\n], FieldSettings.prototype, \"itemId\", void 0);\n__decorate$2([\n    Property('parentId')\n], FieldSettings.prototype, \"parentId\", void 0);\n__decorate$2([\n    Property('text')\n], FieldSettings.prototype, \"text\", void 0);\n__decorate$2([\n    Property('iconCss')\n], FieldSettings.prototype, \"iconCss\", void 0);\n__decorate$2([\n    Property('url')\n], FieldSettings.prototype, \"url\", void 0);\n__decorate$2([\n    Property('separator')\n], FieldSettings.prototype, \"separator\", void 0);\n__decorate$2([\n    Property('items')\n], FieldSettings.prototype, \"children\", void 0);\n/**\n * Specifies menu items.\n */\nclass MenuItem extends ChildProperty {\n}\n__decorate$2([\n    Property(null)\n], MenuItem.prototype, \"iconCss\", void 0);\n__decorate$2([\n    Property('')\n], MenuItem.prototype, \"id\", void 0);\n__decorate$2([\n    Property(false)\n], MenuItem.prototype, \"separator\", void 0);\n__decorate$2([\n    Collection([], MenuItem)\n], MenuItem.prototype, \"items\", void 0);\n__decorate$2([\n    Property('')\n], MenuItem.prototype, \"text\", void 0);\n__decorate$2([\n    Property('')\n], MenuItem.prototype, \"url\", void 0);\n/**\n * Animation configuration settings.\n */\nclass MenuAnimationSettings extends ChildProperty {\n}\n__decorate$2([\n    Property('SlideDown')\n], MenuAnimationSettings.prototype, \"effect\", void 0);\n__decorate$2([\n    Property(400)\n], MenuAnimationSettings.prototype, \"duration\", void 0);\n__decorate$2([\n    Property('ease')\n], MenuAnimationSettings.prototype, \"easing\", void 0);\n/**\n * Base class for Menu and ContextMenu components.\n *\n *  @private\n */\nlet MenuBase = class MenuBase extends Component {\n    /**\n     * Constructor for creating the widget.\n     *\n     * @private\n     * @param {MenuBaseModel} options - Specifies the menu base model\n     * @param {string | HTMLUListElement} element - Specifies the element\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.navIdx = [];\n        this.animation = new Animation({});\n        this.isTapHold = false;\n        this.tempItem = [];\n        this.showSubMenuOn = 'Auto';\n    }\n    /**\n     * Initialized third party configuration settings.\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        if (!this.isMenu) {\n            let ul;\n            if (this.element.tagName === 'EJS-CONTEXTMENU') {\n                ul = this.createElement('ul', {\n                    id: getUniqueID(this.getModuleName()), className: 'e-control e-lib e-' + this.getModuleName()\n                });\n                const ejInst = getValue('ej2_instances', this.element);\n                removeClass([this.element], ['e-control', 'e-lib', 'e-' + this.getModuleName()]);\n                this.clonedElement = this.element;\n                this.element = ul;\n                setValue('ej2_instances', ejInst, this.element);\n            }\n            else {\n                ul = this.createElement('ul', { id: getUniqueID(this.getModuleName()) });\n                append([].slice.call(this.element.cloneNode(true).children), ul);\n                const refEle = this.element.nextElementSibling;\n                if (refEle) {\n                    this.element.parentElement.insertBefore(ul, refEle);\n                }\n                else {\n                    this.element.parentElement.appendChild(ul);\n                }\n                this.clonedElement = ul;\n            }\n            this.clonedElement.style.display = 'none';\n        }\n        if (this.element.tagName === 'EJS-MENU') {\n            let ele = this.element;\n            const ejInstance = getValue('ej2_instances', ele);\n            const ul = this.createElement('ul');\n            const wrapper = this.createElement('EJS-MENU', { className: 'e-' + this.getModuleName() + '-wrapper' });\n            for (let idx = 0, len = ele.attributes.length; idx < len; idx++) {\n                ul.setAttribute(ele.attributes[idx].nodeName, ele.attributes[idx].nodeValue);\n            }\n            ele.parentNode.insertBefore(wrapper, ele);\n            detach(ele);\n            ele = ul;\n            wrapper.appendChild(ele);\n            setValue('ej2_instances', ejInstance, ele);\n            this.clonedElement = wrapper;\n            this.element = ele;\n            if (!this.element.id) {\n                this.element.id = getUniqueID(this.getModuleName());\n            }\n        }\n    }\n    /**\n     * Initialize the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.initialize();\n        this.renderItems();\n        this.wireEvents();\n        this.renderComplete();\n        const wrapper = this.getWrapper();\n        if (this.template && this.enableScrolling && (this.isReact || this.isAngular)) {\n            requestAnimationFrame(() => {\n                addScrolling(this.createElement, wrapper, this.element, 'hscroll', this.enableRtl);\n            });\n        }\n    }\n    initialize() {\n        let wrapper = this.getWrapper();\n        if (!wrapper) {\n            wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-wrapper' });\n            if (this.isMenu) {\n                this.element.parentElement.insertBefore(wrapper, this.element);\n            }\n            else {\n                document.body.appendChild(wrapper);\n            }\n        }\n        if (this.cssClass) {\n            addClass([wrapper], this.cssClass.split(' '));\n        }\n        if (this.enableRtl) {\n            wrapper.classList.add(RTL);\n        }\n        wrapper.appendChild(this.element);\n        if (this.isMenu && this.hamburgerMode) {\n            if (!this.target) {\n                this.createHeaderContainer(wrapper);\n            }\n        }\n        this.defaultOption = this.showItemOnClick;\n    }\n    renderItems() {\n        if (!this.items.length) {\n            const items = ListBase.createJsonFromElement(this.element, { fields: { child: 'items' } });\n            this.setProperties({ items: items }, true);\n            if (isBlazor() && !this.isMenu) {\n                this.element = this.removeChildElement(this.element);\n            }\n            else {\n                this.element.innerHTML = '';\n            }\n        }\n        const ul = this.createItems(this.items);\n        append(Array.prototype.slice.call(ul.children), this.element);\n        this.element.classList.add('e-menu-parent');\n        if (this.isMenu) {\n            if (!this.hamburgerMode && this.element.classList.contains('e-vertical')) {\n                this.setBlankIconStyle(this.element);\n            }\n            if (this.enableScrolling) {\n                const wrapper = this.getWrapper();\n                if (this.element.classList.contains('e-vertical')) {\n                    addScrolling(this.createElement, wrapper, this.element, 'vscroll', this.enableRtl);\n                }\n                else {\n                    addScrolling(this.createElement, wrapper, this.element, 'hscroll', this.enableRtl);\n                }\n            }\n        }\n    }\n    wireEvents() {\n        const wrapper = this.getWrapper();\n        if (this.target) {\n            let target;\n            const targetElems = selectAll(this.target);\n            for (let i = 0, len = targetElems.length; i < len; i++) {\n                target = targetElems[i];\n                if (this.isMenu) {\n                    EventHandler.add(target, 'click', this.menuHeaderClickHandler, this);\n                }\n                else {\n                    if (Browser.isIos) {\n                        new Touch(target, { tapHold: this.touchHandler.bind(this) });\n                    }\n                    else {\n                        EventHandler.add(target, 'contextmenu', this.cmenuHandler, this);\n                    }\n                }\n            }\n            this.targetElement = target;\n            if (!this.isMenu) {\n                EventHandler.add(this.targetElement, 'scroll', this.scrollHandler, this);\n                for (const parent of getScrollableParent(this.targetElement)) {\n                    EventHandler.add(parent, 'scroll', this.scrollHandler, this);\n                }\n            }\n        }\n        if (!Browser.isDevice) {\n            this.delegateMoverHandler = this.moverHandler.bind(this);\n            this.delegateMouseDownHandler = this.mouseDownHandler.bind(this);\n            EventHandler.add(this.isMenu ? document : wrapper, 'mouseover', this.delegateMoverHandler, this);\n            EventHandler.add(document, 'mousedown', this.delegateMouseDownHandler, this);\n        }\n        this.delegateClickHandler = this.clickHandler.bind(this);\n        EventHandler.add(document, 'click', this.delegateClickHandler, this);\n        this.wireKeyboardEvent(wrapper);\n        this.rippleFn = rippleEffect(wrapper, { selector: '.' + ITEM });\n    }\n    wireKeyboardEvent(element) {\n        const keyConfigs = {\n            downarrow: DOWNARROW,\n            uparrow: UPARROW,\n            enter: ENTER,\n            leftarrow: LEFTARROW,\n            rightarrow: RIGHTARROW,\n            escape: ESCAPE\n        };\n        if (this.isMenu) {\n            keyConfigs.home = HOME;\n            keyConfigs.end = END;\n            keyConfigs.tab = TAB;\n        }\n        new KeyboardEvents(element, {\n            keyAction: this.keyBoardHandler.bind(this),\n            keyConfigs: keyConfigs\n        });\n    }\n    mouseDownHandler(e) {\n        if (closest(e.target, '.e-' + this.getModuleName() + '-wrapper') !== this.getWrapper()\n            && (!closest(e.target, '.e-' + this.getModuleName() + '-popup'))) {\n            this.closeMenu(this.isMenu ? null : this.navIdx.length, e);\n        }\n    }\n    keyBoardHandler(e) {\n        let actionName = '';\n        const trgt = e.target;\n        let actionNeeded = this.isMenu && !this.hamburgerMode && !this.element.classList.contains('e-vertical')\n            && this.navIdx.length < 1;\n        e.preventDefault();\n        if (this.enableScrolling && e.keyCode === 13 && trgt.classList.contains('e-scroll-nav')) {\n            this.removeLIStateByClass([FOCUSED, SELECTED], [closest(trgt, '.e-' + this.getModuleName() + '-wrapper')]);\n        }\n        if (actionNeeded) {\n            switch (e.action) {\n                case RIGHTARROW:\n                    actionName = RIGHTARROW;\n                    e.action = DOWNARROW;\n                    break;\n                case LEFTARROW:\n                    actionName = LEFTARROW;\n                    e.action = UPARROW;\n                    break;\n                case DOWNARROW:\n                    actionName = DOWNARROW;\n                    e.action = RIGHTARROW;\n                    break;\n                case UPARROW:\n                    actionName = UPARROW;\n                    e.action = '';\n                    break;\n            }\n        }\n        else if (this.enableRtl) {\n            switch (e.action) {\n                case LEFTARROW:\n                    actionNeeded = true;\n                    actionName = LEFTARROW;\n                    e.action = RIGHTARROW;\n                    break;\n                case RIGHTARROW:\n                    actionNeeded = true;\n                    actionName = RIGHTARROW;\n                    e.action = LEFTARROW;\n                    break;\n            }\n        }\n        switch (e.action) {\n            case DOWNARROW:\n            case UPARROW:\n            case END:\n            case HOME:\n            case TAB:\n                this.upDownKeyHandler(e);\n                break;\n            case RIGHTARROW:\n                this.rightEnterKeyHandler(e);\n                break;\n            case LEFTARROW:\n                this.leftEscKeyHandler(e);\n                break;\n            case ENTER:\n                if (this.hamburgerMode && trgt.tagName === 'SPAN' && trgt.classList.contains('e-menu-icon')) {\n                    this.menuHeaderClickHandler(e);\n                }\n                else {\n                    this.rightEnterKeyHandler(e);\n                }\n                break;\n            case ESCAPE:\n                this.leftEscKeyHandler(e);\n                break;\n        }\n        if (actionNeeded) {\n            e.action = actionName;\n        }\n    }\n    upDownKeyHandler(e) {\n        const cul = this.getUlByNavIdx();\n        const defaultIdx = (e.action === DOWNARROW || e.action === HOME || e.action === TAB) ? 0 : cul.childElementCount - 1;\n        let fliIdx = defaultIdx;\n        const fli = this.getLIByClass(cul, FOCUSED);\n        if (fli) {\n            if (e.action !== END && e.action !== HOME) {\n                fliIdx = this.getIdx(cul, fli);\n            }\n            fli.classList.remove(FOCUSED);\n            if (e.action !== END && e.action !== HOME) {\n                if (e.action === DOWNARROW) {\n                    fliIdx++;\n                }\n                else {\n                    fliIdx--;\n                }\n                if (fliIdx === (e.action === DOWNARROW ? cul.childElementCount : -1)) {\n                    fliIdx = defaultIdx;\n                }\n            }\n        }\n        const cli = cul.children[fliIdx];\n        fliIdx = this.isValidLI(cli, fliIdx, e.action);\n        cul.children[fliIdx].classList.add(FOCUSED);\n        cul.children[fliIdx].focus();\n    }\n    isValidLI(cli, index, action) {\n        const cul = this.getUlByNavIdx();\n        if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {\n            if ((action === DOWNARROW) || (action === RIGHTARROW)) {\n                index++;\n            }\n            else {\n                index--;\n            }\n        }\n        cli = cul.children[index];\n        if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {\n            index = this.isValidLI(cli, index, action);\n        }\n        return index;\n    }\n    getUlByNavIdx(navIdxLen = this.navIdx.length) {\n        if (this.isMenu) {\n            const popup = [this.getWrapper()].concat([].slice.call(selectAll('.' + POPUP)))[navIdxLen];\n            return isNullOrUndefined(popup) ? null : select('.e-menu-parent', popup);\n        }\n        else {\n            return this.getWrapper().children[navIdxLen];\n        }\n    }\n    rightEnterKeyHandler(e) {\n        let eventArgs;\n        const cul = this.getUlByNavIdx();\n        const fli = this.getLIByClass(cul, FOCUSED);\n        if (fli) {\n            const fliIdx = this.getIdx(cul, fli);\n            const navIdx = this.navIdx.concat(fliIdx);\n            const item = this.getItem(navIdx);\n            if (item.items.length) {\n                this.navIdx.push(fliIdx);\n                this.keyType = 'right';\n                this.action = e.action;\n                this.openMenu(fli, item, -1, -1, e);\n            }\n            else {\n                if (e.action === ENTER) {\n                    if (this.isMenu && this.navIdx.length === 0) {\n                        this.removeLIStateByClass([SELECTED], [this.getWrapper()]);\n                    }\n                    else {\n                        fli.classList.remove(FOCUSED);\n                    }\n                    fli.classList.add(SELECTED);\n                    eventArgs = { element: fli, item: item, event: e };\n                    this.trigger('select', eventArgs);\n                    this.closeMenu(null, e);\n                }\n            }\n        }\n    }\n    leftEscKeyHandler(e) {\n        if (this.navIdx.length) {\n            this.keyType = 'left';\n            this.closeMenu(this.navIdx.length, e);\n        }\n        else {\n            if (e.action === ESCAPE) {\n                this.closeMenu(null, e);\n            }\n        }\n    }\n    scrollHandler(e) {\n        this.closeMenu(null, e);\n    }\n    touchHandler(e) {\n        this.isTapHold = true;\n        this.cmenuHandler(e.originalEvent);\n    }\n    cmenuHandler(e) {\n        e.preventDefault();\n        this.isCMenu = true;\n        this.pageX = e.changedTouches ? e.changedTouches[0].pageX + 1 : e.pageX + 1;\n        this.pageY = e.changedTouches ? e.changedTouches[0].pageY + 1 : e.pageY + 1;\n        this.closeMenu(null, e);\n        if (this.isCMenu) {\n            if (this.canOpen(e.target)) {\n                this.openMenu(null, null, this.pageY, this.pageX, e);\n            }\n            this.isCMenu = false;\n        }\n    }\n    // eslint:disable-next-line:max-func-body-length\n    closeMenu(ulIndex = 0, e = null, isIterated) {\n        if (this.isMenuVisible()) {\n            let sli;\n            let item;\n            const wrapper = this.getWrapper();\n            let beforeCloseArgs;\n            let items;\n            const popups = this.getPopups();\n            let isClose = false;\n            const cnt = this.isMenu ? popups.length + 1 : wrapper.childElementCount;\n            const ul = this.isMenu && cnt !== 1 ? select('.e-ul', popups[cnt - 2])\n                : selectAll('.e-menu-parent', wrapper)[cnt - 1];\n            if (this.isMenu && ul.classList.contains('e-menu')) {\n                sli = this.getLIByClass(ul, SELECTED);\n                if (sli) {\n                    sli.classList.remove(SELECTED);\n                }\n                isClose = true;\n            }\n            if (!isClose) {\n                const liElem = e && e.target && this.getLI(e.target);\n                if (liElem) {\n                    this.cli = liElem;\n                }\n                else {\n                    this.cli = ul.children[0];\n                }\n                item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n                items = item ? item.items : this.items;\n                beforeCloseArgs = { element: ul, parentItem: item, items: items, event: e, cancel: false, isFocused: true };\n                this.trigger('beforeClose', beforeCloseArgs, (observedCloseArgs) => {\n                    let popupEle;\n                    let closeArgs;\n                    let popupId = '';\n                    let popupObj;\n                    const isOpen = !observedCloseArgs.cancel;\n                    if (isOpen || this.isCMenu) {\n                        if (this.isMenu) {\n                            popupEle = closest(ul, '.' + POPUP);\n                            if (this.hamburgerMode) {\n                                popupEle.parentElement.style.minHeight = '';\n                                closest(ul, '.e-menu-item').setAttribute('aria-expanded', 'false');\n                            }\n                            this.unWireKeyboardEvent(popupEle);\n                            destroyScroll(getInstance(popupEle.children[0], VScroll), popupEle.children[0]);\n                            popupObj = getInstance(popupEle, Popup);\n                            popupObj.hide();\n                            popupId = popupEle.id;\n                            popupObj.destroy();\n                            detach(popupEle);\n                        }\n                        else {\n                            this.toggleAnimation(ul, false);\n                        }\n                        closeArgs = { element: ul, parentItem: item, items: items };\n                        this.trigger('onClose', closeArgs);\n                        this.navIdx.pop();\n                    }\n                    this.updateReactTemplate();\n                    let trgtliId;\n                    let closedLi;\n                    let trgtLi;\n                    const trgtpopUp = this.getWrapper() && this.getUlByNavIdx();\n                    if (this.isCMenu) {\n                        if (this.canOpen(e.target)) {\n                            this.openMenu(null, null, this.pageY, this.pageX, e);\n                        }\n                        this.isCMenu = false;\n                    }\n                    if (this.isMenu && trgtpopUp && popupId.length) {\n                        trgtliId = new RegExp('(.*)-ej2menu-' + this.element.id + '-popup').exec(popupId)[1];\n                        closedLi = trgtpopUp.querySelector('[id=\"' + trgtliId + '\"]');\n                        trgtLi = (liElem && trgtpopUp.querySelector('[id=\"' + liElem.id + '\"]'));\n                    }\n                    const submenus = liElem && liElem.querySelectorAll('.e-menu-item');\n                    if (isOpen && this.hamburgerMode && ulIndex && !(submenus.length)) {\n                        this.afterCloseMenu(e);\n                    }\n                    else if (isOpen && !this.hamburgerMode && this.navIdx.length && closedLi && !trgtLi && this.keyType !== \"left\") {\n                        let ele = (e && e.target.classList.contains('e-vscroll'))\n                            ? closest(e.target, '.e-menu-wrapper') : null;\n                        if (ele) {\n                            ele = ele.querySelector('.e-menu-item');\n                            if (this.showItemOnClick || (ele && this.getIndex(ele.id, true).length <= this.navIdx.length)) {\n                                this.closeMenu(this.navIdx[this.navIdx.length - 1], e, true);\n                            }\n                        }\n                        else {\n                            this.closeMenu(this.navIdx[this.navIdx.length - 1], e);\n                        }\n                    }\n                    else if (isOpen && !isIterated && !ulIndex && ((this.hamburgerMode && this.navIdx.length) ||\n                        this.navIdx.length === 1)) {\n                        this.closeMenu(null, e);\n                    }\n                    else if (isOpen && isNullOrUndefined(ulIndex) && this.navIdx.length) {\n                        this.closeMenu(null, e);\n                    }\n                    else if (isOpen && !this.isMenu && !ulIndex && this.navIdx.length === 0 && !this.isMenusClosed) {\n                        this.isMenusClosed = true;\n                        this.closeMenu(0, e);\n                    }\n                    else if (isOpen && this.isMenu && e && e.target &&\n                        this.navIdx.length !== 0 && closest(e.target, '.e-menu-parent.e-control')) {\n                        this.closeMenu(0, e);\n                    }\n                    else if (isOpen && !this.isMenu && selectAll('.e-menu-parent', wrapper)[ulIndex - 1] && e.which === 3) {\n                        this.closeMenu(null, e);\n                    }\n                    else {\n                        if (isOpen && (this.keyType === 'right' || this.keyType === 'click')) {\n                            this.afterCloseMenu(e);\n                        }\n                        else {\n                            const cul = this.getUlByNavIdx();\n                            const sli = this.getLIByClass(cul, SELECTED);\n                            if (sli) {\n                                sli.setAttribute('aria-expanded', 'false');\n                                sli.classList.remove(SELECTED);\n                                if (observedCloseArgs.isFocused && liElem || this.keyType === \"left\") {\n                                    sli.classList.add(FOCUSED);\n                                    sli.focus();\n                                }\n                            }\n                            if (!isOpen && this.hamburgerMode && liElem && liElem.getAttribute('aria-expanded') === 'false' &&\n                                liElem.getAttribute('aria-haspopup') === 'true') {\n                                if (closest(liElem, '.e-menu-parent.e-control')) {\n                                    this.navIdx = [];\n                                }\n                                else {\n                                    this.navIdx.pop();\n                                }\n                                this.navIdx.push(this.cliIdx);\n                                const item = this.getItem(this.navIdx);\n                                liElem.setAttribute('aria-expanded', 'true');\n                                this.openMenu(liElem, item, -1, -1, e);\n                            }\n                        }\n                        if (this.navIdx.length < 1) {\n                            if (this.showSubMenuOn === 'Hover' || this.showSubMenuOn === 'Click') {\n                                this.showItemOnClick = this.defaultOption;\n                                this.showSubMenuOn = 'Auto';\n                            }\n                        }\n                    }\n                    this.removeStateWrapper();\n                });\n            }\n        }\n    }\n    updateReactTemplate() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact && this.template && this.navIdx.length === 0) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const portals = this.portals.splice(0, this.items.length);\n            this.clearTemplate(['template']);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.portals = portals;\n            this.renderReactTemplates();\n        }\n    }\n    getMenuItemModel(item, level) {\n        if (isNullOrUndefined(item)) {\n            return null;\n        }\n        if (isNullOrUndefined(level)) {\n            level = 0;\n        }\n        const fields = this.getFields(level);\n        return { text: item[fields.text], id: item[fields.id], items: item[fields.child], separator: item[fields.separator],\n            iconCss: item[fields.iconCss], url: item[fields.url] };\n    }\n    getPopups() {\n        const popups = [];\n        [].slice.call(document.querySelectorAll('.' + POPUP)).forEach((elem) => {\n            if (!isNullOrUndefined(elem.querySelector('.' + ITEM)) && this.getIndex(elem.querySelector('.' + ITEM).id, true).length) {\n                popups.push(elem);\n            }\n        });\n        return popups;\n    }\n    isMenuVisible() {\n        return (this.navIdx.length > 0 || (this.element.classList.contains('e-contextmenu') && isVisible(this.element).valueOf()));\n    }\n    canOpen(target) {\n        let canOpen = true;\n        if (this.filter) {\n            canOpen = false;\n            const filter = this.filter.split(' ');\n            for (let i = 0, len = filter.length; i < len; i++) {\n                if (closest(target, '.' + filter[i])) {\n                    canOpen = true;\n                    break;\n                }\n            }\n        }\n        return canOpen;\n    }\n    openMenu(li, item, top = 0, left = 0, e = null, target = this.targetElement) {\n        const wrapper = this.getWrapper();\n        this.lItem = li;\n        const elemId = this.element.id !== '' ? this.element.id : 'menu';\n        this.isMenusClosed = false;\n        if (isNullOrUndefined(top)) {\n            top = -1;\n        }\n        if (isNullOrUndefined(left)) {\n            left = -1;\n        }\n        if (li) {\n            this.uList = this.createItems(item[this.getField('children', this.navIdx.length - 1)]);\n            if (!this.isMenu && Browser.isDevice) {\n                wrapper.lastChild.style.display = 'none';\n                const data = {\n                    text: item[this.getField('text')].toString(), iconCss: ICONS + ' e-previous'\n                };\n                const hdata = new MenuItem(this.items[0], 'items', data, true);\n                const hli = this.createItems([hdata]).children[0];\n                hli.classList.add(HEADER);\n                this.uList.insertBefore(hli, this.uList.children[0]);\n            }\n            if (this.isMenu) {\n                this.popupWrapper = this.createElement('div', {\n                    className: 'e-' + this.getModuleName() + '-wrapper ' + POPUP, id: li.id + '-ej2menu-' + elemId + '-popup'\n                });\n                if (this.hamburgerMode) {\n                    top = li.offsetHeight;\n                    li.appendChild(this.popupWrapper);\n                }\n                else {\n                    document.body.appendChild(this.popupWrapper);\n                }\n                this.isNestedOrVertical = this.element.classList.contains('e-vertical') || this.navIdx.length !== 1;\n                this.popupObj = this.generatePopup(this.popupWrapper, this.uList, li, this.isNestedOrVertical);\n                if (this.template) {\n                    this.renderReactTemplates();\n                }\n                if (this.hamburgerMode) {\n                    this.calculateIndentSize(this.uList, li);\n                }\n                else {\n                    if (this.cssClass) {\n                        addClass([this.popupWrapper], this.cssClass.split(' '));\n                    }\n                    this.popupObj.hide();\n                }\n                if (!this.hamburgerMode && !this.showItemOnClick && this.hoverDelay) {\n                    window.clearInterval(this.timer);\n                    this.timer = window.setTimeout(() => { this.triggerBeforeOpen(li, this.uList, item, e, 0, 0, 'menu'); }, this.hoverDelay);\n                }\n                else {\n                    this.triggerBeforeOpen(li, this.uList, item, e, 0, 0, 'menu');\n                }\n            }\n            else {\n                this.uList.style.zIndex = this.element.style.zIndex;\n                wrapper.appendChild(this.uList);\n                if (!this.showItemOnClick && this.hoverDelay) {\n                    window.clearInterval(this.timer);\n                    this.timer = window.setTimeout(() => { this.triggerBeforeOpen(li, this.uList, item, e, top, left, 'none'); }, this.hoverDelay);\n                }\n                else {\n                    this.triggerBeforeOpen(li, this.uList, item, e, top, left, 'none');\n                }\n            }\n        }\n        else {\n            this.uList = this.element;\n            this.uList.style.zIndex = getZindexPartial(target ? target : this.element).toString();\n            this.triggerBeforeOpen(li, this.uList, item, e, top, left, 'none');\n        }\n    }\n    calculateIndentSize(ul, li) {\n        const liStyle = getComputedStyle(li);\n        let liIndent = parseInt(liStyle.textIndent, 10);\n        if (this.navIdx.length < 2 && !li.classList.contains('e-blankicon')) {\n            liIndent *= 2;\n        }\n        else {\n            liIndent += (liIndent / 4);\n        }\n        ul.style.textIndent = liIndent + 'px';\n        const blankIconElem = ul.querySelectorAll('.e-blankicon');\n        if (blankIconElem && blankIconElem.length) {\n            const menuIconElem = ul.querySelector('.e-menu-icon');\n            const menuIconElemStyle = getComputedStyle(menuIconElem);\n            const blankIconIndent = (parseInt(menuIconElemStyle.marginRight, 10) + menuIconElem.offsetWidth + liIndent);\n            for (let i = 0; i < blankIconElem.length; i++) {\n                blankIconElem[i].style.textIndent = blankIconIndent + 'px';\n            }\n        }\n    }\n    generatePopup(popupWrapper, ul, li, isNestedOrVertical) {\n        const popupObj = new Popup(popupWrapper, {\n            actionOnScroll: this.hamburgerMode ? 'none' : 'reposition',\n            relateTo: li,\n            collision: this.hamburgerMode ? { X: 'none', Y: 'none' } : { X: isNestedOrVertical ||\n                    this.enableRtl ? 'none' : 'flip', Y: 'fit' },\n            position: (isNestedOrVertical && !this.hamburgerMode) ? { X: 'right', Y: 'top' } : { X: 'left', Y: 'bottom' },\n            targetType: 'relative',\n            enableRtl: this.enableRtl,\n            content: ul,\n            open: () => {\n                const scrollEle = select('.e-menu-vscroll', popupObj.element);\n                if (scrollEle) {\n                    scrollEle.style.height = 'inherit';\n                    scrollEle.style.maxHeight = '';\n                }\n                const ul = select('.e-ul', popupObj.element);\n                popupObj.element.style.maxHeight = '';\n                ul.focus();\n                this.triggerOpen(ul);\n            }\n        });\n        return popupObj;\n    }\n    createHeaderContainer(wrapper) {\n        wrapper = wrapper || this.getWrapper();\n        const spanElem = this.createElement('span', { className: 'e-' + this.getModuleName() + '-header' });\n        const tempTitle = (this.enableHtmlSanitizer) ? SanitizeHtmlHelper.sanitize(this.title) : this.title;\n        const spanTitle = this.createElement('span', {\n            className: 'e-' + this.getModuleName() + '-title', innerHTML: tempTitle\n        });\n        const spanIcon = this.createElement('span', {\n            className: 'e-icons e-' + this.getModuleName() + '-icon', attrs: { 'tabindex': '0' }\n        });\n        spanElem.appendChild(spanTitle);\n        spanElem.appendChild(spanIcon);\n        wrapper.insertBefore(spanElem, this.element);\n    }\n    openHamburgerMenu(e) {\n        if (this.hamburgerMode) {\n            this.triggerBeforeOpen(null, this.element, null, e, 0, 0, 'hamburger');\n        }\n    }\n    closeHamburgerMenu(e) {\n        const beforeCloseArgs = { element: this.element, parentItem: null, event: e,\n            items: this.items, cancel: false };\n        this.trigger('beforeClose', beforeCloseArgs, (observedHamburgerCloseArgs) => {\n            if (!observedHamburgerCloseArgs.cancel) {\n                this.closeMenu(null, e);\n                this.element.classList.add('e-hide-menu');\n                this.trigger('onClose', { element: this.element, parentItem: null, items: this.items });\n            }\n        });\n    }\n    callFit(element, x, y, top, left) {\n        return fit(element, null, { X: x, Y: y }, { top: top, left: left });\n    }\n    triggerBeforeOpen(li, ul, item, e, top, left, type) {\n        const items = li ? item[this.getField('children', this.navIdx.length - 1)] : this.items;\n        const eventArgs = {\n            element: ul, items: items, parentItem: item, event: e, cancel: false, top: top, left: left, showSubMenuOn: 'Auto'\n        };\n        const menuType = type;\n        this.trigger('beforeOpen', eventArgs, (observedOpenArgs) => {\n            switch (menuType) {\n                case 'menu':\n                    if (!this.hamburgerMode) {\n                        if (observedOpenArgs.showSubMenuOn !== 'Auto') {\n                            this.showItemOnClick = !this.defaultOption;\n                            this.showSubMenuOn = observedOpenArgs.showSubMenuOn;\n                        }\n                        this.top = observedOpenArgs.top;\n                        this.left = observedOpenArgs.left;\n                    }\n                    this.popupWrapper.style.display = 'block';\n                    if (!this.hamburgerMode) {\n                        this.popupWrapper.style.maxHeight = this.popupWrapper.getBoundingClientRect().height + 'px';\n                        if (this.enableScrolling) {\n                            addScrolling(this.createElement, this.popupWrapper, this.uList, 'vscroll', this.enableRtl);\n                        }\n                        this.checkScrollOffset(e);\n                    }\n                    if (!this.hamburgerMode && !this.left && !this.top) {\n                        this.popupObj.refreshPosition(this.lItem, true);\n                        this.left = parseInt(this.popupWrapper.style.left, 10);\n                        this.top = parseInt(this.popupWrapper.style.top, 10);\n                        if (this.enableRtl) {\n                            this.left =\n                                this.isNestedOrVertical ? this.left - this.popupWrapper.offsetWidth - this.lItem.parentElement.offsetWidth + 2\n                                    : this.left - this.popupWrapper.offsetWidth + this.lItem.offsetWidth;\n                        }\n                        if (this.template && (this.isReact || this.isAngular)) {\n                            requestAnimationFrame(() => {\n                                this.collision();\n                                this.popupWrapper.style.display = '';\n                            });\n                        }\n                        else {\n                            this.collision();\n                            this.popupWrapper.style.display = '';\n                        }\n                    }\n                    else {\n                        this.popupObj.collision = { X: 'none', Y: 'none' };\n                        this.popupWrapper.style.display = '';\n                    }\n                    break;\n                case 'none':\n                    this.top = observedOpenArgs.top;\n                    this.left = observedOpenArgs.left;\n                    break;\n                case 'hamburger':\n                    if (!observedOpenArgs.cancel) {\n                        this.element.classList.remove('e-hide-menu');\n                        this.triggerOpen(this.element);\n                    }\n                    break;\n            }\n            if (menuType !== 'hamburger') {\n                if (observedOpenArgs.cancel) {\n                    if (this.isMenu) {\n                        this.popupObj.destroy();\n                        detach(this.popupWrapper);\n                    }\n                    else if (ul.className.indexOf('e-ul') > -1) {\n                        detach(ul);\n                    }\n                    this.navIdx.pop();\n                }\n                else {\n                    if (this.isMenu) {\n                        if (this.hamburgerMode) {\n                            this.popupWrapper.style.top = this.top + 'px';\n                            this.popupWrapper.style.left = 0 + 'px';\n                            this.toggleAnimation(this.popupWrapper);\n                        }\n                        else {\n                            this.setBlankIconStyle(this.popupWrapper);\n                            this.wireKeyboardEvent(this.popupWrapper);\n                            rippleEffect(this.popupWrapper, { selector: '.' + ITEM });\n                            this.popupWrapper.style.left = this.left + 'px';\n                            this.popupWrapper.style.top = this.top + 'px';\n                            const animationOptions = this.animationSettings.effect !== 'None' ? {\n                                name: this.animationSettings.effect, duration: this.animationSettings.duration,\n                                timingFunction: this.animationSettings.easing\n                            } : null;\n                            this.popupObj.show(animationOptions, this.lItem);\n                        }\n                    }\n                    else {\n                        this.setBlankIconStyle(this.uList);\n                        this.setPosition(this.lItem, this.uList, this.top, this.left);\n                        this.toggleAnimation(this.uList);\n                    }\n                }\n            }\n            if (this.keyType === 'right') {\n                let cul = this.getUlByNavIdx();\n                li.classList.remove(FOCUSED);\n                if (this.isMenu && this.navIdx.length === 1) {\n                    this.removeLIStateByClass([SELECTED], [this.getWrapper()]);\n                }\n                li.classList.add(SELECTED);\n                if (this.action === ENTER) {\n                    const eventArgs = { element: li, item: item, event: e };\n                    this.trigger('select', eventArgs);\n                }\n                li.focus();\n                cul = this.getUlByNavIdx();\n                const index = this.isValidLI(cul.children[0], 0, this.action);\n                cul.children[index].classList.add(FOCUSED);\n                cul.children[index].focus();\n            }\n        });\n    }\n    collision() {\n        let collide;\n        collide = isCollide(this.popupWrapper, null, this.left, this.top);\n        if ((this.isNestedOrVertical || this.enableRtl) && (collide.indexOf('right') > -1\n            || collide.indexOf('left') > -1)) {\n            this.popupObj.collision.X = 'none';\n            const offWidth = closest(this.lItem, '.e-' + this.getModuleName() + '-wrapper').offsetWidth;\n            this.left =\n                this.enableRtl ? calculatePosition(this.lItem, this.isNestedOrVertical ? 'right' : 'left', 'top').left\n                    : this.left - this.popupWrapper.offsetWidth - offWidth + 2;\n        }\n        collide = isCollide(this.popupWrapper, null, this.left, this.top);\n        if (collide.indexOf('left') > -1 || collide.indexOf('right') > -1) {\n            this.left = this.callFit(this.popupWrapper, true, false, this.top, this.left).left;\n        }\n        this.popupWrapper.style.left = this.left + 'px';\n    }\n    setBlankIconStyle(menu) {\n        const blankIconList = [].slice.call(menu.getElementsByClassName('e-blankicon'));\n        if (!blankIconList.length) {\n            return;\n        }\n        const iconLi = menu.querySelector('.e-menu-item:not(.e-blankicon):not(.e-separator)');\n        const icon = iconLi.querySelector('.e-menu-icon');\n        if (!icon) {\n            return;\n        }\n        const cssProp = this.enableRtl ? { padding: 'paddingRight', margin: 'marginLeft' } :\n            { padding: 'paddingLeft', margin: 'marginRight' };\n        const iconCssProps = getComputedStyle(icon);\n        let iconSize = parseInt(iconCssProps.fontSize, 10);\n        if (!!parseInt(iconCssProps.width, 10) && parseInt(iconCssProps.width, 10) > iconSize) {\n            iconSize = parseInt(iconCssProps.width, 10);\n        }\n        // eslint:disable\n        const size = `${iconSize + parseInt(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        iconCssProps[cssProp.margin], 10) + parseInt(getComputedStyle(iconLi)[cssProp.padding], 10)}px`;\n        blankIconList.forEach((li) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            li.style[cssProp.padding] = size;\n        });\n        // eslint:enable\n    }\n    checkScrollOffset(e) {\n        const wrapper = this.getWrapper();\n        if (wrapper.children[0].classList.contains('e-menu-hscroll') && this.navIdx.length === 1) {\n            const trgt = isNullOrUndefined(e) ? this.element : closest(e.target, '.' + ITEM);\n            const offsetEle = select('.e-hscroll-bar', wrapper);\n            if (offsetEle.scrollLeft > trgt.offsetLeft) {\n                offsetEle.scrollLeft -= (offsetEle.scrollLeft - trgt.offsetLeft);\n            }\n            const offsetLeft = offsetEle.scrollLeft + offsetEle.offsetWidth;\n            const offsetRight = trgt.offsetLeft + trgt.offsetWidth;\n            if (offsetLeft < offsetRight) {\n                offsetEle.scrollLeft += (offsetRight - offsetLeft);\n            }\n        }\n    }\n    setPosition(li, ul, top, left) {\n        const px = 'px';\n        this.toggleVisiblity(ul);\n        if (ul === this.element || (left > -1 && top > -1)) {\n            let collide = isCollide(ul, null, left, top);\n            if (collide.indexOf('right') > -1) {\n                left = left - ul.offsetWidth;\n            }\n            if (collide.indexOf('bottom') > -1) {\n                const offset = this.callFit(ul, false, true, top, left);\n                top = offset.top - 20;\n                if (top < 0) {\n                    const newTop = (pageYOffset + document.documentElement.clientHeight) - ul.getBoundingClientRect().height;\n                    if (newTop > -1) {\n                        top = newTop;\n                    }\n                }\n            }\n            collide = isCollide(ul, null, left, top);\n            if (collide.indexOf('left') > -1) {\n                const offset = this.callFit(ul, true, false, top, left);\n                left = offset.left;\n            }\n        }\n        else {\n            if (Browser.isDevice) {\n                top = Number(this.element.style.top.replace(px, ''));\n                left = Number(this.element.style.left.replace(px, ''));\n            }\n            else {\n                const x = this.enableRtl ? 'left' : 'right';\n                let offset = calculatePosition(li, x, 'top');\n                top = offset.top;\n                left = offset.left;\n                const collide = isCollide(ul, null, this.enableRtl ? left - ul.offsetWidth : left, top);\n                const xCollision = collide.indexOf('left') > -1 || collide.indexOf('right') > -1;\n                if (xCollision) {\n                    offset = calculatePosition(li, this.enableRtl ? 'right' : 'left', 'top');\n                    left = offset.left;\n                }\n                if (this.enableRtl || xCollision) {\n                    left = (this.enableRtl && xCollision) ? left : left - ul.offsetWidth;\n                }\n                if (collide.indexOf('bottom') > -1) {\n                    offset = this.callFit(ul, false, true, top, left);\n                    top = offset.top;\n                }\n            }\n        }\n        this.toggleVisiblity(ul, false);\n        ul.style.top = top + px;\n        ul.style.left = left + px;\n    }\n    toggleVisiblity(ul, isVisible$$1 = true) {\n        ul.style.visibility = isVisible$$1 ? 'hidden' : '';\n        ul.style.display = isVisible$$1 ? 'block' : 'none';\n    }\n    createItems(items) {\n        const level = this.navIdx ? this.navIdx.length : 0;\n        const fields = this.getFields(level);\n        const showIcon = this.hasField(items, this.getField('iconCss', level));\n        const listBaseOptions = {\n            showIcon: showIcon,\n            moduleName: 'menu',\n            fields: fields,\n            template: this.template,\n            itemNavigable: true,\n            itemCreating: (args) => {\n                if (!args.curData[args.fields[fields.id]]) {\n                    args.curData[args.fields[fields.id]] = getUniqueID('menuitem');\n                }\n                args.curData.htmlAttributes = {\n                    role: 'menuitem',\n                    tabindex: '-1'\n                };\n                if (this.isMenu && !args.curData[this.getField('separator', level)]) {\n                    args.curData.htmlAttributes['aria-label'] = args.curData[args.fields.text];\n                }\n                if (args.curData[args.fields[fields.iconCss]] === '') {\n                    args.curData[args.fields[fields.iconCss]] = null;\n                }\n            },\n            itemCreated: (args) => {\n                if (args.curData[this.getField('separator', level)]) {\n                    args.item.classList.add(SEPARATOR);\n                    args.item.removeAttribute('role');\n                }\n                if (showIcon && !args.curData[args.fields.iconCss]\n                    && !args.curData[this.getField('separator', level)]) {\n                    args.item.classList.add('e-blankicon');\n                }\n                if (args.curData[args.fields.child]\n                    && args.curData[args.fields.child].length) {\n                    const span = this.createElement('span', { className: ICONS + ' ' + CARET });\n                    args.item.appendChild(span);\n                    args.item.setAttribute('aria-haspopup', 'true');\n                    args.item.setAttribute('aria-expanded', 'false');\n                    if (!this.isMenu) {\n                        args.item.removeAttribute('role');\n                    }\n                    args.item.classList.add('e-menu-caret-icon');\n                }\n                if (this.isMenu && this.template) {\n                    args.item.setAttribute('id', args.curData[args.fields.id].toString());\n                    args.item.removeAttribute('data-uid');\n                    if (args.item.classList.contains('e-level-1')) {\n                        args.item.classList.remove('e-level-1');\n                    }\n                    if (args.item.classList.contains('e-has-child')) {\n                        args.item.classList.remove('e-has-child');\n                    }\n                }\n                const eventArgs = { item: args.curData, element: args.item };\n                this.trigger('beforeItemRender', eventArgs);\n            }\n        };\n        this.setProperties({ 'items': this.items }, true);\n        if (this.isMenu) {\n            listBaseOptions.templateID = this.element.id + TEMPLATE_PROPERTY;\n        }\n        const ul = ListBase.createList(this.createElement, items, listBaseOptions, !this.template, this);\n        ul.setAttribute('tabindex', '0');\n        if (this.isMenu) {\n            ul.setAttribute('role', 'menu');\n        }\n        return ul;\n    }\n    moverHandler(e) {\n        const trgt = e.target;\n        this.liTrgt = trgt;\n        const cli = this.getLI(trgt);\n        const wrapper = cli ? closest(cli, '.e-' + this.getModuleName() + '-wrapper') : this.getWrapper();\n        const hdrWrapper = this.getWrapper();\n        const regex = new RegExp('-ej2menu-(.*)-popup');\n        let ulId;\n        let isDifferentElem = false;\n        if (!wrapper) {\n            return;\n        }\n        if (wrapper.id !== '') {\n            ulId = regex.exec(wrapper.id)[1];\n        }\n        else {\n            ulId = wrapper.querySelector('ul').id;\n        }\n        if (ulId !== this.element.id) {\n            this.removeLIStateByClass([FOCUSED, SELECTED], [this.getWrapper()]);\n            if (this.navIdx.length) {\n                isDifferentElem = true;\n            }\n            else {\n                return;\n            }\n        }\n        if (cli && closest(cli, '.e-' + this.getModuleName() + '-wrapper') && !isDifferentElem) {\n            this.removeLIStateByClass([FOCUSED], this.isMenu ? [wrapper].concat(this.getPopups()) : [wrapper]);\n            this.removeLIStateByClass([FOCUSED], this.isMenu ? [hdrWrapper].concat(this.getPopups()) : [hdrWrapper]);\n            cli.classList.add(FOCUSED);\n            if (!this.showItemOnClick) {\n                this.clickHandler(e);\n            }\n        }\n        else if (this.isMenu && this.showItemOnClick && !isDifferentElem) {\n            this.removeLIStateByClass([FOCUSED], [wrapper].concat(this.getPopups()));\n        }\n        if (this.isMenu) {\n            if (!this.showItemOnClick && (trgt.parentElement !== wrapper && !closest(trgt, '.e-' + this.getModuleName() + '-popup'))\n                && (!cli || (cli && !this.getIndex(cli.id, true).length)) && this.showSubMenuOn !== 'Hover') {\n                this.removeLIStateByClass([FOCUSED], [wrapper]);\n                if (this.navIdx.length) {\n                    this.isClosed = true;\n                    this.closeMenu(null, e);\n                }\n            }\n            else if (isDifferentElem && !this.showItemOnClick) {\n                if (this.navIdx.length) {\n                    this.isClosed = true;\n                    this.closeMenu(null, e);\n                }\n            }\n            if (!this.isClosed) {\n                this.removeStateWrapper();\n            }\n            this.isClosed = false;\n        }\n    }\n    removeStateWrapper() {\n        if (this.liTrgt) {\n            const wrapper = closest(this.liTrgt, '.e-menu-vscroll');\n            if (this.liTrgt.tagName === 'DIV' && wrapper) {\n                this.removeLIStateByClass([FOCUSED, SELECTED], [wrapper]);\n            }\n        }\n    }\n    removeLIStateByClass(classList$$1, element) {\n        let li;\n        for (let i = 0; i < element.length; i++) {\n            classList$$1.forEach((className) => {\n                li = select('.' + className, element[i]);\n                if (li) {\n                    li.classList.remove(className);\n                }\n            });\n        }\n    }\n    getField(propName, level = 0) {\n        const fieldName = this.fields[propName];\n        return typeof fieldName === 'string' ? fieldName :\n            (!fieldName[level] ? fieldName[fieldName.length - 1].toString()\n                : fieldName[level].toString());\n    }\n    getFields(level = 0) {\n        return {\n            id: this.getField('itemId', level),\n            iconCss: this.getField('iconCss', level),\n            text: this.getField('text', level),\n            url: this.getField('url', level),\n            child: this.getField('children', level),\n            separator: this.getField('separator', level)\n        };\n    }\n    hasField(items, field) {\n        for (let i = 0, len = items.length; i < len; i++) {\n            if (items[i][field]) {\n                return true;\n            }\n        }\n        return false;\n    }\n    menuHeaderClickHandler(e) {\n        if (closest(e.target, '.e-menu-wrapper').querySelector('ul.e-menu-parent').id !== this.element.id) {\n            return;\n        }\n        if (this.element.className.indexOf('e-hide-menu') > -1) {\n            this.openHamburgerMenu(e);\n        }\n        else {\n            this.closeHamburgerMenu(e);\n        }\n    }\n    clickHandler(e) {\n        if (this.isTapHold) {\n            this.isTapHold = false;\n        }\n        else {\n            const wrapper = this.getWrapper();\n            const trgt = e.target;\n            const cli = this.cli = this.getLI(trgt);\n            const regex = new RegExp('-ej2menu-(.*)-popup');\n            const cliWrapper = cli ? closest(cli, '.e-' + this.getModuleName() + '-wrapper') : null;\n            const isInstLI = cli && cliWrapper && (this.isMenu ? this.getIndex(cli.id, true).length > 0\n                : wrapper.firstElementChild.id === cliWrapper.firstElementChild.id);\n            if (Browser.isDevice && this.isMenu) {\n                this.removeLIStateByClass([FOCUSED], [wrapper].concat(this.getPopups()));\n                this.mouseDownHandler(e);\n            }\n            if (cli && cliWrapper && this.isMenu) {\n                const cliWrapperId = cliWrapper.id ? regex.exec(cliWrapper.id)[1] : cliWrapper.querySelector('.e-menu-parent').id;\n                if (this.element.id !== cliWrapperId) {\n                    return;\n                }\n            }\n            if (isInstLI && e.type === 'click' && !cli.classList.contains(HEADER)) {\n                this.setLISelected(cli);\n                const navIdx = this.getIndex(cli.id, true);\n                const item = this.getItem(navIdx);\n                const eventArgs = { element: cli, item: item, event: e };\n                this.trigger('select', eventArgs);\n            }\n            if (isInstLI && (e.type === 'mouseover' || Browser.isDevice || this.showItemOnClick)) {\n                let ul;\n                if (cli.classList.contains(HEADER)) {\n                    ul = wrapper.children[this.navIdx.length - 1];\n                    this.toggleAnimation(ul);\n                    const sli = this.getLIByClass(ul, SELECTED);\n                    if (sli) {\n                        sli.classList.remove(SELECTED);\n                    }\n                    detach(cli.parentNode);\n                    this.navIdx.pop();\n                }\n                else {\n                    if (!cli.classList.contains(SEPARATOR)) {\n                        this.showSubMenu = true;\n                        const cul = cli.parentNode;\n                        this.cliIdx = this.getIdx(cul, cli);\n                        if (this.isMenu || !Browser.isDevice) {\n                            const culIdx = this.isMenu ? Array.prototype.indexOf.call([wrapper].concat(this.getPopups()), closest(cul, '.' + 'e-' + this.getModuleName() + '-wrapper'))\n                                : this.getIdx(wrapper, cul);\n                            if (this.navIdx[culIdx] === this.cliIdx) {\n                                this.showSubMenu = false;\n                            }\n                            if (culIdx !== this.navIdx.length && (e.type !== 'mouseover' || this.showSubMenu)) {\n                                const sli = this.getLIByClass(cul, SELECTED);\n                                if (sli) {\n                                    sli.classList.remove(SELECTED);\n                                }\n                                this.isClosed = true;\n                                this.keyType = 'click';\n                                if (this.showItemOnClick) {\n                                    this.setLISelected(cli);\n                                }\n                                this.closeMenu(culIdx + 1, e);\n                                if (this.showItemOnClick) {\n                                    this.setLISelected(cli);\n                                }\n                            }\n                        }\n                        if (!this.isClosed) {\n                            this.afterCloseMenu(e);\n                        }\n                        this.isClosed = false;\n                    }\n                }\n            }\n            else {\n                if (this.isMenu && trgt.tagName === 'DIV' && this.navIdx.length && closest(trgt, '.e-menu-vscroll')) {\n                    const popupEle = closest(trgt, '.' + POPUP);\n                    const cIdx = Array.prototype.indexOf.call(this.getPopups(), popupEle) + 1;\n                    if (cIdx < this.navIdx.length) {\n                        this.closeMenu(cIdx + 1, e);\n                        if (popupEle) {\n                            this.removeLIStateByClass([FOCUSED, SELECTED], [popupEle]);\n                        }\n                    }\n                }\n                else if (this.isMenu && this.hamburgerMode && trgt.tagName === 'SPAN'\n                    && trgt.classList.contains('e-menu-icon')) {\n                    this.menuHeaderClickHandler(e);\n                }\n                else {\n                    if (trgt.tagName !== 'UL' || (this.isMenu ? trgt.parentElement.classList.contains('e-menu-wrapper') &&\n                        !this.getIndex(trgt.querySelector('.' + ITEM).id, true).length : trgt.parentElement !== wrapper)) {\n                        if (!cli) {\n                            this.removeLIStateByClass([SELECTED], [wrapper]);\n                        }\n                        if (!cli || !cli.querySelector('.' + CARET)) {\n                            this.closeMenu(null, e);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    afterCloseMenu(e) {\n        let isHeader;\n        if (this.showSubMenu) {\n            if (this.showItemOnClick && this.navIdx.length === 0) {\n                isHeader = closest(e.target, '.e-menu-parent.e-control');\n            }\n            else {\n                isHeader = closest(this.element, '.e-menu-parent.e-control');\n            }\n            const idx = this.navIdx.concat(this.cliIdx);\n            const item = this.getItem(idx);\n            if (item && item[this.getField('children', idx.length - 1)] &&\n                item[this.getField('children', idx.length - 1)].length) {\n                if (e.type === 'mouseover' || (Browser.isDevice && this.isMenu)) {\n                    this.setLISelected(this.cli);\n                }\n                if ((!this.hamburgerMode && isHeader) || (this.hamburgerMode && this.cli.getAttribute('aria-expanded') === 'false')) {\n                    this.cli.setAttribute('aria-expanded', 'true');\n                    this.navIdx.push(this.cliIdx);\n                    this.openMenu(this.cli, item, null, null, e);\n                }\n            }\n            else {\n                if (e.type !== 'mouseover') {\n                    this.closeMenu(null, e);\n                }\n            }\n            if (!isHeader) {\n                const cul = this.getUlByNavIdx();\n                const sli = this.getLIByClass(cul, SELECTED);\n                if (sli) {\n                    sli.setAttribute('aria-expanded', 'false');\n                    sli.classList.remove(SELECTED);\n                }\n            }\n        }\n        this.keyType = '';\n    }\n    setLISelected(li) {\n        const sli = this.getLIByClass(li.parentElement, SELECTED);\n        if (sli) {\n            sli.classList.remove(SELECTED);\n        }\n        if (!this.isMenu) {\n            li.classList.remove(FOCUSED);\n        }\n        li.classList.add(SELECTED);\n    }\n    getLIByClass(ul, classname) {\n        for (let i = 0, len = ul.children.length; i < len; i++) {\n            if (ul.children[i].classList.contains(classname)) {\n                return ul.children[i];\n            }\n        }\n        return null;\n    }\n    /**\n     * This method is used to get the index of the menu item in the Menu based on the argument.\n     *\n     * @param {MenuItem | string} item - item be passed to get the index | id to be passed to get the item index.\n     * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    getItemIndex(item, isUniqueId) {\n        let idx;\n        if (typeof item === 'string') {\n            idx = item;\n        }\n        else {\n            idx = item.id;\n        }\n        const isText = (isUniqueId === false) ? false : true;\n        const navIdx = this.getIndex(idx, isText);\n        return navIdx;\n    }\n    /**\n     * This method is used to set the menu item in the Menu based on the argument.\n     *\n     * @param {MenuItem} item - item need to be updated.\n     * @param {string} id - id / text to be passed to update the item.\n     * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    setItem(item, id, isUniqueId) {\n        let idx;\n        if (isUniqueId) {\n            idx = id ? id : item.id;\n        }\n        else {\n            idx = id ? id : item.text;\n        }\n        const navIdx = this.getIndex(idx, isUniqueId);\n        const newItem = this.getItem(navIdx);\n        newItem.iconCss = item.iconCss || newItem.iconCss;\n        newItem.text = item.text || newItem.text;\n        newItem.url = item.url || newItem.url;\n        newItem.separator = item.separator || newItem.separator;\n    }\n    getItem(navIdx) {\n        navIdx = navIdx.slice();\n        const idx = navIdx.pop();\n        const items = this.getItems(navIdx);\n        return items[idx];\n    }\n    getItems(navIdx) {\n        let items = this.items;\n        for (let i = 0; i < navIdx.length; i++) {\n            items = items[navIdx[i]][this.getField('children', i)];\n        }\n        return items;\n    }\n    setItems(newItems, navIdx) {\n        const items = this.getItems(navIdx);\n        items.splice(0, items.length);\n        for (let i = 0; i < newItems.length; i++) {\n            items.splice(i, 0, newItems[i]);\n        }\n    }\n    getIdx(ul, li, skipHdr = true) {\n        let idx = Array.prototype.indexOf.call(ul.children, li);\n        if (skipHdr && ul.children[0].classList.contains(HEADER)) {\n            idx--;\n        }\n        return idx;\n    }\n    getLI(elem) {\n        if (elem.tagName === 'LI' && elem.classList.contains('e-menu-item')) {\n            return elem;\n        }\n        return closest(elem, 'li.e-menu-item');\n    }\n    updateItemsByNavIdx() {\n        let items = this.items;\n        let count = 0;\n        for (let index = 0; index < this.navIdx.length; index++) {\n            items = items[index].items;\n            if (!items) {\n                break;\n            }\n            count++;\n            const ul = this.getUlByNavIdx(count);\n            if (!ul) {\n                break;\n            }\n            this.updateItem(ul, items);\n        }\n    }\n    removeChildElement(elem) {\n        while (elem.firstElementChild) {\n            elem.removeChild(elem.firstElementChild);\n        }\n        return elem;\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @private\n     * @param {MenuBaseModel} newProp - Specifies the new properties\n     * @param {MenuBaseModel} oldProp - Specifies the old properties\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        const wrapper = this.getWrapper();\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([wrapper], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([wrapper], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'enableRtl':\n                    wrapper.classList.toggle(RTL);\n                    break;\n                case 'showItemOnClick':\n                    this.unWireEvents();\n                    this.showItemOnClick = newProp.showItemOnClick;\n                    this.wireEvents();\n                    break;\n                case 'enableScrolling':\n                    if (newProp.enableScrolling) {\n                        let ul;\n                        if (this.element.classList.contains('e-vertical')) {\n                            addScrolling(this.createElement, wrapper, this.element, 'vscroll', this.enableRtl);\n                        }\n                        else {\n                            addScrolling(this.createElement, wrapper, this.element, 'hscroll', this.enableRtl);\n                        }\n                        this.getPopups().forEach((wrapper) => {\n                            ul = select('.e-ul', wrapper);\n                            addScrolling(this.createElement, wrapper, ul, 'vscroll', this.enableRtl);\n                        });\n                    }\n                    else {\n                        let ul = wrapper.children[0];\n                        if (this.element.classList.contains('e-vertical')) {\n                            destroyScroll(getInstance(ul, VScroll), ul);\n                        }\n                        else {\n                            destroyScroll(getInstance(ul, HScroll), ul);\n                        }\n                        wrapper.style.overflow = '';\n                        wrapper.appendChild(this.element);\n                        this.getPopups().forEach((wrapper) => {\n                            ul = wrapper.children[0];\n                            destroyScroll(getInstance(ul, VScroll), ul);\n                            wrapper.style.overflow = '';\n                        });\n                    }\n                    break;\n                case 'items': {\n                    let idx;\n                    let navIdx;\n                    let item;\n                    if (!Object.keys(oldProp.items).length) {\n                        this.updateItem(this.element, this.items);\n                        if (!this.hamburgerMode) {\n                            for (let i = 1, count = wrapper.childElementCount; i < count; i++) {\n                                detach(wrapper.lastElementChild);\n                            }\n                        }\n                        this.navIdx = [];\n                    }\n                    else {\n                        const keys = Object.keys(newProp.items);\n                        for (let i = 0; i < keys.length; i++) {\n                            navIdx = this.getChangedItemIndex(newProp, [], Number(keys[i]));\n                            if (navIdx.length <= this.getWrapper().children.length) {\n                                idx = navIdx.pop();\n                                item = this.getItems(navIdx);\n                                this.insertAfter([item[idx]], item[idx].text);\n                                this.removeItem(item, navIdx, idx);\n                                this.setItems(item, navIdx);\n                            }\n                            navIdx.length = 0;\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n    }\n    updateItem(ul, items) {\n        if (isBlazor() && !this.isMenu) {\n            ul = this.removeChildElement(ul);\n        }\n        else {\n            ul.innerHTML = '';\n        }\n        const lis = [].slice.call(this.createItems(items).children);\n        lis.forEach((li) => {\n            ul.appendChild(li);\n        });\n    }\n    getChangedItemIndex(newProp, index, idx) {\n        index.push(idx);\n        const key = Object.keys(newProp.items[idx]).pop();\n        if (key === 'items') {\n            const item = newProp.items[idx];\n            const popStr = Object.keys(item.items).pop();\n            if (popStr) {\n                this.getChangedItemIndex(item, index, Number(popStr));\n            }\n        }\n        else {\n            if (key === 'isParentArray' && index.length > 1) {\n                index.pop();\n            }\n        }\n        return index;\n    }\n    removeItem(item, navIdx, idx) {\n        item.splice(idx, 1);\n        const uls = this.getWrapper().children;\n        if (navIdx.length < uls.length) {\n            detach(uls[navIdx.length].children[idx]);\n        }\n    }\n    /**\n     * Used to unwire the bind events.\n     *\n     * @private\n     * @param {string} targetSelctor - Specifies the target selector\n     * @returns {void}\n     */\n    unWireEvents(targetSelctor = this.target) {\n        const wrapper = this.getWrapper();\n        if (targetSelctor) {\n            let target;\n            let touchModule;\n            const targetElems = selectAll(targetSelctor);\n            for (let i = 0, len = targetElems.length; i < len; i++) {\n                target = targetElems[i];\n                if (this.isMenu) {\n                    EventHandler.remove(target, 'click', this.menuHeaderClickHandler);\n                }\n                else {\n                    if (Browser.isIos) {\n                        touchModule = getInstance(target, Touch);\n                        if (touchModule) {\n                            touchModule.destroy();\n                        }\n                    }\n                    else {\n                        EventHandler.remove(target, 'contextmenu', this.cmenuHandler);\n                    }\n                }\n            }\n            if (!this.isMenu) {\n                EventHandler.remove(this.targetElement, 'scroll', this.scrollHandler);\n                for (const parent of getScrollableParent(this.targetElement)) {\n                    EventHandler.remove(parent, 'scroll', this.scrollHandler);\n                }\n            }\n        }\n        if (!Browser.isDevice) {\n            EventHandler.remove(this.isMenu ? document : wrapper, 'mouseover', this.delegateMoverHandler);\n            EventHandler.remove(document, 'mousedown', this.delegateMouseDownHandler);\n        }\n        EventHandler.remove(document, 'click', this.delegateClickHandler);\n        this.unWireKeyboardEvent(wrapper);\n        this.rippleFn();\n    }\n    unWireKeyboardEvent(element) {\n        const keyboardModule = getInstance(element, KeyboardEvents);\n        if (keyboardModule) {\n            keyboardModule.destroy();\n        }\n    }\n    toggleAnimation(ul, isMenuOpen = true) {\n        let pUlHeight;\n        let pElement;\n        if (this.animationSettings.effect === 'None' || !isMenuOpen) {\n            this.end(ul, isMenuOpen);\n        }\n        else {\n            this.animation.animate(ul, {\n                name: this.animationSettings.effect,\n                duration: this.animationSettings.duration,\n                timingFunction: this.animationSettings.easing,\n                begin: (options) => {\n                    if (this.hamburgerMode) {\n                        pElement = options.element.parentElement;\n                        options.element.style.position = 'absolute';\n                        pUlHeight = pElement.offsetHeight;\n                        options.element.style.maxHeight = options.element.offsetHeight + 'px';\n                        pElement.style.maxHeight = '';\n                    }\n                    else {\n                        options.element.style.display = 'block';\n                        options.element.style.maxHeight = options.element.getBoundingClientRect().height + 'px';\n                    }\n                },\n                progress: (options) => {\n                    if (this.hamburgerMode) {\n                        pElement.style.minHeight = (pUlHeight + options.element.offsetHeight) + 'px';\n                    }\n                },\n                end: (options) => {\n                    if (this.hamburgerMode) {\n                        options.element.style.position = '';\n                        options.element.style.maxHeight = '';\n                        pElement.style.minHeight = '';\n                        options.element.style.top = 0 + 'px';\n                        options.element.children[0].focus();\n                        this.triggerOpen(options.element.children[0]);\n                    }\n                    else {\n                        this.end(options.element, isMenuOpen);\n                    }\n                }\n            });\n        }\n    }\n    triggerOpen(ul) {\n        const item = this.navIdx.length ? this.getItem(this.navIdx) : null;\n        const eventArgs = {\n            element: ul, parentItem: item, items: item ? item.items : this.items\n        };\n        this.trigger('onOpen', eventArgs);\n    }\n    end(ul, isMenuOpen) {\n        if (isMenuOpen) {\n            ul.style.display = 'block';\n            ul.style.maxHeight = '';\n            this.triggerOpen(ul);\n            if (ul.querySelector('.' + FOCUSED)) {\n                ul.querySelector('.' + FOCUSED).focus();\n            }\n            else {\n                const ele = this.getWrapper().children[this.getIdx(this.getWrapper(), ul) - 1];\n                if (ele) {\n                    ele.querySelector('.' + SELECTED).focus();\n                }\n                else {\n                    this.element.focus();\n                }\n            }\n        }\n        else {\n            if (ul === this.element) {\n                const fli = this.getLIByClass(this.element, FOCUSED);\n                if (fli) {\n                    fli.classList.remove(FOCUSED);\n                }\n                const sli = this.getLIByClass(this.element, SELECTED);\n                if (sli) {\n                    sli.classList.remove(SELECTED);\n                }\n                ul.style.display = 'none';\n            }\n            else {\n                detach(ul);\n            }\n        }\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    getPersistData() {\n        return '';\n    }\n    /**\n     * Get wrapper element.\n     *\n     * @returns {Element} - Wrapper element\n     * @private\n     */\n    getWrapper() {\n        return closest(this.element, '.e-' + this.getModuleName() + '-wrapper');\n    }\n    getIndex(data, isUniqueId, items = this.items, nIndex = [], isCallBack = false, level = 0) {\n        let item;\n        level = isCallBack ? level + 1 : 0;\n        for (let i = 0, len = items.length; i < len; i++) {\n            item = items[i];\n            if ((isUniqueId ? item[this.getField('itemId', level)] : item[this.getField('text', level)]) === data) {\n                nIndex.push(i);\n                break;\n            }\n            else if (item[this.getField('children', level)]\n                && item[this.getField('children', level)].length) {\n                nIndex = this.getIndex(data, isUniqueId, item[this.getField('children', level)], nIndex, true, level);\n                if (nIndex[nIndex.length - 1] === -1) {\n                    if (i !== len - 1) {\n                        nIndex.pop();\n                    }\n                }\n                else {\n                    nIndex.unshift(i);\n                    break;\n                }\n            }\n            else {\n                if (i === len - 1) {\n                    nIndex.push(-1);\n                }\n            }\n        }\n        return (!isCallBack && nIndex[0] === -1) ? [] : nIndex;\n    }\n    /**\n     * This method is used to enable or disable the menu items in the Menu based on the items and enable argument.\n     *\n     * @param {string[]} items - Text items that needs to be enabled/disabled.\n     * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n     * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    enableItems(items, enable = true, isUniqueId) {\n        let ul;\n        let idx;\n        let navIdx;\n        const disabled = DISABLED;\n        let skipItem;\n        for (let i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(items[i], isUniqueId);\n            if (this.navIdx.length) {\n                if (navIdx.length !== 1) {\n                    skipItem = false;\n                    for (let i = 0, len = navIdx.length - 1; i < len; i++) {\n                        if (navIdx[i] !== this.navIdx[i]) {\n                            skipItem = true;\n                            break;\n                        }\n                    }\n                    if (skipItem) {\n                        continue;\n                    }\n                }\n            }\n            else {\n                if (navIdx.length !== 1) {\n                    continue;\n                }\n            }\n            idx = navIdx.pop();\n            ul = this.getUlByNavIdx(navIdx.length);\n            if (ul) {\n                if (enable) {\n                    if (this.isMenu) {\n                        ul.children[idx].classList.remove(disabled);\n                        ul.children[idx].removeAttribute('aria-disabled');\n                    }\n                    else {\n                        if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                            ul.children[idx + 1].classList.remove(disabled);\n                        }\n                        else {\n                            ul.children[idx].classList.remove(disabled);\n                        }\n                    }\n                }\n                else {\n                    if (this.isMenu) {\n                        ul.children[idx].classList.add(disabled);\n                        ul.children[idx].setAttribute('aria-disabled', 'true');\n                    }\n                    else {\n                        if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                            ul.children[idx + 1].classList.add(disabled);\n                        }\n                        else {\n                            ul.children[idx].classList.add(disabled);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * This method is used to show the menu items in the Menu based on the items text.\n     *\n     * @param {string[]} items - Text items that needs to be shown.\n     * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    showItems(items, isUniqueId) {\n        this.showHideItems(items, false, isUniqueId);\n    }\n    /**\n     * This method is used to hide the menu items in the Menu based on the items text.\n     *\n     * @param {string[]} items - Text items that needs to be hidden.\n     * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    hideItems(items, isUniqueId) {\n        this.showHideItems(items, true, isUniqueId);\n    }\n    showHideItems(items, ishide, isUniqueId) {\n        let ul;\n        let index;\n        let navIdx;\n        for (let i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(items[i], isUniqueId);\n            index = navIdx.pop();\n            ul = this.getUlByNavIdx(navIdx.length);\n            if (ul) {\n                if (ishide) {\n                    if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                        ul.children[index + 1].classList.add(HIDE);\n                    }\n                    else {\n                        ul.children[index].classList.add(HIDE);\n                    }\n                }\n                else {\n                    if (Browser.isDevice && !ul.classList.contains('e-contextmenu')) {\n                        ul.children[index + 1].classList.remove(HIDE);\n                    }\n                    else {\n                        ul.children[index].classList.remove(HIDE);\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * It is used to remove the menu items from the Menu based on the items text.\n     *\n     * @param {string[]} items Text items that needs to be removed.\n     * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    removeItems(items, isUniqueId) {\n        let idx;\n        let navIdx;\n        let iitems;\n        for (let i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(items[i], isUniqueId);\n            idx = navIdx.pop();\n            iitems = this.getItems(navIdx);\n            this.removeItem(iitems, navIdx, idx);\n        }\n    }\n    /**\n     * It is used to insert the menu items after the specified menu item text.\n     *\n     * @param {MenuItemModel[]} items - Items that needs to be inserted.\n     * @param {string} text - Text item after that the element to be inserted.\n     * @param {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    insertAfter(items, text, isUniqueId) {\n        this.insertItems(items, text, isUniqueId);\n    }\n    /**\n     * It is used to insert the menu items before the specified menu item text.\n     *\n     * @param {MenuItemModel[]} items - Items that needs to be inserted.\n     * @param {string} text - Text item before that the element to be inserted.\n     * @param  {boolean} isUniqueId - Set `true` if it is a unique id.\n     * @returns {void}\n     */\n    insertBefore(items, text, isUniqueId) {\n        this.insertItems(items, text, isUniqueId, false);\n    }\n    insertItems(items, text, isUniqueId, isAfter = true) {\n        let li;\n        let idx;\n        let navIdx;\n        let iitems;\n        let menuitem;\n        for (let i = 0; i < items.length; i++) {\n            navIdx = this.getIndex(text, isUniqueId);\n            idx = navIdx.pop();\n            iitems = this.getItems(navIdx);\n            menuitem = new MenuItem(iitems[0], 'items', items[i], true);\n            iitems.splice(isAfter ? idx + 1 : idx, 0, menuitem);\n            const uls = this.isMenu ? [this.getWrapper()].concat(this.getPopups()) : [].slice.call(this.getWrapper().children);\n            if (navIdx.length < uls.length) {\n                idx = isAfter ? idx + 1 : idx;\n                li = this.createItems(iitems).children[idx];\n                const ul = this.isMenu ? select('.e-menu-parent', uls[navIdx.length]) : uls[navIdx.length];\n                ul.insertBefore(li, ul.children[idx]);\n            }\n        }\n    }\n    removeAttributes() {\n        ['top', 'left', 'display', 'z-index'].forEach((key) => {\n            this.element.style.removeProperty(key);\n        });\n        ['role', 'tabindex', 'class', 'style'].forEach((key) => {\n            if (key === 'class' && this.element.classList.contains('e-menu-parent')) {\n                this.element.classList.remove('e-menu-parent');\n            }\n            if (['class', 'style'].indexOf(key) === -1 || !this.element.getAttribute(key)) {\n                this.element.removeAttribute(key);\n            }\n            if (this.isMenu && key === 'class' && this.element.classList.contains('e-vertical')) {\n                this.element.classList.remove('e-vertical');\n            }\n        });\n    }\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        const wrapper = this.getWrapper();\n        if (wrapper) {\n            this.unWireEvents();\n            if (!this.isMenu) {\n                this.clonedElement.style.display = '';\n                if (this.clonedElement.tagName === 'EJS-CONTEXTMENU') {\n                    addClass([this.clonedElement], ['e-control', 'e-lib', 'e-' + this.getModuleName()]);\n                    this.element = this.clonedElement;\n                }\n                else {\n                    if (this.refreshing && this.clonedElement.childElementCount && this.clonedElement.children[0].tagName === 'LI') {\n                        this.setProperties({ 'items': [] }, true);\n                    }\n                    if (document.getElementById(this.clonedElement.id)) {\n                        const refEle = this.clonedElement.nextElementSibling;\n                        if (refEle && refEle !== wrapper) {\n                            this.clonedElement.parentElement.insertBefore(this.element, refEle);\n                        }\n                        else {\n                            this.clonedElement.parentElement.appendChild(this.element);\n                        }\n                        if (isBlazor() && !this.isMenu) {\n                            this.element = this.removeChildElement(this.element);\n                        }\n                        else {\n                            this.element.innerHTML = '';\n                        }\n                        append([].slice.call(this.clonedElement.children), this.element);\n                        detach(this.clonedElement);\n                        this.removeAttributes();\n                    }\n                }\n                this.clonedElement = null;\n            }\n            else {\n                this.closeMenu();\n                if (isBlazor() && !this.isMenu) {\n                    this.element = this.removeChildElement(this.element);\n                }\n                else {\n                    this.element.innerHTML = '';\n                }\n                this.removeAttributes();\n                wrapper.parentNode.insertBefore(this.element, wrapper);\n                this.clonedElement = null;\n            }\n            if (this.isMenu && this.clonedElement) {\n                detach(this.element);\n                wrapper.style.display = '';\n                wrapper.classList.remove('e-' + this.getModuleName() + '-wrapper');\n                wrapper.removeAttribute('data-ripple');\n            }\n            else {\n                detach(wrapper);\n            }\n            super.destroy();\n            if (this.template) {\n                this.clearTemplate(['template']);\n            }\n        }\n        this.rippleFn = null;\n    }\n};\n__decorate$2([\n    Event()\n], MenuBase.prototype, \"beforeItemRender\", void 0);\n__decorate$2([\n    Event()\n], MenuBase.prototype, \"beforeOpen\", void 0);\n__decorate$2([\n    Event()\n], MenuBase.prototype, \"onOpen\", void 0);\n__decorate$2([\n    Event()\n], MenuBase.prototype, \"beforeClose\", void 0);\n__decorate$2([\n    Event()\n], MenuBase.prototype, \"onClose\", void 0);\n__decorate$2([\n    Event()\n], MenuBase.prototype, \"select\", void 0);\n__decorate$2([\n    Event()\n], MenuBase.prototype, \"created\", void 0);\n__decorate$2([\n    Property('')\n], MenuBase.prototype, \"cssClass\", void 0);\n__decorate$2([\n    Property(0)\n], MenuBase.prototype, \"hoverDelay\", void 0);\n__decorate$2([\n    Property(false)\n], MenuBase.prototype, \"showItemOnClick\", void 0);\n__decorate$2([\n    Property('')\n], MenuBase.prototype, \"target\", void 0);\n__decorate$2([\n    Property('')\n], MenuBase.prototype, \"filter\", void 0);\n__decorate$2([\n    Property(null)\n], MenuBase.prototype, \"template\", void 0);\n__decorate$2([\n    Property(false)\n], MenuBase.prototype, \"enableScrolling\", void 0);\n__decorate$2([\n    Property(false)\n], MenuBase.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$2([\n    Complex({ itemId: 'id', text: 'text', parentId: 'parentId', iconCss: 'iconCss', url: 'url', separator: 'separator', children: 'items' }, FieldSettings)\n], MenuBase.prototype, \"fields\", void 0);\n__decorate$2([\n    Collection([], MenuItem)\n], MenuBase.prototype, \"items\", void 0);\n__decorate$2([\n    Complex({ duration: 400, easing: 'ease', effect: 'SlideDown' }, MenuAnimationSettings)\n], MenuBase.prototype, \"animationSettings\", void 0);\nMenuBase = __decorate$2([\n    NotifyPropertyChanges\n], MenuBase);\n\n/**\n * Navigation Common modules\n */\n\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst CLS_VERTICAL = 'e-vertical';\nconst CLS_ITEMS = 'e-toolbar-items';\nconst CLS_ITEM = 'e-toolbar-item';\nconst CLS_RTL$2 = 'e-rtl';\nconst CLS_SEPARATOR = 'e-separator';\nconst CLS_POPUPICON = 'e-popup-up-icon';\nconst CLS_POPUPDOWN = 'e-popup-down-icon';\nconst CLS_POPUPOPEN = 'e-popup-open';\nconst CLS_TEMPLATE = 'e-template';\nconst CLS_DISABLE$2 = 'e-overlay';\nconst CLS_POPUPTEXT = 'e-toolbar-text';\nconst CLS_TBARTEXT = 'e-popup-text';\nconst CLS_TBAROVERFLOW = 'e-overflow-show';\nconst CLS_POPOVERFLOW = 'e-overflow-hide';\nconst CLS_TBARBTN = 'e-tbar-btn';\nconst CLS_TBARNAV = 'e-hor-nav';\nconst CLS_TBARSCRLNAV = 'e-scroll-nav';\nconst CLS_TBARRIGHT = 'e-toolbar-right';\nconst CLS_TBARLEFT = 'e-toolbar-left';\nconst CLS_TBARCENTER = 'e-toolbar-center';\nconst CLS_TBARPOS = 'e-tbar-pos';\nconst CLS_HSCROLLCNT = 'e-hscroll-content';\nconst CLS_VSCROLLCNT = 'e-vscroll-content';\nconst CLS_HSCROLLBAR$1 = 'e-hscroll-bar';\nconst CLS_POPUPNAV = 'e-hor-nav';\nconst CLS_POPUPCLASS = 'e-toolbar-pop';\nconst CLS_POPUP = 'e-toolbar-popup';\nconst CLS_TBARBTNTEXT = 'e-tbar-btn-text';\nconst CLS_TBARNAVACT = 'e-nav-active';\nconst CLS_TBARIGNORE = 'e-ignore';\nconst CLS_POPPRI = 'e-popup-alone';\nconst CLS_HIDDEN = 'e-hidden';\nconst CLS_MULTIROW = 'e-toolbar-multirow';\nconst CLS_MULTIROWPOS = 'e-multirow-pos';\nconst CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';\nconst CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';\nconst CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';\nconst CLS_EXTENDABLECLASS = 'e-toolbar-extended';\nconst CLS_EXTENDPOPUP = 'e-expended-nav';\nconst CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';\n/**\n * An item object that is used to configure Toolbar commands.\n */\nclass Item extends ChildProperty {\n}\n__decorate$3([\n    Property('')\n], Item.prototype, \"id\", void 0);\n__decorate$3([\n    Property('')\n], Item.prototype, \"text\", void 0);\n__decorate$3([\n    Property('auto')\n], Item.prototype, \"width\", void 0);\n__decorate$3([\n    Property('')\n], Item.prototype, \"cssClass\", void 0);\n__decorate$3([\n    Property(false)\n], Item.prototype, \"showAlwaysInPopup\", void 0);\n__decorate$3([\n    Property(false)\n], Item.prototype, \"disabled\", void 0);\n__decorate$3([\n    Property('')\n], Item.prototype, \"prefixIcon\", void 0);\n__decorate$3([\n    Property('')\n], Item.prototype, \"suffixIcon\", void 0);\n__decorate$3([\n    Property(true)\n], Item.prototype, \"visible\", void 0);\n__decorate$3([\n    Property('None')\n], Item.prototype, \"overflow\", void 0);\n__decorate$3([\n    Property('')\n], Item.prototype, \"template\", void 0);\n__decorate$3([\n    Property('Button')\n], Item.prototype, \"type\", void 0);\n__decorate$3([\n    Property('Both')\n], Item.prototype, \"showTextOn\", void 0);\n__decorate$3([\n    Property(null)\n], Item.prototype, \"htmlAttributes\", void 0);\n__decorate$3([\n    Property('')\n], Item.prototype, \"tooltipText\", void 0);\n__decorate$3([\n    Property('Left')\n], Item.prototype, \"align\", void 0);\n__decorate$3([\n    Event()\n], Item.prototype, \"click\", void 0);\n/**\n * The Toolbar control contains a group of commands that are aligned horizontally.\n * ```html\n * <div id=\"toolbar\"/>\n * <script>\n *   var toolbarObj = new Toolbar();\n *   toolbarObj.appendTo(\"#toolbar\");\n * </script>\n * ```\n */\nlet Toolbar = class Toolbar extends Component {\n    /**\n     * Initializes a new instance of the Toolbar class.\n     *\n     * @param {ToolbarModel} options  - Specifies Toolbar model properties as options.\n     * @param { string | HTMLElement} element  - Specifies the element that is rendered as a Toolbar.\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.resizeContext = this.resize.bind(this);\n        /**\n         * Contains the keyboard configuration of the Toolbar.\n         */\n        this.keyConfigs = {\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow',\n            popupOpen: 'enter',\n            popupClose: 'escape',\n            tab: 'tab',\n            home: 'home',\n            end: 'end'\n        };\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     *\n     * @returns {void}.\n     */\n    destroy() {\n        if (this.isReact || this.isAngular) {\n            this.clearTemplate();\n        }\n        const btnItems = this.element.querySelectorAll('.e-control.e-btn');\n        [].slice.call(btnItems).forEach((el) => {\n            if (!isNullOrUndefined(el) && !isNullOrUndefined(el.ej2_instances) && !isNullOrUndefined(el.ej2_instances[0]) && !(el.ej2_instances[0].isDestroyed)) {\n                el.ej2_instances[0].destroy();\n            }\n        });\n        this.unwireEvents();\n        this.tempId.forEach((ele) => {\n            if (!isNullOrUndefined(this.element.querySelector(ele))) {\n                document.body.appendChild(this.element.querySelector(ele)).style.display = 'none';\n            }\n        });\n        this.destroyItems();\n        while (this.element.lastElementChild) {\n            this.element.removeChild(this.element.lastElementChild);\n        }\n        if (this.trgtEle) {\n            this.element.appendChild(this.ctrlTem);\n            this.trgtEle = null;\n            this.ctrlTem = null;\n        }\n        if (this.popObj) {\n            this.popObj.destroy();\n            detach(this.popObj.element);\n        }\n        if (this.activeEle) {\n            this.activeEle = null;\n        }\n        this.popObj = null;\n        this.tbarAlign = null;\n        this.tbarItemsCol = [];\n        this.remove(this.element, 'e-toolpop');\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.removeAttribute('style');\n        ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach((attrb) => this.element.removeAttribute(attrb));\n        super.destroy();\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        const eventArgs = { enableCollision: this.enableCollision, scrollStep: this.scrollStep };\n        this.trigger('beforeCreate', eventArgs);\n        this.enableCollision = eventArgs.enableCollision;\n        this.scrollStep = eventArgs.scrollStep;\n        this.scrollModule = null;\n        this.popObj = null;\n        this.tempId = [];\n        this.tbarItemsCol = this.items;\n        this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n        this.isExtendedOpen = false;\n        this.popupPriCount = 0;\n        if (this.enableRtl) {\n            this.add(this.element, CLS_RTL$2);\n        }\n    }\n    wireEvents() {\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        window.addEventListener('resize', this.resizeContext);\n        if (this.allowKeyboard) {\n            this.wireKeyboardEvent();\n        }\n    }\n    wireKeyboardEvent() {\n        this.keyModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs\n        });\n        EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n        this.element.setAttribute('tabIndex', '0');\n    }\n    unwireKeyboardEvent() {\n        if (this.keyModule) {\n            EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n            this.keyModule.destroy();\n            this.keyModule = null;\n        }\n    }\n    docKeyDown(e) {\n        if (e.target.tagName === 'INPUT') {\n            return;\n        }\n        const popCheck = !isNullOrUndefined(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== 'Extended';\n        if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && popCheck) {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        const keyCheck = (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36);\n        if (keyCheck) {\n            e.preventDefault();\n        }\n    }\n    unwireEvents() {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        this.destroyScroll();\n        this.unwireKeyboardEvent();\n        window.removeEventListener('resize', this.resizeContext);\n        EventHandler.remove(document, 'scroll', this.docEvent);\n        EventHandler.remove(document, 'click', this.docEvent);\n    }\n    clearProperty() {\n        this.tbarEle = [];\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n    }\n    docEvent(e) {\n        const popEle = closest(e.target, '.e-popup');\n        if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === 'Popup') {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n    }\n    destroyScroll() {\n        if (this.scrollModule) {\n            if (this.tbarAlign) {\n                this.add(this.scrollModule.element, CLS_TBARPOS);\n            }\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n    }\n    destroyItems() {\n        if (this.element) {\n            [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach((el) => { detach(el); });\n        }\n        if (this.tbarAlign) {\n            const tbarItems = this.element.querySelector('.' + CLS_ITEMS);\n            [].slice.call(tbarItems.children).forEach((el) => {\n                detach(el);\n            });\n            this.tbarAlign = false;\n            this.remove(tbarItems, CLS_TBARPOS);\n        }\n        this.clearProperty();\n    }\n    destroyMode() {\n        if (this.scrollModule) {\n            this.remove(this.scrollModule.element, CLS_RTL$2);\n            this.destroyScroll();\n        }\n        this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n        this.remove(this.element, CLS_EXTEANDABLE_TOOLBAR);\n        const tempEle = this.element.querySelector('.e-toolbar-multirow');\n        if (tempEle) {\n            this.remove(tempEle, CLS_MULTIROW);\n        }\n        if (this.popObj) {\n            this.popupRefresh(this.popObj.element, true);\n        }\n    }\n    add(ele, val) {\n        ele.classList.add(val);\n    }\n    remove(ele, val) {\n        ele.classList.remove(val);\n    }\n    elementFocus(ele) {\n        const fChild = ele.firstElementChild;\n        if (fChild) {\n            fChild.focus();\n            this.activeEleSwitch(ele);\n        }\n        else {\n            ele.focus();\n        }\n    }\n    clstElement(tbrNavChk, trgt) {\n        let clst;\n        if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {\n            clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n        }\n        else if (this.element === trgt || tbrNavChk) {\n            clst = this.element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_DISABLE$2 + ' ):not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_HIDDEN + ' )');\n        }\n        else {\n            clst = closest(trgt, '.' + CLS_ITEM);\n        }\n        return clst;\n    }\n    keyHandling(clst, e, trgt, navChk, scrollChk) {\n        const popObj = this.popObj;\n        const rootEle = this.element;\n        const popAnimate = { name: 'FadeOut', duration: 100 };\n        const value = e.action === 'moveUp' ? 'previous' : 'next';\n        let ele;\n        let nodes;\n        switch (e.action) {\n            case 'moveRight':\n                if (this.isVertical) {\n                    return;\n                }\n                if (rootEle === trgt) {\n                    this.elementFocus(clst);\n                }\n                else if (!navChk) {\n                    this.eleFocus(clst, 'next');\n                }\n                break;\n            case 'moveLeft':\n                if (this.isVertical) {\n                    return;\n                }\n                if (!navChk) {\n                    this.eleFocus(clst, 'previous');\n                }\n                break;\n            case 'home':\n            case 'end':\n                if (clst) {\n                    let popupCheck = closest(clst, '.e-popup');\n                    const extendedPopup = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n                    if (this.overflowMode === 'Extended' && extendedPopup && extendedPopup.classList.contains('e-popup-open')) {\n                        popupCheck = e.action === 'end' ? extendedPopup : null;\n                    }\n                    if (popupCheck) {\n                        if (isVisible(this.popObj.element)) {\n                            nodes = [].slice.call(popupCheck.children);\n                            if (e.action === 'home') {\n                                ele = nodes[0];\n                            }\n                            else {\n                                ele = nodes[nodes.length - 1];\n                            }\n                        }\n                    }\n                    else {\n                        nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ')');\n                        if (e.action === 'home') {\n                            ele = nodes[0];\n                        }\n                        else {\n                            ele = nodes[nodes.length - 1];\n                        }\n                    }\n                    if (ele) {\n                        this.elementFocus(ele);\n                    }\n                }\n                break;\n            case 'moveUp':\n            case 'moveDown':\n                if (!this.isVertical) {\n                    if (popObj && closest(trgt, '.e-popup')) {\n                        const popEle = popObj.element;\n                        const popFrstEle = popEle.firstElementChild;\n                        if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n                            return;\n                        }\n                        else {\n                            this.eleFocus(clst, value);\n                        }\n                    }\n                    else if (e.action === 'moveDown' && popObj && isVisible(popObj.element)) {\n                        this.elementFocus(clst);\n                    }\n                }\n                else {\n                    if (e.action === 'moveUp') {\n                        this.eleFocus(clst, 'previous');\n                    }\n                    else {\n                        this.eleFocus(clst, 'next');\n                    }\n                }\n                break;\n            case 'tab':\n                if (!scrollChk && !navChk) {\n                    const ele = clst.firstElementChild;\n                    if (rootEle === trgt) {\n                        if (this.activeEle) {\n                            this.activeEle.focus();\n                        }\n                        else {\n                            this.activeEleRemove(ele);\n                            ele.focus();\n                        }\n                        this.element.removeAttribute('tabindex');\n                    }\n                }\n                break;\n            case 'popupClose':\n                if (popObj && this.overflowMode !== 'Extended') {\n                    popObj.hide(popAnimate);\n                }\n                break;\n            case 'popupOpen':\n                if (!navChk) {\n                    return;\n                }\n                if (popObj && !isVisible(popObj.element)) {\n                    popObj.element.style.top = rootEle.offsetHeight + 'px';\n                    popObj.show({ name: 'FadeIn', duration: 100 });\n                }\n                else {\n                    popObj.hide(popAnimate);\n                }\n                break;\n        }\n    }\n    keyActionHandler(e) {\n        const trgt = e.target;\n        if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE$2)) {\n            return;\n        }\n        e.preventDefault();\n        const tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n        const tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n        const clst = this.clstElement(tbrNavChk, trgt);\n        if (clst || tbarScrollChk) {\n            this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n        }\n    }\n    /**\n     * Specifies the value to disable/enable the Toolbar component.\n     * When set to `true`, the component will be disabled.\n     *\n     * @param  {boolean} value - Based on this Boolean value, Toolbar will be enabled (false) or disabled (true).\n     * @returns {void}.\n     */\n    disable(value) {\n        const rootEle = this.element;\n        if (value) {\n            rootEle.classList.add(CLS_DISABLE$2);\n        }\n        else {\n            rootEle.classList.remove(CLS_DISABLE$2);\n        }\n        rootEle.setAttribute('tabindex', !value ? '0' : '-1');\n        if (this.activeEle) {\n            this.activeEle.setAttribute('tabindex', !value ? '0' : '-1');\n        }\n        if (this.scrollModule) {\n            this.scrollModule.disable(value);\n        }\n        if (this.popObj) {\n            if (isVisible(this.popObj.element) && this.overflowMode !== 'Extended') {\n                this.popObj.hide();\n            }\n            rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');\n        }\n    }\n    eleContains(el) {\n        return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE$2) || el.getAttribute('disabled') || el.classList.contains(CLS_HIDDEN) || !isVisible(el);\n    }\n    eleFocus(closest$$1, pos) {\n        const sib = Object(closest$$1)[pos + 'ElementSibling'];\n        if (sib) {\n            const skipEle = this.eleContains(sib);\n            if (skipEle) {\n                this.eleFocus(sib, pos);\n                return;\n            }\n            this.elementFocus(sib);\n        }\n        else if (this.tbarAlign) {\n            let elem = Object(closest$$1.parentElement)[pos + 'ElementSibling'];\n            if (!isNullOrUndefined(elem) && elem.children.length === 0) {\n                elem = Object(elem)[pos + 'ElementSibling'];\n            }\n            if (!isNullOrUndefined(elem) && elem.children.length > 0) {\n                if (pos === 'next') {\n                    const el = elem.querySelector('.' + CLS_ITEM);\n                    if (this.eleContains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        el.firstElementChild.focus();\n                        this.activeEleSwitch(el);\n                    }\n                }\n                else {\n                    const el = elem.lastElementChild;\n                    if (this.eleContains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        this.elementFocus(el);\n                    }\n                }\n            }\n        }\n    }\n    clickHandler(e) {\n        const trgt = e.target;\n        const ele = this.element;\n        const isPopupElement = !isNullOrUndefined(closest(trgt, '.' + CLS_POPUPCLASS));\n        let clsList = trgt.classList;\n        let popupNav = closest(trgt, ('.' + CLS_TBARNAV));\n        if (!popupNav) {\n            popupNav = trgt;\n        }\n        if (!ele.children[0].classList.contains('e-hscroll') && !ele.children[0].classList.contains('e-vscroll')\n            && (clsList.contains(CLS_TBARNAV))) {\n            clsList = trgt.querySelector('.e-icons').classList;\n        }\n        if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n            this.popupClickHandler(ele, popupNav, CLS_RTL$2);\n        }\n        let itemObj;\n        const clst = closest(e.target, '.' + CLS_ITEM);\n        if ((isNullOrUndefined(clst) || clst.classList.contains(CLS_DISABLE$2)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n            return;\n        }\n        if (clst) {\n            const tempItem = this.items[this.tbarEle.indexOf(clst)];\n            itemObj = tempItem;\n        }\n        const eventArgs = { originalEvent: e, item: itemObj };\n        if (itemObj && !isNullOrUndefined(itemObj.click)) {\n            this.trigger('items[' + this.tbarEle.indexOf(clst) + '].click', eventArgs);\n        }\n        if (!eventArgs.cancel) {\n            this.trigger('clicked', eventArgs, (clickedArgs) => {\n                if (!isNullOrUndefined(this.popObj) && isPopupElement && !clickedArgs.cancel && this.overflowMode === 'Popup' &&\n                    clickedArgs.item && clickedArgs.item.type !== 'Input') {\n                    this.popObj.hide({ name: 'FadeOut', duration: 100 });\n                }\n            });\n        }\n    }\n    popupClickHandler(ele, popupNav, CLS_RTL) {\n        const popObj = this.popObj;\n        if (isVisible(popObj.element)) {\n            popupNav.classList.remove(CLS_TBARNAVACT);\n            popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        else {\n            if (ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = true;\n                popObj.position = { X: 'left', Y: 'top' };\n            }\n            if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = false;\n                popObj.position = { X: 'right', Y: 'top' };\n            }\n            popObj.dataBind();\n            popObj.refreshPosition();\n            popObj.element.style.top = this.getElementOffsetY() + 'px';\n            if (this.overflowMode === 'Extended') {\n                popObj.element.style.minHeight = '0px';\n            }\n            popupNav.classList.add(CLS_TBARNAVACT);\n            popObj.show({ name: 'FadeIn', duration: 100 });\n        }\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.initialize();\n        this.renderControl();\n        this.wireEvents();\n        this.renderComplete();\n    }\n    initialize() {\n        const width = formatUnit(this.width);\n        const height = formatUnit(this.height);\n        if (Browser.info.name !== 'msie' || this.height !== 'auto' || this.overflowMode === 'MultiRow') {\n            setStyleAttribute(this.element, { 'height': height });\n        }\n        setStyleAttribute(this.element, { 'width': width });\n        const ariaAttr = {\n            'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false',\n            'aria-orientation': !this.isVertical ? 'horizontal' : 'vertical'\n        };\n        attributes(this.element, ariaAttr);\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.split(' '));\n        }\n    }\n    renderControl() {\n        const ele = this.element;\n        this.trgtEle = (ele.children.length > 0) ? ele.querySelector('div') : null;\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n        this.renderItems();\n        this.renderLayout();\n    }\n    renderLayout() {\n        this.renderOverflowMode();\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {\n            this.popupRefresh(this.popObj.element, false);\n        }\n        this.separator();\n    }\n    itemsAlign(items, itemEleDom) {\n        let innerItem;\n        let innerPos;\n        if (!this.tbarEle) {\n            this.tbarEle = [];\n        }\n        for (let i = 0; i < items.length; i++) {\n            innerItem = this.renderSubComponent(items[i], i);\n            if (this.tbarEle.indexOf(innerItem) === -1) {\n                this.tbarEle.push(innerItem);\n            }\n            if (!this.tbarAlign) {\n                this.tbarItemAlign(items[i], itemEleDom, i);\n            }\n            innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n            if (innerPos) {\n                if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {\n                    this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);\n                }\n                innerPos.appendChild(innerItem);\n            }\n            else {\n                itemEleDom.appendChild(innerItem);\n            }\n        }\n        if (this.isReact) {\n            const portals = 'portals';\n            this.notify('render-react-toolbar-template', this[portals]);\n            this.renderReactTemplates();\n        }\n    }\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    changeOrientation() {\n        const ele = this.element;\n        if (this.isVertical) {\n            ele.classList.remove(CLS_VERTICAL);\n            this.isVertical = false;\n            if (this.height === 'auto' || this.height === '100%') {\n                ele.style.height = this.height;\n            }\n            ele.setAttribute('aria-orientation', 'horizontal');\n        }\n        else {\n            ele.classList.add(CLS_VERTICAL);\n            this.isVertical = true;\n            ele.setAttribute('aria-orientation', 'vertical');\n            setStyleAttribute(this.element, { 'height': formatUnit(this.height), 'width': formatUnit(this.width) });\n        }\n        this.destroyMode();\n        this.refreshOverflow();\n    }\n    initScroll(element, innerItems) {\n        if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n            if (this.tbarAlign) {\n                this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n            }\n            if (this.isVertical) {\n                this.scrollModule = new VScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);\n            }\n            else {\n                this.scrollModule = new HScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);\n            }\n            if (this.cssClass) {\n                addClass([innerItems[0]], this.cssClass.split(' '));\n            }\n            this.remove(this.scrollModule.element, CLS_TBARPOS);\n            setStyleAttribute(this.element, { overflow: 'hidden' });\n        }\n    }\n    itemWidthCal(items) {\n        let width = 0;\n        let style;\n        [].slice.call(selectAll('.' + CLS_ITEM, items)).forEach((el) => {\n            if (isVisible(el)) {\n                style = window.getComputedStyle(el);\n                width += this.isVertical ? el.offsetHeight : el.offsetWidth;\n                width += parseFloat(this.isVertical ? style.marginTop : style.marginRight);\n                width += parseFloat(this.isVertical ? style.marginBottom : style.marginLeft);\n            }\n        });\n        return width;\n    }\n    getScrollCntEle(innerItem) {\n        const trgClass = (this.isVertical) ? '.e-vscroll-content' : '.e-hscroll-content';\n        return innerItem.querySelector(trgClass);\n    }\n    checkOverflow(element, innerItem) {\n        if (isNullOrUndefined(element) || isNullOrUndefined(innerItem) || !isVisible(element)) {\n            return false;\n        }\n        const eleWidth = this.isVertical ? element.offsetHeight : element.offsetWidth;\n        let itemWidth = this.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;\n        if (this.tbarAlign || this.scrollModule || (eleWidth === itemWidth)) {\n            itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);\n        }\n        const popNav = element.querySelector('.' + CLS_TBARNAV);\n        const scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n        let navEleWidth = 0;\n        if (popNav) {\n            navEleWidth = this.isVertical ? popNav.offsetHeight : popNav.offsetWidth;\n        }\n        else if (scrollNav) {\n            navEleWidth = this.isVertical ? (scrollNav.offsetHeight * (2)) : (scrollNav.offsetWidth * 2);\n        }\n        if (itemWidth > eleWidth - navEleWidth) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Refresh the whole Toolbar component without re-rendering.\n     * - It is used to manually refresh the Toolbar overflow modes such as scrollable, popup, multi row, and extended.\n     * - It will refresh the Toolbar component after loading items dynamically.\n     *\n     * @returns {void}.\n     */\n    refreshOverflow() {\n        this.resize();\n    }\n    toolbarAlign(innerItems) {\n        if (this.tbarAlign) {\n            this.add(innerItems, CLS_TBARPOS);\n            this.itemPositioning();\n        }\n    }\n    renderOverflowMode() {\n        const ele = this.element;\n        const innerItems = ele.querySelector('.' + CLS_ITEMS);\n        const priorityCheck = this.popupPriCount > 0;\n        if (ele && ele.children.length > 0) {\n            this.offsetWid = ele.offsetWidth;\n            this.remove(this.element, 'e-toolpop');\n            if (Browser.info.name === 'msie' && this.height === 'auto') {\n                ele.style.height = '';\n            }\n            switch (this.overflowMode) {\n                case 'Scrollable':\n                    if (isNullOrUndefined(this.scrollModule)) {\n                        this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS)));\n                    }\n                    break;\n                case 'Popup':\n                    this.add(this.element, 'e-toolpop');\n                    if (this.tbarAlign) {\n                        this.removePositioning();\n                    }\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        this.setOverflowAttributes(ele);\n                    }\n                    this.toolbarAlign(innerItems);\n                    break;\n                case 'MultiRow':\n                    this.add(innerItems, CLS_MULTIROW);\n                    if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {\n                        this.removePositioning();\n                        this.add(innerItems, CLS_MULTIROWPOS);\n                    }\n                    if (ele.style.overflow === 'hidden') {\n                        ele.style.overflow = '';\n                    }\n                    if (Browser.info.name === 'msie' || ele.style.height !== 'auto') {\n                        ele.style.height = 'auto';\n                    }\n                    break;\n                case 'Extended':\n                    this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        if (this.tbarAlign) {\n                            this.removePositioning();\n                        }\n                        this.setOverflowAttributes(ele);\n                    }\n                    this.toolbarAlign(innerItems);\n            }\n        }\n    }\n    setOverflowAttributes(ele) {\n        this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('role', 'list');\n    }\n    separator() {\n        const element = this.element;\n        const eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));\n        const multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);\n        const extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);\n        const eleInlineItem = this.overflowMode === 'MultiRow' ? multiVar : extendVar;\n        if (eleInlineItem !== null) {\n            if (this.overflowMode === 'MultiRow') {\n                eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);\n            }\n            else if (this.overflowMode === 'Extended') {\n                eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);\n            }\n        }\n        for (let i = 0; i <= eleItem.length - 1; i++) {\n            if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {\n                if (this.overflowMode === 'MultiRow') {\n                    eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);\n                }\n                else if (this.overflowMode === 'Extended') {\n                    eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);\n                }\n            }\n        }\n    }\n    createPopupEle(ele, innerEle) {\n        let innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        const vertical = this.isVertical;\n        if (!innerNav) {\n            this.createPopupIcon(ele);\n        }\n        innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        const innerNavDom = (vertical ? innerNav.offsetHeight : innerNav.offsetWidth);\n        const eleWidth = ((vertical ? ele.offsetHeight : ele.offsetWidth) - (innerNavDom));\n        this.element.classList.remove('e-rtl');\n        setStyleAttribute(this.element, { direction: 'initial' });\n        this.checkPriority(ele, innerEle, eleWidth, true);\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        this.element.style.removeProperty('direction');\n        this.createPopup();\n    }\n    pushingPoppedEle(tbarObj, popupPri, ele, eleHeight, sepHeight) {\n        const element = tbarObj.element;\n        const poppedEle = [].slice.call(selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n        let nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n        let nodeIndex = 0;\n        let nodePri = 0;\n        poppedEle.forEach((el, index) => {\n            nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n            if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n                if (tbarObj.tbResize && nodes.length > index) {\n                    ele.insertBefore(el, nodes[index]);\n                    ++nodePri;\n                }\n                else {\n                    ele.insertBefore(el, ele.children[nodes.length]);\n                    ++nodePri;\n                }\n            }\n            else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (el.classList.contains(CLS_POPOVERFLOW)) {\n                popupPri.push(el);\n            }\n            else if (tbarObj.tbResize) {\n                ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n                ++nodeIndex;\n            }\n            else {\n                ele.appendChild(el);\n            }\n            if (el.classList.contains(CLS_SEPARATOR)) {\n                setStyleAttribute(el, { display: '', height: sepHeight + 'px' });\n            }\n            else {\n                setStyleAttribute(el, { display: '', height: eleHeight + 'px' });\n            }\n        });\n        popupPri.forEach((el) => {\n            ele.appendChild(el);\n        });\n        const tbarEle = selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n        for (let i = tbarEle.length - 1; i >= 0; i--) {\n            const tbarElement = tbarEle[i];\n            if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== 'Extended') {\n                setStyleAttribute(tbarElement, { display: 'none' });\n            }\n            else {\n                break;\n            }\n        }\n    }\n    createPopup() {\n        const element = this.element;\n        let sepHeight;\n        let sepItem;\n        if (this.overflowMode === 'Extended') {\n            sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ')');\n            sepHeight = (element.style.height === 'auto' || element.style.height === '') ? null : sepItem.offsetHeight;\n        }\n        const eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_POPUP + ')');\n        const eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : (eleItem && eleItem.offsetHeight);\n        let ele;\n        const popupPri = [];\n        if (select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element)) {\n            ele = select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element);\n        }\n        else {\n            const extendEle = this.createElement('div', {\n                id: element.id + '_popup', className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS\n            });\n            const popupEle = this.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n            ele = this.overflowMode === 'Extended' ? extendEle : popupEle;\n        }\n        this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);\n        this.popupInit(element, ele);\n    }\n    getElementOffsetY() {\n        return (this.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ?\n            this.element.clientHeight : this.element.offsetHeight);\n    }\n    popupInit(element, ele) {\n        if (!this.popObj) {\n            element.appendChild(ele);\n            if (this.cssClass) {\n                addClass([ele], this.cssClass.split(' '));\n            }\n            setStyleAttribute(this.element, { overflow: '' });\n            const eleStyles = window.getComputedStyle(this.element);\n            const popup = new Popup(null, {\n                relateTo: this.element,\n                offsetY: (this.isVertical) ? 0 : this.getElementOffsetY(),\n                enableRtl: this.enableRtl,\n                open: this.popupOpen.bind(this),\n                close: this.popupClose.bind(this),\n                collision: { Y: this.enableCollision ? 'flip' : 'none' },\n                position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n            });\n            popup.appendTo(ele);\n            if (this.overflowMode === 'Extended') {\n                popup.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n                popup.offsetX = 0;\n            }\n            EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n            EventHandler.add(document, 'click ', this.docEvent.bind(this));\n            popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n            if (this.isVertical) {\n                popup.element.style.visibility = 'hidden';\n            }\n            if (this.isExtendedOpen) {\n                const popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n                popupNav.classList.add(CLS_TBARNAVACT);\n                classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n                this.element.querySelector('.' + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);\n            }\n            else {\n                popup.hide();\n            }\n            this.popObj = popup;\n            this.element.setAttribute('aria-haspopup', 'true');\n        }\n        else {\n            const popupEle = this.popObj.element;\n            setStyleAttribute(popupEle, { maxHeight: '', display: 'block' });\n            setStyleAttribute(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n        }\n    }\n    tbarPopupHandler(isOpen) {\n        if (this.overflowMode === 'Extended') {\n            if (isOpen) {\n                this.add(this.element, CLS_EXTENDEDPOPOPEN);\n            }\n            else {\n                this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    popupOpen(e) {\n        const popObj = this.popObj;\n        if (!this.isVertical) {\n            popObj.offsetY = this.getElementOffsetY();\n            popObj.dataBind();\n        }\n        const popupEle = this.popObj.element;\n        const toolEle = this.popObj.element.parentElement;\n        const popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n        setStyleAttribute(popObj.element, { height: 'auto', maxHeight: '' });\n        popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n        if (this.overflowMode === 'Extended') {\n            popObj.element.style.minHeight = '';\n        }\n        const popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;\n        const popIcon = popupNav.firstElementChild;\n        popupNav.classList.add(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n        this.tbarPopupHandler(true);\n        const scrollVal = isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;\n        if (!this.isVertical && ((window.innerHeight + scrollVal) < popupElePos) && (this.element.offsetTop < popupEle.offsetHeight)) {\n            let overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n            popObj.height = overflowHeight + 'px';\n            for (let i = 0; i <= popupEle.childElementCount; i++) {\n                const ele = popupEle.children[i];\n                if (ele.offsetTop + ele.offsetHeight > overflowHeight) {\n                    overflowHeight = ele.offsetTop;\n                    break;\n                }\n            }\n            setStyleAttribute(popObj.element, { maxHeight: overflowHeight + 'px' });\n        }\n        else if (this.isVertical) {\n            const tbEleData = this.element.getBoundingClientRect();\n            setStyleAttribute(popObj.element, { maxHeight: (tbEleData.top + this.element.offsetHeight) + 'px', bottom: 0, visibility: '' });\n        }\n        if (popObj) {\n            const popupOffset = popupEle.getBoundingClientRect();\n            if (popupOffset.right > document.documentElement.clientWidth && popupOffset.width > toolEle.getBoundingClientRect().width) {\n                popObj.collision = { Y: 'none' };\n                popObj.dataBind();\n            }\n            popObj.refreshPosition();\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    popupClose(e) {\n        const element = this.element;\n        const popupNav = element.querySelector('.' + CLS_TBARNAV);\n        const popIcon = popupNav.firstElementChild;\n        popupNav.classList.remove(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n        this.tbarPopupHandler(false);\n    }\n    checkPriority(ele, inEle, eleWidth, pre) {\n        const popPriority = this.popupPriCount > 0;\n        const len = inEle.length;\n        const eleWid = eleWidth;\n        let eleOffset;\n        let checkoffset;\n        let sepCheck = 0;\n        let itemCount = 0;\n        let itemPopCount = 0;\n        const checkClass = (ele, val) => {\n            let rVal = false;\n            val.forEach((cls) => {\n                if (ele.classList.contains(cls)) {\n                    rVal = true;\n                }\n            });\n            return rVal;\n        };\n        for (let i = len - 1; i >= 0; i--) {\n            let mrgn;\n            const compuStyle = window.getComputedStyle(inEle[i]);\n            if (this.isVertical) {\n                mrgn = parseFloat((compuStyle).marginTop);\n                mrgn += parseFloat((compuStyle).marginBottom);\n            }\n            else {\n                mrgn = parseFloat((compuStyle).marginRight);\n                mrgn += parseFloat((compuStyle).marginLeft);\n            }\n            const fstEleCheck = inEle[i] === this.tbarEle[0];\n            if (fstEleCheck) {\n                this.tbarEleMrgn = mrgn;\n            }\n            eleOffset = this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth;\n            const eleWid = fstEleCheck ? (eleOffset + mrgn) : eleOffset;\n            if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {\n                inEle[i].classList.add(CLS_POPUP);\n                if (this.isVertical) {\n                    setStyleAttribute(inEle[i], { display: 'none', minHeight: eleWid + 'px' });\n                }\n                else {\n                    setStyleAttribute(inEle[i], { display: 'none', minWidth: eleWid + 'px' });\n                }\n                itemPopCount++;\n            }\n            if (this.isVertical) {\n                checkoffset = (inEle[i].offsetTop + inEle[i].offsetHeight + mrgn) > eleWidth;\n            }\n            else {\n                checkoffset = (inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth;\n            }\n            if (checkoffset) {\n                if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n                    if (this.overflowMode === 'Extended') {\n                        if (itemCount === itemPopCount) {\n                            const sepEle = inEle[i];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                inEle[i].classList.add(CLS_POPUP);\n                                itemPopCount++;\n                            }\n                        }\n                        itemCount++;\n                    }\n                    else if (this.overflowMode === 'Popup') {\n                        if (sepCheck > 0 && itemCount === itemPopCount) {\n                            const sepEle = inEle[i + itemCount + (sepCheck - 1)];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                setStyleAttribute(sepEle, { display: 'none' });\n                            }\n                        }\n                        sepCheck++;\n                        itemCount = 0;\n                        itemPopCount = 0;\n                    }\n                }\n                else {\n                    itemCount++;\n                }\n                if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n                    eleWidth -= ((this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + (mrgn));\n                }\n                else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                    inEle[i].classList.add(CLS_POPUP);\n                    if (this.isVertical) {\n                        setStyleAttribute(inEle[i], { display: 'none', minHeight: eleWid + 'px' });\n                    }\n                    else {\n                        setStyleAttribute(inEle[i], { display: 'none', minWidth: eleWid + 'px' });\n                    }\n                    itemPopCount++;\n                }\n                else {\n                    eleWidth -= ((this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + (mrgn));\n                }\n            }\n        }\n        if (pre) {\n            const popedEle = selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n            this.checkPriority(ele, popedEle, eleWid, false);\n        }\n    }\n    createPopupIcon(element) {\n        const id = element.id.concat('_nav');\n        let className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n        className = this.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;\n        const nav = this.createElement('div', { id: id, className: className });\n        if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n            nav.classList.add('e-ie-align');\n        }\n        const navItem = this.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n        nav.appendChild(navItem);\n        nav.setAttribute('tabindex', '0');\n        nav.setAttribute('role', 'list');\n        element.appendChild(nav);\n    }\n    tbarPriRef(inEle, indx, sepPri, el, des, elWid, wid, ig) {\n        const ignoreCount = ig;\n        const popEle = this.popObj.element;\n        const query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n        const priEleCnt = selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n        const checkClass = (ele, val) => {\n            return ele.classList.contains(val);\n        };\n        if (selectAll(query, inEle).length === 0) {\n            const eleSep = inEle.children[indx - (indx - sepPri) - 1];\n            const ignoreCheck = (!isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n            if ((!isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep)) || ignoreCheck) {\n                const sepDisplay = 'none';\n                eleSep.style.display = 'inherit';\n                const eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n                const prevSep = eleSep.previousElementSibling;\n                if ((elWid + eleSepWidth) < wid || des) {\n                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n                    if (!isNullOrUndefined(prevSep)) {\n                        prevSep.style.display = '';\n                    }\n                }\n                else {\n                    if (prevSep.classList.contains(CLS_SEPARATOR)) {\n                        prevSep.style.display = sepDisplay;\n                    }\n                }\n                eleSep.style.display = '';\n            }\n            else {\n                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n            }\n        }\n        else {\n            inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n        }\n    }\n    popupRefresh(popupEle, destroy) {\n        const ele = this.element;\n        const isVer = this.isVertical;\n        const innerEle = ele.querySelector('.' + CLS_ITEMS);\n        let popNav = ele.querySelector('.' + CLS_TBARNAV);\n        if (isNullOrUndefined(popNav)) {\n            return;\n        }\n        innerEle.removeAttribute('style');\n        popupEle.style.display = 'block';\n        let dimension;\n        if (isVer) {\n            dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);\n        }\n        else {\n            dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n        }\n        let popupEleWidth = 0;\n        [].slice.call(popupEle.children).forEach((el) => {\n            popupEleWidth += this.popupEleWidth(el);\n            setStyleAttribute(el, { 'position': '' });\n        });\n        if ((dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth)) > (popupEleWidth) && this.popupPriCount === 0) {\n            destroy = true;\n        }\n        this.popupEleRefresh(dimension, popupEle, destroy);\n        popupEle.style.display = '';\n        if (popupEle.children.length === 0 && popNav && this.popObj) {\n            detach(popNav);\n            popNav = null;\n            this.popObj.destroy();\n            detach(this.popObj.element);\n            this.popObj = null;\n            ele.setAttribute('aria-haspopup', 'false');\n        }\n    }\n    ignoreEleFetch(index, innerEle) {\n        const ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n        const ignoreInx = [];\n        let count = 0;\n        if (ignoreEle.length > 0) {\n            ignoreEle.forEach((ele) => {\n                ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n            });\n        }\n        else {\n            return 0;\n        }\n        ignoreInx.forEach((val) => {\n            if (val <= index) {\n                count++;\n            }\n        });\n        return count;\n    }\n    checkPopupRefresh(root, popEle) {\n        popEle.style.display = 'block';\n        const elWid = this.popupEleWidth(popEle.firstElementChild);\n        popEle.firstElementChild.style.removeProperty('Position');\n        const tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;\n        const tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;\n        popEle.style.removeProperty('display');\n        if (tbarWidth > (elWid + tbarItemsWid)) {\n            return true;\n        }\n        return false;\n    }\n    popupEleWidth(el) {\n        el.style.position = 'absolute';\n        let elWidth = this.isVertical ? el.offsetHeight : el.offsetWidth;\n        const btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n        if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n            const btn = el.children[0];\n            if (!isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n                btnText.style.display = 'none';\n            }\n            else if (!isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n                btnText.style.display = 'block';\n            }\n            btn.style.minWidth = '0%';\n            elWidth = parseFloat(!this.isVertical ? el.style.minWidth : el.style.minHeight);\n            btn.style.minWidth = '';\n            btn.style.minHeight = '';\n            if (!isNullOrUndefined(btnText)) {\n                btnText.style.display = '';\n            }\n        }\n        return elWidth;\n    }\n    popupEleRefresh(width, popupEle, destroy) {\n        const popPriority = this.popupPriCount > 0;\n        let eleSplice = this.tbarEle;\n        let priEleCnt;\n        let index;\n        let innerEle = this.element.querySelector('.' + CLS_ITEMS);\n        let ignoreCount = 0;\n        for (const el of [].slice.call(popupEle.children)) {\n            if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {\n                continue;\n            }\n            let elWidth = this.popupEleWidth(el);\n            if (el === this.tbarEle[0]) {\n                elWidth += this.tbarEleMrgn;\n            }\n            el.style.position = '';\n            if (elWidth < width || destroy) {\n                setStyleAttribute(el, { minWidth: '', height: '', minHeight: '' });\n                if (!el.classList.contains(CLS_POPOVERFLOW)) {\n                    el.classList.remove(CLS_POPUP);\n                }\n                index = this.tbarEle.indexOf(el);\n                if (this.tbarAlign) {\n                    const pos = this.items[index].align;\n                    index = this.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);\n                    eleSplice = this.tbarAlgEle[(pos + 's').toLowerCase()];\n                    innerEle = this.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());\n                }\n                let sepBeforePri = 0;\n                if (this.overflowMode !== 'Extended') {\n                    eleSplice.slice(0, index).forEach((el) => {\n                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n                            if (el.classList.contains(CLS_SEPARATOR)) {\n                                el.style.display = '';\n                                width -= el.offsetWidth;\n                            }\n                            sepBeforePri++;\n                        }\n                    });\n                }\n                ignoreCount = this.ignoreEleFetch(index, innerEle);\n                if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                    this.tbarPriRef(innerEle, index, sepBeforePri, el, destroy, elWidth, width, ignoreCount);\n                    width -= el.offsetWidth;\n                }\n                else if (index === 0) {\n                    innerEle.insertBefore(el, innerEle.firstChild);\n                    width -= el.offsetWidth;\n                }\n                else {\n                    priEleCnt = selectAll('.' + CLS_TBAROVERFLOW, this.popObj.element).length;\n                    innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n                    width -= el.offsetWidth;\n                }\n                el.style.height = '';\n            }\n            else {\n                break;\n            }\n        }\n        const checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n        if (checkOverflow && !destroy) {\n            this.renderOverflowMode();\n        }\n    }\n    removePositioning() {\n        const item = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        this.remove(item, CLS_TBARPOS);\n        const innerItem = [].slice.call(item.childNodes);\n        innerItem[1].removeAttribute('style');\n        innerItem[2].removeAttribute('style');\n    }\n    refreshPositioning() {\n        const item = this.element.querySelector('.' + CLS_ITEMS);\n        this.add(item, CLS_TBARPOS);\n        this.itemPositioning();\n    }\n    itemPositioning() {\n        const item = this.element.querySelector('.' + CLS_ITEMS);\n        let margin;\n        if (isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        const popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n        let innerItem;\n        if (this.scrollModule) {\n            const trgClass = (this.isVertical) ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;\n            innerItem = [].slice.call(item.querySelector('.' + trgClass).children);\n        }\n        else {\n            innerItem = [].slice.call(item.childNodes);\n        }\n        if (this.isVertical) {\n            margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;\n        }\n        else {\n            margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n        }\n        let tbarWid = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth;\n        if (popupNav) {\n            tbarWid -= (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth);\n            const popWid = (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + 'px';\n            innerItem[2].removeAttribute('style');\n            if (this.isVertical) {\n                if (this.enableRtl) {\n                    innerItem[2].style.top = popWid;\n                }\n                else {\n                    innerItem[2].style.bottom = popWid;\n                }\n            }\n            else {\n                if (this.enableRtl) {\n                    innerItem[2].style.left = popWid;\n                }\n                else {\n                    innerItem[2].style.right = popWid;\n                }\n            }\n        }\n        if (tbarWid <= margin) {\n            return;\n        }\n        const value = (((tbarWid - margin)) - (!this.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;\n        innerItem[1].removeAttribute('style');\n        const mrgn = ((!this.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value) + 'px';\n        if (this.isVertical) {\n            if (this.enableRtl) {\n                innerItem[1].style.marginBottom = mrgn;\n            }\n            else {\n                innerItem[1].style.marginTop = mrgn;\n            }\n        }\n        else {\n            if (this.enableRtl) {\n                innerItem[1].style.marginRight = mrgn;\n            }\n            else {\n                innerItem[1].style.marginLeft = mrgn;\n            }\n        }\n    }\n    tbarItemAlign(item, itemEle, pos) {\n        if (item.showAlwaysInPopup && item.overflow !== 'Show') {\n            return;\n        }\n        const alignDiv = [];\n        alignDiv.push(this.createElement('div', { className: CLS_TBARLEFT }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARCENTER }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARRIGHT }));\n        if (pos === 0 && item.align !== 'Left') {\n            alignDiv.forEach((ele) => {\n                itemEle.appendChild(ele);\n            });\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n        else if (item.align !== 'Left') {\n            const alignEle = itemEle.childNodes;\n            const leftAlign = alignDiv[0];\n            [].slice.call(alignEle).forEach((el) => {\n                this.tbarAlgEle.lefts.push(el);\n                leftAlign.appendChild(el);\n            });\n            itemEle.appendChild(leftAlign);\n            itemEle.appendChild(alignDiv[1]);\n            itemEle.appendChild(alignDiv[2]);\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n    }\n    ctrlTemplate() {\n        this.ctrlTem = this.trgtEle.cloneNode(true);\n        this.add(this.trgtEle, CLS_ITEMS);\n        this.tbarEle = [];\n        const innerEle = [].slice.call(this.trgtEle.children);\n        innerEle.forEach((ele) => {\n            if (ele.tagName === 'DIV') {\n                this.tbarEle.push(ele);\n                ele.setAttribute('aria-disabled', 'false');\n                this.add(ele, CLS_ITEM);\n            }\n        });\n    }\n    renderItems() {\n        const ele = this.element;\n        const items = this.items;\n        if (this.trgtEle != null) {\n            this.ctrlTemplate();\n        }\n        else if (ele && items.length > 0) {\n            let itemEleDom;\n            if (ele && ele.children.length > 0) {\n                itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n            }\n            if (!itemEleDom) {\n                itemEleDom = this.createElement('div', { className: CLS_ITEMS });\n            }\n            this.itemsAlign(items, itemEleDom);\n            ele.appendChild(itemEleDom);\n        }\n    }\n    setAttr(attr, element) {\n        const key = Object.keys(attr);\n        let keyVal;\n        for (let i = 0; i < key.length; i++) {\n            keyVal = key[i];\n            if (keyVal === 'class') {\n                this.add(element, attr[keyVal]);\n            }\n            else {\n                element.setAttribute(keyVal, attr[keyVal]);\n            }\n        }\n    }\n    /**\n     * Enables or disables the specified Toolbar item.\n     *\n     * @param  {number|HTMLElement|NodeList} items - DOM element or an array of items to be enabled or disabled.\n     * @param  {boolean} isEnable  - Boolean value that determines whether the command should be enabled or disabled.\n     * By default, `isEnable` is set to true.\n     * @returns {void}.\n     */\n    enableItems(items, isEnable) {\n        const elements = items;\n        const len = elements.length;\n        let ele;\n        if (isNullOrUndefined(isEnable)) {\n            isEnable = true;\n        }\n        const enable = (isEnable, ele) => {\n            if (isEnable) {\n                ele.classList.remove(CLS_DISABLE$2);\n                ele.setAttribute('aria-disabled', 'false');\n            }\n            else {\n                ele.classList.add(CLS_DISABLE$2);\n                ele.setAttribute('aria-disabled', 'true');\n            }\n        };\n        if (!isNullOrUndefined(len) && len >= 1) {\n            for (let a = 0, element = [].slice.call(elements); a < len; a++) {\n                const itemElement = element[a];\n                if (typeof (itemElement) === 'number') {\n                    ele = this.getElementByIndex(itemElement);\n                    if (isNullOrUndefined(ele)) {\n                        return;\n                    }\n                    else {\n                        elements[a] = ele;\n                    }\n                }\n                else {\n                    ele = itemElement;\n                }\n                enable(isEnable, ele);\n            }\n            if (isEnable) {\n                removeClass(elements, CLS_DISABLE$2);\n            }\n            else {\n                addClass(elements, CLS_DISABLE$2);\n            }\n        }\n        else {\n            if (typeof (elements) === 'number') {\n                ele = this.getElementByIndex(elements);\n                if (isNullOrUndefined(ele)) {\n                    return;\n                }\n            }\n            else {\n                ele = items;\n            }\n            enable(isEnable, ele);\n        }\n    }\n    getElementByIndex(index) {\n        if (this.tbarEle[index]) {\n            return this.tbarEle[index];\n        }\n        return null;\n    }\n    /**\n     * Adds new items to the Toolbar that accepts an array as Toolbar items.\n     *\n     * @param  {ItemModel[]} items - DOM element or an array of items to be added to the Toolbar.\n     * @param  {number} index - Number value that determines where the command is to be added. By default, index is 0.\n     * @returns {void}.\n     */\n    addItems(items, index) {\n        let innerItems;\n        this.extendedOpen();\n        const itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNullOrUndefined(itemsDiv)) {\n            this.itemsRerender(items);\n            return;\n        }\n        let innerEle;\n        let itemAgn = 'Left';\n        if (isNullOrUndefined(index)) {\n            index = 0;\n        }\n        items.forEach((e) => {\n            if (!isNullOrUndefined(e.align) && e.align !== 'Left' && itemAgn === 'Left') {\n                itemAgn = e.align;\n            }\n        });\n        for (const item of items) {\n            if (isNullOrUndefined(item.type)) {\n                item.type = 'Button';\n            }\n            innerItems = selectAll('.' + CLS_ITEM, this.element);\n            item.align = itemAgn;\n            innerEle = this.renderSubComponent(item, index);\n            if (this.tbarEle.length >= index && innerItems.length >= 0) {\n                if (isNullOrUndefined(this.scrollModule)) {\n                    this.destroyMode();\n                }\n                const algIndex = item.align[0] === 'L' ? 0 : item.align[0] === 'C' ? 1 : 2;\n                let ele;\n                if (!this.tbarAlign && itemAgn !== 'Left') {\n                    this.tbarItemAlign(item, itemsDiv, 1);\n                    this.tbarAlign = true;\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.appendChild(innerEle);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].push(innerEle);\n                    this.refreshPositioning();\n                }\n                else if (this.tbarAlign) {\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.insertBefore(innerEle, ele.children[index]);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].splice(index, 0, innerEle);\n                    this.refreshPositioning();\n                }\n                else if (innerItems.length === 0) {\n                    innerItems = selectAll('.' + CLS_ITEMS, this.element);\n                    innerItems[0].appendChild(innerEle);\n                }\n                else {\n                    innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n                }\n                this.items.splice(index, 0, item);\n                if (item.template) {\n                    this.tbarEle.splice(this.tbarEle.length - 1, 1);\n                }\n                this.tbarEle.splice(index, 0, innerEle);\n                index++;\n                this.offsetWid = itemsDiv.offsetWidth;\n            }\n        }\n        itemsDiv.style.width = '';\n        this.renderOverflowMode();\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    /**\n     * Removes the items from the Toolbar. Acceptable arguments are index of item/HTMLElement/node list.\n     *\n     * @param  {number|HTMLElement|NodeList|HTMLElement[]} args\n     * Index or DOM element or an Array of item which is to be removed from the Toolbar.\n     * @returns {void}.\n     */\n    removeItems(args) {\n        const elements = args;\n        let index;\n        let innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n        if (typeof (elements) === 'number') {\n            index = parseInt(args.toString(), 10);\n            this.removeItemByIndex(index, innerItems);\n        }\n        else {\n            if (elements && elements.length > 1) {\n                for (const ele of [].slice.call(elements)) {\n                    index = this.tbarEle.indexOf(ele);\n                    this.removeItemByIndex(index, innerItems);\n                    innerItems = selectAll('.' + CLS_ITEM, this.element);\n                }\n            }\n            else {\n                const ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n                index = innerItems.indexOf(ele);\n                this.removeItemByIndex(index, innerItems);\n            }\n        }\n        this.resize();\n    }\n    removeItemByIndex(index, innerItems) {\n        if (this.tbarEle[index] && innerItems[index]) {\n            const eleIdx = this.tbarEle.indexOf(innerItems[index]);\n            if (this.tbarAlign) {\n                const indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].indexOf(this.tbarEle[eleIdx]);\n                this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].splice(indexAgn, 1);\n            }\n            if (this.isReact) {\n                this.clearTemplate();\n            }\n            const btnItem = innerItems[index].querySelector('.e-control.e-btn');\n            if (!isNullOrUndefined(btnItem) && !isNullOrUndefined(btnItem.ej2_instances[0]) && !(btnItem.ej2_instances[0].isDestroyed)) {\n                btnItem.ej2_instances[0].destroy();\n            }\n            detach(innerItems[index]);\n            this.items.splice(eleIdx, 1);\n            this.tbarEle.splice(eleIdx, 1);\n        }\n    }\n    templateRender(templateProp, innerEle, item, index) {\n        const itemType = item.type;\n        const eleObj = templateProp;\n        let isComponent;\n        if (typeof (templateProp) === 'object') {\n            isComponent = typeof (eleObj.appendTo) === 'function';\n        }\n        if (typeof (templateProp) === 'string' || !isComponent) {\n            let templateFn;\n            let val = templateProp;\n            const regEx = new RegExp(/<(?=.*? .*?\\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\\/\\1>/i);\n            val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n            try {\n                if (typeof (templateProp) === 'object' && !isNullOrUndefined(templateProp.tagName)) {\n                    innerEle.appendChild(templateProp);\n                }\n                else if (typeof (templateProp) === 'string' && regEx.test(val)) {\n                    innerEle.innerHTML = val;\n                }\n                else if (document.querySelectorAll(val).length) {\n                    const ele = document.querySelector(val);\n                    const tempStr = ele.outerHTML.trim();\n                    innerEle.appendChild(ele);\n                    ele.style.display = '';\n                    if (!isNullOrUndefined(tempStr)) {\n                        this.tempId.push(val);\n                    }\n                }\n                else {\n                    templateFn = compile(val);\n                }\n            }\n            catch (e) {\n                templateFn = compile(val);\n            }\n            let tempArray;\n            if (!isNullOrUndefined(templateFn)) {\n                const toolbarTemplateID = this.element.id + index + '_template';\n                tempArray = templateFn({}, this, 'template', toolbarTemplateID, this.isStringTemplate);\n            }\n            if (!isNullOrUndefined(tempArray) && tempArray.length > 0) {\n                [].slice.call(tempArray).forEach((ele) => {\n                    if (!isNullOrUndefined(ele.tagName)) {\n                        ele.style.display = '';\n                    }\n                    innerEle.appendChild(ele);\n                });\n            }\n        }\n        else if (itemType === 'Input') {\n            const ele = this.createElement('input');\n            if (item.id) {\n                ele.id = item.id;\n            }\n            else {\n                ele.id = getUniqueID('tbr-ipt');\n            }\n            innerEle.appendChild(ele);\n            eleObj.appendTo(ele);\n        }\n        this.add(innerEle, CLS_TEMPLATE);\n        this.tbarEle.push(innerEle);\n    }\n    buttonRendering(item, innerEle) {\n        const dom = this.createElement('button', { className: CLS_TBARBTN });\n        dom.setAttribute('type', 'button');\n        const textStr = item.text;\n        let iconCss;\n        let iconPos;\n        if (item.id) {\n            dom.id = item.id;\n        }\n        else {\n            dom.id = getUniqueID('e-tbr-btn');\n        }\n        const btnTxt = this.createElement('span', { className: 'e-tbar-btn-text' });\n        if (textStr) {\n            btnTxt.innerHTML = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(textStr) : textStr;\n            dom.appendChild(btnTxt);\n            dom.classList.add('e-tbtn-txt');\n        }\n        else {\n            this.add(innerEle, 'e-tbtn-align');\n        }\n        if (item.prefixIcon || item.suffixIcon) {\n            if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n                iconCss = item.prefixIcon + ' e-icons';\n                iconPos = 'Left';\n            }\n            else {\n                iconCss = item.suffixIcon + ' e-icons';\n                iconPos = 'Right';\n            }\n        }\n        const btnObj = new Button({ iconCss: iconCss, iconPosition: iconPos });\n        btnObj.createElement = this.createElement;\n        btnObj.appendTo(dom);\n        if (item.width) {\n            setStyleAttribute(dom, { 'width': formatUnit(item.width) });\n        }\n        return dom;\n    }\n    renderSubComponent(item, index) {\n        let dom;\n        const innerEle = this.createElement('div', { className: CLS_ITEM });\n        innerEle.setAttribute('aria-disabled', 'false');\n        const tempDom = this.createElement('div', {\n            innerHTML: this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.tooltipText) : item.tooltipText\n        });\n        if (!this.tbarEle) {\n            this.tbarEle = [];\n        }\n        if (item.htmlAttributes) {\n            this.setAttr(item.htmlAttributes, innerEle);\n        }\n        if (item.tooltipText) {\n            innerEle.setAttribute('title', tempDom.textContent);\n        }\n        if (item.cssClass) {\n            innerEle.className = innerEle.className + ' ' + item.cssClass;\n        }\n        if (item.template) {\n            this.templateRender(item.template, innerEle, item, index);\n        }\n        else {\n            switch (item.type) {\n                case 'Button':\n                    dom = this.buttonRendering(item, innerEle);\n                    dom.setAttribute('tabindex', '-1');\n                    dom.setAttribute('aria-label', (item.text || item.tooltipText));\n                    innerEle.appendChild(dom);\n                    innerEle.addEventListener('click', this.itemClick.bind(this));\n                    break;\n                case 'Separator':\n                    this.add(innerEle, CLS_SEPARATOR);\n                    break;\n            }\n        }\n        if (item.showTextOn) {\n            const sTxt = item.showTextOn;\n            if (sTxt === 'Toolbar') {\n                this.add(innerEle, CLS_POPUPTEXT);\n                this.add(innerEle, 'e-tbtn-align');\n            }\n            else if (sTxt === 'Overflow') {\n                this.add(innerEle, CLS_TBARTEXT);\n            }\n        }\n        if (item.overflow) {\n            const overflow = item.overflow;\n            if (overflow === 'Show') {\n                this.add(innerEle, CLS_TBAROVERFLOW);\n            }\n            else if (overflow === 'Hide') {\n                if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n                    this.add(innerEle, CLS_POPOVERFLOW);\n                }\n            }\n        }\n        if (item.overflow !== 'Show' && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {\n            this.add(innerEle, CLS_POPPRI);\n            this.popupPriCount++;\n        }\n        if (item.disabled) {\n            this.add(innerEle, CLS_DISABLE$2);\n        }\n        if (item.visible === false) {\n            this.add(innerEle, CLS_HIDDEN);\n        }\n        return innerEle;\n    }\n    itemClick(e) {\n        this.activeEleSwitch(e.currentTarget);\n    }\n    activeEleSwitch(ele) {\n        this.activeEleRemove(ele.firstElementChild);\n        this.activeEle.focus();\n    }\n    activeEleRemove(curEle) {\n        if (!isNullOrUndefined(this.activeEle)) {\n            this.activeEle.setAttribute('tabindex', '-1');\n        }\n        this.activeEle = curEle;\n        if (isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n            curEle.removeAttribute('tabindex');\n        }\n        else {\n            this.activeEle.setAttribute('tabindex', '0');\n        }\n    }\n    getPersistData() {\n        return this.addOnPersist([]);\n    }\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - Returns the module name as string.\n     * @private\n     */\n    getModuleName() {\n        return 'toolbar';\n    }\n    itemsRerender(newProp) {\n        this.items = this.tbarItemsCol;\n        if (this.isReact || this.isAngular) {\n            this.clearTemplate();\n        }\n        this.destroyMode();\n        this.destroyItems();\n        this.items = newProp;\n        this.tbarItemsCol = this.items;\n        this.renderItems();\n        this.renderOverflowMode();\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    resize() {\n        const ele = this.element;\n        this.tbResize = true;\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.overflowMode === 'Popup') {\n            this.popObj.hide();\n        }\n        const checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n        if (!checkOverflow) {\n            this.destroyScroll();\n            const multirowele = ele.querySelector('.' + CLS_ITEMS);\n            if (!isNullOrUndefined(multirowele)) {\n                this.remove(multirowele, CLS_MULTIROWPOS);\n                if (this.tbarAlign) {\n                    this.add(multirowele, CLS_TBARPOS);\n                }\n            }\n        }\n        if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n            return;\n        }\n        if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n            this.renderOverflowMode();\n        }\n        if (this.popObj) {\n            if (this.overflowMode === 'Extended') {\n                const eleStyles = window.getComputedStyle(this.element);\n                this.popObj.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n            }\n            if (this.tbarAlign) {\n                this.removePositioning();\n            }\n            this.popupRefresh(this.popObj.element, false);\n            if (this.tbarAlign) {\n                this.refreshPositioning();\n            }\n        }\n        if (this.element.querySelector('.' + CLS_HSCROLLBAR$1)) {\n            this.scrollStep = this.element.querySelector('.' + CLS_HSCROLLBAR$1).offsetWidth;\n        }\n        this.offsetWid = ele.offsetWidth;\n        this.tbResize = false;\n        this.separator();\n    }\n    extendedOpen() {\n        const sib = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n        if (this.overflowMode === 'Extended' && sib) {\n            this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);\n        }\n    }\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     *\n     * @param  {ToolbarModel} newProp - It contains new value of the data.\n     * @param  {ToolbarModel} oldProp - It contains old value of the data.\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        const tEle = this.element;\n        const wid = tEle.offsetWidth;\n        this.extendedOpen();\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'items':\n                    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n                        const changedProb = Object.keys(newProp.items);\n                        for (let i = 0; i < changedProb.length; i++) {\n                            const index = parseInt(Object.keys(newProp.items)[i], 10);\n                            const property = Object.keys(newProp.items[index])[0];\n                            const newProperty = Object(newProp.items[index])[property];\n                            if (typeof newProperty !== 'function') {\n                                if (this.tbarAlign || property === 'align') {\n                                    this.refresh();\n                                    this.trigger('created');\n                                    break;\n                                }\n                                const popupPriCheck = property === 'showAlwaysInPopup' && !newProperty;\n                                const booleanCheck = property === 'overflow' && this.popupPriCount !== 0;\n                                if ((popupPriCheck) || (this.items[index].showAlwaysInPopup) && booleanCheck) {\n                                    --this.popupPriCount;\n                                }\n                                if (isNullOrUndefined(this.scrollModule)) {\n                                    this.destroyMode();\n                                }\n                                const itemCol = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, tEle));\n                                if (this.isReact) {\n                                    this.clearTemplate();\n                                }\n                                detach(itemCol[index]);\n                                this.tbarEle.splice(index, 1);\n                                this.addItems([this.items[index]], index);\n                                this.items.splice(index, 1);\n                                if (this.items[index].template) {\n                                    this.tbarEle.splice(this.items.length, 1);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        this.itemsRerender(newProp.items);\n                    }\n                    break;\n                case 'width':\n                    setStyleAttribute(tEle, { 'width': formatUnit(newProp.width) });\n                    this.renderOverflowMode();\n                    if (this.popObj && wid < tEle.offsetWidth) {\n                        this.popupRefresh(this.popObj.element, false);\n                    }\n                    break;\n                case 'height':\n                    setStyleAttribute(this.element, { 'height': formatUnit(newProp.height) });\n                    break;\n                case 'overflowMode':\n                    this.destroyMode();\n                    this.renderOverflowMode();\n                    if (this.enableRtl) {\n                        this.add(tEle, CLS_RTL$2);\n                    }\n                    this.refreshOverflow();\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.add(tEle, CLS_RTL$2);\n                    }\n                    else {\n                        this.remove(tEle, CLS_RTL$2);\n                    }\n                    if (!isNullOrUndefined(this.scrollModule)) {\n                        if (newProp.enableRtl) {\n                            this.add(this.scrollModule.element, CLS_RTL$2);\n                        }\n                        else {\n                            this.remove(this.scrollModule.element, CLS_RTL$2);\n                        }\n                    }\n                    if (!isNullOrUndefined(this.popObj)) {\n                        if (newProp.enableRtl) {\n                            this.add(this.popObj.element, CLS_RTL$2);\n                        }\n                        else {\n                            this.remove(this.popObj.element, CLS_RTL$2);\n                        }\n                    }\n                    if (this.tbarAlign) {\n                        this.itemPositioning();\n                    }\n                    break;\n                case 'scrollStep':\n                    if (this.scrollModule) {\n                        this.scrollModule.scrollStep = this.scrollStep;\n                    }\n                    break;\n                case 'enableCollision':\n                    if (this.popObj) {\n                        this.popObj.collision = { Y: this.enableCollision ? 'flip' : 'none' };\n                    }\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'allowKeyboard':\n                    this.unwireKeyboardEvent();\n                    if (newProp.allowKeyboard) {\n                        this.wireKeyboardEvent();\n                    }\n                    break;\n            }\n        }\n    }\n    /**\n     * Shows or hides the Toolbar item that is in the specified index.\n     *\n     * @param  {number | HTMLElement} index - Index value of target item or DOM element  of items to be hidden or shown.\n     * @param  {boolean} value - Based on this Boolean value, item will be hide (true) or show (false). By default, value is false.\n     * @returns {void}.\n     */\n    hideItem(index, value) {\n        const isElement = (typeof (index) === 'object') ? true : false;\n        let eleIndex = index;\n        let initIndex;\n        let ele;\n        const innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n        if (isElement) {\n            ele = index;\n        }\n        else if (this.tbarEle[eleIndex]) {\n            const innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n            ele = innerItems[eleIndex];\n        }\n        if (ele) {\n            if (value) {\n                ele.classList.add(CLS_HIDDEN);\n            }\n            else {\n                ele.classList.remove(CLS_HIDDEN);\n            }\n            if (value && isNullOrUndefined(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n                if (isNullOrUndefined(ele.firstElementChild.getAttribute('tabindex'))) {\n                    ele.firstElementChild.setAttribute('tabindex', '-1');\n                    const innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n                    if (isElement) {\n                        eleIndex = innerItems.indexOf(ele);\n                    }\n                    let nextEle = innerItems[++eleIndex];\n                    while (nextEle) {\n                        const skipEle = this.eleContains(nextEle);\n                        if (!skipEle) {\n                            nextEle.firstElementChild.removeAttribute('tabindex');\n                            break;\n                        }\n                        nextEle = innerItems[++eleIndex];\n                    }\n                }\n            }\n            else if (isNullOrUndefined(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n                initIndex = 0;\n                let setFlag = false;\n                let removeFlag = false;\n                let initELe = innerItems[initIndex];\n                while (initELe) {\n                    if (!initELe.classList.contains(CLS_SEPARATOR)) {\n                        if (isNullOrUndefined(initELe.firstElementChild.getAttribute('tabindex'))) {\n                            initELe.firstElementChild.setAttribute('tabindex', '-1');\n                            setFlag = true;\n                        }\n                        else {\n                            if (setFlag && removeFlag) {\n                                break;\n                            }\n                            const skipEle = this.eleContains(initELe);\n                            if (!skipEle) {\n                                initELe.firstElementChild.removeAttribute('tabindex');\n                                removeFlag = true;\n                            }\n                            initELe = innerItems[++initIndex];\n                        }\n                    }\n                    else {\n                        initELe = innerItems[++initIndex];\n                    }\n                }\n            }\n            this.refreshOverflow();\n        }\n    }\n};\n__decorate$3([\n    Collection([], Item)\n], Toolbar.prototype, \"items\", void 0);\n__decorate$3([\n    Property('auto')\n], Toolbar.prototype, \"width\", void 0);\n__decorate$3([\n    Property('auto')\n], Toolbar.prototype, \"height\", void 0);\n__decorate$3([\n    Property('')\n], Toolbar.prototype, \"cssClass\", void 0);\n__decorate$3([\n    Property('Scrollable')\n], Toolbar.prototype, \"overflowMode\", void 0);\n__decorate$3([\n    Property()\n], Toolbar.prototype, \"scrollStep\", void 0);\n__decorate$3([\n    Property(true)\n], Toolbar.prototype, \"enableCollision\", void 0);\n__decorate$3([\n    Property(true)\n], Toolbar.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$3([\n    Property(true)\n], Toolbar.prototype, \"allowKeyboard\", void 0);\n__decorate$3([\n    Event()\n], Toolbar.prototype, \"clicked\", void 0);\n__decorate$3([\n    Event()\n], Toolbar.prototype, \"created\", void 0);\n__decorate$3([\n    Event()\n], Toolbar.prototype, \"destroyed\", void 0);\n__decorate$3([\n    Event()\n], Toolbar.prototype, \"beforeCreate\", void 0);\nToolbar = __decorate$3([\n    NotifyPropertyChanges\n], Toolbar);\n\n/**\n * Toolbar modules\n */\n\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst CLS_ACRDN_ROOT = 'e-acrdn-root';\nconst CLS_ROOT$2 = 'e-accordion';\nconst CLS_ITEM$1 = 'e-acrdn-item';\nconst CLS_ITEMFOCUS = 'e-item-focus';\nconst CLS_ITEMHIDE = 'e-hide';\nconst CLS_HEADER = 'e-acrdn-header';\nconst CLS_HEADERICN = 'e-acrdn-header-icon';\nconst CLS_HEADERCTN = 'e-acrdn-header-content';\nconst CLS_CONTENT = 'e-acrdn-panel';\nconst CLS_CTENT = 'e-acrdn-content';\nconst CLS_TOOGLEICN = 'e-toggle-icon';\nconst CLS_COLLAPSEICN = 'e-tgl-collapse-icon e-icons';\nconst CLS_EXPANDICN = 'e-expand-icon';\nconst CLS_RTL$3 = 'e-rtl';\nconst CLS_CTNHIDE = 'e-content-hide';\nconst CLS_SLCT = 'e-select';\nconst CLS_SLCTED = 'e-selected';\nconst CLS_ACTIVE = 'e-active';\nconst CLS_ANIMATE = 'e-animate';\nconst CLS_DISABLE$3 = 'e-overlay';\nconst CLS_TOGANIMATE = 'e-toggle-animation';\nconst CLS_NEST = 'e-nested';\nconst CLS_EXPANDSTATE = 'e-expand-state';\nconst CLS_CONTAINER = 'e-accordion-container';\n/**\n * Objects used for configuring the Accordion expanding item action properties.\n */\nclass AccordionActionSettings extends ChildProperty {\n}\n__decorate$4([\n    Property('SlideDown')\n], AccordionActionSettings.prototype, \"effect\", void 0);\n__decorate$4([\n    Property(400)\n], AccordionActionSettings.prototype, \"duration\", void 0);\n__decorate$4([\n    Property('linear')\n], AccordionActionSettings.prototype, \"easing\", void 0);\n/**\n * Objects used for configuring the Accordion animation properties.\n */\nclass AccordionAnimationSettings extends ChildProperty {\n}\n__decorate$4([\n    Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, AccordionActionSettings)\n], AccordionAnimationSettings.prototype, \"collapse\", void 0);\n__decorate$4([\n    Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, AccordionActionSettings)\n], AccordionAnimationSettings.prototype, \"expand\", void 0);\n/**\n * An item object that is used to configure Accordion items.\n */\nclass AccordionItem extends ChildProperty {\n}\n__decorate$4([\n    Property(null)\n], AccordionItem.prototype, \"content\", void 0);\n__decorate$4([\n    Property(null)\n], AccordionItem.prototype, \"header\", void 0);\n__decorate$4([\n    Property(null)\n], AccordionItem.prototype, \"cssClass\", void 0);\n__decorate$4([\n    Property(null)\n], AccordionItem.prototype, \"iconCss\", void 0);\n__decorate$4([\n    Property(false)\n], AccordionItem.prototype, \"expanded\", void 0);\n__decorate$4([\n    Property(true)\n], AccordionItem.prototype, \"visible\", void 0);\n__decorate$4([\n    Property(false)\n], AccordionItem.prototype, \"disabled\", void 0);\n__decorate$4([\n    Property()\n], AccordionItem.prototype, \"id\", void 0);\n/**\n * The Accordion is a vertically collapsible content panel that displays one or more panels at a time within the available space.\n * ```html\n * <div id='accordion'/>\n * <script>\n *   var accordionObj = new Accordion();\n *   accordionObj.appendTo('#accordion');\n * </script>\n * ```\n */\nlet Accordion = class Accordion extends Component {\n    /**\n     * Initializes a new instance of the Accordion class.\n     *\n     * @param {AccordionModel} options  - Specifies Accordion model properties as options.\n     * @param {string | HTMLElement} element  - Specifies the element that is rendered as an Accordion.\n     */\n    constructor(options, element) {\n        super(options, element);\n        /**\n         * Contains the keyboard configuration of the Accordion.\n         */\n        this.keyConfigs = {\n            moveUp: 'uparrow',\n            moveDown: 'downarrow',\n            enter: 'enter',\n            space: 'space',\n            home: 'home',\n            end: 'end'\n        };\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        if (this.isReact || this.isAngular || this.isVue) {\n            this.clearTemplate();\n        }\n        const ele = this.element;\n        super.destroy();\n        this.unwireEvents();\n        this.isDestroy = true;\n        this.restoreContent(null);\n        [].slice.call(ele.children).forEach((el) => {\n            ele.removeChild(el);\n        });\n        if (this.trgtEle) {\n            this.trgtEle = null;\n            while (this.ctrlTem.firstElementChild) {\n                ele.appendChild(this.ctrlTem.firstElementChild);\n            }\n            this.ctrlTem = null;\n        }\n        ele.classList.remove(CLS_ACRDN_ROOT);\n        ele.removeAttribute('style');\n        ['aria-disabled', 'aria-multiselectable', 'role', 'data-ripple'].forEach((attrb) => {\n            this.element.removeAttribute(attrb);\n        });\n        if (!this.isNested && isRippleEnabled) {\n            this.removeRippleEffect();\n        }\n    }\n    preRender() {\n        const nested = closest(this.element, '.' + CLS_CONTENT);\n        this.isNested = false;\n        this.templateEle = [];\n        if (!this.isDestroy) {\n            this.isDestroy = false;\n        }\n        if (nested && nested.firstElementChild && nested.firstElementChild.firstElementChild) {\n            if (nested.firstElementChild.firstElementChild.classList.contains(CLS_ROOT$2)) {\n                nested.classList.add(CLS_NEST);\n                this.isNested = true;\n            }\n        }\n        else {\n            this.element.classList.add(CLS_ACRDN_ROOT);\n        }\n        if (this.enableRtl) {\n            this.add(this.element, CLS_RTL$3);\n        }\n    }\n    add(ele, val) {\n        ele.classList.add(val);\n    }\n    remove(ele, val) {\n        ele.classList.remove(val);\n    }\n    /**\n     * To initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.initializeHeaderTemplate();\n        this.initializeItemTemplate();\n        this.initialize();\n        this.renderControl();\n        this.wireEvents();\n        this.renderComplete();\n    }\n    initialize() {\n        const width = formatUnit(this.width);\n        const height = formatUnit(this.height);\n        setStyleAttribute(this.element, { 'width': width, 'height': height });\n        const ariaAttr = {\n            'aria-disabled': 'false', 'role': 'presentation', 'aria-multiselectable': 'true'\n        };\n        if (isNullOrUndefined(this.initExpand)) {\n            this.initExpand = [];\n        }\n        if (this.expandedIndices.length > 0) {\n            this.initExpand = this.expandedIndices;\n        }\n        attributes(this.element, ariaAttr);\n        if (this.expandMode === 'Single') {\n            this.element.setAttribute('aria-multiselectable', 'false');\n        }\n    }\n    renderControl() {\n        this.trgtEle = (this.element.children.length > 0) ? select('div', this.element) : null;\n        this.renderItems();\n        this.initItemExpand();\n    }\n    wireFocusEvents() {\n        const acrdItem = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM$1));\n        for (const item of acrdItem) {\n            const headerEle = item.querySelector('.' + CLS_HEADER);\n            if (item.childElementCount > 0 && headerEle) {\n                EventHandler.clearEvents(headerEle);\n                EventHandler.add(headerEle, 'focus', this.focusIn, this);\n                EventHandler.add(headerEle, 'blur', this.focusOut, this);\n            }\n        }\n    }\n    unwireEvents() {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        if (!isNullOrUndefined(this.keyModule)) {\n            this.keyModule.destroy();\n        }\n    }\n    wireEvents() {\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        if (!this.isNested && !this.isDestroy) {\n            this.removeRippleEffect = rippleEffect(this.element, { selector: '.' + CLS_HEADER });\n        }\n        if (!this.isNested) {\n            this.keyModule = new KeyboardEvents(this.element, {\n                keyAction: this.keyActionHandler.bind(this),\n                keyConfigs: this.keyConfigs,\n                eventName: 'keydown'\n            });\n        }\n    }\n    templateParser(template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    }\n    initializeHeaderTemplate() {\n        if (this.headerTemplate) {\n            this.headerTemplateFn = this.templateParser(this.headerTemplate);\n        }\n    }\n    initializeItemTemplate() {\n        if (this.itemTemplate) {\n            this.itemTemplateFn = this.templateParser(this.itemTemplate);\n        }\n    }\n    getHeaderTemplate() {\n        return this.headerTemplateFn;\n    }\n    getItemTemplate() {\n        return this.itemTemplateFn;\n    }\n    focusIn(e) {\n        e.target.parentElement.classList.add(CLS_ITEMFOCUS);\n    }\n    focusOut(e) {\n        e.target.parentElement.classList.remove(CLS_ITEMFOCUS);\n    }\n    ctrlTemplate() {\n        this.ctrlTem = this.element.cloneNode(true);\n        let innerEles;\n        const rootEle = select('.' + CLS_CONTAINER, this.element);\n        if (rootEle) {\n            innerEles = rootEle.children;\n        }\n        else {\n            innerEles = this.element.children;\n        }\n        const items = [];\n        [].slice.call(innerEles).forEach((el) => {\n            items.push({\n                header: (el.childElementCount > 0 && el.children[0]) ? (el.children[0]) : '',\n                content: (el.childElementCount > 1 && el.children[1]) ? (el.children[1]) : ''\n            });\n            el.parentNode.removeChild(el);\n        });\n        if (rootEle) {\n            this.element.removeChild(rootEle);\n        }\n        this.setProperties({ items: items }, true);\n    }\n    toggleIconGenerate() {\n        const tglIcon = this.createElement('div', { className: CLS_TOOGLEICN });\n        const hdrColIcon = this.createElement('span', { className: CLS_COLLAPSEICN });\n        tglIcon.appendChild(hdrColIcon);\n        return tglIcon;\n    }\n    initItemExpand() {\n        const len = this.initExpand.length;\n        if (len === 0) {\n            return;\n        }\n        if (this.expandMode === 'Single') {\n            this.expandItem(true, this.initExpand[len - 1]);\n        }\n        else {\n            for (let i = 0; i < len; i++) {\n                this.expandItem(true, this.initExpand[i]);\n            }\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    renderItems() {\n        const ele = this.element;\n        let innerItem;\n        let innerDataSourceItem;\n        if (!isNullOrUndefined(this.trgtEle)) {\n            this.ctrlTemplate();\n        }\n        if (this.dataSource.length > 0) {\n            this.dataSource.forEach((item, index) => {\n                innerDataSourceItem = this.renderInnerItem(item, index);\n                ele.appendChild(innerDataSourceItem);\n                if (innerDataSourceItem.childElementCount > 0) {\n                    EventHandler.add(innerDataSourceItem.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n                    EventHandler.add(innerDataSourceItem.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n                }\n            });\n        }\n        else {\n            const items = this.items;\n            if (ele && items.length > 0) {\n                items.forEach((item, index) => {\n                    innerItem = this.renderInnerItem(item, index);\n                    ele.appendChild(innerItem);\n                    if (innerItem.childElementCount > 0) {\n                        EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n                        EventHandler.add(innerItem.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n                    }\n                });\n            }\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    clickHandler(e) {\n        const trgt = e.target;\n        const items = this.getItems();\n        const eventArgs = {};\n        let tglIcon;\n        const acrdEle = closest(trgt, '.' + CLS_ROOT$2);\n        if (acrdEle !== this.element) {\n            return;\n        }\n        trgt.classList.add('e-target');\n        const acrdnItem = closest(trgt, '.' + CLS_ITEM$1);\n        let acrdnHdr = closest(trgt, '.' + CLS_HEADER);\n        let acrdnCtn = closest(trgt, '.' + CLS_CONTENT);\n        if (acrdnItem && (isNullOrUndefined(acrdnHdr) || isNullOrUndefined(acrdnCtn))) {\n            acrdnHdr = acrdnItem.children[0];\n            acrdnCtn = acrdnItem.children[1];\n        }\n        if (acrdnHdr) {\n            tglIcon = select('.' + CLS_TOOGLEICN, acrdnHdr);\n        }\n        let acrdnCtnItem;\n        if (acrdnHdr) {\n            acrdnCtnItem = closest(acrdnHdr, '.' + CLS_ITEM$1);\n        }\n        else if (acrdnCtn) {\n            acrdnCtnItem = closest(acrdnCtn, '.' + CLS_ITEM$1);\n        }\n        const index = this.getIndexByItem(acrdnItem);\n        if (acrdnCtnItem) {\n            eventArgs.item = items[this.getIndexByItem(acrdnCtnItem)];\n        }\n        eventArgs.originalEvent = e;\n        const ctnCheck = !isNullOrUndefined(tglIcon) && acrdnItem.childElementCount <= 1;\n        if (ctnCheck && (isNullOrUndefined(acrdnCtn) || !isNullOrUndefined(select('.' + CLS_HEADER + ' .' + CLS_TOOGLEICN, acrdnCtnItem)))) {\n            acrdnItem.appendChild(this.contentRendering(index));\n            this.ariaAttrUpdate(acrdnItem);\n            this.afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem);\n        }\n        else {\n            this.afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem);\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem) {\n        const acrdActive = [];\n        this.trigger('clicked', eventArgs);\n        let cntclkCheck = (acrdnCtn && !isNullOrUndefined(select('.e-target', acrdnCtn)));\n        const inlineAcrdnSel = '.' + CLS_CONTENT + ' .' + CLS_ROOT$2;\n        const inlineEleAcrdn = acrdnCtn && !isNullOrUndefined(select('.' + CLS_ROOT$2, acrdnCtn)) && isNullOrUndefined(closest(trgt, inlineAcrdnSel));\n        const nestContCheck = acrdnCtn && isNullOrUndefined(select('.' + CLS_ROOT$2, acrdnCtn)) || !(closest(trgt, '.' + CLS_ROOT$2) === this.element);\n        cntclkCheck = cntclkCheck && (inlineEleAcrdn || nestContCheck);\n        trgt.classList.remove('e-target');\n        if (trgt.classList.contains(CLS_CONTENT) || trgt.classList.contains(CLS_CTENT) || cntclkCheck) {\n            return;\n        }\n        const acrdcontainer = this.element.querySelector('.' + CLS_CONTAINER);\n        const acrdnchild = (acrdcontainer) ? acrdcontainer.children : this.element.children;\n        [].slice.call(acrdnchild).forEach((el) => {\n            if (el.classList.contains(CLS_ACTIVE)) {\n                acrdActive.push(el);\n            }\n        });\n        const acrdAniEle = [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM$1 + ' [' + CLS_ANIMATE + ']'));\n        if (acrdAniEle.length > 0) {\n            for (const el of acrdAniEle) {\n                acrdActive.push(el.parentElement);\n            }\n        }\n        const sameContentCheck = acrdActive.indexOf(acrdnCtnItem) !== -1 && acrdnCtn.getAttribute('e-animate') === 'true';\n        let sameHeader = false;\n        if (!isNullOrUndefined(acrdnItem) && !isNullOrUndefined(acrdnHdr)) {\n            const acrdnCtn = select('.' + CLS_CONTENT, acrdnItem);\n            const acrdnRoot = closest(acrdnItem, '.' + CLS_ACRDN_ROOT);\n            const expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n            if (isNullOrUndefined(acrdnCtn)) {\n                return;\n            }\n            sameHeader = (expandState === acrdnItem);\n            if (isVisible(acrdnCtn) && (!sameContentCheck || acrdnCtnItem.classList.contains(CLS_SLCTED))) {\n                this.collapse(acrdnCtn);\n            }\n            else {\n                if ((acrdActive.length > 0) && this.expandMode === 'Single' && !sameContentCheck) {\n                    acrdActive.forEach((el) => {\n                        this.collapse(select('.' + CLS_CONTENT, el));\n                        el.classList.remove(CLS_EXPANDSTATE);\n                    });\n                }\n                this.expand(acrdnCtn);\n            }\n            if (!isNullOrUndefined(expandState) && !sameHeader) {\n                expandState.classList.remove(CLS_EXPANDSTATE);\n            }\n        }\n    }\n    eleMoveFocus(action, root, trgt) {\n        let clst;\n        let clstItem = closest(trgt, '.' + CLS_ITEM$1);\n        if (trgt === root) {\n            clst = ((action === 'moveUp' ? trgt.lastElementChild : trgt).querySelector('.' + CLS_HEADER));\n        }\n        else if (trgt.classList.contains(CLS_HEADER)) {\n            clstItem = (action === 'moveUp' ? clstItem.previousElementSibling : clstItem.nextElementSibling);\n            if (clstItem) {\n                clst = select('.' + CLS_HEADER, clstItem);\n            }\n        }\n        if (clst) {\n            clst.focus();\n        }\n    }\n    keyActionHandler(e) {\n        const trgt = e.target;\n        const header = closest(e.target, CLS_HEADER);\n        if (isNullOrUndefined(header) && !trgt.classList.contains(CLS_ROOT$2) && !trgt.classList.contains(CLS_HEADER)) {\n            return;\n        }\n        let clst;\n        const root = this.element;\n        let content;\n        switch (e.action) {\n            case 'moveUp':\n                this.eleMoveFocus(e.action, root, trgt);\n                break;\n            case 'moveDown':\n                this.eleMoveFocus(e.action, root, trgt);\n                break;\n            case 'space':\n            case 'enter':\n                content = trgt.nextElementSibling;\n                if (!isNullOrUndefined(content) && content.classList.contains(CLS_CONTENT)) {\n                    if (content.getAttribute('e-animate') !== 'true') {\n                        trgt.click();\n                    }\n                }\n                else {\n                    trgt.click();\n                }\n                e.preventDefault();\n                break;\n            case 'home':\n            case 'end':\n                clst = e.action === 'home' ? root.firstElementChild.children[0] : root.lastElementChild.children[0];\n                clst.focus();\n                e.preventDefault();\n                break;\n        }\n    }\n    headerEleGenerate() {\n        const header = this.createElement('div', { className: CLS_HEADER, id: getUniqueID('acrdn_header') });\n        const items = this.getItems();\n        const ariaAttr = {\n            'tabindex': '0', 'role': 'heading', 'aria-label': 'collapsed',\n            'aria-disabled': 'false', 'aria-level': items.length.toString()\n        };\n        attributes(header, ariaAttr);\n        return header;\n    }\n    renderInnerItem(item, index) {\n        const innerEle = this.createElement('div', {\n            className: CLS_ITEM$1, id: item.id || getUniqueID('acrdn_item'),\n            attrs: { 'aria-expanded': 'false', 'role': 'row' }\n        });\n        if (this.headerTemplate) {\n            const ctnEle = this.headerEleGenerate();\n            const hdrEle = this.createElement('div', { className: CLS_HEADERCTN });\n            ctnEle.appendChild(hdrEle);\n            append(this.getHeaderTemplate()(item, this, 'headerTemplate', this.element.id + '_headerTemplate', false), hdrEle);\n            innerEle.appendChild(ctnEle);\n            ctnEle.appendChild(this.toggleIconGenerate());\n            this.add(innerEle, CLS_SLCT);\n            return innerEle;\n        }\n        if (item.header && this.angularnativeCondiCheck(item, 'header')) {\n            if (this.enableHtmlSanitizer && typeof (item.header) === 'string') {\n                item.header = SanitizeHtmlHelper.sanitize(item.header);\n            }\n            const ctnEle = this.headerEleGenerate();\n            const hdrEle = this.createElement('div', { className: CLS_HEADERCTN });\n            ctnEle.appendChild(hdrEle);\n            ctnEle.appendChild(this.fetchElement(hdrEle, item.header, index, true));\n            innerEle.appendChild(ctnEle);\n        }\n        let hdr = select('.' + CLS_HEADER, innerEle);\n        if (item.expanded && !isNullOrUndefined(index) && (!this.enablePersistence)) {\n            if (this.initExpand.indexOf(index) === -1) {\n                this.initExpand.push(index);\n            }\n        }\n        if (item.cssClass) {\n            addClass([innerEle], item.cssClass.split(' '));\n        }\n        if (item.disabled) {\n            addClass([innerEle], CLS_DISABLE$3);\n        }\n        if (item.visible === false) {\n            addClass([innerEle], CLS_ITEMHIDE);\n        }\n        if (item.iconCss) {\n            const hdrIcnEle = this.createElement('div', { className: CLS_HEADERICN });\n            const icon = this.createElement('span', { className: item.iconCss + ' e-icons' });\n            hdrIcnEle.appendChild(icon);\n            if (isNullOrUndefined(hdr)) {\n                hdr = this.headerEleGenerate();\n                hdr.appendChild(hdrIcnEle);\n                innerEle.appendChild(hdr);\n            }\n            else {\n                hdr.insertBefore(hdrIcnEle, hdr.childNodes[0]);\n            }\n        }\n        if (item.content && this.angularnativeCondiCheck(item, 'content')) {\n            const hdrIcon = this.toggleIconGenerate();\n            if (isNullOrUndefined(hdr)) {\n                hdr = this.headerEleGenerate();\n                innerEle.appendChild(hdr);\n            }\n            hdr.appendChild(hdrIcon);\n            this.add(innerEle, CLS_SLCT);\n        }\n        return innerEle;\n    }\n    angularnativeCondiCheck(item, prop) {\n        const property = prop === 'content' ? item.content : item.header;\n        const content = property;\n        if (this.isAngular && !isNullOrUndefined(content.elementRef)) {\n            const data = content.elementRef.nativeElement.data;\n            if (isNullOrUndefined(data) || data === '' || (data.indexOf('bindings=') === -1)) {\n                return true;\n            }\n            const parseddata = JSON.parse(content.elementRef.nativeElement.data.replace('bindings=', ''));\n            if (!isNullOrUndefined(parseddata) && parseddata['ng-reflect-ng-if'] === 'false') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return true;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    fetchElement(ele, value, index, isHeader) {\n        let templateFn;\n        let temString;\n        try {\n            if (document.querySelectorAll(value).length && value !== 'Button') {\n                const eleVal = document.querySelector(value);\n                temString = eleVal.outerHTML.trim();\n                ele.appendChild(eleVal);\n                eleVal.style.display = '';\n            }\n            else {\n                templateFn = compile(value);\n            }\n        }\n        catch (e) {\n            if (typeof (value) === 'string') {\n                ele.innerHTML = SanitizeHtmlHelper.sanitize(value);\n            }\n            else if (!isNullOrUndefined(this.trgtEle) && (value instanceof (HTMLElement))) {\n                ele.appendChild(value);\n                ele.firstElementChild.style.display = '';\n            }\n            else {\n                templateFn = compile(value);\n            }\n        }\n        let tempArray;\n        if (!isNullOrUndefined(templateFn)) {\n            if (this.isReact) {\n                this.renderReactTemplates();\n            }\n            let templateProps;\n            let templateName;\n            if (ele.classList.contains(CLS_HEADERCTN)) {\n                templateProps = this.element.id + index + '_header';\n                templateName = 'header';\n            }\n            else if (ele.classList.contains(CLS_CTENT)) {\n                templateProps = this.element.id + index + '_content';\n                templateName = 'content';\n            }\n            tempArray = templateFn({}, this, templateName, templateProps, this.isStringTemplate);\n        }\n        if (!isNullOrUndefined(tempArray) && tempArray.length > 0 && !(isNullOrUndefined(tempArray[0].tagName) && tempArray.length === 1)) {\n            [].slice.call(tempArray).forEach((el) => {\n                if (!isNullOrUndefined(el.tagName)) {\n                    el.style.display = '';\n                }\n                ele.appendChild(el);\n            });\n        }\n        else if (ele.childElementCount === 0) {\n            ele.innerHTML = SanitizeHtmlHelper.sanitize(value);\n        }\n        if (!isNullOrUndefined(temString)) {\n            if (this.templateEle.indexOf(value) === -1) {\n                this.templateEle.push(value);\n            }\n        }\n        return ele;\n    }\n    ariaAttrUpdate(itemEle) {\n        const header = select('.' + CLS_HEADER, itemEle);\n        const content = select('.' + CLS_CONTENT, itemEle);\n        header.setAttribute('aria-controls', content.id);\n        content.setAttribute('aria-labelledby', header.id);\n        content.setAttribute('role', 'definition');\n    }\n    contentRendering(index) {\n        const itemcnt = this.createElement('div', { className: CLS_CONTENT + ' ' + CLS_CTNHIDE, id: getUniqueID('acrdn_panel') });\n        attributes(itemcnt, { 'aria-hidden': 'true' });\n        const ctn = this.createElement('div', { className: CLS_CTENT });\n        if (this.dataSource.length > 0) {\n            if (this.isReact) {\n                this.renderReactTemplates();\n            }\n            append(this.getItemTemplate()(this.dataSource[index], this, 'itemTemplate', this.element.id + '_itemTemplate', false), ctn);\n            itemcnt.appendChild(ctn);\n        }\n        else {\n            if (this.enableHtmlSanitizer && typeof (this.items[index].content)) {\n                this.items[index].content = SanitizeHtmlHelper.sanitize(this.items[index].content);\n            }\n            itemcnt.appendChild(this.fetchElement(ctn, this.items[index].content, index, false));\n        }\n        return itemcnt;\n    }\n    expand(trgt) {\n        const items = this.getItems();\n        const trgtItemEle = closest(trgt, '.' + CLS_ITEM$1);\n        if (isNullOrUndefined(trgt) || (isVisible(trgt) && trgt.getAttribute('e-animate') !== 'true') || trgtItemEle.classList.contains(CLS_DISABLE$3)) {\n            return;\n        }\n        const acrdnRoot = closest(trgtItemEle, '.' + CLS_ACRDN_ROOT);\n        const expandState = acrdnRoot.querySelector('.' + CLS_EXPANDSTATE);\n        const animation = {\n            name: this.animation.expand.effect,\n            duration: this.animation.expand.duration,\n            timingFunction: this.animation.expand.easing\n        };\n        const icon = select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n        const eventArgs = {\n            element: trgtItemEle,\n            item: items[this.getIndexByItem(trgtItemEle)],\n            index: this.getIndexByItem(trgtItemEle),\n            content: trgtItemEle.querySelector('.' + CLS_CONTENT),\n            isExpanded: true\n        };\n        this.trigger('expanding', eventArgs, (expandArgs) => {\n            if (!expandArgs.cancel) {\n                icon.classList.add(CLS_TOGANIMATE);\n                this.expandedItemsPush(trgtItemEle);\n                if (!isNullOrUndefined(expandState)) {\n                    expandState.classList.remove(CLS_EXPANDSTATE);\n                }\n                trgtItemEle.classList.add(CLS_EXPANDSTATE);\n                if ((animation.name === 'None')) {\n                    this.expandProgress('begin', icon, trgt, trgtItemEle, expandArgs);\n                    this.expandProgress('end', icon, trgt, trgtItemEle, expandArgs);\n                }\n                else {\n                    this.expandAnimation(animation.name, icon, trgt, trgtItemEle, animation, expandArgs);\n                }\n            }\n        });\n    }\n    expandAnimation(ef, icn, trgt, trgtItemEle, animate, args) {\n        let height;\n        this.lastActiveItemId = trgtItemEle.id;\n        if (ef === 'SlideDown') {\n            animate.begin = () => {\n                this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n                trgt.style.position = 'absolute';\n                height = trgtItemEle.offsetHeight;\n                trgt.style.maxHeight = (trgt.offsetHeight) + 'px';\n                trgtItemEle.style.maxHeight = '';\n            };\n            animate.progress = () => {\n                trgtItemEle.style.minHeight = (height + trgt.offsetHeight) + 'px';\n            };\n            animate.end = () => {\n                setStyleAttribute(trgt, { 'position': '', 'maxHeight': '' });\n                trgtItemEle.style.minHeight = '';\n                this.expandProgress('end', icn, trgt, trgtItemEle, args);\n            };\n        }\n        else {\n            animate.begin = () => {\n                this.expandProgress('begin', icn, trgt, trgtItemEle, args);\n            };\n            animate.end = () => {\n                this.expandProgress('end', icn, trgt, trgtItemEle, args);\n            };\n        }\n        new Animation(animate).animate(trgt);\n    }\n    expandProgress(progress, icon, trgt, trgtItemEle, eventArgs) {\n        this.remove(trgt, CLS_CTNHIDE);\n        this.add(trgtItemEle, CLS_SLCTED);\n        this.add(icon, CLS_EXPANDICN);\n        if (progress === 'end') {\n            this.add(trgtItemEle, CLS_ACTIVE);\n            trgt.setAttribute('aria-hidden', 'false');\n            attributes(trgtItemEle, { 'aria-expanded': 'true' });\n            attributes(trgt.previousElementSibling, { 'aria-label': 'expanded' });\n            icon.classList.remove(CLS_TOGANIMATE);\n            this.trigger('expanded', eventArgs);\n        }\n    }\n    expandedItemsPush(item) {\n        const index = this.getIndexByItem(item);\n        if (this.expandedIndices.indexOf(index) === -1) {\n            const temp = [].slice.call(this.expandedIndices);\n            temp.push(index);\n            this.setProperties({ expandedIndices: temp }, true);\n        }\n    }\n    getIndexByItem(item) {\n        const itemEle = this.getItemElements();\n        return [].slice.call(itemEle).indexOf(item);\n    }\n    getItemElements() {\n        const itemEle = [];\n        const itemCollection = this.element.children;\n        [].slice.call(itemCollection).forEach((el) => {\n            if (el.classList.contains(CLS_ITEM$1)) {\n                itemEle.push(el);\n            }\n        });\n        return itemEle;\n    }\n    expandedItemsPop(item) {\n        const index = this.getIndexByItem(item);\n        const temp = [].slice.call(this.expandedIndices);\n        temp.splice(temp.indexOf(index), 1);\n        this.setProperties({ expandedIndices: temp }, true);\n    }\n    collapse(trgt) {\n        const items = this.getItems();\n        const trgtItemEle = closest(trgt, '.' + CLS_ITEM$1);\n        if (isNullOrUndefined(trgt) || !isVisible(trgt) || trgtItemEle.classList.contains(CLS_DISABLE$3)) {\n            return;\n        }\n        const animation = {\n            name: this.animation.collapse.effect,\n            duration: this.animation.collapse.duration,\n            timingFunction: this.animation.collapse.easing\n        };\n        const icon = select('.' + CLS_TOOGLEICN, trgtItemEle).firstElementChild;\n        const eventArgs = {\n            element: trgtItemEle,\n            item: items[this.getIndexByItem(trgtItemEle)],\n            index: this.getIndexByItem(trgtItemEle),\n            content: trgtItemEle.querySelector('.' + CLS_CONTENT),\n            isExpanded: false\n        };\n        this.trigger('expanding', eventArgs, (expandArgs) => {\n            if (!expandArgs.cancel) {\n                this.expandedItemsPop(trgtItemEle);\n                trgtItemEle.classList.remove(CLS_EXPANDSTATE);\n                icon.classList.add(CLS_TOGANIMATE);\n                if ((animation.name === 'None')) {\n                    this.collapseProgress('begin', icon, trgt, trgtItemEle, expandArgs);\n                    this.collapseProgress('end', icon, trgt, trgtItemEle, expandArgs);\n                }\n                else {\n                    this.collapseAnimation(animation.name, trgt, trgtItemEle, icon, animation, expandArgs);\n                }\n            }\n        });\n    }\n    collapseAnimation(ef, trgt, trgtItEl, icn, animate, args) {\n        let height;\n        let trgtHeight;\n        let itemHeight;\n        let remain;\n        this.lastActiveItemId = trgtItEl.id;\n        if (ef === 'SlideUp') {\n            animate.begin = () => {\n                itemHeight = trgtItEl.offsetHeight;\n                trgtItEl.style.minHeight = itemHeight + 'px';\n                trgt.style.position = 'absolute';\n                height = trgtItEl.offsetHeight;\n                trgtHeight = trgt.offsetHeight;\n                trgt.style.maxHeight = trgtHeight + 'px';\n                this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n            };\n            animate.progress = () => {\n                remain = ((height - (trgtHeight - trgt.offsetHeight)));\n                if (remain < itemHeight) {\n                    trgtItEl.style.minHeight = remain + 'px';\n                }\n            };\n            animate.end = () => {\n                trgt.style.display = 'none';\n                this.collapseProgress('end', icn, trgt, trgtItEl, args);\n                trgtItEl.style.minHeight = '';\n                setStyleAttribute(trgt, { 'position': '', 'maxHeight': '', 'display': '' });\n            };\n        }\n        else {\n            animate.begin = () => {\n                this.collapseProgress('begin', icn, trgt, trgtItEl, args);\n            };\n            animate.end = () => {\n                this.collapseProgress('end', icn, trgt, trgtItEl, args);\n            };\n        }\n        new Animation(animate).animate(trgt);\n    }\n    collapseProgress(progress, icon, trgt, trgtItemEle, eventArgs) {\n        this.remove(icon, CLS_EXPANDICN);\n        this.remove(trgtItemEle, CLS_SLCTED);\n        if (progress === 'end') {\n            this.add(trgt, CLS_CTNHIDE);\n            icon.classList.remove(CLS_TOGANIMATE);\n            this.remove(trgtItemEle, CLS_ACTIVE);\n            trgt.setAttribute('aria-hidden', 'true');\n            attributes(trgtItemEle, { 'aria-expanded': 'false' });\n            attributes(trgt.previousElementSibling, { 'aria-label': 'collapsed' });\n            this.trigger('expanded', eventArgs);\n        }\n    }\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    getModuleName() {\n        return 'accordion';\n    }\n    itemAttribUpdate() {\n        const items = this.getItems();\n        const itemEle = this.getItemElements();\n        const itemLen = items.length;\n        itemEle.forEach((ele) => {\n            select('.' + CLS_HEADER, ele).setAttribute('aria-level', '' + itemLen);\n        });\n    }\n    getItems() {\n        let items;\n        if (this.itemTemplate && this.headerTemplate) {\n            items = this.dataSource;\n        }\n        else {\n            items = this.items;\n        }\n        return items;\n    }\n    /**\n     * Adds new item to the Accordion with the specified index of the Accordion.\n     *\n     * @param  {AccordionItemModel | AccordionItemModel[] | Object | Object[]} item - Item array that is to be added to the Accordion.\n     * @param  {number} index - Number value that determines where the item should be added.\n     * By default, item is added at the last index if the index is not specified.\n     * @returns {void}\n     */\n    addItem(item, index) {\n        const ele = this.element;\n        const itemEle = this.getItemElements();\n        const items = this.getItems();\n        if (isNullOrUndefined(index)) {\n            index = items.length;\n        }\n        if (ele.childElementCount >= index) {\n            const addItems = (item instanceof Array) ? item : [item];\n            addItems.forEach((addItem, i) => {\n                const itemIndex = index + i;\n                items.splice(itemIndex, 0, addItem);\n                const innerItemEle = this.renderInnerItem(addItem, itemIndex);\n                if (ele.childElementCount === itemIndex) {\n                    ele.appendChild(innerItemEle);\n                }\n                else {\n                    ele.insertBefore(innerItemEle, itemEle[itemIndex]);\n                }\n                EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'focus', this.focusIn, this);\n                EventHandler.add(innerItemEle.querySelector('.' + CLS_HEADER), 'blur', this.focusOut, this);\n                this.itemAttribUpdate();\n                this.expandedIndices = [];\n                this.expandedItemRefresh(ele);\n                if (addItem && addItem.expanded) {\n                    this.expandItem(true, itemIndex);\n                }\n            });\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    expandedItemRefresh(ele) {\n        const itemEle = this.getItemElements();\n        [].slice.call(itemEle).forEach((el) => {\n            if (el.classList.contains(CLS_SLCTED)) {\n                this.expandedItemsPush(el);\n            }\n        });\n    }\n    /**\n     * Dynamically removes item from Accordion.\n     *\n     * @param  {number} index - Number value that determines which item should be removed.\n     * @returns {void}.\n     */\n    removeItem(index) {\n        if (this.isReact) {\n            this.clearTemplate(['headerTemplate', 'itemTemplate'], index);\n        }\n        const itemEle = this.getItemElements();\n        const ele = itemEle[index];\n        const items = this.getItems();\n        if (isNullOrUndefined(ele)) {\n            return;\n        }\n        this.restoreContent(index);\n        detach(ele);\n        items.splice(index, 1);\n        this.itemAttribUpdate();\n        this.expandedIndices = [];\n        this.expandedItemRefresh(this.element);\n    }\n    /**\n     * Sets focus to the specified index item header in Accordion.\n     *\n     * @param  {number} index - Number value that determines which item should be focused.\n     * @returns {void}.\n     */\n    select(index) {\n        const itemEle = this.getItemElements();\n        const ele = itemEle[index];\n        if (isNullOrUndefined(ele) || isNullOrUndefined(select('.' + CLS_HEADER, ele))) {\n            return;\n        }\n        ele.children[0].focus();\n    }\n    /**\n     * Shows or hides the specified item from Accordion.\n     *\n     * @param  {number} index - Number value that determines which item should be hidden/shown.\n     * @param  {boolean} isHidden - Boolean value that determines the action either hide (true) or show (false). Default value is false.\n     * If the `isHidden` value is false, the item is shown or else item it is hidden.\n     * @returns {void}.\n     */\n    hideItem(index, isHidden) {\n        const itemEle = this.getItemElements();\n        const ele = itemEle[index];\n        if (isNullOrUndefined(ele)) {\n            return;\n        }\n        if (isNullOrUndefined(isHidden)) {\n            isHidden = true;\n        }\n        if (isHidden) {\n            this.add(ele, CLS_ITEMHIDE);\n        }\n        else {\n            this.remove(ele, CLS_ITEMHIDE);\n        }\n    }\n    /**\n     * Enables/Disables the specified Accordion item.\n     *\n     * @param  {number} index - Number value that determines which item should be enabled/disabled.\n     * @param  {boolean} isEnable - Boolean value that determines the action as enable (true) or disable (false).\n     * If the `isEnable` value is true, the item is enabled or else it is disabled.\n     * @returns {void}.\n     */\n    enableItem(index, isEnable) {\n        const itemEle = this.getItemElements();\n        const ele = itemEle[index];\n        if (isNullOrUndefined(ele)) {\n            return;\n        }\n        const eleHeader = ele.firstElementChild;\n        if (isEnable) {\n            this.remove(ele, CLS_DISABLE$3);\n            attributes(eleHeader, { 'tabindex': '0', 'aria-disabled': 'false' });\n            eleHeader.focus();\n        }\n        else {\n            if (ele.classList.contains(CLS_ACTIVE)) {\n                this.expandItem(false, index);\n                this.eleMoveFocus('movedown', this.element, eleHeader);\n            }\n            this.add(ele, CLS_DISABLE$3);\n            eleHeader.setAttribute('aria-disabled', 'true');\n            eleHeader.removeAttribute('tabindex');\n        }\n    }\n    /**\n     * Expands/Collapses the specified Accordion item.\n     *\n     * @param  {boolean} isExpand - Boolean value that determines the action as expand or collapse.\n     * @param  {number} index - Number value that determines which item should be expanded/collapsed.`index` is optional parameter.\n     * Without Specifying index, based on the `isExpand` value all Accordion item can be expanded or collapsed.\n     * @returns {void}.\n     */\n    expandItem(isExpand, index) {\n        const itemEle = this.getItemElements();\n        if (isNullOrUndefined(index)) {\n            if (this.expandMode === 'Single' && isExpand) {\n                const ele = itemEle[itemEle.length - 1];\n                this.itemExpand(isExpand, ele, this.getIndexByItem(ele));\n            }\n            else {\n                const item = select('#' + this.lastActiveItemId, this.element);\n                [].slice.call(itemEle).forEach((el) => {\n                    this.itemExpand(isExpand, el, this.getIndexByItem(el));\n                    el.classList.remove(CLS_EXPANDSTATE);\n                });\n                const expandedItem = select('.' + CLS_EXPANDSTATE, this.element);\n                if (expandedItem) {\n                    expandedItem.classList.remove(CLS_EXPANDSTATE);\n                }\n                if (item) {\n                    item.classList.add(CLS_EXPANDSTATE);\n                }\n            }\n        }\n        else {\n            const ele = itemEle[index];\n            if (isNullOrUndefined(ele) || !ele.classList.contains(CLS_SLCT) || (ele.classList.contains(CLS_ACTIVE) && isExpand)) {\n                return;\n            }\n            else {\n                if (this.expandMode === 'Single') {\n                    this.expandItem(false);\n                }\n                this.itemExpand(isExpand, ele, index);\n            }\n        }\n    }\n    itemExpand(isExpand, ele, index) {\n        let ctn = ele.children[1];\n        if (ele.classList.contains(CLS_DISABLE$3)) {\n            return;\n        }\n        if (isNullOrUndefined(ctn) && isExpand) {\n            ctn = this.contentRendering(index);\n            ele.appendChild(ctn);\n            this.ariaAttrUpdate(ele);\n            this.expand(ctn);\n        }\n        else if (!isNullOrUndefined(ctn)) {\n            if (isExpand) {\n                this.expand(ctn);\n            }\n            else {\n                this.collapse(ctn);\n            }\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    destroyItems() {\n        this.restoreContent(null);\n        if (this.isReact || this.isAngular || this.isVue) {\n            this.clearTemplate();\n        }\n        [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM$1)).forEach((el) => {\n            detach(el);\n        });\n    }\n    restoreContent(index) {\n        let ctnElePos;\n        if (isNullOrUndefined(index)) {\n            ctnElePos = this.element;\n        }\n        else {\n            ctnElePos = this.element.querySelectorAll('.' + CLS_ITEM$1)[index];\n        }\n        this.templateEle.forEach((eleStr) => {\n            if (!isNullOrUndefined(ctnElePos.querySelector(eleStr))) {\n                document.body.appendChild(ctnElePos.querySelector(eleStr)).style.display = 'none';\n            }\n        });\n    }\n    updateItem(item, index) {\n        if (!isNullOrUndefined(item)) {\n            const items = this.getItems();\n            const itemObj = items[index];\n            items.splice(index, 1);\n            this.restoreContent(index);\n            detach(item);\n            this.addItem(itemObj, index);\n        }\n    }\n    setTemplate(template, toElement, index) {\n        toElement.innerHTML = '';\n        this.templateCompile(toElement, template, index);\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    templateCompile(ele, cnt, index) {\n        const tempEle = this.createElement('div');\n        this.fetchElement(tempEle, cnt, index, false);\n        if (tempEle.childNodes.length !== 0) {\n            [].slice.call(tempEle.childNodes).forEach((childEle) => {\n                ele.appendChild(childEle);\n            });\n        }\n    }\n    getPersistData() {\n        const keyEntity = ['expandedIndices'];\n        return this.addOnPersist(keyEntity);\n    }\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     *\n     * @param  {AccordionModel} newProp - It contains the new value of data.\n     * @param  {AccordionModel} oldProp - It contains the old value of data.\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        const acrdn = this.element;\n        let isRefresh = false;\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'items':\n                    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n                        const changedProp = Object.keys(newProp.items);\n                        for (let j = 0; j < changedProp.length; j++) {\n                            const index = parseInt(Object.keys(newProp.items)[j], 10);\n                            const property = Object.keys(newProp.items[index])[0];\n                            const item = selectAll('.' + CLS_ITEM$1, this.element)[index];\n                            const oldVal = Object(oldProp.items[index])[property];\n                            const newVal = Object(newProp.items[index])[property];\n                            const temp = property;\n                            if (temp === 'header' || temp === 'iconCss' || temp === 'expanded' || ((temp === 'content') && (oldVal === ''))) {\n                                this.updateItem(item, index);\n                            }\n                            if (property === 'cssClass' && !isNullOrUndefined(item)) {\n                                item.classList.remove(oldVal);\n                                item.classList.add(newVal);\n                            }\n                            if (property === 'visible' && !isNullOrUndefined(item)) {\n                                if (Object(newProp.items[index])[property] === false) {\n                                    item.classList.add(CLS_ITEMHIDE);\n                                }\n                                else {\n                                    item.classList.remove(CLS_ITEMHIDE);\n                                }\n                            }\n                            if (property === 'disabled' && !isNullOrUndefined(item)) {\n                                this.enableItem(index, !newVal);\n                            }\n                            if (property === 'content' && !isNullOrUndefined(item) && item.children.length === 2) {\n                                if (typeof newVal === 'function') {\n                                    const activeContent = item.querySelector('.' + CLS_CTENT);\n                                    activeContent.innerHTML = '';\n                                    this.setTemplate(newVal, activeContent, index);\n                                }\n                                else {\n                                    if (item.classList.contains(CLS_SLCTED)) {\n                                        this.expandItem(false, index);\n                                    }\n                                    detach(item.querySelector('.' + CLS_CONTENT));\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        isRefresh = true;\n                    }\n                    break;\n                case 'dataSource':\n                case 'expandedIndices':\n                    if (this.expandedIndices === null) {\n                        this.expandedIndices = [];\n                    }\n                    isRefresh = true;\n                    break;\n                case 'headerTemplate':\n                    this.initializeHeaderTemplate();\n                    isRefresh = true;\n                    break;\n                case 'itemTemplate':\n                    this.initializeItemTemplate();\n                    isRefresh = true;\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.add(acrdn, CLS_RTL$3);\n                    }\n                    else {\n                        this.remove(acrdn, CLS_RTL$3);\n                    }\n                    break;\n                case 'height':\n                    setStyleAttribute(this.element, { 'height': formatUnit(newProp.height) });\n                    break;\n                case 'width':\n                    setStyleAttribute(this.element, { 'width': formatUnit(newProp.width) });\n                    break;\n                case 'expandMode':\n                    if (newProp.expandMode === 'Single') {\n                        this.element.setAttribute('aria-multiselectable', 'false');\n                        if (this.expandedIndices.length > 1) {\n                            this.expandItem(false);\n                        }\n                    }\n                    else {\n                        this.element.setAttribute('aria-multiselectable', 'true');\n                    }\n                    break;\n            }\n        }\n        if (isRefresh) {\n            this.initExpand = [];\n            if (this.expandedIndices.length > 0) {\n                this.initExpand = this.expandedIndices;\n            }\n            this.destroyItems();\n            this.renderItems();\n            this.initItemExpand();\n        }\n    }\n};\n__decorate$4([\n    Collection([], AccordionItem)\n], Accordion.prototype, \"items\", void 0);\n__decorate$4([\n    Property([])\n], Accordion.prototype, \"dataSource\", void 0);\n__decorate$4([\n    Property()\n], Accordion.prototype, \"itemTemplate\", void 0);\n__decorate$4([\n    Property()\n], Accordion.prototype, \"headerTemplate\", void 0);\n__decorate$4([\n    Property('100%')\n], Accordion.prototype, \"width\", void 0);\n__decorate$4([\n    Property('auto')\n], Accordion.prototype, \"height\", void 0);\n__decorate$4([\n    Property([])\n], Accordion.prototype, \"expandedIndices\", void 0);\n__decorate$4([\n    Property('Multiple')\n], Accordion.prototype, \"expandMode\", void 0);\n__decorate$4([\n    Property(false)\n], Accordion.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$4([\n    Complex({}, AccordionAnimationSettings)\n], Accordion.prototype, \"animation\", void 0);\n__decorate$4([\n    Event()\n], Accordion.prototype, \"clicked\", void 0);\n__decorate$4([\n    Event()\n], Accordion.prototype, \"expanding\", void 0);\n__decorate$4([\n    Event()\n], Accordion.prototype, \"expanded\", void 0);\n__decorate$4([\n    Event()\n], Accordion.prototype, \"created\", void 0);\n__decorate$4([\n    Event()\n], Accordion.prototype, \"destroyed\", void 0);\nAccordion = __decorate$4([\n    NotifyPropertyChanges\n], Accordion);\n\n/**\n * Accordion all modules\n */\n\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/triple-slash-reference */\n/// <reference path='../common/menu-base-model.d.ts'/>\n/**\n * The ContextMenu is a graphical user interface that appears on the user right click/touch hold operation.\n * ```html\n * <div id = 'target'></div>\n * <ul id = 'contextmenu'></ul>\n * ```\n * ```typescript\n * <script>\n * var contextMenuObj = new ContextMenu({items: [{ text: 'Cut' }, { text: 'Copy' },{ text: 'Paste' }], target: '#target'});\n * </script>\n * ```\n */\nlet ContextMenu = class ContextMenu extends MenuBase {\n    /**\n     * Constructor for creating the widget.\n     *\n     * @private\n     * @param {ContextMenuModel} options - Specifies the context menu model\n     * @param {string} element - Specifies the element\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    /**\n     * For internal use only - prerender processing.\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        this.isMenu = false;\n        this.element.id = this.element.id || getUniqueID('ej2-contextmenu');\n        super.preRender();\n    }\n    initialize() {\n        super.initialize();\n        attributes(this.element, { 'role': 'menubar', 'tabindex': '0' });\n        this.element.style.zIndex = getZindexPartial(this.element).toString();\n    }\n    /**\n     * This method is used to open the ContextMenu in specified position.\n     *\n     * @param {number} top - To specify ContextMenu vertical positioning.\n     * @param {number} left - To specify ContextMenu horizontal positioning.\n     * @param {HTMLElement} target - To calculate z-index for ContextMenu based upon the specified target.\n     * @function open\n     * @returns {void}\n     */\n    open(top, left, target) {\n        super.openMenu(null, null, top, left, null, target);\n    }\n    /**\n     * Closes the ContextMenu if it is opened.\n     *\n     * @function close\n     * @returns {void}\n     */\n    close() {\n        super.closeMenu();\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @private\n     * @param {ContextMenuModel} newProp - Specifies new properties\n     * @param {ContextMenuModel} oldProp - Specifies old properties\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        super.onPropertyChanged(newProp, oldProp);\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'filter':\n                    this.close();\n                    this.filter = newProp.filter;\n                    break;\n                case 'target':\n                    this.unWireEvents(oldProp.target);\n                    this.wireEvents();\n                    break;\n            }\n        }\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    getModuleName() {\n        return 'contextmenu';\n    }\n};\n__decorate$5([\n    Property('')\n], ContextMenu.prototype, \"target\", void 0);\n__decorate$5([\n    Property('')\n], ContextMenu.prototype, \"filter\", void 0);\n__decorate$5([\n    Collection([], MenuItem)\n], ContextMenu.prototype, \"items\", void 0);\nContextMenu = __decorate$5([\n    NotifyPropertyChanges\n], ContextMenu);\n\n/**\n * ContextMenu modules\n */\n\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/triple-slash-reference */\n/// <reference path='../common/menu-base-model.d.ts'/>\nconst VMENU = 'e-vertical';\nconst SCROLLABLE = 'e-scrollable';\nconst HAMBURGER = 'e-hamburger';\n/**\n * The Menu is a graphical user interface that serve as navigation headers for your application or site.\n * ```html\n * <ul id = 'menu'></ul>\n * ```\n * ```typescript\n * <script>\n * var menuObj = new Menu({ items: [{ text: 'Home' }, { text: 'Contact Us' },{ text: 'Login' }]});\n * menuObj.appendTo(\"#menu\");\n * </script>\n * ```\n */\nlet Menu = class Menu extends MenuBase {\n    /**\n     * Constructor for creating the component.\n     *\n     * @private\n     * @param {MenuModel} options - Specifies the menu model\n     * @param {string} element - Specifies the element\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.tempItems = [];\n    }\n    /**\n     * Get module name.\n     *\n     * @private\n     * @returns {string} - Module Name\n     */\n    getModuleName() {\n        return 'menu';\n    }\n    /**\n     * For internal use only - prerender processing.\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        this.isMenu = true;\n        this.element.id = this.element.id || getUniqueID('ej2-menu');\n        if (this.template) {\n            try {\n                if (document.querySelectorAll(this.template).length) {\n                    this.template = document.querySelector(this.template).innerHTML.trim();\n                    this.clearChanges();\n                }\n            }\n            catch (e) {\n                /* action on catch */\n            }\n        }\n        else {\n            this.updateMenuItems(this.items);\n        }\n        super.preRender();\n    }\n    initialize() {\n        super.initialize();\n        attributes(this.element, { 'role': 'menubar', 'tabindex': '0' });\n        if (this.orientation === 'Vertical') {\n            this.element.classList.add(VMENU);\n            if (this.hamburgerMode && !this.target) {\n                this.element.previousElementSibling.classList.add(VMENU);\n            }\n            this.element.setAttribute('aria-orientation', 'vertical');\n        }\n        else {\n            if (Browser.isDevice && !this.enableScrolling) {\n                this.element.parentElement.classList.add(SCROLLABLE);\n            }\n        }\n        if (this.hamburgerMode) {\n            this.element.parentElement.classList.add(HAMBURGER);\n            if (this.orientation === 'Horizontal') {\n                this.element.classList.add('e-hide-menu');\n            }\n        }\n    }\n    updateMenuItems(items) {\n        this.tempItems = items;\n        this.items = [];\n        this.tempItems.map(this.createMenuItems, this);\n        this.setProperties({ items: this.items }, true);\n        this.tempItems = [];\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @private\n     * @param {MenuModel} newProp - Specifies the new properties.\n     * @param {MenuModel} oldProp - Specifies the old properties.\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'orientation':\n                    if (newProp.orientation === 'Vertical') {\n                        this.element.classList.add(VMENU);\n                        if (this.hamburgerMode) {\n                            if (!this.target) {\n                                this.element.previousElementSibling.classList.add(VMENU);\n                            }\n                            this.element.classList.remove('e-hide-menu');\n                        }\n                        this.element.setAttribute('aria-orientation', 'vertical');\n                    }\n                    else {\n                        this.element.classList.remove(VMENU);\n                        if (this.hamburgerMode) {\n                            if (!this.target) {\n                                this.element.previousElementSibling.classList.remove(VMENU);\n                            }\n                            this.element.classList.add('e-hide-menu');\n                        }\n                        this.element.removeAttribute('aria-orientation');\n                    }\n                    break;\n                case 'items':\n                    if (!Object.keys(oldProp.items).length) {\n                        this.updateMenuItems(newProp.items);\n                    }\n                    break;\n                case 'hamburgerMode':\n                    if (!this.element.previousElementSibling) {\n                        super.createHeaderContainer();\n                    }\n                    if (newProp.hamburgerMode) {\n                        this.element.parentElement.classList.add(HAMBURGER);\n                        [].slice.call(this.element.getElementsByClassName('e-blankicon')).forEach((li) => {\n                            li.style[this.enableRtl ? 'paddingRight' : 'paddingLeft'] = '';\n                        });\n                    }\n                    else {\n                        this.element.parentElement.classList.remove(HAMBURGER);\n                        if (this.orientation === 'Vertical') {\n                            this.setBlankIconStyle(this.element);\n                        }\n                    }\n                    if (this.orientation === 'Vertical') {\n                        if (!this.target) {\n                            this.element.previousElementSibling.classList.add(VMENU);\n                        }\n                        this.element.classList.remove('e-hide-menu');\n                    }\n                    else {\n                        if (this.target) {\n                            this.element.previousElementSibling.classList.add(VMENU);\n                        }\n                        else {\n                            this.element.previousElementSibling.classList.remove(VMENU);\n                        }\n                        this.element.classList[newProp.hamburgerMode ? 'add' : 'remove']('e-hide-menu');\n                    }\n                    break;\n                case 'title':\n                    if (this.hamburgerMode && this.element.previousElementSibling) {\n                        newProp.title = (this.enableHtmlSanitizer) ? SanitizeHtmlHelper.sanitize(newProp.title) : newProp.title;\n                        this.element.previousElementSibling.querySelector('.e-menu-title').innerHTML = newProp.title;\n                    }\n                    break;\n                case 'target':\n                    if (this.hamburgerMode) {\n                        this.unWireEvents(oldProp.target);\n                        this.wireEvents();\n                        if (this.orientation === 'Horizontal') {\n                            if (!newProp.target) {\n                                if (!this.element.previousElementSibling) {\n                                    super.createHeaderContainer();\n                                }\n                                this.element.previousElementSibling.classList.remove(VMENU);\n                            }\n                            else {\n                                this.element.previousElementSibling.classList.add(VMENU);\n                            }\n                            this.element.classList.add('e-hide-menu');\n                        }\n                    }\n                    break;\n            }\n        }\n        super.onPropertyChanged(newProp, oldProp);\n    }\n    createMenuItems(item) {\n        let idx;\n        let i;\n        let items = this.items;\n        const pIdField = this.getField('parentId');\n        if (item[pIdField]) {\n            idx = this.getIndex(item[pIdField].toString(), true);\n            for (i = 0; i < idx.length; i++) {\n                if (!items[idx[i]].items) {\n                    items[idx[i]].items = [];\n                }\n                items = items[idx[i]].items;\n            }\n            items.push(item);\n        }\n        else {\n            this.items.push(item);\n        }\n    }\n    /**\n     * This method is used to open the Menu in hamburger mode.\n     *\n     * @function open\n     * @returns {void}\n     */\n    open() {\n        super.openHamburgerMenu();\n    }\n    /**\n     * Closes the Menu if it is opened in hamburger mode.\n     *\n     * @function close\n     * @returns {void}\n     */\n    close() {\n        super.closeHamburgerMenu();\n    }\n};\n__decorate$6([\n    Property('Horizontal')\n], Menu.prototype, \"orientation\", void 0);\n__decorate$6([\n    Property('')\n], Menu.prototype, \"target\", void 0);\n__decorate$6([\n    Property(null)\n], Menu.prototype, \"template\", void 0);\n__decorate$6([\n    Property(false)\n], Menu.prototype, \"enableScrolling\", void 0);\n__decorate$6([\n    Property(false)\n], Menu.prototype, \"hamburgerMode\", void 0);\n__decorate$6([\n    Property('Menu')\n], Menu.prototype, \"title\", void 0);\n__decorate$6([\n    Property(false)\n], Menu.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$6([\n    Complex({ itemId: 'id', text: 'text', parentId: 'parentId', iconCss: 'iconCss', url: 'url', separator: 'separator', children: 'items' }, FieldSettings)\n], Menu.prototype, \"fields\", void 0);\nMenu = __decorate$6([\n    NotifyPropertyChanges\n], Menu);\n\n/**\n * Menu modules\n */\n\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst CLS_TAB = 'e-tab';\nconst CLS_HEADER$1 = 'e-tab-header';\nconst CLS_BLA_TEM = 'blazor-template';\nconst CLS_CONTENT$1 = 'e-content';\nconst CLS_NEST$1 = 'e-nested';\nconst CLS_ITEMS$1 = 'e-items';\nconst CLS_ITEM$2 = 'e-item';\nconst CLS_TEMPLATE$1 = 'e-template';\nconst CLS_RTL$4 = 'e-rtl';\nconst CLS_ACTIVE$1 = 'e-active';\nconst CLS_DISABLE$4 = 'e-disable';\nconst CLS_HIDDEN$1 = 'e-hidden';\nconst CLS_FOCUS = 'e-focused';\nconst CLS_ICONS = 'e-icons';\nconst CLS_ICON = 'e-icon';\nconst CLS_ICON_TAB = 'e-icon-tab';\nconst CLS_ICON_CLOSE = 'e-close-icon';\nconst CLS_CLOSE_SHOW = 'e-close-show';\nconst CLS_TEXT = 'e-tab-text';\nconst CLS_INDICATOR = 'e-indicator';\nconst CLS_WRAP = 'e-tab-wrap';\nconst CLS_TEXT_WRAP = 'e-text-wrap';\nconst CLS_TAB_ICON = 'e-tab-icon';\nconst CLS_TB_ITEMS = 'e-toolbar-items';\nconst CLS_TB_ITEM = 'e-toolbar-item';\nconst CLS_TB_POP = 'e-toolbar-pop';\nconst CLS_TB_POPUP = 'e-toolbar-popup';\nconst CLS_HOR_NAV = 'e-hor-nav';\nconst CLS_POPUP_OPEN = 'e-popup-open';\nconst CLS_POPUP_CLOSE = 'e-popup-close';\nconst CLS_PROGRESS = 'e-progress';\nconst CLS_IGNORE = 'e-ignore';\nconst CLS_OVERLAY$2 = 'e-overlay';\nconst CLS_HSCRCNT = 'e-hscroll-content';\nconst CLS_VSCRCNT = 'e-vscroll-content';\nconst CLS_VTAB = 'e-vertical-tab';\nconst CLS_VERTICAL$1 = 'e-vertical';\nconst CLS_VLEFT = 'e-vertical-left';\nconst CLS_VRIGHT = 'e-vertical-right';\nconst CLS_HBOTTOM = 'e-horizontal-bottom';\nconst CLS_FILL = 'e-fill-mode';\nconst TABITEMPREFIX = 'tabitem_';\nconst CLS_REORDER_ACTIVE_ITEM = 'e-reorder-active-item';\n/**\n * Objects used for configuring the Tab selecting item action properties.\n */\nclass TabActionSettings extends ChildProperty {\n}\n__decorate$7([\n    Property('SlideLeftIn')\n], TabActionSettings.prototype, \"effect\", void 0);\n__decorate$7([\n    Property(600)\n], TabActionSettings.prototype, \"duration\", void 0);\n__decorate$7([\n    Property('ease')\n], TabActionSettings.prototype, \"easing\", void 0);\n/**\n * Objects used for configuring the Tab animation properties.\n */\nclass TabAnimationSettings extends ChildProperty {\n}\n__decorate$7([\n    Complex({ effect: 'SlideLeftIn', duration: 600, easing: 'ease' }, TabActionSettings)\n], TabAnimationSettings.prototype, \"previous\", void 0);\n__decorate$7([\n    Complex({ effect: 'SlideRightIn', duration: 600, easing: 'ease' }, TabActionSettings)\n], TabAnimationSettings.prototype, \"next\", void 0);\n/**\n * Objects used for configuring the Tab item header properties.\n */\nclass Header extends ChildProperty {\n}\n__decorate$7([\n    Property('')\n], Header.prototype, \"text\", void 0);\n__decorate$7([\n    Property('')\n], Header.prototype, \"iconCss\", void 0);\n__decorate$7([\n    Property('left')\n], Header.prototype, \"iconPosition\", void 0);\n/**\n * An array of object that is used to configure the Tab.\n */\nclass TabItem extends ChildProperty {\n}\n__decorate$7([\n    Complex({}, Header)\n], TabItem.prototype, \"header\", void 0);\n__decorate$7([\n    Property(null)\n], TabItem.prototype, \"headerTemplate\", void 0);\n__decorate$7([\n    Property('')\n], TabItem.prototype, \"content\", void 0);\n__decorate$7([\n    Property('')\n], TabItem.prototype, \"cssClass\", void 0);\n__decorate$7([\n    Property(false)\n], TabItem.prototype, \"disabled\", void 0);\n__decorate$7([\n    Property(true)\n], TabItem.prototype, \"visible\", void 0);\n__decorate$7([\n    Property()\n], TabItem.prototype, \"id\", void 0);\n/**\n * Tab is a content panel to show multiple contents in a single space, one at a time.\n * Each Tab item has an associated content, that will be displayed based on the active Tab header item.\n * ```html\n * <div id=\"tab\"></div>\n * <script>\n *   var tabObj = new Tab();\n *   tab.appendTo(\"#tab\");\n * </script>\n * ```\n */\nlet Tab = class Tab extends Component {\n    /**\n     * Initializes a new instance of the Tab class.\n     *\n     * @param {TabModel} options  - Specifies Tab model properties as options.\n     * @param {string | HTMLElement} element  - Specifies the element that is rendered as a Tab.\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.show = {};\n        this.hide = {};\n        this.maxHeight = 0;\n        this.title = 'Close';\n        this.isInteracted = false;\n        this.lastIndex = 0;\n        this.isAdd = false;\n        this.isIconAlone = false;\n        this.draggableItems = [];\n        this.resizeContext = this.refreshActiveTabBorder.bind(this);\n        /**\n         * Contains the keyboard configuration of the Tab.\n         */\n        this.keyConfigs = {\n            tab: 'tab',\n            home: 'home',\n            end: 'end',\n            enter: 'enter',\n            space: 'space',\n            delete: 'delete',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow'\n        };\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers, attributes and classes.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        if (this.isReact || this.isAngular) {\n            this.clearTemplate();\n        }\n        if (!isNullOrUndefined(this.tbObj)) {\n            this.tbObj.destroy();\n            this.tbObj = null;\n        }\n        this.unWireEvents();\n        ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation', 'aria-owns'].forEach((val) => {\n            this.element.removeAttribute(val);\n        });\n        this.expTemplateContent();\n        if (!this.isTemplate) {\n            while (this.element.firstElementChild) {\n                remove(this.element.firstElementChild);\n            }\n        }\n        else {\n            const cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT$1, this.element);\n            this.element.classList.remove(CLS_TEMPLATE$1);\n            if (!isNullOrUndefined(cntEle)) {\n                cntEle.innerHTML = this.cnt;\n            }\n        }\n        if (this.btnCls) {\n            this.btnCls = null;\n        }\n        this.hdrEle = null;\n        this.cntEle = null;\n        this.tbItems = null;\n        this.tbItem = null;\n        this.tbPop = null;\n        this.prevItem = null;\n        this.popEle = null;\n        this.bdrLine = null;\n        this.content = null;\n        this.dragItem = null;\n        this.cloneElement = null;\n        this.draggingItems = [];\n        if (this.draggableItems && this.draggableItems.length > 0) {\n            for (let i = 0; i < this.draggableItems.length; i++) {\n                this.draggableItems[i].destroy();\n                this.draggableItems[i] = null;\n            }\n            this.draggableItems = [];\n        }\n        super.destroy();\n        this.trigger('destroyed');\n    }\n    /**\n     * Refresh the tab component\n     *\n     * @returns {void}\n     */\n    refresh() {\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        super.refresh();\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    /**\n     * Initialize component\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        const nested = closest(this.element, '.' + CLS_CONTENT$1);\n        this.prevIndex = 0;\n        this.isNested = false;\n        this.isPopup = false;\n        this.initRender = true;\n        this.isSwipeed = false;\n        this.itemIndexArray = [];\n        this.templateEle = [];\n        if (this.allowDragAndDrop) {\n            this.dragArea = !isNullOrUndefined(this.dragArea) ? this.dragArea : '#' + this.element.id + ' ' + ('.' + CLS_HEADER$1);\n        }\n        if (!isNullOrUndefined(nested)) {\n            nested.parentElement.classList.add(CLS_NEST$1);\n            this.isNested = true;\n        }\n        const name = Browser.info.name;\n        const css = (name === 'msie') ? 'e-ie' : (name === 'edge') ? 'e-edge' : (name === 'safari') ? 'e-safari' : '';\n        setStyleAttribute(this.element, { 'width': formatUnit(this.width), 'height': formatUnit(this.height) });\n        this.setCssClass(this.element, this.cssClass, true);\n        attributes(this.element, { role: 'tablist', 'aria-disabled': 'false', 'aria-activedescendant': '', 'aria-owns': this.element.id + '_' + 'tab_header_items' });\n        this.setCssClass(this.element, css, true);\n        this.updatePopAnimationConfig();\n    }\n    /**\n     * Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.btnCls = this.createElement('span', { className: CLS_ICONS + ' ' + CLS_ICON_CLOSE, attrs: { title: this.title } });\n        this.tabId = this.element.id.length > 0 ? ('-' + this.element.id) : getRandomId();\n        this.renderContainer();\n        this.wireEvents();\n        this.initRender = false;\n    }\n    renderContainer() {\n        const ele = this.element;\n        this.items.forEach((item, index) => {\n            if (isNullOrUndefined(item.id) && !isNullOrUndefined(item.setProperties)) {\n                item.setProperties({ id: TABITEMPREFIX + index.toString() }, true);\n            }\n        });\n        if (this.items.length > 0 && ele.children.length === 0) {\n            ele.appendChild(this.createElement('div', { className: CLS_CONTENT$1 }));\n            this.setOrientation(this.headerPlacement, this.createElement('div', { className: CLS_HEADER$1 }));\n            this.isTemplate = false;\n        }\n        else if (this.element.children.length > 0) {\n            this.isTemplate = true;\n            ele.classList.add(CLS_TEMPLATE$1);\n            const header = ele.querySelector('.' + CLS_HEADER$1);\n            if (header && this.headerPlacement === 'Bottom') {\n                this.setOrientation(this.headerPlacement, header);\n            }\n        }\n        if (!isNullOrUndefined(select('.' + CLS_HEADER$1, this.element)) && !isNullOrUndefined(select('.' + CLS_CONTENT$1, this.element))) {\n            this.renderHeader();\n            this.tbItems = select('.' + CLS_HEADER$1 + ' .' + CLS_TB_ITEMS, this.element);\n            if (!isNullOrUndefined(this.tbItems)) {\n                rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\n            }\n            this.renderContent();\n            if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n                this.tbItems = select('.' + CLS_HEADER$1 + ' .' + CLS_TB_ITEMS, this.element);\n                this.bdrLine = this.createElement('div', { className: CLS_INDICATOR + ' ' + CLS_HIDDEN$1 + ' ' + CLS_IGNORE });\n                const scrCnt = select('.' + this.scrCntClass, this.tbItems);\n                if (!isNullOrUndefined(scrCnt)) {\n                    scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n                }\n                else {\n                    this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n                }\n                this.setContentHeight(true);\n                this.select(this.selectedItem);\n            }\n            if (!isNullOrUndefined(this.tbItem)) {\n                for (let i = 0; i < this.items.length; i++) {\n                    if (this.items[i]) {\n                        const tabID = this.items[i].id;\n                        this.tbItem[i].setAttribute('data-id', tabID);\n                    }\n                }\n            }\n            this.setRTL(this.enableRtl);\n        }\n    }\n    renderHeader() {\n        const hdrPlace = this.headerPlacement;\n        let tabItems = [];\n        this.hdrEle = this.getTabHeader();\n        this.addVerticalClass();\n        if (!this.isTemplate) {\n            tabItems = this.parseObject(this.items, 0);\n        }\n        else {\n            if (this.element.children.length > 1 && this.element.children[1].classList.contains(CLS_HEADER$1)) {\n                this.setProperties({ headerPlacement: 'Bottom' }, true);\n            }\n            const count = this.hdrEle.children.length;\n            const hdrItems = [];\n            for (let i = 0; i < count; i++) {\n                hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n            }\n            if (count > 0) {\n                while (this.hdrEle.firstElementChild) {\n                    detach(this.hdrEle.firstElementChild);\n                }\n                const tabItems = this.createElement('div', { className: CLS_ITEMS$1 });\n                this.hdrEle.appendChild(tabItems);\n                hdrItems.forEach((item, index) => {\n                    this.lastIndex = index;\n                    const attr = {\n                        className: CLS_ITEM$2, id: CLS_ITEM$2 + this.tabId + '_' + index,\n                        attrs: { role: 'tab', 'aria-controls': CLS_CONTENT$1 + this.tabId + '_' + index, 'aria-selected': 'false' }\n                    };\n                    const txt = this.createElement('span', {\n                        className: CLS_TEXT, innerHTML: item, attrs: { 'role': 'presentation' }\n                    }).outerHTML;\n                    const cont = this.createElement('div', {\n                        className: CLS_TEXT_WRAP, innerHTML: txt + this.btnCls.outerHTML\n                    }).outerHTML;\n                    const wrap = this.createElement('div', { className: CLS_WRAP, innerHTML: cont, attrs: { tabIndex: '-1' } });\n                    tabItems.appendChild(this.createElement('div', attr));\n                    selectAll('.' + CLS_ITEM$2, tabItems)[index].appendChild(wrap);\n                });\n            }\n        }\n        this.tbObj = new Toolbar({\n            width: (hdrPlace === 'Left' || hdrPlace === 'Right') ? 'auto' : '100%',\n            height: (hdrPlace === 'Left' || hdrPlace === 'Right') ? '100%' : 'auto',\n            overflowMode: this.overflowMode,\n            items: (tabItems.length !== 0) ? tabItems : [],\n            clicked: this.clickHandler.bind(this),\n            scrollStep: this.scrollStep,\n            enableHtmlSanitizer: this.enableHtmlSanitizer,\n            cssClass: this.cssClass\n        });\n        this.tbObj.isStringTemplate = true;\n        this.tbObj.createElement = this.createElement;\n        this.tbObj.appendTo(this.hdrEle);\n        attributes(this.hdrEle, { 'aria-label': 'tab-header' });\n        this.updateOrientationAttribute();\n        this.setCloseButton(this.showCloseButton);\n        const toolbarHeader = this.tbObj.element.querySelector('.' + CLS_TB_ITEMS);\n        if (!isNullOrUndefined(toolbarHeader)) {\n            if (isNullOrUndefined(toolbarHeader.id) || toolbarHeader.id === '') {\n                toolbarHeader.id = this.element.id + '_' + 'tab_header_items';\n            }\n            this.element.setAttribute('aria-owns', toolbarHeader.id);\n        }\n    }\n    renderContent() {\n        this.cntEle = select('.' + CLS_CONTENT$1, this.element);\n        const hdrItem = selectAll('.' + CLS_TB_ITEM, this.element);\n        if (this.isTemplate) {\n            this.cnt = (this.cntEle.children.length > 0) ? this.cntEle.innerHTML : '';\n            const contents = this.cntEle.children;\n            for (let i = 0; i < hdrItem.length; i++) {\n                if (contents.length - 1 >= i) {\n                    addClass([contents.item(i)], CLS_ITEM$2);\n                    attributes(contents.item(i), { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM$2 + this.tabId + '_' + i });\n                    contents.item(i).id = CLS_CONTENT$1 + this.tabId + '_' + i;\n                }\n            }\n        }\n    }\n    reRenderItems() {\n        this.renderContainer();\n        if (!isNullOrUndefined(this.cntEle)) {\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n        }\n    }\n    parseObject(items, index) {\n        const tbItems = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element);\n        let maxId = this.lastIndex;\n        if (!this.isReplace && tbItems.length > 0) {\n            const idList = [];\n            tbItems.forEach((item) => {\n                idList.push(parseInt(item.id.slice(item.id.indexOf('_') + 1), 10));\n            });\n            maxId = Math.max(...idList);\n        }\n        const tItems = [];\n        let txtWrapEle;\n        const spliceArray = [];\n        items.forEach((item, i) => {\n            const pos = (isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconPosition)) ? '' : item.header.iconPosition;\n            const css = (isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconCss)) ? '' : item.header.iconCss;\n            if ((isNullOrUndefined(item.headerTemplate)) && (isNullOrUndefined(item.header) || isNullOrUndefined(item.header.text) ||\n                ((item.header.text.length === 0)) && (css === ''))) {\n                spliceArray.push(i);\n                return;\n            }\n            let txt = item.headerTemplate || item.header.text;\n            if (typeof txt === 'string' && this.enableHtmlSanitizer) {\n                txt = SanitizeHtmlHelper.sanitize(txt);\n            }\n            let itemIndex;\n            if (this.isReplace && !isNullOrUndefined(this.tbId) && this.tbId !== '') {\n                const num = (this.tbId.indexOf('_'));\n                itemIndex = parseInt(this.tbId.substring(num + 1), 10);\n                this.tbId = '';\n            }\n            else {\n                itemIndex = index + i;\n            }\n            this.lastIndex = ((tbItems.length === 0) ? i : ((this.isReplace) ? (itemIndex) : (maxId + 1 + i)));\n            const disabled = (item.disabled) ? ' ' + CLS_DISABLE$4 + ' ' + CLS_OVERLAY$2 : '';\n            const hidden = (item.visible === false) ? ' ' + CLS_HIDDEN$1 : '';\n            txtWrapEle = this.createElement('div', { className: CLS_TEXT, attrs: { 'role': 'presentation' } });\n            const tHtml = ((txt instanceof Object) ? txt.outerHTML : txt);\n            const txtEmpty = (!isNullOrUndefined(tHtml) && tHtml !== '');\n            if (!isNullOrUndefined(txt.tagName)) {\n                txtWrapEle.appendChild(txt);\n            }\n            else {\n                this.headerTextCompile(txtWrapEle, txt, i);\n            }\n            let tEle;\n            const icon = this.createElement('span', {\n                className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n            });\n            const tCont = this.createElement('div', { className: CLS_TEXT_WRAP });\n            tCont.appendChild(txtWrapEle);\n            if ((txt !== '' && txt !== undefined) && css !== '') {\n                if ((pos === 'left' || pos === 'top')) {\n                    tCont.insertBefore(icon, tCont.firstElementChild);\n                }\n                else {\n                    tCont.appendChild(icon);\n                }\n                tEle = txtWrapEle;\n                this.isIconAlone = false;\n            }\n            else {\n                tEle = ((css === '') ? txtWrapEle : icon);\n                if (tEle === icon) {\n                    detach(txtWrapEle);\n                    tCont.appendChild(icon);\n                    this.isIconAlone = true;\n                }\n            }\n            const wrapAttrs = (item.disabled) ? {} : { tabIndex: '-1' };\n            tCont.appendChild(this.btnCls.cloneNode(true));\n            const wrap = this.createElement('div', { className: CLS_WRAP, attrs: wrapAttrs });\n            wrap.appendChild(tCont);\n            if (this.itemIndexArray === []) {\n                this.itemIndexArray.push(CLS_ITEM$2 + this.tabId + '_' + this.lastIndex);\n            }\n            else {\n                this.itemIndexArray.splice((index + i), 0, CLS_ITEM$2 + this.tabId + '_' + this.lastIndex);\n            }\n            const attrObj = {\n                id: CLS_ITEM$2 + this.tabId + '_' + this.lastIndex, role: 'tab', 'aria-selected': 'false'\n            };\n            const tItem = { htmlAttributes: attrObj, template: wrap };\n            tItem.cssClass = ((item.cssClass !== undefined) ? item.cssClass : ' ') + ' ' + disabled + ' ' + hidden + ' '\n                + ((css !== '') ? 'e-i' + pos : '') + ' ' + ((!txtEmpty) ? CLS_ICON : '');\n            if (pos === 'top' || pos === 'bottom') {\n                this.element.classList.add('e-vertical-icon');\n            }\n            tItems.push(tItem);\n            i++;\n        });\n        if (!this.isAdd) {\n            spliceArray.forEach((spliceItemIndex) => {\n                this.items.splice(spliceItemIndex, 1);\n            });\n        }\n        if (this.isIconAlone) {\n            this.element.classList.add(CLS_ICON_TAB);\n        }\n        else {\n            this.element.classList.remove(CLS_ICON_TAB);\n        }\n        return tItems;\n    }\n    removeActiveClass() {\n        const tabHeader = this.getTabHeader();\n        if (tabHeader) {\n            const tabItems = selectAll('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1, tabHeader);\n            [].slice.call(tabItems).forEach((node) => node.classList.remove(CLS_ACTIVE$1));\n        }\n    }\n    checkPopupOverflow(ele) {\n        this.tbPop = select('.' + CLS_TB_POP, this.element);\n        const popIcon = select('.e-hor-nav', this.element);\n        const tbrItems = select('.' + CLS_TB_ITEMS, this.element);\n        const lastChild = tbrItems.lastChild;\n        let isOverflow = false;\n        if (!this.isVertical() && ((this.enableRtl && ((popIcon.offsetLeft + popIcon.offsetWidth) > tbrItems.offsetLeft))\n            || (!this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth))) {\n            isOverflow = true;\n        }\n        else if (this.isVertical() && (popIcon.offsetTop < lastChild.offsetTop + lastChild.offsetHeight)) {\n            isOverflow = true;\n        }\n        if (isOverflow) {\n            ele.classList.add(CLS_TB_POPUP);\n            this.tbPop.insertBefore(ele, selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n        }\n        return true;\n    }\n    popupHandler(target) {\n        const ripEle = target.querySelector('.e-ripple-element');\n        if (!isNullOrUndefined(ripEle)) {\n            ripEle.outerHTML = '';\n            target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n        }\n        this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n        const lastChild = this.tbItem[this.tbItem.length - 1];\n        if (this.tbItem.length !== 0) {\n            target.classList.remove(CLS_TB_POPUP);\n            target.removeAttribute('style');\n            this.tbItems.appendChild(target);\n            this.actEleId = target.id;\n            if (this.checkPopupOverflow(lastChild)) {\n                const prevEle = this.tbItems.lastChild.previousElementSibling;\n                this.checkPopupOverflow(prevEle);\n            }\n            this.isPopup = true;\n        }\n        return selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n    }\n    updateOrientationAttribute() {\n        attributes(this.element, { 'aria-orientation': (this.isVertical() ? 'vertical' : 'horizontal') });\n    }\n    setCloseButton(val) {\n        const trg = select('.' + CLS_HEADER$1, this.element);\n        if (val === true) {\n            trg.classList.add(CLS_CLOSE_SHOW);\n        }\n        else {\n            trg.classList.remove(CLS_CLOSE_SHOW);\n        }\n        this.tbObj.refreshOverflow();\n        this.refreshActiveTabBorder();\n    }\n    prevCtnAnimation(prev, current) {\n        let animation;\n        const checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL$4);\n        if (this.isPopup || prev <= current) {\n            if (this.animation.previous.effect === 'SlideLeftIn') {\n                animation = {\n                    name: 'SlideLeftOut',\n                    duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing\n                };\n            }\n            else {\n                animation = null;\n            }\n        }\n        else {\n            if (this.animation.next.effect === 'SlideRightIn') {\n                animation = {\n                    name: 'SlideRightOut',\n                    duration: this.animation.next.duration, timingFunction: this.animation.next.easing\n                };\n            }\n            else {\n                animation = null;\n            }\n        }\n        return animation;\n    }\n    triggerPrevAnimation(oldCnt, prevIndex) {\n        const animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n        if (!isNullOrUndefined(animateObj)) {\n            animateObj.begin = () => {\n                setStyleAttribute(oldCnt, { 'position': 'absolute' });\n                oldCnt.classList.add(CLS_PROGRESS);\n                oldCnt.classList.add('e-view');\n            };\n            animateObj.end = () => {\n                oldCnt.style.display = 'none';\n                oldCnt.classList.remove(CLS_ACTIVE$1);\n                oldCnt.classList.remove(CLS_PROGRESS);\n                oldCnt.classList.remove('e-view');\n                setStyleAttribute(oldCnt, { 'display': '', 'position': '' });\n                if (oldCnt.childNodes.length === 0 && !this.isTemplate) {\n                    detach(oldCnt);\n                }\n            };\n            new Animation(animateObj).animate(oldCnt);\n        }\n        else {\n            oldCnt.classList.remove(CLS_ACTIVE$1);\n        }\n    }\n    triggerAnimation(id, value) {\n        const prevIndex = this.prevIndex;\n        let oldCnt;\n        const itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT$1).children);\n        itemCollection.forEach((item) => {\n            if (item.id === this.prevActiveEle) {\n                oldCnt = item;\n            }\n        });\n        const prevEle = this.tbItem[prevIndex];\n        const newCnt = this.getTrgContent(this.cntEle, this.extIndex(id));\n        if (isNullOrUndefined(oldCnt) && !isNullOrUndefined(prevEle)) {\n            const idNo = this.extIndex(prevEle.id);\n            oldCnt = this.getTrgContent(this.cntEle, idNo);\n        }\n        if (!isNullOrUndefined(newCnt)) {\n            this.prevActiveEle = newCnt.id;\n        }\n        if (this.initRender || value === false || this.animation === {} || isNullOrUndefined(this.animation)) {\n            if (oldCnt && oldCnt !== newCnt) {\n                oldCnt.classList.remove(CLS_ACTIVE$1);\n            }\n            return;\n        }\n        const cnt = select('.' + CLS_CONTENT$1, this.element);\n        let animateObj;\n        if (this.prevIndex > this.selectedItem && !this.isPopup) {\n            const openEff = this.animation.previous.effect;\n            animateObj = {\n                name: ((openEff === 'None') ? '' : ((openEff !== 'SlideLeftIn') ? openEff : 'SlideLeftIn')),\n                duration: this.animation.previous.duration,\n                timingFunction: this.animation.previous.easing\n            };\n        }\n        else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n            const clsEff = this.animation.next.effect;\n            animateObj = {\n                name: ((clsEff === 'None') ? '' : ((clsEff !== 'SlideRightIn') ? clsEff : 'SlideRightIn')),\n                duration: this.animation.next.duration,\n                timingFunction: this.animation.next.easing\n            };\n        }\n        animateObj.progress = () => {\n            cnt.classList.add(CLS_PROGRESS);\n            this.setActiveBorder();\n        };\n        animateObj.end = () => {\n            cnt.classList.remove(CLS_PROGRESS);\n            newCnt.classList.add(CLS_ACTIVE$1);\n        };\n        if (!this.initRender && !isNullOrUndefined(oldCnt)) {\n            this.triggerPrevAnimation(oldCnt, prevIndex);\n        }\n        this.isPopup = false;\n        if (animateObj.name === '') {\n            newCnt.classList.add(CLS_ACTIVE$1);\n        }\n        else {\n            new Animation(animateObj).animate(newCnt);\n        }\n    }\n    keyPressed(trg) {\n        const trgParent = closest(trg, '.' + CLS_HEADER$1 + ' .' + CLS_TB_ITEM);\n        const trgIndex = this.getEleIndex(trgParent);\n        if (!isNullOrUndefined(this.popEle) && trg.classList.contains('e-hor-nav')) {\n            (this.popEle.classList.contains(CLS_POPUP_OPEN)) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n        }\n        else if (trg.classList.contains('e-scroll-nav')) {\n            trg.click();\n        }\n        else {\n            if (!isNullOrUndefined(trgParent) && trgParent.classList.contains(CLS_ACTIVE$1) === false) {\n                this.selectTab(trgIndex, null, true);\n                if (!isNullOrUndefined(this.popEle)) {\n                    this.popObj.hide(this.hide);\n                }\n            }\n        }\n    }\n    getTabHeader() {\n        if (isNullOrUndefined(this.element)) {\n            return undefined;\n        }\n        const headers = [].slice.call(this.element.children).filter((e) => e.classList.contains(CLS_HEADER$1));\n        if (headers.length > 0) {\n            return headers[0];\n        }\n        else {\n            const wrap = [].slice.call(this.element.children).filter((e) => !e.classList.contains(CLS_BLA_TEM))[0];\n            if (!wrap) {\n                return undefined;\n            }\n            return [].slice.call(wrap.children).filter((e) => e.classList.contains(CLS_HEADER$1))[0];\n        }\n    }\n    getEleIndex(item) {\n        return Array.prototype.indexOf.call(selectAll('.' + CLS_TB_ITEM, this.getTabHeader()), item);\n    }\n    extIndex(id) {\n        return id.replace(CLS_ITEM$2 + this.tabId + '_', '');\n    }\n    expTemplateContent() {\n        this.templateEle.forEach((eleStr) => {\n            if (!isNullOrUndefined(this.element.querySelector(eleStr))) {\n                document.body.appendChild(this.element.querySelector(eleStr)).style.display = 'none';\n            }\n        });\n    }\n    templateCompile(ele, cnt, index) {\n        const tempEle = this.createElement('div');\n        this.compileElement(tempEle, cnt, 'content', index);\n        if (tempEle.childNodes.length !== 0) {\n            ele.appendChild(tempEle);\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    compileElement(ele, val, prop, index) {\n        let templateFn;\n        if (typeof val === 'string') {\n            val = val.trim();\n            if (this.isVue) {\n                templateFn = compile(SanitizeHtmlHelper.sanitize(val));\n            }\n            else {\n                ele.innerHTML = SanitizeHtmlHelper.sanitize(val);\n            }\n        }\n        else {\n            templateFn = compile(val);\n        }\n        let templateFUN;\n        if (!isNullOrUndefined(templateFn)) {\n            templateFUN = templateFn({}, this, prop);\n        }\n        if (!isNullOrUndefined(templateFn) && templateFUN.length > 0) {\n            [].slice.call(templateFUN).forEach((el) => {\n                ele.appendChild(el);\n            });\n        }\n    }\n    headerTextCompile(element, text, index) {\n        this.compileElement(element, text, 'headerTemplate', index);\n    }\n    getContent(ele, cnt, callType, index) {\n        let eleStr;\n        cnt = isNullOrUndefined(cnt) ? \"\" : cnt;\n        if (typeof cnt === 'string' || isNullOrUndefined(cnt.innerHTML)) {\n            if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n                cnt = SanitizeHtmlHelper.sanitize(cnt);\n            }\n            if (cnt[0] === '.' || cnt[0] === '#') {\n                if (document.querySelectorAll(cnt).length) {\n                    const eleVal = document.querySelector(cnt);\n                    eleStr = eleVal.outerHTML.trim();\n                    if (callType === 'clone') {\n                        ele.appendChild(eleVal.cloneNode(true));\n                    }\n                    else {\n                        ele.appendChild(eleVal);\n                        eleVal.style.display = '';\n                    }\n                }\n                else {\n                    this.templateCompile(ele, cnt, index);\n                }\n            }\n            else {\n                this.templateCompile(ele, cnt, index);\n            }\n        }\n        else {\n            ele.appendChild(cnt);\n        }\n        if (!isNullOrUndefined(eleStr)) {\n            if (this.templateEle.indexOf(cnt.toString()) === -1) {\n                this.templateEle.push(cnt.toString());\n            }\n        }\n    }\n    getTrgContent(cntEle, no) {\n        let ele;\n        if (this.element.classList.contains(CLS_NEST$1)) {\n            ele = select('.' + CLS_NEST$1 + '> .' + CLS_CONTENT$1 + ' > #' + CLS_CONTENT$1 + this.tabId + '_' + no, this.element);\n        }\n        else {\n            ele = this.findEle(cntEle.children, CLS_CONTENT$1 + this.tabId + '_' + no);\n        }\n        return ele;\n    }\n    findEle(items, key) {\n        let ele;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].id === key) {\n                ele = items[i];\n                break;\n            }\n        }\n        return ele;\n    }\n    isVertical() {\n        const isVertical = (this.headerPlacement === 'Left' || this.headerPlacement === 'Right') ? true : false;\n        this.scrCntClass = (isVertical) ? CLS_VSCRCNT : CLS_HSCRCNT;\n        return isVertical;\n    }\n    addVerticalClass() {\n        if (this.isVertical()) {\n            const tbPos = (this.headerPlacement === 'Left') ? CLS_VLEFT : CLS_VRIGHT;\n            addClass([this.hdrEle], [CLS_VERTICAL$1, tbPos]);\n            if (!this.element.classList.contains(CLS_NEST$1)) {\n                addClass([this.element], [CLS_VTAB, tbPos]);\n            }\n            else {\n                addClass([this.hdrEle], [CLS_VTAB, tbPos]);\n            }\n        }\n        if (this.headerPlacement === 'Bottom') {\n            addClass([this.hdrEle], [CLS_HBOTTOM]);\n        }\n    }\n    updatePopAnimationConfig() {\n        this.show = { name: (this.isVertical() ? 'FadeIn' : 'SlideDown'), duration: 100 };\n        this.hide = { name: (this.isVertical() ? 'FadeOut' : 'SlideUp'), duration: 100 };\n    }\n    changeOrientation(place) {\n        this.setOrientation(place, this.hdrEle);\n        const activeTab = this.hdrEle.querySelector('.' + CLS_ACTIVE$1);\n        const isVertical = this.hdrEle.classList.contains(CLS_VERTICAL$1) ? true : false;\n        removeClass([this.element], [CLS_VTAB]);\n        removeClass([this.hdrEle], [CLS_VERTICAL$1, CLS_VLEFT, CLS_VRIGHT]);\n        if (isVertical !== this.isVertical()) {\n            this.changeToolbarOrientation();\n            if (!isNullOrUndefined(activeTab) && activeTab.classList.contains(CLS_TB_POPUP)) {\n                this.popupHandler(activeTab);\n            }\n        }\n        this.addVerticalClass();\n        this.updateOrientationAttribute();\n        this.setActiveBorder();\n        this.focusItem();\n    }\n    focusItem() {\n        const curActItem = select(' #' + CLS_ITEM$2 + this.tabId + '_' + this.selectedItem, this.hdrEle);\n        if (!isNullOrUndefined(curActItem)) {\n            curActItem.firstElementChild.focus();\n        }\n    }\n    changeToolbarOrientation() {\n        this.tbObj.setProperties({ height: (this.isVertical() ? '100%' : 'auto'), width: (this.isVertical() ? 'auto' : '100%') }, true);\n        this.tbObj.changeOrientation();\n        this.updatePopAnimationConfig();\n    }\n    setOrientation(place, ele) {\n        const headerPos = Array.prototype.indexOf.call(this.element.children, ele);\n        const contentPos = Array.prototype.indexOf.call(this.element.children, this.element.querySelector('.' + CLS_CONTENT$1));\n        if (place === 'Bottom' && (contentPos > headerPos)) {\n            this.element.appendChild(ele);\n        }\n        else {\n            removeClass([ele], [CLS_HBOTTOM]);\n            this.element.insertBefore(ele, select('.' + CLS_CONTENT$1, this.element));\n        }\n    }\n    setCssClass(ele, cls, val) {\n        if (cls === '') {\n            return;\n        }\n        const list = cls.split(' ');\n        for (let i = 0; i < list.length; i++) {\n            if (val) {\n                ele.classList.add(list[i]);\n            }\n            else {\n                ele.classList.remove(list[i]);\n            }\n        }\n    }\n    setContentHeight(val) {\n        if (this.element.classList.contains(CLS_FILL)) {\n            removeClass([this.element], [CLS_FILL]);\n        }\n        if (isNullOrUndefined(this.cntEle)) {\n            return;\n        }\n        const hdrEle = this.getTabHeader();\n        if (this.heightAdjustMode === 'None') {\n            if (this.height === 'auto') {\n                return;\n            }\n            else {\n                if (!this.isVertical()) {\n                    setStyleAttribute(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n                }\n            }\n        }\n        else if (this.heightAdjustMode === 'Fill') {\n            addClass([this.element], [CLS_FILL]);\n            setStyleAttribute(this.element, { 'height': '100%' });\n            setStyleAttribute(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n        }\n        else if (this.heightAdjustMode === 'Auto') {\n            if (this.isTemplate === true) {\n                const cnt = selectAll('.' + CLS_CONTENT$1 + ' > .' + CLS_ITEM$2, this.element);\n                for (let i = 0; i < cnt.length; i++) {\n                    cnt[i].setAttribute('style', 'display:block; visibility: visible');\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n                    cnt[i].style.removeProperty('display');\n                    cnt[i].style.removeProperty('visibility');\n                }\n            }\n            else {\n                this.cntEle = select('.' + CLS_CONTENT$1, this.element);\n                if (val === true) {\n                    this.cntEle.appendChild(this.createElement('div', {\n                        id: (CLS_CONTENT$1 + this.tabId + '_' + 0), className: CLS_ITEM$2 + ' ' + CLS_ACTIVE$1,\n                        attrs: { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM$2 + this.tabId + '_' + 0 }\n                    }));\n                }\n                const ele = this.cntEle.children.item(0);\n                for (let i = 0; i < this.items.length; i++) {\n                    this.getContent(ele, this.items[i].content, 'clone', i);\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n                    while (ele.firstChild) {\n                        ele.removeChild(ele.firstChild);\n                    }\n                }\n                if (this.isReact) {\n                    this.clearTemplate(['content']);\n                }\n                this.templateEle = [];\n                this.getContent(ele, this.items[0].content, 'render', 0);\n                if (this.prevIndex !== this.selectedItem) {\n                    ele.classList.remove(CLS_ACTIVE$1);\n                }\n            }\n            setStyleAttribute(this.cntEle, { 'height': this.maxHeight + 'px' });\n        }\n        else {\n            setStyleAttribute(this.cntEle, { 'height': 'auto' });\n        }\n    }\n    getHeight(ele) {\n        const cs = window.getComputedStyle(ele);\n        return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) +\n            parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n    }\n    setActiveBorder() {\n        const trgHdrEle = this.getTabHeader();\n        const trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1, trgHdrEle);\n        if (isNullOrUndefined(trg)) {\n            return;\n        }\n        if (!this.reorderActiveTab) {\n            if (trg.classList.contains(CLS_TB_POPUP) && !this.bdrLine.classList.contains(CLS_HIDDEN$1)) {\n                this.bdrLine.classList.add(CLS_HIDDEN$1);\n            }\n            if (trgHdrEle && !trgHdrEle.classList.contains(CLS_REORDER_ACTIVE_ITEM)) {\n                trgHdrEle.classList.add(CLS_REORDER_ACTIVE_ITEM);\n            }\n        }\n        else if (trgHdrEle) {\n            trgHdrEle.classList.remove(CLS_REORDER_ACTIVE_ITEM);\n        }\n        const root = closest(trg, '.' + CLS_TAB);\n        if (this.element !== root) {\n            return;\n        }\n        this.tbItems = select('.' + CLS_TB_ITEMS, trgHdrEle);\n        const bar = select('.' + CLS_INDICATOR, trgHdrEle);\n        const scrollCnt = select('.' + CLS_TB_ITEMS + ' .' + this.scrCntClass, trgHdrEle);\n        if (this.isVertical()) {\n            setStyleAttribute(bar, { 'left': '', 'right': '' });\n            const tbHeight = (isNullOrUndefined(scrollCnt)) ? this.tbItems.offsetHeight : scrollCnt.offsetHeight;\n            if (tbHeight !== 0) {\n                setStyleAttribute(bar, { 'top': trg.offsetTop + 'px', 'height': trg.offsetHeight + 'px' });\n            }\n            else {\n                setStyleAttribute(bar, { 'top': 0, 'height': 0 });\n            }\n        }\n        else {\n            if (this.overflowMode === 'MultiRow') {\n                let bar = select('.' + CLS_INDICATOR, this.element);\n                setStyleAttribute(bar, { 'top': trg.offsetHeight + trg.offsetTop + 'px', 'height': '' });\n            }\n            else {\n                setStyleAttribute(bar, { 'top': '', 'height': '' });\n            }\n            let tbWidth = (isNullOrUndefined(scrollCnt)) ? this.tbItems.offsetWidth : scrollCnt.offsetWidth;\n            if (tbWidth !== 0) {\n                setStyleAttribute(bar, { 'left': trg.offsetLeft + 'px', 'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px' });\n            }\n            else {\n                setStyleAttribute(bar, { 'left': 'auto', 'right': 'auto' });\n            }\n        }\n        if (!isNullOrUndefined(this.bdrLine) && !trg.classList.contains(CLS_TB_POPUP)) {\n            this.bdrLine.classList.remove(CLS_HIDDEN$1);\n        }\n    }\n    setActive(value, skipDataBind = false, isInteracted = false) {\n        this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n        const trg = this.tbItem[value];\n        if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\n            return;\n        }\n        if (value >= 0 && !skipDataBind) {\n            this.allowServerDataBinding = false;\n            this.setProperties({ selectedItem: value }, true);\n            this.allowServerDataBinding = true;\n            if (!this.initRender) {\n                this.serverDataBind();\n            }\n        }\n        if (trg.classList.contains(CLS_ACTIVE$1)) {\n            this.setActiveBorder();\n            return;\n        }\n        if (!this.isTemplate) {\n            const prev = this.tbItem[this.prevIndex];\n            if (!isNullOrUndefined(prev)) {\n                prev.removeAttribute('aria-controls');\n            }\n            attributes(trg, { 'aria-controls': CLS_CONTENT$1 + this.tabId + '_' + value });\n        }\n        const id = trg.id;\n        this.removeActiveClass();\n        trg.classList.add(CLS_ACTIVE$1);\n        this.tbItem[this.prevIndex].setAttribute('aria-selected', 'false');\n        trg.setAttribute('aria-selected', 'true');\n        const no = Number(this.extIndex(id));\n        if (isNullOrUndefined(this.prevActiveEle)) {\n            this.prevActiveEle = CLS_CONTENT$1 + this.tabId + '_' + no;\n        }\n        attributes(this.element, { 'aria-activedescendant': id });\n        if (this.isTemplate) {\n            if (select('.' + CLS_CONTENT$1, this.element).children.length > 0) {\n                const trg = this.findEle(select('.' + CLS_CONTENT$1, this.element).children, CLS_CONTENT$1 + this.tabId + '_' + no);\n                if (!isNullOrUndefined(trg)) {\n                    trg.classList.add(CLS_ACTIVE$1);\n                }\n                this.triggerAnimation(id, this.enableAnimation);\n            }\n        }\n        else {\n            this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT$1, this.element);\n            const item = this.getTrgContent(this.cntEle, this.extIndex(id));\n            if (isNullOrUndefined(item)) {\n                this.cntEle.appendChild(this.createElement('div', {\n                    id: CLS_CONTENT$1 + this.tabId + '_' + this.extIndex(id), className: CLS_ITEM$2 + ' ' + CLS_ACTIVE$1,\n                    attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM$2 + this.tabId + '_' + this.extIndex(id) }\n                }));\n                const eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));\n                const itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, id);\n                this.getContent(eleTrg, this.items[itemIndex].content, 'render', itemIndex);\n            }\n            else {\n                item.classList.add(CLS_ACTIVE$1);\n            }\n            this.triggerAnimation(id, this.enableAnimation);\n        }\n        this.setActiveBorder();\n        this.refreshItemVisibility(trg);\n        if (!this.initRender && !skipDataBind) {\n            trg.firstElementChild.focus();\n            const eventArg = {\n                previousItem: this.prevItem,\n                previousIndex: this.prevIndex,\n                selectedItem: trg,\n                selectedIndex: value,\n                selectedContent: select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.selectingID, this.content),\n                isSwiped: this.isSwipeed,\n                isInteracted: isInteracted\n            };\n            this.trigger('selected', eventArg);\n        }\n    }\n    setItems(items) {\n        this.isReplace = true;\n        this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n        this.tbObj.items = this.parseObject(items, 0);\n        this.tbObj.dataBind();\n        this.isReplace = false;\n    }\n    setRTL(value) {\n        this.tbObj.enableRtl = value;\n        this.tbObj.dataBind();\n        this.setCssClass(this.element, CLS_RTL$4, value);\n        this.refreshActiveBorder();\n    }\n    refreshActiveBorder() {\n        if (!isNullOrUndefined(this.bdrLine)) {\n            this.bdrLine.classList.add(CLS_HIDDEN$1);\n        }\n        this.setActiveBorder();\n    }\n    showPopup(config) {\n        const tbPop = select('.e-popup.e-toolbar-pop', this.hdrEle);\n        if (tbPop.classList.contains('e-popup-close')) {\n            const tbPopObj = (tbPop && tbPop.ej2_instances[0]);\n            tbPopObj.position.X = (this.headerPlacement === 'Left') ? 'left' : 'right';\n            tbPopObj.dataBind();\n            tbPopObj.show(config);\n        }\n    }\n    bindDraggable() {\n        if (this.allowDragAndDrop) {\n            const tabHeader = this.element.querySelector('.' + CLS_HEADER$1);\n            if (tabHeader) {\n                const items = tabHeader.querySelectorAll('.' + CLS_TB_ITEM);\n                items.forEach((element) => {\n                    this.initializeDrag(element);\n                });\n            }\n        }\n    }\n    wireEvents() {\n        this.bindDraggable();\n        window.addEventListener('resize', this.resizeContext);\n        EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n        if (!isNullOrUndefined(this.cntEle)) {\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n        }\n        this.keyModule = new KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\n        this.tabKeyModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyHandler.bind(this),\n            keyConfigs: { openPopup: 'shift+f10', tab: 'tab', shiftTab: 'shift+tab' },\n            eventName: 'keydown'\n        });\n    }\n    unWireEvents() {\n        if (!isNullOrUndefined(this.keyModule)) {\n            this.keyModule.destroy();\n        }\n        if (!isNullOrUndefined(this.tabKeyModule)) {\n            this.tabKeyModule.destroy();\n        }\n        if (!isNullOrUndefined(this.cntEle) && !isNullOrUndefined(this.touchModule)) {\n            this.touchModule.destroy();\n            this.touchModule = null;\n        }\n        window.removeEventListener('resize', this.resizeContext);\n        EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.element, 'keydown', this.spaceKeyDown);\n        this.element.classList.remove(CLS_RTL$4);\n        this.element.classList.remove(CLS_FOCUS);\n    }\n    clickHandler(args) {\n        this.element.classList.remove(CLS_FOCUS);\n        const trg = args.originalEvent.target;\n        const trgParent = closest(trg, '.' + CLS_TB_ITEM);\n        const trgIndex = this.getEleIndex(trgParent);\n        if (trg.classList.contains(CLS_ICON_CLOSE)) {\n            this.removeTab(trgIndex);\n        }\n        else if (this.isVertical() && closest(trg, '.' + CLS_HOR_NAV)) {\n            this.showPopup(this.show);\n        }\n        else {\n            this.isPopup = false;\n            if (!isNullOrUndefined(trgParent) && (trgIndex !== this.selectedItem || trgIndex !== this.prevIndex)) {\n                this.selectTab(trgIndex, args.originalEvent, true);\n            }\n        }\n    }\n    swipeHandler(e) {\n        if (e.velocity < 3 && isNullOrUndefined(e.originalEvent.changedTouches)) {\n            return;\n        }\n        if (this.isNested) {\n            this.element.setAttribute('data-swipe', 'true');\n        }\n        const nestedTab = this.element.querySelector('[data-swipe=\"true\"]');\n        if (nestedTab) {\n            nestedTab.removeAttribute('data-swipe');\n            return;\n        }\n        this.isSwipeed = true;\n        if (e.swipeDirection === 'Right' && this.selectedItem !== 0) {\n            for (let k = this.selectedItem - 1; k >= 0; k--) {\n                if (!this.tbItem[k].classList.contains(CLS_HIDDEN$1)) {\n                    this.selectTab(k, null, true);\n                    break;\n                }\n            }\n        }\n        else if (e.swipeDirection === 'Left' && (this.selectedItem !== selectAll('.' + CLS_TB_ITEM, this.element).length - 1)) {\n            for (let i = this.selectedItem + 1; i < this.tbItem.length; i++) {\n                if (!this.tbItem[i].classList.contains(CLS_HIDDEN$1)) {\n                    this.selectTab(i, null, true);\n                    break;\n                }\n            }\n        }\n        this.isSwipeed = false;\n    }\n    spaceKeyDown(e) {\n        if ((e.keyCode === 32 && e.which === 32) || (e.keyCode === 35 && e.which === 35)) {\n            const clstHead = closest(e.target, '.' + CLS_HEADER$1);\n            if (!isNullOrUndefined(clstHead)) {\n                e.preventDefault();\n            }\n        }\n    }\n    keyHandler(e) {\n        if (this.element.classList.contains(CLS_DISABLE$4)) {\n            return;\n        }\n        this.element.classList.add(CLS_FOCUS);\n        const trg = e.target;\n        const tabHeader = this.getTabHeader();\n        const actEle = select('.' + CLS_ACTIVE$1, tabHeader);\n        this.popEle = select('.' + CLS_TB_POP, tabHeader);\n        if (!isNullOrUndefined(this.popEle)) {\n            this.popObj = this.popEle.ej2_instances[0];\n        }\n        const item = closest(document.activeElement, '.' + CLS_TB_ITEM);\n        const trgParent = closest(trg, '.' + CLS_TB_ITEM);\n        switch (e.action) {\n            case 'space':\n            case 'enter':\n                if (trg.parentElement.classList.contains(CLS_DISABLE$4)) {\n                    return;\n                }\n                if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n                    this.showPopup(this.show);\n                    break;\n                }\n                this.keyPressed(trg);\n                break;\n            case 'tab':\n            case 'shiftTab':\n                if (trg.classList.contains(CLS_WRAP)\n                    && closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE$1) === false) {\n                    trg.setAttribute('tabindex', '-1');\n                }\n                if (this.popObj && isVisible(this.popObj.element)) {\n                    this.popObj.hide(this.hide);\n                }\n                actEle.children.item(0).setAttribute('tabindex', '0');\n                break;\n            case 'moveLeft':\n            case 'moveRight':\n                if (!isNullOrUndefined(item)) {\n                    this.refreshItemVisibility(item);\n                }\n                break;\n            case 'openPopup':\n                e.preventDefault();\n                if (!isNullOrUndefined(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n                    this.popObj.show(this.show);\n                }\n                break;\n            case 'delete':\n                if (this.showCloseButton === true && !isNullOrUndefined(trgParent)) {\n                    const nxtSib = trgParent.nextSibling;\n                    if (!isNullOrUndefined(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n                        nxtSib.firstElementChild.focus();\n                    }\n                    this.removeTab(this.getEleIndex(trgParent));\n                }\n                this.setActiveBorder();\n                break;\n        }\n    }\n    /**\n     * Refresh the active tab border\n     *\n     * @returns {void}\n     * @private\n     */\n    refreshActiveTabBorder() {\n        const activeEle = select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE$1, this.element);\n        if (!isNullOrUndefined(activeEle) && this.reorderActiveTab) {\n            this.select(this.getEleIndex(activeEle));\n        }\n        this.refreshActiveBorder();\n    }\n    refreshItemVisibility(target) {\n        const scrCnt = select('.' + this.scrCntClass, this.tbItems);\n        if (!this.isVertical() && !isNullOrUndefined(scrCnt)) {\n            const scrBar = select('.e-hscroll-bar', this.tbItems);\n            const scrStart = scrBar.scrollLeft;\n            const scrEnd = scrStart + scrBar.offsetWidth;\n            const eleStart = target.offsetLeft;\n            const eleWidth = target.offsetWidth;\n            const eleEnd = target.offsetLeft + target.offsetWidth;\n            if ((scrStart < eleStart) && (scrEnd < eleEnd)) {\n                const eleViewRange = scrEnd - eleStart;\n                scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n            }\n            else {\n                if ((scrStart > eleStart) && (scrEnd > eleEnd)) {\n                    const eleViewRange = eleEnd - scrStart;\n                    scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n                }\n            }\n        }\n        else {\n            return;\n        }\n    }\n    hoverHandler(e) {\n        const trg = e.target;\n        if (!isNullOrUndefined(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\n            trg.setAttribute('title', new L10n('tab', { closeButtonTitle: this.title }, this.locale).getConstant('closeButtonTitle'));\n        }\n    }\n    evalOnPropertyChangeItems(newProp, oldProp) {\n        if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n            const changedProp = Object.keys(newProp.items);\n            for (let i = 0; i < changedProp.length; i++) {\n                const index = parseInt(Object.keys(newProp.items)[i], 10);\n                const properties = Object.keys(newProp.items[index]);\n                for (let j = 0; j < properties.length; j++) {\n                    const oldVal = Object(oldProp.items[index])[properties[j]];\n                    const newVal = Object(newProp.items[index])[properties[j]];\n                    const hdr = this.element.querySelectorAll('.' + CLS_TB_ITEM)[index];\n                    let itemIndex;\n                    if (hdr && !isNullOrUndefined(hdr.id) && hdr.id !== '') {\n                        const num = (hdr.id.lastIndexOf('_'));\n                        itemIndex = parseInt(hdr.id.substring(num + 1), 10);\n                    }\n                    else {\n                        itemIndex = index;\n                    }\n                    const hdrItem = select('.' + CLS_TB_ITEMS + ' #' + CLS_ITEM$2 + this.tabId + '_' + itemIndex, this.element);\n                    const cntItem = select('.' + CLS_CONTENT$1 + ' #' + CLS_CONTENT$1 + this.tabId + '_' + itemIndex, this.element);\n                    if (properties[j] === 'header' || properties[j] === 'headerTemplate') {\n                        const icon = (isNullOrUndefined(this.items[index].header) ||\n                            isNullOrUndefined(this.items[index].header.iconCss)) ? '' : this.items[index].header.iconCss;\n                        const textVal = this.items[index].headerTemplate || this.items[index].header.text;\n                        if ((textVal === '') && (icon === '')) {\n                            this.removeTab(index);\n                        }\n                        else {\n                            this.tbId = hdr.id;\n                            const arr = [];\n                            arr.push(this.items[index]);\n                            this.items.splice(index, 1);\n                            this.itemIndexArray.splice(index, 1);\n                            this.tbObj.items.splice(index, 1);\n                            const isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN$1);\n                            detach(hdrItem);\n                            this.isReplace = true;\n                            this.addTab(arr, index);\n                            if (isHiddenEle) {\n                                this.hideTab(index);\n                            }\n                            this.isReplace = false;\n                        }\n                    }\n                    if (properties[j] === 'content' && !isNullOrUndefined(cntItem)) {\n                        const strVal = typeof newVal === 'string' || isNullOrUndefined(newVal.innerHTML);\n                        if (strVal && (newVal[0] === '.' || newVal[0] === '#') && newVal.length) {\n                            const eleVal = document.querySelector(newVal);\n                            cntItem.appendChild(eleVal);\n                            eleVal.style.display = '';\n                        }\n                        else if (newVal === '' && oldVal[0] === '#') {\n                            document.body.appendChild(this.element.querySelector(oldVal)).style.display = 'none';\n                            cntItem.innerHTML = newVal;\n                        }\n                        else if (this.isReact) {\n                            cntItem.innerHTML = '';\n                            this.templateCompile(cntItem, newVal, index);\n                        }\n                        else if (typeof newVal !== 'function') {\n                            cntItem.innerHTML = newVal;\n                        }\n                    }\n                    if (properties[j] === 'cssClass') {\n                        if (!isNullOrUndefined(hdrItem)) {\n                            hdrItem.classList.remove(oldVal);\n                            hdrItem.classList.add(newVal);\n                        }\n                        if (!isNullOrUndefined(cntItem)) {\n                            cntItem.classList.remove(oldVal);\n                            cntItem.classList.add(newVal);\n                        }\n                    }\n                    if (properties[j] === 'disabled') {\n                        this.enableTab(index, ((newVal === true) ? false : true));\n                    }\n                    if (properties[j] === 'visible') {\n                        this.hideTab(index, ((newVal === true) ? false : true));\n                    }\n                }\n            }\n        }\n        else {\n            this.lastIndex = 0;\n            if (isNullOrUndefined(this.tbObj)) {\n                this.reRenderItems();\n            }\n            else {\n                if (this.isReact || this.isAngular) {\n                    this.clearTemplate();\n                }\n                this.setItems(newProp.items);\n                if (this.templateEle.length > 0) {\n                    this.expTemplateContent();\n                }\n                this.templateEle = [];\n                const selectElement = select('.' + CLS_TAB + ' > .' + CLS_CONTENT$1, this.element);\n                while (selectElement.firstElementChild) {\n                    detach(selectElement.firstElementChild);\n                }\n                this.select(this.selectedItem);\n                this.draggableItems = [];\n                this.bindDraggable();\n            }\n        }\n    }\n    initializeDrag(target) {\n        let dragObj = new Draggable(target, {\n            dragArea: this.dragArea,\n            dragTarget: '.' + CLS_TB_ITEM,\n            clone: true,\n            helper: this.helper.bind(this),\n            dragStart: this.itemDragStart.bind(this),\n            drag: (e) => {\n                let dragIndex = this.getEleIndex(this.dragItem);\n                let dropIndex;\n                let dropItem;\n                let dragArgs = {\n                    draggedItem: this.dragItem,\n                    event: e.event,\n                    target: e.target,\n                    droppedItem: e.target.closest('.' + CLS_TB_ITEM),\n                    clonedElement: this.cloneElement,\n                    index: dragIndex\n                };\n                if (!isNullOrUndefined(e.target.closest('.' + CLS_TAB)) && !e.target.closest('.' + CLS_TAB).isEqualNode(this.element) &&\n                    this.dragArea !== '.' + CLS_HEADER$1) {\n                    this.trigger('dragging', dragArgs);\n                }\n                else {\n                    if (!(e.target.closest(this.dragArea)) && this.overflowMode !== 'Popup') {\n                        document.body.style.cursor = 'not-allowed';\n                        addClass([this.cloneElement], CLS_HIDDEN$1);\n                        if (this.dragItem.classList.contains(CLS_HIDDEN$1)) {\n                            removeClass([this.dragItem], CLS_HIDDEN$1);\n                        }\n                        this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n                    }\n                    else {\n                        document.body.style.cursor = '';\n                        this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n                        if (this.cloneElement.classList.contains(CLS_HIDDEN$1)) {\n                            removeClass([this.cloneElement], CLS_HIDDEN$1);\n                        }\n                    }\n                    if (this.overflowMode === 'Scrollable' && !isNullOrUndefined(this.element.querySelector('.e-hscroll'))) {\n                        let scrollRightNavEle = this.element.querySelector('.e-scroll-right-nav');\n                        let scrollLeftNavEle = this.element.querySelector('.e-scroll-left-nav');\n                        let hscrollBar = this.element.querySelector('.e-hscroll-bar');\n                        if (!isNullOrUndefined(scrollRightNavEle) && Math.abs((scrollRightNavEle.offsetWidth / 2) +\n                            scrollRightNavEle.offsetLeft) > this.cloneElement.offsetLeft + this.cloneElement.offsetWidth) {\n                            hscrollBar.scrollLeft -= 10;\n                        }\n                        if (!isNullOrUndefined(scrollLeftNavEle) && Math.abs((scrollLeftNavEle.offsetLeft + scrollLeftNavEle.offsetWidth) -\n                            this.cloneElement.offsetLeft) > (scrollLeftNavEle.offsetWidth / 2)) {\n                            hscrollBar.scrollLeft += 10;\n                        }\n                    }\n                    this.cloneElement.style.pointerEvents = 'none';\n                    dropItem = closest(e.target, '.' + CLS_TB_ITEM + '.e-draggable');\n                    let scrollContentWidth = 0;\n                    if (this.overflowMode === 'Scrollable' && !isNullOrUndefined(this.element.querySelector('.e-hscroll'))) {\n                        scrollContentWidth = this.element.querySelector('.e-hscroll-content').offsetWidth;\n                    }\n                    if (dropItem != null && !dropItem.isSameNode(this.dragItem) &&\n                        dropItem.closest('.' + CLS_TAB).isSameNode(this.dragItem.closest('.' + CLS_TAB))) {\n                        dropIndex = this.getEleIndex(dropItem);\n                        if (dropIndex < dragIndex &&\n                            (Math.abs((dropItem.offsetLeft + dropItem.offsetWidth) -\n                                this.cloneElement.offsetLeft) > (dropItem.offsetWidth / 2))) {\n                            this.dragAction(dropItem, dragIndex, dropIndex);\n                        }\n                        if (dropIndex > dragIndex &&\n                            (Math.abs(dropItem.offsetWidth / 2) + dropItem.offsetLeft -\n                                scrollContentWidth) < this.cloneElement.offsetLeft + this.cloneElement.offsetWidth) {\n                            this.dragAction(dropItem, dragIndex, dropIndex);\n                        }\n                    }\n                    this.droppedIndex = this.getEleIndex(this.dragItem);\n                    this.trigger('dragging', dragArgs);\n                }\n            },\n            dragStop: this.itemDragStop.bind(this)\n        });\n        this.draggableItems.push(dragObj);\n    }\n    helper(e) {\n        this.cloneElement = this.createElement('div');\n        if (e.element) {\n            this.cloneElement = (e.element.cloneNode(true));\n            addClass([this.cloneElement], 'e-tab-clone-element');\n            if (this.element.querySelector('.' + CLS_HEADER$1).classList.contains(CLS_CLOSE_SHOW)) {\n                addClass([this.cloneElement], CLS_CLOSE_SHOW);\n            }\n            removeClass([this.cloneElement.querySelector('.' + CLS_WRAP)], 'e-ripple');\n            if (!isNullOrUndefined(this.cloneElement.querySelector('.e-ripple-element'))) {\n                remove(this.cloneElement.querySelector('.e-ripple-element'));\n            }\n            document.body.appendChild(this.cloneElement);\n        }\n        return this.cloneElement;\n    }\n    itemDragStart(e) {\n        this.draggingItems = this.items.map((x) => x);\n        this.dragItem = e.element;\n        let dragArgs = {\n            draggedItem: e.element,\n            event: e.event,\n            target: e.target,\n            droppedItem: null,\n            index: this.getEleIndex(this.dragItem),\n            clonedElement: this.cloneElement,\n            cancel: false\n        };\n        this.trigger('onDragStart', dragArgs, (tabitemDragArgs) => {\n            if (tabitemDragArgs.cancel) {\n                detach(this.cloneElement);\n            }\n            else {\n                this.removeActiveClass();\n                addClass([this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN$1);\n                this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n            }\n        });\n    }\n    dragAction(dropItem, dragsIndex, dropIndex) {\n        if (this.items.length > 0) {\n            let item = this.draggingItems[dragsIndex];\n            this.draggingItems.splice(dragsIndex, 1);\n            this.draggingItems.splice(dropIndex, 0, item);\n        }\n        if (this.overflowMode === 'MultiRow') {\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\n        }\n        if (dragsIndex > dropIndex) {\n            if (!(this.dragItem.parentElement).isSameNode(dropItem.parentElement)) {\n                if (this.overflowMode === 'Extended') {\n                    if (dropItem.isSameNode(dropItem.parentElement.lastChild)) {\n                        let popupContainer = this.dragItem.parentNode;\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                        popupContainer.insertBefore(dropItem.parentElement.lastChild, popupContainer.childNodes[0]);\n                    }\n                    else {\n                        this.dragItem.parentNode.insertBefore((dropItem.parentElement.lastChild), this.dragItem.parentElement.childNodes[0]);\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                    }\n                }\n                else {\n                    let lastEle = (dropItem.parentElement).lastChild;\n                    if (dropItem.isSameNode(lastEle)) {\n                        let popupContainer = this.dragItem.parentNode;\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                        popupContainer.insertBefore(lastEle, popupContainer.childNodes[0]);\n                    }\n                    else {\n                        this.dragItem.parentNode.insertBefore((dropItem.parentElement).lastChild, this.dragItem.parentElement.childNodes[0]);\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                    }\n                }\n            }\n            else {\n                this.dragItem.parentNode.insertBefore(this.dragItem, dropItem);\n            }\n        }\n        if (dragsIndex < dropIndex) {\n            if (!(this.dragItem.parentElement).isSameNode(dropItem.parentElement)) {\n                if (this.overflowMode === 'Extended') {\n                    this.dragItem.parentElement.appendChild(dropItem.parentElement.firstElementChild);\n                    dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextSibling);\n                }\n                else {\n                    this.dragItem.parentNode.insertBefore((dropItem.parentElement).lastChild, this.dragItem.parentElement.childNodes[0]);\n                    dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                }\n            }\n            else {\n                this.dragItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\n            }\n        }\n    }\n    itemDragStop(e) {\n        detach(this.cloneElement);\n        this.cloneElement = null;\n        this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n        document.body.style.cursor = '';\n        let dragStopArgs = {\n            draggedItem: this.dragItem,\n            event: e.event,\n            target: e.target,\n            droppedItem: this.tbItem[this.droppedIndex],\n            clonedElement: null,\n            index: this.droppedIndex,\n            cancel: false\n        };\n        this.trigger('dragged', dragStopArgs, (tabItemDropArgs) => {\n            if (tabItemDropArgs.cancel) {\n                this.refresh();\n            }\n            else {\n                if (this.items.length > 0 && this.draggingItems.length > 0) {\n                    this.items = this.draggingItems;\n                    this.selectedItem = this.droppedIndex;\n                    this.refresh();\n                }\n                else {\n                    this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = '';\n                    removeClass([this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN$1);\n                    this.selectTab(this.droppedIndex, null, true);\n                }\n            }\n        });\n        this.dragItem = null;\n    }\n    /**\n     * Enables or disables the specified Tab item. On passing value as `false`, the item will be disabled.\n     *\n     * @param {number} index - Index value of target Tab item.\n     * @param {boolean} value - Boolean value that determines whether the command should be enabled or disabled.\n     * By default, isEnable is true.\n     * @returns {void}.\n     */\n    enableTab(index, value) {\n        const tbItems = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNullOrUndefined(tbItems)) {\n            return;\n        }\n        if (value === true) {\n            tbItems.classList.remove(CLS_DISABLE$4, CLS_OVERLAY$2);\n            tbItems.firstElementChild.setAttribute('tabindex', '-1');\n        }\n        else {\n            tbItems.classList.add(CLS_DISABLE$4, CLS_OVERLAY$2);\n            tbItems.firstElementChild.removeAttribute('tabindex');\n            if (tbItems.classList.contains(CLS_ACTIVE$1)) {\n                this.select(index + 1);\n            }\n        }\n        if (!isNullOrUndefined(this.items[index])) {\n            this.items[index].disabled = !value;\n            this.dataBind();\n        }\n        tbItems.setAttribute('aria-disabled', (value === true) ? 'false' : 'true');\n    }\n    /**\n     * Adds new items to the Tab that accepts an array as Tab items.\n     *\n     * @param {TabItemModel[]} items - An array of item that is added to the Tab.\n     * @param {number} index - Number value that determines where the items to be added. By default, index is 0.\n     * @returns {void}.\n     */\n    addTab(items, index) {\n        const addArgs = { addedItems: items, cancel: false };\n        if (!this.isReplace) {\n            this.trigger('adding', addArgs, (tabAddingArgs) => {\n                if (!tabAddingArgs.cancel) {\n                    this.addingTabContent(items, index);\n                }\n            });\n        }\n        else {\n            this.addingTabContent(items, index);\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    addingTabContent(items, index) {\n        let lastEleIndex = 0;\n        this.hdrEle = select('.' + CLS_HEADER$1, this.element);\n        if (isNullOrUndefined(this.hdrEle)) {\n            this.items = items;\n            this.reRenderItems();\n            this.bindDraggable();\n        }\n        else {\n            const itemsCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\n            if (itemsCount !== 0) {\n                lastEleIndex = this.lastIndex + 1;\n            }\n            if (isNullOrUndefined(index)) {\n                index = itemsCount - 1;\n            }\n            if (itemsCount < index || index < 0 || isNaN(index)) {\n                return;\n            }\n            if (itemsCount === 0 && !isNullOrUndefined(this.hdrEle)) {\n                this.hdrEle.style.display = '';\n            }\n            if (!isNullOrUndefined(this.bdrLine)) {\n                this.bdrLine.classList.add(CLS_HIDDEN$1);\n            }\n            this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n            this.isAdd = true;\n            const tabItems = this.parseObject(items, index);\n            this.isAdd = false;\n            let i = 0;\n            let textValue;\n            items.forEach((item, place) => {\n                textValue = item.headerTemplate || item.header.text;\n                if (!(isNullOrUndefined(item.headerTemplate || item.header) || isNullOrUndefined(textValue) ||\n                    (textValue.length === 0) && !isNullOrUndefined(item.header) && isNullOrUndefined(item.header.iconCss))) {\n                    if (tabItems[place]) {\n                        if (isNullOrUndefined(item.id)) {\n                            item.id = TABITEMPREFIX + (lastEleIndex + place).toString();\n                        }\n                        tabItems[place].htmlAttributes['data-id'] = item.id;\n                    }\n                    this.items.splice((index + i), 0, item);\n                    i++;\n                }\n                if (this.isTemplate && !isNullOrUndefined(item.header) && !isNullOrUndefined(item.header.text)) {\n                    const no = lastEleIndex + place;\n                    const ele = this.createElement('div', {\n                        id: CLS_CONTENT$1 + this.tabId + '_' + no, className: CLS_ITEM$2,\n                        attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM$2 + '_' + no }\n                    });\n                    this.cntEle.insertBefore(ele, this.cntEle.children[(index + place)]);\n                    const eleTrg = this.getTrgContent(this.cntEle, no.toString());\n                    this.getContent(eleTrg, item.content, 'render', index);\n                }\n            });\n            this.tbObj.addItems(tabItems, index);\n            if (!this.isReplace) {\n                this.trigger('added', { addedItems: items });\n            }\n            if (this.selectedItem === index) {\n                this.select(index);\n            }\n            else {\n                this.setActiveBorder();\n                this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n            }\n            this.bindDraggable();\n        }\n    }\n    /**\n     * Removes the items in the Tab from the specified index.\n     *\n     * @param {number} index - Index of target item that is going to be removed.\n     * @returns {void}.\n     */\n    removeTab(index) {\n        const trg = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNullOrUndefined(trg)) {\n            return;\n        }\n        const removeArgs = { removedItem: trg, removedIndex: index, cancel: false };\n        this.trigger('removing', removeArgs, (tabRemovingArgs) => {\n            if (!tabRemovingArgs.cancel) {\n                this.tbObj.removeItems(index);\n                if (this.allowDragAndDrop && (index !== Array.prototype.indexOf.call(this.itemIndexArray, trg.id))) {\n                    index = Array.prototype.indexOf.call(this.itemIndexArray, trg.id);\n                }\n                const targetEleIndex = this.itemIndexArray.indexOf(trg.id);\n                this.items.splice(targetEleIndex, 1);\n                this.itemIndexArray.splice(targetEleIndex, 1);\n                this.refreshActiveBorder();\n                const cntTrg = select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.extIndex(trg.id), select('.' + CLS_CONTENT$1, this.element));\n                if (!isNullOrUndefined(cntTrg)) {\n                    detach(cntTrg);\n                }\n                this.trigger('removed', tabRemovingArgs);\n                if (this.draggableItems && this.draggableItems.length > 0) {\n                    this.draggableItems[index].destroy();\n                    this.draggableItems[index] = null;\n                    this.draggableItems.splice(index, 1);\n                }\n                if (trg.classList.contains(CLS_ACTIVE$1)) {\n                    index = (index > selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', this.element).length - 1) ? index - 1 : index;\n                    this.enableAnimation = false;\n                    this.selectedItem = index;\n                    this.select(index);\n                }\n                else if (index !== this.selectedItem) {\n                    if (index < this.selectedItem) {\n                        index = this.itemIndexArray.indexOf(this.tbItem[this.selectedItem].id);\n                        this.setProperties({ selectedItem: index > -1 ? index : this.selectedItem }, true);\n                        this.prevIndex = this.selectedItem;\n                    }\n                    this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n                }\n                if (selectAll('.' + CLS_TB_ITEM, this.element).length === 0) {\n                    this.hdrEle.style.display = 'none';\n                }\n                this.enableAnimation = true;\n            }\n        });\n    }\n    /**\n     * Shows or hides the Tab that is in the specified index.\n     *\n     * @param {number} index - Index value of target item.\n     * @param {boolean} value - Based on this Boolean value, item will be hide (false) or show (true). By default, value is true.\n     * @returns {void}.\n     */\n    hideTab(index, value) {\n        let items;\n        const item = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNullOrUndefined(item)) {\n            return;\n        }\n        if (isNullOrUndefined(value)) {\n            value = true;\n        }\n        this.bdrLine.classList.add(CLS_HIDDEN$1);\n        if (value === true) {\n            item.classList.add(CLS_HIDDEN$1);\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN$1 + ')', this.tbItems);\n            if (items.length !== 0 && item.classList.contains(CLS_ACTIVE$1)) {\n                if (index !== 0) {\n                    for (let i = index - 1; i >= 0; i--) {\n                        if (!this.tbItem[i].classList.contains(CLS_HIDDEN$1)) {\n                            this.select(i);\n                            break;\n                        }\n                        else if (i === 0) {\n                            for (let k = index + 1; k < this.tbItem.length; k++) {\n                                if (!this.tbItem[k].classList.contains(CLS_HIDDEN$1)) {\n                                    this.select(k);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    for (let k = index + 1; k < this.tbItem.length; k++) {\n                        if (!this.tbItem[k].classList.contains(CLS_HIDDEN$1)) {\n                            this.select(k);\n                            break;\n                        }\n                    }\n                }\n            }\n            else if (items.length === 0) {\n                this.element.classList.add(CLS_HIDDEN$1);\n            }\n        }\n        else {\n            this.element.classList.remove(CLS_HIDDEN$1);\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN$1 + ')', this.tbItems);\n            item.classList.remove(CLS_HIDDEN$1);\n            if (items.length === 0) {\n                this.select(index);\n            }\n        }\n        this.setActiveBorder();\n        item.setAttribute('aria-hidden', '' + value);\n        if (this.overflowMode === 'Popup' && this.tbObj) {\n            this.tbObj.refreshOverflow();\n        }\n    }\n    selectTab(args, event = null, isInteracted = false) {\n        this.isInteracted = isInteracted;\n        this.select(args, event);\n    }\n    /**\n     * Specifies the index or HTMLElement to select an item from the Tab.\n     *\n     * @param {number | HTMLElement} args - Index or DOM element is used for selecting an item from the Tab.\n     * @param {Event} event - An event which takes place in DOM.\n     * @returns {void}\n     */\n    select(args, event) {\n        const tabHeader = this.getTabHeader();\n        this.tbItems = select('.' + CLS_TB_ITEMS, tabHeader);\n        this.tbItem = selectAll('.' + CLS_TB_ITEM, tabHeader);\n        this.content = select('.' + CLS_CONTENT$1, this.element);\n        this.prevItem = this.tbItem[this.prevIndex];\n        if (isNullOrUndefined(this.selectedItem) || (this.selectedItem < 0) || (this.tbItem.length <= this.selectedItem) || isNaN(this.selectedItem)) {\n            this.selectedItem = 0;\n        }\n        else {\n            this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id);\n        }\n        const trg = this.tbItem[args];\n        if (isNullOrUndefined(trg)) {\n            this.selectedID = '0';\n        }\n        else {\n            this.selectingID = this.extIndex(trg.id);\n        }\n        if (!isNullOrUndefined(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE$4)) {\n            this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n        }\n        const eventArg = {\n            event: event,\n            previousItem: this.prevItem,\n            previousIndex: this.prevIndex,\n            selectedItem: this.tbItem[this.selectedItem],\n            selectedIndex: this.selectedItem,\n            selectedContent: !isNullOrUndefined(this.content) ?\n                select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.selectedID, this.content) : null,\n            selectingItem: trg,\n            selectingIndex: args,\n            selectingContent: !isNullOrUndefined(this.content) ?\n                select('#' + CLS_CONTENT$1 + this.tabId + '_' + this.selectingID, this.content) : null,\n            isSwiped: this.isSwipeed,\n            isInteracted: this.isInteracted,\n            cancel: false\n        };\n        if (!this.initRender) {\n            this.trigger('selecting', eventArg, (selectArgs) => {\n                if (!selectArgs.cancel) {\n                    this.selectingContent(args, this.isInteracted);\n                }\n            });\n        }\n        else {\n            this.selectingContent(args, this.isInteracted);\n        }\n        this.isInteracted = false;\n    }\n    selectingContent(args, isInteracted) {\n        if (typeof args === 'number') {\n            if (!isNullOrUndefined(this.tbItem[args]) && (this.tbItem[args].classList.contains(CLS_DISABLE$4) ||\n                this.tbItem[args].classList.contains(CLS_HIDDEN$1))) {\n                for (let i = args + 1; i < this.items.length; i++) {\n                    if (this.items[i].disabled === false && this.items[i].visible === true) {\n                        args = i;\n                        break;\n                    }\n                    else {\n                        args = 0;\n                    }\n                }\n            }\n            if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n                this.prevIndex = this.selectedItem;\n                this.prevItem = this.tbItem[this.prevIndex];\n                if (this.tbItem[args].classList.contains(CLS_TB_POPUP) && this.reorderActiveTab) {\n                    this.setActive(this.popupHandler(this.tbItem[args]), null, isInteracted);\n                    if ((!isNullOrUndefined(this.items) && this.items.length > 0) && this.allowDragAndDrop) {\n                        this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n                        let item = this.items[args];\n                        this.items.splice(args, 1);\n                        this.items.splice(this.tbItem.length - 1, 0, item);\n                        let itemId = this.itemIndexArray[args];\n                        this.itemIndexArray.splice(args, 1);\n                        this.itemIndexArray.splice(this.tbItem.length - 1, 0, itemId);\n                    }\n                }\n                else {\n                    this.setActive(args, null, isInteracted);\n                }\n            }\n            else {\n                this.setActive(0, null, isInteracted);\n            }\n        }\n        else if (args instanceof (HTMLElement)) {\n            this.setActive(this.getEleIndex(args), null, isInteracted);\n        }\n    }\n    /**\n     * Gets the item index from the Tab.\n     *\n     * @param  {string} tabItemId - Item ID is used for getting index from the Tab.\n     * @returns {number} - It returns item index.\n     */\n    getItemIndex(tabItemId) {\n        let tabIndex;\n        for (let i = 0; i < this.tbItem.length; i++) {\n            const value = this.tbItem[i].getAttribute('data-id');\n            if (tabItemId === value) {\n                tabIndex = i;\n                break;\n            }\n        }\n        return tabIndex;\n    }\n    /**\n     * Specifies the value to disable/enable the Tab component.\n     * When set to `true`, the component will be disabled.\n     *\n     * @param  {boolean} value - Based on this Boolean value, Tab will be enabled (false) or disabled (true).\n     * @returns {void}.\n     */\n    disable(value) {\n        this.setCssClass(this.element, CLS_DISABLE$4, value);\n        this.element.setAttribute('aria-disabled', '' + value);\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - It returns the persisted state.\n     */\n    getPersistData() {\n        return this.addOnPersist(['selectedItem', 'actEleId']);\n    }\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    getModuleName() {\n        return 'tab';\n    }\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     *\n     * @param  {TabModel} newProp - It contains the new value of data.\n     * @param  {TabModel} oldProp - It contains the old value of data.\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'width':\n                    setStyleAttribute(this.element, { width: formatUnit(newProp.width) });\n                    break;\n                case 'height':\n                    setStyleAttribute(this.element, { height: formatUnit(newProp.height) });\n                    this.setContentHeight(false);\n                    break;\n                case 'cssClass':\n                    const headerEle = this.element.querySelector('.' + CLS_HEADER$1);\n                    if (oldProp.cssClass !== '' && !isNullOrUndefined(oldProp.cssClass)) {\n                        this.setCssClass(this.element, oldProp.cssClass, false);\n                        this.setCssClass(this.element, newProp.cssClass, true);\n                        if (!isNullOrUndefined(headerEle)) {\n                            this.setCssClass(headerEle, oldProp.cssClass, false);\n                            this.setCssClass(headerEle, newProp.cssClass, true);\n                        }\n                    }\n                    else {\n                        this.setCssClass(this.element, newProp.cssClass, true);\n                        if (!isNullOrUndefined(headerEle)) {\n                            this.setCssClass(headerEle, newProp.cssClass, true);\n                        }\n                    }\n                    break;\n                case 'items':\n                    this.evalOnPropertyChangeItems(newProp, oldProp);\n                    break;\n                case 'showCloseButton':\n                    this.setCloseButton(newProp.showCloseButton);\n                    break;\n                case 'reorderActiveTab':\n                    this.refreshActiveTabBorder();\n                    break;\n                case 'selectedItem':\n                    this.selectedItem = oldProp.selectedItem;\n                    this.select(newProp.selectedItem);\n                    break;\n                case 'headerPlacement':\n                    this.changeOrientation(newProp.headerPlacement);\n                    break;\n                case 'enableRtl':\n                    this.setRTL(newProp.enableRtl);\n                    break;\n                case 'overflowMode':\n                    this.tbObj.overflowMode = newProp.overflowMode;\n                    this.tbObj.dataBind();\n                    this.refreshActiveTabBorder();\n                    break;\n                case 'heightAdjustMode':\n                    this.setContentHeight(false);\n                    this.select(this.selectedItem);\n                    break;\n                case 'scrollStep':\n                    if (this.tbObj) {\n                        this.tbObj.scrollStep = this.scrollStep;\n                    }\n                    break;\n                case 'allowDragAndDrop':\n                    this.bindDraggable();\n                    break;\n                case 'dragArea':\n                    if (this.allowDragAndDrop) {\n                        this.draggableItems.forEach((item) => {\n                            item.dragArea = this.dragArea;\n                        });\n                        this.refresh();\n                    }\n                    break;\n            }\n        }\n    }\n    refreshActiveTab() {\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        if (!this.isTemplate) {\n            if (this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1)) {\n                detach(this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1).children[0]);\n                detach(this.element.querySelector('.' + CLS_CONTENT$1).querySelector('.' + CLS_ACTIVE$1).children[0]);\n                const item = this.items[this.selectedItem];\n                const pos = (isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconPosition)) ? '' : item.header.iconPosition;\n                const css = (isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconCss)) ? '' : item.header.iconCss;\n                const text = item.headerTemplate || item.header.text;\n                const txtWrap = this.createElement('div', { className: CLS_TEXT, attrs: { 'role': 'presentation' } });\n                if (!isNullOrUndefined(text.tagName)) {\n                    txtWrap.appendChild(text);\n                }\n                else {\n                    this.headerTextCompile(txtWrap, text, this.selectedItem);\n                }\n                let tEle;\n                const icon = this.createElement('span', {\n                    className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n                });\n                const tConts = this.createElement('div', { className: CLS_TEXT_WRAP });\n                tConts.appendChild(txtWrap);\n                if ((text !== '' && text !== undefined) && css !== '') {\n                    if ((pos === 'left' || pos === 'top')) {\n                        tConts.insertBefore(icon, tConts.firstElementChild);\n                    }\n                    else {\n                        tConts.appendChild(icon);\n                    }\n                    tEle = txtWrap;\n                    this.isIconAlone = false;\n                }\n                else {\n                    tEle = ((css === '') ? txtWrap : icon);\n                    if (tEle === icon) {\n                        detach(txtWrap);\n                        tConts.appendChild(icon);\n                        this.isIconAlone = true;\n                    }\n                }\n                const wrapAtt = (item.disabled) ? {} : { tabIndex: '-1' };\n                tConts.appendChild(this.btnCls.cloneNode(true));\n                const wraper = this.createElement('div', { className: CLS_WRAP, attrs: wrapAtt });\n                wraper.appendChild(tConts);\n                if (pos === 'top' || pos === 'bottom') {\n                    this.element.classList.add('e-vertical-icon');\n                }\n                this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1).appendChild(wraper);\n                const crElem = this.createElement('div');\n                let cnt = item.content;\n                let eleStr;\n                if (typeof cnt === 'string' || isNullOrUndefined(cnt.innerHTML)) {\n                    if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n                        cnt = SanitizeHtmlHelper.sanitize(cnt);\n                    }\n                    if (cnt[0] === '.' || cnt[0] === '#') {\n                        if (document.querySelectorAll(cnt).length) {\n                            const eleVal = document.querySelector(cnt);\n                            eleStr = eleVal.outerHTML.trim();\n                            crElem.appendChild(eleVal);\n                            eleVal.style.display = '';\n                        }\n                        else {\n                            this.compileElement(crElem, cnt, 'content', this.selectedItem);\n                        }\n                    }\n                    else {\n                        this.compileElement(crElem, cnt, 'content', this.selectedItem);\n                    }\n                }\n                else {\n                    crElem.appendChild(cnt);\n                }\n                if (!isNullOrUndefined(eleStr)) {\n                    if (this.templateEle.indexOf(cnt.toString()) === -1) {\n                        this.templateEle.push(cnt.toString());\n                    }\n                }\n                this.element.querySelector('.' + CLS_ITEM$2 + '.' + CLS_ACTIVE$1).appendChild(crElem);\n            }\n        }\n        else {\n            const tabItems = this.element.querySelector('.' + CLS_TB_ITEMS);\n            const element = this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1);\n            const id = element.id;\n            const num = (id.indexOf('_'));\n            const index = parseInt(id.substring(num + 1), 10);\n            const header = element.innerText;\n            const detachContent = this.element.querySelector('.' + CLS_CONTENT$1).querySelector('.' + CLS_ACTIVE$1).children[0];\n            const mainContents = detachContent.innerHTML;\n            detach(element);\n            detach(detachContent);\n            const attr = {\n                className: CLS_TB_ITEM + ' ' + CLS_TEMPLATE$1 + ' ' + CLS_ACTIVE$1, id: CLS_ITEM$2 + this.tabId + '_' + index,\n                attrs: {\n                    role: 'tab', 'aria-controls': CLS_CONTENT$1 + this.tabId + '_' + index,\n                    'aria-disabled': 'false', 'aria-selected': 'true'\n                }\n            };\n            const txtString = this.createElement('span', {\n                className: CLS_TEXT, innerHTML: header, attrs: { 'role': 'presentation' }\n            }).outerHTML;\n            const conte = this.createElement('div', {\n                className: CLS_TEXT_WRAP, innerHTML: txtString + this.btnCls.outerHTML\n            }).outerHTML;\n            const wrap = this.createElement('div', { className: CLS_WRAP, innerHTML: conte, attrs: { tabIndex: '-1' } });\n            tabItems.insertBefore(this.createElement('div', attr), tabItems.children[index + 1]);\n            this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE$1).appendChild(wrap);\n            const crElem = this.createElement('div', { innerHTML: mainContents });\n            this.element.querySelector('.' + CLS_CONTENT$1).querySelector('.' + CLS_ACTIVE$1).appendChild(crElem);\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n};\n__decorate$7([\n    Collection([], TabItem)\n], Tab.prototype, \"items\", void 0);\n__decorate$7([\n    Property('100%')\n], Tab.prototype, \"width\", void 0);\n__decorate$7([\n    Property('auto')\n], Tab.prototype, \"height\", void 0);\n__decorate$7([\n    Property('')\n], Tab.prototype, \"cssClass\", void 0);\n__decorate$7([\n    Property(0)\n], Tab.prototype, \"selectedItem\", void 0);\n__decorate$7([\n    Property('Top')\n], Tab.prototype, \"headerPlacement\", void 0);\n__decorate$7([\n    Property('Content')\n], Tab.prototype, \"heightAdjustMode\", void 0);\n__decorate$7([\n    Property('Scrollable')\n], Tab.prototype, \"overflowMode\", void 0);\n__decorate$7([\n    Property('Dynamic')\n], Tab.prototype, \"loadOn\", void 0);\n__decorate$7([\n    Property(false)\n], Tab.prototype, \"enablePersistence\", void 0);\n__decorate$7([\n    Property(false)\n], Tab.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$7([\n    Property(false)\n], Tab.prototype, \"showCloseButton\", void 0);\n__decorate$7([\n    Property(true)\n], Tab.prototype, \"reorderActiveTab\", void 0);\n__decorate$7([\n    Property()\n], Tab.prototype, \"scrollStep\", void 0);\n__decorate$7([\n    Property()\n], Tab.prototype, \"dragArea\", void 0);\n__decorate$7([\n    Property(false)\n], Tab.prototype, \"allowDragAndDrop\", void 0);\n__decorate$7([\n    Complex({}, TabAnimationSettings)\n], Tab.prototype, \"animation\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"created\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"adding\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"added\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"selecting\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"selected\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"removing\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"removed\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"onDragStart\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"dragging\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"dragged\", void 0);\n__decorate$7([\n    Event()\n], Tab.prototype, \"destroyed\", void 0);\nTab = __decorate$7([\n    NotifyPropertyChanges\n], Tab);\n\n/**\n * Tab modules\n */\n\nvar __decorate$8 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TreeView_1;\nconst ROOT = 'e-treeview';\nconst CONTROL = 'e-control';\nconst COLLAPSIBLE = 'e-icon-collapsible';\nconst EXPANDABLE = 'e-icon-expandable';\nconst LISTITEM = 'e-list-item';\nconst LISTTEXT = 'e-list-text';\nconst LISTWRAP = 'e-text-wrap';\nconst IELISTWRAP = 'e-ie-wrap';\nconst PARENTITEM = 'e-list-parent';\nconst HOVER = 'e-hover';\nconst ACTIVE = 'e-active';\nconst LOAD = 'e-icons-spinner';\nconst PROCESS = 'e-process';\nconst ICON = 'e-icons';\nconst TEXTWRAP = 'e-text-content';\nconst INPUT = 'e-input';\nconst INPUTGROUP = 'e-input-group';\nconst TREEINPUT = 'e-tree-input';\nconst EDITING = 'e-editing';\nconst RTL$1 = 'e-rtl';\nconst INTERACTION = 'e-interaction';\nconst DRAGITEM = 'e-drag-item';\nconst DROPPABLE = 'e-droppable';\nconst DRAGGING = 'e-dragging';\nconst SIBLING = 'e-sibling';\nconst DROPIN = 'e-drop-in';\nconst DROPNEXT = 'e-drop-next';\nconst DROPOUT = 'e-drop-out';\nconst NODROP = 'e-no-drop';\nconst FULLROWWRAP = 'e-fullrow-wrap';\nconst FULLROW = 'e-fullrow';\nconst SELECTED$1 = 'e-selected';\nconst EXPANDED = 'e-expanded';\nconst NODECOLLAPSED = 'e-node-collapsed';\nconst DISABLE = 'e-disable';\nconst DROPCOUNT = 'e-drop-count';\nconst CHECK = 'e-check';\nconst INDETERMINATE = 'e-stop';\nconst CHECKBOXWRAP = 'e-checkbox-wrapper';\nconst CHECKBOXFRAME = 'e-frame';\nconst CHECKBOXRIPPLE = 'e-ripple-container';\nconst RIPPLE = 'e-ripple';\nconst RIPPLEELMENT = 'e-ripple-element';\nconst FOCUS = 'e-node-focus';\nconst IMAGE = 'e-list-img';\nconst BIGGER = 'e-bigger';\nconst SMALL = 'e-small';\nconst CHILD = 'e-has-child';\nconst ITEM_ANIMATION_ACTIVE = 'e-animation-active';\nconst DISABLED$1 = 'e-disabled';\nconst treeAriaAttr = {\n    treeRole: 'tree',\n    itemRole: 'treeitem',\n    listRole: 'group',\n    itemText: '',\n    wrapperRole: ''\n};\n/**\n * Configures the fields to bind to the properties of node in the TreeView component.\n */\nclass FieldsSettings extends ChildProperty {\n}\n__decorate$8([\n    Property('child')\n], FieldsSettings.prototype, \"child\", void 0);\n__decorate$8([\n    Property([])\n], FieldsSettings.prototype, \"dataSource\", void 0);\n__decorate$8([\n    Property('expanded')\n], FieldsSettings.prototype, \"expanded\", void 0);\n__decorate$8([\n    Property('hasChildren')\n], FieldsSettings.prototype, \"hasChildren\", void 0);\n__decorate$8([\n    Property('htmlAttributes')\n], FieldsSettings.prototype, \"htmlAttributes\", void 0);\n__decorate$8([\n    Property('iconCss')\n], FieldsSettings.prototype, \"iconCss\", void 0);\n__decorate$8([\n    Property('id')\n], FieldsSettings.prototype, \"id\", void 0);\n__decorate$8([\n    Property('imageUrl')\n], FieldsSettings.prototype, \"imageUrl\", void 0);\n__decorate$8([\n    Property('isChecked')\n], FieldsSettings.prototype, \"isChecked\", void 0);\n__decorate$8([\n    Property('parentID')\n], FieldsSettings.prototype, \"parentID\", void 0);\n__decorate$8([\n    Property(null)\n], FieldsSettings.prototype, \"query\", void 0);\n__decorate$8([\n    Property('selected')\n], FieldsSettings.prototype, \"selected\", void 0);\n__decorate$8([\n    Property(null)\n], FieldsSettings.prototype, \"tableName\", void 0);\n__decorate$8([\n    Property('text')\n], FieldsSettings.prototype, \"text\", void 0);\n__decorate$8([\n    Property('tooltip')\n], FieldsSettings.prototype, \"tooltip\", void 0);\n__decorate$8([\n    Property('navigateUrl')\n], FieldsSettings.prototype, \"navigateUrl\", void 0);\n/**\n * Configures animation settings for the TreeView component.\n */\nclass ActionSettings extends ChildProperty {\n}\n__decorate$8([\n    Property('SlideDown')\n], ActionSettings.prototype, \"effect\", void 0);\n__decorate$8([\n    Property(400)\n], ActionSettings.prototype, \"duration\", void 0);\n__decorate$8([\n    Property('linear')\n], ActionSettings.prototype, \"easing\", void 0);\n/**\n * Configures the animation settings for expanding and collapsing nodes in TreeView.\n */\nclass NodeAnimationSettings extends ChildProperty {\n}\n__decorate$8([\n    Complex({ effect: 'SlideUp', duration: 400, easing: 'linear' }, ActionSettings)\n], NodeAnimationSettings.prototype, \"collapse\", void 0);\n__decorate$8([\n    Complex({ effect: 'SlideDown', duration: 400, easing: 'linear' }, ActionSettings)\n], NodeAnimationSettings.prototype, \"expand\", void 0);\n/**\n * The TreeView component is used to represent hierarchical data in a tree like structure with advanced\n * functions to perform edit, drag and drop, selection with check-box, and more.\n * ```html\n *  <div id=\"tree\"></div>\n * ```\n * ```typescript\n *  let treeObj: TreeView = new TreeView();\n *  treeObj.appendTo('#tree');\n * ```\n */\nlet TreeView = TreeView_1 = class TreeView extends Component {\n    constructor(options, element) {\n        super(options, element);\n        this.isRefreshed = false;\n        this.preventExpand = false;\n        this.checkedElement = [];\n        this.disableNode = [];\n        // eslint-disable-next-line\n        this.validArr = [];\n        this.validNodes = [];\n        this.expandChildren = [];\n        this.isFieldChange = false;\n        this.changeDataSource = false;\n        this.hasTemplate = false;\n        this.isFirstRender = false;\n        this.mouseDownStatus = false;\n    }\n    /**\n     * Get component name.\n     *\n     * @returns {string} - returns module name.\n     * @private\n     */\n    getModuleName() {\n        return 'treeview';\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @returns {void}\n     */\n    preRender() {\n        this.checkActionNodes = [];\n        this.parentNodeCheck = [];\n        this.dragStartAction = false;\n        this.isAnimate = false;\n        this.keyConfigs = {\n            escape: 'escape',\n            end: 'end',\n            enter: 'enter',\n            f2: 'f2',\n            home: 'home',\n            moveDown: 'downarrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlUp: 'ctrl+uparrow',\n            ctrlEnter: 'ctrl+enter',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            ctrlA: 'ctrl+A',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftEnter: 'shift+enter',\n            shiftHome: 'shift+home',\n            shiftEnd: 'shift+end',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            csEnter: 'ctrl+shift+enter',\n            csHome: 'ctrl+shift+home',\n            csEnd: 'ctrl+shift+end',\n            space: 'space'\n        };\n        this.listBaseOption = {\n            expandCollapse: true,\n            showIcon: true,\n            expandIconClass: EXPANDABLE,\n            ariaAttributes: treeAriaAttr,\n            expandIconPosition: 'Left',\n            itemCreated: (e) => {\n                this.beforeNodeCreate(e);\n            },\n            enableHtmlSanitizer: this.enableHtmlSanitizer,\n            itemNavigable: this.fullRowNavigable\n        };\n        this.updateListProp(this.fields);\n        this.aniObj = new Animation({});\n        this.treeList = [];\n        this.isLoaded = false;\n        this.isInitalExpand = false;\n        this.expandChildren = [];\n        this.index = 0;\n        this.setTouchClass();\n        if (isNullOrUndefined(this.selectedNodes)) {\n            this.setProperties({ selectedNodes: [] }, true);\n        }\n        if (isNullOrUndefined(this.checkedNodes)) {\n            this.setProperties({ checkedNodes: [] }, true);\n        }\n        if (isNullOrUndefined(this.expandedNodes)) {\n            this.setProperties({ expandedNodes: [] }, true);\n        }\n        else {\n            this.isInitalExpand = true;\n        }\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - returns the persisted data\n     * @hidden\n     */\n    getPersistData() {\n        const keyEntity = ['selectedNodes', 'checkedNodes', 'expandedNodes'];\n        return this.addOnPersist(keyEntity);\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.initialRender = true;\n        this.initialize();\n        this.setDataBinding(false);\n        this.setDisabledMode();\n        this.setExpandOnType();\n        if (!this.disabled) {\n            this.setRipple();\n        }\n        this.wireEditingEvents(this.allowEditing);\n        this.setDragAndDrop(this.allowDragAndDrop);\n        if (!this.disabled) {\n            this.wireEvents();\n        }\n        this.initialRender = false;\n        this.renderComplete();\n    }\n    initialize() {\n        this.element.setAttribute('role', 'tree');\n        this.element.setAttribute('tabindex', '0');\n        this.element.setAttribute('aria-activedescendant', this.element.id + '_active');\n        this.setCssClass(null, this.cssClass);\n        this.setEnableRtl();\n        this.setFullRow(this.fullRowSelect);\n        this.setTextWrap();\n        this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n    }\n    setDisabledMode() {\n        if (this.disabled) {\n            this.element.classList.add(DISABLED$1);\n        }\n        else {\n            this.element.classList.remove(DISABLED$1);\n        }\n    }\n    setEnableRtl() {\n        (this.enableRtl ? addClass : removeClass)([this.element], RTL$1);\n    }\n    setRipple() {\n        const tempStr = '.' + FULLROW + ',.' + TEXTWRAP;\n        const rippleModel = {\n            selector: tempStr,\n            ignore: '.' + TEXTWRAP + ' > .' + ICON + ',.' + INPUTGROUP + ',.' + INPUT + ', .' + CHECKBOXWRAP\n        };\n        this.rippleFn = rippleEffect(this.element, rippleModel);\n        const iconModel = {\n            selector: '.' + TEXTWRAP + ' > .' + ICON,\n            isCenterRipple: true\n        };\n        this.rippleIconFn = rippleEffect(this.element, iconModel);\n    }\n    setFullRow(isEnabled) {\n        (isEnabled ? addClass : removeClass)([this.element], FULLROWWRAP);\n    }\n    setMultiSelect(isEnabled) {\n        const firstUl = select('.' + PARENTITEM, this.element);\n        if (isEnabled) {\n            firstUl.setAttribute('aria-multiselectable', 'true');\n        }\n        else {\n            firstUl.removeAttribute('aria-multiselectable');\n        }\n    }\n    // eslint-disable-next-line\n    templateComplier(template) {\n        if (template) {\n            this.hasTemplate = true;\n            // eslint-disable-next-line\n            this.element.classList.add(INTERACTION);\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (e) {\n                return compile(template);\n            }\n        }\n        this.element.classList.remove(INTERACTION);\n        return undefined;\n    }\n    setDataBinding(changeDataSource) {\n        this.treeList.push('false');\n        if (this.fields.dataSource instanceof DataManager) {\n            /* eslint-disable */\n            this.isOffline = this.fields.dataSource.dataSource.offline;\n            if (this.fields.dataSource.ready) {\n                this.fields.dataSource.ready.then((e) => {\n                    /* eslint-disable */\n                    this.isOffline = this.fields.dataSource.dataSource.offline;\n                    if (this.fields.dataSource instanceof DataManager && this.isOffline) {\n                        this.treeList.pop();\n                        this.treeData = e.result;\n                        this.isNumberTypeId = this.getType();\n                        this.setRootData();\n                        this.renderItems(true);\n                        if (this.treeList.length === 0 && !this.isLoaded) {\n                            this.finalize();\n                        }\n                    }\n                }).catch((e) => {\n                    this.trigger('actionFailure', { error: e });\n                });\n            }\n            else {\n                this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then((e) => {\n                    this.treeList.pop();\n                    this.treeData = e.result;\n                    this.isNumberTypeId = this.getType();\n                    this.setRootData();\n                    if (changeDataSource) {\n                        this.changeDataSource = true;\n                    }\n                    this.renderItems(true);\n                    this.changeDataSource = false;\n                    if (this.treeList.length === 0 && !this.isLoaded) {\n                        this.finalize();\n                    }\n                }).catch((e) => {\n                    this.trigger('actionFailure', { error: e });\n                });\n            }\n        }\n        else {\n            this.treeList.pop();\n            if (isNullOrUndefined(this.fields.dataSource)) {\n                this.rootData = this.treeData = [];\n            }\n            else {\n                this.treeData = JSON.parse(JSON.stringify(this.fields.dataSource));\n                this.setRootData();\n            }\n            this.isNumberTypeId = this.getType();\n            this.renderItems(false);\n        }\n        if (this.treeList.length === 0 && !this.isLoaded) {\n            this.finalize();\n        }\n    }\n    getQuery(mapper, value = null) {\n        let columns = [];\n        let query;\n        if (!mapper.query) {\n            query = new Query();\n            let prop = this.getActualProperties(mapper);\n            for (let col of Object.keys(prop)) {\n                if (col !== 'dataSource' && col !== 'tableName' && col !== 'child' && !!mapper[col]\n                    && col !== 'url' && columns.indexOf(mapper[col]) === -1) {\n                    columns.push(mapper[col]);\n                }\n            }\n            query.select(columns);\n            if (prop.hasOwnProperty('tableName')) {\n                query.from(mapper.tableName);\n            }\n        }\n        else {\n            query = mapper.query.clone();\n        }\n        ListBase.addSorting(this.sortOrder, mapper.text, query);\n        if (!isNullOrUndefined(value) && !isNullOrUndefined(mapper.parentID)) {\n            query.where(mapper.parentID, 'equal', (this.isNumberTypeId ? parseFloat(value) : value));\n        }\n        return query;\n    }\n    getType() {\n        return this.treeData[0] ? ((typeof getValue(this.fields.id, this.treeData[0]) === 'number') ? true : false) : false;\n    }\n    setRootData() {\n        this.dataType = this.getDataType(this.treeData, this.fields);\n        if (this.dataType === 1) {\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n            let rootItems = this.getChildNodes(this.treeData, undefined, true);\n            if (isNullOrUndefined(rootItems)) {\n                this.rootData = [];\n            }\n            else {\n                this.rootData = rootItems;\n            }\n        }\n        else {\n            this.rootData = this.treeData;\n        }\n    }\n    renderItems(isSorted) {\n        /* eslint-disable */\n        this.listBaseOption.ariaAttributes.level = 1;\n        let sortedData = this.getSortedData(this.rootData);\n        this.ulElement = ListBase.createList(this.createElement, isSorted ? this.rootData : sortedData, this.listBaseOption);\n        this.element.appendChild(this.ulElement);\n        let rootNodes = this.ulElement.querySelectorAll('.e-list-item');\n        if (this.loadOnDemand === false) {\n            let i = 0;\n            while (i < rootNodes.length) {\n                this.renderChildNodes(rootNodes[i], true, null, true);\n                i++;\n            }\n        }\n        let parentEle = selectAll('.' + PARENTITEM, this.element);\n        if ((parentEle.length === 1 && (rootNodes && rootNodes.length !== 0)) || this.loadOnDemand) {\n            this.finalizeNode(this.element);\n        }\n        this.parentNodeCheck = [];\n        this.parentCheckData = [];\n        this.updateCheckedStateFromDS();\n        if (this.autoCheck && this.showCheckBox && !this.isLoaded) {\n            this.updateParentCheckState();\n        }\n    }\n    /**\n     * Update the checkedNodes from datasource at initial rendering\n     */\n    updateCheckedStateFromDS(id) {\n        this.validNodes = [];\n        if (this.treeData && this.showCheckBox) {\n            if (this.dataType === 1) {\n                let mapper = this.fields;\n                let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.isChecked, 'equal', true, false));\n                for (let i = 0; i < resultData.length; i++) {\n                    let resultId = resultData[i][this.fields.id] ? resultData[i][this.fields.id].toString() : null;\n                    let resultPId = resultData[i][this.fields.parentID] ? resultData[i][this.fields.parentID].toString() : null;\n                    if (this.checkedNodes.indexOf(resultId) === -1 && !(this.isLoaded)) {\n                        this.checkedNodes.push(resultId);\n                    }\n                    if (resultData[i][this.fields.hasChildren]) {\n                        let id = resultData[i][this.fields.id];\n                        let childData = new DataManager(this.treeData).\n                            executeLocal(new Query().where(mapper.parentID, 'equal', id, false));\n                        for (let child = 0; child < childData.length; child++) {\n                            let childId = childData[child][this.fields.id] ? childData[child][this.fields.id].toString() : null;\n                            if (this.checkedNodes.indexOf(childId) === -1 && this.autoCheck) {\n                                this.checkedNodes.push(childId);\n                            }\n                        }\n                    }\n                }\n                for (let i = 0; i < this.checkedNodes.length; i++) {\n                    let mapper = this.fields;\n                    let checkState = new DataManager(this.treeData).\n                        executeLocal(new Query().where(mapper.id, 'equal', this.checkedNodes[i], true));\n                    if (checkState[0] && this.autoCheck) {\n                        this.getCheckedNodeDetails(mapper, checkState);\n                        this.checkIndeterminateState(checkState[0]);\n                    }\n                    if (checkState.length > 0) {\n                        let checkedId = checkState[0][this.fields.id] ? checkState[0][this.fields.id].toString() : null;\n                        if (this.checkedNodes.indexOf(checkedId) > -1 && this.validNodes.indexOf(checkedId) === -1) {\n                            this.validNodes.push(checkedId);\n                        }\n                    }\n                    let checkedData = new DataManager(this.treeData).\n                        executeLocal(new Query().where(mapper.parentID, 'equal', this.checkedNodes[i], true));\n                    for (let index = 0; index < checkedData.length; index++) {\n                        let checkedId = checkedData[index][this.fields.id] ? checkedData[index][this.fields.id].toString() : null;\n                        if (this.checkedNodes.indexOf(checkedId) === -1 && this.autoCheck) {\n                            this.checkedNodes.push(checkedId);\n                        }\n                        if (this.checkedNodes.indexOf(checkedId) > -1 && this.validNodes.indexOf(checkedId) === -1) {\n                            this.validNodes.push(checkedId);\n                        }\n                    }\n                }\n            }\n            else if (this.dataType === 2 || (this.fields.dataSource instanceof DataManager &&\n                this.isOffline)) {\n                for (let index = 0; index < this.treeData.length; index++) {\n                    let fieldId = this.treeData[index][this.fields.id] ? this.treeData[index][this.fields.id].toString() : '';\n                    if (this.treeData[index][this.fields.isChecked] && !(this.isLoaded) && this.checkedNodes.indexOf(fieldId) === -1) {\n                        this.checkedNodes.push(fieldId);\n                    }\n                    if (this.checkedNodes.indexOf(fieldId) > -1 && this.validNodes.indexOf(fieldId) === -1) {\n                        this.validNodes.push(fieldId);\n                    }\n                    let childItems = getValue(this.fields.child.toString(), this.treeData[index]);\n                    if (childItems) {\n                        this.updateChildCheckState(childItems, this.treeData[index]);\n                    }\n                }\n                this.validNodes = (this.enablePersistence) ? this.checkedNodes : this.validNodes;\n            }\n            this.setProperties({ checkedNodes: this.validNodes }, true);\n        }\n    }\n    /**\n     * To check whether the list data has sub child and to change the parent check state accordingly\n     */\n    getCheckedNodeDetails(mapper, checkNodes) {\n        let id = checkNodes[0][this.fields.parentID] ? checkNodes[0][this.fields.parentID].toString() : null;\n        let count = 0;\n        let element = this.element.querySelector('[data-uid=\"' + checkNodes[0][this.fields.id] + '\"]');\n        let parentEle = this.element.querySelector('[data-uid=\"' + checkNodes[0][this.fields.parentID] + '\"]');\n        if (!element && !parentEle) {\n            let len = this.parentNodeCheck.length;\n            if (this.parentNodeCheck.indexOf(id) === -1) {\n                this.parentNodeCheck.push(id);\n            }\n            let childNodes = this.getChildNodes(this.treeData, id);\n            for (let i = 0; i < childNodes.length; i++) {\n                let childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;\n                if (this.checkedNodes.indexOf(childId) !== -1) {\n                    count++;\n                }\n                if (count === childNodes.length && this.checkedNodes.indexOf(id) === -1) {\n                    this.checkedNodes.push(id);\n                }\n            }\n            let preElement = new DataManager(this.treeData).\n                executeLocal(new Query().where(mapper.id, 'equal', id, true));\n            this.getCheckedNodeDetails(mapper, preElement);\n        }\n        else if (parentEle) {\n            let check = select('.' + CHECK, parentEle);\n            if (!check) {\n                this.changeState(parentEle, 'indeterminate', null, true, true);\n            }\n        }\n    }\n    /**\n     * Update the checkedNodes and parent state when all the child Nodes are in checkedstate at initial rendering\n     */\n    updateParentCheckState() {\n        let indeterminate = selectAll('.' + INDETERMINATE, this.element);\n        let childCheckedElement;\n        for (let i = 0; i < indeterminate.length; i++) {\n            let node = closest(indeterminate[i], '.' + LISTITEM);\n            let nodeId = node.getAttribute('data-uid').toString();\n            if (this.dataType === 1) {\n                childCheckedElement = new DataManager(this.treeData).\n                    executeLocal(new Query().where(this.fields.parentID, 'equal', nodeId, true));\n            }\n            else {\n                childCheckedElement = this.getChildNodes(this.treeData, nodeId);\n            }\n            let count = 0;\n            if (childCheckedElement) {\n                for (let j = 0; j < childCheckedElement.length; j++) {\n                    let childId = childCheckedElement[j][this.fields.id].toString();\n                    if (this.checkedNodes.indexOf(childId) !== -1) {\n                        count++;\n                    }\n                }\n                if (count === childCheckedElement.length) {\n                    let nodeCheck = node.getAttribute('data-uid');\n                    if (this.checkedNodes.indexOf(nodeCheck) === -1) {\n                        this.checkedNodes.push(nodeCheck);\n                    }\n                    this.changeState(node, 'check', null, true, true);\n                }\n                else if (count === 0 && this.checkedNodes.length === 0) {\n                    this.changeState(node, 'uncheck', null, true, true);\n                }\n            }\n        }\n    }\n    /**\n     * Change the parent to indeterminate state whenever the child is in checked state which is not rendered in DOM\n     */\n    checkIndeterminateState(data) {\n        let element;\n        if (this.dataType === 1) {\n            element = this.element.querySelector('[data-uid=\"' + data[this.fields.parentID] + '\"]');\n        }\n        else {\n            element = this.element.querySelector('[data-uid=\"' + data[this.fields.id] + '\"]');\n        }\n        if (element) {\n            let ariaChecked = element.querySelector('.' + CHECKBOXWRAP).getAttribute('aria-checked');\n            if (ariaChecked !== 'true') {\n                this.changeState(element, 'indeterminate', null, true, true);\n            }\n        }\n        else if (this.dataType === 2) {\n            let len = this.parentNodeCheck.length;\n            if (this.parentNodeCheck.indexOf(data[this.fields.id].toString()) === -1) {\n                this.parentNodeCheck.push(data[this.fields.id].toString());\n            }\n        }\n    }\n    /**\n     * Update the checkedNodes for child and subchild from datasource (hierarchical datasource) at initial rendering\n     */\n    updateChildCheckState(childItems, treeData) {\n        let count = 0;\n        let checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : '';\n        for (let index = 0; index < childItems.length; index++) {\n            let checkedChild = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : '';\n            if (childItems[index][this.fields.isChecked] && !(this.isLoaded) && this.checkedNodes.indexOf(checkedChild) === -1) {\n                this.checkedNodes.push(checkedChild);\n            }\n            if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1 && this.autoCheck) {\n                this.checkedNodes.push(checkedChild);\n            }\n            if (this.checkedNodes.indexOf(checkedChild) !== -1 && this.autoCheck) {\n                count++;\n            }\n            if (this.checkedNodes.indexOf(checkedChild) > -1 && this.validNodes.indexOf(checkedChild) === -1) {\n                this.validNodes.push(checkedChild);\n            }\n            let subChildItems = getValue(this.fields.child.toString(), childItems[index]);\n            if (subChildItems && subChildItems.length) {\n                if (this.parentCheckData.indexOf(treeData) === -1)\n                    this.parentCheckData.push(treeData);\n                this.updateChildCheckState(subChildItems, childItems[index]);\n            }\n            if (count === childItems.length && this.autoCheck && this.checkedNodes.indexOf(checkedParent) === -1) {\n                this.checkedNodes.push(checkedParent);\n            }\n        }\n        if (count !== 0 && this.autoCheck) {\n            this.checkIndeterminateState(treeData);\n            for (let len = 0; len < this.parentCheckData.length; len++) {\n                if ((treeData !== this.parentCheckData[len]) && (this.parentCheckData[len])) {\n                    this.checkIndeterminateState(this.parentCheckData[len]);\n                }\n            }\n        }\n    }\n    beforeNodeCreate(e) {\n        if (this.showCheckBox) {\n            let checkboxEle = createCheckBox(this.createElement, true, { cssClass: this.touchClass });\n            checkboxEle.setAttribute('role', 'checkbox');\n            let icon = select('div.' + ICON, e.item);\n            let id = e.item.getAttribute('data-uid');\n            e.item.childNodes[0].insertBefore(checkboxEle, e.item.childNodes[0].childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n            let checkValue = getValue(e.fields.isChecked, e.curData);\n            if (this.checkedNodes.indexOf(id) > -1) {\n                select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n                checkboxEle.setAttribute('aria-checked', 'true');\n                this.addCheck(e.item);\n            }\n            else if (!isNullOrUndefined(checkValue) && checkValue.toString() === 'true') {\n                select('.' + CHECKBOXFRAME, checkboxEle).classList.add(CHECK);\n                checkboxEle.setAttribute('aria-checked', 'true');\n                this.addCheck(e.item);\n            }\n            else {\n                checkboxEle.setAttribute('aria-checked', 'false');\n            }\n            let frame = select('.' + CHECKBOXFRAME, checkboxEle);\n            EventHandler.add(frame, 'mousedown', this.frameMouseHandler, this);\n            EventHandler.add(frame, 'mouseup', this.frameMouseHandler, this);\n        }\n        if (this.fullRowSelect) {\n            this.createFullRow(e.item);\n        }\n        if (this.allowMultiSelection && !e.item.classList.contains(SELECTED$1)) {\n            e.item.setAttribute('aria-selected', 'false');\n        }\n        let fields = e.fields;\n        this.addActionClass(e, fields.selected, SELECTED$1);\n        this.addActionClass(e, fields.expanded, EXPANDED);\n        if (!isNullOrUndefined(this.nodeTemplateFn)) {\n            let textEle = e.item.querySelector('.' + LISTTEXT);\n            let dataId = e.item.getAttribute('data-uid');\n            textEle.innerHTML = '';\n            this.renderNodeTemplate(e.curData, textEle, dataId);\n        }\n        let eventArgs = {\n            node: e.item,\n            nodeData: e.curData,\n            text: e.text,\n        };\n        if (!this.isRefreshed) {\n            this.trigger('drawNode', eventArgs);\n        }\n    }\n    frameMouseHandler(e) {\n        let rippleSpan = select('.' + CHECKBOXRIPPLE, e.target.parentElement);\n        rippleMouseHandler(e, rippleSpan);\n    }\n    addActionClass(e, action, cssClass) {\n        let data = e.curData;\n        let actionValue = getValue(action, data);\n        if (!isNullOrUndefined(actionValue) && actionValue.toString() !== 'false') {\n            e.item.classList.add(cssClass);\n        }\n    }\n    getDataType(ds, mapper) {\n        if (this.fields.dataSource instanceof DataManager) {\n            for (let i = 0; i < ds.length; i++) {\n                if (this.isOffline) {\n                    if ((typeof mapper.child === 'string') && isNullOrUndefined(getValue(mapper.child, ds[i])) && !isNullOrUndefined(getValue(mapper.parentID, ds[i]))) {\n                        return 1;\n                    }\n                }\n                else if ((typeof mapper.child === 'string') && isNullOrUndefined(getValue(mapper.child, ds[i]))) {\n                    return 1;\n                }\n            }\n            return 2;\n        }\n        for (let i = 0, len = ds.length; i < len; i++) {\n            if ((typeof mapper.child === 'string') && !isNullOrUndefined(getValue(mapper.child, ds[i]))) {\n                return 2;\n            }\n            if (!isNullOrUndefined(getValue(mapper.parentID, ds[i])) || !isNullOrUndefined(getValue(mapper.hasChildren, ds[i]))) {\n                return 1;\n            }\n        }\n        return 1;\n    }\n    getGroupedData(dataSource, groupBy) {\n        let cusQuery = new Query().group(groupBy);\n        let ds = ListBase.getDataSource(dataSource, cusQuery);\n        let grpItem = [];\n        for (let j = 0; j < ds.length; j++) {\n            let itemObj = ds[j].items;\n            grpItem.push(itemObj);\n        }\n        return grpItem;\n    }\n    getSortedData(list) {\n        if (list && this.sortOrder !== 'None') {\n            list = ListBase.getDataSource(list, ListBase.addSorting(this.sortOrder, this.fields.text));\n        }\n        return list;\n    }\n    finalizeNode(element) {\n        let iNodes = selectAll('.' + IMAGE, element);\n        for (let k = 0; k < iNodes.length; k++) {\n            iNodes[k].setAttribute('alt', IMAGE);\n        }\n        if (this.isLoaded) {\n            let sNodes = selectAll('.' + SELECTED$1, element);\n            for (let i = 0; i < sNodes.length; i++) {\n                this.selectNode(sNodes[i], null);\n                break;\n            }\n            removeClass(sNodes, SELECTED$1);\n        }\n        let cNodes = selectAll('.' + LISTITEM + ':not(.' + EXPANDED + ')', element);\n        for (let j = 0; j < cNodes.length; j++) {\n            let icon = select('div.' + ICON, cNodes[j]);\n            if (icon && icon.classList.contains(EXPANDABLE)) {\n                this.disableExpandAttr(cNodes[j]);\n            }\n        }\n        let eNodes = selectAll('.' + EXPANDED, element);\n        if (!this.isInitalExpand) {\n            for (let i = 0; i < eNodes.length; i++) {\n                this.renderChildNodes(eNodes[i]);\n            }\n        }\n        removeClass(eNodes, EXPANDED);\n        this.updateList();\n        if (this.isLoaded) {\n            this.updateCheckedProp();\n        }\n    }\n    updateCheckedProp() {\n        if (this.showCheckBox) {\n            let nodes = [].concat([], this.checkedNodes);\n            this.setProperties({ checkedNodes: nodes }, true);\n        }\n    }\n    ensureIndeterminate() {\n        if (this.autoCheck) {\n            let liElement = selectAll('li', this.element);\n            let ulElement;\n            for (let i = 0; i < liElement.length; i++) {\n                if (liElement[i].classList.contains(LISTITEM)) {\n                    ulElement = select('.' + PARENTITEM, liElement[i]);\n                    if (ulElement) {\n                        this.ensureParentCheckState(liElement[i]);\n                    }\n                    else {\n                        this.ensureChildCheckState(liElement[i]);\n                    }\n                }\n            }\n        }\n        else {\n            let indeterminate = selectAll('.' + INDETERMINATE, this.element);\n            for (let i = 0; i < indeterminate.length; i++) {\n                indeterminate[i].classList.remove(INDETERMINATE);\n            }\n        }\n    }\n    ensureParentCheckState(element) {\n        if (!isNullOrUndefined(element)) {\n            if (element.classList.contains(ROOT)) {\n                return;\n            }\n            let ulElement = element;\n            if (element.classList.contains(LISTITEM)) {\n                ulElement = select('.' + PARENTITEM, element);\n            }\n            let checkedNodes = selectAll('.' + CHECK, ulElement);\n            let indeterminateNodes = selectAll('.' + INDETERMINATE, ulElement);\n            let nodes = selectAll('.' + LISTITEM, ulElement);\n            let checkBoxEle = element.getElementsByClassName(CHECKBOXWRAP)[0];\n            if (nodes.length === checkedNodes.length) {\n                this.changeState(checkBoxEle, 'check', null, true, true);\n            }\n            else if (checkedNodes.length > 0 || indeterminateNodes.length > 0) {\n                this.changeState(checkBoxEle, 'indeterminate', null, true, true);\n            }\n            else if (checkedNodes.length === 0) {\n                this.changeState(checkBoxEle, 'uncheck', null, true, true);\n            }\n            let parentUL = closest(element, '.' + PARENTITEM);\n            if (!isNullOrUndefined(parentUL)) {\n                let currentParent = closest(parentUL, '.' + LISTITEM);\n                this.ensureParentCheckState(currentParent);\n            }\n        }\n    }\n    ensureChildCheckState(element, e) {\n        if (!isNullOrUndefined(element)) {\n            let childElement = select('.' + PARENTITEM, element);\n            let checkBoxes;\n            if (!isNullOrUndefined(childElement)) {\n                checkBoxes = selectAll('.' + CHECKBOXWRAP, childElement);\n                let isChecked = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n                let parentCheck = element.getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(INDETERMINATE);\n                let childCheck = childElement.querySelectorAll('li');\n                let expandState = childElement.parentElement.getAttribute('aria-expanded');\n                let checkedState;\n                for (let index = 0; index < checkBoxes.length; index++) {\n                    let childId = childCheck[index].getAttribute('data-uid');\n                    if (!isNullOrUndefined(this.currentLoadData) && !isNullOrUndefined(getValue(this.fields.isChecked, this.currentLoadData[index]))) {\n                        checkedState = getValue(this.fields.isChecked, this.currentLoadData[index]) ? 'check' : 'uncheck';\n                        if (this.ele !== -1) {\n                            checkedState = isChecked ? 'check' : 'uncheck';\n                        }\n                        if ((checkedState === 'uncheck') && (!isUndefined(this.parentNodeCheck) && this.autoCheck\n                            && this.parentNodeCheck.indexOf(childId) !== -1)) {\n                            this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);\n                            checkedState = 'indeterminate';\n                        }\n                    }\n                    else {\n                        let isNodeChecked = checkBoxes[index].getElementsByClassName(CHECKBOXFRAME)[0].classList.contains(CHECK);\n                        if (isChecked) {\n                            checkedState = 'check';\n                        }\n                        else if (isNodeChecked && !this.isLoaded) {\n                            checkedState = 'check';\n                        }\n                        else if (this.checkedNodes.indexOf(childId) !== -1 && this.isLoaded && (parentCheck || isChecked)) {\n                            checkedState = 'check';\n                        }\n                        else if (childCheck[index].classList.contains(CHILD) && (!isUndefined(this.parentNodeCheck) && this.autoCheck\n                            && (isChecked || parentCheck) && this.parentNodeCheck.indexOf(childId) !== -1)) {\n                            checkedState = 'indeterminate';\n                            this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);\n                        }\n                        else if (this.dataType === 1 && (!isUndefined(this.parentNodeCheck) && this.autoCheck &&\n                            (isChecked || parentCheck) && this.parentNodeCheck.indexOf(childId) !== -1)) {\n                            checkedState = 'indeterminate';\n                            this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);\n                        }\n                        else {\n                            checkedState = 'uncheck';\n                        }\n                    }\n                    this.changeState(checkBoxes[index], checkedState, e, true, true);\n                }\n            }\n            if (this.autoCheck && this.isLoaded) {\n                this.updateParentCheckState();\n            }\n        }\n    }\n    doCheckBoxAction(nodes, doCheck) {\n        let li = selectAll('.' + LISTITEM, this.element);\n        if (!isNullOrUndefined(nodes)) {\n            for (let len = nodes.length; len >= 0; len--) {\n                let liEle;\n                if (nodes.length === 1) {\n                    liEle = this.getElement(nodes[len - 1]);\n                }\n                else {\n                    liEle = this.getElement(nodes[len]);\n                }\n                if (isNullOrUndefined(liEle)) {\n                    let node;\n                    node = nodes[len - nodes.length] ? nodes[len - nodes.length].toString() : nodes[len] ? nodes[len].toString() : null;\n                    if (node !== '' && doCheck && node) {\n                        this.setValidCheckedNode(node);\n                        this.dynamicCheckState(node, doCheck);\n                    }\n                    else if (this.checkedNodes.indexOf(node) !== -1 && node !== '' && !doCheck) {\n                        this.checkedNodes.splice(this.checkedNodes.indexOf(node), 1);\n                        let childItems = this.getChildNodes(this.treeData, node);\n                        if (childItems) {\n                            for (let i = 0; i < childItems.length; i++) {\n                                let id = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;\n                                if (this.checkedNodes.indexOf(id) !== -1) {\n                                    this.checkedNodes.splice(this.checkedNodes.indexOf(id), 1);\n                                    let ele = this.element.querySelector('[data-uid=\"' + id + '\"]');\n                                    if (ele) {\n                                        this.changeState(ele, 'uncheck', null);\n                                    }\n                                }\n                            }\n                            if (this.parentNodeCheck.indexOf(node) !== -1) {\n                                this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(node), 1);\n                            }\n                        }\n                        if (node) {\n                            this.dynamicCheckState(node, doCheck);\n                        }\n                        this.updateField(this.treeData, this.fields, node, 'isChecked', null);\n                    }\n                    continue;\n                }\n                let checkBox = select('.' + PARENTITEM + ' .' + CHECKBOXWRAP, liEle);\n                this.validateCheckNode(checkBox, !doCheck, liEle, null);\n            }\n        }\n        else {\n            let checkBoxes = selectAll('.' + CHECKBOXWRAP, this.element);\n            if (this.loadOnDemand) {\n                for (let index = 0; index < checkBoxes.length; index++) {\n                    this.updateFieldChecked(checkBoxes[index], doCheck);\n                    this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck', null, null, null, doCheck);\n                }\n            }\n            else {\n                for (let index = 0; index < checkBoxes.length; index++) {\n                    this.updateFieldChecked(checkBoxes[index], doCheck);\n                    this.changeState(checkBoxes[index], doCheck ? 'check' : 'uncheck');\n                }\n            }\n        }\n        if (nodes) {\n            for (let j = 0; j < nodes.length; j++) {\n                let node = nodes[j] ? nodes[j].toString() : '';\n                if (!doCheck) {\n                    this.updateField(this.treeData, this.fields, node, 'isChecked', null);\n                }\n            }\n        }\n        if (this.autoCheck) {\n            this.updateParentCheckState();\n        }\n    }\n    updateFieldChecked(checkbox, doCheck) {\n        let currLi = closest(checkbox, '.' + LISTITEM);\n        let id = currLi.getAttribute('data-uid');\n        let nodeDetails = this.getNodeData(currLi);\n        if (nodeDetails.isChecked === 'true' && !doCheck) {\n            this.updateField(this.treeData, this.fields, id, 'isChecked', null);\n        }\n    }\n    /**\n     * Changes the parent and child  check state while changing the checkedNodes via setmodel\n     */\n    dynamicCheckState(node, doCheck) {\n        if (this.dataType === 1) {\n            let count = 0;\n            let resultId = new DataManager(this.treeData).executeLocal(new Query().where(this.fields.id, 'equal', node, true));\n            if (resultId[0]) {\n                let id = resultId[0][this.fields.id] ? resultId[0][this.fields.id].toString() : null;\n                let parent = resultId[0][this.fields.parentID] ? resultId[0][this.fields.parentID].toString() : null;\n                let parentElement = this.element.querySelector('[data-uid=\"' + parent + '\"]');\n                let indeterminate = parentElement ? select('.' + INDETERMINATE, parentElement) : null;\n                let check = parentElement ? select('.' + CHECK, parentElement) : null;\n                let element = this.element.querySelector('[data-uid=\"' + id + '\"]');\n                let childNodes = this.getChildNodes(this.treeData, parent);\n                if (childNodes) {\n                    for (let i = 0; i < childNodes.length; i++) {\n                        let childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;\n                        if (this.checkedNodes.indexOf(childId) !== -1) {\n                            count++;\n                        }\n                    }\n                }\n                if (this.checkedNodes.indexOf(node) !== -1 && parentElement && (id === node) && this.autoCheck) {\n                    this.changeState(parentElement, 'indeterminate', null);\n                }\n                else if (this.checkedNodes.indexOf(node) === -1 && element && (id === node) && !doCheck) {\n                    this.changeState(element, 'uncheck', null);\n                }\n                else if (this.checkedNodes.indexOf(node) !== -1 && element && (id === node) && doCheck) {\n                    this.changeState(element, 'check', null);\n                }\n                else if (this.checkedNodes.indexOf(node) === -1 && !element && parentElement && (id === node) && this.autoCheck\n                    && count !== 0) {\n                    this.changeState(parentElement, 'indeterminate', null);\n                }\n                else if (this.checkedNodes.indexOf(node) === -1 && !element && parentElement && (id === node) && this.autoCheck\n                    && count === 0) {\n                    this.changeState(parentElement, 'uncheck', null);\n                }\n                else if (!element && !parentElement && (id === node) && this.autoCheck) {\n                    this.updateIndeterminate(node, doCheck);\n                }\n            }\n        }\n        else if (this.dataType === 2 || (this.fields.dataSource instanceof DataManager &&\n            this.isOffline)) {\n            let id;\n            let parentElement;\n            let check;\n            for (let i = 0; i < this.treeData.length; i++) {\n                id = this.treeData[i][this.fields.id] ? this.treeData[i][this.fields.id].toString() : '';\n                parentElement = this.element.querySelector('[data-uid=\"' + id + '\"]');\n                check = parentElement ? select('.' + CHECK, parentElement) : null;\n                if (this.checkedNodes.indexOf(id) === -1 && parentElement && check && !doCheck) {\n                    this.changeState(parentElement, 'uncheck', null);\n                }\n                let subChild = getValue(this.fields.child.toString(), this.treeData[i]);\n                if (subChild) {\n                    this.updateChildIndeterminate(subChild, id, node, doCheck, id);\n                }\n            }\n        }\n    }\n    /**\n     * updates the parent and child  check state while changing the checkedNodes via setmodel for listData\n     */\n    updateIndeterminate(node, doCheck) {\n        let indeterminateData = this.getTreeData(node);\n        let count = 0;\n        let parent;\n        if (this.dataType === 1) {\n            parent = indeterminateData[0][this.fields.parentID] ? indeterminateData[0][this.fields.parentID].toString() : null;\n        }\n        let childNodes = this.getChildNodes(this.treeData, parent);\n        if (childNodes) {\n            for (let i = 0; i < childNodes.length; i++) {\n                let childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;\n                if (this.checkedNodes.indexOf(childId) !== -1) {\n                    count++;\n                }\n            }\n        }\n        let parentElement = this.element.querySelector('[data-uid=\"' + parent + '\"]');\n        if (parentElement && doCheck) {\n            this.changeState(parentElement, 'indeterminate', null);\n        }\n        else if (!doCheck && parentElement && this.parentNodeCheck.indexOf(parent) === -1 && count !== 0) {\n            this.changeState(parentElement, 'indeterminate', null);\n        }\n        else if (!doCheck && parentElement && this.parentNodeCheck.indexOf(parent) === -1 && count === 0) {\n            this.changeState(parentElement, 'uncheck', null);\n        }\n        else if (!parentElement) {\n            if (!doCheck && this.checkedNodes.indexOf(parent) === -1 && this.parentNodeCheck.indexOf(parent) !== -1) {\n                this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(parent), 1);\n            }\n            else if (doCheck && this.checkedNodes.indexOf(parent) === -1 && this.parentNodeCheck.indexOf(parent) === -1) {\n                this.parentNodeCheck.push(parent);\n            }\n            else if (!doCheck && this.checkedNodes.indexOf(parent) !== -1 && this.parentNodeCheck.indexOf(parent) === -1\n                && count !== 0) {\n                this.parentNodeCheck.push(parent);\n            }\n            this.updateIndeterminate(parent, doCheck);\n            if (this.checkedNodes.indexOf(parent) !== -1 && !doCheck) {\n                this.checkedNodes.splice(this.checkedNodes.indexOf(parent), 1);\n            }\n        }\n    }\n    /**\n     * updates the parent and child  check state while changing the checkedNodes via setmodel for hierarchical data\n     */\n    updateChildIndeterminate(subChild, parent, node, doCheck, child) {\n        let count = 0;\n        for (let j = 0; j < subChild.length; j++) {\n            let subId = subChild[j][this.fields.id] ? subChild[j][this.fields.id].toString() : '';\n            if (this.checkedNodes.indexOf(subId) !== -1) {\n                count++;\n            }\n            let parentElement = this.element.querySelector('[data-uid=\"' + parent + '\"]');\n            let indeterminate = parentElement ? select('.' + INDETERMINATE, parentElement) : null;\n            let check = parentElement ? select('.' + CHECK, parentElement) : null;\n            let element = this.element.querySelector('[data-uid=\"' + subId + '\"]');\n            let childElementCheck = element ? select('.' + CHECK, element) : null;\n            if (this.checkedNodes.indexOf(node) !== -1 && parentElement && (subId === node) && this.autoCheck) {\n                this.changeState(parentElement, 'indeterminate', null);\n            }\n            else if (this.checkedNodes.indexOf(node) === -1 && parentElement && !element && (subId === node) && !doCheck) {\n                if (this.autoCheck) {\n                    this.changeState(parentElement, 'uncheck', null);\n                }\n                else {\n                    if (count !== 0) {\n                        this.changeState(parentElement, 'indeterminate', null);\n                    }\n                    else {\n                        this.changeState(parentElement, 'uncheck', null);\n                    }\n                }\n            }\n            else if (this.checkedNodes.indexOf(node) === -1 && element && (subId === node) && !doCheck) {\n                this.changeState(element, 'uncheck', null);\n            }\n            else if (this.checkedNodes.indexOf(node) === -1 && indeterminate && (subId === node) && this.autoCheck && count === 0\n                && !doCheck) {\n                indeterminate.classList.remove(INDETERMINATE);\n            }\n            else if (this.checkedNodes.indexOf(node) === -1 && !element && check && (subId === node) && count === 0) {\n                this.changeState(parentElement, 'uncheck', null);\n            }\n            else if (this.checkedNodes.indexOf(subId) === -1 && element && childElementCheck && count === 0) {\n                this.changeState(element, 'uncheck', null);\n            }\n            else if (!element && !parentElement && (subId === node) || (this.parentNodeCheck.indexOf(parent) !== -1) && this.autoCheck) {\n                let childElement = this.element.querySelector('[data-uid=\"' + child + '\"]');\n                if (doCheck && count !== 0) {\n                    this.changeState(childElement, 'indeterminate', null);\n                }\n                else if (doCheck && count === subChild.length && this.checkedNodes.indexOf(parent) === -1) {\n                    this.checkedNodes.push(parent);\n                }\n                else if (!doCheck && count === 0 && this.parentNodeCheck.indexOf(parent) !== -1) {\n                    this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(parent));\n                }\n                if (this.parentNodeCheck.indexOf(parent) === -1) {\n                    this.parentNodeCheck.push(parent);\n                }\n            }\n            let innerChild = getValue(this.fields.child.toString(), subChild[j]);\n            if (innerChild) {\n                this.updateChildIndeterminate(innerChild, subId, node, doCheck, child);\n            }\n        }\n    }\n    changeState(wrapper, state, e, isPrevent, isAdd, doCheck) {\n        let eventArgs;\n        let currLi = closest(wrapper, '.' + LISTITEM);\n        if (wrapper === currLi) {\n            wrapper = select('.' + CHECKBOXWRAP, currLi);\n        }\n        if (!isPrevent) {\n            this.checkActionNodes = [];\n            eventArgs = this.getCheckEvent(currLi, state, e);\n            this.trigger('nodeChecking', eventArgs, (observedArgs) => {\n                if (!observedArgs.cancel) {\n                    this.nodeCheckAction(wrapper, state, currLi, observedArgs, e, isPrevent, isAdd, doCheck);\n                }\n            });\n        }\n        else {\n            this.nodeCheckAction(wrapper, state, currLi, eventArgs, e, isPrevent, isAdd, doCheck);\n        }\n    }\n    nodeCheckAction(wrapper, state, currLi, eventArgs, e, isPrevent, isAdd, doCheck) {\n        let ariaState;\n        let frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n            frameSpan.classList.remove(INDETERMINATE);\n            frameSpan.classList.add(CHECK);\n            this.addCheck(currLi);\n            ariaState = 'true';\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK, INDETERMINATE]);\n            this.removeCheck(currLi);\n            ariaState = 'false';\n        }\n        else if (state === 'indeterminate' && this.autoCheck) {\n            frameSpan.classList.remove(CHECK);\n            frameSpan.classList.add(INDETERMINATE);\n            this.removeCheck(currLi);\n            ariaState = 'mixed';\n        }\n        ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n        if (isAdd) {\n            let data = [].concat([], this.checkActionNodes);\n            eventArgs = this.getCheckEvent(currLi, state, e);\n            if (isUndefined(isPrevent)) {\n                eventArgs.data = data;\n            }\n        }\n        if (doCheck !== undefined) {\n            this.ensureStateChange(currLi, doCheck);\n        }\n        if (!isPrevent) {\n            if (!isNullOrUndefined(ariaState)) {\n                wrapper.setAttribute('aria-checked', ariaState);\n                eventArgs.data[0].checked = ariaState;\n                this.trigger('nodeChecked', eventArgs);\n                this.checkActionNodes = [];\n            }\n        }\n    }\n    addCheck(liEle) {\n        let id = liEle.getAttribute('data-uid');\n        if (!isNullOrUndefined(id) && this.checkedNodes.indexOf(id) === -1) {\n            this.checkedNodes.push(id);\n        }\n    }\n    removeCheck(liEle) {\n        let index = this.checkedNodes.indexOf(liEle.getAttribute('data-uid'));\n        if (index > -1) {\n            this.checkedNodes.splice(index, 1);\n        }\n    }\n    getCheckEvent(currLi, action, e) {\n        this.checkActionNodes.push(this.getNodeData(currLi));\n        let nodeData = this.checkActionNodes;\n        return { action: action, cancel: false, isInteracted: isNullOrUndefined(e) ? false : true, node: currLi, data: nodeData };\n    }\n    finalize() {\n        let firstUl = select('.' + PARENTITEM, this.element);\n        if (!isNullOrUndefined(firstUl)) {\n            firstUl.setAttribute('role', treeAriaAttr.treeRole);\n            this.setMultiSelect(this.allowMultiSelection);\n            let firstNode = select('.' + LISTITEM, this.element);\n            if (firstNode) {\n                addClass([firstNode], FOCUS);\n                this.updateIdAttr(null, firstNode);\n            }\n            if (this.allowTextWrap) {\n                this.updateWrap();\n            }\n            this.renderReactTemplates();\n            this.hasPid = this.rootData[0] ? this.rootData[0].hasOwnProperty(this.fields.parentID) : false;\n            this.doExpandAction();\n        }\n    }\n    setTextWrap() {\n        (this.allowTextWrap ? addClass : removeClass)([this.element], LISTWRAP);\n        if (Browser.isIE) {\n            (this.allowTextWrap ? addClass : removeClass)([this.element], IELISTWRAP);\n        }\n    }\n    updateWrap(ulEle) {\n        if (!this.fullRowSelect) {\n            return;\n        }\n        const liEle = ulEle ? selectAll('.' + LISTITEM, ulEle) : this.liList;\n        const length = liEle.length;\n        for (let i = 0; i < length; i++) {\n            this.calculateWrap(liEle[i]);\n        }\n    }\n    calculateWrap(liEle) {\n        const element = select('.' + FULLROW, liEle);\n        if (element && element.nextElementSibling) {\n            element.style.height = this.allowTextWrap ? element.nextElementSibling.offsetHeight + 'px' : '';\n        }\n    }\n    doExpandAction() {\n        let eUids = this.expandedNodes;\n        if (this.isInitalExpand && eUids.length > 0) {\n            this.setProperties({ expandedNodes: [] }, true);\n            /* eslint-disable */\n            if (this.fields.dataSource instanceof DataManager) {\n                this.expandGivenNodes(eUids);\n            }\n            else {\n                for (let i = 0; i < eUids.length; i++) {\n                    let eNode = select('[data-uid=\"' + eUids[i] + '\"]', this.element);\n                    if (!isNullOrUndefined(eNode)) {\n                        let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, eNode));\n                        if (!isNullOrUndefined(icon)) {\n                            this.expandAction(eNode, icon, null);\n                        }\n                    }\n                    else {\n                        if (eUids[i] && this.expandChildren.indexOf(eUids[i]) === -1) {\n                            this.expandChildren.push(eUids[i].toString());\n                        }\n                        continue;\n                    }\n                }\n                this.afterFinalized();\n            }\n        }\n        else {\n            this.afterFinalized();\n        }\n    }\n    expandGivenNodes(arr) {\n        let proxy = this;\n        this.expandCallback(arr[this.index], () => {\n            proxy.index++;\n            if (proxy.index < arr.length) {\n                proxy.expandGivenNodes(arr);\n            }\n            else {\n                proxy.afterFinalized();\n            }\n        });\n    }\n    expandCallback(eUid, callback) {\n        let eNode = select('[data-uid=\"' + eUid + '\"]', this.element);\n        if (!isNullOrUndefined(eNode)) {\n            let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, eNode));\n            if (!isNullOrUndefined(icon)) {\n                this.expandAction(eNode, icon, null, false, callback);\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            callback();\n        }\n    }\n    afterFinalized() {\n        this.doSelectionAction();\n        this.updateCheckedProp();\n        this.isAnimate = true;\n        this.isInitalExpand = false;\n        if (!this.isLoaded || this.isFieldChange) {\n            let eventArgs = { data: this.treeData };\n            this.trigger('dataBound', eventArgs);\n        }\n        this.isLoaded = true;\n    }\n    doSelectionAction() {\n        let sNodes = selectAll('.' + SELECTED$1, this.element);\n        let sUids = this.selectedNodes;\n        if (sUids.length > 0) {\n            this.setProperties({ selectedNodes: [] }, true);\n            for (let i = 0; i < sUids.length; i++) {\n                let sNode = select('[data-uid=\"' + sUids[i] + '\"]', this.element);\n                if (sNode && !(sNode.classList.contains('e-active'))) {\n                    this.selectNode(sNode, null, true);\n                }\n                else {\n                    this.selectedNodes.push(sUids[i]);\n                }\n                if (!this.allowMultiSelection) {\n                    break;\n                }\n            }\n        }\n        else {\n            this.selectGivenNodes(sNodes);\n        }\n        removeClass(sNodes, SELECTED$1);\n    }\n    selectGivenNodes(sNodes) {\n        for (let i = 0; i < sNodes.length; i++) {\n            if (!sNodes[i].classList.contains('e-disable')) {\n                this.selectNode(sNodes[i], null, true);\n            }\n            if (!this.allowMultiSelection) {\n                break;\n            }\n        }\n    }\n    clickHandler(event) {\n        let target = event.originalEvent.target;\n        EventHandler.remove(this.element, 'contextmenu', this.preventContextMenu);\n        if (!target || this.dragStartAction) {\n            return;\n        }\n        else {\n            let classList$$1 = target.classList;\n            let li = closest(target, '.' + LISTITEM);\n            if (!li) {\n                return;\n            }\n            else if (event.originalEvent.which !== 3) {\n                let rippleElement = select('.' + RIPPLEELMENT, li);\n                let rippleIcons = select('.' + ICON, li);\n                this.removeHover();\n                this.setFocusElement(li);\n                if (this.showCheckBox && !li.classList.contains('e-disable')) {\n                    let checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n                    if (!isNullOrUndefined(checkWrapper)) {\n                        let checkElement = select('.' + CHECKBOXFRAME, checkWrapper);\n                        this.validateCheckNode(checkWrapper, checkElement.classList.contains(CHECK), li, event.originalEvent);\n                        this.triggerClickEvent(event.originalEvent, li);\n                        return;\n                    }\n                }\n                if (classList$$1.contains(EXPANDABLE)) {\n                    this.expandAction(li, target, event);\n                }\n                else if (classList$$1.contains(COLLAPSIBLE)) {\n                    this.collapseNode(li, target, event);\n                }\n                else if (rippleElement && rippleIcons) {\n                    if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(EXPANDABLE)) {\n                        this.expandAction(li, rippleIcons, event);\n                    }\n                    else if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(COLLAPSIBLE)) {\n                        this.collapseNode(li, rippleIcons, event);\n                    }\n                    else if (!classList$$1.contains(PARENTITEM) && !classList$$1.contains(LISTITEM)) {\n                        this.toggleSelect(li, event.originalEvent, false);\n                    }\n                }\n                else {\n                    if (!classList$$1.contains(PARENTITEM) && !classList$$1.contains(LISTITEM)) {\n                        this.toggleSelect(li, event.originalEvent, false);\n                    }\n                }\n            }\n            this.triggerClickEvent(event.originalEvent, li);\n        }\n    }\n    nodeCheckedEvent(wrapper, isCheck, e) {\n        let currLi = closest(wrapper, '.' + LISTITEM);\n        let eventArgs = this.getCheckEvent(wrapper, isCheck ? 'uncheck' : 'check', e);\n        eventArgs.data = eventArgs.data.splice(0, eventArgs.data.length - 1);\n        this.trigger('nodeChecked', eventArgs);\n    }\n    triggerClickEvent(e, li) {\n        let eventArgs = {\n            event: e,\n            node: li,\n        };\n        this.trigger('nodeClicked', eventArgs);\n    }\n    expandNode(currLi, icon, loaded) {\n        this.renderReactTemplates();\n        if (icon.classList.contains(LOAD)) {\n            this.hideSpinner(icon);\n        }\n        if (!this.initialRender) {\n            icon.classList.add('interaction');\n        }\n        if (loaded !== true || (loaded === true && currLi.classList.contains('e-expanded'))) {\n            if (this.preventExpand !== true) {\n                removeClass([icon], EXPANDABLE);\n                addClass([icon], COLLAPSIBLE);\n                let start = 0;\n                let end = 0;\n                let proxy = this;\n                let ul = select('.' + PARENTITEM, currLi);\n                let liEle = currLi;\n                this.setHeight(liEle, ul);\n                let activeElement = select('.' + LISTITEM + '.' + ACTIVE, currLi);\n                if (this.isAnimate && !this.isRefreshed) {\n                    this.aniObj.animate(ul, {\n                        name: this.animation.expand.effect,\n                        duration: this.animation.expand.duration,\n                        timingFunction: this.animation.expand.easing,\n                        begin: (args) => {\n                            liEle.style.overflow = 'hidden';\n                            if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n                                activeElement.classList.add(ITEM_ANIMATION_ACTIVE);\n                            }\n                            start = liEle.offsetHeight;\n                            end = select('.' + TEXTWRAP, currLi).offsetHeight;\n                        },\n                        progress: (args) => {\n                            args.element.style.display = 'block';\n                            proxy.animateHeight(args, start, end);\n                        },\n                        end: (args) => {\n                            args.element.style.display = 'block';\n                            if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n                                activeElement.classList.remove(ITEM_ANIMATION_ACTIVE);\n                            }\n                            this.expandedNode(liEle, ul, icon);\n                        }\n                    });\n                }\n                else {\n                    this.expandedNode(liEle, ul, icon);\n                }\n            }\n        }\n        else {\n            let ul = select('.' + PARENTITEM, currLi);\n            ul.style.display = 'none';\n            if (this.fields.dataSource instanceof DataManager === true) {\n                this.preventExpand = false;\n            }\n        }\n        if (this.initialRender) {\n            icon.classList.add('interaction');\n        }\n    }\n    expandedNode(currLi, ul, icon) {\n        ul.style.display = 'block';\n        currLi.style.display = 'block';\n        currLi.style.overflow = '';\n        currLi.style.height = '';\n        removeClass([icon], PROCESS);\n        this.addExpand(currLi);\n        if (this.allowTextWrap && this.isLoaded && this.isFirstRender) {\n            this.updateWrap(currLi);\n            this.isFirstRender = false;\n        }\n        if (this.isLoaded && this.expandArgs && !this.isRefreshed) {\n            this.expandArgs = this.getExpandEvent(currLi, null);\n            this.trigger('nodeExpanded', this.expandArgs);\n        }\n    }\n    addExpand(liEle) {\n        liEle.setAttribute('aria-expanded', 'true');\n        removeClass([liEle], NODECOLLAPSED);\n        let id = liEle.getAttribute('data-uid');\n        if (!isNullOrUndefined(id) && this.expandedNodes.indexOf(id) === -1) {\n            this.expandedNodes.push(id);\n        }\n    }\n    collapseNode(currLi, icon, e) {\n        if (icon.classList.contains(PROCESS)) {\n            return;\n        }\n        else {\n            addClass([icon], PROCESS);\n        }\n        let colArgs;\n        if (this.isLoaded) {\n            colArgs = this.getExpandEvent(currLi, e);\n            this.trigger('nodeCollapsing', colArgs, (observedArgs) => {\n                if (observedArgs.cancel) {\n                    removeClass([icon], PROCESS);\n                }\n                else {\n                    this.nodeCollapseAction(currLi, icon, observedArgs);\n                }\n            });\n        }\n        else {\n            this.nodeCollapseAction(currLi, icon, colArgs);\n        }\n    }\n    nodeCollapseAction(currLi, icon, colArgs) {\n        removeClass([icon], COLLAPSIBLE);\n        addClass([icon], EXPANDABLE);\n        let start = 0;\n        let end = 0;\n        let proxy = this;\n        let ul = select('.' + PARENTITEM, currLi);\n        let liEle = currLi;\n        let activeElement = select('.' + LISTITEM + '.' + ACTIVE, currLi);\n        if (this.isAnimate) {\n            this.aniObj.animate(ul, {\n                name: this.animation.collapse.effect,\n                duration: this.animation.collapse.duration,\n                timingFunction: this.animation.collapse.easing,\n                begin: (args) => {\n                    liEle.style.overflow = 'hidden';\n                    if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n                        activeElement.classList.add(ITEM_ANIMATION_ACTIVE);\n                    }\n                    start = select('.' + TEXTWRAP, currLi).offsetHeight;\n                    end = liEle.offsetHeight;\n                },\n                progress: (args) => {\n                    proxy.animateHeight(args, start, end);\n                },\n                end: (args) => {\n                    args.element.style.display = 'none';\n                    if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {\n                        activeElement.classList.remove(ITEM_ANIMATION_ACTIVE);\n                    }\n                    this.collapsedNode(liEle, ul, icon, colArgs);\n                }\n            });\n        }\n        else {\n            this.collapsedNode(liEle, ul, icon, colArgs);\n        }\n    }\n    collapsedNode(liEle, ul, icon, colArgs) {\n        ul.style.display = 'none';\n        liEle.style.overflow = '';\n        liEle.style.height = '';\n        removeClass([icon], PROCESS);\n        this.removeExpand(liEle);\n        if (this.isLoaded) {\n            colArgs = this.getExpandEvent(liEle, null);\n            this.trigger('nodeCollapsed', colArgs);\n        }\n    }\n    removeExpand(liEle, toRemove) {\n        if (toRemove) {\n            liEle.removeAttribute('aria-expanded');\n        }\n        else {\n            this.disableExpandAttr(liEle);\n        }\n        let index = this.expandedNodes.indexOf(liEle.getAttribute('data-uid'));\n        if (index > -1) {\n            this.expandedNodes.splice(index, 1);\n        }\n    }\n    disableExpandAttr(liEle) {\n        liEle.setAttribute('aria-expanded', 'false');\n        addClass([liEle], NODECOLLAPSED);\n    }\n    setHeight(currLi, ul) {\n        ul.style.display = 'block';\n        ul.style.visibility = 'hidden';\n        currLi.style.height = currLi.offsetHeight + 'px';\n        ul.style.display = 'none';\n        ul.style.visibility = '';\n    }\n    animateHeight(args, start, end) {\n        let remaining = (args.duration - args.timeStamp) / args.duration;\n        let currentHeight = (end - start) * remaining + start;\n        args.element.parentElement.style.height = currentHeight + 'px';\n    }\n    renderChildNodes(parentLi, expandChild, callback, loaded) {\n        let eicon = select('div.' + ICON, parentLi);\n        if (isNullOrUndefined(eicon)) {\n            return;\n        }\n        this.showSpinner(eicon);\n        let childItems;\n        /* eslint-disable */\n        if (this.fields.dataSource instanceof DataManager) {\n            let level = this.parents(parentLi, '.' + PARENTITEM).length;\n            let mapper = this.getChildFields(this.fields, level, 1);\n            if (isNullOrUndefined(mapper) || isNullOrUndefined(mapper.dataSource)) {\n                detach(eicon);\n                this.removeExpand(parentLi, true);\n                return;\n            }\n            this.treeList.push('false');\n            if (this.fields.dataSource instanceof DataManager && this.isOffline) {\n                this.treeList.pop();\n                childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n                this.loadChild(childItems, mapper, eicon, parentLi, expandChild, callback, loaded);\n            }\n            else {\n                mapper.dataSource.executeQuery(this.getQuery(mapper, parentLi.getAttribute('data-uid'))).then((e) => {\n                    this.treeList.pop();\n                    childItems = e.result;\n                    if (this.dataType === 1) {\n                        this.dataType = 2;\n                    }\n                    this.loadChild(childItems, mapper, eicon, parentLi, expandChild, callback, loaded);\n                }).catch((e) => {\n                    this.trigger('actionFailure', { error: e });\n                });\n            }\n        }\n        else {\n            childItems = this.getChildNodes(this.treeData, parentLi.getAttribute('data-uid'));\n            this.currentLoadData = this.getSortedData(childItems);\n            if (isNullOrUndefined(childItems) || childItems.length === 0) {\n                detach(eicon);\n                this.removeExpand(parentLi, true);\n                return;\n            }\n            else {\n                this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n                parentLi.appendChild(ListBase.createList(this.createElement, this.currentLoadData, this.listBaseOption));\n                this.expandNode(parentLi, eicon, loaded);\n                this.setSelectionForChildNodes(childItems);\n                this.ensureCheckNode(parentLi);\n                this.finalizeNode(parentLi);\n                this.disableTreeNodes(childItems);\n                this.renderSubChild(parentLi, expandChild, loaded);\n            }\n        }\n    }\n    loadChild(childItems, mapper, eicon, parentLi, expandChild, callback, loaded) {\n        this.currentLoadData = childItems;\n        if (isNullOrUndefined(childItems) || childItems.length === 0) {\n            detach(eicon);\n            this.removeExpand(parentLi, true);\n        }\n        else {\n            this.updateListProp(mapper);\n            if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n                let id = parentLi.getAttribute('data-uid');\n                let nodeData = this.getNodeObject(id);\n                setValue('child', childItems, nodeData);\n            }\n            this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute('aria-level')) + 1;\n            parentLi.appendChild(ListBase.createList(this.createElement, childItems, this.listBaseOption));\n            this.expandNode(parentLi, eicon, loaded);\n            this.setSelectionForChildNodes(childItems);\n            this.ensureCheckNode(parentLi);\n            this.finalizeNode(parentLi);\n            this.disableTreeNodes(childItems);\n            this.renderSubChild(parentLi, expandChild, loaded);\n        }\n        if (callback) {\n            callback();\n        }\n        if (this.treeList.length === 0 && !this.isLoaded) {\n            this.finalize();\n        }\n    }\n    disableTreeNodes(childItems) {\n        let i = 0;\n        while (i < childItems.length) {\n            let id = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;\n            if (this.disableNode !== undefined && this.disableNode.indexOf(id) !== -1) {\n                this.doDisableAction([id]);\n            }\n            i++;\n        }\n    }\n    /**\n     * Sets the child Item in selectedState while rendering the child node\n     */\n    setSelectionForChildNodes(nodes) {\n        let i;\n        for (i = 0; i < nodes.length; i++) {\n            let id = nodes[i][this.fields.id] ? nodes[i][this.fields.id].toString() : null;\n            if (this.selectedNodes !== undefined && this.selectedNodes.indexOf(id) !== -1) {\n                this.doSelectionAction();\n            }\n        }\n    }\n    ensureCheckNode(element) {\n        if (this.showCheckBox) {\n            this.ele = (this.checkedElement) ? this.checkedElement.indexOf(element.getAttribute('data-uid')) : null;\n            if (this.autoCheck) {\n                this.ensureChildCheckState(element);\n                this.ensureParentCheckState(element);\n            }\n        }\n        this.currentLoadData = null;\n    }\n    getFields(mapper, nodeLevel, dataLevel) {\n        if (nodeLevel === dataLevel) {\n            return mapper;\n        }\n        else {\n            return this.getFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n        }\n    }\n    getChildFields(mapper, nodeLevel, dataLevel) {\n        if (nodeLevel === dataLevel) {\n            return this.getChildMapper(mapper);\n        }\n        else {\n            return this.getChildFields(this.getChildMapper(mapper), nodeLevel, dataLevel + 1);\n        }\n    }\n    getChildMapper(mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    }\n    getChildNodes(obj, parentId, isRoot = false) {\n        let childNodes;\n        if (isNullOrUndefined(obj)) {\n            return childNodes;\n        }\n        else if (this.dataType === 1) {\n            return this.getChildGroup(this.groupedData, parentId, isRoot);\n        }\n        else {\n            if (typeof this.fields.child === 'string') {\n                for (let i = 0, objlen = obj.length; i < objlen; i++) {\n                    let dataId = getValue(this.fields.id, obj[i]);\n                    if (dataId && dataId.toString() === parentId) {\n                        return getValue(this.fields.child, obj[i]);\n                    }\n                    else if (!isNullOrUndefined(getValue(this.fields.child, obj[i]))) {\n                        childNodes = this.getChildNodes(getValue(this.fields.child, obj[i]), parentId);\n                        if (childNodes !== undefined) {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return childNodes;\n    }\n    getChildGroup(data, parentId, isRoot) {\n        let childNodes;\n        if (isNullOrUndefined(data)) {\n            return childNodes;\n        }\n        for (let i = 0, objlen = data.length; i < objlen; i++) {\n            if (!isNullOrUndefined(data[i][0]) && !isNullOrUndefined(getValue(this.fields.parentID, data[i][0]))) {\n                if (getValue(this.fields.parentID, data[i][0]).toString() === parentId) {\n                    return data[i];\n                }\n            }\n            else if (isRoot) {\n                return data[i];\n            }\n            else {\n                return [];\n            }\n        }\n        return childNodes;\n    }\n    renderSubChild(element, expandChild, loaded) {\n        if (expandChild) {\n            let cIcons = selectAll('.' + EXPANDABLE, element);\n            for (let i = 0, len = cIcons.length; i < len; i++) {\n                let icon = cIcons[i];\n                if (element.querySelector('.e-icons') !== cIcons[i]) {\n                    let curLi = closest(icon, '.' + LISTITEM);\n                    this.expandArgs = this.getExpandEvent(curLi, null);\n                    if (loaded !== true) {\n                        this.trigger('nodeExpanding', this.expandArgs);\n                    }\n                    this.renderChildNodes(curLi, expandChild, null, loaded);\n                }\n            }\n        }\n    }\n    toggleSelect(li, e, multiSelect) {\n        if (!li.classList.contains('e-disable')) {\n            if (this.allowMultiSelection && ((e && e.ctrlKey) || multiSelect) && this.isActive(li)) {\n                this.unselectNode(li, e);\n            }\n            else {\n                this.selectNode(li, e, multiSelect);\n            }\n        }\n    }\n    isActive(li) {\n        return li.classList.contains(ACTIVE) ? true : false;\n    }\n    selectNode(li, e, multiSelect) {\n        if (isNullOrUndefined(li) || (!this.allowMultiSelection && this.isActive(li) && !isNullOrUndefined(e))) {\n            this.setFocusElement(li);\n            return;\n        }\n        let eventArgs;\n        if (this.isLoaded) {\n            eventArgs = this.getSelectEvent(li, 'select', e);\n            this.trigger('nodeSelecting', eventArgs, (observedArgs) => {\n                if (!observedArgs.cancel) {\n                    this.nodeSelectAction(li, e, observedArgs, multiSelect);\n                }\n            });\n        }\n        else {\n            this.nodeSelectAction(li, e, eventArgs, multiSelect);\n        }\n    }\n    nodeSelectAction(li, e, eventArgs, multiSelect) {\n        if (!this.allowMultiSelection || (!multiSelect && (!e || (e && !e.ctrlKey)))) {\n            this.removeSelectAll();\n        }\n        if (this.allowMultiSelection && e && e.shiftKey) {\n            if (!this.startNode) {\n                this.startNode = li;\n            }\n            let startIndex = this.liList.indexOf(this.startNode);\n            let endIndex = this.liList.indexOf(li);\n            if (startIndex > endIndex) {\n                let temp = startIndex;\n                startIndex = endIndex;\n                endIndex = temp;\n            }\n            for (let i = startIndex; i <= endIndex; i++) {\n                let currNode = this.liList[i];\n                if (isVisible(currNode) && !currNode.classList.contains('e-disable')) {\n                    this.addSelect(currNode);\n                }\n            }\n        }\n        else {\n            this.startNode = li;\n            this.addSelect(li);\n        }\n        this.setFocusElement(li);\n        if (this.isLoaded) {\n            eventArgs.nodeData = this.getNodeData(li);\n            this.trigger('nodeSelected', eventArgs);\n        }\n    }\n    unselectNode(li, e) {\n        let eventArgs;\n        if (this.isLoaded) {\n            eventArgs = this.getSelectEvent(li, 'un-select', e);\n            this.trigger('nodeSelecting', eventArgs, (observedArgs) => {\n                if (!observedArgs.cancel) {\n                    this.nodeUnselectAction(li, observedArgs);\n                }\n            });\n        }\n        else {\n            this.nodeUnselectAction(li, eventArgs);\n        }\n    }\n    nodeUnselectAction(li, eventArgs) {\n        this.removeSelect(li);\n        this.setFocusElement(li);\n        if (this.isLoaded) {\n            eventArgs.nodeData = this.getNodeData(li);\n            this.trigger('nodeSelected', eventArgs);\n        }\n    }\n    setFocusElement(li) {\n        if (!isNullOrUndefined(li)) {\n            let focusedNode = this.getFocusedNode();\n            if (focusedNode) {\n                removeClass([focusedNode], FOCUS);\n            }\n            addClass([li], FOCUS);\n            this.updateIdAttr(focusedNode, li);\n        }\n    }\n    addSelect(liEle) {\n        liEle.setAttribute('aria-selected', 'true');\n        addClass([liEle], ACTIVE);\n        let id = liEle.getAttribute('data-uid');\n        if (!isNullOrUndefined(id) && this.selectedNodes.indexOf(id) === -1) {\n            this.selectedNodes.push(id);\n        }\n    }\n    removeSelect(liEle) {\n        if (this.allowMultiSelection) {\n            liEle.setAttribute('aria-selected', 'false');\n        }\n        else {\n            liEle.removeAttribute('aria-selected');\n        }\n        removeClass([liEle], ACTIVE);\n        let index = this.selectedNodes.indexOf(liEle.getAttribute('data-uid'));\n        if (index > -1) {\n            this.selectedNodes.splice(index, 1);\n        }\n    }\n    removeSelectAll() {\n        let selectedLI = this.element.querySelectorAll('.' + ACTIVE);\n        for (let ele of selectedLI) {\n            if (this.allowMultiSelection) {\n                ele.setAttribute('aria-selected', 'false');\n            }\n            else {\n                ele.removeAttribute('aria-selected');\n            }\n        }\n        removeClass(selectedLI, ACTIVE);\n        this.setProperties({ selectedNodes: [] }, true);\n    }\n    getSelectEvent(currLi, action, e) {\n        let nodeData = this.getNodeData(currLi);\n        return { action: action, cancel: false, isInteracted: isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData };\n    }\n    setExpandOnType() {\n        this.expandOnType = (this.expandOn === 'Auto') ? (Browser.isDevice ? 'Click' : 'DblClick') : this.expandOn;\n    }\n    expandHandler(e) {\n        let target = e.originalEvent.target;\n        if (!target || target.classList.contains(INPUT) || target.classList.contains(ROOT) ||\n            target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) ||\n            target.classList.contains(ICON) || this.showCheckBox && closest(target, '.' + CHECKBOXWRAP)) {\n            return;\n        }\n        else {\n            this.expandCollapseAction(closest(target, '.' + LISTITEM), e);\n        }\n    }\n    expandCollapseAction(currLi, e) {\n        let icon = select('div.' + ICON, currLi);\n        if (!icon || icon.classList.contains(PROCESS)) {\n            return;\n        }\n        else {\n            let classList$$1 = icon.classList;\n            if (classList$$1.contains(EXPANDABLE)) {\n                this.expandAction(currLi, icon, e);\n            }\n            else if (classList$$1.contains(COLLAPSIBLE)) {\n                this.collapseNode(currLi, icon, e);\n            }\n        }\n    }\n    expandAction(currLi, icon, e, expandChild, callback) {\n        if (icon.classList.contains(PROCESS)) {\n            return;\n        }\n        else {\n            addClass([icon], PROCESS);\n        }\n        if (this.isLoaded && !this.isRefreshed) {\n            this.expandArgs = this.getExpandEvent(currLi, e);\n            this.trigger('nodeExpanding', this.expandArgs, (observedArgs) => {\n                if (observedArgs.cancel) {\n                    removeClass([icon], PROCESS);\n                }\n                else {\n                    this.nodeExpandAction(currLi, icon, expandChild, callback);\n                }\n            });\n        }\n        else {\n            this.nodeExpandAction(currLi, icon, expandChild, callback);\n        }\n    }\n    nodeExpandAction(currLi, icon, expandChild, callback) {\n        let ul = select('.' + PARENTITEM, currLi);\n        if (ul && ul.nodeName === 'UL') {\n            this.expandNode(currLi, icon);\n        }\n        else {\n            this.isFirstRender = true;\n            this.renderChildNodes(currLi, expandChild, callback);\n            let liEles = selectAll('.' + LISTITEM, currLi);\n            for (let i = 0; i < liEles.length; i++) {\n                let id = this.getId(liEles[i]);\n                if (this.expandChildren.indexOf(id) !== -1 && this.expandChildren !== undefined) {\n                    let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, liEles[i]));\n                    if (!isNullOrUndefined(icon)) {\n                        this.expandAction(liEles[i], icon, null);\n                    }\n                    this.expandChildren.splice(this.expandChildren.indexOf(id), 1);\n                }\n            }\n        }\n    }\n    keyActionHandler(e) {\n        let target = e.target;\n        let focusedNode = this.getFocusedNode();\n        if (target && target.classList.contains(INPUT)) {\n            let inpEle = target;\n            if (e.action === 'enter') {\n                inpEle.blur();\n                this.element.focus();\n                addClass([focusedNode], HOVER);\n            }\n            else if (e.action === 'escape') {\n                inpEle.value = this.oldText;\n                inpEle.blur();\n                this.element.focus();\n                addClass([focusedNode], HOVER);\n            }\n            return;\n        }\n        e.preventDefault();\n        let eventArgs = {\n            cancel: false,\n            event: e,\n            node: focusedNode,\n        };\n        this.trigger('keyPress', eventArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'space':\n                        if (this.showCheckBox) {\n                            this.checkNode(e);\n                        }\n                        break;\n                    case 'moveRight':\n                        this.openNode(this.enableRtl ? false : true, e);\n                        break;\n                    case 'moveLeft':\n                        this.openNode(this.enableRtl ? true : false, e);\n                        break;\n                    case 'shiftDown':\n                        this.shiftKeySelect(true, e);\n                        break;\n                    case 'moveDown':\n                    case 'ctrlDown':\n                    case 'csDown':\n                        this.navigateNode(true);\n                        break;\n                    case 'shiftUp':\n                        this.shiftKeySelect(false, e);\n                        break;\n                    case 'moveUp':\n                    case 'ctrlUp':\n                    case 'csUp':\n                        this.navigateNode(false);\n                        break;\n                    case 'home':\n                    case 'shiftHome':\n                    case 'ctrlHome':\n                    case 'csHome':\n                        this.navigateRootNode(true);\n                        break;\n                    case 'end':\n                    case 'shiftEnd':\n                    case 'ctrlEnd':\n                    case 'csEnd':\n                        this.navigateRootNode(false);\n                        break;\n                    case 'enter':\n                    case 'ctrlEnter':\n                    case 'shiftEnter':\n                    case 'csEnter':\n                        this.toggleSelect(focusedNode, e);\n                        break;\n                    case 'f2':\n                        if (this.allowEditing && !focusedNode.classList.contains('e-disable')) {\n                            this.createTextbox(focusedNode, e);\n                        }\n                        break;\n                    case 'ctrlA':\n                        if (this.allowMultiSelection) {\n                            let sNodes = selectAll('.' + LISTITEM + ':not(.' + ACTIVE + ')', this.element);\n                            this.selectGivenNodes(sNodes);\n                        }\n                        break;\n                }\n            }\n        });\n    }\n    navigateToFocus(isUp) {\n        let focusNode = this.getFocusedNode().querySelector('.' + TEXTWRAP);\n        let pos = focusNode.getBoundingClientRect();\n        let parent = this.getScrollParent(this.element);\n        if (!isNullOrUndefined(parent)) {\n            let parentPos = parent.getBoundingClientRect();\n            if (pos.bottom > parentPos.bottom) {\n                parent.scrollTop += pos.bottom - parentPos.bottom;\n            }\n            else if (pos.top < parentPos.top) {\n                parent.scrollTop -= parentPos.top - pos.top;\n            }\n        }\n        let isVisible$$1 = this.isVisibleInViewport(focusNode);\n        if (!isVisible$$1) {\n            focusNode.scrollIntoView(isUp);\n        }\n    }\n    isVisibleInViewport(txtWrap) {\n        let pos = txtWrap.getBoundingClientRect();\n        return (pos.top >= 0 && pos.left >= 0 && pos.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            pos.right <= (window.innerWidth || document.documentElement.clientWidth));\n    }\n    getScrollParent(node) {\n        if (isNullOrUndefined(node)) {\n            return null;\n        }\n        return (node.scrollHeight > node.clientHeight) ? node : this.getScrollParent(node.parentElement);\n    }\n    shiftKeySelect(isTowards, e) {\n        if (this.allowMultiSelection) {\n            let focusedNode = this.getFocusedNode();\n            let nextNode = isTowards ? this.getNextNode(focusedNode) : this.getPrevNode(focusedNode);\n            this.removeHover();\n            this.setFocusElement(nextNode);\n            this.toggleSelect(nextNode, e, false);\n            this.navigateToFocus(!isTowards);\n        }\n        else {\n            this.navigateNode(isTowards);\n        }\n    }\n    checkNode(e) {\n        let focusedNode = this.getFocusedNode();\n        let checkWrap = select('.' + CHECKBOXWRAP, focusedNode);\n        let isChecked = select(' .' + CHECKBOXFRAME, checkWrap).classList.contains(CHECK);\n        if (!focusedNode.classList.contains('e-disable')) {\n            if (focusedNode.getElementsByClassName(\"e-checkbox-disabled\").length == 0) {\n                this.validateCheckNode(checkWrap, isChecked, focusedNode, e);\n            }\n        }\n    }\n    validateCheckNode(checkWrap, isCheck, li, e) {\n        let currLi = closest(checkWrap, '.' + LISTITEM);\n        this.checkActionNodes = [];\n        let ariaState = !isCheck ? 'true' : 'false';\n        if (!isNullOrUndefined(ariaState)) {\n            checkWrap.setAttribute('aria-checked', ariaState);\n        }\n        let eventArgs = this.getCheckEvent(currLi, isCheck ? 'uncheck' : 'check', e);\n        this.trigger('nodeChecking', eventArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                this.nodeCheckingAction(checkWrap, isCheck, li, observedArgs, e);\n            }\n        });\n    }\n    nodeCheckingAction(checkWrap, isCheck, li, eventArgs, e) {\n        if (this.checkedElement.indexOf(li.getAttribute('data-uid')) === -1) {\n            this.checkedElement.push(li.getAttribute('data-uid'));\n            if (this.autoCheck) {\n                let child = this.getChildNodes(this.treeData, li.getAttribute('data-uid'));\n                (child !== null) ? this.allCheckNode(child, this.checkedElement, null, null, false) : child = null;\n            }\n        }\n        this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true);\n        if (this.autoCheck) {\n            this.ensureChildCheckState(li);\n            this.ensureParentCheckState(closest(closest(li, '.' + PARENTITEM), '.' + LISTITEM));\n            let doCheck;\n            if (eventArgs.action === 'check') {\n                doCheck = true;\n            }\n            else if (eventArgs.action === 'uncheck') {\n                doCheck = false;\n            }\n            this.ensureStateChange(li, doCheck);\n        }\n        this.nodeCheckedEvent(checkWrap, isCheck, e);\n    }\n    /**\n     * Update checkedNodes when UI interaction happens before the child node renders in DOM\n     */\n    ensureStateChange(li, doCheck) {\n        let childElement = select('.' + PARENTITEM, li);\n        let parentIndex = li.getAttribute('data-uid');\n        let mapper = this.fields;\n        if (this.dataType === 1 && this.autoCheck) {\n            let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.parentID, 'equal', parentIndex, true));\n            for (let i = 0; i < resultData.length; i++) {\n                let resultId = resultData[i][this.fields.id] ? resultData[i][this.fields.id].toString() : null;\n                let isCheck = resultData[i][this.fields.isChecked] ? resultData[i][this.fields.isChecked].toString() : null;\n                if (this.checkedNodes.indexOf(parentIndex) !== -1 && this.checkedNodes.indexOf(resultId) === -1) {\n                    this.checkedNodes.push(resultId);\n                    let childItems = this.getChildNodes(this.treeData, resultId);\n                    this.getChildItems(childItems, doCheck);\n                    if (this.parentNodeCheck.indexOf(resultId) !== -1) {\n                        this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(resultId), 1);\n                    }\n                }\n                else if (this.checkedNodes.indexOf(parentIndex) === -1 && childElement === null &&\n                    this.checkedNodes.indexOf(resultId) !== -1) {\n                    this.checkedNodes.splice(this.checkedNodes.indexOf(resultId), 1);\n                    if (isCheck === 'true') {\n                        this.updateField(this.treeData, this.fields, resultId, 'isChecked', null);\n                    }\n                    if (this.checkedNodes.indexOf(parentIndex) === -1 && childElement === null ||\n                        this.parentNodeCheck.indexOf(resultId) !== -1) {\n                        let childNodes = this.getChildNodes(this.treeData, resultId);\n                        this.getChildItems(childNodes, doCheck);\n                        if (this.parentNodeCheck.indexOf(resultId) !== -1) {\n                            this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(resultId), 1);\n                        }\n                    }\n                }\n                else {\n                    let childItems = this.getChildNodes(this.treeData, resultId);\n                    this.getChildItems(childItems, doCheck);\n                }\n            }\n        }\n        else if (this.dataType === 1 && !this.autoCheck) {\n            if (!doCheck) {\n                let checkedData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.isChecked, 'equal', true, false));\n                for (let i = 0; i < checkedData.length; i++) {\n                    let id = checkedData[i][this.fields.id] ? checkedData[i][this.fields.id].toString() : null;\n                    if (this.checkedNodes.indexOf(id) !== -1) {\n                        this.checkedNodes.splice(this.checkedNodes.indexOf(id), 1);\n                    }\n                    this.updateField(this.treeData, this.fields, id, 'isChecked', null);\n                }\n                this.checkedNodes = [];\n            }\n            else {\n                for (let i = 0; i < this.treeData.length; i++) {\n                    let checkedId = this.treeData[i][this.fields.id] ? this.treeData[i][this.fields.id].toString() : null;\n                    if (this.checkedNodes.indexOf(checkedId) === -1) {\n                        this.checkedNodes.push(checkedId);\n                    }\n                }\n            }\n        }\n        else {\n            let childItems = this.getChildNodes(this.treeData, parentIndex);\n            if (childItems) {\n                this.childStateChange(childItems, parentIndex, childElement, doCheck);\n            }\n        }\n    }\n    getChildItems(childItems, doCheck) {\n        for (let i = 0; i < childItems.length; i++) {\n            let childId = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;\n            let childIsCheck = childItems[i][this.fields.isChecked] ? childItems[i][this.fields.isChecked].toString() :\n                null;\n            if (this.checkedNodes.indexOf(childId) !== -1 && !doCheck) {\n                this.checkedNodes.splice(this.checkedNodes.indexOf(childId), 1);\n            }\n            if (this.checkedNodes.indexOf(childId) === -1 && doCheck) {\n                this.checkedNodes.push(childId);\n            }\n            if (childIsCheck === 'true' && !doCheck) {\n                this.updateField(this.treeData, this.fields, childId, 'isChecked', null);\n            }\n            let subChildItems = this.getChildNodes(this.treeData, childId);\n            if (subChildItems.length > 0) {\n                this.getChildItems(subChildItems, doCheck);\n            }\n        }\n    }\n    /**\n     * Update checkedNodes when UI interaction happens before the child node renders in DOM for hierarchical DS\n     */\n    childStateChange(childItems, parent, childElement, doCheck) {\n        for (let i = 0; i < childItems.length; i++) {\n            let checkedChild = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : '';\n            let isCheck = childItems[i][this.fields.isChecked] ? childItems[i][this.fields.isChecked].toString() : null;\n            if (this.autoCheck) {\n                if (this.checkedNodes.indexOf(parent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1) {\n                    this.checkedNodes.push(checkedChild);\n                    if (this.parentNodeCheck.indexOf(checkedChild) !== -1) {\n                        this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(checkedChild), 1);\n                    }\n                }\n                else if (this.checkedNodes.indexOf(parent) === -1 && this.checkedNodes.indexOf(checkedChild) !== -1 && !doCheck) {\n                    this.checkedNodes.splice(this.checkedNodes.indexOf(checkedChild), 1);\n                    if (isCheck === 'true') {\n                        this.updateField(this.treeData, this.fields, checkedChild, 'isChecked', null);\n                    }\n                }\n            }\n            else if (!this.autoCheck) {\n                if (!doCheck) {\n                    if (this.checkedNodes.indexOf(checkedChild) !== -1) {\n                        this.checkedNodes.splice(this.checkedNodes.indexOf(checkedChild), 1);\n                    }\n                    this.updateField(this.treeData, this.fields, checkedChild, 'isChecked', null);\n                    this.checkedNodes = [];\n                }\n                else {\n                    if (this.checkedNodes.indexOf(checkedChild) === -1) {\n                        this.checkedNodes.push(checkedChild);\n                    }\n                }\n            }\n            let subChild = this.getChildNodes([childItems[i]], checkedChild);\n            if (subChild) {\n                this.childStateChange(subChild, parent, childElement, doCheck);\n            }\n        }\n    }\n    //This method can be used to get all child nodes of a parent by passing the children of a parent along with 'validateCheck' set to false\n    allCheckNode(child, newCheck, checked, childCheck, validateCheck) {\n        if (child) {\n            for (let length = 0; length < child.length; length++) {\n                let childId = getValue(this.fields.id, child[length]);\n                let check = this.element.querySelector('[data-uid=\"' + childId + '\"]');\n                //Validates isChecked case while no UI interaction has been performed on the node or it's parent\n                if (validateCheck !== false && this.checkedElement.indexOf(childId.toString()) === -1) {\n                    if (((check === null && !isNullOrUndefined(child[length][this.fields.isChecked]) && newCheck.indexOf(childId.toString()) === -1)\n                        || childCheck === 0 || checked === 2)) {\n                        (child[length][this.fields.isChecked] !== false || checked === 2) ? newCheck.push(childId.toString())\n                            : childCheck = null;\n                        childCheck = (child[length][this.fields.isChecked] !== false || checked === 2) ? 0 : null;\n                    }\n                }\n                //Pushes child checked node done thro' UI interaction\n                if (newCheck.indexOf(childId.toString()) === -1 && isNullOrUndefined(checked)) {\n                    newCheck.push(childId.toString());\n                }\n                let hierChildId = getValue(this.fields.child.toString(), child[length]);\n                //Gets if any next level children are available for child nodes\n                if (getValue(this.fields.hasChildren, child[length]) === true || hierChildId) {\n                    let id = getValue(this.fields.id, child[length]);\n                    let childId;\n                    if (this.dataType === 1) {\n                        childId = this.getChildNodes(this.treeData, id.toString());\n                    }\n                    else {\n                        childId = hierChildId;\n                    }\n                    if (childId) {\n                        (isNullOrUndefined(validateCheck)) ? this.allCheckNode(childId, newCheck, checked, childCheck) :\n                            this.allCheckNode(childId, newCheck, checked, childCheck, validateCheck);\n                        childCheck = null;\n                    }\n                }\n                childCheck = null;\n            }\n        }\n    }\n    openNode(toBeOpened, e) {\n        let focusedNode = this.getFocusedNode();\n        let icon = select('div.' + ICON, focusedNode);\n        if (toBeOpened) {\n            if (!icon) {\n                return;\n            }\n            else if (icon.classList.contains(EXPANDABLE)) {\n                this.expandAction(focusedNode, icon, e);\n            }\n            else {\n                this.focusNextNode(focusedNode, true);\n            }\n        }\n        else {\n            if (icon && icon.classList.contains(COLLAPSIBLE)) {\n                this.collapseNode(focusedNode, icon, e);\n            }\n            else {\n                let parentLi = closest(closest(focusedNode, '.' + PARENTITEM), '.' + LISTITEM);\n                if (!parentLi) {\n                    return;\n                }\n                else {\n                    if (!parentLi.classList.contains('e-disable')) {\n                        this.setFocus(focusedNode, parentLi);\n                        this.navigateToFocus(true);\n                    }\n                }\n            }\n        }\n    }\n    navigateNode(isTowards) {\n        let focusedNode = this.getFocusedNode();\n        this.focusNextNode(focusedNode, isTowards);\n    }\n    navigateRootNode(isBackwards) {\n        let focusedNode = this.getFocusedNode();\n        let rootNode = isBackwards ? this.getRootNode() : this.getEndNode();\n        if (!rootNode.classList.contains('e-disable')) {\n            this.setFocus(focusedNode, rootNode);\n            this.navigateToFocus(isBackwards);\n        }\n    }\n    getFocusedNode() {\n        let selectedItem;\n        let fNode = select('.' + LISTITEM + '.' + FOCUS, this.element);\n        if (isNullOrUndefined(fNode)) {\n            selectedItem = select('.' + LISTITEM, this.element);\n        }\n        return isNullOrUndefined(fNode) ? (isNullOrUndefined(selectedItem) ? this.element.firstElementChild : selectedItem) : fNode;\n    }\n    focusNextNode(li, isTowards) {\n        let nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);\n        this.setFocus(li, nextNode);\n        this.navigateToFocus(!isTowards);\n        if (nextNode.classList.contains('e-disable')) {\n            let lastChild = nextNode.lastChild;\n            if (nextNode.previousSibling == null && nextNode.classList.contains('e-level-1')) {\n                this.focusNextNode(nextNode, true);\n            }\n            else if (nextNode.nextSibling == null && nextNode.classList.contains('e-node-collapsed')) {\n                this.focusNextNode(nextNode, false);\n            }\n            else if (nextNode.nextSibling == null && lastChild.classList.contains(TEXTWRAP)) {\n                this.focusNextNode(nextNode, false);\n            }\n            else {\n                this.focusNextNode(nextNode, isTowards);\n            }\n        }\n    }\n    getNextNode(li) {\n        let index = this.liList.indexOf(li);\n        let nextNode;\n        do {\n            index++;\n            nextNode = this.liList[index];\n            if (isNullOrUndefined(nextNode)) {\n                return li;\n            }\n        } while (!isVisible(nextNode));\n        return nextNode;\n    }\n    getPrevNode(li) {\n        let index = this.liList.indexOf(li);\n        let prevNode;\n        do {\n            index--;\n            prevNode = this.liList[index];\n            if (isNullOrUndefined(prevNode)) {\n                return li;\n            }\n        } while (!isVisible(prevNode));\n        return prevNode;\n    }\n    getRootNode() {\n        let index = 0;\n        let rootNode;\n        do {\n            rootNode = this.liList[index];\n            index++;\n        } while (!isVisible(rootNode));\n        return rootNode;\n    }\n    getEndNode() {\n        let index = this.liList.length - 1;\n        let endNode;\n        do {\n            endNode = this.liList[index];\n            index--;\n        } while (!isVisible(endNode));\n        return endNode;\n    }\n    setFocus(preNode, nextNode) {\n        removeClass([preNode], [HOVER, FOCUS]);\n        if (!nextNode.classList.contains('e-disable')) {\n            addClass([nextNode], [HOVER, FOCUS]);\n            this.updateIdAttr(preNode, nextNode);\n        }\n    }\n    updateIdAttr(preNode, nextNode) {\n        this.element.removeAttribute('aria-activedescendant');\n        if (preNode) {\n            preNode.removeAttribute('id');\n        }\n        nextNode.setAttribute('id', this.element.id + '_active');\n        this.element.setAttribute('aria-activedescendant', this.element.id + '_active');\n    }\n    focusIn() {\n        if (!this.mouseDownStatus) {\n            addClass([this.getFocusedNode()], HOVER);\n        }\n        this.mouseDownStatus = false;\n    }\n    focusOut() {\n        removeClass([this.getFocusedNode()], HOVER);\n    }\n    onMouseOver(e) {\n        let target = e.target;\n        let classList$$1 = target.classList;\n        let currentLi = closest(target, '.' + LISTITEM);\n        if (!currentLi || classList$$1.contains(PARENTITEM) || classList$$1.contains(LISTITEM)) {\n            this.removeHover();\n            return;\n        }\n        else {\n            if (currentLi && !currentLi.classList.contains('e-disable')) {\n                this.setHover(currentLi);\n            }\n        }\n    }\n    setHover(li) {\n        if (!li.classList.contains(HOVER)) {\n            this.removeHover();\n            addClass([li], HOVER);\n        }\n    }\n    ;\n    onMouseLeave(e) {\n        this.removeHover();\n    }\n    removeHover() {\n        let hoveredNode = selectAll('.' + HOVER, this.element);\n        if (hoveredNode && hoveredNode.length) {\n            removeClass(hoveredNode, HOVER);\n        }\n    }\n    ;\n    getNodeData(currLi, fromDS) {\n        if (!isNullOrUndefined(currLi) && currLi.classList.contains(LISTITEM) &&\n            !isNullOrUndefined(closest(currLi, '.' + CONTROL)) && closest(currLi, '.' + CONTROL).classList.contains(ROOT)) {\n            let id = currLi.getAttribute('data-uid');\n            let text = this.getText(currLi, fromDS);\n            let pNode = closest(currLi.parentNode, '.' + LISTITEM);\n            let pid = pNode ? pNode.getAttribute('data-uid') : null;\n            let selected = currLi.classList.contains(ACTIVE);\n            let expanded = (currLi.getAttribute('aria-expanded') === 'true') ? true : false;\n            let hasChildren = currLi.getAttribute('aria-expanded') !== null ? true : (select('.' + EXPANDABLE, currLi) || select('.' + COLLAPSIBLE, currLi)) != null ? true : false;\n            let checked = null;\n            if (this.showCheckBox) {\n                checked = select('.' + CHECKBOXWRAP, currLi).getAttribute('aria-checked');\n            }\n            return {\n                id: id, text: text, parentID: pid, selected: selected, expanded: expanded,\n                isChecked: checked, hasChildren: hasChildren\n            };\n        }\n        return { id: '', text: '', parentID: '', selected: false, expanded: false, isChecked: '', hasChildren: false };\n    }\n    getText(currLi, fromDS) {\n        if (fromDS) {\n            let nodeData = this.getNodeObject(currLi.getAttribute('data-uid'));\n            let level = parseFloat(currLi.getAttribute('aria-level'));\n            let nodeFields = this.getFields(this.fields, level, 1);\n            return getValue(nodeFields.text, nodeData);\n        }\n        return select('.' + LISTTEXT, currLi).textContent;\n    }\n    getExpandEvent(currLi, e) {\n        let nodeData = this.getNodeData(currLi);\n        return { cancel: false, isInteracted: isNullOrUndefined(e) ? false : true, node: currLi, nodeData: nodeData, event: e };\n    }\n    renderNodeTemplate(data, textEle, dataId) {\n        let tempArr = this.nodeTemplateFn(data, this, 'nodeTemplate' + dataId, this.element.id + 'nodeTemplate', this.isStringTemplate, undefined, textEle, this.root);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, textEle);\n        }\n    }\n    destroyTemplate(liEle) {\n        this.clearTemplate(['nodeTemplate' + liEle.getAttribute('data-uid')]);\n    }\n    reRenderNodes() {\n        this.updateListProp(this.fields);\n        if (Browser.isIE) {\n            this.ulElement = this.element.querySelector('.e-list-parent.e-ul');\n            this.ulElement.parentElement.removeChild(this.ulElement);\n        }\n        else {\n            this.element.innerHTML = '';\n        }\n        if (!isNullOrUndefined(this.nodeTemplateFn)) {\n            this.clearTemplate();\n        }\n        this.setTouchClass();\n        this.setProperties({ selectedNodes: [], checkedNodes: [], expandedNodes: [] }, true);\n        this.checkedElement = [];\n        this.isLoaded = false;\n        this.setDataBinding(true);\n    }\n    setCssClass(oldClass, newClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass([this.element], oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(newClass) && newClass !== '') {\n            addClass([this.element], newClass.split(' '));\n        }\n    }\n    editingHandler(e) {\n        let target = e.target;\n        if (!target || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) ||\n            target.classList.contains(LISTITEM) || target.classList.contains(ICON) ||\n            target.classList.contains(INPUT) || target.classList.contains(INPUTGROUP)) {\n            return;\n        }\n        else {\n            let liEle = closest(target, '.' + LISTITEM);\n            this.createTextbox(liEle, e);\n        }\n    }\n    createTextbox(liEle, e) {\n        let oldInpEle = select('.' + TREEINPUT, this.element);\n        if (oldInpEle) {\n            oldInpEle.blur();\n        }\n        let textEle = select('.' + LISTTEXT, liEle);\n        this.updateOldText(liEle);\n        let innerEle = this.createElement('input', { className: TREEINPUT, attrs: { value: this.oldText } });\n        let eventArgs = this.getEditEvent(liEle, null, innerEle.outerHTML);\n        this.trigger('nodeEditing', eventArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                let inpWidth = textEle.offsetWidth + 5;\n                let style = 'width:' + inpWidth + 'px';\n                addClass([liEle], EDITING);\n                if (!isNullOrUndefined(this.nodeTemplateFn)) {\n                    this.destroyTemplate(liEle);\n                }\n                textEle.innerHTML = eventArgs.innerHtml;\n                let inpEle = select('.' + TREEINPUT, textEle);\n                this.inputObj = Input.createInput({\n                    element: inpEle,\n                    properties: {\n                        enableRtl: this.enableRtl,\n                    }\n                }, this.createElement);\n                this.inputObj.container.setAttribute('style', style);\n                inpEle.focus();\n                let inputEle = inpEle;\n                inputEle.setSelectionRange(0, inputEle.value.length);\n                this.wireInputEvents(inpEle);\n            }\n        });\n    }\n    updateOldText(liEle) {\n        let id = liEle.getAttribute('data-uid');\n        this.editData = this.getNodeObject(id);\n        let level = parseFloat(liEle.getAttribute('aria-level'));\n        this.editFields = this.getFields(this.fields, level, 1);\n        this.oldText = getValue(this.editFields.text, this.editData);\n    }\n    inputFocusOut(e) {\n        if (!select('.' + TREEINPUT, this.element)) {\n            return;\n        }\n        let target = e.target;\n        let newText = target.value;\n        let txtEle = closest(target, '.' + LISTTEXT);\n        let liEle = closest(target, '.' + LISTITEM);\n        detach(this.inputObj.container);\n        if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n            this.crudOperation('update', null, liEle, newText, null, null, true);\n        }\n        else {\n            this.appendNewText(liEle, txtEle, newText, true);\n        }\n    }\n    appendNewText(liEle, txtEle, newText, isInput) {\n        let eventArgs = this.getEditEvent(liEle, newText, null);\n        this.trigger('nodeEdited', eventArgs, (observedArgs) => {\n            newText = observedArgs.cancel ? observedArgs.oldText : observedArgs.newText;\n            this.updateText(liEle, txtEle, newText, isInput);\n            if (observedArgs.oldText !== newText) {\n                this.triggerEvent();\n            }\n        });\n    }\n    updateText(liEle, txtEle, newText, isInput) {\n        let newData = setValue(this.editFields.text, newText, this.editData);\n        if (!isNullOrUndefined(this.nodeTemplateFn)) {\n            txtEle.innerText = '';\n            let dataId = liEle.getAttribute('data-uid');\n            this.renderNodeTemplate(newData, txtEle, dataId);\n            this.renderReactTemplates();\n        }\n        else {\n            txtEle.innerText = newText;\n        }\n        if (isInput) {\n            removeClass([liEle], EDITING);\n            txtEle.focus();\n        }\n        if (this.allowTextWrap) {\n            this.calculateWrap(liEle);\n        }\n    }\n    getElement(ele) {\n        if (isNullOrUndefined(ele)) {\n            return null;\n        }\n        else if (typeof ele === 'string') {\n            return this.element.querySelector('[data-uid=\"' + ele + '\"]');\n        }\n        else if (typeof ele === 'object') {\n            return getElement(ele);\n        }\n        else {\n            return null;\n        }\n    }\n    getId(ele) {\n        if (isNullOrUndefined(ele)) {\n            return null;\n        }\n        else if (typeof ele === 'string') {\n            return ele;\n        }\n        else if (typeof ele === 'object') {\n            return (getElement(ele)).getAttribute('data-uid');\n        }\n        else {\n            return null;\n        }\n    }\n    getEditEvent(liEle, newText, inpEle) {\n        let data = this.getNodeData(liEle);\n        return { cancel: false, newText: newText, node: liEle, nodeData: data, oldText: this.oldText, innerHtml: inpEle };\n    }\n    getNodeObject(id) {\n        let childNodes;\n        if (isNullOrUndefined(id)) {\n            return childNodes;\n        }\n        else if (this.dataType === 1) {\n            for (let i = 0, objlen = this.treeData.length; i < objlen; i++) {\n                let dataId = getValue(this.fields.id, this.treeData[i]);\n                if (!isNullOrUndefined(this.treeData[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n                    return this.treeData[i];\n                }\n            }\n        }\n        else {\n            return this.getChildNodeObject(this.treeData, this.fields, id);\n        }\n        return childNodes;\n    }\n    getChildNodeObject(obj, mapper, id) {\n        let newList;\n        if (isNullOrUndefined(obj)) {\n            return newList;\n        }\n        for (let i = 0, objlen = obj.length; i < objlen; i++) {\n            let dataId = getValue(mapper.id, obj[i]);\n            if (obj[i] && dataId && dataId.toString() === id) {\n                return obj[i];\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                let childData = getValue(mapper.child, obj[i]);\n                newList = this.getChildNodeObject(childData, this.getChildMapper(mapper), id);\n                if (newList !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                let child = 'child';\n                newList = this.getChildNodeObject(getValue(child, obj[i]), this.getChildMapper(mapper), id);\n                if (newList !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newList;\n    }\n    setDragAndDrop(toBind) {\n        if (toBind && !this.disabled) {\n            this.initializeDrag();\n        }\n        else {\n            this.destroyDrag();\n        }\n    }\n    initializeDrag() {\n        let virtualEle;\n        let proxy = this;\n        this.dragObj = new Draggable(this.element, {\n            enableTailMode: true, enableAutoScroll: true,\n            dragArea: this.dragArea,\n            dragTarget: '.' + TEXTWRAP,\n            helper: (e) => {\n                this.dragTarget = e.sender.target;\n                let dragRoot = closest(this.dragTarget, '.' + ROOT);\n                let dragWrap = closest(this.dragTarget, '.' + TEXTWRAP);\n                this.dragLi = closest(this.dragTarget, '.' + LISTITEM);\n                if (this.fullRowSelect && !dragWrap && this.dragTarget.classList.contains(FULLROW)) {\n                    dragWrap = this.dragTarget.nextElementSibling;\n                }\n                if (!this.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap ||\n                    this.dragTarget.classList.contains(ROOT) || this.dragTarget.classList.contains(PARENTITEM) ||\n                    this.dragTarget.classList.contains(LISTITEM) || this.dragLi.classList.contains('e-disable')) {\n                    return false;\n                }\n                let cloneEle = (dragWrap.cloneNode(true));\n                if (isNullOrUndefined(select('div.' + ICON, cloneEle))) {\n                    let icon = proxy.createElement('div', { className: ICON + ' ' + EXPANDABLE });\n                    cloneEle.insertBefore(icon, cloneEle.children[0]);\n                }\n                let cssClass = DRAGITEM + ' ' + ROOT + ' ' + this.cssClass + ' ' + (this.enableRtl ? RTL$1 : '');\n                virtualEle = proxy.createElement('div', { className: cssClass });\n                virtualEle.appendChild(cloneEle);\n                let nLen = this.selectedNodes.length;\n                if (nLen > 1 && this.allowMultiSelection && this.dragLi.classList.contains(ACTIVE)) {\n                    let cNode = proxy.createElement('span', { className: DROPCOUNT, innerHTML: '' + nLen });\n                    virtualEle.appendChild(cNode);\n                }\n                document.body.appendChild(virtualEle);\n                document.body.style.cursor = '';\n                this.dragData = this.getNodeData(this.dragLi);\n                return virtualEle;\n            },\n            dragStart: (e) => {\n                addClass([this.element], DRAGGING);\n                let listItem = closest(e.target, '.e-list-item');\n                let level;\n                if (listItem) {\n                    level = parseInt(listItem.getAttribute('aria-level'), 10);\n                }\n                let eventArgs = this.getDragEvent(e.event, this, null, e.target, null, virtualEle, level);\n                if (eventArgs.draggedNode.classList.contains(EDITING)) {\n                    this.dragObj.intDestroy(e.event);\n                    this.dragCancelAction(virtualEle);\n                }\n                else {\n                    this.trigger('nodeDragStart', eventArgs, (observedArgs) => {\n                        if (observedArgs.cancel) {\n                            this.dragObj.intDestroy(e.event);\n                            this.dragCancelAction(virtualEle);\n                        }\n                        else {\n                            this.dragStartAction = true;\n                        }\n                    });\n                }\n            },\n            drag: (e) => {\n                this.dragObj.setProperties({ cursorAt: { top: (!isNullOrUndefined(e.event.targetTouches) || Browser.isDevice) ? 60 : -20 } });\n                this.dragAction(e, virtualEle);\n            },\n            dragStop: (e) => {\n                removeClass([this.element], DRAGGING);\n                this.removeVirtualEle();\n                let dropTarget = e.target;\n                let preventTargetExpand = false;\n                let dropRoot = (closest(dropTarget, '.' + DROPPABLE));\n                if (!dropTarget || !dropRoot) {\n                    detach(e.helper);\n                    document.body.style.cursor = '';\n                    \n                }\n                let listItem = closest(dropTarget, '.e-list-item');\n                let level;\n                if (listItem) {\n                    level = parseInt(listItem.getAttribute('aria-level'), 10);\n                }\n                let eventArgs = this.getDragEvent(e.event, this, dropTarget, dropTarget, null, e.helper, level);\n                eventArgs.preventTargetExpand = preventTargetExpand;\n                this.trigger('nodeDragStop', eventArgs, (observedArgs) => {\n                    this.dragParent = observedArgs.draggedParentNode;\n                    this.preventExpand = observedArgs.preventTargetExpand;\n                    if (observedArgs.cancel) {\n                        if (e.helper.parentNode) {\n                            detach(e.helper);\n                        }\n                        document.body.style.cursor = '';\n                        \n                    }\n                    this.dragStartAction = false;\n                });\n            }\n        });\n        this.dropObj = new Droppable(this.element, {\n            out: (e) => {\n                if (!isNullOrUndefined(e) && !e.target.classList.contains(SIBLING)) {\n                    document.body.style.cursor = 'not-allowed';\n                }\n            },\n            over: (e) => {\n                document.body.style.cursor = '';\n            },\n            drop: (e) => {\n                this.dropAction(e);\n            }\n        });\n    }\n    dragCancelAction(virtualEle) {\n        detach(virtualEle);\n        removeClass([this.element], DRAGGING);\n        this.dragStartAction = false;\n    }\n    dragAction(e, virtualEle) {\n        let dropRoot = closest(e.target, '.' + DROPPABLE);\n        let dropWrap = closest(e.target, '.' + TEXTWRAP);\n        let icon = select('div.' + ICON, virtualEle);\n        removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);\n        this.removeVirtualEle();\n        document.body.style.cursor = '';\n        let classList$$1 = e.target.classList;\n        if (this.fullRowSelect && !dropWrap && !isNullOrUndefined(classList$$1) && classList$$1.contains(FULLROW)) {\n            dropWrap = e.target.nextElementSibling;\n        }\n        if (dropRoot) {\n            let dropLi = closest(e.target, '.' + LISTITEM);\n            let checkWrapper = closest(e.target, '.' + CHECKBOXWRAP);\n            let collapse = closest(e.target, '.' + COLLAPSIBLE);\n            let expand = closest(e.target, '.' + EXPANDABLE);\n            if (!dropRoot.classList.contains(ROOT) || (dropWrap &&\n                (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)))) {\n                if (this.hasTemplate && dropLi) {\n                    let templateTarget = select(this.fullRowSelect ? '.' + FULLROW : '.' + TEXTWRAP, dropLi);\n                    if ((e && (!expand && !collapse) && e.event.offsetY < 7 && !checkWrapper) || (((expand && e.event.offsetY < 5) || (collapse && e.event.offsetX < 3)))) {\n                        let index = this.fullRowSelect ? (1) : (0);\n                        this.appendIndicator(dropLi, icon, index);\n                    }\n                    else if ((e && (!expand && !collapse) && !checkWrapper && templateTarget && e.event.offsetY > templateTarget.offsetHeight - 10) || ((expand && e.event.offsetY > 19) || (collapse && e.event.offsetX > 19))) {\n                        let index = this.fullRowSelect ? (2) : (1);\n                        this.appendIndicator(dropLi, icon, index);\n                    }\n                    else {\n                        addClass([icon], DROPIN);\n                    }\n                }\n                else {\n                    if ((dropLi && e && (!expand && !collapse) && (e.event.offsetY < 7) && !checkWrapper) || (((expand && e.event.offsetY < 5) || (collapse && e.event.offsetX < 3)))) {\n                        let index = this.fullRowSelect ? (1) : (0);\n                        this.appendIndicator(dropLi, icon, index);\n                    }\n                    else if ((dropLi && e && (!expand && !collapse) && (e.target.offsetHeight > 0 && e.event.offsetY > (e.target.offsetHeight - 10)) && !checkWrapper) || (((expand && e.event.offsetY > 19) || (collapse && e.event.offsetX > 19)))) {\n                        let index = this.fullRowSelect ? (2) : (1);\n                        this.appendIndicator(dropLi, icon, index);\n                    }\n                    else {\n                        addClass([icon], DROPIN);\n                    }\n                }\n            }\n            else if (e.target.nodeName === 'LI' && (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi))) {\n                addClass([icon], DROPNEXT);\n                this.renderVirtualEle(e);\n            }\n            else if (e.target.classList.contains(SIBLING)) {\n                addClass([icon], DROPNEXT);\n            }\n            else {\n                addClass([icon], DROPOUT);\n            }\n        }\n        else {\n            addClass([icon], NODROP);\n            document.body.style.cursor = 'not-allowed';\n        }\n        let listItem = closest(e.target, '.e-list-item');\n        let level;\n        if (listItem) {\n            level = parseInt(listItem.getAttribute('aria-level'), 10);\n        }\n        let eventArgs = this.getDragEvent(e.event, this, e.target, e.target, null, virtualEle, level);\n        if (eventArgs.dropIndicator) {\n            removeClass([icon], eventArgs.dropIndicator);\n        }\n        this.trigger('nodeDragging', eventArgs);\n        if (eventArgs.dropIndicator) {\n            addClass([icon], eventArgs.dropIndicator);\n        }\n    }\n    appendIndicator(dropLi, icon, index) {\n        addClass([icon], DROPNEXT);\n        let virEle = this.createElement('div', { className: SIBLING });\n        dropLi.insertBefore(virEle, dropLi.children[index]);\n    }\n    /* eslint-disable */\n    dropAction(e) {\n        let offsetY = e.event.offsetY;\n        let dropTarget = e.target;\n        let dragObj;\n        let level;\n        let drop = false;\n        let dragInstance;\n        dragInstance = e.dragData.draggable;\n        for (let i = 0; i < dragInstance.ej2_instances.length; i++) {\n            if (dragInstance.ej2_instances[i] instanceof TreeView_1) {\n                dragObj = dragInstance.ej2_instances[i];\n                break;\n            }\n        }\n        if (dragObj && dragObj.dragTarget) {\n            let dragTarget = dragObj.dragTarget;\n            let dragLi = (closest(dragTarget, '.' + LISTITEM));\n            let dropLi = (closest(dropTarget, '.' + LISTITEM));\n            if (dropLi == null && dropTarget.classList.contains(ROOT)) {\n                dropLi = dropTarget.firstElementChild;\n            }\n            detach(e.droppedElement);\n            document.body.style.cursor = '';\n            if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n                if (this.fields.dataSource instanceof DataManager === false) {\n                    this.preventExpand = false;\n                }\n                return;\n            }\n            if (dragObj.allowMultiSelection && dragLi.classList.contains(ACTIVE)) {\n                let sNodes = selectAll('.' + ACTIVE, dragObj.element);\n                if (e.target.offsetHeight <= 33 && offsetY > e.target.offsetHeight - 10 && offsetY > 6) {\n                    for (let i = sNodes.length - 1; i >= 0; i--) {\n                        if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n                            continue;\n                        }\n                        this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);\n                    }\n                }\n                else {\n                    for (let i = 0; i < sNodes.length; i++) {\n                        if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {\n                            continue;\n                        }\n                        this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);\n                    }\n                }\n            }\n            else {\n                this.appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY);\n            }\n            level = parseInt(dragLi.getAttribute('aria-level'), 10);\n            drop = true;\n        }\n        if (this.fields.dataSource instanceof DataManager === false) {\n            this.preventExpand = false;\n        }\n        this.trigger('nodeDropped', this.getDragEvent(e.event, dragObj, dropTarget, e.target, e.dragData.draggedElement, null, level, drop));\n        if (dragObj.element.id !== this.element.id) {\n            dragObj.triggerEvent();\n        }\n        this.triggerEvent();\n    }\n    appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY) {\n        let checkWrapper = closest(dropTarget, '.' + CHECKBOXWRAP);\n        let collapse = closest(e.target, '.' + COLLAPSIBLE);\n        let expand = closest(e.target, '.' + EXPANDABLE);\n        if (!dragLi.classList.contains('e-disable') && !checkWrapper && ((expand && e.event.offsetY < 5) || (collapse && e.event.offsetX < 3) || (expand && e.event.offsetY > 19) || (collapse && e.event.offsetX > 19) || (!expand && !collapse))) {\n            if (dropTarget.nodeName === 'LI') {\n                this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n            }\n            else if (dropTarget.firstElementChild && dropTarget.classList.contains(ROOT)) {\n                if (dropTarget.firstElementChild.nodeName === 'UL') {\n                    this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n                }\n            }\n            else if ((dropTarget.classList.contains('e-icon-collapsible')) || (dropTarget.classList.contains('e-icon-expandable'))) {\n                this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);\n            }\n            else {\n                this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY);\n            }\n        }\n        else {\n            this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY, true);\n        }\n    }\n    dropAsSiblingNode(dragLi, dropLi, e, dragObj) {\n        let dropUl = closest(dropLi, '.' + PARENTITEM);\n        let dragParentUl = closest(dragLi, '.' + PARENTITEM);\n        let dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n        let pre;\n        if (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 2) {\n            pre = false;\n        }\n        else if (e.event.offsetY < 2) {\n            pre = true;\n        }\n        else if (e.target.classList.contains('e-icon-expandable') || (e.target.classList.contains('e-icon-collapsible'))) {\n            if ((e.event.offsetY < 5) || (e.event.offsetX < 3)) {\n                pre = true;\n            }\n            else if ((e.event.offsetY > 15) || (e.event.offsetX > 17)) {\n                pre = false;\n            }\n        }\n        if ((e.target.classList.contains('e-icon-expandable')) || (e.target.classList.contains('e-icon-collapsible'))) {\n            let target = e.target.closest('li');\n            dropUl.insertBefore(dragLi, pre ? target : target.nextElementSibling);\n        }\n        else {\n            dropUl.insertBefore(dragLi, pre ? e.target : e.target.nextElementSibling);\n        }\n        this.moveData(dragLi, dropLi, dropUl, pre, dragObj);\n        this.updateElement(dragParentUl, dragParentLi);\n        this.updateAriaLevel(dragLi);\n        if (dragObj.element.id === this.element.id) {\n            this.updateList();\n        }\n        else {\n            dragObj.updateInstance();\n            this.updateInstance();\n        }\n    }\n    dropAsChildNode(dragLi, dropLi, dragObj, index, e, pos, isCheck) {\n        let dragParentUl = closest(dragLi, '.' + PARENTITEM);\n        let dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n        let dropParentUl = closest(dropLi, '.' + PARENTITEM);\n        let templateTarget;\n        if (e && e.target) {\n            templateTarget = select(this.fullRowSelect ? '.' + FULLROW : '.' + TEXTWRAP, dropLi);\n        }\n        if (e && (pos < 7) && !isCheck) {\n            dropParentUl.insertBefore(dragLi, dropLi);\n            this.moveData(dragLi, dropLi, dropParentUl, true, dragObj);\n        }\n        else if (e && (e.target.offsetHeight > 0 && pos > (e.target.offsetHeight - 10)) && !isCheck && !this.hasTemplate) {\n            dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n            this.moveData(dragLi, dropLi, dropParentUl, false, dragObj);\n        }\n        else if (this.hasTemplate && templateTarget && pos > templateTarget.offsetHeight - 10 && !isCheck) {\n            dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);\n            this.moveData(dragLi, dropLi, dropParentUl, false, dragObj);\n        }\n        else {\n            let dropUl = this.expandParent(dropLi);\n            let childLi = dropUl.childNodes[index];\n            dropUl.insertBefore(dragLi, childLi);\n            this.moveData(dragLi, childLi, dropUl, true, dragObj);\n        }\n        this.updateElement(dragParentUl, dragParentLi);\n        this.updateAriaLevel(dragLi);\n        if (dragObj.element.id === this.element.id) {\n            this.updateList();\n        }\n        else {\n            dragObj.updateInstance();\n            this.updateInstance();\n        }\n    }\n    moveData(dragLi, dropLi, dropUl, pre, dragObj) {\n        let dropParentLi = closest(dropUl, '.' + LISTITEM);\n        let id = this.getId(dragLi);\n        let removedData = dragObj.updateChildField(dragObj.treeData, dragObj.fields, id, null, null, true);\n        let refId = this.getId(dropLi);\n        let index = this.getDataPos(this.treeData, this.fields, refId);\n        let parentId = this.getId(dropParentLi);\n        if (this.dataType === 1) {\n            this.updateField(this.treeData, this.fields, parentId, 'hasChildren', true);\n            let pos = isNullOrUndefined(index) ? this.treeData.length : (pre ? index : index + 1);\n            if (isNullOrUndefined(parentId) && !this.hasPid) {\n                delete removedData[0][this.fields.parentID];\n            }\n            else {\n                let currPid = this.isNumberTypeId ? parseFloat(parentId) : parentId;\n                setValue(this.fields.parentID, currPid, removedData[0]);\n            }\n            this.treeData.splice(pos, 0, removedData[0]);\n            if (dragObj.element.id !== this.element.id) {\n                let childData = dragObj.removeChildNodes(id);\n                pos++;\n                for (let i = 0, len = childData.length; i < len; i++) {\n                    this.treeData.splice(pos, 0, childData[i]);\n                    pos++;\n                }\n                dragObj.groupedData = dragObj.getGroupedData(dragObj.treeData, dragObj.fields.parentID);\n            }\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n        }\n        else {\n            this.addChildData(this.treeData, this.fields, parentId, removedData, pre ? index : index + 1);\n        }\n    }\n    expandParent(dropLi) {\n        let dropIcon = select('div.' + ICON, dropLi);\n        if (dropIcon && dropIcon.classList.contains(EXPANDABLE) && this.preventExpand !== true) {\n            this.expandAction(dropLi, dropIcon, null);\n        }\n        let dropUl = select('.' + PARENTITEM, dropLi);\n        if (this.preventExpand === true && !dropUl && dropIcon) {\n            this.renderChildNodes(dropLi);\n        }\n        dropUl = select('.' + PARENTITEM, dropLi);\n        if (!isNullOrUndefined(dropUl) && this.preventExpand === true) {\n            dropUl.style.display = 'none';\n        }\n        if (!isNullOrUndefined(dropUl) && this.preventExpand === false) {\n            dropUl.style.display = 'block';\n        }\n        if (isNullOrUndefined(dropUl) && this.preventExpand === true) {\n            if (isNullOrUndefined(dropIcon)) {\n                ListBase.generateIcon(this.createElement, dropLi, EXPANDABLE, this.listBaseOption);\n            }\n            let icon = select('div.' + ICON, dropLi);\n            if (icon) {\n                icon.classList.add('e-icon-expandable');\n            }\n            dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);\n            dropLi.appendChild(dropUl);\n            if (icon) {\n                removeClass([icon], COLLAPSIBLE);\n            }\n            else {\n                ListBase.generateIcon(this.createElement, dropLi, EXPANDABLE, this.listBaseOption);\n            }\n            dropLi.setAttribute('aria-expanded', 'false');\n            dropUl.style.display = 'none';\n        }\n        if (isNullOrUndefined(dropUl)) {\n            this.trigger('nodeExpanding', this.getExpandEvent(dropLi, null));\n            if (isNullOrUndefined(dropIcon)) {\n                ListBase.generateIcon(this.createElement, dropLi, COLLAPSIBLE, this.listBaseOption);\n            }\n            let icon = select('div.' + ICON, dropLi);\n            if (icon) {\n                removeClass([icon], EXPANDABLE);\n            }\n            else {\n                ListBase.generateIcon(this.createElement, dropLi, COLLAPSIBLE, this.listBaseOption);\n                icon = select('div.' + ICON, dropLi);\n                removeClass([icon], EXPANDABLE);\n            }\n            dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);\n            dropLi.appendChild(dropUl);\n            this.addExpand(dropLi);\n            this.trigger('nodeExpanded', this.getExpandEvent(dropLi, null));\n        }\n        return dropUl;\n    }\n    updateElement(dragParentUl, dragParentLi) {\n        if (dragParentLi && dragParentUl.childElementCount === 0) {\n            let dragIcon = select('div.' + ICON, dragParentLi);\n            detach(dragParentUl);\n            detach(dragIcon);\n            let parentId = this.getId(dragParentLi);\n            this.updateField(this.treeData, this.fields, parentId, 'hasChildren', false);\n            this.removeExpand(dragParentLi, true);\n        }\n    }\n    updateAriaLevel(dragLi) {\n        let level = this.parents(dragLi, '.' + PARENTITEM).length;\n        dragLi.setAttribute('aria-level', '' + level);\n        this.updateChildAriaLevel(select('.' + PARENTITEM, dragLi), level + 1);\n    }\n    updateChildAriaLevel(element, level) {\n        if (!isNullOrUndefined(element)) {\n            let cNodes = element.childNodes;\n            for (let i = 0, len = cNodes.length; i < len; i++) {\n                let liEle = cNodes[i];\n                liEle.setAttribute('aria-level', '' + level);\n                this.updateChildAriaLevel(select('.' + PARENTITEM, liEle), level + 1);\n            }\n        }\n    }\n    renderVirtualEle(e) {\n        let pre;\n        if (e.event.offsetY > e.target.offsetHeight - 2) {\n            pre = false;\n        }\n        else if (e.event.offsetY < 2) {\n            pre = true;\n        }\n        let virEle = this.createElement('div', { className: SIBLING });\n        let index = this.fullRowSelect ? (pre ? 1 : 2) : (pre ? 0 : 1);\n        e.target.insertBefore(virEle, e.target.children[index]);\n    }\n    removeVirtualEle() {\n        let sibEle = select('.' + SIBLING);\n        if (sibEle) {\n            detach(sibEle);\n        }\n    }\n    destroyDrag() {\n        if (this.dragObj && this.dropObj) {\n            this.dragObj.destroy();\n            this.dropObj.destroy();\n        }\n    }\n    getDragEvent(event, obj, dropTarget, target, dragNode, cloneEle, level, drop) {\n        let dropLi = dropTarget ? closest(dropTarget, '.' + LISTITEM) : null;\n        let dropData = dropLi ? this.getNodeData(dropLi) : null;\n        let draggedNode = obj ? obj.dragLi : dragNode;\n        let draggedNodeData = obj ? obj.dragData : null;\n        let newParent = dropTarget ? this.parents(dropTarget, '.' + LISTITEM) : null;\n        let dragLiParent = obj.dragLi.parentElement;\n        let dragParent = obj.dragLi ? closest(dragLiParent, '.' + LISTITEM) : null;\n        let targetParent = null;\n        let indexValue = null;\n        let iconCss = [DROPNEXT, DROPIN, DROPOUT, NODROP];\n        let iconClass = null;\n        let node = (drop === true) ? draggedNode : dropLi;\n        let index = node ? closest(node, '.e-list-parent') : null;\n        let i = 0;\n        let position = null;\n        dragParent = (obj.dragLi && dragParent === null) ? closest(dragLiParent, '.' + ROOT) : dragParent;\n        dragParent = (drop === true) ? this.dragParent : dragParent;\n        if (cloneEle) {\n            while (i < 4) {\n                if (select('.' + ICON, cloneEle).classList.contains(iconCss[i])) {\n                    iconClass = iconCss[i];\n                    break;\n                }\n                i++;\n            }\n        }\n        if (index) {\n            let dropTar = 0;\n            for (i = 0; i < index.childElementCount; i++) {\n                dropTar = (drop !== true && index.children[i] === draggedNode && dropLi !== draggedNode) ? ++dropTar : dropTar;\n                if ((drop !== true && index.children[i].classList.contains('e-hover'))) {\n                    indexValue = (event.offsetY >= 23) ? i + 1 : i;\n                    break;\n                }\n                else if (index.children[i] === node) {\n                    indexValue = (event.offsetY >= 23) ? i : i;\n                    break;\n                }\n            }\n            indexValue = (dropTar !== 0) ? --indexValue : indexValue;\n            position = (iconClass == \"e-drop-in\") ? \"Inside\" : ((event.offsetY < 7) ? \"Before\" : \"After\");\n        }\n        if (dropTarget) {\n            if (newParent.length === 0) {\n                targetParent = null;\n            }\n            else if (dropTarget.classList.contains(LISTITEM)) {\n                targetParent = newParent[0];\n            }\n            else {\n                targetParent = newParent[1];\n            }\n        }\n        if (dropLi === draggedNode) {\n            targetParent = dropLi;\n        }\n        if (dropTarget && target.offsetHeight <= 33 && event.offsetY < target.offsetHeight - 10 && event.offsetY > 6) {\n            targetParent = dropLi;\n            if (drop !== true) {\n                level = ++level;\n                let parent = targetParent ? select('.e-list-parent', targetParent) : null;\n                indexValue = (parent) ? parent.children.length : 0;\n                if (!(this.fields.dataSource instanceof DataManager) && parent === null && targetParent) {\n                    let parent = targetParent.hasAttribute('data-uid') ?\n                        this.getChildNodes(this.fields.dataSource, targetParent.getAttribute('data-uid').toString()) : null;\n                    indexValue = (parent) ? parent.length : 0;\n                }\n            }\n        }\n        return {\n            cancel: false,\n            clonedNode: cloneEle,\n            event: event,\n            draggedNode: draggedNode,\n            draggedNodeData: draggedNodeData,\n            droppedNode: dropLi,\n            droppedNodeData: dropData,\n            dropIndex: indexValue,\n            dropLevel: level,\n            draggedParentNode: dragParent,\n            dropTarget: targetParent,\n            dropIndicator: iconClass,\n            target: target,\n            position: position,\n        };\n    }\n    addFullRow(toAdd) {\n        let len = this.liList.length;\n        if (toAdd) {\n            for (let i = 0; i < len; i++) {\n                this.createFullRow(this.liList[i]);\n            }\n        }\n        else {\n            for (let i = 0; i < len; i++) {\n                let rowDiv = select('.' + FULLROW, this.liList[i]);\n                detach(rowDiv);\n            }\n        }\n    }\n    createFullRow(item) {\n        let rowDiv = this.createElement('div', { className: FULLROW });\n        item.insertBefore(rowDiv, item.childNodes[0]);\n    }\n    addMultiSelect(toAdd) {\n        if (toAdd) {\n            let liEles = selectAll('.' + LISTITEM + ':not([aria-selected=\"true\"])', this.element);\n            for (let ele of liEles) {\n                ele.setAttribute('aria-selected', 'false');\n            }\n        }\n        else {\n            let liEles = selectAll('.' + LISTITEM + '[aria-selected=\"false\"]', this.element);\n            for (let ele of liEles) {\n                ele.removeAttribute('aria-selected');\n            }\n        }\n    }\n    collapseByLevel(element, level, excludeHiddenNodes) {\n        if (level > 0 && !isNullOrUndefined(element)) {\n            let cNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n            for (let i = 0, len = cNodes.length; i < len; i++) {\n                let liEle = cNodes[i];\n                let icon = select('.' + COLLAPSIBLE, select('.' + TEXTWRAP, liEle));\n                if (!isNullOrUndefined(icon)) {\n                    this.collapseNode(liEle, icon, null);\n                }\n                this.collapseByLevel(select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n            }\n        }\n    }\n    collapseAllNodes(excludeHiddenNodes) {\n        let cIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll('.' + COLLAPSIBLE, this.element));\n        for (let i = 0, len = cIcons.length; i < len; i++) {\n            let icon = cIcons[i];\n            let liEle = closest(icon, '.' + LISTITEM);\n            this.collapseNode(liEle, icon, null);\n        }\n    }\n    expandByLevel(element, level, excludeHiddenNodes) {\n        if (level > 0 && !isNullOrUndefined(element)) {\n            let eNodes = this.getVisibleNodes(excludeHiddenNodes, element.childNodes);\n            for (let i = 0, len = eNodes.length; i < len; i++) {\n                let liEle = eNodes[i];\n                let icon = select('.' + EXPANDABLE, select('.' + TEXTWRAP, liEle));\n                if (!isNullOrUndefined(icon)) {\n                    this.expandAction(liEle, icon, null);\n                }\n                this.expandByLevel(select('.' + PARENTITEM, liEle), level - 1, excludeHiddenNodes);\n            }\n        }\n    }\n    expandAllNodes(excludeHiddenNodes) {\n        let eIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll('.' + EXPANDABLE, this.element));\n        for (let i = 0, len = eIcons.length; i < len; i++) {\n            let icon = eIcons[i];\n            let liEle = closest(icon, '.' + LISTITEM);\n            this.expandAction(liEle, icon, null, true);\n        }\n    }\n    getVisibleNodes(excludeHiddenNodes, nodes) {\n        let vNodes = Array.prototype.slice.call(nodes);\n        if (excludeHiddenNodes) {\n            for (let i = 0; i < vNodes.length; i++) {\n                if (!isVisible(vNodes[i])) {\n                    vNodes.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        return vNodes;\n    }\n    removeNode(node) {\n        let dragParentUl = closest(node, '.' + PARENTITEM);\n        let dragParentLi = closest(dragParentUl, '.' + LISTITEM);\n        if (!isNullOrUndefined(this.nodeTemplateFn)) {\n            this.destroyTemplate(node);\n        }\n        detach(node);\n        this.updateElement(dragParentUl, dragParentLi);\n        this.removeData(node);\n    }\n    updateInstance() {\n        this.updateList();\n        this.updateSelectedNodes();\n        this.updateExpandedNodes();\n    }\n    updateList() {\n        this.liList = Array.prototype.slice.call(selectAll('.' + LISTITEM, this.element));\n    }\n    updateSelectedNodes() {\n        this.setProperties({ selectedNodes: [] }, true);\n        let sNodes = selectAll('.' + ACTIVE, this.element);\n        this.selectGivenNodes(sNodes);\n    }\n    updateExpandedNodes() {\n        this.setProperties({ expandedNodes: [] }, true);\n        let eNodes = selectAll('[aria-expanded=\"true\"]', this.element);\n        for (let i = 0, len = eNodes.length; i < len; i++) {\n            this.addExpand(eNodes[i]);\n        }\n    }\n    removeData(node) {\n        if (this.dataType === 1) {\n            let dm = new DataManager(this.treeData);\n            let id = this.getId(node);\n            let data = {};\n            let newId = this.isNumberTypeId ? parseFloat(id) : id;\n            data[this.fields.id] = newId;\n            dm.remove(this.fields.id, data);\n            this.removeChildNodes(id);\n        }\n        else {\n            let id = this.getId(node);\n            this.updateChildField(this.treeData, this.fields, id, null, null, true);\n        }\n    }\n    removeChildNodes(parentId) {\n        let cNodes = this.getChildGroup(this.groupedData, parentId, false);\n        let childData = [];\n        if (cNodes) {\n            for (let i = 0, len = cNodes.length; i < len; i++) {\n                let dm = new DataManager(this.treeData);\n                let id = getValue(this.fields.id, cNodes[i]).toString();\n                let data = {};\n                let currId = this.isNumberTypeId ? parseFloat(id) : id;\n                data[this.fields.id] = currId;\n                let nodeData = dm.remove(this.fields.id, data);\n                childData.push(nodeData[0]);\n                this.removeChildNodes(id);\n            }\n        }\n        return childData;\n    }\n    doGivenAction(nodes, selector, toExpand) {\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            let liEle = this.getElement(nodes[i]);\n            if (isNullOrUndefined(liEle)) {\n                continue;\n            }\n            let icon = select('.' + selector, select('.' + TEXTWRAP, liEle));\n            if (!isNullOrUndefined(icon)) {\n                toExpand ? this.expandAction(liEle, icon, null) : this.collapseNode(liEle, icon, null);\n            }\n        }\n    }\n    addGivenNodes(nodes, dropLi, index, isRemote, dropEle) {\n        if (nodes.length === 0) {\n            return;\n        }\n        let sNodes = this.getSortedData(nodes);\n        let level = dropLi ? parseFloat(dropLi.getAttribute('aria-level')) + 1 : 1;\n        if (isRemote) {\n            this.updateMapper(level);\n        }\n        let li = ListBase.createListItemFromJson(this.createElement, sNodes, this.listBaseOption, level);\n        let dropUl;\n        if (!dropEle) {\n            dropUl = dropLi ? this.expandParent(dropLi) : select('.' + PARENTITEM, this.element);\n        }\n        else {\n            dropUl = dropEle;\n        }\n        let refNode = dropUl.childNodes[index];\n        if (refNode || this.sortOrder === 'None') {\n            for (let i = 0; i < li.length; i++) {\n                dropUl.insertBefore(li[i], refNode);\n            }\n        }\n        if (!refNode && ((this.sortOrder === 'Ascending') || (this.sortOrder === 'Descending'))) {\n            let cNodes = dropUl.childNodes;\n            for (let i = 0; i < li.length; i++) {\n                for (let j = 0; j < cNodes.length; j++) {\n                    let returnValue = (this.sortOrder === 'Ascending') ? cNodes[j].textContent.toUpperCase() > li[i].innerText.toUpperCase() : cNodes[j].textContent.toUpperCase() < li[i].innerText.toUpperCase();\n                    if (returnValue) {\n                        dropUl.insertBefore(li[i], cNodes[j]);\n                        break;\n                    }\n                    dropUl.insertBefore(li[i], cNodes[cNodes.length]);\n                }\n            }\n        }\n        let id = this.getId(dropLi);\n        if (this.dataType === 1) {\n            this.updateField(this.treeData, this.fields, id, 'hasChildren', true);\n            let refId = this.getId(refNode);\n            let pos = isNullOrUndefined(refId) ? this.treeData.length : this.getDataPos(this.treeData, this.fields, refId);\n            for (let j = 0; j < nodes.length; j++) {\n                if (!isNullOrUndefined(id)) {\n                    let currId = this.isNumberTypeId ? parseFloat(id) : id;\n                    setValue(this.fields.parentID, currId, nodes[j]);\n                }\n                this.treeData.splice(pos, 0, nodes[j]);\n                pos++;\n            }\n        }\n        else {\n            this.addChildData(this.treeData, this.fields, id, nodes, index);\n        }\n        this.finalizeNode(dropUl);\n    }\n    updateMapper(level) {\n        let mapper = (level === 1) ? this.fields : this.getChildFields(this.fields, level - 1, 1);\n        this.updateListProp(mapper);\n    }\n    updateListProp(mapper) {\n        let prop = this.getActualProperties(mapper);\n        this.listBaseOption.fields = prop;\n        this.listBaseOption.fields.url = prop.hasOwnProperty('navigateUrl') ? prop.navigateUrl : 'navigateUrl';\n    }\n    getDataPos(obj, mapper, id) {\n        let pos = null;\n        for (let i = 0, objlen = obj.length; i < objlen; i++) {\n            let nodeId = getValue(mapper.id, obj[i]);\n            if (obj[i] && nodeId && nodeId.toString() === id) {\n                return i;\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                let data = getValue(mapper.child, obj[i]);\n                pos = this.getDataPos(data, this.getChildMapper(mapper), id);\n                if (pos !== null) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                let items = getValue('child', obj[i]);\n                pos = this.getDataPos(items, this.getChildMapper(mapper), id);\n                if (pos !== null) {\n                    break;\n                }\n            }\n        }\n        return pos;\n    }\n    addChildData(obj, mapper, id, data, index) {\n        let updated;\n        if (isNullOrUndefined(id)) {\n            index = isNullOrUndefined(index) ? obj.length : index;\n            for (let k = 0, len = data.length; k < len; k++) {\n                obj.splice(index, 0, data[k]);\n                index++;\n            }\n            return updated;\n        }\n        for (let i = 0, objlen = obj.length; i < objlen; i++) {\n            let nodeId = getValue(mapper.id, obj[i]);\n            if (obj[i] && nodeId && nodeId.toString() === id) {\n                if ((typeof mapper.child === 'string' && (obj[i].hasOwnProperty(mapper.child) && obj[i][mapper.child] !== null)) ||\n                    ((this.fields.dataSource instanceof DataManager) && obj[i].hasOwnProperty('child'))) {\n                    let key = (typeof mapper.child === 'string') ? mapper.child : 'child';\n                    let childData = getValue(key, obj[i]);\n                    if (isNullOrUndefined(childData)) {\n                        childData = [];\n                    }\n                    index = isNullOrUndefined(index) ? childData.length : index;\n                    for (let k = 0, len = data.length; k < len; k++) {\n                        childData.splice(index, 0, data[k]);\n                        index++;\n                    }\n                }\n                else {\n                    let key = (typeof mapper.child === 'string') ? mapper.child : 'child';\n                    obj[i][key] = data;\n                }\n                return true;\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                let childObj = getValue(mapper.child, obj[i]);\n                updated = this.addChildData(childObj, this.getChildMapper(mapper), id, data, index);\n                if (updated !== undefined) {\n                    break;\n                }\n            }\n            else if ((this.fields.dataSource instanceof DataManager) && !isNullOrUndefined(getValue('child', obj[i]))) {\n                let childData = getValue('child', obj[i]);\n                updated = this.addChildData(childData, this.getChildMapper(mapper), id, data, index);\n                if (updated !== undefined) {\n                    break;\n                }\n            }\n        }\n        return updated;\n    }\n    doDisableAction(nodes) {\n        let validNodes = this.nodeType(nodes);\n        let validID = this.checkValidId(validNodes);\n        this.validArr = [];\n        for (let i = 0, len = validID.length; i < len; i++) {\n            let id = validID[i][this.fields.id].toString();\n            if (id && this.disableNode.indexOf(id) === -1) {\n                this.disableNode.push(id);\n            }\n            let liEle = this.getElement(id);\n            if (liEle) {\n                liEle.setAttribute('aria-disabled', 'true');\n                addClass([liEle], DISABLE);\n            }\n        }\n    }\n    doEnableAction(nodes) {\n        let strNodes = this.nodeType(nodes);\n        for (let i = 0, len = strNodes.length; i < len; i++) {\n            let liEle = this.getElement(strNodes[i]);\n            let id = strNodes[i];\n            if (id && this.disableNode.indexOf(id) !== -1) {\n                this.disableNode.splice(this.disableNode.indexOf(id), 1);\n            }\n            if (liEle) {\n                liEle.removeAttribute('aria-disabled');\n                removeClass([liEle], DISABLE);\n            }\n        }\n    }\n    nodeType(nodes) {\n        let validID = [];\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            let id;\n            if (typeof nodes[i] == \"string\") {\n                id = (nodes[i]) ? nodes[i].toString() : null;\n            }\n            else if (typeof nodes[i] === \"object\") {\n                id = nodes[i] ? nodes[i].getAttribute(\"data-uid\").toString() : null;\n            }\n            if (validID.indexOf(id) == -1) {\n                validID.push(id);\n            }\n        }\n        return validID;\n    }\n    checkValidId(node) {\n        if (this.dataType === 1) {\n            this.validArr = this.treeData.filter((data) => {\n                return node.indexOf(data[this.fields.id] ? data[this.fields.id].toString() : null) !== -1;\n            });\n        }\n        else if (this.dataType === 2) {\n            for (let k = 0; k < this.treeData.length; k++) {\n                let id = this.treeData[k][this.fields.id] ? this.treeData[k][this.fields.id].toString() : null;\n                if (node.indexOf(id) !== -1) {\n                    this.validArr.push(this.treeData[k]);\n                }\n                let childItems = getValue(this.fields.child.toString(), this.treeData[k]);\n                if (childItems) {\n                    this.filterNestedChild(childItems, node);\n                }\n            }\n        }\n        return this.validArr;\n    }\n    filterNestedChild(treeData, nodes) {\n        for (let k = 0; k < treeData.length; k++) {\n            let id = treeData[k][this.fields.id] ? treeData[k][this.fields.id].toString() : null;\n            if (nodes.indexOf(id) !== -1) {\n                this.validArr.push(treeData[k]);\n            }\n            let childItems = getValue(this.fields.child.toString(), treeData[k]);\n            if (childItems) {\n                this.filterNestedChild(childItems, nodes);\n            }\n        }\n    }\n    setTouchClass() {\n        let ele = closest(this.element, '.' + BIGGER);\n        this.touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n    }\n    updatePersistProp() {\n        this.removeField(this.treeData, this.fields, ['selected', 'expanded']);\n        let sleNodes = this.selectedNodes;\n        for (let l = 0, slelen = sleNodes.length; l < slelen; l++) {\n            this.updateField(this.treeData, this.fields, sleNodes[l], 'selected', true);\n        }\n        let enodes = this.expandedNodes;\n        for (let k = 0, nodelen = enodes.length; k < nodelen; k++) {\n            this.updateField(this.treeData, this.fields, enodes[k], 'expanded', true);\n        }\n        if (this.showCheckBox) {\n            this.removeField(this.treeData, this.fields, ['isChecked']);\n            let cnodes = this.checkedNodes;\n            for (let m = 0, nodelen = cnodes.length; m < nodelen; m++) {\n                this.updateField(this.treeData, this.fields, cnodes[m], 'isChecked', true);\n            }\n        }\n    }\n    removeField(obj, mapper, names) {\n        if (isNullOrUndefined(obj) || isNullOrUndefined(mapper)) {\n            return;\n        }\n        for (let i = 0, objlen = obj.length; i < objlen; i++) {\n            for (let j = 0; j < names.length; j++) {\n                let field = this.getMapperProp(mapper, names[j]);\n                if (!isNullOrUndefined(obj[i][field])) {\n                    delete obj[i][field];\n                }\n            }\n            if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                this.removeField(getValue(mapper.child, obj[i]), this.getChildMapper(mapper), names);\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                this.removeField(getValue('child', obj[i]), this.getChildMapper(mapper), names);\n            }\n        }\n    }\n    getMapperProp(mapper, fieldName) {\n        switch (fieldName) {\n            case 'selected':\n                return !isNullOrUndefined(mapper.selected) ? mapper.selected : 'selected';\n            case 'expanded':\n                return !isNullOrUndefined(mapper.expanded) ? mapper.expanded : 'expanded';\n            case 'isChecked':\n                return !isNullOrUndefined(mapper.isChecked) ? mapper.isChecked : 'isChecked';\n            case 'hasChildren':\n                return !isNullOrUndefined(mapper.hasChildren) ? mapper.hasChildren : 'hasChildren';\n            default:\n                return fieldName;\n        }\n    }\n    updateField(obj, mapper, id, key, value) {\n        if (isNullOrUndefined(id)) {\n            return;\n        }\n        else if (this.dataType === 1) {\n            let newId = this.isNumberTypeId ? parseFloat(id) : id;\n            let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.id, 'equal', newId, false));\n            setValue(this.getMapperProp(mapper, key), value, resultData[0]);\n        }\n        else {\n            this.updateChildField(obj, mapper, id, key, value);\n        }\n    }\n    updateChildField(obj, mapper, id, key, value, remove$$1) {\n        let removedData;\n        if (isNullOrUndefined(obj)) {\n            return removedData;\n        }\n        for (let i = 0, objlen = obj.length; i < objlen; i++) {\n            let nodeId = getValue(mapper.id, obj[i]);\n            if (obj[i] && nodeId && nodeId.toString() === id) {\n                if (remove$$1) {\n                    removedData = obj.splice(i, 1);\n                }\n                else {\n                    setValue(this.getMapperProp(mapper, key), value, obj[i]);\n                    removedData = [];\n                }\n                return removedData;\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                let childData = getValue(mapper.child, obj[i]);\n                removedData = this.updateChildField(childData, this.getChildMapper(mapper), id, key, value, remove$$1);\n                if (removedData !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                let childItems = getValue('child', obj[i]);\n                removedData = this.updateChildField(childItems, this.getChildMapper(mapper), id, key, value, remove$$1);\n                if (removedData !== undefined) {\n                    break;\n                }\n            }\n        }\n        return removedData;\n    }\n    triggerEvent() {\n        this.renderReactTemplates();\n        let eventArgs = { data: this.treeData };\n        this.trigger('dataSourceChanged', eventArgs);\n    }\n    wireInputEvents(inpEle) {\n        EventHandler.add(inpEle, 'blur', this.inputFocusOut, this);\n    }\n    wireEditingEvents(toBind) {\n        if (toBind && !this.disabled) {\n            let proxy = this;\n            this.touchEditObj = new Touch(this.element, {\n                tap: (e) => {\n                    if (this.isDoubleTapped(e) && e.tapCount === 2) {\n                        e.originalEvent.preventDefault();\n                        proxy.editingHandler(e.originalEvent);\n                    }\n                }\n            });\n        }\n        else {\n            if (this.touchEditObj) {\n                this.touchEditObj.destroy();\n            }\n        }\n    }\n    wireClickEvent(toBind) {\n        if (toBind) {\n            let proxy = this;\n            this.touchClickObj = new Touch(this.element, {\n                tap: (e) => {\n                    proxy.clickHandler(e);\n                }\n            });\n        }\n        else {\n            if (this.touchClickObj) {\n                this.touchClickObj.destroy();\n            }\n        }\n    }\n    wireExpandOnEvent(toBind) {\n        if (toBind) {\n            let proxy = this;\n            this.touchExpandObj = new Touch(this.element, {\n                tap: (e) => {\n                    if ((this.expandOnType === 'Click' || (this.expandOnType === 'DblClick' && this.isDoubleTapped(e) && e.tapCount === 2))\n                        && e.originalEvent.which !== 3) {\n                        proxy.expandHandler(e);\n                    }\n                }\n            });\n        }\n        else {\n            if (this.touchExpandObj) {\n                this.touchExpandObj.destroy();\n            }\n        }\n    }\n    mouseDownHandler(e) {\n        this.mouseDownStatus = true;\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (e.ctrlKey && this.allowMultiSelection) {\n            EventHandler.add(this.element, 'contextmenu', this.preventContextMenu, this);\n        }\n    }\n    ;\n    preventContextMenu(e) {\n        e.preventDefault();\n    }\n    wireEvents() {\n        EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);\n        this.wireClickEvent(true);\n        if (this.expandOnType !== 'None') {\n            this.wireExpandOnEvent(true);\n        }\n        EventHandler.add(this.element, 'focus', this.focusIn, this);\n        EventHandler.add(this.element, 'blur', this.focusOut, this);\n        EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.element, 'mouseout', this.onMouseLeave, this);\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown',\n        });\n    }\n    unWireEvents() {\n        EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);\n        this.wireClickEvent(false);\n        this.wireExpandOnEvent(false);\n        EventHandler.remove(this.element, 'focus', this.focusIn);\n        EventHandler.remove(this.element, 'blur', this.focusOut);\n        EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.element, 'mouseout', this.onMouseLeave);\n        if (!this.disabled) {\n            this.keyboardModule.destroy();\n        }\n    }\n    parents(element, selector) {\n        let matched = [];\n        let el = element.parentNode;\n        while (!isNullOrUndefined(el)) {\n            if (matches(el, selector)) {\n                matched.push(el);\n            }\n            el = el.parentNode;\n        }\n        return matched;\n    }\n    isDoubleTapped(e) {\n        let target = e.originalEvent.target;\n        let secondTap;\n        if (target && e.tapCount) {\n            if (e.tapCount === 1) {\n                this.firstTap = closest(target, '.' + LISTITEM);\n            }\n            else if (e.tapCount === 2) {\n                secondTap = closest(target, '.' + LISTITEM);\n            }\n        }\n        return (this.firstTap === secondTap);\n    }\n    isDescendant(parent, child) {\n        let node = child.parentNode;\n        while (!isNullOrUndefined(node)) {\n            if (node === parent) {\n                return true;\n            }\n            node = node.parentNode;\n        }\n        return false;\n    }\n    showSpinner(element) {\n        addClass([element], LOAD);\n        createSpinner({\n            target: element,\n            width: Browser.isDevice ? 16 : 14\n        }, this.createElement);\n        showSpinner(element);\n    }\n    hideSpinner(element) {\n        hideSpinner(element);\n        element.innerHTML = '';\n        removeClass([element], LOAD);\n    }\n    setCheckedNodes(nodes) {\n        nodes = JSON.parse(JSON.stringify(nodes));\n        this.uncheckAll(this.checkedNodes);\n        this.setIndeterminate(nodes);\n        if (nodes.length > 0) {\n            this.checkAll(nodes);\n        }\n    }\n    /**\n     * Checks whether the checkedNodes entered are valid and sets the valid checkedNodes while changing via setmodel\n     */\n    setValidCheckedNode(node) {\n        if (this.dataType === 1) {\n            let mapper = this.fields;\n            let resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper.id, 'equal', node, true));\n            if (resultData[0]) {\n                this.setChildCheckState(resultData, node, resultData[0]);\n                if (this.autoCheck) {\n                    let parent = resultData[0][this.fields.parentID] ? resultData[0][this.fields.parentID].toString() : null;\n                    let childNodes = this.getChildNodes(this.treeData, parent);\n                    let count = 0;\n                    for (let len = 0; len < childNodes.length; len++) {\n                        let childId = childNodes[len][this.fields.id].toString();\n                        if (this.checkedNodes.indexOf(childId) !== -1) {\n                            count++;\n                        }\n                    }\n                    if (count === childNodes.length && this.checkedNodes.indexOf(parent) === -1 && parent) {\n                        this.checkedNodes.push(parent);\n                    }\n                }\n            }\n        }\n        else if (this.dataType === 2) {\n            for (let a = 0; a < this.treeData.length; a++) {\n                let index = this.treeData[a][this.fields.id] ? this.treeData[a][this.fields.id].toString() : '';\n                if (index === node && this.checkedNodes.indexOf(node) === -1) {\n                    this.checkedNodes.push(node);\n                    break;\n                }\n                let childItems = getValue(this.fields.child.toString(), this.treeData[a]);\n                if (childItems) {\n                    this.setChildCheckState(childItems, node, this.treeData[a]);\n                }\n            }\n        }\n    }\n    /**\n     * Checks whether the checkedNodes entered are valid and sets the valid checkedNodes while changing via setmodel(for hierarchical DS)\n     */\n    setChildCheckState(childItems, node, treeData) {\n        let checkedParent;\n        let count = 0;\n        if (this.dataType === 1) {\n            if (treeData) {\n                checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : null;\n            }\n            for (let index = 0; index < childItems.length; index++) {\n                let checkNode = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : null;\n                if (treeData && checkedParent && this.autoCheck) {\n                    if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkNode) === -1) {\n                        this.checkedNodes.push(checkNode);\n                    }\n                }\n                if (checkNode === node && this.checkedNodes.indexOf(node) === -1) {\n                    this.checkedNodes.push(node);\n                }\n                let subChildItems = this.getChildNodes(this.treeData, checkNode);\n                if (subChildItems) {\n                    this.setChildCheckState(subChildItems, node, treeData);\n                }\n            }\n        }\n        else {\n            if (treeData) {\n                checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : '';\n            }\n            for (let index = 0; index < childItems.length; index++) {\n                let checkedChild = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : '';\n                if (treeData && checkedParent && this.autoCheck) {\n                    if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1) {\n                        this.checkedNodes.push(checkedChild);\n                    }\n                }\n                if (checkedChild === node && this.checkedNodes.indexOf(node) === -1) {\n                    this.checkedNodes.push(node);\n                }\n                let subChildItems = getValue(this.fields.child.toString(), childItems[index]);\n                if (subChildItems) {\n                    this.setChildCheckState(subChildItems, node, childItems[index]);\n                }\n                if (this.checkedNodes.indexOf(checkedChild) !== -1 && this.autoCheck) {\n                    count++;\n                }\n                if (count === childItems.length && this.checkedNodes.indexOf(checkedParent) === -1 && this.autoCheck) {\n                    this.checkedNodes.push(checkedParent);\n                }\n            }\n        }\n    }\n    setIndeterminate(nodes) {\n        for (let i = 0; i < nodes.length; i++) {\n            this.setValidCheckedNode(nodes[i]);\n        }\n    }\n    updatePosition(id, newData, isRefreshChild, childValue) {\n        if (this.dataType === 1) {\n            let pos = this.getDataPos(this.treeData, this.fields, id);\n            this.treeData.splice(pos, 1, newData);\n            if (isRefreshChild) {\n                this.removeChildNodes(id);\n                for (let j = 0; j < childValue.length; j++) {\n                    this.treeData.splice(pos, 0, childValue[j]);\n                    pos++;\n                }\n            }\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n        }\n        else {\n            this.updateChildPosition(this.treeData, this.fields, id, [newData], undefined);\n        }\n    }\n    updateChildPosition(treeData, mapper, currID, newData, index) {\n        let found;\n        for (let i = 0, objlen = treeData.length; i < objlen; i++) {\n            let nodeId = getValue(mapper.id, treeData[i]);\n            if (treeData[i] && nodeId && nodeId.toString() === currID) {\n                treeData[i] = newData[0];\n                return true;\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, treeData[i]))) {\n                let childObj = getValue(mapper.child, treeData[i]);\n                found = this.updateChildPosition(childObj, this.getChildMapper(mapper), currID, newData, index);\n                if (found !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', treeData[i]))) {\n                let childData = getValue('child', treeData[i]);\n                found = this.updateChildPosition(childData, this.getChildMapper(mapper), currID, newData, index);\n                if (found !== undefined) {\n                    break;\n                }\n            }\n        }\n        return found;\n    }\n    dynamicState() {\n        this.setDragAndDrop(this.allowDragAndDrop);\n        this.wireEditingEvents(this.allowEditing);\n        if (!this.disabled) {\n            this.wireEvents();\n            this.setRipple();\n        }\n        else {\n            this.unWireEvents();\n            this.rippleFn();\n            this.rippleIconFn();\n        }\n    }\n    crudOperation(operation, nodes, target, newText, newNode, index, prevent) {\n        let data = this.fields.dataSource;\n        let matchedArr = [];\n        let query = this.getQuery(this.fields);\n        let key = this.fields.id;\n        let crud;\n        let changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        let nodesID = [];\n        if (nodes) {\n            nodesID = this.nodeType(nodes);\n        }\n        else if (target) {\n            if (typeof target == \"string\") {\n                nodesID[0] = target.toString();\n            }\n            else if (typeof target === \"object\") {\n                nodesID[0] = target.getAttribute(\"data-uid\").toString();\n            }\n        }\n        for (let i = 0, len = nodesID.length; i < len; i++) {\n            let liEle = this.getElement(nodesID[i]);\n            if (isNullOrUndefined(liEle)) {\n                continue;\n            }\n            let removedData = this.getNodeObject(nodesID[i]);\n            matchedArr.push(removedData);\n        }\n        switch (operation) {\n            case 'delete':\n                if (nodes.length == 1) {\n                    crud = data.remove(key, matchedArr[0], query.fromTable, query);\n                }\n                else {\n                    changes.deletedRecords = matchedArr;\n                    crud = data.saveChanges(changes, key, query.fromTable, query);\n                }\n                crud.then((e) => this.deleteSuccess(nodesID))\n                    .catch((e) => this.dmFailure(e));\n                break;\n            case 'update':\n                matchedArr[0][this.fields.text] = newText;\n                crud = data.update(key, matchedArr[0], query.fromTable, query);\n                crud.then((e) => this.editSucess(target, newText, prevent))\n                    .catch((e) => this.dmFailure(e, target, prevent));\n                break;\n            case 'insert':\n                if (newNode.length == 1) {\n                    crud = data.insert(newNode[0], query.fromTable, query);\n                }\n                else {\n                    let arr = [];\n                    for (let i = 0, len = newNode.length; i < len; i++) {\n                        arr.push(newNode[i]);\n                    }\n                    changes.addedRecords = arr;\n                    crud = data.saveChanges(changes, key, query.fromTable, query);\n                }\n                crud.then((e) => {\n                    let dropLi = this.getElement(target);\n                    this.addSuccess(newNode, dropLi, index);\n                    this.preventExpand = false;\n                }).catch((e) => this.dmFailure(e));\n                break;\n        }\n    }\n    deleteSuccess(nodes) {\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            let liEle = this.getElement(nodes[i]);\n            if (isNullOrUndefined(liEle)) {\n                continue;\n            }\n            this.removeNode(liEle);\n        }\n        this.updateInstance();\n        if (this.dataType === 1) {\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n        }\n        this.triggerEvent();\n    }\n    editSucess(target, newText, prevent) {\n        let liEle = this.getElement(target);\n        let txtEle = select('.' + LISTTEXT, liEle);\n        this.appendNewText(liEle, txtEle, newText, prevent);\n    }\n    addSuccess(nodes, dropLi, index) {\n        let dropUl;\n        let icon = dropLi ? dropLi.querySelector('.' + ICON) : null;\n        let proxy = this;\n        if (dropLi && icon && icon.classList.contains(EXPANDABLE) &&\n            dropLi.querySelector('.' + PARENTITEM) === null) {\n            proxy.renderChildNodes(dropLi, null, () => {\n                dropUl = dropLi.querySelector('.' + PARENTITEM);\n                proxy.addGivenNodes(nodes, dropLi, index, true, dropUl);\n                proxy.triggerEvent();\n            });\n        }\n        else {\n            this.addGivenNodes(nodes, dropLi, index, true);\n            this.triggerEvent();\n        }\n    }\n    dmFailure(e, target, prevent) {\n        if (target) {\n            this.updatePreviousText(target, prevent);\n        }\n        this.trigger('actionFailure', { error: e });\n    }\n    updatePreviousText(target, prevent) {\n        let liEle = this.getElement(target);\n        let txtEle = select('.' + LISTTEXT, liEle);\n        this.updateText(liEle, txtEle, this.oldText, prevent);\n    }\n    /**\n     * Called internally if any of the property value changed.\n     * @param  {TreeView} newProp\n     * @param  {TreeView} oldProp\n     * @returns void\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (let prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'allowDragAndDrop':\n                    this.setDragAndDrop(this.allowDragAndDrop);\n                    break;\n                case 'dragArea':\n                    if (this.allowDragAndDrop) {\n                        this.dragObj.dragArea = this.dragArea;\n                    }\n                    break;\n                case 'allowEditing':\n                    this.wireEditingEvents(this.allowEditing);\n                    break;\n                case 'allowMultiSelection':\n                    if (this.selectedNodes.length > 1) {\n                        let sNode = this.getElement(this.selectedNodes[0]);\n                        this.isLoaded = false;\n                        this.removeSelectAll();\n                        this.selectNode(sNode, null);\n                        this.isLoaded = true;\n                    }\n                    this.setMultiSelect(this.allowMultiSelection);\n                    this.addMultiSelect(this.allowMultiSelection);\n                    break;\n                case 'allowTextWrap':\n                    this.setTextWrap();\n                    this.updateWrap();\n                    break;\n                case 'checkedNodes':\n                    if (this.showCheckBox) {\n                        this.checkedNodes = oldProp.checkedNodes;\n                        this.setCheckedNodes(newProp.checkedNodes);\n                    }\n                    break;\n                case 'autoCheck':\n                    if (this.showCheckBox) {\n                        this.autoCheck = newProp.autoCheck;\n                        this.ensureIndeterminate();\n                    }\n                    break;\n                case 'cssClass':\n                    this.setCssClass(oldProp.cssClass, newProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'expandedNodes':\n                    this.isAnimate = false;\n                    this.setProperties({ expandedNodes: [] }, true);\n                    this.collapseAll();\n                    this.isInitalExpand = true;\n                    this.setProperties({ expandedNodes: isNullOrUndefined(newProp.expandedNodes) ? [] : newProp.expandedNodes }, true);\n                    this.doExpandAction();\n                    this.isInitalExpand = false;\n                    this.isAnimate = true;\n                    break;\n                case 'expandOn':\n                    this.wireExpandOnEvent(false);\n                    this.setExpandOnType();\n                    if (this.expandOnType !== 'None' && !this.disabled) {\n                        this.wireExpandOnEvent(true);\n                    }\n                    break;\n                case 'disabled':\n                    this.setDisabledMode();\n                    this.dynamicState();\n                    break;\n                case 'fields':\n                    this.isAnimate = false;\n                    this.isFieldChange = true;\n                    this.initialRender = true;\n                    this.reRenderNodes();\n                    this.initialRender = false;\n                    this.isAnimate = true;\n                    this.isFieldChange = false;\n                    break;\n                case 'fullRowSelect':\n                    this.setFullRow(this.fullRowSelect);\n                    this.addFullRow(this.fullRowSelect);\n                    if (this.allowTextWrap) {\n                        this.setTextWrap();\n                        this.updateWrap();\n                    }\n                    break;\n                case 'loadOnDemand':\n                    if (this.loadOnDemand === false && !this.onLoaded) {\n                        let nodes = this.element.querySelectorAll('li');\n                        let i = 0;\n                        while (i < nodes.length) {\n                            if (nodes[i].getAttribute('aria-expanded') !== 'true') {\n                                this.renderChildNodes(nodes[i], true, null, true);\n                            }\n                            i++;\n                        }\n                        this.onLoaded = true;\n                    }\n                    break;\n                case 'nodeTemplate':\n                    this.hasTemplate = false;\n                    this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);\n                    this.reRenderNodes();\n                    break;\n                case 'selectedNodes':\n                    this.removeSelectAll();\n                    this.setProperties({ selectedNodes: newProp.selectedNodes }, true);\n                    this.doSelectionAction();\n                    break;\n                case 'showCheckBox':\n                    this.reRenderNodes();\n                    break;\n                case 'sortOrder':\n                    this.reRenderNodes();\n                    break;\n                case 'fullRowNavigable':\n                    this.setProperties({ fullRowNavigable: newProp.fullRowNavigable }, true);\n                    this.listBaseOption.itemNavigable = newProp.fullRowNavigable;\n                    this.reRenderNodes();\n                    break;\n            }\n        }\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     */\n    destroy() {\n        this.clearTemplate();\n        this.element.removeAttribute('aria-activedescendant');\n        this.element.removeAttribute('tabindex');\n        this.unWireEvents();\n        this.wireEditingEvents(false);\n        if (!this.disabled) {\n            this.rippleFn();\n            this.rippleIconFn();\n        }\n        this.setCssClass(this.cssClass, null);\n        this.setDragAndDrop(false);\n        this.setFullRow(false);\n        if (this.ulElement && this.ulElement.parentElement) {\n            this.ulElement.parentElement.removeChild(this.ulElement);\n        }\n        super.destroy();\n    }\n    /**\n     * Adds the collection of TreeView nodes based on target and index position. If target node is not specified,\n     * then the nodes are added as children of the given parentID or in the root level of TreeView.\n     * @param  { { [key: string]: Object }[] } nodes - Specifies the array of JSON data that has to be added.\n     * @param  { string | Element } target - Specifies ID of TreeView node/TreeView node as target element.\n     * @param  { number } index - Specifies the index to place the newly added nodes in the target element.\n     * @param { boolean } preventTargetExpand - If set to true, the target parent node will be prevented from auto expanding.\n     */\n    addNodes(nodes, target, index, preventTargetExpand) {\n        if (isNullOrUndefined(nodes)) {\n            return;\n        }\n        nodes = JSON.parse(JSON.stringify(nodes));\n        let dropLi = this.getElement(target);\n        this.preventExpand = preventTargetExpand;\n        if (this.fields.dataSource instanceof DataManager) {\n            if (!this.isOffline) {\n                this.crudOperation('insert', null, target, null, nodes, index, this.preventExpand);\n            }\n            else {\n                this.addSuccess(nodes, dropLi, index);\n            }\n        }\n        else if (this.dataType === 2) {\n            this.addGivenNodes(nodes, dropLi, index);\n        }\n        else {\n            if (dropLi) {\n                this.addGivenNodes(nodes, dropLi, index);\n            }\n            else {\n                nodes = this.getSortedData(nodes);\n                for (let i = 0; i < nodes.length; i++) {\n                    let pid = getValue(this.fields.parentID, nodes[i]);\n                    dropLi = pid ? this.getElement(pid.toString()) : pid;\n                    this.addGivenNodes([nodes[i]], dropLi, index);\n                }\n            }\n            this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);\n        }\n        this.updateCheckedStateFromDS();\n        if (this.showCheckBox && dropLi) {\n            this.ensureParentCheckState(dropLi);\n        }\n        if ((this.fields.dataSource instanceof DataManager === false)) {\n            this.preventExpand = false;\n            this.triggerEvent();\n        }\n    }\n    /**\n     * Instead of clicking on the TreeView node for editing, we can enable it by using\n     * `beginEdit` property. On passing the node ID or element through this property, the edit textBox\n     * will be created for the particular node thus allowing us to edit it.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n     */\n    beginEdit(node) {\n        let ele = this.getElement(node);\n        if (isNullOrUndefined(ele) || this.disabled) {\n            return;\n        }\n        this.createTextbox(ele, null);\n    }\n    /**\n     * Checks all the unchecked nodes. You can also check specific nodes by passing array of unchecked nodes\n     * as argument to this method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     */\n    checkAll(nodes) {\n        if (this.showCheckBox) {\n            this.doCheckBoxAction(nodes, true);\n        }\n    }\n    /**\n     * Collapses all the expanded TreeView nodes. You can collapse specific nodes by passing array of nodes as argument to this method.\n     * You can also collapse all the nodes excluding the hidden nodes by setting **excludeHiddenNodes** to true. If you want to collapse\n     * a specific level of nodes, set **level** as argument to collapseAll method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/ array of TreeView node.\n     * @param  {number} level - TreeView nodes will collapse up to the given level.\n     * @param  {boolean} excludeHiddenNodes - Whether or not to exclude hidden nodes of TreeView when collapsing all nodes.\n     */\n    collapseAll(nodes, level, excludeHiddenNodes) {\n        if (!isNullOrUndefined(nodes)) {\n            this.doGivenAction(nodes, COLLAPSIBLE, false);\n        }\n        else {\n            if (level > 0) {\n                this.collapseByLevel(select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n            }\n            else {\n                this.collapseAllNodes(excludeHiddenNodes);\n            }\n        }\n    }\n    /**\n     * Disables the collection of nodes by passing the ID of nodes or node elements in the array.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n     */\n    disableNodes(nodes) {\n        if (!isNullOrUndefined(nodes)) {\n            this.doDisableAction(nodes);\n        }\n    }\n    /**\n     * Enables the collection of disabled nodes by passing the ID of nodes or node elements in the array.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n     */\n    enableNodes(nodes) {\n        if (!isNullOrUndefined(nodes)) {\n            this.doEnableAction(nodes);\n        }\n    }\n    /**\n     * Ensures visibility of the TreeView node by using node ID or node element.\n     * When many TreeView nodes are present and we need to find a particular node, `ensureVisible` property\n     * helps bring the node to visibility by expanding the TreeView and scrolling to the specific node.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView nodes.\n     */\n    ensureVisible(node) {\n        let liEle = this.getElement(node);\n        if (isNullOrUndefined(liEle)) {\n            return;\n        }\n        let parents = this.parents(liEle, '.' + LISTITEM);\n        this.expandAll(parents);\n        setTimeout(() => { liEle.scrollIntoView(true); }, 450);\n    }\n    /**\n     * Expands all the collapsed TreeView nodes. You can expand the specific nodes by passing the array of collapsed nodes\n     * as argument to this method. You can also expand all the collapsed nodes by excluding the hidden nodes by setting\n     * **excludeHiddenNodes** to true to this method. To expand a specific level of nodes, set **level** as argument to expandAll method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView nodes.\n     * @param  {number} level - TreeView nodes will expand up to the given level.\n     * @param  {boolean} excludeHiddenNodes - Whether or not to exclude hidden nodes when expanding all nodes.\n     */\n    expandAll(nodes, level, excludeHiddenNodes) {\n        if (!isNullOrUndefined(nodes)) {\n            this.doGivenAction(nodes, EXPANDABLE, true);\n        }\n        else {\n            if (level > 0) {\n                this.expandByLevel(select('.' + PARENTITEM, this.element), level, excludeHiddenNodes);\n            }\n            else {\n                this.expandAllNodes(excludeHiddenNodes);\n            }\n        }\n    }\n    /**\n     * Gets all the checked nodes including child, whether it is loaded or not.\n     */\n    getAllCheckedNodes() {\n        let checkNodes = this.checkedNodes;\n        return checkNodes;\n    }\n    /**\n    * Gets all the disabled nodes including child, whether it is loaded or not.\n    */\n    getDisabledNodes() {\n        let disabledNodes = this.disableNode;\n        return disabledNodes;\n    }\n    /**\n     * Get the node's data such as id, text, parentID, selected, isChecked, and expanded by passing the node element or it's ID.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n     */\n    getNode(node) {\n        let ele = this.getElement(node);\n        return this.getNodeData(ele, true);\n    }\n    /**\n     * To get the updated data source of TreeView after performing some operation like drag and drop, node editing,\n     * node selecting/unSelecting, node expanding/collapsing, node checking/unChecking, adding and removing node.\n     * * If you pass the ID of TreeView node as arguments for this method then it will return the updated data source\n     * of the corresponding node otherwise it will return the entire updated data source of TreeView.\n     * * The updated data source also contains custom attributes if you specified in data source.\n     * @param  {string | Element} node - Specifies ID of TreeView node/TreeView node.\n     * @isGenericType true\n     */\n    getTreeData(node) {\n        let id = this.getId(node);\n        this.updatePersistProp();\n        if (isNullOrUndefined(id)) {\n            return this.treeData;\n        }\n        else {\n            let data = this.getNodeObject(id);\n            return isNullOrUndefined(data) ? [] : [data];\n        }\n    }\n    /**\n     * Moves the collection of nodes within the same TreeView based on target or its index position.\n     * @param  {string[] | Element[]} sourceNodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     * @param  {string | Element} target - Specifies ID of TreeView node/TreeView node as target element.\n     * @param  {number} index - Specifies the index to place the moved nodes in the target element.\n     * @param { boolean } preventTargetExpand - If set to true, the target parent node will be prevented from auto expanding.\n     */\n    moveNodes(sourceNodes, target, index, preventTargetExpand) {\n        let dropLi = this.getElement(target);\n        if (isNullOrUndefined(dropLi)) {\n            return;\n        }\n        for (let i = 0; i < sourceNodes.length; i++) {\n            let dragLi = this.getElement(sourceNodes[i]);\n            if (isNullOrUndefined(dragLi) || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {\n                continue;\n            }\n            this.preventExpand = preventTargetExpand;\n            this.dropAsChildNode(dragLi, dropLi, this, index);\n        }\n        if (this.fields.dataSource instanceof DataManager === false) {\n            this.preventExpand = false;\n        }\n        this.triggerEvent();\n    }\n    /**\n     * Refreshes a particular node of the TreeView.\n     * @param  {string | Element} target - Specifies the ID of TreeView node or TreeView node as target element.\n     * @param  {{ [key: string]: Object }[]} newData - Specifies the new data of TreeView node.\n     */\n    refreshNode(target, newData) {\n        if (isNullOrUndefined(target) || isNullOrUndefined(newData)) {\n            return;\n        }\n        let id;\n        let isRefreshChild = false;\n        if (this.dataType == 1 && newData.length > 1) {\n            isRefreshChild = true;\n        }\n        else if (this.dataType == 2 && newData.length === 1) {\n            let updatedChildValue = getValue(this.fields.child.toString(), newData[0]);\n            if (!isNullOrUndefined(updatedChildValue)) {\n                isRefreshChild = true;\n            }\n        }\n        let liEle = this.getElement(target);\n        id = liEle ? liEle.getAttribute('data-uid') : ((target) ? target.toString() : null);\n        this.refreshData = this.getNodeObject(id);\n        newData = JSON.parse(JSON.stringify(newData));\n        /* eslint-disable */\n        let newNodeData;\n        let parentData;\n        if (this.dataType == 1 && isRefreshChild) {\n            for (let k = 0; k < newData.length; k++) {\n                if (isNullOrUndefined(newData[k][this.fields.parentID])) {\n                    parentData = newData[k];\n                    newData.splice(k, 1);\n                    break;\n                }\n            }\n            newNodeData = extend({}, this.refreshData, parentData);\n        }\n        else {\n            newNodeData = extend({}, this.refreshData, newData[0]);\n        }\n        if (isNullOrUndefined(liEle)) {\n            this.updatePosition(id, newNodeData, isRefreshChild, newData);\n            return;\n        }\n        this.isRefreshed = true;\n        let level = parseFloat(liEle.getAttribute('aria-level'));\n        let newliEle = ListBase.createListItemFromJson(this.createElement, [newNodeData], this.listBaseOption, level);\n        let ul = select('.' + PARENTITEM, liEle);\n        let childItems = getValue(this.fields.child.toString(), newNodeData);\n        if ((isRefreshChild && ul) || (isRefreshChild && !isNullOrUndefined(childItems))) {\n            let parentEle = liEle.parentElement;\n            let index = Array.prototype.indexOf.call(parentEle.childNodes, liEle);\n            remove(liEle);\n            parentEle.insertBefore(newliEle[0], parentEle.childNodes[index]);\n            this.updatePosition(id, newNodeData, isRefreshChild, newData);\n            if (isRefreshChild && ul) {\n                this.expandAll([id]);\n            }\n        }\n        else {\n            let txtEle = select('.' + TEXTWRAP, liEle);\n            let newTextEle = select('.' + TEXTWRAP, newliEle[0]);\n            let icon = select('div.' + ICON, txtEle);\n            let newIcon = select('div.' + ICON, newTextEle);\n            if (icon && newIcon) {\n                if (newIcon.classList.contains(EXPANDABLE) && icon.classList.contains(COLLAPSIBLE)) {\n                    removeClass([newIcon], EXPANDABLE);\n                    addClass([newIcon], COLLAPSIBLE);\n                }\n                else if (newIcon.classList.contains(COLLAPSIBLE) && icon.classList.contains(EXPANDABLE)) {\n                    removeClass([newIcon], COLLAPSIBLE);\n                    addClass([newIcon], EXPANDABLE);\n                }\n                else if (icon.classList.contains('interaction')) {\n                    addClass([newIcon], 'interaction');\n                }\n            }\n            remove(txtEle);\n            let fullEle = select('.' + FULLROW, liEle);\n            fullEle.parentNode.insertBefore(newTextEle, fullEle.nextSibling);\n            this.updatePosition(id, newNodeData, isRefreshChild, newData);\n        }\n        liEle = this.getElement(target);\n        if (newNodeData[this.fields.tooltip]) {\n            liEle.setAttribute(\"title\", newNodeData[this.fields.tooltip]);\n        }\n        if (newNodeData.hasOwnProperty(this.fields.htmlAttributes) && newNodeData[this.fields.htmlAttributes]) {\n            let attr = {};\n            merge(attr, newNodeData[this.fields.htmlAttributes]);\n            if (attr.class) {\n                addClass([liEle], attr.class.split(' '));\n                delete attr.class;\n            }\n            else {\n                attributes(liEle, attr);\n            }\n        }\n        if (this.selectedNodes.indexOf(id) !== -1) {\n            liEle.setAttribute('aria-selected', 'true');\n            addClass([liEle], ACTIVE);\n        }\n        this.isRefreshed = false;\n        this.triggerEvent();\n    }\n    /**\n     * Removes the collection of TreeView nodes by passing the array of node details as argument to this method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     */\n    removeNodes(nodes) {\n        if (!isNullOrUndefined(nodes)) {\n            if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n                this.crudOperation('delete', nodes);\n            }\n            else {\n                this.deleteSuccess(nodes);\n            }\n        }\n    }\n    /**\n     * Replaces the text of the TreeView node with the given text.\n     * @param  {string | Element} target - Specifies ID of TreeView node/TreeView node as target element.\n     * @param  {string} newText - Specifies the new text of TreeView node.\n     */\n    updateNode(target, newText) {\n        if (isNullOrUndefined(target) || isNullOrUndefined(newText) || !this.allowEditing) {\n            return;\n        }\n        let liEle = this.getElement(target);\n        if (isNullOrUndefined(liEle)) {\n            return;\n        }\n        let txtEle = select('.' + LISTTEXT, liEle);\n        this.updateOldText(liEle);\n        let eventArgs = this.getEditEvent(liEle, null, null);\n        this.trigger('nodeEditing', eventArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                if (this.fields.dataSource instanceof DataManager && !this.isOffline) {\n                    this.crudOperation('update', null, target, newText, null, null, false);\n                }\n                else {\n                    this.appendNewText(liEle, txtEle, newText, false);\n                }\n            }\n        });\n    }\n    /**\n     * Unchecks all the checked nodes. You can also uncheck the specific nodes by passing array of checked nodes\n     * as argument to this method.\n     * @param  {string[] | Element[]} nodes - Specifies the array of TreeView nodes ID/array of TreeView node.\n     */\n    uncheckAll(nodes) {\n        if (this.showCheckBox) {\n            this.doCheckBoxAction(nodes, false);\n        }\n    }\n};\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"allowDragAndDrop\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"allowEditing\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"allowMultiSelection\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"allowTextWrap\", void 0);\n__decorate$8([\n    Complex({}, NodeAnimationSettings)\n], TreeView.prototype, \"animation\", void 0);\n__decorate$8([\n    Property()\n], TreeView.prototype, \"checkedNodes\", void 0);\n__decorate$8([\n    Property('')\n], TreeView.prototype, \"cssClass\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"disabled\", void 0);\n__decorate$8([\n    Property(null)\n], TreeView.prototype, \"dragArea\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"enablePersistence\", void 0);\n__decorate$8([\n    Property()\n], TreeView.prototype, \"expandedNodes\", void 0);\n__decorate$8([\n    Property('Auto')\n], TreeView.prototype, \"expandOn\", void 0);\n__decorate$8([\n    Complex({}, FieldsSettings)\n], TreeView.prototype, \"fields\", void 0);\n__decorate$8([\n    Property(true)\n], TreeView.prototype, \"fullRowSelect\", void 0);\n__decorate$8([\n    Property(true)\n], TreeView.prototype, \"loadOnDemand\", void 0);\n__decorate$8([\n    Property()\n], TreeView.prototype, \"locale\", void 0);\n__decorate$8([\n    Property()\n], TreeView.prototype, \"nodeTemplate\", void 0);\n__decorate$8([\n    Property()\n], TreeView.prototype, \"selectedNodes\", void 0);\n__decorate$8([\n    Property('None')\n], TreeView.prototype, \"sortOrder\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"showCheckBox\", void 0);\n__decorate$8([\n    Property(true)\n], TreeView.prototype, \"autoCheck\", void 0);\n__decorate$8([\n    Property(false)\n], TreeView.prototype, \"fullRowNavigable\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"actionFailure\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"created\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"dataBound\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"dataSourceChanged\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"drawNode\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"destroyed\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"keyPress\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeChecked\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeChecking\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeClicked\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeCollapsed\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeCollapsing\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeDragging\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeDragStart\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeDragStop\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeDropped\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeEdited\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeEditing\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeExpanded\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeExpanding\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeSelected\", void 0);\n__decorate$8([\n    Event()\n], TreeView.prototype, \"nodeSelecting\", void 0);\nTreeView = TreeView_1 = __decorate$8([\n    NotifyPropertyChanges\n], TreeView);\n\n/**\n * TreeView modules\n */\n\nvar __decorate$9 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst CONTROL$1 = 'e-control';\nconst ROOT$1 = 'e-sidebar';\nconst DOCKER = 'e-dock';\nconst CLOSE = 'e-close';\nconst OPEN = 'e-open';\nconst TRASITION = 'e-transition';\nconst DEFAULTBACKDROP = 'e-sidebar-overlay';\nconst CONTEXTBACKDROP = 'e-backdrop';\nconst RTL$2 = 'e-rtl';\nconst RIGHT = 'e-right';\nconst LEFT = 'e-left';\nconst OVER = 'e-over';\nconst PUSH = 'e-push';\nconst SLIDE = 'e-slide';\nconst VISIBILITY = 'e-visibility';\nconst DISPLAY = 'e-sidebar-display';\nconst MAINCONTENTANIMATION = 'e-content-animation';\nconst DISABLEANIMATION = 'e-disable-animation';\nconst CONTEXT = 'e-sidebar-context';\nconst SIDEBARABSOLUTE = 'e-sidebar-absolute';\n/**\n * Sidebar is an expandable or collapsible\n * component that typically act as a side container to place the primary or secondary content alongside of the main content.\n * ```html\n * <aside id=\"sidebar\">\n * </aside>\n * ```\n * ```typescript\n * <script>\n *   let sidebarObject: Sidebar = new Sidebar();\n *   sidebarObject.appendTo(\"#sidebar\");\n * </script>\n * ```\n */\nlet Sidebar = class Sidebar extends Component {\n    /* eslint-enable */\n    constructor(options, element) {\n        super(options, element);\n    }\n    preRender() {\n        this.setWidth();\n    }\n    render() {\n        this.initialize();\n        this.wireEvents();\n        this.renderComplete();\n    }\n    initialize() {\n        this.setTarget();\n        this.addClass();\n        this.setZindex();\n        if (this.enableDock) {\n            this.setDock();\n        }\n        if (this.isOpen) {\n            this.show();\n            this.firstRender = true;\n        }\n        else {\n            this.setMediaQuery();\n        }\n        this.checkType(true);\n        this.setType(this.type);\n        this.setCloseOnDocumentClick();\n        this.setEnableRTL();\n        if (Browser.isDevice) {\n            this.windowWidth = window.innerWidth;\n        }\n    }\n    setEnableRTL() {\n        (this.enableRtl ? addClass : removeClass)([this.element], RTL$2);\n    }\n    setTarget() {\n        this.targetEle = this.element.nextElementSibling;\n        this.sidebarEleCopy = this.element.cloneNode(true);\n        if (typeof (this.target) === 'string') {\n            this.setProperties({ target: document.querySelector(this.target) }, true);\n        }\n        if (this.target) {\n            this.target.insertBefore(this.element, this.target.children[0]);\n            addClass([this.element], SIDEBARABSOLUTE);\n            addClass([this.target], CONTEXT);\n            this.targetEle = this.getTargetElement();\n        }\n    }\n    getTargetElement() {\n        let siblingElement = this.element.nextElementSibling;\n        while (!isNullOrUndefined(siblingElement)) {\n            if (!siblingElement.classList.contains(ROOT$1)) {\n                break;\n            }\n            siblingElement = siblingElement.nextElementSibling;\n        }\n        return siblingElement;\n    }\n    setCloseOnDocumentClick() {\n        if (this.closeOnDocumentClick) {\n            EventHandler.add(document, 'mousedown touchstart', this.documentclickHandler, this);\n        }\n        else {\n            EventHandler.remove(document, 'mousedown touchstart', this.documentclickHandler);\n        }\n    }\n    setWidth() {\n        if (this.enableDock && this.position === 'Left') {\n            setStyleAttribute(this.element, { 'width': this.setDimension(this.dockSize) });\n        }\n        else if (this.enableDock && this.position === 'Right') {\n            setStyleAttribute(this.element, { 'width': this.setDimension(this.dockSize) });\n        }\n        else if (!this.enableDock) {\n            setStyleAttribute(this.element, { 'width': this.setDimension(this.width) });\n        }\n    }\n    setDimension(width) {\n        if (typeof width === 'number') {\n            width = formatUnit(width);\n        }\n        else if (typeof width === 'string') {\n            width = (width.match(/px|%|em/)) ? width : formatUnit(width);\n        }\n        else {\n            width = '100%';\n        }\n        return width;\n    }\n    setZindex() {\n        setStyleAttribute(this.element, { 'z-index': '' + this.zIndex });\n    }\n    addClass() {\n        if (this.element.tagName === \"EJS-SIDEBAR\") {\n            addClass([this.element], DISPLAY);\n        }\n        const classELement = document.querySelector('.e-main-content');\n        if (!isNullOrUndefined(classELement || this.targetEle)) {\n            addClass([classELement || this.targetEle], [MAINCONTENTANIMATION]);\n        }\n        this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n        if (!this.enableDock && this.type !== 'Auto') {\n            addClass([this.element], [VISIBILITY]);\n        }\n        removeClass([this.element], [OPEN, CLOSE, RIGHT, LEFT, SLIDE, PUSH, OVER]);\n        this.element.classList.add(ROOT$1);\n        addClass([this.element], (this.position === 'Right') ? RIGHT : LEFT);\n        if (this.enableDock) {\n            addClass([this.element], DOCKER);\n        }\n        this.element.setAttribute('tabindex', this.tabIndex);\n        if (this.type === 'Auto' && !Browser.isDevice) {\n            this.show();\n        }\n        else if (!this.isOpen) {\n            addClass([this.element], CLOSE);\n        }\n    }\n    checkType(val) {\n        if (!(this.type === 'Push' || this.type === 'Over' || this.type === 'Slide')) {\n            this.type = 'Auto';\n        }\n        else {\n            if (!this.element.classList.contains(CLOSE) && !val) {\n                this.hide();\n            }\n        }\n    }\n    transitionEnd(e) {\n        this.setDock();\n        if (!isNullOrUndefined(e) && !this.firstRender) {\n            this.triggerChange();\n        }\n        this.firstRender = false;\n        EventHandler.remove(this.element, 'transitionend', this.transitionEnd);\n    }\n    destroyBackDrop() {\n        const sibling = document.querySelector('.e-main-content') || this.targetEle;\n        if (this.target && this.showBackdrop && sibling) {\n            removeClass([sibling], CONTEXTBACKDROP);\n        }\n        else if (this.showBackdrop && this.modal) {\n            this.modal.style.display = 'none';\n            this.modal.outerHTML = '';\n            this.modal = null;\n        }\n    }\n    /* eslint-disable */\n    /**\n     * Hide the Sidebar component, if it is in an open state.\n     *\n     * @returns {void}\n     *\n     */\n    hide(e) {\n        const closeArguments = {\n            model: this,\n            element: this.element,\n            cancel: false,\n            isInteracted: !isNullOrUndefined(e),\n            event: (e || null)\n        };\n        this.trigger('close', closeArguments, (observedcloseArgs) => {\n            if (!observedcloseArgs.cancel) {\n                if (this.element.classList.contains(CLOSE)) {\n                    return;\n                }\n                if (this.element.classList.contains(OPEN) && !this.animate) {\n                    this.triggerChange();\n                }\n                addClass([this.element], CLOSE);\n                removeClass([this.element], OPEN);\n                setStyleAttribute(this.element, { 'width': formatUnit(this.enableDock ? this.dockSize : this.width) });\n                this.setType(this.type);\n                const sibling = document.querySelector('.e-main-content') || this.targetEle;\n                if (!this.enableDock && sibling) {\n                    sibling.style.transform = 'translateX(' + 0 + 'px)';\n                    sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = '0px';\n                }\n                this.destroyBackDrop();\n                this.setAnimation();\n                if (this.type === 'Slide') {\n                    document.body.classList.remove('e-sidebar-overflow');\n                }\n                this.setProperties({ isOpen: false }, true);\n                if (this.enableDock) {\n                    setTimeout(() => this.setTimeOut(), 50);\n                }\n                EventHandler.add(this.element, 'transitionend', this.transitionEnd, this);\n            }\n        });\n    }\n    setTimeOut() {\n        const sibling = document.querySelector('.e-main-content') || this.targetEle;\n        const elementWidth = this.element.getBoundingClientRect().width;\n        if (this.element.classList.contains(OPEN) && sibling && !(this.type === 'Over' && this.enableDock)) {\n            if (this.position === 'Left') {\n                sibling.style.marginLeft = this.setDimension(this.width === 'auto' ? elementWidth : this.width);\n            }\n            else {\n                sibling.style.marginRight = this.setDimension(this.width === 'auto' ? elementWidth : this.width);\n            }\n        }\n        else if (this.element.classList.contains(CLOSE) && sibling) {\n            if (this.position === 'Left') {\n                sibling.style.marginLeft = this.setDimension(this.dockSize === 'auto' ? elementWidth : this.dockSize);\n            }\n            else {\n                sibling.style.marginRight = this.setDimension(this.dockSize === 'auto' ? elementWidth : this.dockSize);\n            }\n        }\n    }\n    /* eslint-disable */\n    /**\n     * Shows the Sidebar component, if it is in closed state.\n     *\n     * @returns {void}\n     */\n    show(e) {\n        const openArguments = {\n            model: this,\n            element: this.element,\n            cancel: false,\n            isInteracted: !isNullOrUndefined(e),\n            event: (e || null)\n        };\n        this.trigger('open', openArguments, (observedopenArgs) => {\n            if (!observedopenArgs.cancel) {\n                removeClass([this.element], VISIBILITY);\n                if (this.element.classList.contains(OPEN)) {\n                    return;\n                }\n                if (this.element.classList.contains(CLOSE) && !this.animate) {\n                    this.triggerChange();\n                }\n                addClass([this.element], [OPEN, TRASITION]);\n                setStyleAttribute(this.element, { 'transform': '' });\n                removeClass([this.element], CLOSE);\n                setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n                this.setType(this.type);\n                this.createBackDrop();\n                this.setAnimation();\n                if (this.type === 'Slide') {\n                    document.body.classList.add('e-sidebar-overflow');\n                }\n                this.setProperties({ isOpen: true }, true);\n                EventHandler.add(this.element, 'transitionend', this.transitionEnd, this);\n            }\n        });\n    }\n    setAnimation() {\n        if (this.animate) {\n            removeClass([this.element], DISABLEANIMATION);\n        }\n        else {\n            addClass([this.element], DISABLEANIMATION);\n        }\n    }\n    triggerChange() {\n        const changeArguments = { name: 'change', element: this.element };\n        this.trigger('change', changeArguments);\n    }\n    setDock() {\n        if (this.enableDock && this.position === 'Left' && !this.getState()) {\n            setStyleAttribute(this.element, { 'transform': 'translateX(' + -100 + '%) translateX(' + this.setDimension(this.dockSize) + ')' });\n        }\n        else if (this.enableDock && this.position === 'Right' && !this.getState()) {\n            setStyleAttribute(this.element, { 'transform': 'translateX(' + 100 + '%) translateX(' + '-' + this.setDimension(this.dockSize) + ')' });\n        }\n        if (this.element.classList.contains(CLOSE) && this.enableDock) {\n            setStyleAttribute(this.element, { 'width': this.setDimension(this.dockSize) });\n        }\n    }\n    createBackDrop() {\n        if (this.target && this.showBackdrop && this.getState()) {\n            const sibling = document.querySelector('.e-main-content') || this.targetEle;\n            addClass([sibling], CONTEXTBACKDROP);\n        }\n        else if (this.showBackdrop && !this.modal && this.getState()) {\n            this.modal = this.createElement('div');\n            this.modal.className = DEFAULTBACKDROP;\n            this.modal.style.display = 'block';\n            document.body.appendChild(this.modal);\n        }\n    }\n    getPersistData() {\n        return this.addOnPersist(['type', 'position', 'isOpen']);\n    }\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - returns module name.\n     * @private\n     *\n     */\n    getModuleName() {\n        return 'sidebar';\n    }\n    /**\n     * Shows or hides the Sidebar based on the current state.\n     *\n     * @returns {void}\n     */\n    toggle() {\n        if (this.element.classList.contains(OPEN)) {\n            this.hide();\n        }\n        else {\n            this.show();\n        }\n    }\n    getState() {\n        return this.element.classList.contains(OPEN) ? true : false;\n    }\n    setMediaQuery() {\n        if (this.mediaQuery) {\n            let media = false;\n            if (typeof (this.mediaQuery) === 'string') {\n                media = window.matchMedia(this.mediaQuery).matches;\n            }\n            else {\n                media = (this.mediaQuery).matches;\n            }\n            if (media && this.windowWidth !== window.innerWidth) {\n                this.show();\n            }\n            else if (this.getState() && this.windowWidth !== window.innerWidth) {\n                this.hide();\n            }\n        }\n    }\n    resize() {\n        if (this.type === 'Auto') {\n            if (Browser.isDevice) {\n                addClass([this.element], OVER);\n            }\n            else {\n                addClass([this.element], PUSH);\n            }\n        }\n        this.setMediaQuery();\n        if (Browser.isDevice) {\n            this.windowWidth = window.innerWidth;\n        }\n    }\n    documentclickHandler(e) {\n        if (closest(e.target, '.' + CONTROL$1 + '' + '.' + ROOT$1)) {\n            return;\n        }\n        this.hide(e);\n    }\n    enableGestureHandler(args) {\n        if (!this.isOpen && this.position === 'Left' && args.swipeDirection === 'Right' &&\n            (args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {\n            this.show();\n        }\n        else if (this.isOpen && this.position === 'Left' && args.swipeDirection === 'Left') {\n            this.hide();\n        }\n        else if (this.isOpen && this.position === 'Right' && args.swipeDirection === 'Right') {\n            this.hide();\n        }\n        else if (!this.isOpen && this.position === 'Right' && args.swipeDirection === 'Left'\n            && (window.innerWidth - args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {\n            this.show();\n        }\n    }\n    setEnableGestures() {\n        if (this.enableGestures) {\n            this.mainContentEle = new Touch(document.body, { swipe: this.enableGestureHandler.bind(this) });\n            this.sidebarEle = new Touch(this.element, { swipe: this.enableGestureHandler.bind(this) });\n        }\n        else {\n            if (this.mainContentEle && this.sidebarEle) {\n                this.mainContentEle.destroy();\n                this.sidebarEle.destroy();\n            }\n        }\n    }\n    wireEvents() {\n        this.setEnableGestures();\n        EventHandler.add(window, 'resize', this.resize, this);\n    }\n    unWireEvents() {\n        EventHandler.remove(window, 'resize', this.resize);\n        EventHandler.remove(document, 'mousedown touchstart', this.documentclickHandler);\n        if (this.mainContentEle) {\n            this.mainContentEle.destroy();\n        }\n        if (this.sidebarEle) {\n            this.sidebarEle.destroy();\n        }\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {SidebarModel} newProp - specifies newProp value.\n     * @param {SidebarModel} oldProp - specifies oldProp value.\n     * @returns {void}\n     * @private\n     *\n     */\n    onPropertyChanged(newProp, oldProp) {\n        const sibling = document.querySelector('.e-main-content') || this.targetEle;\n        const isRendered = this.isServerRendered;\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'isOpen':\n                    if (this.isOpen) {\n                        this.show();\n                    }\n                    else {\n                        this.hide();\n                    }\n                    break;\n                case 'width':\n                    this.setWidth();\n                    if (!this.getState()) {\n                        this.setDock();\n                    }\n                    break;\n                case 'animate':\n                    this.setAnimation();\n                    break;\n                case 'type':\n                    this.checkType(false);\n                    removeClass([this.element], [VISIBILITY]);\n                    this.addClass();\n                    addClass([this.element], this.type === 'Auto' ? (Browser.isDevice ? ['e-over'] :\n                        ['e-push']) : ['e-' + this.type.toLowerCase()]);\n                    break;\n                case 'position':\n                    this.element.style.transform = '';\n                    this.setDock();\n                    if (sibling) {\n                        sibling.style[this.position === 'Left' ? 'marginRight' : 'marginLeft'] = '0px';\n                    }\n                    if (this.position === 'Right') {\n                        removeClass([this.element], LEFT);\n                        addClass([this.element], RIGHT);\n                    }\n                    else {\n                        removeClass([this.element], RIGHT);\n                        addClass([this.element], LEFT);\n                    }\n                    this.setType(this.type);\n                    break;\n                case 'showBackdrop':\n                    if (this.showBackdrop) {\n                        this.createBackDrop();\n                    }\n                    else {\n                        if (this.modal) {\n                            this.modal.style.display = 'none';\n                            this.modal.outerHTML = '';\n                            this.modal = null;\n                        }\n                    }\n                    break;\n                case 'target':\n                    if (typeof (this.target) === 'string') {\n                        this.setProperties({ target: document.querySelector(this.target) }, true);\n                    }\n                    if (isNullOrUndefined(this.target)) {\n                        removeClass([this.element], SIDEBARABSOLUTE);\n                        removeClass([oldProp.target], CONTEXT);\n                        setStyleAttribute(sibling, { 'margin-left': 0, 'margin-right': 0 });\n                        document.body.insertAdjacentElement('afterbegin', this.element);\n                    }\n                    this.isServerRendered = false;\n                    super.refresh();\n                    this.isServerRendered = isRendered;\n                    break;\n                case 'closeOnDocumentClick':\n                    this.setCloseOnDocumentClick();\n                    break;\n                case 'enableDock':\n                    if (!this.getState()) {\n                        this.setDock();\n                    }\n                    break;\n                case 'zIndex':\n                    this.setZindex();\n                    break;\n                case 'mediaQuery':\n                    this.setMediaQuery();\n                    break;\n                case 'enableGestures':\n                    this.setEnableGestures();\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL();\n                    break;\n            }\n        }\n    }\n    setType(type) {\n        const elementWidth = this.element.getBoundingClientRect().width;\n        this.setZindex();\n        const sibling = document.querySelector('.e-main-content') || this.targetEle;\n        if (sibling) {\n            sibling.style.transform = 'translateX(' + 0 + 'px)';\n            if (!Browser.isDevice && this.type !== 'Auto' && !(this.type === 'Over' && this.enableDock)) {\n                sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = '0px';\n            }\n        }\n        const margin = this.position === 'Left' ? elementWidth + 'px' : elementWidth + 'px';\n        const eleWidth = this.position === 'Left' ? elementWidth : -(elementWidth);\n        removeClass([this.element], [PUSH, OVER, SLIDE]);\n        switch (type) {\n            case 'Push':\n                addClass([this.element], [PUSH]);\n                if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n                    sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = margin;\n                }\n                break;\n            case 'Slide':\n                addClass([this.element], [SLIDE]);\n                if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n                    sibling.style.transform = 'translateX(' + eleWidth + 'px)';\n                }\n                break;\n            case 'Over':\n                addClass([this.element], [OVER]);\n                if (this.enableDock && (this.element.classList.contains(CLOSE) || this.isOpen)) {\n                    if (sibling) {\n                        sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = this.setDimension(this.dockSize);\n                    }\n                }\n                break;\n            case 'Auto':\n                addClass([this.element], [TRASITION]);\n                if (Browser.isDevice) {\n                    if (sibling && (this.enableDock) && !this.getState()) {\n                        sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = margin;\n                        addClass([this.element], PUSH);\n                    }\n                    else {\n                        addClass([this.element], OVER);\n                    }\n                }\n                else {\n                    addClass([this.element], PUSH);\n                    if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {\n                        sibling.style[this.position === 'Left' ? 'marginLeft' : 'marginRight'] = margin;\n                    }\n                }\n                this.createBackDrop();\n        }\n    }\n    /**\n     * Removes the control from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @returns {void}\n     *\n     */\n    destroy() {\n        super.destroy();\n        if (this.target) {\n            removeClass([this.target], CONTEXT);\n        }\n        this.destroyBackDrop();\n        if (this.element) {\n            removeClass([this.element], [OPEN, CLOSE, PUSH, SLIDE, OVER, LEFT, RIGHT, TRASITION]);\n            removeClass([this.element], SIDEBARABSOLUTE);\n            this.element.style.width = '';\n            this.element.style.zIndex = '';\n            this.element.style.transform = '';\n            if (!isNullOrUndefined(this.sidebarEleCopy.getAttribute('tabindex'))) {\n                this.element.setAttribute('tabindex', this.tabIndex);\n            }\n            else {\n                this.element.removeAttribute('tabindex');\n            }\n        }\n        this.windowWidth = null;\n        const sibling = document.querySelector('.e-main-content') || this.targetEle;\n        if (!isNullOrUndefined(sibling)) {\n            sibling.style.margin = '';\n            sibling.style.transform = '';\n        }\n        this.unWireEvents();\n    }\n};\n__decorate$9([\n    Property('auto')\n], Sidebar.prototype, \"dockSize\", void 0);\n__decorate$9([\n    Property(null)\n], Sidebar.prototype, \"mediaQuery\", void 0);\n__decorate$9([\n    Property(false)\n], Sidebar.prototype, \"enableDock\", void 0);\n__decorate$9([\n    Property('en-US')\n], Sidebar.prototype, \"locale\", void 0);\n__decorate$9([\n    Property(false)\n], Sidebar.prototype, \"enablePersistence\", void 0);\n__decorate$9([\n    Property(true)\n], Sidebar.prototype, \"enableGestures\", void 0);\n__decorate$9([\n    Property(false)\n], Sidebar.prototype, \"isOpen\", void 0);\n__decorate$9([\n    Property(false)\n], Sidebar.prototype, \"enableRtl\", void 0);\n__decorate$9([\n    Property(true)\n], Sidebar.prototype, \"animate\", void 0);\n__decorate$9([\n    Property('auto')\n], Sidebar.prototype, \"height\", void 0);\n__decorate$9([\n    Property(false)\n], Sidebar.prototype, \"closeOnDocumentClick\", void 0);\n__decorate$9([\n    Property('Left')\n], Sidebar.prototype, \"position\", void 0);\n__decorate$9([\n    Property(null)\n], Sidebar.prototype, \"target\", void 0);\n__decorate$9([\n    Property(false)\n], Sidebar.prototype, \"showBackdrop\", void 0);\n__decorate$9([\n    Property('Auto')\n], Sidebar.prototype, \"type\", void 0);\n__decorate$9([\n    Property('auto')\n], Sidebar.prototype, \"width\", void 0);\n__decorate$9([\n    Property(1000)\n], Sidebar.prototype, \"zIndex\", void 0);\n__decorate$9([\n    Event()\n], Sidebar.prototype, \"created\", void 0);\n__decorate$9([\n    Event()\n], Sidebar.prototype, \"close\", void 0);\n__decorate$9([\n    Event()\n], Sidebar.prototype, \"open\", void 0);\n__decorate$9([\n    Event()\n], Sidebar.prototype, \"change\", void 0);\n__decorate$9([\n    Event()\n], Sidebar.prototype, \"destroyed\", void 0);\nSidebar = __decorate$9([\n    NotifyPropertyChanges\n], Sidebar);\n\n/**\n * Sidebar modules\n */\n\nvar __decorate$10 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst ICONRIGHT = 'e-icon-right';\nconst ITEMTEXTCLASS = 'e-breadcrumb-text';\nconst ICONCLASS = 'e-breadcrumb-icon';\nconst MENUCLASS = 'e-breadcrumb-menu';\nconst ITEMCLASS = 'e-breadcrumb-item';\nconst POPUPCLASS = 'e-breadcrumb-popup';\nconst WRAPMODECLASS = 'e-breadcrumb-wrap-mode';\nconst SCROLLMODECLASS = 'e-breadcrumb-scroll-mode';\nconst TABINDEX = 'tabindex';\nconst DISABLEDCLASS = 'e-disabled';\nconst ARIADISABLED = 'aria-disabled';\nconst DOT = '.';\nclass BreadcrumbItem extends ChildProperty {\n}\n__decorate$10([\n    Property('')\n], BreadcrumbItem.prototype, \"text\", void 0);\n__decorate$10([\n    Property('')\n], BreadcrumbItem.prototype, \"url\", void 0);\n__decorate$10([\n    Property(null)\n], BreadcrumbItem.prototype, \"iconCss\", void 0);\n__decorate$10([\n    Property(false)\n], BreadcrumbItem.prototype, \"disabled\", void 0);\n/**\n * Breadcrumb is a graphical user interface that helps to identify or highlight the current location within a hierarchical structure of websites.\n * The aim is to make the user aware of their current position in a hierarchy of website links.\n * ```html\n * <nav id='breadcrumb'></nav>\n * ```\n * ```typescript\n * <script>\n * var breadcrumbObj = new Breadcrumb({ items: [{ text: 'Home', url: '/' }, { text: 'Index', url: './index.html }]});\n * breadcrumbObj.appendTo(\"#breadcrumb\");\n * </script>\n * ```\n */\nlet Breadcrumb = class Breadcrumb extends Component {\n    /**\n     * Constructor for creating the widget.\n     *\n     * @private\n     * @param {BreadcrumbModel} options - Specifies the Breadcrumb model.\n     * @param {string | HTMLElement} element - Specifies the element.\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    /**\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        // pre render code\n    }\n    /**\n     * Initialize the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.initialize();\n        this.renderItems(this.items);\n        this.wireEvents();\n    }\n    initialize() {\n        this._maxItems = this.maxItems;\n        this.element.setAttribute('aria-label', 'breadcrumb');\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.split(' '));\n        }\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        if (this.disabled) {\n            this.element.classList.add(DISABLEDCLASS);\n            this.element.setAttribute(ARIADISABLED, 'true');\n        }\n        if (this.overflowMode === 'Wrap') {\n            this.element.classList.add(WRAPMODECLASS);\n        }\n        else if (this.overflowMode === 'Scroll') {\n            this.element.classList.add(SCROLLMODECLASS);\n        }\n        this.initItems();\n        this.initPvtProps();\n    }\n    initPvtProps() {\n        if (this.overflowMode === 'Hidden' && this._maxItems > 0) {\n            this.endIndex = this.getEndIndex();\n            this.startIndex = this.endIndex + 1 - (this._maxItems - 1);\n        }\n        if (this.overflowMode === 'Menu') {\n            if (this._maxItems >= 0) {\n                this.startIndex = this._maxItems > 1 ? 1 : 0;\n                this.endIndex = this.getEndIndex();\n                this.popupUl = this.createElement('ul', { attrs: { TABINDEX: '0', 'role': 'menu' } });\n            }\n            else {\n                this.startIndex = this.endIndex = null;\n            }\n        }\n    }\n    getEndIndex() {\n        let endIndex;\n        if (this.activeItem) {\n            this.items.forEach((item, idx) => {\n                if (item.url === this.activeItem || item.text === this.activeItem) {\n                    endIndex = idx;\n                }\n            });\n        }\n        else {\n            endIndex = this.items.length - 1;\n        }\n        return endIndex;\n    }\n    initItems() {\n        if (!this.items.length) {\n            let baseUri;\n            let uri;\n            const items = [];\n            if (this.url) {\n                const url = new URL(this.url, window.location.origin);\n                baseUri = url.origin + '/';\n                uri = url.href.split(baseUri)[1].split('/');\n            }\n            else {\n                baseUri = window.location.origin + '/';\n                uri = window.location.href.split(baseUri)[1].split('/');\n            }\n            items.push({ iconCss: 'e-icons e-home', url: baseUri });\n            for (let i = 0; i < uri.length; i++) {\n                if (uri[i]) {\n                    items.push({ text: uri[i], url: baseUri + uri[i] });\n                    baseUri += uri[i] + '/';\n                }\n            }\n            this.setProperties({ items: items }, true);\n        }\n    }\n    renderItems(items) {\n        let item;\n        let isSingleLevel;\n        const isIconRight = this.element.classList.contains(ICONRIGHT);\n        const itemsLength = items.length;\n        if (itemsLength) {\n            let isActiveItem;\n            let isLastItem;\n            let isLastItemInPopup;\n            let j = 0;\n            let wrapDiv;\n            const len = (itemsLength * 2) - 1;\n            let isItemCancelled = false;\n            const ol = this.createElement('ol', { className: this.overflowMode === 'Wrap' ? 'e-breadcrumb-wrapped-ol' : '' });\n            const firstOl = this.createElement('ol', { className: this.overflowMode === 'Wrap' ? 'e-breadcrumb-first-ol' : '' });\n            const showIcon = this.hasField(items, 'iconCss');\n            const isCollasped = (this.overflowMode === 'Collapsed' && this._maxItems > 0 && itemsLength > this._maxItems && !this.isExpanded);\n            const isDefaultOverflowMode = (this.overflowMode === 'Hidden' && this._maxItems > 0);\n            if (this.overflowMode === 'Menu' && this.popupUl) {\n                this.popupUl.innerHTML = '';\n            }\n            const listBaseOptions = {\n                moduleName: this.getModuleName(),\n                showIcon: showIcon,\n                itemNavigable: true,\n                itemCreated: (args) => {\n                    const isLastItem = args.curData.isLastItem;\n                    if (isLastItem && args.item.children.length && !this.itemTemplate) {\n                        delete args.curData.isLastItem;\n                        if (!isLastItemInPopup && !this.enableActiveItemNavigation) {\n                            args.item.innerHTML = this.createElement('span', { className: ITEMTEXTCLASS, innerHTML: args.item.children[0].innerHTML }).outerHTML;\n                        }\n                    }\n                    if (args.curData.iconCss && !args.curData.text && !this.itemTemplate) {\n                        args.item.classList.add('e-icon-item');\n                    }\n                    if (isDefaultOverflowMode) {\n                        args.item.setAttribute('item-index', j.toString());\n                    }\n                    const eventArgs = {\n                        item: extend({}, args.curData.properties ?\n                            args.curData.properties : args.curData), element: args.item, cancel: false\n                    };\n                    this.trigger('beforeItemRender', eventArgs);\n                    isItemCancelled = eventArgs.cancel;\n                    const containsRightIcon = (isIconRight || eventArgs.element.classList.contains(ICONRIGHT));\n                    if (containsRightIcon && args.curData.iconCss && !this.itemTemplate) {\n                        args.item.querySelector('.e-anchor-wrap').appendChild(args.item.querySelector(DOT + ICONCLASS));\n                    }\n                    if (eventArgs.item.disabled) {\n                        args.item.setAttribute(ARIADISABLED, 'true');\n                        args.item.classList.add(DISABLEDCLASS);\n                    }\n                    if ((eventArgs.item.disabled || this.disabled) && args.item.children.length && !this.itemTemplate) {\n                        args.item.children[0].setAttribute(TABINDEX, '-1');\n                    }\n                    if (args.curData.isEmptyUrl) {\n                        args.item.children[0].removeAttribute('href');\n                        if ((!isLastItem || (isLastItem && this.enableActiveItemNavigation)) && !(eventArgs.item.disabled || this.disabled)) {\n                            args.item.children[0].setAttribute(TABINDEX, '0');\n                            EventHandler.add(args.item.children[0], 'keydown', this.keyDownHandler, this);\n                        }\n                    }\n                    if (isLastItem) {\n                        args.item.setAttribute('data-active-item', '');\n                    }\n                    if (!this.itemTemplate) {\n                        this.beforeItemRenderChanges(args.curData, eventArgs.item, args.item, containsRightIcon);\n                    }\n                }\n            };\n            for (let i = 0; i < len; i % 2 && j++, i++) {\n                isActiveItem = (this.activeItem && (this.activeItem === items[j].url || this.activeItem === items[j].text));\n                if (isCollasped && i > 1 && i < len - 2) {\n                    continue;\n                }\n                else if (isDefaultOverflowMode && ((j < this.startIndex || j > this.endIndex)\n                    && (i % 2 ? j !== this.startIndex - 1 : true)) && j !== 0) {\n                    continue;\n                }\n                if (i % 2) {\n                    // separator item\n                    wrapDiv = this.createElement('div', { className: 'e-breadcrumb-item-wrapper' });\n                    listBaseOptions.template = this.separatorTemplate ? this.separatorTemplate : '/';\n                    listBaseOptions.itemClass = 'e-breadcrumb-separator';\n                    isSingleLevel = false;\n                    item = [{ previousItem: items[j], nextItem: items[j + 1] }];\n                }\n                else {\n                    // list item\n                    listBaseOptions.itemClass = '';\n                    if (this.itemTemplate) {\n                        listBaseOptions.template = this.itemTemplate;\n                        isSingleLevel = false;\n                    }\n                    else {\n                        isSingleLevel = true;\n                    }\n                    item = [extend({}, items[j].properties ? items[j].properties\n                            : items[j])];\n                    if (!item[0].url && !this.itemTemplate) {\n                        item = [extend({}, item[0], { isEmptyUrl: true, url: '#' })];\n                    }\n                    isLastItem = (isDefaultOverflowMode || this.overflowMode === 'Menu') && (j === this.endIndex);\n                    if (((i === len - 1 || isLastItem) && !this.itemTemplate) || isActiveItem) {\n                        item[0].isLastItem = true;\n                    }\n                }\n                let parent = ol;\n                const lastPopupItemIdx = this.startIndex + this.endIndex - this._maxItems;\n                if (this.overflowMode === 'Menu' && ((j >= this.startIndex && (j <= lastPopupItemIdx && (i % 2 ? !(j === lastPopupItemIdx) : true)) && this.endIndex >= this._maxItems && this._maxItems > 0) || this._maxItems === 0)) {\n                    if (i % 2) {\n                        continue;\n                    }\n                    else {\n                        parent = this.popupUl;\n                        if (isLastItem) {\n                            isLastItemInPopup = true;\n                        }\n                    }\n                }\n                else if (this.overflowMode === 'Wrap') {\n                    if (i === 0) {\n                        parent = firstOl;\n                    }\n                    else {\n                        parent = wrapDiv;\n                    }\n                }\n                const li = ListBase.createList(this.createElement, item, listBaseOptions, isSingleLevel, this).childNodes;\n                if (!isItemCancelled) {\n                    append(li, parent);\n                }\n                else if (isDefaultOverflowMode || isCollasped || this.overflowMode === 'Menu' || this.overflowMode === 'Wrap') {\n                    items.splice(j, 1);\n                    this.initPvtProps();\n                    return this.reRenderItems();\n                }\n                else if ((i === len - 1 || isLastItem)) {\n                    remove(parent.lastElementChild);\n                }\n                if (this.overflowMode === 'Wrap' && i !== 0 && i % 2 === 0) {\n                    ol.appendChild(wrapDiv);\n                }\n                if (isCollasped && i === 1) {\n                    const li = this.createElement('li', { className: 'e-icons e-breadcrumb-collapsed', attrs: { TABINDEX: '0' } });\n                    EventHandler.add(li, 'keyup', this.expandHandler, this);\n                    ol.appendChild(li);\n                }\n                if (this.overflowMode === 'Menu' && this.startIndex === i && this.endIndex >= this._maxItems && this._maxItems >= 0) {\n                    const menu = this.getMenuElement();\n                    EventHandler.add(menu, 'keyup', this.keyDownHandler, this);\n                    ol.appendChild(menu);\n                }\n                if (isActiveItem || isLastItem) {\n                    break;\n                }\n                if (isItemCancelled) {\n                    i++;\n                }\n            }\n            if (this.isReact) {\n                this.renderReactTemplates();\n            }\n            if (this.overflowMode === 'Wrap') {\n                this.element.appendChild(firstOl);\n            }\n            this.element.appendChild(ol);\n            this.calculateMaxItems();\n        }\n    }\n    calculateMaxItems() {\n        if (this.overflowMode === 'Hidden' || this.overflowMode === 'Collapsed' || this.overflowMode === 'Menu') {\n            let maxItems;\n            const width = this.element.offsetWidth;\n            const liElems = [].slice.call(this.element.children[0].children).reverse();\n            let liWidth = this.overflowMode === 'Menu' ? 0 : liElems[liElems.length - 1].offsetWidth + (liElems[liElems.length - 2] ? liElems[liElems.length - 2].offsetWidth : 0);\n            if (this.overflowMode === 'Menu') {\n                const menuEle = this.getMenuElement();\n                this.element.appendChild(menuEle);\n                liWidth += menuEle.offsetWidth;\n                remove(menuEle);\n            }\n            for (let i = 0; i < liElems.length - 2; i++) {\n                if (liWidth > width) {\n                    maxItems = Math.ceil((i - 1) / 2) + ((this.overflowMode === 'Menu' && i <= 2) ? 0 : 1);\n                    if (((this.maxItems > maxItems && !(this.maxItems > -1 && maxItems == -1)) || this.maxItems == -1) && this._maxItems != maxItems) {\n                        this._maxItems = maxItems;\n                        this.initPvtProps();\n                        return this.reRenderItems();\n                    }\n                    else {\n                        break;\n                    }\n                }\n                else {\n                    if (this.overflowMode === 'Menu' && i === 2) {\n                        liWidth += liElems[liElems.length - 1].offsetWidth + liElems[liElems.length - 2].offsetWidth;\n                        if (liWidth > width) {\n                            this._maxItems = 1;\n                            this.initPvtProps();\n                            return this.reRenderItems();\n                        }\n                    }\n                    if (!(this.overflowMode === 'Menu' && liElems[i].classList.contains(MENUCLASS))) {\n                        liWidth += liElems[i].offsetWidth;\n                    }\n                }\n            }\n        }\n        else if ((this.overflowMode === 'Wrap' || this.overflowMode === 'Scroll') && this._maxItems > 0) {\n            let width = 0;\n            const liElems = this.element.querySelectorAll(DOT + ITEMCLASS);\n            if (liElems.length > this._maxItems + this._maxItems - 1) {\n                for (let i = this.overflowMode === 'Wrap' ? 1 : 0; i < this._maxItems + this._maxItems - 1; i++) {\n                    width += liElems[i].offsetWidth;\n                }\n                width = width + 5 + (parseInt(getComputedStyle(this.element.children[0]).paddingLeft, 10) * 2);\n                if (this.overflowMode === 'Wrap') {\n                    this.element.querySelector('.e-breadcrumb-wrapped-ol').style.width = width + 'px';\n                }\n                else {\n                    this.element.style.width = width + 'px';\n                }\n            }\n        }\n    }\n    hasField(items, field) {\n        for (let i = 0, len = items.length; i < len; i++) {\n            if (items[i][field]) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getMenuElement() {\n        return this.createElement('li', { className: 'e-icons e-breadcrumb-menu', attrs: { TABINDEX: '0' } });\n    }\n    beforeItemRenderChanges(prevItem, currItem, elem, isRightIcon) {\n        const wrapElem = elem.querySelector('.e-anchor-wrap');\n        if (currItem.text !== prevItem.text) {\n            wrapElem.childNodes.forEach((child) => {\n                if (child.nodeType === Node.TEXT_NODE) {\n                    child.textContent = currItem.text;\n                }\n            });\n        }\n        if (currItem.iconCss !== prevItem.iconCss && wrapElem) { // wrapElem - for checking it is item not a separator\n            const iconElem = elem.querySelector(DOT + ICONCLASS);\n            if (iconElem) {\n                if (currItem.iconCss) {\n                    removeClass([iconElem], prevItem.iconCss.split(' '));\n                    addClass([iconElem], currItem.iconCss.split(' '));\n                }\n                else {\n                    remove(iconElem);\n                }\n            }\n            else if (currItem.iconCss) {\n                const iconElem = this.createElement('span', { className: ICONCLASS + ' ' + currItem.iconCss });\n                if (isRightIcon) {\n                    append([iconElem], wrapElem);\n                }\n                else {\n                    wrapElem.insertBefore(iconElem, wrapElem.childNodes[0]);\n                }\n            }\n        }\n        if (currItem.url !== prevItem.url && this.enableNavigation) {\n            const anchor = elem.querySelector('a.' + ITEMTEXTCLASS);\n            if (anchor) {\n                if (currItem.url) {\n                    anchor.setAttribute('href', currItem.url);\n                }\n                else {\n                    anchor.removeAttribute('href');\n                }\n            }\n        }\n    }\n    reRenderItems() {\n        this.element.innerHTML = '';\n        this.renderItems(this.items);\n    }\n    clickHandler(e) {\n        const li = closest(e.target, DOT + ITEMCLASS + ':not(.e-breadcrumb-separator)');\n        if (!this.enableNavigation) {\n            e.preventDefault();\n        }\n        if (li && (closest(e.target, DOT + ITEMTEXTCLASS) || this.itemTemplate)) {\n            let idx;\n            if (this.overflowMode === 'Wrap') {\n                idx = [].slice.call(this.element.querySelectorAll(DOT + ITEMCLASS)).indexOf(li);\n            }\n            else {\n                idx = [].slice.call(li.parentElement.children).indexOf(li);\n            }\n            if (this.overflowMode === 'Menu') {\n                if (closest(e.target, DOT + POPUPCLASS)) {\n                    idx += this.startIndex;\n                    this.endIndex = idx;\n                    if (e.type === 'keydown') {\n                        this.documentClickHandler(e);\n                    }\n                }\n                else if (this.element.querySelector(DOT + MENUCLASS)) {\n                    if (idx > [].slice.call(this.element.children[0].children).indexOf(this.element.querySelector(DOT + MENUCLASS))) {\n                        idx += (this.popupUl.childElementCount * 2) - 2;\n                        idx = Math.floor(idx / 2);\n                        this.endIndex = idx;\n                    }\n                    else {\n                        this.startIndex = this.endIndex = idx;\n                    }\n                }\n                else {\n                    idx = Math.floor(idx / 2);\n                    this.startIndex = this.endIndex = idx;\n                }\n            }\n            else {\n                idx = Math.floor(idx / 2);\n            }\n            if (this.overflowMode === 'Hidden' && this._maxItems > 0 && this.endIndex !== 0) {\n                idx = parseInt(li.getAttribute('item-index'), 10);\n                if (this.startIndex > 1) {\n                    this.startIndex -= (this.endIndex - idx);\n                }\n                this.endIndex = idx;\n            }\n            this.trigger('itemClick', { element: li, item: this.items[idx], event: e });\n            this.activeItem = this.items[idx].url || this.items[idx].text;\n            this.dataBind();\n        }\n        if (e.target.classList.contains('e-breadcrumb-collapsed')) {\n            this.isExpanded = true;\n            this.reRenderItems();\n        }\n        if (e.target.classList.contains(MENUCLASS)) {\n            this.renderPopup();\n        }\n    }\n    renderPopup() {\n        const wrapper = this.createElement('div', { className: POPUPCLASS + ' ' + this.cssClass + (this.enableRtl ? ' e-rtl' : '') });\n        document.body.appendChild(wrapper);\n        this.popupObj = new Popup(wrapper, {\n            content: this.popupUl,\n            relateTo: this.element.querySelector(DOT + MENUCLASS),\n            enableRtl: this.enableRtl,\n            position: { X: 'left', Y: 'bottom' },\n            collision: { X: 'fit', Y: 'flip' },\n            open: () => {\n                this.popupUl.focus();\n            }\n        });\n        this.popupWireEvents();\n        this.popupObj.show();\n    }\n    documentClickHandler(e) {\n        if (this.overflowMode === 'Menu' && this.popupObj && this.popupObj.element.classList.contains('e-popup-open') && !closest(e.target, DOT + MENUCLASS)) {\n            this.popupObj.hide();\n            this.popupObj.destroy();\n            detach(this.popupObj.element);\n        }\n    }\n    resize() {\n        this._maxItems = this.maxItems;\n        this.initPvtProps();\n        this.reRenderItems();\n    }\n    expandHandler(e) {\n        if (e.key === 'Enter') {\n            this.isExpanded = true;\n            this.reRenderItems();\n        }\n    }\n    keyDownHandler(e) {\n        if (e.key === 'Enter') {\n            this.clickHandler(e);\n        }\n    }\n    popupKeyDownHandler(e) {\n        if (e.key === 'Escape') {\n            this.documentClickHandler(e);\n        }\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @private\n     * @param {BreadcrumbModel} newProp - Specifies the new properties.\n     * @param {BreadcrumbModel} oldProp - Specifies the old properties.\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'items':\n                case 'enableActiveItemNavigation':\n                    this.reRenderItems();\n                    break;\n                case 'activeItem':\n                    this._maxItems = this.maxItems;\n                    this.initPvtProps();\n                    this.reRenderItems();\n                    break;\n                case 'overflowMode':\n                case 'maxItems':\n                    this._maxItems = this.maxItems;\n                    this.initPvtProps();\n                    this.reRenderItems();\n                    if (oldProp.overflowMode === 'Wrap') {\n                        this.element.classList.remove(WRAPMODECLASS);\n                    }\n                    else if (newProp.overflowMode === 'Wrap') {\n                        this.element.classList.add(WRAPMODECLASS);\n                    }\n                    if (oldProp.overflowMode === 'Scroll') {\n                        this.element.classList.remove(SCROLLMODECLASS);\n                    }\n                    else if (newProp.overflowMode === 'Scroll') {\n                        this.element.classList.add(SCROLLMODECLASS);\n                    }\n                    break;\n                case 'url':\n                    this.initItems();\n                    this.reRenderItems();\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    if ((oldProp.cssClass && oldProp.cssClass.indexOf(ICONRIGHT) > -1) && !(newProp.cssClass &&\n                        newProp.cssClass.indexOf(ICONRIGHT) > -1) || !(oldProp.cssClass && oldProp.cssClass.indexOf(ICONRIGHT) > -1) &&\n                        (newProp.cssClass && newProp.cssClass.indexOf(ICONRIGHT) > -1)) {\n                        this.reRenderItems();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.element.classList.toggle('e-rtl');\n                    break;\n                case 'disabled':\n                    this.element.classList.toggle(DISABLEDCLASS);\n                    this.element.setAttribute(ARIADISABLED, newProp.disabled + '');\n                    break;\n            }\n        }\n    }\n    wireEvents() {\n        this.delegateClickHanlder = this.documentClickHandler.bind(this);\n        EventHandler.add(document, 'click', this.delegateClickHanlder, this);\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        window.addEventListener('resize', this.resize.bind(this));\n    }\n    popupWireEvents() {\n        EventHandler.add(this.popupObj.element, 'click', this.clickHandler, this);\n        EventHandler.add(this.popupObj.element, 'keydown', this.popupKeyDownHandler, this);\n    }\n    unWireEvents() {\n        EventHandler.remove(document, 'click', this.delegateClickHanlder);\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        window.removeEventListener('resize', this.resize.bind(this));\n        if (this.popupObj) {\n            EventHandler.remove(this.popupObj.element, 'click', this.clickHandler);\n            EventHandler.remove(this.popupObj.element, 'keydown', this.popupKeyDownHandler);\n        }\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    getPersistData() {\n        return this.addOnPersist(['activeItem']);\n    }\n    /**\n     * Get module name.\n     *\n     * @private\n     * @returns {string} - Module Name\n     */\n    getModuleName() {\n        return 'breadcrumb';\n    }\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        let classes = [];\n        let attributes$$1 = ['aria-label'];\n        if (this.cssClass) {\n            classes.concat(this.cssClass.split(' '));\n        }\n        if (this.enableRtl) {\n            classes.push('e-rtl');\n        }\n        if (this.disabled) {\n            classes.push(DISABLEDCLASS);\n            attributes$$1.push(ARIADISABLED);\n        }\n        if (this.overflowMode === 'Wrap') {\n            classes.push(WRAPMODECLASS);\n        }\n        else if (this.overflowMode === 'Scroll') {\n            classes.push(SCROLLMODECLASS);\n        }\n        this.unWireEvents();\n        this.element.innerHTML = '';\n        removeClass([this.element], classes);\n        attributes$$1.forEach((attribute) => {\n            this.element.removeAttribute(attribute);\n        });\n        super.destroy();\n    }\n};\n__decorate$10([\n    Property('')\n], Breadcrumb.prototype, \"url\", void 0);\n__decorate$10([\n    Collection([], BreadcrumbItem)\n], Breadcrumb.prototype, \"items\", void 0);\n__decorate$10([\n    Property('')\n], Breadcrumb.prototype, \"activeItem\", void 0);\n__decorate$10([\n    Property(-1)\n], Breadcrumb.prototype, \"maxItems\", void 0);\n__decorate$10([\n    Property('Menu')\n], Breadcrumb.prototype, \"overflowMode\", void 0);\n__decorate$10([\n    Property('')\n], Breadcrumb.prototype, \"cssClass\", void 0);\n__decorate$10([\n    Property(null)\n], Breadcrumb.prototype, \"itemTemplate\", void 0);\n__decorate$10([\n    Property('/')\n], Breadcrumb.prototype, \"separatorTemplate\", void 0);\n__decorate$10([\n    Property(true)\n], Breadcrumb.prototype, \"enableNavigation\", void 0);\n__decorate$10([\n    Property(false)\n], Breadcrumb.prototype, \"enableActiveItemNavigation\", void 0);\n__decorate$10([\n    Property(false)\n], Breadcrumb.prototype, \"disabled\", void 0);\n__decorate$10([\n    Property('')\n], Breadcrumb.prototype, \"locale\", void 0);\n__decorate$10([\n    Event()\n], Breadcrumb.prototype, \"beforeItemRender\", void 0);\n__decorate$10([\n    Event()\n], Breadcrumb.prototype, \"itemClick\", void 0);\n__decorate$10([\n    Event()\n], Breadcrumb.prototype, \"created\", void 0);\nBreadcrumb = __decorate$10([\n    NotifyPropertyChanges\n], Breadcrumb);\n\n/**\n * Breadcrumb modules\n */\n\nvar __decorate$11 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n// Constant variables\nconst CLS_CAROUSEL = 'e-carousel';\nconst CLS_ACTIVE$2 = 'e-active';\nconst CLS_RTL$5 = 'e-rtl';\nconst CLS_ITEMS$2 = 'e-carousel-items';\nconst CLS_ITEM$3 = 'e-carousel-item';\nconst CLS_PREVIOUS = 'e-previous';\nconst CLS_NEXT = 'e-next';\nconst CLS_PREV_ICON = 'e-previous-icon';\nconst CLS_NEXT_ICON = 'e-next-icon';\nconst CLS_NAVIGATORS = 'e-carousel-navigators';\nconst CLS_INDICATORS = 'e-carousel-indicators';\nconst CLS_INDICATOR_BARS = 'e-indicator-bars';\nconst CLS_INDICATOR_BAR = 'e-indicator-bar';\nconst CLS_INDICATOR$1 = 'e-indicator';\nconst CLS_ICON$1 = 'e-icons';\nconst CLS_PLAY_PAUSE = 'e-play-pause';\nconst CLS_PLAY_ICON = 'e-play-icon';\nconst CLS_PAUSE_ICON = 'e-pause-icon';\nconst CLS_PREV_BUTTON = 'e-previous-button';\nconst CLS_NEXT_BUTTON = 'e-next-button';\nconst CLS_PLAY_BUTTON = 'e-play-button';\nconst CLS_FLAT = 'e-flat';\nconst CLS_ROUND = 'e-round';\nconst CLS_HOVER_ARROWS = 'e-hover-arrows';\nconst CLS_HOVER = 'e-carousel-hover';\nconst CLS_TEMPLATE$2 = 'e-template';\nconst CLS_SLIDE_ANIMATION = 'e-carousel-slide-animation';\nconst CLS_FADE_ANIMATION = 'e-carousel-fade-animation';\nconst CLS_CUSTOM_ANIMATION = 'e-carousel-custom-animation';\nconst CLS_ANIMATION_NONE = 'e-carousel-animation-none';\nconst CLS_PREV_SLIDE = 'e-prev';\nconst CLS_NEXT_SLIDE = 'e-next';\nconst CLS_TRANSITION_START = 'e-transition-start';\nconst CLS_TRANSITION_END = 'e-transition-end';\n/** Specifies the carousel individual item. */\nclass CarouselItem extends ChildProperty {\n}\n__decorate$11([\n    Property()\n], CarouselItem.prototype, \"cssClass\", void 0);\n__decorate$11([\n    Property()\n], CarouselItem.prototype, \"interval\", void 0);\n__decorate$11([\n    Property()\n], CarouselItem.prototype, \"template\", void 0);\n__decorate$11([\n    Property()\n], CarouselItem.prototype, \"htmlAttributes\", void 0);\nlet Carousel = class Carousel extends Component {\n    /**\n     * Constructor for creating the Carousel widget\n     *\n     * @param {CarouselModel} options Accepts the carousel model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    getModuleName() {\n        return CLS_CAROUSEL.replace('e-', '');\n    }\n    getPersistData() {\n        return this.addOnPersist(['selectedIndex']);\n    }\n    preRender() {\n        this.keyConfigs = {\n            home: 'home',\n            end: 'end',\n            space: 'space',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow'\n        };\n        const defaultLocale = {\n            nextSlide: 'Next slide',\n            of: 'of',\n            pauseSlideTransition: 'Pause slide transition',\n            playSlideTransition: 'Play slide transition',\n            previousSlide: 'Previous slide',\n            slide: 'Slide',\n            slideShow: 'Slide show'\n        };\n        this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale);\n    }\n    render() {\n        this.initialize();\n        this.renderSlides();\n        this.renderNavigators();\n        this.renderPlayButton();\n        this.renderIndicators();\n        this.applyAnimation();\n        this.wireEvents();\n    }\n    onPropertyChanged(newProp, oldProp) {\n        let target;\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'animationEffect':\n                    this.applyAnimation();\n                    break;\n                case 'cssClass':\n                    classList(this.element, [newProp.cssClass], [oldProp.cssClass]);\n                    break;\n                case 'selectedIndex':\n                    this.setActiveSlide(this.selectedIndex, oldProp.selectedIndex > this.selectedIndex ? 'Previous' : 'Next');\n                    this.autoSlide();\n                    break;\n                case 'htmlAttributes':\n                    if (!isNullOrUndefined(this.htmlAttributes)) {\n                        this.setHtmlAttributes(this.htmlAttributes, this.element);\n                    }\n                    break;\n                case 'enableTouchSwipe':\n                    if (!this.enableTouchSwipe && this.touchModule) {\n                        this.touchModule.destroy();\n                    }\n                    if (this.element.querySelector(`.${CLS_ITEMS$2}`)) {\n                        this.renderTouchActions();\n                    }\n                    break;\n                case 'loop':\n                    if (this.loop && isNullOrUndefined(this.autoSlideInterval)) {\n                        this.applySlideInterval();\n                    }\n                    this.handleNavigatorsActions(this.selectedIndex);\n                    break;\n                case 'enableRtl':\n                    if (this.enableRtl) {\n                        addClass([this.element], CLS_RTL$5);\n                    }\n                    else {\n                        removeClass([this.element], CLS_RTL$5);\n                    }\n                    break;\n                case 'buttonsVisibility':\n                    target = this.element.querySelector(`.${CLS_NAVIGATORS}`);\n                    if (target) {\n                        switch (this.buttonsVisibility) {\n                            case 'Hidden':\n                                this.resetTemplates(['previousButtonTemplate', 'nextButtonTemplate']);\n                                remove(target);\n                                break;\n                            case 'VisibleOnHover':\n                                addClass([].slice.call(target.childNodes), CLS_HOVER_ARROWS);\n                                break;\n                            case 'Visible':\n                                removeClass([].slice.call(target.childNodes), CLS_HOVER_ARROWS);\n                                break;\n                        }\n                    }\n                    else {\n                        this.renderNavigators();\n                        this.renderPlayButton();\n                    }\n                    break;\n                case 'width':\n                    setStyleAttribute(this.element, { 'width': formatUnit(this.width) });\n                    break;\n                case 'height':\n                    setStyleAttribute(this.element, { 'height': formatUnit(this.height) });\n                    break;\n                case 'autoPlay':\n                    if (this.showPlayButton && isNullOrUndefined(this.playButtonTemplate)) {\n                        this.playButtonClickHandler(null, true);\n                    }\n                    this.autoSlide();\n                    break;\n                case 'interval':\n                    this.autoSlide();\n                    break;\n                case 'showIndicators':\n                    target = this.element.querySelector(`.${CLS_INDICATORS}`);\n                    if (!this.showIndicators && target) {\n                        this.resetTemplates(['indicatorsTemplate']);\n                        remove(target);\n                    }\n                    this.renderIndicators();\n                    break;\n                case 'showPlayButton':\n                    target = this.element.querySelector(`.${CLS_PLAY_PAUSE}`);\n                    if (!this.showPlayButton && target) {\n                        remove(target);\n                        this.resetTemplates(['playButtonTemplate']);\n                    }\n                    this.renderPlayButton();\n                    break;\n                case 'items':\n                case 'dataSource':\n                    target = this.element.querySelector(`.${CLS_ITEMS$2}`);\n                    if (target) {\n                        this.resetTemplates(['itemTemplate']);\n                        remove(target);\n                    }\n                    this.renderSlides();\n                    break;\n            }\n        }\n    }\n    initialize() {\n        const carouselClasses = [];\n        if (this.cssClass) {\n            carouselClasses.push(this.cssClass);\n        }\n        if (this.enableRtl) {\n            carouselClasses.push(CLS_RTL$5);\n        }\n        addClass([this.element], carouselClasses);\n        setStyleAttribute(this.element, { 'width': formatUnit(this.width), 'height': formatUnit(this.height) });\n        attributes(this.element, { 'tabindex': '0', 'aria-roledescription': 'carousel', 'aria-label': this.localeObj.getConstant('slideShow') });\n        if (!isNullOrUndefined(this.htmlAttributes)) {\n            this.setHtmlAttributes(this.htmlAttributes, this.element);\n        }\n    }\n    renderSlides() {\n        const itemsContainer = this.createElement('div', { className: CLS_ITEMS$2, attrs: { 'aria-live': this.autoPlay ? 'off' : 'polite' } });\n        this.element.appendChild(itemsContainer);\n        if (this.items.length > 0) {\n            this.slideItems = this.items;\n            this.items.forEach((item, index) => {\n                this.renderSlide(item, item.template, index, itemsContainer);\n            });\n        }\n        else if (this.dataSource.length > 0) {\n            this.slideItems = this.dataSource;\n            this.dataSource.forEach((item, index) => {\n                this.renderSlide(item, this.itemTemplate, index, itemsContainer);\n            });\n        }\n        this.renderTemplates();\n        this.autoSlide();\n        this.renderTouchActions();\n        this.renderKeyboardActions();\n    }\n    renderSlide(item, itemTemplate, index, container) {\n        const itemEle = this.createElement('div', {\n            id: getUniqueID('carousel_item'),\n            className: `${CLS_ITEM$3} ${item.cssClass ? item.cssClass : ''} ${this.selectedIndex === index ? CLS_ACTIVE$2 : ''}`,\n            attrs: {\n                'aria-hidden': this.selectedIndex === index ? 'false' : 'true', 'data-index': index.toString(),\n                'aria-role': 'group', 'aria-roledescription': 'slide'\n            }\n        });\n        if (!isNullOrUndefined(item.htmlAttributes)) {\n            this.setHtmlAttributes(item.htmlAttributes, itemEle);\n        }\n        const templateId = this.element.id + '_template';\n        const template = this.templateParser(itemTemplate)(item, this, 'itemTemplate', templateId, false);\n        append(template, itemEle);\n        container.appendChild(itemEle);\n    }\n    renderNavigators() {\n        if (this.buttonsVisibility === 'Hidden') {\n            return;\n        }\n        const navigators = this.createElement('div', { className: CLS_NAVIGATORS });\n        const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n        itemsContainer.insertAdjacentElement('afterend', navigators);\n        this.renderNavigatorButton('Previous');\n        this.renderNavigatorButton('Next');\n        this.renderTemplates();\n    }\n    renderNavigatorButton(direction) {\n        const buttonContainer = this.createElement('div', {\n            className: (direction === 'Previous' ? CLS_PREVIOUS : CLS_NEXT) + ' ' + (this.buttonsVisibility === 'VisibleOnHover' ? CLS_HOVER_ARROWS : ''),\n            attrs: { 'aria-label': this.localeObj.getConstant(direction === 'Previous' ? 'previousSlide' : 'nextSlide') }\n        });\n        if (direction === 'Previous' && this.previousButtonTemplate) {\n            addClass([buttonContainer], CLS_TEMPLATE$2);\n            const templateId = this.element.id + '_previousButtonTemplate';\n            const template = this.templateParser(this.previousButtonTemplate)({ type: 'Previous' }, this, 'previousButtonTemplate', templateId, false);\n            append(template, buttonContainer);\n        }\n        else if (direction === 'Next' && this.nextButtonTemplate) {\n            addClass([buttonContainer], CLS_TEMPLATE$2);\n            const templateId = this.element.id + '_nextButtonTemplate';\n            const template = this.templateParser(this.nextButtonTemplate)({ type: 'Next' }, this, 'nextButtonTemplate', templateId, false);\n            append(template, buttonContainer);\n        }\n        else {\n            const button = this.createElement('button');\n            const buttonObj = new Button({\n                cssClass: CLS_FLAT + ' ' + CLS_ROUND + ' ' + (direction === 'Previous' ? CLS_PREV_BUTTON : CLS_NEXT_BUTTON),\n                iconCss: CLS_ICON$1 + ' ' + (direction === 'Previous' ? CLS_PREV_ICON : CLS_NEXT_ICON),\n                enableRtl: this.enableRtl,\n                disabled: !this.loop && this.selectedIndex === (direction === 'Previous' ? 0 : this.slideItems.length - 1)\n            });\n            buttonObj.appendTo(button);\n            buttonContainer.appendChild(button);\n        }\n        this.element.querySelector('.' + CLS_NAVIGATORS).appendChild(buttonContainer);\n        EventHandler.add(buttonContainer, 'click', this.navigatorClickHandler, this);\n    }\n    renderPlayButton() {\n        if (this.buttonsVisibility === 'Hidden' || !this.showPlayButton) {\n            return;\n        }\n        const playPauseWrap = this.createElement('div', {\n            className: CLS_PLAY_PAUSE + ' ' + (this.buttonsVisibility === 'VisibleOnHover' ? CLS_HOVER_ARROWS : '')\n        });\n        if (this.playButtonTemplate) {\n            addClass([playPauseWrap], CLS_TEMPLATE$2);\n            const templateId = this.element.id + '_playButtonTemplate';\n            const template = this.templateParser(this.playButtonTemplate)({}, this, 'playButtonTemplate', templateId, false);\n            append(template, playPauseWrap);\n        }\n        else {\n            const playButton = this.createElement('button', {\n                attrs: { 'aria-label': this.localeObj.getConstant(this.autoPlay ? 'pauseSlideTransition' : 'playSlideTransition') }\n            });\n            const isLastSlide = this.selectedIndex === this.slideItems.length - 1 && !this.loop;\n            const buttonObj = new Button({\n                cssClass: CLS_FLAT + ' ' + CLS_ROUND + ' ' + CLS_PLAY_BUTTON,\n                iconCss: CLS_ICON$1 + ' ' + (this.autoPlay && !isLastSlide ? CLS_PAUSE_ICON : CLS_PLAY_ICON),\n                isToggle: true,\n                enableRtl: this.enableRtl\n            });\n            if (isLastSlide) {\n                this.setProperties({ autoPlay: false }, true);\n                playButton.setAttribute('aria-label', this.localeObj.getConstant('playSlideTransition'));\n                const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n                itemsContainer.setAttribute('aria-live', 'polite');\n            }\n            buttonObj.appendTo(playButton);\n            playPauseWrap.appendChild(playButton);\n        }\n        const navigators = this.element.querySelector(`.${CLS_NAVIGATORS}`);\n        navigators.insertBefore(playPauseWrap, navigators.lastElementChild);\n        this.renderTemplates();\n        EventHandler.add(playPauseWrap, 'click', this.playButtonClickHandler, this);\n    }\n    renderIndicators() {\n        if (!this.showIndicators) {\n            return;\n        }\n        const indicatorWrap = this.createElement('div', { className: CLS_INDICATORS });\n        const indicatorBars = this.createElement('div', { className: CLS_INDICATOR_BARS });\n        indicatorWrap.appendChild(indicatorBars);\n        if (this.slideItems) {\n            this.slideItems.forEach((item, index) => {\n                const indicatorBar = this.createElement('div', {\n                    className: CLS_INDICATOR_BAR + ' ' + (this.selectedIndex === index ? CLS_ACTIVE$2 : ''),\n                    attrs: { 'data-index': index.toString(), 'aria-current': this.selectedIndex === index ? 'true' : 'false' }\n                });\n                if (this.indicatorsTemplate) {\n                    addClass([indicatorBar], CLS_TEMPLATE$2);\n                    const templateId = this.element.id + '_indicatorsTemplate';\n                    const template = this.templateParser(this.indicatorsTemplate)({ index: index, selectedIndex: this.selectedIndex }, this, 'indicatorsTemplate', templateId, false);\n                    append(template, indicatorBar);\n                }\n                else {\n                    const indicator = this.createElement('button', { className: CLS_INDICATOR$1 });\n                    indicatorBar.appendChild(indicator);\n                    indicator.appendChild(this.createElement('div', {\n                        attrs: {\n                            'aria-label': this.localeObj.getConstant('slide') + ' ' + (index + 1) + ' ' + this.localeObj.getConstant('of') + ' ' + this.slideItems.length\n                        }\n                    }));\n                    const buttonObj = new Button({ cssClass: 'e-flat e-small' });\n                    buttonObj.appendTo(indicator);\n                }\n                indicatorBars.appendChild(indicatorBar);\n                EventHandler.add(indicatorBar, 'click', this.indicatorClickHandler, this);\n            });\n        }\n        this.element.appendChild(indicatorWrap);\n    }\n    renderKeyboardActions() {\n        this.keyModule = new KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\n    }\n    renderTouchActions() {\n        if (!this.enableTouchSwipe) {\n            return;\n        }\n        this.touchModule = new Touch(this.element, { swipe: this.swipeHandler.bind(this) });\n    }\n    applyAnimation() {\n        removeClass([this.element], [CLS_CUSTOM_ANIMATION, CLS_FADE_ANIMATION, CLS_SLIDE_ANIMATION, CLS_ANIMATION_NONE]);\n        switch (this.animationEffect) {\n            case 'Slide':\n                addClass([this.element], CLS_SLIDE_ANIMATION);\n                break;\n            case 'Fade':\n                addClass([this.element], CLS_FADE_ANIMATION);\n                break;\n            case 'None':\n                addClass([this.element], CLS_ANIMATION_NONE);\n                break;\n            case 'Custom':\n                addClass([this.element], CLS_CUSTOM_ANIMATION);\n                break;\n        }\n    }\n    autoSlide() {\n        this.resetSlideInterval();\n        this.applySlideInterval();\n    }\n    autoSlideChange() {\n        const activeSlide = this.element.querySelector(`.${CLS_ACTIVE$2}`);\n        if (isNullOrUndefined(activeSlide)) {\n            return;\n        }\n        const activeIndex = parseInt(activeSlide.dataset.index, 10);\n        if (!this.loop && activeIndex === this.slideItems.length - 1) {\n            this.resetSlideInterval();\n        }\n        else {\n            const index = (activeIndex + 1) % this.slideItems.length;\n            if (!this.element.classList.contains(CLS_HOVER)) {\n                this.setActiveSlide(index, 'Next');\n            }\n            this.autoSlide();\n        }\n    }\n    applySlideInterval() {\n        if (!this.autoPlay || this.element.classList.contains(CLS_HOVER)) {\n            return;\n        }\n        let itemInterval = this.interval;\n        if (this.items.length > 0 && !isNullOrUndefined(this.items[this.selectedIndex].interval)) {\n            itemInterval = this.items[this.selectedIndex].interval;\n        }\n        this.autoSlideInterval = setInterval(() => this.autoSlideChange(), itemInterval);\n    }\n    resetSlideInterval() {\n        clearInterval(this.autoSlideInterval);\n        this.autoSlideInterval = null;\n    }\n    getSlideIndex(direction) {\n        let currentIndex = this.selectedIndex;\n        if (direction === 'Previous') {\n            currentIndex--;\n            if (currentIndex < 0) {\n                currentIndex = this.slideItems.length - 1;\n            }\n        }\n        else {\n            currentIndex++;\n            if (currentIndex === this.slideItems.length) {\n                currentIndex = 0;\n            }\n        }\n        return currentIndex;\n    }\n    setActiveSlide(currentIndex, direction, isSwiped = false) {\n        if (this.element.querySelectorAll(`.${CLS_ITEM$3}.${CLS_PREV_SLIDE},.${CLS_ITEM$3}.${CLS_NEXT_SLIDE}`).length > 0) {\n            return;\n        }\n        const allSlides = [].slice.call(this.element.querySelectorAll(`.${CLS_ITEM$3}`));\n        const activeSlide = this.element.querySelector(`.${CLS_ITEM$3}.${CLS_ACTIVE$2}`);\n        if (isNullOrUndefined(activeSlide) && this.showIndicators) {\n            const activeIndicator = this.element.querySelector(`.${CLS_INDICATOR_BAR}.${CLS_ACTIVE$2}`);\n            const activeIndex = parseInt(activeIndicator.dataset.index, 10);\n            addClass([allSlides[activeIndex]], CLS_ACTIVE$2);\n            return;\n        }\n        else if (isNullOrUndefined(activeSlide)) {\n            addClass([allSlides[currentIndex]], CLS_ACTIVE$2);\n            return;\n        }\n        const activeIndex = parseInt(activeSlide.dataset.index, 10);\n        const currentSlide = allSlides[currentIndex];\n        const eventArgs = {\n            currentIndex: activeIndex,\n            nextIndex: currentIndex,\n            currentSlide: activeSlide,\n            nextSlide: currentSlide,\n            slideDirection: direction,\n            isSwiped: isSwiped,\n            cancel: false\n        };\n        this.trigger('slideChanging', eventArgs, (args) => {\n            if (args.cancel) {\n                return;\n            }\n            this.setProperties({ selectedIndex: currentIndex }, true);\n            attributes(args.currentSlide, { 'aria-hidden': 'true' });\n            attributes(args.nextSlide, { 'aria-hidden': 'false' });\n            const slideIndicators = [].slice.call(this.element.querySelectorAll(`.${CLS_INDICATOR_BAR}`));\n            if (slideIndicators.length > 0) {\n                attributes(slideIndicators[activeIndex], { 'aria-current': 'false' });\n                attributes(slideIndicators[currentIndex], { 'aria-current': 'true' });\n                removeClass(slideIndicators, CLS_ACTIVE$2);\n                addClass([slideIndicators[currentIndex]], CLS_ACTIVE$2);\n            }\n            this.slideChangedEventArgs = {\n                currentIndex: args.nextIndex,\n                previousIndex: args.currentIndex,\n                currentSlide: args.nextSlide,\n                previousSlide: args.currentSlide,\n                slideDirection: direction,\n                isSwiped: isSwiped\n            };\n            let slideHeight;\n            if (this.animationEffect === 'Slide') {\n                if (direction === 'Previous') {\n                    addClass([args.nextSlide], CLS_PREV_SLIDE);\n                    slideHeight = args.nextSlide.offsetHeight;\n                    addClass([args.currentSlide, args.nextSlide], CLS_TRANSITION_END);\n                }\n                else {\n                    addClass([args.nextSlide], CLS_NEXT_SLIDE);\n                    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                    slideHeight = args.nextSlide.offsetHeight;\n                    addClass([args.currentSlide, args.nextSlide], CLS_TRANSITION_START);\n                }\n            }\n            else if (this.animationEffect === 'Fade') {\n                removeClass([args.currentSlide], CLS_ACTIVE$2);\n                addClass([args.nextSlide], CLS_ACTIVE$2);\n            }\n            else if (this.animationEffect === 'Custom') {\n                if (direction === 'Previous') {\n                    addClass([args.nextSlide], CLS_NEXT_SLIDE);\n                    addClass([args.currentSlide], CLS_PREV_SLIDE);\n                }\n                else {\n                    addClass([args.currentSlide], CLS_PREV_SLIDE);\n                    addClass([args.nextSlide], CLS_NEXT_SLIDE);\n                }\n            }\n            else {\n                this.onTransitionEnd();\n            }\n            this.handleNavigatorsActions(currentIndex);\n        });\n    }\n    onTransitionEnd() {\n        if (this.slideChangedEventArgs) {\n            addClass([this.slideChangedEventArgs.currentSlide], CLS_ACTIVE$2);\n            removeClass([this.slideChangedEventArgs.previousSlide], CLS_ACTIVE$2);\n            this.trigger('slideChanged', this.slideChangedEventArgs, () => {\n                removeClass(this.element.querySelectorAll(`.${CLS_ITEM$3}`), [CLS_PREV_SLIDE, CLS_NEXT_SLIDE, CLS_TRANSITION_START, CLS_TRANSITION_END]);\n                this.slideChangedEventArgs = null;\n            });\n        }\n    }\n    setHtmlAttributes(attribute, element) {\n        const keys = Object.keys(attribute);\n        for (const key of keys) {\n            if (key === 'class') {\n                addClass([element], attribute[key]);\n            }\n            else {\n                element.setAttribute(key, attribute[key]);\n            }\n        }\n    }\n    templateParser(template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    }\n    getNavigatorState(target, isPrevious) {\n        const button = target.querySelector(`.${isPrevious ? CLS_PREV_BUTTON : CLS_NEXT_BUTTON}`);\n        if (button) {\n            const buttonObj = getInstance(button, Button);\n            return buttonObj.disabled;\n        }\n        return false;\n    }\n    navigatorClickHandler(e) {\n        const target = e.currentTarget;\n        const isDisabled = this.getNavigatorState(target, target.classList.contains(CLS_PREVIOUS));\n        if (isDisabled) {\n            return;\n        }\n        const direction = target.classList.contains(CLS_PREVIOUS) ? 'Previous' : 'Next';\n        this.setActiveSlide(this.getSlideIndex(direction), direction);\n        this.autoSlide();\n    }\n    indicatorClickHandler(e) {\n        const target = closest(e.target, `.${CLS_INDICATOR_BAR}`);\n        const index = parseInt(target.dataset.index, 10);\n        if (this.selectedIndex !== index) {\n            this.setActiveSlide(index, this.selectedIndex > index ? 'Previous' : 'Next');\n            this.autoSlide();\n        }\n    }\n    playButtonClickHandler(e, isPropertyChange = false) {\n        const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n        if (playButton) {\n            const buttonObj = getInstance(playButton, Button);\n            if (!isPropertyChange) {\n                this.setProperties({ autoPlay: !this.autoPlay }, true);\n            }\n            playButton.setAttribute('aria-label', this.localeObj.getConstant(this.autoPlay ? 'pauseSlideTransition' : 'playSlideTransition'));\n            buttonObj.iconCss = CLS_ICON$1 + ' ' + (this.autoPlay ? CLS_PAUSE_ICON : CLS_PLAY_ICON);\n            buttonObj.dataBind();\n            const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n            itemsContainer.setAttribute('aria-live', this.autoPlay ? 'off' : 'polite');\n            if (this.autoPlay && !this.loop && this.selectedIndex === this.slideItems.length - 1) {\n                this.setActiveSlide(0, 'Next');\n            }\n            this.autoSlide();\n        }\n    }\n    keyHandler(e) {\n        let direction;\n        let slideIndex;\n        let isSlideTransition = false;\n        const target = e.target;\n        e.preventDefault();\n        switch (e.action) {\n            case 'space':\n                if (this.showIndicators && target.classList.contains(CLS_INDICATOR$1)) {\n                    target.click();\n                }\n                else if (target.classList.contains(CLS_CAROUSEL) || target.classList.contains(CLS_PLAY_BUTTON)) {\n                    this.playButtonClickHandler(e);\n                }\n                else if (target.classList.contains(CLS_NEXT_BUTTON)) {\n                    this.next();\n                }\n                else if (target.classList.contains(CLS_PREV_BUTTON)) {\n                    this.prev();\n                }\n                break;\n            case 'end':\n                slideIndex = this.slideItems.length - 1;\n                direction = 'Next';\n                isSlideTransition = true;\n                break;\n            case 'home':\n                slideIndex = 0;\n                direction = 'Previous';\n                isSlideTransition = true;\n                break;\n            case 'moveUp':\n            case 'moveLeft':\n            case 'moveDown':\n            case 'moveRight':\n                if (this.showIndicators && isNullOrUndefined(this.indicatorsTemplate)) {\n                    this.element.focus();\n                }\n                direction = (e.action === 'moveUp' || e.action === 'moveLeft') ? 'Previous' : 'Next';\n                slideIndex = this.getSlideIndex(direction);\n                isSlideTransition = !this.isSuspendSlideTransition(slideIndex, direction);\n                break;\n        }\n        if (isSlideTransition) {\n            this.setActiveSlide(slideIndex, direction);\n            this.autoSlide();\n            isSlideTransition = false;\n        }\n    }\n    swipeHandler(e) {\n        if (this.element.classList.contains(CLS_HOVER)) {\n            return;\n        }\n        const direction = (e.swipeDirection === 'Right') ? 'Previous' : 'Next';\n        const slideIndex = this.getSlideIndex(direction);\n        if (!this.isSuspendSlideTransition(slideIndex, direction)) {\n            this.setActiveSlide(slideIndex, direction, true);\n            this.autoSlide();\n        }\n    }\n    isSuspendSlideTransition(index, direction) {\n        return !this.loop && (direction === 'Next' && index === 0 || direction === 'Previous' && index === this.slideItems.length - 1);\n    }\n    handleNavigatorsActions(index) {\n        if (this.buttonsVisibility === 'Hidden') {\n            return;\n        }\n        if (this.showPlayButton) {\n            const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n            const isLastSlide = this.selectedIndex === this.slideItems.length - 1 && !this.loop;\n            let isButtonUpdate = isNullOrUndefined(this.playButtonTemplate) && playButton && isLastSlide;\n            if (isNullOrUndefined(this.playButtonTemplate) && playButton && !isLastSlide) {\n                isButtonUpdate = !playButton.classList.contains(CLS_ACTIVE$2);\n            }\n            if (isButtonUpdate) {\n                this.setProperties({ autoPlay: !isLastSlide }, true);\n                playButton.setAttribute('aria-label', this.localeObj.getConstant(this.autoPlay ? 'pauseSlideTransition' : 'playSlideTransition'));\n                const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n                itemsContainer.setAttribute('aria-live', this.autoPlay ? 'off' : 'polite');\n                const buttonObj = getInstance(playButton, Button);\n                buttonObj.iconCss = CLS_ICON$1 + ' ' + (this.autoPlay ? CLS_PAUSE_ICON : CLS_PLAY_ICON);\n                buttonObj.dataBind();\n            }\n        }\n        const prevButton = this.element.querySelector(`.${CLS_PREV_BUTTON}`);\n        if (prevButton && isNullOrUndefined(this.previousButtonTemplate)) {\n            const buttonObj = getInstance(prevButton, Button);\n            buttonObj.disabled = !this.loop && index === 0;\n            buttonObj.dataBind();\n        }\n        const nextButton = this.element.querySelector(`.${CLS_NEXT_BUTTON}`);\n        if (nextButton && isNullOrUndefined(this.nextButtonTemplate)) {\n            const buttonObj = getInstance(nextButton, Button);\n            buttonObj.disabled = !this.loop && index === this.slideItems.length - 1;\n            buttonObj.dataBind();\n        }\n    }\n    onHoverActions(e) {\n        const navigator = this.element.querySelector(`.${CLS_NAVIGATORS}`);\n        switch (e.type) {\n            case 'mouseenter':\n                if (this.buttonsVisibility === 'VisibleOnHover' && navigator) {\n                    removeClass([].slice.call(navigator.childNodes), CLS_HOVER_ARROWS);\n                }\n                if (this.pauseOnHover) {\n                    addClass([this.element], CLS_HOVER);\n                }\n                break;\n            case 'mouseleave':\n                if (this.buttonsVisibility === 'VisibleOnHover' && navigator) {\n                    addClass([].slice.call(navigator.childNodes), CLS_HOVER_ARROWS);\n                }\n                removeClass([this.element], CLS_HOVER);\n                break;\n        }\n        this.autoSlide();\n    }\n    onFocusActions(e) {\n        switch (e.type) {\n            case 'focusin':\n                addClass([this.element], CLS_HOVER);\n                break;\n            case 'focusout':\n                removeClass([this.element], CLS_HOVER);\n                break;\n        }\n        this.autoSlide();\n    }\n    destroyButtons() {\n        const buttonCollections = [].slice.call(this.element.querySelectorAll('.e-control.e-btn'));\n        for (const button of buttonCollections) {\n            const instance = getInstance(button, Button);\n            if (instance) {\n                instance.destroy();\n            }\n        }\n    }\n    wireEvents() {\n        EventHandler.add(this.element, 'focusin focusout', this.onFocusActions, this);\n        EventHandler.add(this.element, 'mouseenter mouseleave', this.onHoverActions, this);\n        EventHandler.add(this.element.firstElementChild, 'animationend', this.onTransitionEnd, this);\n        EventHandler.add(this.element.firstElementChild, 'transitionend', this.onTransitionEnd, this);\n    }\n    unWireEvents() {\n        const indicators = [].slice.call(this.element.querySelectorAll(`.${CLS_INDICATOR_BAR}`));\n        indicators.forEach((indicator) => {\n            EventHandler.remove(indicator, 'click', this.indicatorClickHandler);\n        });\n        const navigators = [].slice.call(this.element.querySelectorAll(`.${CLS_PREVIOUS},.${CLS_NEXT}`));\n        navigators.forEach((navigator) => {\n            EventHandler.remove(navigator, 'click', this.navigatorClickHandler);\n        });\n        const playIcon = this.element.querySelector(`.${CLS_PLAY_PAUSE}`);\n        if (playIcon) {\n            EventHandler.remove(playIcon, 'click', this.playButtonClickHandler);\n        }\n        EventHandler.remove(this.element.firstElementChild, 'animationend', this.onTransitionEnd);\n        EventHandler.remove(this.element.firstElementChild, 'transitionend', this.onTransitionEnd);\n        EventHandler.clearEvents(this.element);\n    }\n    /**\n     * Method to transit from the current slide to the previous slide.\n     *\n     * @returns {void}\n     */\n    prev() {\n        if (!this.loop && this.selectedIndex === 0) {\n            return;\n        }\n        const index = (this.selectedIndex === 0) ? this.slideItems.length - 1 : this.selectedIndex - 1;\n        this.setActiveSlide(index, 'Previous');\n        this.autoSlide();\n    }\n    /**\n     * Method to transit from the current slide to the next slide.\n     *\n     * @returns {void}\n     */\n    next() {\n        if (!this.loop && this.selectedIndex === this.slideItems.length - 1) {\n            return;\n        }\n        const index = (this.selectedIndex === this.slideItems.length - 1) ? 0 : this.selectedIndex + 1;\n        this.setActiveSlide(index, 'Next');\n        this.autoSlide();\n    }\n    /**\n     * Method to play the slides programmatically.\n     *\n     * @returns {void}\n     */\n    play() {\n        const playIcon = this.element.querySelector(`.${CLS_PLAY_ICON}`);\n        if (this.showPlayButton && playIcon) {\n            classList(playIcon, [CLS_PAUSE_ICON], [CLS_PLAY_ICON]);\n            const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n            playButton.setAttribute('aria-label', this.localeObj.getConstant('pauseSlideTransition'));\n        }\n        this.setProperties({ autoPlay: true }, true);\n        const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n        itemsContainer.setAttribute('aria-live', 'off');\n        this.applySlideInterval();\n    }\n    /**\n     * Method to pause the slides programmatically.\n     *\n     * @returns {void}\n     */\n    pause() {\n        const pauseIcon = this.element.querySelector(`.${CLS_PAUSE_ICON}`);\n        if (this.showPlayButton && pauseIcon) {\n            const playButton = this.element.querySelector(`.${CLS_PLAY_BUTTON}`);\n            playButton.setAttribute('aria-label', this.localeObj.getConstant('playSlideTransition'));\n            classList(pauseIcon, [CLS_PLAY_ICON], [CLS_PAUSE_ICON]);\n        }\n        this.setProperties({ autoPlay: false }, true);\n        const itemsContainer = this.element.querySelector(`.${CLS_ITEMS$2}`);\n        itemsContainer.setAttribute('aria-live', 'off');\n        this.resetSlideInterval();\n    }\n    /**\n     * Method to render react and angular templates\n     *\n     * @returns {void}\n     * @private\n     */\n    renderTemplates() {\n        if (this.isAngular || this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    /**\n     * Method to reset react and angular templates\n     *\n     * @param {string[]} templates Accepts the template ID\n     * @returns {void}\n     * @private\n     */\n    resetTemplates(templates) {\n        if (this.isAngular || this.isReact) {\n            this.clearTemplate(templates);\n        }\n    }\n    /**\n     * Method for destroy the carousel component.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        this.resetTemplates();\n        if (this.touchModule) {\n            this.touchModule.destroy();\n            this.touchModule = null;\n        }\n        this.keyModule.destroy();\n        this.keyModule = null;\n        this.resetSlideInterval();\n        this.destroyButtons();\n        this.unWireEvents();\n        [].slice.call(this.element.children).forEach((ele) => { this.element.removeChild(ele); });\n        removeClass([this.element], [CLS_CAROUSEL, this.cssClass, CLS_RTL$5]);\n        ['tabindex', 'role', 'style'].forEach((attr) => { this.element.removeAttribute(attr); });\n        super.destroy();\n    }\n};\n__decorate$11([\n    Collection([], CarouselItem)\n], Carousel.prototype, \"items\", void 0);\n__decorate$11([\n    Property('Slide')\n], Carousel.prototype, \"animationEffect\", void 0);\n__decorate$11([\n    Property()\n], Carousel.prototype, \"previousButtonTemplate\", void 0);\n__decorate$11([\n    Property()\n], Carousel.prototype, \"nextButtonTemplate\", void 0);\n__decorate$11([\n    Property()\n], Carousel.prototype, \"indicatorsTemplate\", void 0);\n__decorate$11([\n    Property()\n], Carousel.prototype, \"playButtonTemplate\", void 0);\n__decorate$11([\n    Property()\n], Carousel.prototype, \"cssClass\", void 0);\n__decorate$11([\n    Property([])\n], Carousel.prototype, \"dataSource\", void 0);\n__decorate$11([\n    Property()\n], Carousel.prototype, \"itemTemplate\", void 0);\n__decorate$11([\n    Property(0)\n], Carousel.prototype, \"selectedIndex\", void 0);\n__decorate$11([\n    Property('100%')\n], Carousel.prototype, \"width\", void 0);\n__decorate$11([\n    Property('100%')\n], Carousel.prototype, \"height\", void 0);\n__decorate$11([\n    Property(5000)\n], Carousel.prototype, \"interval\", void 0);\n__decorate$11([\n    Property(true)\n], Carousel.prototype, \"autoPlay\", void 0);\n__decorate$11([\n    Property(true)\n], Carousel.prototype, \"pauseOnHover\", void 0);\n__decorate$11([\n    Property(true)\n], Carousel.prototype, \"loop\", void 0);\n__decorate$11([\n    Property(false)\n], Carousel.prototype, \"showPlayButton\", void 0);\n__decorate$11([\n    Property(true)\n], Carousel.prototype, \"enableTouchSwipe\", void 0);\n__decorate$11([\n    Property(true)\n], Carousel.prototype, \"showIndicators\", void 0);\n__decorate$11([\n    Property('Visible')\n], Carousel.prototype, \"buttonsVisibility\", void 0);\n__decorate$11([\n    Property()\n], Carousel.prototype, \"htmlAttributes\", void 0);\n__decorate$11([\n    Event()\n], Carousel.prototype, \"slideChanging\", void 0);\n__decorate$11([\n    Event()\n], Carousel.prototype, \"slideChanged\", void 0);\nCarousel = __decorate$11([\n    NotifyPropertyChanges\n], Carousel);\n\n/** Carousel export modules */\n\n/**\n * Navigation all modules\n */\n\nexport { MenuAnimationSettings, MenuItem, HScroll, VScroll, addScrolling, destroyScroll, Item, Toolbar, AccordionActionSettings, AccordionAnimationSettings, AccordionItem, Accordion, ContextMenu, Menu, TabActionSettings, TabAnimationSettings, Header, TabItem, Tab, FieldsSettings, ActionSettings, NodeAnimationSettings, TreeView, Sidebar, BreadcrumbItem, Breadcrumb, CarouselItem, Carousel };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}